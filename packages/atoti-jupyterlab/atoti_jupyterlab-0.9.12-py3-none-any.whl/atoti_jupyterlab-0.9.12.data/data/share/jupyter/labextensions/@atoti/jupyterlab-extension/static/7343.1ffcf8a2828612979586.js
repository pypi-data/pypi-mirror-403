"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[7343,9724],{87343:(e,t,r)=>{r.r(t),r.d(t,{useAsync:()=>f,useAsyncAbortable:()=>d,useAsyncCallback:()=>v});var n=r(93345);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u.apply(this,arguments)}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect,c={status:"not-requested",loading:!1,result:void 0,error:void 0},i={status:"loading",loading:!0,result:void 0,error:void 0},s=function(){},a={initialState:function(e){return e&&e.executeOnMount?i:c},executeOnMount:!0,executeOnUpdate:!0,setLoading:function(e){return i},setResult:function(e,t){return{status:"success",loading:!1,result:e,error:void 0}},setError:function(e,t){return{status:"error",loading:!1,result:void 0,error:e}},onSuccess:s,onError:s},l=function(e,t,r){!t&&(t=[]);var c,i=function(e){return u({},a,{},e)}(r),s=(0,n.useState)(null),l=s[0],f=s[1],d=function(e){var t=(0,n.useState)((function(){return e.initialState(e)})),r=t[0],o=t[1],c=(0,n.useCallback)((function(){return o(e.initialState(e))}),[o,e]),i=(0,n.useCallback)((function(){return o(e.setLoading(r))}),[r,o]),s=(0,n.useCallback)((function(t){return o(e.setResult(t,r))}),[r,o]),a=(0,n.useCallback)((function(t){return o(e.setError(t,r))}),[r,o]),l=(0,n.useCallback)((function(e){return o(u({},r,{},e))}),[r,o]);return{value:r,set:o,merge:l,reset:c,setLoading:i,setResult:s,setError:a}}(i),v=(c=(0,n.useRef)(!1),(0,n.useEffect)((function(){return c.current=!0,function(){c.current=!1}}),[]),function(){return c.current}),y=function(){var e=(0,n.useRef)(null);return{set:function(t){return e.current=t},get:function(){return e.current},is:function(t){return e.current===t}}}(),b=function(e){return v()&&y.is(e)},p=function(e){var t=(0,n.useRef)(e);return o((function(){t.current=e})),(0,n.useCallback)((function(){return t.current}),[t])}((function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var u=function(){try{return Promise.resolve(e.apply(void 0,r))}catch(e){return Promise.reject(e)}}();return f(r),y.set(u),d.setLoading(),u.then((function(e){b(u)&&d.setResult(e),i.onSuccess(e,{isCurrent:function(){return y.is(u)}})}),(function(e){b(u)&&d.setError(e),i.onError(e,{isCurrent:function(){return y.is(u)}})})),u})),m=(0,n.useCallback)((function(){return p().apply(void 0,arguments)}),[p]),g=!v();return(0,n.useEffect)((function(){var e=function(){return p().apply(void 0,t)};g&&i.executeOnMount&&e(),!g&&i.executeOnUpdate&&e()}),t),u({},d.value,{set:d.set,merge:d.merge,reset:d.reset,execute:m,currentPromise:y.get(),currentParams:l})};function f(e,t,r){return l(e,t,r)}var d=function(e,t,r){var u=(0,n.useRef)();return f((function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];try{u.current&&u.current.abort();var o=new AbortController;return u.current=o,Promise.resolve(function(t,n){try{var u=Promise.resolve(e.apply(void 0,[o.signal].concat(r)))}catch(e){return n(!0,e)}return u&&u.then?u.then(n.bind(null,!1),n.bind(null,!0)):n(!1,value)}(0,(function(e,t){if(u.current===o&&(u.current=void 0),e)throw t;return t})))}catch(e){return Promise.reject(e)}}),t,r)},v=function(e,t){return l(e,[],u({},t,{executeOnMount:!1,executeOnUpdate:!1}))}}}]);