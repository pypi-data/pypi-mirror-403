"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[7842],{37842:(t,e,a)=>{var r=a(21132),n=a(35646),i=a(14228),o=a(68104),s=a(95893),l=a(26788),c=a(36678),u=a(41665).tickText,h=a(66791),p=h.recordMinTextSize,f=h.clearMinTextSize,d=a(78288),x=a(40200),v=a(26948),b=a(1584),m=b.text,M=b.textposition,g=a(33921).appendArrayPointValue,y=v.TEXTPAD;function L(t){return t.id}function _(t){if(t.ids)return L}function w(t){return(t>0)-(t<0)}function P(t,e){return t<e?1:-1}function A(t,e,a,r){var n;return!e.uniformtext.mode&&B(a)?(r&&(n=r()),t.transition().duration(a.duration).ease(a.easing).each("end",(function(){n&&n()})).each("interrupt",(function(){n&&n()}))):t}function B(t){return t&&t.duration>0}function S(t,e,a,r,n){return!(t<0||e<0)&&(a<=t&&r<=e||a<=e&&r<=t||(n?t>=a*(e/r):e>=r*(t/a)))}function T(t){return"auto"===t?0:t}function k(t,e){var a=Math.PI/180*e,r=Math.abs(Math.sin(a)),n=Math.abs(Math.cos(a));return{x:t.width*n+t.height*r,y:t.width*r+t.height*n}}function V(t,e,a,r,n,i){var o=!!i.isHorizontal,s=!!i.constrained,l=i.angle||0,c=i.anchor,u="end"===c,h="start"===c,p=((i.leftToRight||0)+1)/2,f=1-p,d=i.hasB,x=i.r,v=i.overhead,b=n.width,m=n.height,M=Math.abs(e-t),g=Math.abs(r-a),L=M>2*y&&g>2*y?y:0;M-=2*L,g-=2*L;var _=T(l);"auto"!==l||b<=M&&m<=g||!(b>M||m>g)||(b>g||m>M)&&b<m==M<g||(_+=90);var w,A,B=k(n,_);if(x&&x-v>y){var S=function(t,e,a,r,n,i,o,s,l){var c,u,h,p,f=Math.max(0,Math.abs(e-t)-2*y),d=Math.max(0,Math.abs(r-a)-2*y),x=i-y,v=o?x-Math.sqrt(x*x-(x-o)*(x-o)):x,b=l?2*x:s?x-o:2*v,m=l?2*x:s?2*v:x-o;return n.y/n.x>=d/(f-b)?p=d/n.y:n.y/n.x<=(d-m)/f?p=f/n.x:!l&&s?(c=n.x*n.x+n.y*n.y/4,h=(f-x)*(f-x)+(d/2-x)*(d/2-x)-x*x,p=(-(u=-2*n.x*(f-x)-n.y*(d/2-x))+Math.sqrt(u*u-4*c*h))/(2*c)):l?(c=(n.x*n.x+n.y*n.y)/4,h=(f/2-x)*(f/2-x)+(d/2-x)*(d/2-x)-x*x,p=(-(u=-n.x*(f/2-x)-n.y*(d/2-x))+Math.sqrt(u*u-4*c*h))/(2*c)):(c=n.x*n.x/4+n.y*n.y,h=(f/2-x)*(f/2-x)+(d-x)*(d-x)-x*x,p=(-(u=-n.x*(f/2-x)-2*n.y*(d-x))+Math.sqrt(u*u-4*c*h))/(2*c)),{scale:p=Math.min(1,p),pad:s?Math.max(0,x-Math.sqrt(Math.max(0,x*x-(x-(d-n.y*p)/2)*(x-(d-n.y*p)/2)))-o):Math.max(0,x-Math.sqrt(Math.max(0,x*x-(x-(f-n.x*p)/2)*(x-(f-n.x*p)/2)))-o)}}(t,e,a,r,B,x,v,o,d);w=S.scale,A=S.pad}else w=1,s&&(w=Math.min(1,M/B.x,g/B.y)),A=0;var V=n.left*f+n.right*p,R=(n.top+n.bottom)/2,q=(t+y)*f+(e-y)*p,z=(a+r)/2,C=0,H=0;if(h||u){var I=(o?B.x:B.y)/2;x&&(u||d)&&(L+=A);var O=o?P(t,e):P(a,r);o?h?(q=t+O*L,C=-O*I):(q=e-O*L,C=O*I):h?(z=a+O*L,H=-O*I):(z=r-O*L,H=O*I)}return{textX:V,textY:R,targetX:q,targetY:z,anchorX:C,anchorY:H,scale:w,rotate:_}}t.exports={plot:function(t,e,a,h,v,b){var L=e.xaxis,R=e.yaxis,q=t._fullLayout,z=t._context.staticPlot;v||(v={mode:q.barmode,norm:q.barmode,gap:q.bargap,groupgap:q.bargroupgap},f("bar",q));var C=i.makeTraceGroups(h,a,"trace bars").each((function(a){var c=r.select(this),h=a[0].trace,f=a[0].t,C="waterfall"===h.type,H="funnel"===h.type,I="histogram"===h.type,O="bar"===h.type,X=O||H,Y=0;C&&h.connector.visible&&"between"===h.connector.mode&&(Y=h.connector.line.width/2);var Z="h"===h.orientation,F=B(v),U=i.ensureSingle(c,"g","points"),j=_(h),D=U.selectAll("g.point").data(i.identity,j);D.enter().append("g").classed("point",!0),D.exit().remove(),D.each((function(c,_){var B,C,H=r.select(this),U=function(t,e,a,r){var n=[],i=[],o=r?e:a,s=r?a:e;return n[0]=o.c2p(t.s0,!0),i[0]=s.c2p(t.p0,!0),n[1]=o.c2p(t.s1,!0),i[1]=s.c2p(t.p1,!0),r?[n,i]:[i,n]}(c,L,R,Z),j=U[0][0],D=U[0][1],E=U[1][0],N=U[1][1],W=0==(Z?D-j:N-E);if(W&&X&&x.getLineWidth(h,c)&&(W=!1),W||(W=!(n(j)&&n(D)&&n(E)&&n(N))),c.isBlank=W,W&&(Z?D=j:N=E),Y&&!W&&(Z?(j-=P(j,D)*Y,D+=P(j,D)*Y):(E-=P(E,N)*Y,N+=P(E,N)*Y)),"waterfall"===h.type){if(!W){var G=h[c.dir].marker;B=G.line.width,C=G.color}}else B=x.getLineWidth(h,c),C=c.mc||h.marker.color;function J(t){var e=r.round(B/2%1,2);return 0===v.gap&&0===v.groupgap?r.round(Math.round(t)-e,2):t}var K=s.opacity(C)<1||B>.01?J:function(t,e,a){return a&&t===e?t:Math.abs(t-e)>=2?J(t):t>e?Math.ceil(t):Math.floor(t)};t._context.staticPlot||(j=K(j,D,Z),D=K(D,j,Z),E=K(E,N,!Z),N=K(N,E,!Z));var Q,$=Z?L.c2p:R.c2p;Q=c.s0>0?c._sMax:c.s0<0?c._sMin:c.s1>0?c._sMax:c._sMin;var tt,et,at=O||I?function(t,e){if(!t)return 0;var a,r=Z?Math.abs(N-E):Math.abs(D-j),n=Z?Math.abs(D-j):Math.abs(N-E),i=K(Math.abs($(Q,!0)-$(0,!0))),o=c.hasB?Math.min(r/2,n/2):Math.min(r/2,i);return a="%"===e?r*(Math.min(50,t)/100):t,K(Math.max(Math.min(a,o),0))}(f.cornerradiusvalue,f.cornerradiusform):0,rt="M"+j+","+E+"V"+N+"H"+D+"V"+E+"Z",nt=0;if(at&&c.s){var it=0===w(c.s0)||w(c.s)===w(c.s0)?c.s1:c.s0;if((nt=K(c.hasB?0:Math.abs($(Q,!0)-$(it,!0))))<at){var ot=P(j,D),st=P(E,N),lt=ot===-st?1:0;if(Z)if(c.hasB)tt="M"+(j+at*ot)+","+E+"A "+at+","+at+" 0 0 "+lt+" "+j+","+(E+at*st)+"V"+(N-at*st)+"A "+at+","+at+" 0 0 "+lt+" "+(j+at*ot)+","+N+"H"+(D-at*ot)+"A "+at+","+at+" 0 0 "+lt+" "+D+","+(N-at*st)+"V"+(E+at*st)+"A "+at+","+at+" 0 0 "+lt+" "+(D-at*ot)+","+E+"Z";else{var ct=(et=Math.abs(D-j)+nt)<at?at-Math.sqrt(et*(2*at-et)):0,ut=nt>0?Math.sqrt(nt*(2*at-nt)):0,ht=ot>0?Math.max:Math.min;tt="M"+j+","+E+"V"+(N-ct*st)+"H"+ht(D-(at-nt)*ot,j)+"A "+at+","+at+" 0 0 "+lt+" "+D+","+(N-at*st-ut)+"V"+(E+at*st+ut)+"A "+at+","+at+" 0 0 "+lt+" "+ht(D-(at-nt)*ot,j)+","+(E+ct*st)+"Z"}else if(c.hasB)tt="M"+(j+at*ot)+","+E+"A "+at+","+at+" 0 0 "+lt+" "+j+","+(E+at*st)+"V"+(N-at*st)+"A "+at+","+at+" 0 0 "+lt+" "+(j+at*ot)+","+N+"H"+(D-at*ot)+"A "+at+","+at+" 0 0 "+lt+" "+D+","+(N-at*st)+"V"+(E+at*st)+"A "+at+","+at+" 0 0 "+lt+" "+(D-at*ot)+","+E+"Z";else{var pt=(et=Math.abs(N-E)+nt)<at?at-Math.sqrt(et*(2*at-et)):0,ft=nt>0?Math.sqrt(nt*(2*at-nt)):0,dt=st>0?Math.max:Math.min;tt="M"+(j+pt*ot)+","+E+"V"+dt(N-(at-nt)*st,E)+"A "+at+","+at+" 0 0 "+lt+" "+(j+at*ot-ft)+","+N+"H"+(D-at*ot+ft)+"A "+at+","+at+" 0 0 "+lt+" "+(D-pt*ot)+","+dt(N-(at-nt)*st,E)+"V"+E+"Z"}}else tt=rt}else tt=rt;var xt=A(i.ensureSingle(H,"path"),q,v,b);if(xt.style("vector-effect",z?"none":"non-scaling-stroke").attr("d",isNaN((D-j)*(N-E))||W&&t._context.staticPlot?"M0,0Z":tt).call(l.setClipUrl,e.layerClipId,t),!q.uniformtext.mode&&F){var vt=l.makePointStyleFns(h);l.singlePointStyle(c,xt,h,vt,t)}!function(t,e,a,r,n,s,c,h,f,v,b,L,_){var w,B=e.xaxis,R=e.yaxis,q=t._fullLayout;function z(e,a,r){return i.ensureSingle(e,"text").text(a).attr({class:"bartext bartext-"+w,"text-anchor":"middle","data-notex":1}).call(l.font,r).call(o.convertToTspans,t)}var C=r[0].trace,H="h"===C.orientation,I=function(t,e,a,r,n){var o,s=e[0].trace;return o=s.texttemplate?function(t,e,a,r,n){var o=e[0].trace,s=i.castOption(o,a,"texttemplate");if(!s)return"";var l,c,h,p,f="histogram"===o.type,d="waterfall"===o.type,x="funnel"===o.type,v="h"===o.orientation;function b(t){return u(p,p.c2l(t),!0).text}v?(l="y",c=n,h="x",p=r):(l="x",c=r,h="y",p=n);var m,M=e[a],y={};y.label=M.p,y.labelLabel=y[l+"Label"]=(m=M.p,u(c,c.c2l(m),!0).text);var L=i.castOption(o,M.i,"text");(0===L||L)&&(y.text=L),y.value=M.s,y.valueLabel=y[h+"Label"]=b(M.s);var _={};g(_,o,M.i),(f||void 0===_.x)&&(_.x=v?y.value:y.label),(f||void 0===_.y)&&(_.y=v?y.label:y.value),(f||void 0===_.xLabel)&&(_.xLabel=v?y.valueLabel:y.labelLabel),(f||void 0===_.yLabel)&&(_.yLabel=v?y.labelLabel:y.valueLabel),d&&(y.delta=+M.rawS||M.s,y.deltaLabel=b(y.delta),y.final=M.v,y.finalLabel=b(y.final),y.initial=y.final-y.delta,y.initialLabel=b(y.initial)),x&&(y.value=M.s,y.valueLabel=b(y.value),y.percentInitial=M.begR,y.percentInitialLabel=i.formatPercent(M.begR),y.percentPrevious=M.difR,y.percentPreviousLabel=i.formatPercent(M.difR),y.percentTotal=M.sumR,y.percenTotalLabel=i.formatPercent(M.sumR));var w=i.castOption(o,M.i,"customdata");return w&&(y.customdata=w),i.texttemplateString(s,y,t._d3locale,_,y,o._meta||{})}(t,e,a,r,n):s.textinfo?function(t,e,a,r){var n=t[0].trace,o="h"===n.orientation,s="waterfall"===n.type,l="funnel"===n.type;function c(t){return u(o?a:r,+t,!0).text}var h,p,f=n.textinfo,d=t[e],x=f.split("+"),v=[],b=function(t){return-1!==x.indexOf(t)};if(b("label")&&v.push((p=t[e].p,u(o?r:a,p,!0).text)),b("text")&&(0===(h=i.castOption(n,d.i,"text"))||h)&&v.push(h),s){var m=+d.rawS||d.s,M=d.v,g=M-m;b("initial")&&v.push(c(g)),b("delta")&&v.push(c(m)),b("final")&&v.push(c(M))}if(l){b("value")&&v.push(c(d.s));var y=0;b("percent initial")&&y++,b("percent previous")&&y++,b("percent total")&&y++;var L=y>1;b("percent initial")&&(h=i.formatPercent(d.begR),L&&(h+=" of initial"),v.push(h)),b("percent previous")&&(h=i.formatPercent(d.difR),L&&(h+=" of previous"),v.push(h)),b("percent total")&&(h=i.formatPercent(d.sumR),L&&(h+=" of total"),v.push(h))}return v.join("<br>")}(e,a,r,n):x.getValue(s.text,a),x.coerceString(m,o)}(q,r,n,B,R);w=function(t,e){var a=x.getValue(t.textposition,e);return x.coerceEnumerated(M,a)}(C,n);var O="stack"===L.mode||"relative"===L.mode,X=r[n],Y=!O||X._outmost,Z=X.hasB,F=v&&v-b>y;if(I&&"none"!==w&&(!X.isBlank&&s!==c&&h!==f||"auto"!==w&&"inside"!==w)){var U=q.font,j=d.getBarColor(r[n],C),D=d.getInsideTextFont(C,n,U,j),E=d.getOutsideTextFont(C,n,U),N=C.insidetextanchor||"end",W=a.datum();H?"log"===B.type&&W.s0<=0&&(s=B.range[0]<B.range[1]?0:B._length):"log"===R.type&&W.s0<=0&&(h=R.range[0]<R.range[1]?R._length:0);var G,J,K,Q,$,tt=Math.abs(c-s),et=Math.abs(f-h),at=tt-2*y,rt=et-2*y;if("outside"===w&&(Y||X.hasB||(w="inside")),"auto"===w)if(Y){w="inside",G=z(a,I,$=i.ensureUniformFontSize(t,D)),K=(J=l.bBox(G.node())).width,Q=J.height;var nt,it=K>0&&Q>0;nt=F?Z?S(at-2*v,rt,K,Q,H)||S(at,rt-2*v,K,Q,H):H?S(at-(v-b),rt,K,Q,H)||S(at,rt-2*(v-b),K,Q,H):S(at,rt-(v-b),K,Q,H)||S(at-2*(v-b),rt,K,Q,H):S(at,rt,K,Q,H),it&&nt?w="inside":(w="outside",G.remove(),G=null)}else w="inside";if(!G){var ot=(G=z(a,I,$=i.ensureUniformFontSize(t,"outside"===w?E:D))).attr("transform");if(G.attr("transform",""),K=(J=l.bBox(G.node())).width,Q=J.height,G.attr("transform",ot),K<=0||Q<=0)return void G.remove()}var st,lt=C.textangle;st="outside"===w?function(t,e,a,r,n,i){var o,s=!!i.isHorizontal,l=!!i.constrained,c=i.angle||0,u=n.width,h=n.height,p=Math.abs(e-t),f=Math.abs(r-a);o=s?f>2*y?y:0:p>2*y?y:0;var d=1;l&&(d=s?Math.min(1,f/h):Math.min(1,p/u));var x=T(c),v=k(n,x),b=(s?v.x:v.y)/2,m=(n.left+n.right)/2,M=(n.top+n.bottom)/2,g=(t+e)/2,L=(a+r)/2,_=0,w=0,A=s?P(e,t):P(a,r);return s?(g=e-A*o,_=A*b):(L=r+A*o,w=-A*b),{textX:m,textY:M,targetX:g,targetY:L,anchorX:_,anchorY:w,scale:d,rotate:x}}(s,c,h,f,J,{isHorizontal:H,constrained:"both"===C.constraintext||"outside"===C.constraintext,angle:lt}):V(s,c,h,f,J,{isHorizontal:H,constrained:"both"===C.constraintext||"inside"===C.constraintext,angle:lt,anchor:N,hasB:Z,r:v,overhead:b}),st.fontSize=$.size,p("histogram"===C.type?"bar":C.type,st,q),X.transform=st;var ct=A(G,q,L,_);i.setTransormAndDisplay(ct,st)}else a.select("text").remove()}(t,e,H,a,_,j,D,E,N,at,nt,v,b),e.layerClipId&&l.hideOutsideRangePoint(c,H.select("text"),L,R,h.xcalendar,h.ycalendar)}));var E=!1===h.cliponaxis;l.setClipUrl(c,E?null:e.layerClipId,t)}));c.getComponentMethod("errorbars","plot")(t,C,e,v)},toMoveInsideBar:V}}}]);