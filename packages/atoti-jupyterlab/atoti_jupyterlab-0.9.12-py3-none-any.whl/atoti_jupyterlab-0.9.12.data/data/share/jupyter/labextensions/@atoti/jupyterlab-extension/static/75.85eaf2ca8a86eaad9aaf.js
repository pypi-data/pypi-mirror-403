"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[75],{99838:(e,t,i)=>{i.d(t,{n:()=>r});var n=i(49454),a=i(64858);function r({dimensionName:e,hierarchyName:t,levelIndex:i,serverKey:r,cube:o,mdxInView:d,filters:s,queryContext:l}){const{data:m}=(0,n.i)({dimensionName:e,hierarchyName:t,levelIndex:i,serverKey:r,cube:o,mdxInView:d,filters:s,queryContext:l,doesIncludeSubtotals:!1,expandedMemberNamePaths:[]});return(0,a.U)(m)}},90075:(e,t,i)=>{i.d(t,{FiltersBarDateRangePicker:()=>N});var n=i(74389),a=i(97059),r=i(59300),o=i.n(r),d=i(93345),s=i(87991),l=i(54031),m=i(58939),c=i(98643),u=i(1783),p=i(96087),y=i(75915),g=i(99838),v=i(24162),D=i(18664),f=i(45531);const h=e=>{const{node:t,isSingleDate:i,pickerRef:a}=e;return(0,n.FD)("div",{ref:a,style:{display:"flex",paddingLeft:6,paddingRight:10,paddingBottom:8},children:[!i&&(0,n.Y)("div",{style:{paddingTop:"8px"},children:(0,n.Y)(f.g,{...e,containerRef:a})}),(0,n.FD)("div",{css:{display:"flex",flexDirection:"column"},children:[t,(0,n.Y)(D.LegendForDatesWithData,{style:{alignSelf:"flex-end"}})]})]})};var P=i(12555);const{useToken:x}=a.theme,b=(e,t)=>e?t?114:94:t?194:174,N=({filter:e,onFilterChanged:t,serverKey:i,cube:a,mdxInView:r,filtersAbove:f,queryContext:N,style:R})=>{const{dimensionName:T,hierarchyName:k,levelName:C}=e,{token:O}=x(),[w,S]=(0,d.useState)(!1),I=(0,d.useRef)(null),Y=(0,d.useRef)(null);(0,s.A)(Y,(e=>{e.target&&e.target instanceof Node&&(I.current?.contains(e.target)||S(!1))}));const{startDate:F,endDate:M}="dateRange"===e.type?e:"timePeriodToDate"===e.type?(0,m.P)(e.timePeriod):(0,c.K)(e.timePeriod,e.numberOfTimePeriods,e.previousOrNextMode),_=F&&M?[o()(F),o()(M)]:null,K="dateRange"===e.type?void 0:"timePeriodToDate"===e.type?"toDate":e.previousOrNextMode,[{numberOfTimePeriods:q,timePeriod:E},L]=(0,d.useReducer)(u.k9,{},(()=>(0,p.$)(e,a))),V=i=>{L({type:"timePeriodChanged",timePeriod:i}),"timePeriodToDate"!==e.type&&"previousOrNextTimePeriods"!==e.type||t({...e,timePeriod:i})},A=i=>{L({type:"numberOfTimePeriodsChanged",numberOfTimePeriods:i}),"previousOrNextTimePeriods"===e.type&&t({...e,numberOfTimePeriods:i})},j=i=>{switch(i){case"toDate":t({...e,type:"timePeriodToDate",timePeriod:E});break;case"previous":case"next":t({...e,type:"previousOrNextTimePeriods",previousOrNextMode:i,timePeriod:E,numberOfTimePeriods:q});break;case void 0:t({...e,type:"dateRange",isRollingDate:!1})}},B=(0,l.Z)({cube:a,dimensionName:T,hierarchyName:k,levelName:C});(0,d.useEffect)((()=>{(0,y.z)({dimensionName:T,hierarchyName:k,levelIndex:B,cube:a})}),[T,k,B,a]);const W=(0,g.n)({dimensionName:T,hierarchyName:k,levelIndex:B,serverKey:i,cube:a,mdxInView:r,filters:f,queryContext:N}),z="dateRange"===e.type&&e.isSingleDate,U=i=>{const n="dateRange"===e.type?{...e,...i}:{...e,...i,type:"dateRange",isRollingDate:!1};t(n)},X={open:w,onClick:()=>S(!0),style:{paddingInline:O.paddingXS},placement:"bottomLeft",bordered:!1,allowClear:!0,datesWithData:W};return(0,n.FD)(P.o,{ref:I,style:{...R,width:b(z,e.isExclusionFilter)},label:e.levelName,isActive:w,children:[e.isExclusionFilter&&(0,n.Y)(v.y,{style:{flexShrink:0,marginLeft:O.marginSM,opacity:F?"initial":"0.4"}}),z?(0,n.Y)(D.SingleDatePicker,{...X,value:F?o()(F):null,onChange:e=>{const t=e,i=t?{startDate:t.toDate(),endDate:t.toDate()}:{startDate:void 0,endDate:void 0};U(i)},panelRender:e=>(0,n.Y)(h,{node:e,isSingleDate:!0,pickerRef:Y})}):(0,n.Y)(D.DateRangePicker,{...X,allowEmpty:[!0,!0],value:_,onChange:e=>{const[t,i]=e||[],n=t&&i?{startDate:t.toDate(),endDate:i.toDate()}:{startDate:void 0,endDate:void 0};U(n)},panelRender:e=>(0,n.Y)("div",{onMouseDown:e=>{e.stopPropagation()},children:(0,n.Y)(h,{node:e,isSingleDate:!1,timePeriod:E,onTimePeriodChanged:V,pickerRef:Y,relativeTimeMode:K,onRelativeTimeModeChanged:j,numberOfTimePeriods:q,onNumberOfTimePeriodsChanged:A})})})]})}}}]);