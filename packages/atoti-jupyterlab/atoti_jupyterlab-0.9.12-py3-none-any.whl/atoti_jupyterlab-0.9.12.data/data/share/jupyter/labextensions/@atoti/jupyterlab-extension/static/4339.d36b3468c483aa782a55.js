"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[4339],{18355:(t,e,a)=>{a.d(e,{w:()=>n});var r=a(64390),i=a(30575);const n=t=>{if(0===t.horizontal.captions.length&&0===t.vertical.captions.length)return{};const e=(0,i.y)(t.vertical),a=(0,i.y)(t.horizontal),n=[];for(let t=0;t<e;t++){const e=[];for(let i=0;i<a;i++){const a=0===i?"x":`x${i+1}`,n=(0,r.D)(t);e.push(`${a}${n}`)}n.push(e)}return{grid:{rows:e,columns:a,subplots:n,pattern:"coupled"}}}},64390:(t,e,a)=>{function r(t){return 0===t?"y":"y"+(2*t+1)}a.d(e,{D:()=>r})},30575:(t,e,a)=>{a.d(e,{y:()=>r});const r=({captions:t,limit:e})=>Math.max(1,Math.min(t.length,e))},60017:(t,e,a)=>{a.d(e,{C:()=>n});var r=a(90147),i=a(31529);const n=(t,{axes:e,fontSize:a})=>void 0===a?t:(0,r.produce)(t,(t=>{for(const a of e)a in t||(t[a]={});for(const e in t)e.startsWith("xaxis")||e.startsWith("yaxis")?(0,i.set)(t,[e,"tickfont","size"],a):e.startsWith("polar")&&(0,i.set)(t,[e,"angularaxis","tickfont","size"],a)}))},84339:(t,e,a)=>{a.r(e),a.d(e,{default:()=>O});var r=a(74389),i=a(58038),n=a.n(i),o=a(4683),l=a.n(o),s=a(93345),c=a(47357),u=a(83506),d=a(89041),p=a(25617),h=a(9117),f=a(18355),g=a(60017),v=a(69937),x=a(79412);var y=a(31529),m=a(96531),b=a(99696),k=a(57766),w=a(69306),T=a(88349),_=a(56918),A=a(88295),M=a(71930),S=a(50862),I=a(99780),L=a(1583),R=a(58213),D=a(86189),F=a(38159);const C=t=>t.map((t=>(t.axisIndices?.push(0),t.r.push(t.r[0]),t.theta.push(t.theta[0]),t.cellsIndices.push(t.cellsIndices[0]),t.marker.color.push(t.marker.color[0]),t)));function P({cube:t,data:e,metaData:a,widgetState:{mapping:r,style:i,visibleGrandTotals:n,visibleSubTotals:o},captionForTotals:l}){if(!t||!e||!a)return[];const s={},c=a.orderedAxis,u=r.values.length>0,d=c.captions.length>0,p={},h={mapping:{},indexOfNextColorToUse:0};(0,M.R)({cube:t,data:e,hierarchyIndicesInCellSet:a.hierarchyIndicesInCellSet,visibleGrandTotals:n,visibleSubTotals:o},(({cell:e,cellIndex:n,columnIndex:o,tuple:f,rowIndex:g})=>{if(f){const v=(0,S.b)(f,{levelIndices:a.levelIndicesPerField,mapping:r,attributesRedirection:a.attributesRedirection,cube:t}),x=(t=>{const e=t.splitBy,n=(0,_.f)([...e,...t.horizontalSubplots,...t.verticalSubplots]),o=(0,A.w)({membersOnSplitBy:t.splitBy,numberOfMeasuresRepresentedByTheChart:r.values?.length??0}),u=(0,m.getSortedTupleKey)(o);if(!s[n]){const t=((t,e,n)=>{const o=r.values.length,s=(0,k.t)(n,o,l);return{_key:t,_styleKey:e,hoverinfo:"none",legendgroup:s,line:{color:(0,w.n)({accumulator:h,colorway:a.colorway,traceName:s})},name:s,cellsIndices:(0,y.fill)(new Array(c.captions.length),null),axisIndices:(0,y.fill)(new Array(c.captions.length),null),type:"scatterpolar",fill:"toself",theta:d?c.captions:[""],r:d?(0,y.fill)(new Array(c.captions.length),null):[null],text:[],opacity:1,marker:{color:[],...i?.markerSize&&{size:(0,T.u)(i.markerSize)}}}})(n,u,e);s[n]=t,p[n]=0}return s[n]})(v),b=v.axis,M=(0,I.r)(b),L=d?c.members[M]:0;if(d&&(x.axisIndices[L]=p[x._key],p[x._key]++),null!==e&&null!==n){if(u){x.r[L]=e.value;const t=f.find(D.t)?.namePath[0],a=t?i?.measures?.[t]:void 0,r=(0,F.T)({fieldStyle:a,value:e.value});x.marker.color[L]=r.backgroundColor??x.line.color}x.cellsIndices[L]=[{columnIndex:o,rowIndex:g,cellIndex:n}]}}}));const f=Object.values(s),g=(0,L.G)({traces:C(f),subplotsMetaData:a.subplots});return((t,e)=>{const a=e.vertical.keys.length;t.forEach((t=>{const r=(0,b.X)(e.horizontal.keys,t._key),i=(0,b.X)(e.vertical.keys,t._key)+1;let n=r+1;a>0&&(n=(r>-1?r:0)*a+i),t.subplot=`polar${n}`}))})(g,a.subplots),(0,R.i)(g),g}n().register(l());const O=(0,h.withLoadingOverlay)((0,h.withoutIrrelevantRenders)((0,u.c)((0,s.memo)((t=>{const{cube:e,data:a,metaData:i,widgetState:n}=t,{formatMessage:o}=(0,c.useIntl)(),l=o({id:"aui.total"}),u=(0,s.useMemo)((()=>P({cube:e,data:a,metaData:i,widgetState:n,captionForTotals:l})),[e,a,i,n,l]),h=(0,p.DP)(),y=(0,s.useMemo)((()=>((t,e,{fontSize:a})=>{if(!t)return{};const r=t.subplots.horizontal.keys.length>0||t.subplots.vertical.keys.length>0;let i=(0,x.Z)({...r&&{grid:{ygap:.5,xgap:.5}},margin:{r:60},polar:{bgcolor:e.backgroundColor,radialaxis:{color:(0,v.j)(e.textColor,.25)}}},((t,e)=>{const a=t.vertical.keys.length,r=t.horizontal.keys.length,i=r>0,n=a>0,o=i&&n?r*a:r+a,l={};for(let t=1;t<=o;t++){const a=i?Math.ceil((t-r)/r):t-1,o=i?(t-1)%r:t;l[`polar${t}`]={bgcolor:e.backgroundColor,radialaxis:{color:(0,v.j)(e.textColor,.25)},domain:{row:n?a:0,column:i?o:0}}}return l})(t.subplots,e),(0,f.w)(t.subplots));return i=(0,g.C)(i,{axes:["polar"],fontSize:a}),i})(i,h,{fontSize:n?.style?.axisLabelFontSize})),[i,h,n?.style?.axisLabelFontSize]);return(0,r.Y)(d.Kl,{...t,traces:u,layout:y,cube:e,data:a,metaData:i})})))))},79412:(t,e,a)=>{a.d(e,{Z:()=>n});var r=a(90147),i=a(31529);const n=function(t,...e){return(0,r.produce)(t??{},(t=>{(0,i.defaultsDeep)(t,...e)}))}},4683:(t,e,a)=>{t.exports=a(49610)},47141:t=>{t.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},33837:(t,e,a)=>{var r=a(14228),i=a(9046).tester,n=r.findIndexOfMin,o=r.isAngleInsideSector,l=r.angleDelta,s=r.angleDist;function c(t,e,a,r){var i,n,o=r[0],l=r[1],s=d(Math.sin(e)-Math.sin(t)),c=d(Math.cos(e)-Math.cos(t)),u=Math.tan(a),p=d(1/u),h=s/c,f=l-h*o;return p?s&&c?n=u*(i=f/(u-h)):c?(i=l*p,n=l):(i=o,n=o*u):s&&c?(i=0,n=f):c?(i=0,n=l):i=n=NaN,[i,n]}function u(t,e,a,i){return r.isFullCircle([e,a])?function(t,e){var a,r=e.length,i=new Array(r+1);for(a=0;a<r;a++){var n=e[a];i[a]=[t*Math.cos(n),t*Math.sin(n)]}return i[a]=i[0].slice(),i}(t,i):function(t,e,a,i){var l,u,d=i.length,p=[];function h(e){return[t*Math.cos(e),t*Math.sin(e)]}function f(t,e,a){return c(t,e,a,h(t))}function g(t){return r.mod(t,d)}function v(t){return o(t,[e,a])}var x=n(i,(function(t){return v(t)?s(t,e):1/0})),y=f(i[x],i[g(x-1)],e);for(p.push(y),l=x,u=0;u<d;l++,u++){var m=i[g(l)];if(!v(m))break;p.push(h(m))}var b=n(i,(function(t){return v(t)?s(t,a):1/0})),k=f(i[b],i[g(b+1)],a);return p.push(k),p.push([0,0]),p.push(p[0].slice()),p}(t,e,a,i)}function d(t){return Math.abs(t)>1e-10?t:0}function p(t,e,a){e=e||0,a=a||0;for(var r=t.length,i=new Array(r),n=0;n<r;n++){var o=t[n];i[n]=[e+o[0],a-o[1]]}return i}t.exports={isPtInsidePolygon:function(t,e,a,r,n){if(!o(e,r))return!1;var l,s;a[0]<a[1]?(l=a[0],s=a[1]):(l=a[1],s=a[0]);var c=i(u(l,r[0],r[1],n)),d=i(u(s,r[0],r[1],n)),p=[t*Math.cos(e),t*Math.sin(e)];return d.contains(p)&&!c.contains(p)},findPolygonOffset:function(t,e,a,r){for(var i=1/0,n=1/0,o=u(t,e,a,r),l=0;l<o.length;l++){var s=o[l];i=Math.min(i,s[0]),n=Math.min(n,-s[1])}return[i,n]},findEnclosingVertexAngles:function(t,e){var a=n(e,(function(e){var a=l(e,t);return a>0?a:1/0})),i=r.mod(a+1,e.length);return[e[a],e[i]]},findIntersectionXY:c,findXYatLength:function(t,e,a,r){var i=-e*a,n=e*e+1,o=2*(e*i-a),l=i*i+a*a-t*t,s=Math.sqrt(o*o-4*n*l),c=(-o+s)/(2*n),u=(-o-s)/(2*n);return[[c,e*c+i+r],[u,e*u+i+r]]},clampTiny:d,pathPolygon:function(t,e,a,r,i,n){return"M"+p(u(t,e,a,r),i,n).join("L")},pathPolygonAnnulus:function(t,e,a,r,i,n,o){var l,s;t<e?(l=t,s=e):(l=e,s=t);var c=p(u(l,a,r,i),n,o);return"M"+p(u(s,a,r,i),n,o).reverse().join("L")+"M"+c.join("L")}}},66928:(t,e,a)=>{var r=a(10854).fX,i=a(14228).counterRegex,n=a(91996),o=a(47141),l=o.attr,s=o.name,c=i(s),u={};u[l]={valType:"subplotid",dflt:s,editType:"calc",description:["Sets a reference between this trace's data coordinates and","a polar subplot.","If *polar* (the default value), the data refer to `layout.polar`.","If *polar2*, the data refer to `layout.polar2`, and so on."].join(" ")},t.exports={attr:l,name:s,idRoot:s,idRegex:c,attrRegex:c,attributes:u,layoutAttributes:a(68074),supplyLayoutDefaults:a(6877),plot:function(t){for(var e=t._fullLayout,a=t.calcdata,i=e._subplots[s],o=0;o<i.length;o++){var l=i[o],c=r(a,s,l),u=e[l]._subplot;u||(u=n(t,l),e[l]._subplot=u),u.plot(c,e,t._promises)}},clean:function(t,e,a,r){for(var i=r._subplots[s]||[],n=r._has&&r._has("gl"),o=e._has&&e._has("gl"),l=n&&!o,c=0;c<i.length;c++){var u=i[c],d=r[u]._subplot;if(!e[u]&&d)for(var p in d.framework.remove(),d.layers["radial-axis-title"].remove(),d.clipPaths)d.clipPaths[p].remove();l&&d._scene&&(d._scene.destroy(),d._scene=null)}},toSVG:a(69414).toSVG}},68074:(t,e,a)=>{var r=a(6792),i=a(12184),n=a(42311).u,o=a(14228).extendFlat,l=a(84107).overrideAll,s=l({color:i.color,showline:o({},i.showline,{dflt:!0}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:o({},i.showgrid,{dflt:!0}),gridcolor:i.gridcolor,gridwidth:i.gridwidth,griddash:i.griddash},"plot","from-root"),c=l({tickmode:i.minor.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,labelalias:i.labelalias,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,layer:i.layer},"plot","from-root"),u={visible:o({},i.visible,{dflt:!0}),type:o({},i.type,{values:["-","linear","log","date","category"]}),autotypenumbers:i.autotypenumbers,autorangeoptions:{minallowed:i.autorangeoptions.minallowed,maxallowed:i.autorangeoptions.maxallowed,clipmin:i.autorangeoptions.clipmin,clipmax:i.autorangeoptions.clipmax,include:i.autorangeoptions.include,editType:"plot"},autorange:o({},i.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc",description:["If *tozero*`, the range extends to 0,","regardless of the input data","If *nonnegative*, the range is non-negative,","regardless of the input data.","If *normal*, the range is computed in relation to the extrema","of the input data (same behavior as for cartesian axes)."].join(" ")},minallowed:o({},i.minallowed,{editType:"plot"}),maxallowed:o({},i.maxallowed,{editType:"plot"}),range:o({},i.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:i.categoryorder,categoryarray:i.categoryarray,angle:{valType:"angle",editType:"plot",description:["Sets the angle (in degrees) from which the radial axis is drawn.","Note that by default, radial axis line on the theta=0 line","corresponds to a line pointing right (like what mathematicians prefer).","Defaults to the first `polar.sector` angle."].join(" ")},autotickangles:i.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot",description:["Determines on which side of radial axis line","the tick and tick labels appear."].join(" ")},title:{text:o({},i.title.text,{editType:"plot",dflt:""}),font:o({},i.title.font,{editType:"plot"}),editType:"plot"},hoverformat:i.hoverformat,uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `range`,","`autorange`, `angle`, and `title` if in `editable: true` configuration.","Defaults to `polar<N>.uirevision`."].join(" ")},editType:"calc",_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}};o(u,s,c);var d={visible:o({},i.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0,description:["Sets the angular axis type.","If *linear*, set `thetaunit` to determine the unit in which axis value are shown.","If *category, use `period` to set the number of integer coordinates around polar axis."].join(" ")},autotypenumbers:i.autotypenumbers,categoryorder:i.categoryorder,categoryarray:i.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc",description:["Sets the format unit of the formatted *theta* values.","Has an effect only when `angularaxis.type` is *linear*."].join(" ")},period:{valType:"number",editType:"calc",min:0,description:["Set the angular period.","Has an effect only when `angularaxis.type` is *category*."].join(" ")},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc",description:["Sets the direction corresponding to positive angles."].join(" ")},rotation:{valType:"angle",editType:"calc",description:["Sets that start position (in degrees) of the angular axis","By default, polar subplots with `direction` set to *counterclockwise*","get a `rotation` of *0*","which corresponds to due East (like what mathematicians prefer).","In turn, polar with `direction` set to *clockwise* get a rotation of *90*","which corresponds to due North (like on a compass),"].join(" ")},hoverformat:i.hoverformat,uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis `rotation`.","Defaults to `polar<N>.uirevision`."].join(" ")},editType:"calc"};o(d,s,c),t.exports={domain:n({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot",description:["Sets angular span of this polar subplot with two angles (in degrees).","Sector are assumed to be spanned in the counterclockwise direction","with *0* corresponding to rightmost limit of the polar subplot."].join(" ")},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot",description:["Sets the fraction of the radius to cut out of the polar subplot."].join(" ")},bgcolor:{valType:"color",editType:"plot",dflt:r.background,description:"Set the background color of the subplot"},radialaxis:u,angularaxis:d,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot",description:["Determines if the radial axis grid lines and angular axis line are drawn","as *circular* sectors or as *linear* (polygon) sectors.","Has an effect only when the angular axis has `type` *category*.","Note that `radialaxis.angle` is snapped to the angle of the closest","vertex when `gridshape` is *circular*","(so that radial axis scale is the same as the data scale)."].join(" ")},uirevision:{valType:"any",editType:"none",description:["Controls persistence of user-driven changes in axis attributes,","if not overridden in the individual axes.","Defaults to `layout.uirevision`."].join(" ")},editType:"calc"}},6877:(t,e,a)=>{var r=a(14228),i=a(95893),n=a(38499),o=a(99491),l=a(10854).KO,s=a(49308),c=a(39246),u=a(52153),d=a(64823),p=a(96176),h=a(23582),f=a(9080),g=a(14803),v=a(68074),x=a(64096),y=a(47141),m=y.axisNames;function b(t,e,a,o){var g=a("bgcolor");o.bgColor=i.combine(g,o.paper_bgcolor);var b=a("sector");a("hole");var w,T=l(o.fullData,y.name,o.id),_=o.layoutOut;function A(t,e){return a(w+"."+t,e)}for(var M=0;M<m.length;M++){w=m[M],r.isPlainObject(t[w])||(t[w]={});var S=t[w],I=n.newContainer(e,w);I._id=I._name=w,I._attr=o.id+"."+w,I._traceIndices=T.map((function(t){return t._expandedIndex}));var L=y.axisName2dataArray[w],R=k(S,I,A,T,L,o);p(S,I,A,{axData:T,dataAttr:L});var D=A("visible");switch(x(I,e,_),A("uirevision",e.uirevision),I._m=1,w){case"radialaxis":A("minallowed"),A("maxallowed");var F,C=A("range"),P=I.getAutorangeDflt(C),O=A("autorange",P);!C||(null!==C[0]||null!==C[1])&&(null!==C[0]&&null!==C[1]||"reversed"!==O&&!0!==O)&&(null===C[0]||"min"!==O&&"max reversed"!==O)&&(null===C[1]||"max"!==O&&"min reversed"!==O)||(C=void 0,delete I.range,I.autorange=!0,F=!0),F||(O=A("autorange",P=I.getAutorangeDflt(C))),S.autorange=O,O&&(f(A,O,C),"linear"!==R&&"-"!==R||A("rangemode"),I.isReversed()&&(I._m=-1)),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===R){r.log("Polar plots do not support date angular axes yet.");for(var j=0;j<T.length;j++)T[j].visible=!1;R=S.type=I.type="linear"}A("linear"===R?"thetaunit":"period");var z=A("direction");A("rotation",{counterclockwise:0,clockwise:90}[z])}if(d(S,I,A,I.type,{tickSuffixDflt:"degrees"===I.thetaunit?"°":void 0}),D){var N,B,H,G,E,V,Z,U,X,K,Y=o.font||{};B=(N=A("color"))===S.color?N:Y.color,H=Y.size,G=Y.family,E=Y.weight,V=Y.style,Z=Y.variant,U=Y.textcase,X=Y.lineposition,K=Y.shadow,s(S,I,A,I.type),u(S,I,A,I.type,{font:{weight:E,style:V,variant:Z,textcase:U,lineposition:X,shadow:K,color:B,size:H,family:G},noAutotickangles:"angularaxis"===w,noTicklabelshift:!0,noTicklabelstandoff:!0}),c(S,I,A,{outerTicks:!0}),h(S,I,A,{dfltColor:N,bgColor:o.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v[w]}),A("layer"),"radialaxis"===w&&(A("side"),A("angle",b[0]),A("title.text"),r.coerceFont(A,"title.font",{weight:E,style:V,variant:Z,textcase:U,lineposition:X,shadow:K,color:B,size:r.bigFont(H),family:G}))}"category"!==R&&A("hoverformat"),I._input=S}"category"===e.angularaxis.type&&a("gridshape")}function k(t,e,a,r,i,n){var o=a("autotypenumbers",n.autotypenumbersDflt);if("-"===a("type")){for(var l,s=0;s<r.length;s++)if(r[s].visible){l=r[s];break}l&&l[i]&&(e.type=g(l[i],"gregorian",{noMultiCategory:!0,autotypenumbers:o})),"-"===e.type?e.type="linear":t.type=e.type}return e.type}t.exports=function(t,e,a){o(t,e,a,{type:y.name,attributes:v,handleDefaults:b,font:e.font,autotypenumbersDflt:e.autotypenumbers,paper_bgcolor:e.paper_bgcolor,fullData:a,layoutOut:e})}},91996:(t,e,a)=>{var r=a(21132),i=a(1915),n=a(36678),o=a(14228),l=o.strRotate,s=o.strTranslate,c=a(95893),u=a(26788),d=a(2751),p=a(41665),h=a(90374),f=a(64096),g=a(75826).doAutoRange,v=a(93469),x=a(15780),y=a(39732),m=a(14565),b=a(65877).prepSelect,k=a(65877).selectOnClick,w=a(65877).clearOutline,T=a(39662),_=a(84625),A=a(27222).redrawReglTraces,M=a(9799).MID_SHIFT,S=a(47141),I=a(33837),L=a(22506),R=L.smith,D=L.reactanceArc,F=L.resistanceArc,C=L.smithTransform,P=o._,O=o.mod,j=o.deg2rad,z=o.rad2deg;function N(t,e,a){this.isSmith=a||!1,this.id=e,this.gd=t,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var r=t._fullLayout,i="clip"+r._uid+e;this.clipIds.forTraces=i+"-for-traces",this.clipPaths.forTraces=r._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=r["_"+(a?"smith":"polar")+"layer"].append("g").attr("class",e),this.getHole=function(t){return this.isSmith?0:t.hole},this.getSector=function(t){return this.isSmith?[0,360]:t.sector},this.getRadial=function(t){return this.isSmith?t.realaxis:t.radialaxis},this.getAngular=function(t){return this.isSmith?t.imaginaryaxis:t.angularaxis},a||(this.radialTickLayout=null,this.angularTickLayout=null)}var B=N.prototype;function H(t){var e=t.ticks+String(t.ticklen)+String(t.showticklabels);return"side"in t&&(e+=t.side),e}function G(t,e){return e[o.findIndexOfMin(e,(function(e){return o.angleDist(t,e)}))]}function E(t,e,a){return e?(t.attr("display",null),t.attr(a)):t&&t.attr("display","none"),t}t.exports=function(t,e,a){return new N(t,e,a)},B.plot=function(t,e){for(var a=this,r=e[a.id],i=!1,n=0;n<t.length;n++)if(!1===t[n][0].trace.cliponaxis){i=!0;break}a._hasClipOnAxisFalse=i,a.updateLayers(e,r),a.updateLayout(e,r),d.generalUpdatePerTraceModule(a.gd,a,t,r),a.updateFx(e,r),a.isSmith&&(delete r.realaxis.range,delete r.imaginaryaxis.range)},B.updateLayers=function(t,e){var a=this,i=a.isSmith,n=a.layers,o=a.getRadial(e),l=a.getAngular(e),s=S.layerNames,c=s.indexOf("frontplot"),u=s.slice(0,c),d="below traces"===l.layer,p="below traces"===o.layer;d&&u.push("angular-line"),p&&u.push("radial-line"),d&&u.push("angular-axis"),p&&u.push("radial-axis"),u.push("frontplot"),d||u.push("angular-line"),p||u.push("radial-line"),d||u.push("angular-axis"),p||u.push("radial-axis");var h=(i?"smith":"polar")+"sublayer",f=a.framework.selectAll("."+h).data(u,String);f.enter().append("g").attr("class",(function(t){return h+" "+t})).each((function(t){var e=n[t]=r.select(this);switch(t){case"frontplot":i||e.append("g").classed("barlayer",!0),e.append("g").classed("scatterlayer",!0);break;case"backplot":e.append("g").classed("maplayer",!0);break;case"plotbg":n.bg=e.append("path");break;case"radial-grid":case"angular-grid":e.style("fill","none");break;case"radial-line":e.append("line").style("fill","none");break;case"angular-line":e.append("path").style("fill","none")}})),f.order()},B.updateLayout=function(t,e){var a=this,r=a.layers,i=t._size,n=a.getRadial(e),o=a.getAngular(e),l=e.domain.x,d=e.domain.y;a.xOffset=i.l+i.w*l[0],a.yOffset=i.t+i.h*(1-d[1]);var p=a.xLength=i.w*(l[1]-l[0]),h=a.yLength=i.h*(d[1]-d[0]),f=a.getSector(e);a.sectorInRad=f.map(j);var g,v,x,y,m,b=a.sectorBBox=function(t){var e,a=t[0],r=t[1]-a,i=O(a,360),n=i+r,o=Math.cos(j(i)),l=Math.sin(j(i)),s=Math.cos(j(n)),c=Math.sin(j(n));return e=i<=90&&n>=90||i>90&&n>=450?1:l<=0&&c<=0?0:Math.max(l,c),[i<=180&&n>=180||i>180&&n>=540?-1:o>=0&&s>=0?0:Math.min(o,s),i<=270&&n>=270||i>270&&n>=630?-1:l>=0&&c>=0?0:Math.min(l,c),n>=360?1:o<=0&&s<=0?0:Math.max(o,s),e]}(f),k=b[2]-b[0],w=b[3]-b[1],T=h/p,_=Math.abs(w/k);T>_?(g=p,m=(h-(v=p*_))/i.h/2,x=[l[0],l[1]],y=[d[0]+m,d[1]-m]):(v=h,m=(p-(g=h/_))/i.w/2,x=[l[0]+m,l[1]-m],y=[d[0],d[1]]),a.xLength2=g,a.yLength2=v,a.xDomain2=x,a.yDomain2=y;var A,M=a.xOffset2=i.l+i.w*x[0],S=a.yOffset2=i.t+i.h*(1-y[1]),I=a.radius=g/k,L=a.innerRadius=a.getHole(e)*I,R=a.cx=M-I*b[0],D=a.cy=S+I*b[3],F=a.cxx=R-M,C=a.cyy=D-S,P=n.side;"counterclockwise"===P?(A=P,P="top"):"clockwise"===P&&(A=P,P="bottom"),a.radialAxis=a.mockAxis(t,e,n,{_id:"x",side:P,_trueSide:A,domain:[L/i.w,I/i.w]}),a.angularAxis=a.mockAxis(t,e,o,{side:"right",domain:[0,Math.PI],autorange:!1}),a.doAutoRange(t,e),a.updateAngularAxis(t,e),a.updateRadialAxis(t,e),a.updateRadialAxisTitle(t,e),a.xaxis=a.mockCartesianAxis(t,e,{_id:"x",domain:x}),a.yaxis=a.mockCartesianAxis(t,e,{_id:"y",domain:y});var z=a.pathSubplot();a.clipPaths.forTraces.select("path").attr("d",z).attr("transform",s(F,C)),r.frontplot.attr("transform",s(M,S)).call(u.setClipUrl,a._hasClipOnAxisFalse?null:a.clipIds.forTraces,a.gd),r.bg.attr("d",z).attr("transform",s(R,D)).call(c.fill,e.bgcolor)},B.mockAxis=function(t,e,a,r){var i=o.extendFlat({},a,r);return f(i,e,t),i},B.mockCartesianAxis=function(t,e,a){var r=this,i=r.isSmith,n=a._id,l=o.extendFlat({type:"linear"},a);h(l,t);var s={x:[0,2],y:[1,3]};return l.setRange=function(){var t=r.sectorBBox,a=s[n],i=r.radialAxis._rl,o=(i[1]-i[0])/(1-r.getHole(e));l.range=[t[a[0]]*o,t[a[1]]*o]},l.isPtWithinRange="x"!==n||i?function(){return!0}:function(t){return r.isPtInside(t)},l.setRange(),l.setScale(),l},B.doAutoRange=function(t,e){var a=this,r=a.gd,i=a.radialAxis,n=a.getRadial(e);g(r,i);var o=i.range;if(n.range=o.slice(),n._input.range=o.slice(),i._rl=[i.r2l(o[0],null,"gregorian"),i.r2l(o[1],null,"gregorian")],void 0!==i.minallowed){var l=i.r2l(i.minallowed);i._rl[0]>i._rl[1]?i._rl[1]=Math.max(i._rl[1],l):i._rl[0]=Math.max(i._rl[0],l)}if(void 0!==i.maxallowed){var s=i.r2l(i.maxallowed);i._rl[0]<i._rl[1]?i._rl[1]=Math.min(i._rl[1],s):i._rl[0]=Math.min(i._rl[0],s)}},B.updateRadialAxis=function(t,e){var a=this,r=a.gd,i=a.layers,n=a.radius,u=a.innerRadius,d=a.cx,h=a.cy,f=a.getRadial(e),g=O(a.getSector(e)[0],360),v=a.radialAxis,x=u<n,y=a.isSmith;y||(a.fillViewInitialKey("radialaxis.angle",f.angle),a.fillViewInitialKey("radialaxis.range",v.range.slice()),v.setGeometry()),"auto"===v.tickangle&&g>90&&g<=270&&(v.tickangle=180);var m=y?function(t){var e=C(a,R([t.x,0]));return s(e[0]-d,e[1]-h)}:function(t){return s(v.l2p(t.x)+u,0)},b=y?function(t){return F(a,t.x,-1/0,1/0)}:function(t){return a.pathArc(v.r2p(t.x)+u)},k=H(f);if(a.radialTickLayout!==k&&(i["radial-axis"].selectAll(".xtick").remove(),a.radialTickLayout=k),x){v.setScale();var w=0,T=y?(v.tickvals||[]).filter((function(t){return t>=0})).map((function(t){return p.tickText(v,t,!0,!1)})):p.calcTicks(v),_=y?T:p.clipEnds(v,T),A=p.getTickSigns(v)[2];y&&(("top"===v.ticks&&"bottom"===v.side||"bottom"===v.ticks&&"top"===v.side)&&(A=-A),"top"===v.ticks&&"top"===v.side&&(w=-v.ticklen),"bottom"===v.ticks&&"bottom"===v.side&&(w=v.ticklen)),p.drawTicks(r,v,{vals:T,layer:i["radial-axis"],path:p.makeTickPath(v,0,A),transFn:m,crisp:!1}),p.drawGrid(r,v,{vals:_,layer:i["radial-grid"],path:b,transFn:o.noop,crisp:!1}),p.drawLabels(r,v,{vals:T,layer:i["radial-axis"],transFn:m,labelFns:p.makeLabelFns(v,w)})}var M=a.radialAxisAngle=a.vangles?z(G(j(f.angle),a.vangles)):f.angle,S=s(d,h),I=S+l(-M);E(i["radial-axis"],x&&(f.showticklabels||f.ticks),{transform:I}),E(i["radial-grid"],x&&f.showgrid,{transform:y?"":S}),E(i["radial-line"].select("line"),x&&f.showline,{x1:y?-n:u,y1:0,x2:n,y2:0,transform:I}).attr("stroke-width",f.linewidth).call(c.stroke,f.linecolor)},B.updateRadialAxisTitle=function(t,e,a){if(!this.isSmith){var r=this,i=r.gd,n=r.radius,o=r.cx,l=r.cy,s=r.getRadial(e),c=r.id+"title",d=0;if(s.title){var p=u.bBox(r.layers["radial-axis"].node()).height,h=s.title.font.size,f=s.side;d="top"===f?h:"counterclockwise"===f?-(p+.4*h):p+.8*h}var g=void 0!==a?a:r.radialAxisAngle,v=j(g),x=Math.cos(v),y=Math.sin(v),b=o+n/2*x+d*y,k=l-n/2*y+d*x;r.layers["radial-axis-title"]=m.draw(i,c,{propContainer:s,propName:r.id+".radialaxis.title",placeholder:P(i,"Click to enter radial axis title"),attributes:{x:b,y:k,"text-anchor":"middle"},transform:{rotate:-g}})}},B.updateAngularAxis=function(t,e){var a=this,r=a.gd,i=a.layers,n=a.radius,u=a.innerRadius,d=a.cx,h=a.cy,f=a.getAngular(e),g=a.angularAxis,v=a.isSmith;v||(a.fillViewInitialKey("angularaxis.rotation",f.rotation),g.setGeometry(),g.setScale());var x=v?function(t){var e=C(a,R([0,t.x]));return Math.atan2(e[0]-d,e[1]-h)-Math.PI/2}:function(t){return g.t2g(t.x)};"linear"===g.type&&"radians"===g.thetaunit&&(g.tick0=z(g.tick0),g.dtick=z(g.dtick));var y=function(t){return s(d+n*Math.cos(t),h-n*Math.sin(t))},m=v?function(t){var e=C(a,R([0,t.x]));return s(e[0],e[1])}:function(t){return y(x(t))},b=v?function(t){var e=C(a,R([0,t.x])),r=Math.atan2(e[0]-d,e[1]-h)-Math.PI/2;return s(e[0],e[1])+l(-z(r))}:function(t){var e=x(t);return y(e)+l(-z(e))},k=v?function(t){return D(a,t.x,0,1/0)}:function(t){var e=x(t),a=Math.cos(e),r=Math.sin(e);return"M"+[d+u*a,h-u*r]+"L"+[d+n*a,h-n*r]},w=p.makeLabelFns(g,0).labelStandoff,T={xFn:function(t){var e=x(t);return Math.cos(e)*w},yFn:function(t){var e=x(t),a=Math.sin(e)>0?.2:1;return-Math.sin(e)*(w+t.fontSize*a)+Math.abs(Math.cos(e))*(t.fontSize*M)},anchorFn:function(t){var e=x(t),a=Math.cos(e);return Math.abs(a)<.1?"middle":a>0?"start":"end"},heightFn:function(t,e,a){var r=x(t);return-.5*(1+Math.sin(r))*a}},_=H(f);a.angularTickLayout!==_&&(i["angular-axis"].selectAll("."+g._id+"tick").remove(),a.angularTickLayout=_);var A,S=v?[1/0].concat(g.tickvals||[]).map((function(t){return p.tickText(g,t,!0,!1)})):p.calcTicks(g);if(v&&(S[0].text="∞",S[0].fontSize*=1.75),"linear"===e.gridshape?(A=S.map(x),o.angleDelta(A[0],A[1])<0&&(A=A.slice().reverse())):A=null,a.vangles=A,"category"===g.type&&(S=S.filter((function(t){return o.isAngleInsideSector(x(t),a.sectorInRad)}))),g.visible){var I="inside"===g.ticks?-1:1,L=(g.linewidth||1)/2;p.drawTicks(r,g,{vals:S,layer:i["angular-axis"],path:"M"+I*L+",0h"+I*g.ticklen,transFn:b,crisp:!1}),p.drawGrid(r,g,{vals:S,layer:i["angular-grid"],path:k,transFn:o.noop,crisp:!1}),p.drawLabels(r,g,{vals:S,layer:i["angular-axis"],repositionOnUpdate:!0,transFn:m,labelFns:T})}E(i["angular-line"].select("path"),f.showline,{d:a.pathSubplot(),transform:s(d,h)}).attr("stroke-width",f.linewidth).call(c.stroke,f.linecolor)},B.updateFx=function(t,e){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(t),this.updateRadialDrag(t,e,0),this.updateRadialDrag(t,e,1)),this.updateHoverAndMainDrag(t))},B.updateHoverAndMainDrag=function(t){var e,a,l=this,c=l.isSmith,u=l.gd,d=l.layers,p=t._zoomlayer,h=S.MINZOOM,f=S.OFFEDGE,g=l.radius,m=l.innerRadius,T=l.cx,_=l.cy,A=l.cxx,M=l.cyy,L=l.sectorInRad,R=l.vangles,D=l.radialAxis,F=I.clampTiny,C=I.findXYatLength,P=I.findEnclosingVertexAngles,O=S.cornerHalfWidth,j=S.cornerLen/2,z=v.makeDragger(d,"path","maindrag",!1===t.dragmode?"none":"crosshair");r.select(z).attr("d",l.pathSubplot()).attr("transform",s(T,_)),z.onmousemove=function(t){y.hover(u,t,l.id),u._fullLayout._lasthover=z,u._fullLayout._hoversubplot=l.id},z.onmouseout=function(t){u._dragging||x.unhover(u,t)};var N,B,H,G,E,V,Z,U,X,K={element:z,gd:u,subplot:l.id,plotinfo:{id:l.id,xaxis:l.xaxis,yaxis:l.yaxis},xaxes:[l.xaxis],yaxes:[l.yaxis]};function Y(t,e){return Math.sqrt(t*t+e*e)}function W(t,e){return Y(t-A,e-M)}function $(t,e){return Math.atan2(M-e,t-A)}function q(t,e){return[t*Math.cos(e),t*Math.sin(-e)]}function J(t,e){if(0===t)return l.pathSector(2*O);var a=j/t,r=e-a,i=e+a,n=Math.max(0,Math.min(t,g)),o=n-O,s=n+O;return"M"+q(o,r)+"A"+[o,o]+" 0,0,0 "+q(o,i)+"L"+q(s,i)+"A"+[s,s]+" 0,0,1 "+q(s,r)+"Z"}function Q(t,e,a){if(0===t)return l.pathSector(2*O);var r,i,n=q(t,e),o=q(t,a),s=F((n[0]+o[0])/2),c=F((n[1]+o[1])/2);if(s&&c){var u=c/s,d=-1/u,p=C(O,u,s,c);r=C(j,d,p[0][0],p[0][1]),i=C(j,d,p[1][0],p[1][1])}else{var h,f;c?(h=j,f=O):(h=O,f=j),r=[[s-h,c-f],[s+h,c-f]],i=[[s-h,c+f],[s+h,c+f]]}return"M"+r.join("L")+"L"+i.reverse().join("L")+"Z"}function tt(t,e){return e=Math.max(Math.min(e,g),m),t<f?t=0:g-t<f?t=g:e<f?e=0:g-e<f&&(e=g),Math.abs(e-t)>h?(t<e?(H=t,G=e):(H=e,G=t),!0):(H=null,G=null,!1)}function et(t,e){t=t||E,e=e||"M0,0Z",U.attr("d",t),X.attr("d",e),v.transitionZoombox(U,X,V,Z),V=!0;var a={};ot(a),u.emit("plotly_relayouting",a)}function at(t,r){var i,n,o=N+(t*=e),s=B+(r*=a),c=W(N,B),u=Math.min(W(o,s),g),d=$(N,B);tt(c,u)&&(i=E+l.pathSector(G),H&&(i+=l.pathSector(H)),n=J(H,d)+J(G,d)),et(i,n)}function rt(t,e,a,r){var i=I.findIntersectionXY(a,r,a,[t-A,M-e]);return Y(i[0],i[1])}function it(t,e){var a,r,i=N+t,n=B+e,o=$(N,B),s=$(i,n),c=P(o,R),u=P(s,R);tt(rt(N,B,c[0],c[1]),Math.min(rt(i,n,u[0],u[1]),g))&&(a=E+l.pathSector(G),H&&(a+=l.pathSector(H)),r=[Q(H,c[0],c[1]),Q(G,c[0],c[1])].join(" ")),et(a,r)}function nt(){if(v.removeZoombox(u),null!==H&&null!==G){var t={};ot(t),v.showDoubleClickNotifier(u),n.call("_guiRelayout",u,t)}}function ot(t){var e=D._rl,a=(e[1]-e[0])/(1-m/g)/g,r=[e[0]+(H-m)*a,e[0]+(G-m)*a];t[l.id+".radialaxis.range"]=r}function lt(t,e){var a=u._fullLayout.clickmode;if(v.removeZoombox(u),2===t){var r={};for(var i in l.viewInitial)r[l.id+"."+i]=l.viewInitial[i];u.emit("plotly_doubleclick",null),n.call("_guiRelayout",u,r)}a.indexOf("select")>-1&&1===t&&k(e,u,[l.xaxis],[l.yaxis],l.id,K),a.indexOf("event")>-1&&y.click(u,e,l.id)}K.prepFn=function(t,r,n){var s=u._fullLayout.dragmode,d=z.getBoundingClientRect();u._fullLayout._calcInverseTransform(u);var h=u._fullLayout._invTransform;e=u._fullLayout._invScaleX,a=u._fullLayout._invScaleY;var f=o.apply3DTransform(h)(r-d.left,n-d.top);if(N=f[0],B=f[1],R){var x=I.findPolygonOffset(g,L[0],L[1],R);N+=A+x[0],B+=M+x[1]}switch(s){case"zoom":K.clickFn=lt,c||(K.moveFn=R?it:at,K.doneFn=nt,function(){H=null,G=null,E=l.pathSubplot(),V=!1;var t=u._fullLayout[l.id];Z=i(t.bgcolor).getLuminance(),(U=v.makeZoombox(p,Z,T,_,E)).attr("fill-rule","evenodd"),X=v.makeCorners(p,T,_),w(u)}());break;case"select":case"lasso":b(t,r,n,K,s)}},x.init(K)},B.updateRadialDrag=function(t,e,a){var i=this,c=i.gd,u=i.layers,d=i.radius,p=i.innerRadius,h=i.cx,f=i.cy,g=i.radialAxis,y=S.radialDragBoxSize,m=y/2;if(g.visible){var b,k,T,M=j(i.radialAxisAngle),I=g._rl,L=I[0],R=I[1],D=I[a],F=.75*(I[1]-I[0])/(1-i.getHole(e))/d;a?(b=h+(d+m)*Math.cos(M),k=f-(d+m)*Math.sin(M),T="radialdrag"):(b=h+(p-m)*Math.cos(M),k=f-(p-m)*Math.sin(M),T="radialdrag-inner");var C,P,O,N=v.makeRectDragger(u,T,"crosshair",-m,-m,y,y),B={element:N,gd:c};!1===t.dragmode&&(B.dragmode=!1),E(r.select(N),g.visible&&p<d,{transform:s(b,k)}),B.prepFn=function(){C=null,P=null,O=null,B.moveFn=H,B.doneFn=V,w(c)},B.clampFn=function(t,e){return Math.sqrt(t*t+e*e)<S.MINDRAG&&(t=0,e=0),[t,e]},x.init(B)}function H(t,e){if(C)C(t,e);else{var r=[t,-e],n=[Math.cos(M),Math.sin(M)],l=Math.abs(o.dot(r,n)/Math.sqrt(o.dot(r,r)));isNaN(l)||(C=l<.5?Z:U)}var s={};!function(t){null!==P?t[i.id+".radialaxis.angle"]=P:null!==O&&(t[i.id+".radialaxis.range["+a+"]"]=O)}(s),c.emit("plotly_relayouting",s)}function V(){null!==P?n.call("_guiRelayout",c,i.id+".radialaxis.angle",P):null!==O&&n.call("_guiRelayout",c,i.id+".radialaxis.range["+a+"]",O)}function Z(t,e){if(0!==a){var r=b+t,n=k+e;P=Math.atan2(f-n,r-h),i.vangles&&(P=G(P,i.vangles)),P=z(P);var o=s(h,f)+l(-P);u["radial-axis"].attr("transform",o),u["radial-line"].select("line").attr("transform",o);var c=i.gd._fullLayout,d=c[i.id];i.updateRadialAxisTitle(c,d,P)}}function U(t,e){var r=o.dot([t,-e],[Math.cos(M),Math.sin(M)]);if(O=D-F*r,F>0==(a?O>L:O<R)){var l=c._fullLayout,s=l[i.id];g.range[a]=O,g._rl[a]=O,i.updateRadialAxis(l,s),i.xaxis.setRange(),i.xaxis.setScale(),i.yaxis.setRange(),i.yaxis.setScale();var u=!1;for(var d in i.traceHash){var p=i.traceHash[d],h=o.filterVisible(p);p[0][0].trace._module.plot(c,i,h,s),n.traceIs(d,"gl")&&h.length&&(u=!0)}u&&(_(c),A(c))}else O=null}},B.updateAngularDrag=function(t){var e=this,a=e.gd,i=e.layers,c=e.radius,d=e.angularAxis,p=e.cx,h=e.cy,f=e.cxx,g=e.cyy,y=S.angularDragBoxSize,m=v.makeDragger(i,"path","angulardrag",!1===t.dragmode?"none":"move"),b={element:m,gd:a};function k(t,e){return Math.atan2(g+y-e,t-f-y)}!1===t.dragmode?b.dragmode=!1:r.select(m).attr("d",e.pathAnnulus(c,c+y)).attr("transform",s(p,h)).call(T,"move");var M,I,L,R,D,F,C=i.frontplot.select(".scatterlayer").selectAll(".trace"),P=C.selectAll(".point"),O=C.selectAll(".textpoint");function j(c,v){var x=e.gd._fullLayout,y=x[e.id],m=k(M+c*t._invScaleX,I+v*t._invScaleY),b=z(m-F);if(R=L+b,i.frontplot.attr("transform",s(e.xOffset2,e.yOffset2)+l([-b,f,g])),e.vangles){D=e.radialAxisAngle+b;var w=s(p,h)+l(-b),T=s(p,h)+l(-D);i.bg.attr("transform",w),i["radial-grid"].attr("transform",w),i["radial-axis"].attr("transform",T),i["radial-line"].select("line").attr("transform",T),e.updateRadialAxisTitle(x,y,D)}else e.clipPaths.forTraces.select("path").attr("transform",s(f,g)+l(b));P.each((function(){var t=r.select(this),e=u.getTranslate(t);t.attr("transform",s(e.x,e.y)+l([b]))})),O.each((function(){var t=r.select(this),e=t.select("text"),a=u.getTranslate(t);t.attr("transform",l([b,e.attr("x"),e.attr("y")])+s(a.x,a.y))})),d.rotation=o.modHalf(R,360),e.updateAngularAxis(x,y),e._hasClipOnAxisFalse&&!o.isFullCircle(e.sectorInRad)&&C.call(u.hideOutsideRangePoints,e);var S=!1;for(var j in e.traceHash)if(n.traceIs(j,"gl")){var B=e.traceHash[j],H=o.filterVisible(B);B[0][0].trace._module.plot(a,e,H,y),H.length&&(S=!0)}S&&(_(a),A(a));var G={};N(G),a.emit("plotly_relayouting",G)}function N(t){t[e.id+".angularaxis.rotation"]=R,e.vangles&&(t[e.id+".radialaxis.angle"]=D)}function B(){O.select("text").attr("transform",null);var t={};N(t),n.call("_guiRelayout",a,t)}b.prepFn=function(r,i,n){var l=t[e.id];L=l.angularaxis.rotation;var s=m.getBoundingClientRect();M=i-s.left,I=n-s.top,a._fullLayout._calcInverseTransform(a);var c=o.apply3DTransform(t._invTransform)(M,I);M=c[0],I=c[1],F=k(M,I),b.moveFn=j,b.doneFn=B,w(a)},e.vangles&&!o.isFullCircle(e.sectorInRad)&&(b.prepFn=o.noop,T(r.select(m),null)),x.init(b)},B.isPtInside=function(t){if(this.isSmith)return!0;var e=this.sectorInRad,a=this.vangles,r=this.angularAxis.c2g(t.theta),i=this.radialAxis,n=i.c2l(t.r),l=i._rl;return(a?I.isPtInsidePolygon:o.isPtInsideSector)(n,r,l,e,a)},B.pathArc=function(t){var e=this.sectorInRad,a=this.vangles;return(a?I.pathPolygon:o.pathArc)(t,e[0],e[1],a)},B.pathSector=function(t){var e=this.sectorInRad,a=this.vangles;return(a?I.pathPolygon:o.pathSector)(t,e[0],e[1],a)},B.pathAnnulus=function(t,e){var a=this.sectorInRad,r=this.vangles;return(r?I.pathPolygonAnnulus:o.pathAnnulus)(t,e,a[0],a[1],r)},B.pathSubplot=function(){var t=this.innerRadius,e=this.radius;return t?this.pathAnnulus(t,e):this.pathSector(e)},B.fillViewInitialKey=function(t,e){t in this.viewInitial||(this.viewInitial[t]=e)}},64096:(t,e,a)=>{var r=a(14228),i=a(90374),n=r.deg2rad,o=r.rad2deg;t.exports=function(t,e,a){switch(i(t,a),t._id){case"x":case"radialaxis":!function(t,e){var a=e._subplot;t.setGeometry=function(){var e=t._rl[0],r=t._rl[1],i=a.innerRadius,n=(a.radius-i)/(r-e),o=i/n,l=e>r?function(t){return t<=0}:function(t){return t>=0};t.c2g=function(a){var r=t.c2l(a)-e;return(l(r)?r:0)+o},t.g2c=function(a){return t.l2c(a+e-o)},t.g2p=function(t){return t*n},t.c2p=function(e){return t.g2p(t.c2g(e))}}}(t,e);break;case"angularaxis":!function(t,e){var a=t.type;if("linear"===a){var i=t.d2c,l=t.c2d;t.d2c=function(t,e){return function(t,e){return"degrees"===e?n(t):t}(i(t),e)},t.c2d=function(t,e){return l(function(t,e){return"degrees"===e?o(t):t}(t,e))}}t.makeCalcdata=function(e,a){var r,i,n=e[a],o=e._length,l=function(a){return t.d2c(a,e.thetaunit)};if(n)for(r=new Array(o),i=0;i<o;i++)r[i]=l(n[i]);else{var s=a+"0",c="d"+a,u=s in e?l(e[s]):0,d=e[c]?l(e[c]):(t.period||2*Math.PI)/o;for(r=new Array(o),i=0;i<o;i++)r[i]=u+i*d}return r},t.setGeometry=function(){var i,l,s,c,u=e.sector,d=u.map(n),p={clockwise:-1,counterclockwise:1}[t.direction],h=n(t.rotation),f=function(t){return p*t+h},g=function(t){return(t-h)/p};switch(a){case"linear":l=i=r.identity,c=n,s=o,t.range=r.isFullCircle(d)?[u[0],u[0]+360]:d.map(g).map(o);break;case"category":var v=t._categories.length,x=t.period?Math.max(t.period,v):v;0===x&&(x=1),l=c=function(t){return 2*t*Math.PI/x},i=s=function(t){return t*x/Math.PI/2},t.range=[0,x]}t.c2g=function(t){return f(l(t))},t.g2c=function(t){return i(g(t))},t.t2g=function(t){return f(c(t))},t.g2t=function(t){return s(g(t))}}}(t,e)}}},22506:t=>{function e(t){return t<0?-1:t>0?1:0}function a(t){var e=t[0],a=t[1];if(!isFinite(e)||!isFinite(a))return[1,0];var r=(e+1)*(e+1)+a*a;return[(e*e+a*a-1)/r,2*a/r]}function r(t,e){var a=e[0],r=e[1];return[a*t.radius+t.cx,-r*t.radius+t.cy]}function i(t,e){return e*t.radius}t.exports={smith:a,reactanceArc:function(t,e,n,o){var l=r(t,a([n,e])),s=l[0],c=l[1],u=r(t,a([o,e])),d=u[0],p=u[1];if(0===e)return["M"+s+","+c,"L"+d+","+p].join(" ");var h=i(t,1/Math.abs(e));return["M"+s+","+c,"A"+h+","+h+" 0 0,"+(e<0?1:0)+" "+d+","+p].join(" ")},resistanceArc:function(t,n,o,l){var s=i(t,1/(n+1)),c=r(t,a([n,o])),u=c[0],d=c[1],p=r(t,a([n,l])),h=p[0],f=p[1];if(e(o)!==e(l)){var g=r(t,a([n,0]));return["M"+u+","+d,"A"+s+","+s+" 0 0,"+(0<o?0:1)+" "+g[0]+","+g[1],"A"+s+","+s+" 0 0,"+(l<0?0:1)+h+","+f].join(" ")}return["M"+u+","+d,"A"+s+","+s+" 0 0,"+(l<o?0:1)+" "+h+","+f].join(" ")},smithTransform:r}},99491:(t,e,a)=>{var r=a(14228),i=a(38499),n=a(42311).N;t.exports=function(t,e,a,o){var l,s,c=o.type,u=o.attributes,d=o.handleDefaults,p=o.partition||"x",h=e._subplots[c],f=h.length,g=f&&h[0].replace(/\d+$/,"");function v(t,e){return r.coerce(l,s,u,t,e)}for(var x=0;x<f;x++){var y=h[x];l=t[y]?t[y]:t[y]={},s=i.newContainer(e,y,g),o.noUirevision||v("uirevision",e.uirevision);var m={};m[p]=[x/f,(x+1)/f],n(s,e,v,m),o.id=y,d(l,s,v,o)}}},8585:(t,e,a)=>{var r=a(52745).rb,i=a(52745).ay,n=a(4214).extendFlat,o=a(86181),l=a(97665),s=a(36070),c=l.line;t.exports={mode:l.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the radial coordinates"},theta:{valType:"data_array",editType:"calc+clearAxisTypes",description:"Sets the angular coordinates"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:["Alternate to `r`.","Builds a linear space of r coordinates.","Use with `dr`","where `r0` is the starting coordinate and `dr` the step."].join(" ")},dr:{valType:"number",dflt:1,editType:"calc",description:"Sets the r coordinate step."},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:["Alternate to `theta`.","Builds a linear space of theta coordinates.","Use with `dtheta`","where `theta0` is the starting coordinate and `dtheta` the step."].join(" ")},dtheta:{valType:"number",editType:"calc",description:["Sets the theta coordinate step.","By default, the `dtheta` step equals the subplot's period divided","by the length of the `r` coordinates."].join(" ")},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes",description:["Sets the unit of input *theta* values.","Has an effect only when on *linear* angular axes."].join(" ")},text:l.text,texttemplate:i({editType:"plot"},{keys:["r","theta","text"]}),hovertext:l.hovertext,line:{color:c.color,width:c.width,dash:c.dash,backoff:c.backoff,shape:n({},c.shape,{values:["linear","spline"]}),smoothing:c.smoothing,editType:"calc"},connectgaps:l.connectgaps,marker:l.marker,cliponaxis:n({},l.cliponaxis,{dflt:!1}),textposition:l.textposition,textfont:l.textfont,fill:n({},l.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterpolar has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:o(),hoverinfo:n({},s.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:l.hoveron,hovertemplate:r(),selected:l.selected,unselected:l.unselected}},3405:(t,e,a)=>{var r=a(35646),i=a(97452).BADNUM,n=a(41665),o=a(6667),l=a(41062),s=a(78800),c=a(28453).calcMarkerSize;t.exports=function(t,e){for(var a=t._fullLayout,u=e.subplot,d=a[u].radialaxis,p=a[u].angularaxis,h=d.makeCalcdata(e,"r"),f=p.makeCalcdata(e,"theta"),g=e._length,v=new Array(g),x=0;x<g;x++){var y=h[x],m=f[x],b=v[x]={};r(y)&&r(m)?(b.r=y,b.theta=m):b.r=i}var k=c(e,g);return e._extremes.x=n.findExtremes(d,h,{ppad:k}),o(t,e),l(v,e),s(v,e),v}},32846:(t,e,a)=>{var r=a(14228),i=a(16899),n=a(15267),o=a(6435),l=a(77029),s=a(11824),c=a(75975),u=a(68355).PTS_LINESONLY,d=a(8585);function p(t,e,a,i){var n,o=i("r"),l=i("theta");if(r.isTypedArray(o)&&(e.r=o=Array.from(o)),r.isTypedArray(l)&&(e.theta=l=Array.from(l)),o)l?n=Math.min(o.length,l.length):(n=o.length,i("theta0"),i("dtheta"));else{if(!l)return 0;n=e.theta.length,i("r0"),i("dr")}return e._length=n,n}t.exports={handleRThetaDefaults:p,supplyDefaults:function(t,e,a,h){function f(a,i){return r.coerce(t,e,d,a,i)}var g=p(0,e,0,f);if(g){f("thetaunit"),f("mode",g<u?"lines+markers":"lines"),f("text"),f("hovertext"),"fills"!==e.hoveron&&f("hovertemplate"),i.hasMarkers(e)&&n(t,e,a,h,f,{gradient:!0}),i.hasLines(e)&&(o(t,e,a,h,f,{backoff:!0}),l(t,e,f),f("connectgaps")),i.hasText(e)&&(f("texttemplate"),s(t,e,h,f));var v=[];(i.hasMarkers(e)||i.hasText(e))&&(f("cliponaxis"),f("marker.maxdisplayed"),v.push("points")),f("fill"),"none"!==e.fill&&(c(t,e,a,f),i.hasLines(e)||l(t,e,f)),"tonext"!==e.fill&&"toself"!==e.fill||v.push("fills"),f("hoveron",v.join("+")||"points"),r.coerceSelectionMarkerOpacity(e,f)}else e.visible=!1}}},79457:(t,e,a)=>{var r=a(14228),i=a(41665);t.exports=function(t,e,a){var n,o,l={},s=a[e.subplot]._subplot;s?(n=s.radialAxis,o=s.angularAxis):(n=(s=a[e.subplot]).radialaxis,o=s.angularaxis);var c=n.c2l(t.r);l.rLabel=i.tickText(n,c,!0).text;var u="degrees"===o.thetaunit?r.rad2deg(t.theta):t.theta;return l.thetaLabel=i.tickText(o,u,!0).text,l}},82960:(t,e,a)=>{var r=a(71240);function i(t,e,a,r){var i=a.radialAxis,n=a.angularAxis;i._hovertitle="r",n._hovertitle="θ";var o={};o[e.subplot]={_subplot:a};var l=e._module.formatLabels(t,e,o);r.rLabel=l.rLabel,r.thetaLabel=l.thetaLabel;var s=t.hi||e.hoverinfo,c=[];function u(t,e){c.push(t._hovertitle+": "+e)}if(!e.hovertemplate){var d=s.split("+");-1!==d.indexOf("all")&&(d=["r","theta","text"]),-1!==d.indexOf("r")&&u(i,r.rLabel),-1!==d.indexOf("theta")&&u(n,r.thetaLabel),-1!==d.indexOf("text")&&r.text&&(c.push(r.text),delete r.text),r.extraText=c.join("<br>")}}t.exports={hoverPoints:function(t,e,a,n){var o=r(t,e,a,n);if(o&&!1!==o[0].index){var l=o[0];if(void 0===l.index)return o;var s=t.subplot,c=l.cd[l.index],u=l.trace;if(s.isPtInside(c))return l.xLabelVal=void 0,l.yLabelVal=void 0,i(c,u,s,l),l.hovertemplate=u.hovertemplate,o}},makeHoverPointText:i}},49610:(t,e,a)=>{t.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:a(66928),categories:["polar","symbols","showLegend","scatter-like"],attributes:a(8585),supplyDefaults:a(32846).supplyDefaults,colorbar:a(15869),formatLabels:a(79457),calc:a(3405),plot:a(95555),style:a(9691).style,styleOnSelect:a(9691).styleOnSelect,hoverPoints:a(82960).hoverPoints,selectPoints:a(59384),meta:{hrName:"scatter_polar",description:["The scatterpolar trace type encompasses line charts, scatter charts, text charts, and bubble charts","in polar coordinates.","The data visualized as scatter point or lines is set in","`r` (radial) and `theta` (angular) coordinates","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}},95555:(t,e,a)=>{var r=a(65227),i=a(97452).BADNUM;t.exports=function(t,e,a){for(var n=e.layers.frontplot.select("g.scatterlayer"),o=e.xaxis,l=e.yaxis,s={xaxis:o,yaxis:l,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},c=e.radialAxis,u=e.angularAxis,d=0;d<a.length;d++)for(var p=a[d],h=0;h<p.length;h++){0===h&&(p[0].trace._xA=o,p[0].trace._yA=l);var f=p[h],g=f.r;if(g===i)f.x=f.y=i;else{var v=c.c2g(g),x=u.c2g(f.theta);f.x=v*Math.cos(x),f.y=v*Math.sin(x)}}r(t,s,a,n)}}}]);