"use strict";(self.webpackChunkjupyter_specta=self.webpackChunkjupyter_specta||[]).push([[129],{129:(e,t,o)=>{o.r(t),o.d(t,{ISpectaDocTracker:()=>g,ISpectaLayoutRegistry:()=>h,ISpectaTopbarWidgetToken:()=>y,ISpectaUrlFactoryToken:()=>m,configLabLayout:()=>ne,createFileBrowser:()=>V,debounce:()=>te,default:()=>ye,emitResizeEvent:()=>oe,getSpectaAssetUrl:()=>Q,hideAppLoadingIndicator:()=>K,isSpectaApp:()=>X,mergeObjects:()=>Y,readCellConfig:()=>ee,readSpectaConfig:()=>Z,registerDocumentFactory:()=>$,setRevealTheme:()=>ae});var a=o(5285),n=o(592),s=o(4526),i=o(5459),r=o(6110),l=o(2931),c=o(7132),d=o(1125),u=o(1247),p=o(7262);const h=new p.Token("specta:ISpectaLayoutRegistry"),g=new p.Token("exampleDocTracker"),m=new p.Token("specta:ISpectaUrlFactoryToken"),y=new p.Token("specta:ISpectaTopbarWidget");var f=o(3638),v=o(3345),b=o.n(v);const _=e=>{var t=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o}(e,[]);return b().createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},t),b().createElement("path",{d:"M4 5h16"}),b().createElement("path",{d:"M4 12h16"}),b().createElement("path",{d:"M4 19h16"}))},w=(0,v.forwardRef)((({icon:e,onClick:t,title:o,disabled:a,className:n},s)=>b().createElement("button",{ref:s,className:`jp-Button specta-icon-button ${null!=n?n:""}`,title:o,disabled:a,onClick:t},e))),C=()=>b().createElement("div",{className:"specta-divider"}),k=e=>{var t,o,a,n,s,i,r;const{themeManager:l,layoutRegistry:c}=e,[d,u]=(0,v.useState)([...null!==(t=null==l?void 0:l.themes)&&void 0!==t?t:[]]),[p,h]=(0,v.useState)(null!==(o=null==l?void 0:l.theme)&&void 0!==o?o:"light"),[g,m]=(0,v.useState)(null!==(a=null==c?void 0:c.allLayouts())&&void 0!==a?a:[]),[y,f]=(0,v.useState)(null!==(s=null===(n=null==c?void 0:c.selectedLayout)||void 0===n?void 0:n.name)&&void 0!==s?s:"default");(0,v.useEffect)((()=>{let e;if(l&&(e=(e,t)=>{t.newValue.length>0||(u([...l.themes]),l.theme&&h(l.theme))},l.themeChanged.connect(e)),c){const e=(e,t)=>{m(c.allLayouts())};c.layoutAdded.connect(e)}return()=>{l&&e&&l.themeChanged.disconnect(e)}}),[l,c]);const _=(0,v.useCallback)((e=>{var t;const o=null===(t=e.currentTarget)||void 0===t?void 0:t.value;o&&(null==l||l.setTheme(o),h(o))}),[l]),w=(0,v.useCallback)((e=>{var t;const o=null===(t=e.currentTarget)||void 0===t?void 0:t.value;o&&c&&(c.setSelectedLayout(o),f(o))}),[c]);return b().createElement("div",{style:{padding:"0 10px"}},b().createElement("p",{style:{marginTop:0,marginBottom:"5px",fontSize:"1rem"}},"SETTINGS"),b().createElement(C,null),(void 0===(null===(i=e.config)||void 0===i?void 0:i.layoutToggle)||e.config.layoutToggle)&&c&&b().createElement("div",null,b().createElement("label",{htmlFor:""},"Select layout"),b().createElement("div",{className:"jp-select-wrapper"},b().createElement("select",{className:" jp-mod-styled specta-topbar-theme",onChange:w,value:y},g.map((e=>b().createElement("option",{key:e,value:e,style:{background:"var(--jp-layout-color2)"}},e.charAt(0).toUpperCase()+e.slice(1))))))),(void 0===(null===(r=e.config)||void 0===r?void 0:r.themeToggle)||e.config.themeToggle)&&l&&b().createElement("div",null,b().createElement("label",{htmlFor:""},"Select theme"),b().createElement("div",{className:"jp-select-wrapper"},b().createElement("select",{className:" jp-mod-styled specta-topbar-theme",onChange:_,value:p},d.map((e=>b().createElement("option",{key:e,value:e,style:{background:"var(--jp-layout-color2)"}},e)))))))};function S(e){const[t,o]=(0,v.useState)(!1),a=(0,v.useRef)(null),n=(0,v.useRef)(null);return(0,v.useEffect)((()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&a.current&&!a.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),b().createElement("div",{className:"specta-topbar-right"},b().createElement(w,{ref:a,onClick:()=>o(!t),icon:b().createElement(_,{fill:"var(--jp-ui-font-color2)",height:23,width:23})}),t&&b().createElement("div",{ref:n,className:"jp-Dialog-content specta-config-dialog"},b().createElement("div",{className:"specta-config-arrow"}),b().createElement(k,{config:e.config,themeManager:e.themeManager})))}function E(e){var t;const o=b().useMemo((()=>{var t,o,a,n,s,i;return{title:null!==(o=null===(t=e.config)||void 0===t?void 0:t.title)&&void 0!==o?o:"Specta",textColor:null!==(n=null===(a=e.config)||void 0===a?void 0:a.textColor)&&void 0!==n?n:"var(--jp-ui-font-color1)",icon:null===(s=e.config)||void 0===s?void 0:s.icon,link:null===(i=e.config)||void 0===i?void 0:i.link}}),[e.config]);return b().createElement(b().Fragment,null,b().createElement("div",{className:"specta-topbar-icon-container"},o.icon&&b().createElement("img",{style:{height:"100%"},src:o.icon})),b().createElement("a",{className:"specta-topbar-title",style:{color:null!==(t=o.textColor)&&void 0!==t?t:"var(--jp-ui-font-color1)",cursor:"pointer"},href:o.link,target:"_blank",rel:"noopener noreferrer",title:o.title,"aria-label":o.title},o.title))}var x=o(4053);function T(e,t){return e.rank-t.rank}class O extends u.Widget{constructor(){super(),this._items=[],this.layout=new u.PanelLayout}addWidget(e,t){const o={widget:e,rank:t},a=x.ArrayExt.upperBound(this._items,o,T);x.ArrayExt.insert(this._items,a,o),this.layout.insertWidget(a,e)}onChildRemoved(e){const t=x.ArrayExt.findFirstIndex(this._items,(t=>t.widget===e.child));-1!==t&&x.ArrayExt.removeAt(this._items,t)}}class M extends u.Panel{constructor(e){var t,o,a,n,s,i,r,l,c,d;super(e),this._leftSide=new O,this._rightSide=new O,this._config={background:null!==(o=null===(t=e.config)||void 0===t?void 0:t.background)&&void 0!==o?o:"var(--jp-layout-color1)",title:null!==(n=null===(a=e.config)||void 0===a?void 0:a.title)&&void 0!==n?n:"Specta",themeToggle:Boolean(null===(s=e.config)||void 0===s?void 0:s.themeToggle),kernelActivity:Boolean(null===(i=e.config)||void 0===i?void 0:i.kernelActivity),textColor:null!==(l=null===(r=e.config)||void 0===r?void 0:r.textColor)&&void 0!==l?l:"var(--jp-ui-font-color1)",icon:null===(c=e.config)||void 0===c?void 0:c.icon},this.addClass("specta-topbar"),this.addClass("specta-topbar-element"),this.node.style.background=null!==(d=this._config.background)&&void 0!==d?d:"var(--jp-layout-color1)",this._rightSide.addClass("specta-topbar-right"),this._leftSide.addClass("specta-topbar-left"),this.addWidget(this._leftSide),this.addWidget(this._rightSide)}addReactWidget(e,t,o){const n=a.ReactWidget.create(e);this.addTopbarWidget(n,t,o)}addTopbarWidget(e,t,o){"left"===t?this._leftSide.addWidget(e,o):this._rightSide.addWidget(e,o)}}class P extends f.DocumentWidget{constructor(e){super(e)}dispose(){this.content.dispose(),super.dispose()}}class L extends f.ABCWidgetFactory{constructor(e){super(e),this._spectaWidgetFactory=e.spectaWidgetFactory,this._shell=e.shell,this._themeManager=e.themeManager,this._spectaTopbar=e.spectaTopbar}createNewWidget(e){const t=new u.Panel;return t.addClass("jp-specta-notebook-panel"),e.ready.then((async()=>{var o;const a=null===(o=e.contentsModel)||void 0===o?void 0:o.path,n=Z({nbMetadata:e.model.metadata,nbPath:a}),s=X();if(n.hideTopbar)s&&this._shell.hideTopBar();else{const e=v.createElement(E,{config:n.topBar}),o=v.createElement(S,{config:n.topBar,themeManager:this._themeManager});if(s)this._spectaTopbar.addReactWidget&&(this._spectaTopbar.addReactWidget(e,"left",0),this._spectaTopbar.addReactWidget(o,"right",1e4));else{const a=new M({config:n.topBar});a.addReactWidget(e,"left",0),a.addReactWidget(o,"right",1e4),t.addWidget(a)}}const i=await this._spectaWidgetFactory.createNew({context:e});i&&t.addWidget(i)})),new P({context:e,content:t})}}var W=o(6446),R=o(651);class j extends f.Context{async save(){await this.ready}async saveAs(){return await this.ready,!0}async revert(){await this.ready}}var N=o(3391);function F({bars:e=5}){return b().createElement("div",{className:"skeleton-bar-chart vertical"},b().createElement("div",{className:"skeleton-label"},"Executing cell"),Array.from({length:e}).map(((e,t)=>b().createElement("div",{key:t,className:"bar vertical-bar",style:{animationDelay:.4*t+"s"}}))))}function B(){return b().createElement("div",{className:"skeleton-line-chart"},b().createElement("div",{className:"skeleton-label"},"Executing cell"),b().createElement("svg",{viewBox:"0 0 100 40",preserveAspectRatio:"none"},b().createElement("polyline",{points:"0,30 20,20 40,25 60,15 80,10 100,20"})))}function I(){return Math.random()<.5?b().createElement(B,null):b().createElement(F,null)}class A extends u.Panel{constructor({cellIdentity:e,cell:t,sourceCell:o,info:a,cellConfig:n}){var s;super(),this._info={},this._placeholder=void 0;const{showOutput:i,outputSize:r}=n;this.removeClass("lm-Widget"),this.removeClass("p-Widget"),this.addClass("specta-cell-output"),"Big"===r?this.addClass("specta-cell-output-big"):"Full"===r&&this.addClass("specta-cell-output-full");const l=new u.Panel;l.addClass("specta-cell-content"),t.addClass("specta-item-widget"),o&&l.addWidget(o),l.addWidget(t),this.addWidget(l),this._cellOutput=t,this.cellIdentity=e,this._info=null!=a?a:{},"code"===(null===(s=a.cellModel)||void 0===s?void 0:s.cell_type)&&i&&(this._placeholder=N.ReactWidget.create(b().createElement(I,null)),this._placeholder.addClass("specta-cell-placeholder"),this.addWidget(this._placeholder))}get cellOutput(){return this._cellOutput}get info(){return this._info}removePlaceholder(){var e;this._placeholder&&(null===(e=this._placeholder)||void 0===e||e.dispose())}}var D,U=o(4602);class z{constructor(e){this.options=e,this._kernelReady=new p.PromiseDelegate,this._isDisposed=!1,this._fileChanged=new U.Signal(this),this._notebookModelJson=e.context.model.toJSON(),this._filePath=e.context.localPath,this._kernelPreference={shouldStart:!0,canStart:!0,shutdownOnDispose:!0,name:e.context.model.defaultKernelName,autoStartDefault:!0,language:e.context.model.defaultKernelLanguage},this._manager=e.manager,e.context.fileChanged.connect((e=>{this._fileChanged.emit(e.model.cells)})),this._kernelSpecManager=e.kernelSpecManager;const t=this._kernelSpecManager.specs;this._kernelSpecManager.specsChanged.connect(((e,t)=>{this._kernelReady.resolve()})),t&&0!==Object.keys(t.kernelspecs).length&&this._kernelReady.resolve()}get isDisposed(){return this._isDisposed}get fileChanged(){return this._fileChanged}dispose(){var e,t;this.isDisposed||(this._isDisposed=!0,null===(e=this._context)||void 0===e||e.dispose(),null===(t=this._notebookPanel)||void 0===t||t.dispose())}get rendermime(){return this.options.rendermime}get cells(){var e;return null===(e=this._context)||void 0===e?void 0:e.model.cells}get context(){return this._context}get panel(){return this._notebookPanel}async initialize(){this._context=await async function(e){const t=new l.NotebookModelFactory({disableDocumentWideUndoRedo:!1}),{manager:o,kernelPreference:a,filePath:n}=e,i=n.split(":"),r=s.PathExt.dirname(i.length>1?i[1]:i[0]),c=s.PathExt.join(r,p.UUID.uuid4()+".ipynb");return await o.ready,await o.kernelspecs.ready,new j({manager:o,factory:t,path:c,kernelPreference:a})}({manager:this._manager,kernelPreference:this._kernelPreference,filePath:this._filePath}),this._context.model.fromJSON(this._notebookModelJson),this._notebookPanel=function(e){const{context:t,rendermime:o,editorServices:a}=e,n=a.factoryService.newInlineEditor,s=new l.Notebook({rendermime:o,contentFactory:new l.Notebook.ContentFactory({editorFactory:n}),mimeTypeService:a.mimeTypeService});return new l.NotebookPanel({content:s,context:t})}({context:this._context,rendermime:this.options.rendermime,editorServices:this.options.editorServices}),this.options.tracker.add(this._notebookPanel),await this._context.sessionContext.initialize()}createCell(e){let t;const o=e.toJSON(),a={cellModel:o},n=ee(o);switch(e.type){case"code":{let o;e.sharedModel.transact((()=>{e.clearExecution()}),!1),n.showSource&&(o=new W.CodeCell({model:e,rendermime:this.options.rendermime,contentFactory:this.options.contentFactory,editorConfig:{lineNumbers:!1,lineWrap:!1,tabFocusable:!1,editable:!1}}),o.syncEditable=!1,o.readOnly=!0);const s=new R.OutputAreaModel({trusted:!0}),i=new R.SimplifiedOutputArea({model:s,rendermime:this.options.rendermime});t=new A({cellIdentity:e.id,cell:i,sourceCell:o,cellConfig:n,info:a});break}case"markdown":{const o=new W.MarkdownCell({model:e,rendermime:this.options.rendermime,contentFactory:this.options.contentFactory,editorConfig:this.options.editorConfig.markdown});o.initializeState(),o.inputHidden=!1,o.rendered=!0,D.removeElements(o.node,"jp-Collapser"),D.removeElements(o.node,"jp-InputPrompt"),t=new A({cellIdentity:e.id,cell:o,info:a,cellConfig:n});break}default:{const o=new W.RawCell({model:e,contentFactory:this.options.contentFactory,editorConfig:this.options.editorConfig.raw});o.inputHidden=!1,D.removeElements(o.node,"jp-Collapser"),D.removeElements(o.node,"jp-InputPrompt"),t=new A({cellIdentity:e.id,cell:o,info:a,cellConfig:n});break}}return t}async executeCell(e,t){if("code"!==e.type||!this._context)return;const o=this._kernelSpecManager.specs;o&&0!==Object.keys(o.kernelspecs).length?this._kernelReady.resolve():await this._kernelReady.promise;const a=t.cellOutput,n=e.sharedModel.source,s=await R.SimplifiedOutputArea.execute(n,a,this._context.sessionContext);return a.future.done.then((()=>{oe(),t.removePlaceholder()})),s}}!function(e){e.removeElements=function(e,t){const o=e.getElementsByClassName(t);for(let e=0;e<o.length;e++)o[e].remove()}}(D||(D={}));class J extends u.Panel{constructor(e){super(),this._ready=new p.PromiseDelegate,this._outputs=[],this.node.id=e.id,this.title.label=e.label,this.title.closable=!0,this._model=e.model,this._spectaAppConfig=e.spectaConfig,this._layoutRegistry=e.layoutRegistry,this._host=new u.Panel,this._host.addClass("specta-output-host"),this.addClass("specta-app-widget"),this.addWidget(this._host),X()||this.addSpinner(),this._model.initialize().then((async()=>{let e=this._spectaAppConfig.executionDelay;e?console.log(`Waiting for ${e}ms`):e=100,await new Promise((t=>setTimeout(t,parseInt(e+"")))),await this.render(),oe()})),this._layoutRegistry.selectedLayoutChanged.connect(this._onSelectedLayoutChanged,this),this._model.fileChanged.connect(((e,t)=>{this.rerender(t)}))}get ready(){return this._ready.promise}get model(){return this._model}addSpinner(){var e;const t=this._loaderHost=new u.Widget;t.addClass("specta-loader-host");const o=document.createElement("div");o.className="specta-loader",t.node.appendChild(o);const a=document.createElement("div");a.className="specta-loading-indicator-text",a.textContent=null!==(e=this._spectaAppConfig.loadingName)&&void 0!==e?e:"Loading Specta",t.node.appendChild(a),this.addWidget(t)}removeSpinner(){this._loaderHost?(this._loaderHost.node.style.opacity="0",setTimeout((()=>{var e;null===(e=this.layout)||void 0===e||e.removeWidget(this._loaderHost)}),100)):K()}dispose(){this.isDisposed||(this._model.dispose(),super.dispose())}async generateOutputs(e){const t=[];if(!e)return t;for(const o of e){if(0===o.sharedModel.source.length)continue;const e=this._model.createCell(o);this._model.executeCell(o,e),t.push(e)}return t}getLayout(){var e,t,o;const a=null!==(t=null===(e=this._spectaAppConfig)||void 0===e?void 0:e.defaultLayout)&&void 0!==t?t:"default";return null!==(o=this._layoutRegistry.get(a))&&void 0!==o?o:this._layoutRegistry.getDefaultLayout()}async render(){var e;const t=this._model.cells;this._outputs=await this.generateOutputs(t);const o=this.getLayout();await o.render({host:this._host,items:this._outputs,notebook:null===(e=this._model.context)||void 0===e?void 0:e.model.toJSON(),readyCallback:async()=>this.removeSpinner(),spectaConfig:this._spectaAppConfig})}async rerender(e){var t;this.addSpinner();for(const e of this._outputs)e.dispose();[...this._host.widgets].forEach((e=>{var t;null===(t=this._host.layout)||void 0===t||t.removeWidget(e)})),this._outputs=await this.generateOutputs(e);const o=this.getLayout();await o.render({host:this._host,items:this._outputs,notebook:null===(t=this._model.context)||void 0===t?void 0:t.model.toJSON(),readyCallback:async()=>{},spectaConfig:this._spectaAppConfig}),oe(),this.removeSpinner()}onCloseRequest(e){this._model.dispose(),super.onCloseRequest(e)}_onSelectedLayoutChanged(e,t){var o;const{layout:a}=t;[...this._host.widgets].forEach((e=>{var t;null===(t=this._host.layout)||void 0===t||t.removeWidget(e)})),a.render({host:this._host,items:this._outputs,notebook:null===(o=this._model.context)||void 0===o?void 0:o.model.toJSON(),readyCallback:async()=>{},spectaConfig:this._spectaAppConfig})}}class q{constructor(e){this._options=e}async createNew(e){var t,o;const{context:a}=e,n=this._options.rendermime.clone({resolver:a.urlResolver}),s=Z({nbMetadata:a.model.metadata,nbPath:null===(t=a.contentsModel)||void 0===t?void 0:t.path}),i=null!==(o=s.defaultLayout)&&void 0!==o?o:"default";this._options.spectaLayoutRegistry.setSelectedLayout(i);const r=new z({context:a,manager:this._options.manager,rendermime:n,tracker:this._options.tracker,contentFactory:this._options.contentFactory,mimeTypeService:this._options.mimeTypeService,editorConfig:l.StaticNotebook.defaultEditorConfig,notebookConfig:l.StaticNotebook.defaultNotebookConfig,editorServices:this._options.editorServices,kernelSpecManager:this._options.kernelSpecManager});return new J({id:p.UUID.uuid4(),label:"",model:r,layoutRegistry:this._options.spectaLayoutRegistry,spectaConfig:s})}}var H=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(o[a[n]]=e[a[n]])}return o};function $(e){const{factoryName:t,app:o,rendermime:a,tracker:n,editorServices:s,contentFactory:i,spectaTracker:r,spectaLayoutRegistry:l,themeManager:c,spectaTopbar:d,kernelSpecManager:u}=e,p=new q({manager:o.serviceManager,rendermime:a,tracker:n,contentFactory:i,mimeTypeService:s.mimeTypeService,editorServices:s,spectaLayoutRegistry:l,kernelSpecManager:u}),h=new L({name:t,modelName:"notebook",fileTypes:["notebook"],shell:o.shell,spectaWidgetFactory:p,themeManager:c,spectaLayoutRegistry:l,spectaTopbar:d});o.docRegistry.addWidgetFactory(h),h.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{r.save(t)})),r.add(t)}))}function V(e){const{defaultBrowser:t,urlFactory:o}=e,a=t;a.singleClickNavigation=!0,a.showFileCheckboxes=!1,a.showLastModifiedColumn=!1,a.addClass("specta-file-browser");const n=o||(e=>{const t=s.PageConfig.getBaseUrl();let o=s.PageConfig.getOption("appUrl");o.endsWith("/")||(o=`${o}/`);const a=new URL(s.URLExt.join(t,o));return a.searchParams.set("path",e),s.PageConfig.getOption("query").split("&").filter(Boolean).forEach((e=>{const[t,o]=e.split("=");a.searchParams.set(t,o)})),a.toString()}),i=a.listing.handleOpen.bind(a.listing);return a.listing.handleOpen=e=>{"directory"!==e.type?window.open(n(e.path),"_blank"):i(e)},a}function K(){const e=document.getElementById("specta-loader-host"),t=document.getElementById("specta-loader-spinner");e&&t&&(e.style.opacity="0",setTimeout((()=>{t.remove(),e.remove(),document.body.classList.remove("jp-mod-dark","jp-mod-light")}),1e3))}function Y(e,t){const o=Object.assign({},e);for(const a of Object.keys(t)){const n=t[a],s=e[a];null!=n?G(s)&&G(n)?o[a]=Y(s,n):o[a]=n:null!=s&&(o[a]=s)}return o}function G(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}function Q(e){const t=s.PageConfig.getOption("fullLabextensionsUrl");return s.URLExt.join(t,"jupyter-specta","static",e)}function X(){return!!document.querySelector('meta[name="specta-config"]')}function Z({nbMetadata:e,nbPath:t}){var o,a;let n=s.PageConfig.getOption("spectaConfig");n&&0!==n.length||(n="{}");let i=t;const r=null==t?void 0:t.split(":");r&&r.length>1&&(i=r[1]);const l=JSON.parse(n),{perFileConfig:c}=l,d=H(l,["perFileConfig"]);let u=Object.assign({},null!=d?d:{}),p={};c&&i&&c[i]&&(p=c[i],u=Object.assign(Object.assign({},u),p));const h=JSON.parse(JSON.stringify(null!==(o=null==e?void 0:e.specta)&&void 0!==o?o:{}));return"Yes"===h.hideTopbar?h.hideTopbar=!0:"No"===h.hideTopbar?h.hideTopbar=!1:null!==u.hideTopbar&&void 0!==u.hideTopbar||(h.hideTopbar=!1),h.hideTopbar||(h.topBar={},h.topbarTitle&&""!==h.topbarTitle?(h.topBar.title=h.topbarTitle,delete h.topbarTitle):(null===(a=null==p?void 0:p.topBar)||void 0===a?void 0:a.title)||(h.topBar.title=i),"No"===h.topbarThemeToggle?h.topBar.themeToggle=!1:h.topBar.themeToggle=!0,delete h.topbarThemeToggle),Y(u,h)}function ee(e){var t,o;const a=null!==(o=null===(t=null==e?void 0:e.metadata)||void 0===t?void 0:t.specta)&&void 0!==o?o:{},n={showSource:!1,showOutput:!0,outputSize:"Small"};return a.showSource&&"Yes"===a.showSource&&(n.showSource=!0),a.showOutput&&"No"===a.showOutput&&(n.showOutput=!1),a.outputSize&&(n.outputSize=a.outputSize),n}function te(e,t=100){let o;return(...a)=>{clearTimeout(o),o=setTimeout((()=>{e(...a)}),t)}}const oe=te((()=>{window.dispatchEvent(new Event("resize"))}));function ae(e){let t=document.getElementById("reveal-theme");t||(t=document.createElement("link"),t.rel="stylesheet",t.id="reveal-theme",document.head.appendChild(t)),t.href=Q(`reveal.js/${e}.css`)}async function ne(e){const{config:t,labShell:o,commands:a}=e;if(!t)return;const{setSingleMode:n,hideLeftPanel:s,hideRightPanel:i,hideStatusbar:r,hideHeader:l}=t;if(n&&await a.execute("application:set-mode",{mode:"single-document"}),s&&(o.collapseLeft(),o.isSideTabBarVisible("left")&&o.toggleSideTabBarVisibility("left")),i&&(o.collapseRight(),o.isSideTabBarVisible("right")&&o.toggleSideTabBarVisibility("right")),l&&o.isTopInSimpleModeVisible()&&await a.execute("application:toggle-header"),r){const e=document.getElementById("jp-main-statusbar");e&&!e.classList.contains("lm-mod-hidden")&&await a.execute("statusbar:toggle")}}const se={id:"specta:notebook-doc",autoStart:!0,requires:[c.IRenderMimeRegistry,l.INotebookTracker,n.IEditorServices,l.NotebookPanel.IContentFactory,h,a.IThemeManager,y,d.IKernelSpecManager],activate:(e,t,o,n,s,i,r,l,c)=>{const d=new a.WidgetTracker({namespace:"specta"});return $({factoryName:"specta",app:e,rendermime:t,tracker:o,editorServices:n,contentFactory:s,spectaTracker:d,spectaLayoutRegistry:i,themeManager:r,spectaTopbar:l,kernelSpecManager:c}),d},provides:g},ie={id:"specta/application-extension:urlFactory",autoStart:!0,provides:m,activate:()=>e=>{const t=s.PageConfig.getBaseUrl();let o=s.PageConfig.getOption("appUrl");o.endsWith("/")||(o=`${o}/`);const a=new URL(s.URLExt.join(t,o));return a.searchParams.set("path",e),s.PageConfig.getOption("query").split("&").filter(Boolean).forEach((e=>{const[t,o]=e.split("=");a.searchParams.set(t,o)})),a.toString()}},re={id:"specta/application-extension:opener",autoStart:!0,requires:[i.IDocumentManager,r.IDefaultFileBrowser,g,d.IKernelSpecManager],optional:[m],activate:async(e,t,o,a,n,i)=>{const r=new URLSearchParams(window.location.search),l="true"===r.get("no-tree");if(X()){const a=r.get("path");if(a)e.restored.then((async()=>{if(await new Promise((e=>setTimeout(e,100))),await n.ready,".ipynb"===s.PathExt.extname(a)){e.shell.addClass("specta-document-viewer");const o=t.openOrReveal(a,"specta");o&&e.shell.add(o,"main")}else{let o=0;const n=()=>{const s=t.openOrReveal(a,"default");if(s)e.shell.add(s,"main"),K();else{if(o++,o>10){console.error("Failed to open file",a);const t=new u.Widget;return t.node.innerHTML=`<h2 style="text-align: center; margin-top: 200px;">Failed to open file ${a}</h2>`,e.shell.add(t,"main"),void K()}setTimeout(n,100)}};n()}}));else{if(!l){const t=V({defaultBrowser:o,urlFactory:i});e.shell.add(t,"main",{rank:100})}K()}}else{const o=r.get("specta-path");if(!o)return;e.restored.then((async()=>{const a=e.shell;if(".ipynb"===s.PathExt.extname(o)){const n=e.commands,s=Z({});await ne({config:s.labConfig,labShell:a,commands:n});const i=t.openOrReveal(o,"specta");i&&e.shell.add(i,"main")}}))}}};class le{async render(e){const{host:t,items:o,readyCallback:a}=e;for(const e of o){const o=e.info.cellModel,a=e.info;null==o||o.cell_type,a.hidden||t.addWidget(e)}await a()}}class ce extends u.Panel{constructor(){super(),this.addClass("specta-article-host-widget"),this._outputs=new u.Panel,this._outputs.addClass("specta-article-outputs-panel"),this.addWidget(this._outputs)}addOutput(e){this._outputs.addWidget(e)}}class de{async render(e){const{host:t,items:o,readyCallback:a}=e,n=new ce;for(const e of o){const t=e.info.cellModel,o=e.info;null==t||t.cell_type,o.hidden||n.addOutput(e)}t.addWidget(n),await a()}}var ue=o(3268),pe=o.n(ue);class he extends u.Panel{constructor(){super(),this.addClass("specta-slides-host-widget"),this.addClass("reveal"),this._outputs=new u.Panel,this._outputs.addClass("slides"),this.addWidget(this._outputs)}addOutput(e){const{type:t,widget:o}=e,a=new u.Widget({node:document.createElement("section")});switch(t){case"slide":{const e=o[0];a.node.appendChild(e.node),e.parent=a,a.processMessage=t=>{e.processMessage(t)};break}case"subslide":for(const e of o){const t=document.createElement("section");t.appendChild(e.node),e.parent=a,a.node.appendChild(t)}a.processMessage=e=>{o.forEach((t=>t.processMessage(e)))};break;case"fragment":for(const[e,t]of o.entries())0!==e&&(t.addClass("fragment"),t.addClass("fade-in")),a.node.appendChild(t.node),t.parent=a;a.processMessage=e=>{o.forEach((t=>t.processMessage(e)))}}this._outputs.addWidget(a)}}class ge{constructor(){this._deckMap=new WeakMap}async render(e){var t,o,a;const n=e.spectaConfig.slidesTheme;n&&ae(n);const{host:s,items:i,readyCallback:r}=e,l=new he,c=[];for(const e of i){const n=e.info,s=null!==(o=null===(t=n.cellModel)||void 0===t?void 0:t.metadata)&&void 0!==o?o:{},i=null===(a=null==s?void 0:s.slideshow)||void 0===a?void 0:a.slide_type;if(!n.hidden){const t=c[c.length-1];switch(i){case"subslide":"subslide"===(null==t?void 0:t.type)?t.widget.push(e):c.push({type:"subslide",widget:[e]});break;case"fragment":"fragment"===(null==t?void 0:t.type)?t.widget.push(e):c.push({type:"fragment",widget:[e]});break;default:c.push({type:"slide",widget:[e]})}}}for(const e of c)l.addOutput(e);s.addWidget(l),await r();const d=new(pe())(l.node,{embedded:!0});d.initialize(),d.on("slidetransitionend",(e=>{oe()})),this._deckMap.set(s.node,d)}}class me{constructor(){this._registry=new Map,this._layoutAdded=new U.Signal(this),this._selectedLayoutChanged=new U.Signal(this);const e=new le;this._registry=new Map,this._registry.set("default",e),this._registry.set("article",new de),this._registry.set("slides",new ge),this._selectedLayout={name:"default",layout:e}}get layoutAdded(){return this._layoutAdded}get selectedLayout(){return this._selectedLayout}get selectedLayoutChanged(){return this._selectedLayoutChanged}get(e){return this._registry.get(e)}getDefaultLayout(){return this._registry.get("default")}async setSelectedLayout(e){if(!this._registry.has(e))throw new Error(`Layout with name ${e} does not exist`);const t=this._selectedLayout.layout;this._selectedLayout={name:e,layout:this._registry.get(e)},this._selectedLayoutChanged.emit(Object.assign(Object.assign({},this._selectedLayout),{oldLayout:t}))}register(e,t){if(this._registry.has(e))throw new Error(`Layout with name ${e} already exists`);this._registry.set(e,t),this._layoutAdded.emit(e)}allLayouts(){return Array.from(this._registry.keys())}}const ye=[se,re,{id:"specta:layout-registry",autoStart:!0,provides:h,activate:e=>{var t;const o=new me,a=null!==(t=Z({}).defaultLayout)&&void 0!==t?t:"default";return o.setSelectedLayout(a),o}},{id:"specta:topbar",description:"Specta topbar extension",autoStart:!0,requires:[a.IThemeManager,h],provides:y,activate:(e,t,o)=>{if(!X())return{addTopbarWidget:void 0};const a=new URLSearchParams(window.location.search).get("path"),n=Z({nbPath:a});if(n.hideTopbar)return e.shell.hideTopBar(),{addTopbarWidget:void 0};const i=new M({config:n.topBar});if(i.id="specta-topbar-widget",e.shell.add(i,"top"),a&&".ipynb"===s.PathExt.extname(a))return i;const r=v.createElement(E,{config:n.topBar});i.addReactWidget(r,"left",0);const l=v.createElement(S,{config:n.topBar,themeManager:t});return i.addReactWidget(l,"right",1e4),i}},{id:"jupyter-specta:app-meta",autoStart:!0,activate:e=>{}},{id:"jupyter-specta:cell-meta",autoStart:!0,activate:e=>{}},ie]}}]);