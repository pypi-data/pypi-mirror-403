[tool.poetry]
name = "ethical-response-generator"
version = "0.1.0"
description = "Generate validated ethical responses to challenging prompts using Constitutional AI (CAI) models"
authors = ["dlattka <dennislattka@gmail.com>"]
license = "MIT"
readme = "README.md"
packages = [{include = "ethical_gen", from = "src"}]

[tool.poetry.dependencies]
python = ">=3.10"
anthropic = ">=0.40.0"
openai = ">=1.0.0"
datasets = ">=2.14.0"
pydantic = ">=2.0.0"
tomli = ">=2.0.0"
rich = ">=13.0.0"
typer = ">=0.9.0"
tqdm = ">=4.65.0"
aiohttp = ">=3.9.0"

[tool.poetry.group.dev.dependencies]
pytest = ">=7.0.0"
pytest-asyncio = ">=0.21.0"
pytest-cov = ">=4.0.0"
ruff = ">=0.1.0"
black = ">=24.0.0"
mypy = ">=1.8.0"
bandit = {extras = ["toml"], version = ">=1.7.0"}
pylint = "^4.0.4"

[tool.poetry.scripts]
ethical-gen = "ethical_gen.main:app"

[build-system]
requires = ["poetry-core>=2.0.0,<3.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.ruff]
line-length = 100
target-version = "py310"

[tool.ruff.lint]
select = ["E", "F", "I", "W"]

[tool.black]
line-length = 100
target-version = ["py310"]

[tool.mypy]
python_version = "3.10"
warn_return_any = true
warn_unused_ignores = true
ignore_missing_imports = true

[tool.bandit]
exclude_dirs = ["tests"]

[tool.pylint.main]
# Pydantic models and CLI functions need flexibility
ignore-patterns = ["test_.*\\.py"]

[tool.pylint.messages_control]
# Disable false positives and style preferences that don't apply to this codebase
disable = [
    "R0903",  # too-few-public-methods: Single-purpose classes are valid design
    "R0913",  # too-many-arguments: CLI commands need many parameters
    "R0917",  # too-many-positional-arguments: Same as above
    "R0914",  # too-many-locals: Complex async functions need more variables
    "R0915",  # too-many-statements: Long functions are sometimes necessary
    "R0801",  # duplicate-code: Similar patterns across formatters/validators are intentional
    "W0707",  # raise-missing-from: Style preference, explicit re-raise not always needed
    "C0415",  # import-outside-toplevel: Delayed imports are valid for optional dependencies
    "W0107",  # unnecessary-pass: False positive with abstractmethod
    "R1705",  # no-else-return: Sometimes else is clearer for readability
    "E1101",  # no-member: False positive with Pydantic v2 Field(default_factory=...)
]

[tool.pylint.design]
max-args = 10
max-locals = 20

[tool.pytest.ini_options]
asyncio_mode = "auto"
testpaths = ["tests"]
