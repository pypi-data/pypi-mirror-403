id: ec2-vars-outputs
title: "EC2 resource using variables and output"
stack: terraform
difficulty: Hard
xp: 150

goal: "Provision an EC2 instance using Terraform variables and expose key information through outputs"

skills:
  - terraform-variables
  - terraform-outputs
  - aws-ec2

hint: "Use variables for instance_type and ami; create aws_instance \"dev\" and output its id."

validator: "validator.py"

mentor:
  why: "This lab teaches how Terraform variables and outputs enable reusable, configurable infrastructure while exposing important state information for integration and automation."
  intent: stretch

  guidance:
    before: |
      Think about how variables decouple configuration values from
      infrastructure definitions and how outputs expose useful state.

      Optional manual file verification commands (not required for validation):
      These commands operate only on local files.

      - terraform fmt -check
      - terraform validate
    after: |
      Extend the configuration with additional outputs or refactor variables
      to support environment-specific reuse.

  tags:
    - terraform
    - variables
    - outputs
    - aws-ec2

solution:
  overview: >
    At advanced levels, Terraform configurations must be reusable,
    parameterized, and composable. This lab evaluates whether
    an engineer can separate configuration from code using variables
    and expose essential infrastructure state through outputs.

  professional_reasoning:
    - Variables prevent hardcoding and enable reuse across environments
    - Outputs expose resource attributes for integration and automation
    - Clear input/output boundaries improve maintainability
    - Infrastructure definitions should remain environment-agnostic

  real_world_context:
    - Production Terraform modules rely heavily on variables and outputs
    - Outputs are often consumed by CI/CD pipelines and downstream systems
    - Poor variable design leads to brittle and duplicated infrastructure

execution:
  runtime: docker
  requires_execution: false
  required_tools:
    - terraform

