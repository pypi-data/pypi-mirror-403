id: safe-cleanup-simulation
title: "Design a safe cleanup script with dry-run"
stack: linux
difficulty: Expert
xp: 300
goal: "Design a safe cleanup script that supports a dry-run mode to prevent accidental data loss"

skills:
  - safe-scripting
  - defensive-automation
  - linux-scripting

hint: "Implement --dry-run mode that lists files without deleting them."

validator: "validator.py"

mentor:
  why: "Defensive scripting is critical in production environments, where accidental deletion can cause irreversible data loss."
  intent: stretch

  guidance:
    before: |
      Think about how destructive commands can be simulated safely and how scripts can expose intent without performing irreversible actions.

      Optional manual commands (not required for validation):
      These commands operate only on local files.
      Results are for personal verification only.

      - find workspace -type f
    after: |
      Consider how confirmation prompts, logging, and dry-run flags are used in production cleanup tools.

  tags:
    - linux
    - safety
    - bash
    - defensive-scripting

solution:
  overview: >
    At expert level, cleanup automation is evaluated primarily on safety.
    This lab assesses whether an engineer can design a script that
    communicates destructive intent clearly while preventing accidental
    data loss through defensive controls such as dry-run modes.
  professional_reasoning:
    - Destructive scripts must be safe by default
    - Dry-run modes allow validation without risk
    - Clear output improves operator confidence
    - Safety mechanisms reduce blast radius of human error
  real_world_context:
    - Production cleanup jobs often run unattended
    - Accidental deletions are common causes of incidents
    - Mature teams require preview and validation before execution

execution:
  runtime: docker
  requires_execution: true
  required_tools:
    - linux
