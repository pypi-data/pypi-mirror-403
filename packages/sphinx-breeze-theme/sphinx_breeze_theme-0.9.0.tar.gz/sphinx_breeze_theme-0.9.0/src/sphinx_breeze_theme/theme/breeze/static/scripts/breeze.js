const f=[];function l(e,t){const o={selector:e,init:t,instances:new WeakMap};f.push(o),document.querySelectorAll(e).forEach(n=>g(n,o))}function g(e,t){if(t.instances.has(e))return;const o=t.init(e)||void 0;t.instances.set(e,o)}function v(e,t){if(!t.instances.has(e))return;const o=t.instances.get(e);o&&o(),t.instances.delete(e)}const A=new MutationObserver(e=>{for(const t of e){for(const o of t.addedNodes)if(o instanceof HTMLElement){for(const n of f)o.matches(n.selector)&&g(o,n);for(const n of o.querySelectorAll(f.map(r=>r.selector).join(","))){const r=f.filter(a=>n.matches(a.selector));for(const a of r)g(n,a)}}for(const o of t.removedNodes)if(o instanceof HTMLElement){for(const n of f)o.matches(n.selector)&&v(o,n);for(const n of o.querySelectorAll(f.map(r=>r.selector).join(","))){const r=f.filter(a=>n.matches(a.selector));for(const a of r)v(n,a)}}}});A.observe(document.documentElement,{childList:!0,subtree:!0});document.addEventListener("keydown",e=>{if((e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==="k"){const t=document.querySelector(".bz-search-button a");t&&(e.preventDefault(),t.click())}});var w=(e=>(e.AUTO="auto",e.LIGHT="light",e.DARK="dark",e))(w||{});const E=e=>{const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",o=e==="auto"?t:e;document.documentElement.dataset.mode=e,document.documentElement.dataset.theme=o,localStorage.setItem("breeze-mode",e)},q=()=>{if((localStorage.getItem("breeze-mode")??"auto")==="auto"){const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";E(t==="light"?"dark":"light")}else E("auto")},I=window.matchMedia("(prefers-color-scheme: dark)");I.addEventListener("change",e=>{if(localStorage.getItem("mode")==="auto"){const o=e.matches?"dark":"light";document.documentElement.dataset.theme=o}});let k=window.scrollY;l(".bz-back-to-top",e=>{const t=()=>{const o=window.scrollY,n=o<k&&o>0;e.classList.toggle("active",n),k=o};return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)});l(".bz-dropdown",e=>{const t=e.querySelector("button"),o=e.querySelector("[role=menu]");if(!t||!o)return;t.setAttribute("aria-expanded","false"),o.setAttribute("aria-hidden","true");const n=()=>{t.setAttribute("aria-expanded","true"),o.setAttribute("aria-hidden","false")},r=()=>{t.setAttribute("aria-expanded","false"),o.setAttribute("aria-hidden","true")};e.addEventListener("mouseenter",()=>n()),e.addEventListener("mouseleave",()=>r()),e.addEventListener("keydown",a=>{const s=Array.from(o.querySelectorAll("[role=menuitem]"));if(s.length){if(a.key==="Escape")r(),t.focus();else if(a.key==="ArrowDown"){n();const c=s.indexOf(document.activeElement);s[(c+1)%s.length].focus()}else if(a.key==="ArrowUp"){n();const c=Math.max(s.indexOf(document.activeElement),0);s[(c-1+s.length)%s.length].focus()}}}),e.addEventListener("focusout",a=>{const s=a.relatedTarget;(!s||!e.contains(s))&&r()})});l("label[role=button][for]",e=>{const t=e.getAttribute("for");if(!t)return;const o=document.getElementById(t);o&&(e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.addEventListener("keydown",n=>{(n.key==="Enter"||n.key===" ")&&(o.click?.(),n.preventDefault())}))});const x=36e5;l(".bz-repo-stats",e=>{const t=e.querySelector("a");t&&z(t)});function p(e){return e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e4?Math.round(e/1e3)+"k":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toString()}async function C(e,t){const n=await(await fetch(`https://api.github.com/repos/${e}/${t}`)).json();return{stars:n.stargazers_count,forks:n.forks_count}}async function D(e,t){const o=encodeURIComponent(`${e}/${t}`),r=await(await fetch(`https://gitlab.com/api/v4/projects/${o}`)).json();return{stars:r.star_count,forks:r.forks_count}}function $(e){const t=localStorage.getItem(e);if(!t)return null;const{data:o,timestamp:n}=JSON.parse(t);return Date.now()-n>x?(localStorage.removeItem(e),null):o}function T(e,t){localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now()}))}async function z(e){const t=e.dataset.provider,o=e.dataset.user,n=e.dataset.repo;if(!t||!o||!n){console.warn("Missing provider, user, or repo data for repo stats");return}if(t!=="github"&&t!=="gitlab"){console.warn(`Unsupported provider: ${t}`);return}const r=`bz-repo-stats:${t}:${o}/${n}`,a=e.querySelector('[data-stat="stars"]'),s=e.querySelector('[data-stat="forks"]');if(!a||!s)return;const c=$(r);if(c){a.textContent=p(c.stars),s.textContent=p(c.forks);return}try{const i=t==="github"?await C(o,n):await D(o,n);a.textContent=p(i.stars),s.textContent=p(i.forks),T(r,i)}catch(i){console.error("Failed to load repo stats:",i)}}l(".bz-header-tabs",e=>{const t=e.querySelector("ul"),o=t?.querySelectorAll("li"),n=e.querySelector(".bz-dropdown"),r=n?.querySelector("ul");if(!t||!o||!n||!r)return;t.style.overflowX="hidden",o.forEach((s,c)=>{s.dataset.tabId||(s.dataset.tabId=String(c))});const a=new IntersectionObserver(s=>{s.forEach(c=>{const i=c.target,m=i.dataset.tabId;if(c.isIntersecting){const d=r.querySelector(`[data-tab-id="${m}"]`);d&&d.remove(),i.style.visibility=""}else{if(r.querySelector(`[data-tab-id="${m}"]`))return;const d=i.cloneNode(!0),u=Array.from(r.children).find(y=>Number(y.dataset.tabId)>Number(m));u?r.insertBefore(d,u):r.appendChild(d),d.dataset.tabId=m;const h=d.querySelector("a");h&&(h.role="menuitem"),i.style.visibility="hidden"}})},{root:t,threshold:1});o.forEach(s=>a.observe(s))});l(".bz-search-button",e=>{const t=e.querySelector("a");t&&t.addEventListener("click",o=>{if(document.getElementsByTagName("readthedocs-search").length>0){o.preventDefault(),o.stopPropagation();const n=new CustomEvent("readthedocs-search-show");document.dispatchEvent(n)}})});l("[data-drawer]",e=>{const t=document.getElementById(e.dataset?.drawer??"");if(!t)return;const o=document.querySelector(`label[role="button"][for="${t.id}"]`);e.querySelectorAll("a[href]").forEach(n=>{n.addEventListener("keydown",r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),t.checked=!1,n.click())})}),t.addEventListener("change",()=>{if(t.checked){const n=S(e);if(n.length===0)return;setTimeout(()=>n[0].focus(),10)}}),e.addEventListener("keydown",n=>{if(t.checked){if(n.key==="Escape")t.checked=!1,o?.focus();else if(n.key==="Tab"){const r=S(e),a=r[0],s=r[r.length-1];n.shiftKey?document.activeElement===a&&(n.preventDefault(),s.focus()):document.activeElement===s&&(n.preventDefault(),a.focus())}}})});const S=e=>Array.from(e.querySelectorAll(["a[href]","summary","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","))).filter(t=>{if(t.offsetParent===null)return!1;const o=t.closest("details");return!(o&&!o.open&&!t.matches("summary"))});l(".bz-sidebar-toc",e=>{const t=e.querySelectorAll("a[href^='#']:not([href='#'])"),o=Array.from(t).map(r=>document.getElementById(r.hash.slice(1))).filter(r=>r!==null).reverse(),n=()=>{const r=o.find(a=>a.getBoundingClientRect().top<150)??o.at(-1);t.forEach(a=>a.classList.toggle("current",a.hash===`#${r?.id}`))};return n(),window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)});l(".bz-search-form",e=>{const t=e,o=n=>{n.preventDefault();const r=document.getElementById("search-results"),s=new FormData(t).get("q")?.toString()??"";r&&(r.innerHTML=""),Search.performSearch(s)};t.addEventListener("submit",o)});l(".bz-theme-switcher",e=>{const t=e.querySelector("button");if(!t)return;const o=()=>{const n=document.documentElement.dataset.theme===w.LIGHT?w.DARK:w.LIGHT;t.ariaLabel=`Switch to ${n} mode`,t.dataset.tooltip=t.ariaLabel};o(),t.addEventListener("click",()=>{q(),o()})});const L=new URL(document.documentElement.dataset.content_root||"./",window.location.href).pathname,M=window.location.pathname.startsWith(L)?window.location.pathname.slice(L.length):"",b=new Map;l(".bz-version-switcher",e=>{const t=e.querySelector("button"),o=t?.querySelector("span"),n=e.querySelector("ul"),r=t?.dataset.current,a=t?.dataset.url;!t||!o||!n||!r||!a||(b.has(a)||b.set(a,fetch(a).then(s=>{if(!s.ok)throw new Error(`Failed to fetch versions from ${a}`);return s.json()}).catch(s=>{throw b.delete(a),s})),b.get(a).then(s=>{Array.isArray(s)&&(n.innerHTML="",s.forEach(c=>{const i=document.createElement("li");if(n.appendChild(i),c.version===r)i.innerHTML=`<span class="current">${c.name}</span>`,o.textContent=c.name;else{const m=new URL(c.url,window.location.href),d=new URL(M,m).href,u=document.createElement("a");i.appendChild(u),u.href=d,u.role="menuitem",u.textContent=c.name,u.addEventListener("click",h=>{h.preventDefault(),fetch(d,{method:"HEAD"}).then(y=>window.location.href=y.ok?d:c.url).catch(()=>window.location.href=c.url)})}}))}).catch(s=>console.error("Version switcher error:",s)))});
