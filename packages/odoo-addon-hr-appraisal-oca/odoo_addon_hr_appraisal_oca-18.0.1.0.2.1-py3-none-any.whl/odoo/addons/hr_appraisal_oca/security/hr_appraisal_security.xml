<?xml version="1.0" ?>
<odoo>
    <record id="module_category_hr_appraisal" model="ir.module.category">
        <field name="name">Appraisals</field>
        <field name="description">Helps to evaluate employees...</field>
        <field name="sequence">3</field>
    </record>

    <record id="group_appraisal_user" model="res.groups">
        <field name="name">User</field>
        <field name="category_id" ref="hr_appraisal_oca.module_category_hr_appraisal" />
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]" />
    </record>

    <record id="group_appraisal_hr_officer" model="res.groups">
        <field name="name">HR Officer</field>
        <field name="category_id" ref="hr_appraisal_oca.module_category_hr_appraisal" />
        <field
            name="implied_ids"
            eval="[(4, ref('hr_appraisal_oca.group_appraisal_user'))]"
        />
    </record>

    <!-- Multi - Company Rules -->
    <record id="hr_appraisal_comp_rule" model="ir.rule">
        <field name="name">Appraisal multi-company</field>
        <field name="model_id" ref="hr_appraisal_oca.model_hr_appraisal" />
        <field name="domain_force">[('company_id', 'in', company_ids + [False])]</field>
    </record>

    <record id="hr_appraisal_access_rule" model="ir.rule">
        <field name="name">Appraisals - User Access</field>
        <field name="model_id" ref="hr_appraisal_oca.model_hr_appraisal" />
        <field name="global" eval="False" />
        <field name="domain_force">
            ['|','|',
                ('employee_id.user_id','=',user.id),
                ('employee_id.allowed_user_ids','in',[user.id]),
                ('manager_ids.user_id','in',[user.id])
            ]
        </field>
        <field
            name="groups"
            eval="[(4, ref('hr_appraisal_oca.group_appraisal_user'))]"
        />
    </record>

    <record id="hr_appraisal_hr_officer_rule" model="ir.rule">
        <field name="name">Appraisals - HR Officer Full Access</field>
        <field name="model_id" ref="hr_appraisal_oca.model_hr_appraisal" />
        <field name="domain_force">[(1, '=', 1)]</field>
        <!-- no restrictions -->
        <field name="global" eval="False" />
        <field
            name="groups"
            eval="[(4, ref('hr_appraisal_oca.group_appraisal_hr_officer'))]"
        />
    </record>
</odoo>
