global:
  resolve_timeout: 5m

route:
  group_by: ['alertname']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 1h
  receiver: 'slack'

receivers:
- name: 'slack'
  slack_configs:
  - api_url: 'REPLACED_BY_CI_OR_ENV'  # 형님 Slack webhook URL (PlaceHolder)
    channel: '#afo-kingdom-alerts'  # 알림 갈 채널
    username: 'Julie CPA'  # 보낸 사람 이름
    icon_emoji: ':robot_face:'
    title: '{{ .CommonLabels.alertname }}'
    text: >-
      *왕국 경보!*
      {{ range .Alerts }}
      *Alert:* {{ .Annotations.summary }}
      *Description:* {{ .Annotations.description }}
      *Severity:* {{ .Labels.severity }}
      {{ end }}
    send_resolved: true
    title_link: 'https://grafana.afo-kingdom.com/d/kingdom-overview'

inhibit_rules:
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'warning'
    equal: ['alertname']
