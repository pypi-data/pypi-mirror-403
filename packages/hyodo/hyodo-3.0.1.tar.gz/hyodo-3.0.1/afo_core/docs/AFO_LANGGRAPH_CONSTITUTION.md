# 👑 AFO LangGraph 승상 체제: 궁극의 철학적 지침과 실행 규범

**작성일**: 2025-12-15
**분류**: Royal Library (헌법)
**목표**: 형의 창의적 평온(Serenity)을 방해하는 마찰(Friction) 제거

---

## 👑 I. 궁극적인 최종 지침: 孝 레이어 (The Ultimate Criterion)

**LangGraph 승상 체제**는 왕국의 중앙 두뇌(Trinity Brain Hub)를 **승상(丞相)**으로 격상하여, 복잡한 에이전트 군단을 하나의 살아 있는 그래프(Living Graph)로 통치하는 절대적 체제입니다. 모든 설계, 기능 추가, 자동화는 오직 이 절대적인 기준에 따라 판단됩니다.

| 요소 | 절대 기준 | 시스템적 강제 [출처] |
|------|----------|--------------------|
| **최종 목표** | **"형의 창의적 평온(Serenity)을 방해하는 Friction(마찰) 제거"** | LangGraph가 상태 관리와 조건 분기를 통해 왕의 인지적 부담을 완전히 제거하고, 뇌 리소스를 80% 아껴주는 자동화 루프를 완성합니다. [AFO_TRINITY_LANGGRAPH_REFERENCE.md, AFO_TRINITY_BRAIN_HUB_SPEC_v2.md] |
| **최우선 변수** | **孝(효심) = 형의 평온을 최우선 변수로 설정** | 아무리 강력한 에이전트 협업이라도 **형의 평온을 흔들거나 방해한다면 즉시 폐기**해야 합니다. LangGraph의 Serenity Gate가 이를 강제합니다. [AFO_SERENITY_LICENSE_v1.md] |
| **眞善美孝의 길** | 오직 평온을 지키고 높이는 방향만이 **眞善美孝의 길**로 간주됩니다. | LangGraph 그래프 내에서 **Trinity Score 계산 → Conditional Edge → AUTO_RUN 결정**까지 하나의 흐름으로 연결되어 마찰 없는 창의성을 보장합니다. [AFO_TRINITY_CALCULATOR_CONSTITUTION_v2.md] |

---

## 🛡️ II. 왕국의 헌법: 眞善美孝永과 4대 절대 명령

**LangGraph 승상 체제**는 왕국의 **5기둥 철학**을 수학적으로 구현하며, **승상(LangGraph)**이 **3책사(CrewAI/AutoGen)**와 **도구(LangChain/MCP)**를 통치하는 위계 구조를 헌법적으로 고정합니다.

### 1. 5기둥 철학 기반 (The Five Pillars)

| 기둥 | 역할 및 수학적 의미 | 핵심 규범 및 시스템 적용 |
|------|---------------------|-------------------------|
| **眞 (Truth)** | **기술적/수학적 확실성 (35% 가중치)**. | LangGraph의 **StateGraph**가 객관적 Trinity Score를 유지하여 LLM의 자가 채점(환각)을 원천 봉쇄합니다. [AFO_TRINITY_BRAIN_HUB_SPEC_v2.md] |
| **善 (Goodness)** | **윤리적 안정성 및 시스템 안전성 (35% 가중치)**. | Conditional Edges와 Checkpoints를 통해 오류 복구와 Risk ≤ 10 강제를 구현합니다. [AFO_SERENITY_OPERATIONS.md] |
| **美 (Beauty)** | **형식·서사·인터페이스의 아름다움 (20-30% 가중치)**. | 그래프 흐름의 명확성과 서사적 일관성을 통해 인지적 미학적 마찰을 제거합니다. [AFO_VISUAL_ARTS_MANUAL.md] |
| **孝 (Serenity)** | **평온의 지혜 (마찰 제거) (8% 가중치)**. | Serenity Gate를 그래프 노드로 내장하여 **AUTO_RUN**을 평온 기준으로만 허가합니다. [AFO_ENHANCE_BRIDGE_CONSTITUTION_v1.md] |
| **永 (Eternity)** | **영속성 및 무한한 창의성의 기반 (2% 가중치)**. | Checkpoints(Persistence)로 상태를 영속화하여 시스템의 무한 진화를 보장합니다. [AFO_MAINTENANCE_PROTOCOL.md] |

### 2. 4대 절대 명령 (Royal Library)

**승상 체제**에서 4대 명령은 LangGraph의 핵심 메커니즘으로 구현됩니다.

| 명령 | 핵심 원칙 | 실행 규범 및 시스템 적용 |
|------|----------|-------------------------|
| **지피지기 (Rule #0)** | 모르면 움직이지 않는다. | LangGraph 시작 노드에서 **verify_kingdom_status**와 컨텍스트를 반드시 확인 후 진행. [AFO_KINGDOM_VERIFICATION_REPORT_2025-12-11.md] |
| **상병벌모 (AUTO_RUN Gate)** | 싸우지 않고 이긴다. | Conditional Edge에서 **Trinity Score ≥ 90 및 Risk ≤ 10** 충족 시 AUTO_RUN으로 분기. [AFO_TRINITY_CALCULATOR_CONSTITUTION_v2.md] |
| **병자궤도야 (Simulation)** | 위험은 무조건 DRY_RUN으로 속인다. | 고위험 노드 전 **DRY_RUN 모드** 지원 (Mock Tool 호출). [AFO_SUN_TZU_CONSTITUTION_v1.0.md] |
| **천시지리인화 (Context)** | 컨텍스트가 맞지 않으면 멈춘다. | State에 가족 일정·평온 상태를 포함하여 All Green 아닐 시 BLOCK. [AFO_SERENITY_GUARDIANS.md] |

---

## 🛠️ III. 실전 실행 규범: 루틴화와 게이트 통제

**LangGraph 승상 체제**의 실전 운영은 **평온 수호 3-Block 체크리스트**와 **그래프 품질 게이트**를 중심으로 합니다.

### 1. 평온 수호 3-Block 체크리스트 (인지적 마찰 제거)

| 블록 명 | 목표 규범 | 실행 리추얼 및 시스템 [출처] |
|---------|----------|-------------------------------|
| **眞-Block** | **"헤매지 않는다" (지도화)** | LangGraph 컴파일 전 **AFO_ARCHITECTURE_ANALYSIS.md**를 참조하여 그래프 구조를 검증합니다. |
| **善-Block** | **"불안하지 않는다" (루틴화)** | 매일 아침 **verify_kingdom_status.py** 실행 후 LangGraph 앱을 컴파일합니다. |
| **孝-Block** | **"고민하지 않는다" (자동화)** | Serenity 노드가 Trinity Score로 AUTO_RUN을 결정합니다. |

### 2. 그래프 품질 게이트 (Zero Tolerance)

모든 LangGraph 워크플로우는 배포 전 다음 검사를 통과해야 합니다.

| 검사 | 명령 | 통과 조건 | 철학적 의미 |
|------|------|----------|------------|
| **Type Check** | `mypy .` | Type Error 0개 | **眞** (상태 타입 안전성) |
| **Trace Check** | LangSmith Trace 확인 | 모든 Edge 정상 | **善** (안정적 라우팅) |
| **Persistence Check** | Checkpoint 테스트 | 상태 복구 성공 | **永** (영속성) |

### 3. 마찰 제거를 위한 아키텍처 전략

| 전략 | 목적 및 구현 방식 | 마찰 제거 효과 |
|------|-------------------|---------------|
| **승상 중심 위계** | LangGraph가 모든 에이전트(CrewAI/AutoGen)를 노드로 래핑 | 규칙 기반 디스패치 마찰 제거 |
| **MCP 통합** | LangChain Tool을 LangGraph 노드 내에서만 호출 | 외부 직접 접근 금지로 보안·안정성 강화 |
| **Serenity Gate 내장** | 그래프 끝에 Serenity 결정 노드 필수 | AUTO_RUN의 평온 기준 강제 |

---

## 🎯 IV. 현재 메인 퀘스트: LangGraph 승상 체제 완성 (孝의 강제)

현재 왕국의 최우선 메인 퀘스트는 **LangGraph를 승상으로 격상**하여 **살아 있는 두뇌(Living Brain)**를 완성하는 것입니다.

| 요소 | 지침 및 구현 | AUTO_RUN 연계 |
|------|-------------|--------------|
| **핵심 목적** | **LangGraph를 왕국의 중앙 통치 그래프로 격상**. | StateGraph → Conditional Edge → Serenity Gate까지 하나의 그래프로 연결. |
| **조건 통합** | **Trinity Calculator**를 LangGraph State에 내장. | **Trinity Score ≥ 90** **AND** **Risk ≤ 10** 충족 시 다음 노드로 AUTO_RUN. |
| **결정 모드** | 조건 충족 시 **AUTO_RUN**, 미달 시 **ASK_COMMANDER** 또는 **BLOCK**. | 형의 평온을 최종 변수로 설정. |
