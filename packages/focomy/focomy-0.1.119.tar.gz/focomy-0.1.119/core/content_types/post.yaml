name: post
label: 投稿
label_plural: 投稿一覧
icon: document
admin_menu: false  # チャンネル別管理に変更
searchable: true
menu_linkable: true
path_prefix: /post
archive_enabled: true
feed_enabled: true

fields:
  - name: title
    type: string
    label: タイトル
    required: true
    indexed: true
    max_length: 200

  - name: slug
    type: slug
    label: スラッグ
    unique: true
    auto_generate: title

  - name: body
    type: blocks
    label: 本文

  - name: excerpt
    type: text
    label: 抜粋
    max_length: 200
    auto_generate: body

  - name: featured_image
    type: media
    label: アイキャッチ
    accept: image/*
    sidebar: true

  - name: status
    type: select
    label: ステータス
    sidebar: true
    options:
      - value: draft
        label: 下書き
      - value: published
        label: 公開
      - value: private
        label: 非公開
    default: draft
    # Define allowed transitions: from_state -> [allowed_to_states]
    transitions:
      draft: [published, private]
      published: [draft, private]
      private: [draft, published]

  - name: published_at
    type: datetime
    label: 公開日時
    sidebar: true

  - name: series_order
    type: integer
    label: シリーズ内順番
    default: 0
    description: シリーズ内での表示順序
    sidebar: true

  # SEO fields
  - name: seo_title
    type: string
    label: SEOタイトル
    description: 検索結果に表示されるタイトル（空の場合は投稿タイトル）
    max_length: 60
    sidebar: true

  - name: seo_description
    type: text
    label: SEO説明文
    description: 検索結果に表示される説明文（空の場合は抜粋）
    max_length: 160
    sidebar: true

  - name: seo_noindex
    type: boolean
    label: noindex
    description: 検索エンジンにインデックスさせない
    default: false
    sidebar: true

  - name: seo_nofollow
    type: boolean
    label: nofollow
    description: リンクを追跡させない
    default: false
    sidebar: true

  - name: seo_canonical
    type: url
    label: canonical URL
    description: 正規URLを上書き
    sidebar: true

  - name: og_title
    type: string
    label: OGタイトル
    description: SNSシェア時のタイトル（空の場合はSEOタイトル）
    max_length: 60
    sidebar: true

  - name: og_description
    type: text
    label: OG説明文
    description: SNSシェア時の説明文（空の場合はSEO説明文）
    max_length: 160
    sidebar: true

  - name: og_image
    type: media
    label: OG画像
    description: SNSシェア時の画像（空の場合はアイキャッチ）
    accept: image/*
    sidebar: true

  - name: wp_id
    type: integer
    label: WordPress ID
    indexed: true

relations:
  - type: post_author
    label: 著者
    required: true

  - type: post_channel
    label: チャンネル
    required: true

  - type: post_series
    label: シリーズ

  - type: post_tags
    label: タグ

  - type: post_categories
    label: カテゴリ
