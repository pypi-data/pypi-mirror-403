<!DOCTYPE html>
<html lang="en">
<head>
    {% if google_analytics_id %}
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-96G1XCM2CC"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', '{{ google_analytics_id }}');
    </script>
    {% endif %}


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Chatbot{% endblock %}</title>

    <!-- Bootstrap 5 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" >
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/filepond/dist/filepond.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/chat_iatoolkit.css', _external=True) }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/onboarding.css', _external=True) }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/chat_modal.css',  _external=True) }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/llm_output.css', _external=True) }}">

    {% block styles %}{% endblock %}
</head>
<body>
    <!-- El "Ancla": Envolvemos el contenido en un div con un ID y estilo. -->
    <div id="page-content-wrapper" style="position: relative;">
        {% block content %}{% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/filepond/dist/filepond.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <!-- Mostrar alertas SweetAlert2 si existe el mensaje -->
    <script>
        // Configuración global de Toastr
        toastr.options = {
            "closeButton": true,
            "progressBar": true,
            "positionClass": "toast-bottom-right",
            "preventDuplicates": true,
            "timeOut": "7000",
            "extendedTimeOut": "1000",
            "tapToDismiss": false,
            "target": "#page-content-wrapper"
        };

        {% if flashed_messages %}
            {% for category, message in flashed_messages %}
                var toastClass = 'toast-info'; // default class
                if ('{{ category }}' === 'error') {
                    toastClass = 'toast-error';
                } else if ('{{ category }}' === 'success') {
                    toastClass = 'toast-success';
                }

                // Llama a Toastr usando la opción 'toastClass' para aplicar nuestro estilo
                toastr.info("{{ message }}", null, { "toastClass": "toast " + toastClass });

            {% endfor %}
        {% endif %}
    </script>

    {% block scripts %}{% endblock %}
</body>
</html>