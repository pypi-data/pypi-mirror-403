<div class="branded-form-container">
    <!-- 1. Encabezado de Marketing -->
    <div class="text-center mb-4">
        <p class="text-muted widget-intro-text">
            {{ t('ui.login_widget.welcome_message') }}
        </p>
    </div>

    <!-- 2. Formulario de Inicio de Sesión -->
    <form id="login-form"
          action="{{ url_for('login', company_short_name=company_short_name, lang=request.args.get('lang', 'en')) }}"
          method="post">
      <div class="mb-3">
        <label for="email" class="form-label d-block">{{ t('ui.signup.email_label') }}</label>
        <input type="email" id="email" name="email" class="form-control"
               required value="{{ form_data.email if form_data is defined else '' }}">
      </div>
      <div class="mb-3">
        <label for="password" class="form-label d-block">{{ t('ui.signup.password_label') }}</label>
        <input type="password" id="password" name="password"
               class="form-control" required>
      </div>
      <button type="submit" class="btn btn-branded-primary w-100 fw-bold py-2">
          {{ t('ui.login_widget.login_button') }}
      </button>
    </form>

    <!-- 3. Nueva Sección de Registro más Atractiva -->
    <div class="mt-4 pt-3 text-center" style="border-top: 1px solid #e0e0e0;">
        <span class="text-muted small">{{ t('ui.login_widget.no_account_prompt') }}</span>
        <a href="{{ url_for('signup', company_short_name=company_short_name, lang=request.args.get('lang', 'en')) }}" id="signup-link"
           class="fw-bold ms-1 text-decoration-none" style="color: var(--brand-primary-color);">
            {{ t('ui.login_widget.signup_link') }}</a>
    </div>

    <!-- 4. Enlace de Recuperación de Contraseña (más sutil) -->
    <div class="text-center mt-2">
      <a href="{{ url_for('forgot_password', company_short_name=company_short_name, lang=request.args.get('lang', 'en')) }}" class="text-decoration-none text-muted" style="font-size: 0.8rem;">
        {{ t('ui.login_widget.forgot_password_link') }}
      </a>
    </div>
</div>