# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

import pydantic
import typing_extensions
from ...core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from ...core.serialization import FieldMetadata
from .card_network import CardNetwork
from .direction_type import DirectionType
from .merchant import Merchant
from .payment_type import PaymentType
from .receipt_medium_type import ReceiptMediumType


class MatchedTransactionsAttributes(UniversalBaseModel):
    user_id: typing_extensions.Annotated[str, FieldMetadata(alias="userId")] = pydantic.Field()
    """
    The ID of the user as defined on the issuers system
    """

    amount: int = pydantic.Field()
    """
    Transaction amount in cents
    """

    subtotal: typing.Optional[int] = pydantic.Field(default=None)
    """
    The base amount in cents excluding additional charges (such as tips, taxes, and other fees).
    """

    description: str = pydantic.Field()
    """
    Description of transaction - usually includes merchant and other key details on transaction
    """

    authorization_date: typing_extensions.Annotated[dt.datetime, FieldMetadata(alias="authorizationDate")] = (
        pydantic.Field()
    )
    """
    Timestamp for transaction event. Date string should be in ISO format i.e.`'YYYY-MM-DDThh:mm:ss.sTZD'` where TZD = time zone designator (Z or +hh:mm or -hh:mm) i.e. `1994-11-05T08:15:30-05:00 OR 1994-11-05T08:15:30Z`
    """

    matched_offer_id: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="matchedOfferId")] = (
        pydantic.Field(default=None)
    )
    """
    The ID of the Kard offer to which the transaction was matched. If this field is omitted, the transaction will be considered unmatched to any Kard offer. This field **must** be omitted when the `paymentType` is `UNKNOWN` and neither an orderId nor a `cardLastFour` is supplied.
    """

    matched_location_id: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="matchedLocationId")] = (
        pydantic.Field(default=None)
    )
    """
    The unique Kard location ID where the transaction took place. This field **must** be omitted  when `paymentType` is `UNKNOWN`.
    """

    merchant: typing.Optional[Merchant] = pydantic.Field(default=None)
    """
    Merchant details
    """

    payment_type: typing_extensions.Annotated[PaymentType, FieldMetadata(alias="paymentType")] = pydantic.Field()
    """
    The type of payment involved in the transaction.
    """

    card_bin: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="cardBIN")] = pydantic.Field(
        default=None
    )
    """
    Bank identification number (BIN). Must be a valid BIN of 6 digits. If over 6 digits, please send first 6. This field **must** be omitted when `paymentType` is `CASH` or `UNKNOWN`.
    """

    card_last_four: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="cardLastFour")] = (
        pydantic.Field(default=None)
    )
    """
    Card last four digits. This field is **required** when `paymentType` is `CARD` and `matchedOfferId` is provided. It **must** be omitted when `paymentType` is `CASH`.
    """

    authorization_code: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="authorizationCode")] = (
        pydantic.Field(default=None)
    )
    """
    Transaction approval code
    """

    retrieval_reference_number: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="retrievalReferenceNumber")
    ] = pydantic.Field(default=None)
    """
    Retrieval Reference Number
    """

    system_trace_audit_number: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="systemTraceAuditNumber")
    ] = pydantic.Field(default=None)
    """
    System Trace Audit Number
    """

    acquirer_reference_number: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="acquirerReferenceNumber")
    ] = pydantic.Field(default=None)
    """
    Acquirer Reference Number
    """

    direction: DirectionType = pydantic.Field()
    """
    The direction in which the funds flow - DEBIT or CREDIT
    """

    card_network: typing_extensions.Annotated[typing.Optional[CardNetwork], FieldMetadata(alias="cardNetwork")] = (
        pydantic.Field(default=None)
    )
    """
    The card network associated with the transaction. This field **must** be omitted when `paymentType` is `CASH` or `UNKNOWN`.
    """

    transaction_id: typing_extensions.Annotated[str, FieldMetadata(alias="transactionId")] = pydantic.Field()
    """
    The transaction ID
    """

    card_product_id: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="cardProductId")] = (
        pydantic.Field(default=None)
    )
    """
    The card product ID associated with the transaction. This field **must** be omitted when `paymentType` is `CASH` or `UNKNOWN`.
    """

    order_id: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="orderId")] = pydantic.Field(
        default=None
    )
    """
    The unique identifier for an online order linked to this transaction.
    """

    receipt_medium: typing_extensions.Annotated[
        typing.Optional[ReceiptMediumType], FieldMetadata(alias="receiptMedium")
    ] = pydantic.Field(default=None)
    """
    Indicates the format of the receipt from which the transaction is derived.
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
