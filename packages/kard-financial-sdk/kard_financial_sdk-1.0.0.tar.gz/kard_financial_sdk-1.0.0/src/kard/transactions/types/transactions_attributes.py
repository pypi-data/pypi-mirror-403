# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

import pydantic
import typing_extensions
from ...core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from ...core.serialization import FieldMetadata
from .card_network import CardNetwork
from .direction_type import DirectionType
from .merchant import Merchant
from .processor_mid import ProcessorMid
from .transaction_payment_type import TransactionPaymentType
from .transaction_status import TransactionStatus


class TransactionsAttributes(UniversalBaseModel):
    user_id: typing_extensions.Annotated[str, FieldMetadata(alias="userId")] = pydantic.Field()
    """
    The ID of the user as defined on the issuers system
    """

    amount: int = pydantic.Field()
    """
    Transaction amount in cents
    """

    subtotal: typing.Optional[int] = pydantic.Field(default=None)
    """
    The base amount in cents excluding additional charges (such as tips, taxes, and other fees).
    """

    status: TransactionStatus = pydantic.Field()
    """
    Transaction status
    """

    currency: str = pydantic.Field()
    """
    Currency of transaction
    """

    description: str = pydantic.Field()
    """
    Description of transaction - usually includes merchant and other key details on transaction
    """

    description_2: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="description2")] = (
        pydantic.Field(default=None)
    )
    """
    Description2 of transaction â€” usually includes other merchant identifying information
    """

    mcc: typing.Optional[str] = pydantic.Field(default=None)
    """
    Merchant Category Code (usually a 4-digit numerical number). <b>Note, this field is REQUIRED for SOME national offers. We HIGHLY RECOMMEND sending this field as it will be required in the near future.</b>
    """

    core_provider_id: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="coreProviderId")] = (
        pydantic.Field(default=None)
    )
    """
    Name of processor associated with transaction
    """

    transaction_date: typing_extensions.Annotated[
        typing.Optional[dt.datetime], FieldMetadata(alias="transactionDate")
    ] = pydantic.Field(default=None)
    """
    Timestamp for <b>REVERSED, RETURNED, DECLINED</b> transaction events; <b>REQUIRED</b> for transactions with <b>REVERSED, RETURNED, DECLINED</b> status. Date string should be in ISO format i.e.`'YYYY-MM-DDThh:mm:ss.sTZD'` where TZD = time zone designator (Z or +hh:mm or -hh:mm) i.e. `1994-11-05T08:15:30-05:00` OR `1994-11-05T08:15:30Z`
    """

    authorization_date: typing_extensions.Annotated[
        typing.Optional[dt.datetime], FieldMetadata(alias="authorizationDate")
    ] = pydantic.Field(default=None)
    """
    Timestamp for <b>APPROVED</b> transaction event; <b>REQUIRED</b> for transactions with <b>APPROVED</b> status, and <b>HIGHLY RECOMMENDED</b> to include for transactions with a <b>SETTLED</b> status. Date string should be in ISO format i.e.`'YYYY-MM-DDThh:mm:ss.sTZD'` where TZD = time zone designator (Z or +hh:mm or -hh:mm) i.e. `1994-11-05T08:15:30-05:00 OR 1994-11-05T08:15:30Z`
    """

    settled_date: typing_extensions.Annotated[typing.Optional[dt.datetime], FieldMetadata(alias="settledDate")] = (
        pydantic.Field(default=None)
    )
    """
    Timestamp for <b>SETTLED</b> transaction event, <b>REQUIRED</b> for transactions with <b>SETTLED</b> status. Date string should be in ISO format i.e.`'YYYY-MM-DDThh:mm:ss.sTZD'` where TZD = time zone designator (Z or +hh:mm or -hh:mm) i.e. `1994-11-05T08:15:30-05:00` OR `1994-11-05T08:15:30Z`
    """

    merchant: typing.Optional[Merchant] = pydantic.Field(default=None)
    """
    Merchant details
    """

    card_presence: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="cardPresence")] = (
        pydantic.Field(default=None)
    )
    """
    Whether card was present at time of transaction
    """

    pan_entry_mode: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="panEntryMode")] = (
        pydantic.Field(default=None)
    )
    """
    PAN entry mode
    """

    card_bin: typing_extensions.Annotated[str, FieldMetadata(alias="cardBIN")] = pydantic.Field()
    """
    Bank identification number (BIN). Must be a valid BIN of 6 digits. If over 6 digits, please send first 6.
    """

    card_last_four: typing_extensions.Annotated[str, FieldMetadata(alias="cardLastFour")] = pydantic.Field()
    """
    Card last four digits.
    """

    authorization_code: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="authorizationCode")] = (
        pydantic.Field(default=None)
    )
    """
    Transaction approval code
    """

    retrieval_reference_number: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="retrievalReferenceNumber")
    ] = pydantic.Field(default=None)
    """
    Retrieval Reference Number
    """

    system_trace_audit_number: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="systemTraceAuditNumber")
    ] = pydantic.Field(default=None)
    """
    System Trace Audit Number
    """

    acquirer_reference_number: typing_extensions.Annotated[
        typing.Optional[str], FieldMetadata(alias="acquirerReferenceNumber")
    ] = pydantic.Field(default=None)
    """
    Acquirer Reference Number
    """

    direction: DirectionType = pydantic.Field()
    """
    The direction in which the funds flow - DEBIT or CREDIT
    """

    payment_type: typing_extensions.Annotated[TransactionPaymentType, FieldMetadata(alias="paymentType")] = (
        pydantic.Field()
    )
    """
    The type of payment involved in the transaction.
    """

    card_network: typing_extensions.Annotated[typing.Optional[CardNetwork], FieldMetadata(alias="cardNetwork")] = (
        pydantic.Field(default=None)
    )
    """
    The card network associated with the transaction
    """

    transaction_id: typing_extensions.Annotated[str, FieldMetadata(alias="transactionId")] = pydantic.Field()
    """
    The transaction ID
    """

    card_product_id: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="cardProductId")] = (
        pydantic.Field(default=None)
    )
    """
    The card product ID associated with the transaction
    """

    user_zip_code: typing_extensions.Annotated[typing.Optional[str], FieldMetadata(alias="userZipCode")] = (
        pydantic.Field(default=None)
    )
    """
    The zip code of the user who made the transaction
    """

    processor_mids: typing_extensions.Annotated[typing.Optional[ProcessorMid], FieldMetadata(alias="processorMids")] = (
        pydantic.Field(default=None)
    )
    """
    Network specific merchant IDs (MIDs) associated with the transaction
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
