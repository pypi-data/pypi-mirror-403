# This file was auto-generated by Fern from our API Definition.

import datetime as dt
import typing

import pydantic
import typing_extensions
from ...core.pydantic_utilities import IS_PYDANTIC_V2, UniversalBaseModel
from ...core.serialization import FieldMetadata
from .broker_amount import BrokerAmount
from .broker_purchase_channel import BrokerPurchaseChannel
from .broker_reward import BrokerReward
from .offer_status import OfferStatus
from .offer_type import OfferType


class WebhookOfferAttributes(UniversalBaseModel):
    offer_id: typing_extensions.Annotated[str, FieldMetadata(alias="offerId")] = pydantic.Field()
    """
    The Kard offer ID
    """

    offer_type: typing_extensions.Annotated[OfferType, FieldMetadata(alias="offerType")] = pydantic.Field()
    """
    The type of kard platform offer (e.g., "standardOffer")
    """

    name: str = pydantic.Field()
    """
    The name of the offer
    """

    terms: str = pydantic.Field()
    """
    Terms and conditions for the offer
    """

    status: OfferStatus = pydantic.Field()
    """
    Current status of the offer
    """

    purchase_channel: typing_extensions.Annotated[
        typing.List[BrokerPurchaseChannel], FieldMetadata(alias="purchaseChannel")
    ] = pydantic.Field()
    """
    Channels where the offer can be redeemed
    """

    user_reward: typing_extensions.Annotated[BrokerReward, FieldMetadata(alias="userReward")] = pydantic.Field()
    """
    Reward details for the user
    """

    start_date: typing_extensions.Annotated[dt.datetime, FieldMetadata(alias="startDate")] = pydantic.Field()
    """
    When the offer becomes active
    """

    expiration_date: typing_extensions.Annotated[dt.datetime, FieldMetadata(alias="expirationDate")] = pydantic.Field()
    """
    When the offer expires
    """

    min_reward_amount: typing_extensions.Annotated[
        typing.Optional[BrokerAmount], FieldMetadata(alias="minRewardAmount")
    ] = pydantic.Field(default=None)
    """
    Minimum reward amount
    """

    max_reward_amount: typing_extensions.Annotated[
        typing.Optional[BrokerAmount], FieldMetadata(alias="maxRewardAmount")
    ] = pydantic.Field(default=None)
    """
    Maximum reward amount
    """

    min_user_reward_amount: typing_extensions.Annotated[
        typing.Optional[BrokerAmount], FieldMetadata(alias="minUserRewardAmount")
    ] = pydantic.Field(default=None)
    """
    Minimum user reward amount
    """

    max_user_reward_amount: typing_extensions.Annotated[
        typing.Optional[BrokerAmount], FieldMetadata(alias="maxUserRewardAmount")
    ] = pydantic.Field(default=None)
    """
    Maximum user reward amount
    """

    min_transaction_amount: typing_extensions.Annotated[
        typing.Optional[BrokerAmount], FieldMetadata(alias="minTransactionAmount")
    ] = pydantic.Field(default=None)
    """
    Minimum transaction amount
    """

    max_transaction_amount: typing_extensions.Annotated[
        typing.Optional[BrokerAmount], FieldMetadata(alias="maxTransactionAmount")
    ] = pydantic.Field(default=None)
    """
    Maximum transaction amount
    """

    max_redemptions: typing_extensions.Annotated[typing.Optional[int], FieldMetadata(alias="maxRedemptions")] = (
        pydantic.Field(default=None)
    )
    """
    Maximum number of times the offer can be redeemed
    """

    valid_mc_cs: typing_extensions.Annotated[typing.Optional[typing.List[str]], FieldMetadata(alias="validMCCs")] = (
        pydantic.Field(default=None)
    )
    """
    Required MCCs to redeem the offer. If this is empty or not present no MCCs are required.
    """

    is_targeted: typing_extensions.Annotated[bool, FieldMetadata(alias="isTargeted")] = pydantic.Field()
    """
    Whether the offer is targeted to specific users
    """

    updated_at: typing_extensions.Annotated[dt.datetime, FieldMetadata(alias="updatedAt")] = pydantic.Field()
    """
    When the offer was last updated
    """

    created_at: typing_extensions.Annotated[dt.datetime, FieldMetadata(alias="createdAt")] = pydantic.Field()
    """
    When the offer was created
    """

    if IS_PYDANTIC_V2:
        model_config: typing.ClassVar[pydantic.ConfigDict] = pydantic.ConfigDict(extra="allow", frozen=True)  # type: ignore # Pydantic v2
    else:

        class Config:
            frozen = True
            smart_union = True
            extra = pydantic.Extra.allow
