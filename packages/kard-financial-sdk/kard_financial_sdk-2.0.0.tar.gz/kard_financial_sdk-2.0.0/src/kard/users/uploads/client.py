# This file was auto-generated by Fern from our API Definition.

import typing

from ...commons.types.organization_id import OrganizationId
from ...core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ...core.request_options import RequestOptions
from .raw_client import AsyncRawUploadsClient, RawUploadsClient
from .types.create_upload_part_data_union import CreateUploadPartDataUnion
from .types.create_upload_part_response_object import CreateUploadPartResponseObject
from .types.create_upload_request_data_union import CreateUploadRequestDataUnion
from .types.create_upload_response_object import CreateUploadResponseObject
from .types.update_upload_request_data_union import UpdateUploadRequestDataUnion
from .types.update_upload_response_object import UpdateUploadResponseObject

# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class UploadsClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawUploadsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> RawUploadsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawUploadsClient
        """
        return self._raw_client

    def create(
        self,
        organization_id: OrganizationId,
        user_id: str,
        *,
        data: CreateUploadRequestDataUnion,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> CreateUploadResponseObject:
        """
        Call this endpoint to create an upload session and retrieve an upload ID. Using the upload ID in the [Add Upload
        Part](/api/uploads/create-upload-part) endpoint, historical transactions can be sent in batches for further processing.
        <b>Required scopes:</b> `transaction:write`

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : str
            The ID of the user as defined on the issuers system

        data : CreateUploadRequestDataUnion

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        CreateUploadResponseObject

        Examples
        --------
        from kard import KardApi
        from kard.commons import EmptyObject
        from kard.users.uploads import (
            CreateUploadRequestDataUnion_HistoricalTransactionStart,
        )

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.users.uploads.create(
            organization_id="organization-123",
            user_id="user-123",
            data=CreateUploadRequestDataUnion_HistoricalTransactionStart(
                attributes=EmptyObject(),
            ),
        )
        """
        _response = self._raw_client.create(organization_id, user_id, data=data, request_options=request_options)
        return _response.data

    def create_part(
        self,
        organization_id: OrganizationId,
        user_id: str,
        upload_id: str,
        *,
        data: typing.Sequence[CreateUploadPartDataUnion],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> CreateUploadPartResponseObject:
        """
        Call this endpoint using the upload ID provided in the [Create Upload](/api/uploads/create-upload) endpoint to add parts to your upload. Currently, this endpoint supports adding historical transactions.
        <b>Required scopes:</b> `transaction:write`
        <b>Note:</b> `Maximum of 500 transactions can be uploaded per request`.

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : str
            The ID of the user as defined on the issuers system

        upload_id : str
            The upload ID identifying the upload session to add parts

        data : typing.Sequence[CreateUploadPartDataUnion]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        CreateUploadPartResponseObject

        Examples
        --------
        import datetime

        from kard import KardApi
        from kard.transactions import Merchant, TransactionsAttributes
        from kard.users.uploads import CreateUploadPartDataUnion_HistoricalTransaction

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.users.uploads.create_part(
            organization_id="organization-123",
            user_id="user-123",
            upload_id="upload-123",
            data=[
                CreateUploadPartDataUnion_HistoricalTransaction(
                    id="309rjfoincor3icno3rind093cdow3jciwjdwcm",
                    attributes=TransactionsAttributes(
                        user_id="6FHt5b6Fnp0qdomMEy5AN6PXcSJIeX69",
                        status="APPROVED",
                        amount=1000,
                        subtotal=800,
                        currency="USD",
                        direction="DEBIT",
                        payment_type="CARD",
                        description="ADVANCEAUTO",
                        description_2="ADVANCEAUTO",
                        mcc="1234",
                        card_bin="123456",
                        card_last_four="4321",
                        authorization_date=datetime.datetime.fromisoformat(
                            "2021-07-02 17:47:06+00:00",
                        ),
                        merchant=Merchant(
                            id="12345678901234567",
                            name="ADVANCEAUTO",
                            addr_street="125 Main St",
                            addr_city="Philadelphia",
                            addr_state="PA",
                            addr_zipcode="19147",
                            addr_country="United States",
                            latitude="37.9419429",
                            longitude="-73.1446869",
                            store_id="12345",
                        ),
                        authorization_code="123456",
                        retrieval_reference_number="100804333919",
                        acquirer_reference_number="1234567890123456789012345678",
                        system_trace_audit_number="333828",
                        transaction_id="2467de37-cbdc-416d-a359-75de87bfffb0",
                    ),
                )
            ],
        )
        """
        _response = self._raw_client.create_part(
            organization_id, user_id, upload_id, data=data, request_options=request_options
        )
        return _response.data

    def update(
        self,
        organization_id: OrganizationId,
        user_id: str,
        upload_id: str,
        *,
        data: UpdateUploadRequestDataUnion,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> UpdateUploadResponseObject:
        """
        Call this endpoint to update your upload session. Currently, you can signal completing a historical transactions upload.
        <b>Required scopes:</b> `transaction:write`

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : str
            The ID of the user as defined on the issuers system

        upload_id : str
            The upload ID identifying the upload session to update

        data : UpdateUploadRequestDataUnion

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        UpdateUploadResponseObject

        Examples
        --------
        from kard import KardApi
        from kard.commons import EmptyObject
        from kard.users.uploads import (
            UpdateUploadRequestDataUnion_HistoricalTransactionComplete,
        )

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.users.uploads.update(
            organization_id="organization-123",
            user_id="user-123",
            upload_id="upload-123",
            data=UpdateUploadRequestDataUnion_HistoricalTransactionComplete(
                id="7e382223-b9a5-4825-91fb-436c8957a2e7",
                attributes=EmptyObject(),
            ),
        )
        """
        _response = self._raw_client.update(
            organization_id, user_id, upload_id, data=data, request_options=request_options
        )
        return _response.data


class AsyncUploadsClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawUploadsClient(client_wrapper=client_wrapper)

    @property
    def with_raw_response(self) -> AsyncRawUploadsClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawUploadsClient
        """
        return self._raw_client

    async def create(
        self,
        organization_id: OrganizationId,
        user_id: str,
        *,
        data: CreateUploadRequestDataUnion,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> CreateUploadResponseObject:
        """
        Call this endpoint to create an upload session and retrieve an upload ID. Using the upload ID in the [Add Upload
        Part](/api/uploads/create-upload-part) endpoint, historical transactions can be sent in batches for further processing.
        <b>Required scopes:</b> `transaction:write`

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : str
            The ID of the user as defined on the issuers system

        data : CreateUploadRequestDataUnion

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        CreateUploadResponseObject

        Examples
        --------
        import asyncio

        from kard import AsyncKardApi
        from kard.commons import EmptyObject
        from kard.users.uploads import (
            CreateUploadRequestDataUnion_HistoricalTransactionStart,
        )

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.users.uploads.create(
                organization_id="organization-123",
                user_id="user-123",
                data=CreateUploadRequestDataUnion_HistoricalTransactionStart(
                    attributes=EmptyObject(),
                ),
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create(organization_id, user_id, data=data, request_options=request_options)
        return _response.data

    async def create_part(
        self,
        organization_id: OrganizationId,
        user_id: str,
        upload_id: str,
        *,
        data: typing.Sequence[CreateUploadPartDataUnion],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> CreateUploadPartResponseObject:
        """
        Call this endpoint using the upload ID provided in the [Create Upload](/api/uploads/create-upload) endpoint to add parts to your upload. Currently, this endpoint supports adding historical transactions.
        <b>Required scopes:</b> `transaction:write`
        <b>Note:</b> `Maximum of 500 transactions can be uploaded per request`.

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : str
            The ID of the user as defined on the issuers system

        upload_id : str
            The upload ID identifying the upload session to add parts

        data : typing.Sequence[CreateUploadPartDataUnion]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        CreateUploadPartResponseObject

        Examples
        --------
        import asyncio
        import datetime

        from kard import AsyncKardApi
        from kard.transactions import Merchant, TransactionsAttributes
        from kard.users.uploads import CreateUploadPartDataUnion_HistoricalTransaction

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.users.uploads.create_part(
                organization_id="organization-123",
                user_id="user-123",
                upload_id="upload-123",
                data=[
                    CreateUploadPartDataUnion_HistoricalTransaction(
                        id="309rjfoincor3icno3rind093cdow3jciwjdwcm",
                        attributes=TransactionsAttributes(
                            user_id="6FHt5b6Fnp0qdomMEy5AN6PXcSJIeX69",
                            status="APPROVED",
                            amount=1000,
                            subtotal=800,
                            currency="USD",
                            direction="DEBIT",
                            payment_type="CARD",
                            description="ADVANCEAUTO",
                            description_2="ADVANCEAUTO",
                            mcc="1234",
                            card_bin="123456",
                            card_last_four="4321",
                            authorization_date=datetime.datetime.fromisoformat(
                                "2021-07-02 17:47:06+00:00",
                            ),
                            merchant=Merchant(
                                id="12345678901234567",
                                name="ADVANCEAUTO",
                                addr_street="125 Main St",
                                addr_city="Philadelphia",
                                addr_state="PA",
                                addr_zipcode="19147",
                                addr_country="United States",
                                latitude="37.9419429",
                                longitude="-73.1446869",
                                store_id="12345",
                            ),
                            authorization_code="123456",
                            retrieval_reference_number="100804333919",
                            acquirer_reference_number="1234567890123456789012345678",
                            system_trace_audit_number="333828",
                            transaction_id="2467de37-cbdc-416d-a359-75de87bfffb0",
                        ),
                    )
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create_part(
            organization_id, user_id, upload_id, data=data, request_options=request_options
        )
        return _response.data

    async def update(
        self,
        organization_id: OrganizationId,
        user_id: str,
        upload_id: str,
        *,
        data: UpdateUploadRequestDataUnion,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> UpdateUploadResponseObject:
        """
        Call this endpoint to update your upload session. Currently, you can signal completing a historical transactions upload.
        <b>Required scopes:</b> `transaction:write`

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : str
            The ID of the user as defined on the issuers system

        upload_id : str
            The upload ID identifying the upload session to update

        data : UpdateUploadRequestDataUnion

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        UpdateUploadResponseObject

        Examples
        --------
        import asyncio

        from kard import AsyncKardApi
        from kard.commons import EmptyObject
        from kard.users.uploads import (
            UpdateUploadRequestDataUnion_HistoricalTransactionComplete,
        )

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.users.uploads.update(
                organization_id="organization-123",
                user_id="user-123",
                upload_id="upload-123",
                data=UpdateUploadRequestDataUnion_HistoricalTransactionComplete(
                    id="7e382223-b9a5-4825-91fb-436c8957a2e7",
                    attributes=EmptyObject(),
                ),
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.update(
            organization_id, user_id, upload_id, data=data, request_options=request_options
        )
        return _response.data
