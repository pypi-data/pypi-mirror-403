# This file was auto-generated by Fern from our API Definition.

from __future__ import annotations

import typing

from ..commons.types.organization_id import OrganizationId
from ..commons.types.user_id import UserId
from ..core.client_wrapper import AsyncClientWrapper, SyncClientWrapper
from ..core.request_options import RequestOptions
from .raw_client import AsyncRawUsersClient, RawUsersClient
from .types.create_users_object import CreateUsersObject
from .types.delete_user_response_object import DeleteUserResponseObject
from .types.update_user_object import UpdateUserObject
from .types.user_request_data_union import UserRequestDataUnion

if typing.TYPE_CHECKING:
    from .attributions.client import AsyncAttributionsClient, AttributionsClient
    from .auth.client import AsyncAuthClient, AuthClient
    from .rewards.client import AsyncRewardsClient, RewardsClient
    from .uploads.client import AsyncUploadsClient, UploadsClient
# this is used as the default value for optional parameters
OMIT = typing.cast(typing.Any, ...)


class UsersClient:
    def __init__(self, *, client_wrapper: SyncClientWrapper):
        self._raw_client = RawUsersClient(client_wrapper=client_wrapper)
        self._client_wrapper = client_wrapper
        self._attributions: typing.Optional[AttributionsClient] = None
        self._auth: typing.Optional[AuthClient] = None
        self._rewards: typing.Optional[RewardsClient] = None
        self._uploads: typing.Optional[UploadsClient] = None

    @property
    def with_raw_response(self) -> RawUsersClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        RawUsersClient
        """
        return self._raw_client

    def create(
        self,
        organization_id: OrganizationId,
        *,
        data: typing.Sequence[UserRequestDataUnion],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> CreateUsersObject:
        """
        Call this endpoint to enroll a specified user into your rewards program.<br/>

        <b>Required scopes:</b>&nbsp;&nbsp;`user:write`<br/>
        <b>Note:</b> `Maximum of 100 users can be created per request`.

        Parameters
        ----------
        organization_id : OrganizationId

        data : typing.Sequence[UserRequestDataUnion]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        CreateUsersObject

        Examples
        --------
        from kard import KardApi
        from kard.users import UserRequestAttributes, UserRequestDataUnion_User

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.users.create(
            organization_id="organization-123",
            data=[
                UserRequestDataUnion_User(
                    id="1234567890",
                    attributes=UserRequestAttributes(
                        zip_code="11238",
                        enrolled_rewards=["CARDLINKED"],
                    ),
                )
            ],
        )
        """
        _response = self._raw_client.create(organization_id, data=data, request_options=request_options)
        return _response.data

    def update(
        self,
        organization_id: OrganizationId,
        user_id: UserId,
        *,
        data: UserRequestDataUnion,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> UpdateUserObject:
        """
        Call this endpoint to update the details on a specified user.<br/>

        <b>Required scopes:</b> `user:update`

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : UserId

        data : UserRequestDataUnion

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        UpdateUserObject

        Examples
        --------
        from kard import KardApi
        from kard.users import UserRequestAttributes, UserRequestDataUnion_User

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.users.update(
            organization_id="organization-123",
            user_id="user-123",
            data=UserRequestDataUnion_User(
                id="1234567890",
                attributes=UserRequestAttributes(
                    zip_code="11238",
                    enrolled_rewards=["CARDLINKED"],
                ),
            ),
        )
        """
        _response = self._raw_client.update(organization_id, user_id, data=data, request_options=request_options)
        return _response.data

    def delete(
        self,
        organization_id: OrganizationId,
        user_id: UserId,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> DeleteUserResponseObject:
        """
        Call this endpoint to delete a specified enrolled user from the rewards program and Kard's system. Users can be re-enrolled into rewards by calling the [Create User](/2024-10-01/api/users/create) endpoint using the same `id` from before.<br/>

        <b>Required scopes:</b> `user:delete`

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : UserId

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DeleteUserResponseObject

        Examples
        --------
        from kard import KardApi

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.users.delete(
            organization_id="organization-123",
            user_id="user-123",
        )
        """
        _response = self._raw_client.delete(organization_id, user_id, request_options=request_options)
        return _response.data

    def get(
        self,
        organization_id: OrganizationId,
        user_id: UserId,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> UpdateUserObject:
        """
        Call this endpoint to fetch the details on a specified user.<br/>
        <br/>
        <b>Required scopes:</b>&nbsp;&nbsp;`user:read`

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : UserId

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        UpdateUserObject

        Examples
        --------
        from kard import KardApi

        client = KardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )
        client.users.get(
            organization_id="organization-123",
            user_id="user-123",
        )
        """
        _response = self._raw_client.get(organization_id, user_id, request_options=request_options)
        return _response.data

    @property
    def attributions(self):
        if self._attributions is None:
            from .attributions.client import AttributionsClient  # noqa: E402

            self._attributions = AttributionsClient(client_wrapper=self._client_wrapper)
        return self._attributions

    @property
    def auth(self):
        if self._auth is None:
            from .auth.client import AuthClient  # noqa: E402

            self._auth = AuthClient(client_wrapper=self._client_wrapper)
        return self._auth

    @property
    def rewards(self):
        if self._rewards is None:
            from .rewards.client import RewardsClient  # noqa: E402

            self._rewards = RewardsClient(client_wrapper=self._client_wrapper)
        return self._rewards

    @property
    def uploads(self):
        if self._uploads is None:
            from .uploads.client import UploadsClient  # noqa: E402

            self._uploads = UploadsClient(client_wrapper=self._client_wrapper)
        return self._uploads


class AsyncUsersClient:
    def __init__(self, *, client_wrapper: AsyncClientWrapper):
        self._raw_client = AsyncRawUsersClient(client_wrapper=client_wrapper)
        self._client_wrapper = client_wrapper
        self._attributions: typing.Optional[AsyncAttributionsClient] = None
        self._auth: typing.Optional[AsyncAuthClient] = None
        self._rewards: typing.Optional[AsyncRewardsClient] = None
        self._uploads: typing.Optional[AsyncUploadsClient] = None

    @property
    def with_raw_response(self) -> AsyncRawUsersClient:
        """
        Retrieves a raw implementation of this client that returns raw responses.

        Returns
        -------
        AsyncRawUsersClient
        """
        return self._raw_client

    async def create(
        self,
        organization_id: OrganizationId,
        *,
        data: typing.Sequence[UserRequestDataUnion],
        request_options: typing.Optional[RequestOptions] = None,
    ) -> CreateUsersObject:
        """
        Call this endpoint to enroll a specified user into your rewards program.<br/>

        <b>Required scopes:</b>&nbsp;&nbsp;`user:write`<br/>
        <b>Note:</b> `Maximum of 100 users can be created per request`.

        Parameters
        ----------
        organization_id : OrganizationId

        data : typing.Sequence[UserRequestDataUnion]

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        CreateUsersObject

        Examples
        --------
        import asyncio

        from kard import AsyncKardApi
        from kard.users import UserRequestAttributes, UserRequestDataUnion_User

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.users.create(
                organization_id="organization-123",
                data=[
                    UserRequestDataUnion_User(
                        id="1234567890",
                        attributes=UserRequestAttributes(
                            zip_code="11238",
                            enrolled_rewards=["CARDLINKED"],
                        ),
                    )
                ],
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.create(organization_id, data=data, request_options=request_options)
        return _response.data

    async def update(
        self,
        organization_id: OrganizationId,
        user_id: UserId,
        *,
        data: UserRequestDataUnion,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> UpdateUserObject:
        """
        Call this endpoint to update the details on a specified user.<br/>

        <b>Required scopes:</b> `user:update`

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : UserId

        data : UserRequestDataUnion

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        UpdateUserObject

        Examples
        --------
        import asyncio

        from kard import AsyncKardApi
        from kard.users import UserRequestAttributes, UserRequestDataUnion_User

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.users.update(
                organization_id="organization-123",
                user_id="user-123",
                data=UserRequestDataUnion_User(
                    id="1234567890",
                    attributes=UserRequestAttributes(
                        zip_code="11238",
                        enrolled_rewards=["CARDLINKED"],
                    ),
                ),
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.update(organization_id, user_id, data=data, request_options=request_options)
        return _response.data

    async def delete(
        self,
        organization_id: OrganizationId,
        user_id: UserId,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> DeleteUserResponseObject:
        """
        Call this endpoint to delete a specified enrolled user from the rewards program and Kard's system. Users can be re-enrolled into rewards by calling the [Create User](/2024-10-01/api/users/create) endpoint using the same `id` from before.<br/>

        <b>Required scopes:</b> `user:delete`

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : UserId

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        DeleteUserResponseObject

        Examples
        --------
        import asyncio

        from kard import AsyncKardApi

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.users.delete(
                organization_id="organization-123",
                user_id="user-123",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.delete(organization_id, user_id, request_options=request_options)
        return _response.data

    async def get(
        self,
        organization_id: OrganizationId,
        user_id: UserId,
        *,
        request_options: typing.Optional[RequestOptions] = None,
    ) -> UpdateUserObject:
        """
        Call this endpoint to fetch the details on a specified user.<br/>
        <br/>
        <b>Required scopes:</b>&nbsp;&nbsp;`user:read`

        Parameters
        ----------
        organization_id : OrganizationId

        user_id : UserId

        request_options : typing.Optional[RequestOptions]
            Request-specific configuration.

        Returns
        -------
        UpdateUserObject

        Examples
        --------
        import asyncio

        from kard import AsyncKardApi

        client = AsyncKardApi(
            client_id="YOUR_CLIENT_ID",
            client_secret="YOUR_CLIENT_SECRET",
        )


        async def main() -> None:
            await client.users.get(
                organization_id="organization-123",
                user_id="user-123",
            )


        asyncio.run(main())
        """
        _response = await self._raw_client.get(organization_id, user_id, request_options=request_options)
        return _response.data

    @property
    def attributions(self):
        if self._attributions is None:
            from .attributions.client import AsyncAttributionsClient  # noqa: E402

            self._attributions = AsyncAttributionsClient(client_wrapper=self._client_wrapper)
        return self._attributions

    @property
    def auth(self):
        if self._auth is None:
            from .auth.client import AsyncAuthClient  # noqa: E402

            self._auth = AsyncAuthClient(client_wrapper=self._client_wrapper)
        return self._auth

    @property
    def rewards(self):
        if self._rewards is None:
            from .rewards.client import AsyncRewardsClient  # noqa: E402

            self._rewards = AsyncRewardsClient(client_wrapper=self._client_wrapper)
        return self._rewards

    @property
    def uploads(self):
        if self._uploads is None:
            from .uploads.client import AsyncUploadsClient  # noqa: E402

            self._uploads = AsyncUploadsClient(client_wrapper=self._client_wrapper)
        return self._uploads
