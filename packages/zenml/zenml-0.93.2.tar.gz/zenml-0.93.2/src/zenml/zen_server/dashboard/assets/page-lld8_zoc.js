import{j as e}from"./@radix-Da0HZyg8.js";import{u as l,S,a as f,b as x}from"./form-schemas-CcaFHMqY.js";import{A as y,a as h,P as v,S as j}from"./primary-role-DbadRtaP.js";import{x as _,y as C,cf as g,u as b,e as U}from"./index-5CE1yoTL.js";import{a as c}from"./@monaco-editor-xs6rrDBC.js";import{u as P}from"./update-current-user-mutation-BeXu2lPq.js";import{e as w}from"./@tanstack-BRZ8pkCt.js";import"./@elkjs-D2DP-mPJ.js";import"./@react-router-BEwS6i40.js";import"./@zod-yP6IINRw.js";import"./UpdatePasswordSchemas-B2soQz44.js";import"./bar-chart-square-check-DzUJ9YmH.js";import"./dataflow-2-kj5wns6B.js";import"./credit-card-DPSBSlxw.js";import"./eye-eI-BtIGe.js";import"./file-text-B3rACLpg.js";import"./layout-2GM5rzX8.js";import"./message-chat-square-Czubdr8s.js";import"./slash-circle-Bz9zT_oV.js";import"./transform-pqykL0RU.js";import"./@reactflow-CEST3EX2.js";const d=c.createContext(null);function A({children:t,initialUser:n}){const[a,r]=c.useState(n||{});return e.jsx(d.Provider,{value:{user:a,setUser:r},children:t})}function p(){const t=c.useContext(d);if(t===null)throw new Error("useSurveyUserContext must be used within an SurveyUserProvider");return t}function E({user:t}){const{setSurveyStep:n}=l(),{setUser:a}=p();function r({fullName:o,getUpdates:i,email:s}){a(u=>({...u,...s?{email:s}:{email:null},full_name:o,email_opted_in:i})),n(2)}return e.jsx(y,{email:t.metadata?.email,fullName:t.body?.full_name,submitHandler:r})}function k(){const{user:t}=p(),{setSurveyStep:n}=l(),{toast:a}=_(),r=w(),{mutate:o}=P({onSuccess:async()=>{await r.invalidateQueries({queryKey:g()}),n(s=>s+1)},onError:s=>{s instanceof Error&&a({status:"error",emphasis:"subtle",icon:e.jsx(C,{className:"h-5 w-5 shrink-0 fill-error-700"}),description:s.message,rounded:!0})}});function i({biggestChallenge:s,aiTypes:u}){const m={ai_types_working_with:u,biggest_ai_challenges:s,finished_onboarding_survey:!0};o({...t,user_metadata:{...t.user_metadata,...m}})}return e.jsx(h,{submitHandler:i})}function D({user:t}){const{setSurveyStep:n}=l(),{setUser:a}=p();function r({primaryRole:o,otherVal:i}){const u={primary_role:o==="other"?i:o};a(m=>({...m,user_metadata:{...m.user_metadata,...u}})),n(3)}return e.jsx(v,{user:t,submitHandler:r})}function F(){const{data:t,isPending:n,isError:a}=b({throwOnError:!0}),{surveyStep:r}=l();return a?null:n?e.jsx(U,{className:"h-[300px]"}):e.jsx(e.Fragment,{children:e.jsxs(A,{children:[e.jsx(S,{stepAmount:4}),r===1&&e.jsx(E,{user:t}),r===2&&e.jsx(D,{user:t}),r===3&&e.jsx(k,{}),r===4&&e.jsx(j,{}),r===5&&e.jsx(f,{subHeader:"Your ZenML account is now updated",displayBody:!1,username:t.name})]})})}function ee(){return e.jsx("div",{children:e.jsx(x,{children:e.jsx(F,{})})})}export{ee as default};
