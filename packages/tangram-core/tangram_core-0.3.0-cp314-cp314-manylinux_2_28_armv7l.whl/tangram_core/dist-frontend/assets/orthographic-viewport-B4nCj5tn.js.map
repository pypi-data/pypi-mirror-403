{"version":3,"file":"orthographic-viewport-B4nCj5tn.js","sources":["../../../../node_modules/.pnpm/@deck.gl+core@9.2.6/node_modules/@deck.gl/core/dist/viewports/orthographic-viewport.js"],"sourcesContent":["// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport Viewport from \"../viewports/viewport.js\";\nimport { Matrix4, clamp, vec2 } from '@math.gl/core';\nimport { pixelsToWorld } from '@math.gl/web-mercator';\nconst viewMatrix = new Matrix4().lookAt({ eye: [0, 0, 1] });\nfunction getProjectionMatrix({ width, height, near, far, padding }) {\n    let left = -width / 2;\n    let right = width / 2;\n    let bottom = -height / 2;\n    let top = height / 2;\n    if (padding) {\n        const { left: l = 0, right: r = 0, top: t = 0, bottom: b = 0 } = padding;\n        const offsetX = clamp((l + width - r) / 2, 0, width) - width / 2;\n        const offsetY = clamp((t + height - b) / 2, 0, height) - height / 2;\n        left -= offsetX;\n        right -= offsetX;\n        bottom += offsetY;\n        top += offsetY;\n    }\n    return new Matrix4().ortho({\n        left,\n        right,\n        bottom,\n        top,\n        near,\n        far\n    });\n}\nclass OrthographicViewport extends Viewport {\n    constructor(props) {\n        const { width, height, near = 0.1, far = 1000, zoom = 0, target = [0, 0, 0], padding = null, flipY = true } = props;\n        const zoomX = props.zoomX ?? (Array.isArray(zoom) ? zoom[0] : zoom);\n        const zoomY = props.zoomY ?? (Array.isArray(zoom) ? zoom[1] : zoom);\n        const zoom_ = Math.min(zoomX, zoomY);\n        const scale = Math.pow(2, zoom_);\n        let distanceScales;\n        if (zoomX !== zoomY) {\n            const scaleX = Math.pow(2, zoomX);\n            const scaleY = Math.pow(2, zoomY);\n            distanceScales = {\n                unitsPerMeter: [scaleX / scale, scaleY / scale, 1],\n                metersPerUnit: [scale / scaleX, scale / scaleY, 1]\n            };\n        }\n        super({\n            ...props,\n            // in case viewState contains longitude/latitude values,\n            // make sure that the base Viewport class does not treat this as a geospatial viewport\n            longitude: undefined,\n            position: target,\n            viewMatrix: viewMatrix.clone().scale([scale, scale * (flipY ? -1 : 1), scale]),\n            projectionMatrix: getProjectionMatrix({\n                width: width || 1,\n                height: height || 1,\n                padding,\n                near,\n                far\n            }),\n            zoom: zoom_,\n            distanceScales\n        });\n        this.target = target;\n        this.zoomX = zoomX;\n        this.zoomY = zoomY;\n        this.flipY = flipY;\n    }\n    projectFlat([X, Y]) {\n        const { unitsPerMeter } = this.distanceScales;\n        return [X * unitsPerMeter[0], Y * unitsPerMeter[1]];\n    }\n    unprojectFlat([x, y]) {\n        const { metersPerUnit } = this.distanceScales;\n        return [x * metersPerUnit[0], y * metersPerUnit[1]];\n    }\n    /* Needed by LinearInterpolator */\n    panByPosition(coords, pixel, startPixel) {\n        const fromLocation = pixelsToWorld(pixel, this.pixelUnprojectionMatrix);\n        const toLocation = this.projectFlat(coords);\n        const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n        const newCenter = vec2.add([], this.center, translate);\n        return { target: this.unprojectFlat(newCenter) };\n    }\n}\nOrthographicViewport.displayName = 'OrthographicViewport';\nexport default OrthographicViewport;\n//# sourceMappingURL=orthographic-viewport.js.map"],"names":["viewMatrix","Matrix4","getProjectionMatrix","width","height","near","far","padding","left","right","bottom","top","l","r","t","b","offsetX","clamp","offsetY","OrthographicViewport","Viewport","props","zoom","target","flipY","zoomX","zoomY","zoom_","scale","distanceScales","scaleX","scaleY","X","Y","unitsPerMeter","x","y","metersPerUnit","coords","pixel","startPixel","fromLocation","pixelsToWorld","toLocation","translate","vec2.add","vec2.negate","newCenter"],"mappings":"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","x_google_ignoreList":[0]}