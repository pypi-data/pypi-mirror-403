import{T as N}from"./widget-BjgEeHAL.js";import{j as _,k as x,g as y,w as R,m as I,o as v,q as A,r as Z,z as L,u as q}from"./deep-equal-BTW2ZN6S.js";const O=.01,V=["longitude","latitude","zoom"],F={curve:1.414,speed:1.2};function Y(e,o,n,t){const{startZoom:s,startCenterXY:a,uDelta:m,w0:f,u1:g,S:T,rho:c,rho2:b,r0:u}=C(e,o,t);if(g<O){const S={};for(const w of V){const z=e[w],E=o[w];S[w]=_(z,E,n)}return S}const i=n*T,h=Math.cosh(u)/Math.cosh(u+c*i),M=f*((Math.cosh(u)*Math.tanh(u+c*i)-Math.sinh(u))/b)/g,l=1/h,r=s+A(l),d=x([],m,M);y(d,d,a);const p=R(d);return{longitude:p[0],latitude:p[1],zoom:r}}function k(e,o,n){const t={...F,...n},{screenSpeed:s,speed:a,maxDuration:m}=t,{S:f,rho:g}=C(e,o,t),T=1e3*f;let c;return Number.isFinite(s)?c=T/(s/g):c=T/a,Number.isFinite(m)&&c>m?0:c}function C(e,o,n){n=Object.assign({},F,n);const t=n.curve,s=e.zoom,a=[e.longitude,e.latitude],m=L(s),f=o.zoom,g=[o.longitude,o.latitude],T=L(f-s),c=I(a),b=I(g),u=v([],b,c),i=Math.max(e.width,e.height),h=i/T,M=Z(u)*m,l=Math.max(M,O),r=t*t,d=(h*h-i*i+r*r*l*l)/(2*i*r*l),p=(h*h-i*i-r*r*l*l)/(2*h*r*l),S=Math.log(Math.sqrt(d*d+1)-d),w=Math.log(Math.sqrt(p*p+1)-p),z=(w-S)/t;return{startZoom:s,startCenterXY:c,uDelta:u,w0:i,u1:M,S:z,rho:t,rho2:r,r0:S,r1:w}}const D={bearing:0,pitch:0,position:[0,0,0]},W={speed:1.2,curve:1.414};class U extends N{constructor(o={}){super({compare:["longitude","latitude","zoom","bearing","pitch","position"],extract:["width","height","longitude","latitude","zoom","bearing","pitch","position"],required:["width","height","latitude","longitude","zoom"]}),this.opts={...W,...o}}interpolateProps(o,n,t){const s=Y(o,n,t,this.opts);for(const a in D)s[a]=q(o[a]||D[a],n[a]||D[a],t);return s}getDuration(o,n){let{transitionDuration:t}=n;return t==="auto"&&(t=k(o,n,this.opts)),t}}export{U as F};
//# sourceMappingURL=fly-to-interpolator-CIXGjOdo.js.map
