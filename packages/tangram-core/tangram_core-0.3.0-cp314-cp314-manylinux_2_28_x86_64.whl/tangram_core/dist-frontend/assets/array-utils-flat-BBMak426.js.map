{"version":3,"file":"array-utils-flat-BBMak426.js","sources":["../../../../node_modules/.pnpm/@luma.gl+core@9.2.6/node_modules/@luma.gl/core/dist/adapter/resources/sampler.js","../../../../node_modules/.pnpm/@luma.gl+core@9.2.6/node_modules/@luma.gl/core/dist/adapter/resources/texture.js","../../../../node_modules/.pnpm/@luma.gl+core@9.2.6/node_modules/@luma.gl/core/dist/adapter/resources/texture-view.js","../../../../node_modules/.pnpm/@luma.gl+core@9.2.6/node_modules/@luma.gl/core/dist/adapter-utils/format-compiler-log.js","../../../../node_modules/.pnpm/@luma.gl+core@9.2.6/node_modules/@luma.gl/core/dist/adapter/resources/shader.js","../../../../node_modules/.pnpm/@luma.gl+core@9.2.6/node_modules/@luma.gl/core/dist/adapter/resources/render-pipeline.js","../../../../node_modules/.pnpm/@luma.gl+core@9.2.6/node_modules/@luma.gl/core/dist/shadertypes/data-types/decode-shader-types.js","../../../../node_modules/.pnpm/@luma.gl+core@9.2.6/node_modules/@luma.gl/core/dist/adapter-utils/get-attribute-from-layouts.js","../../../../node_modules/.pnpm/@luma.gl+core@9.2.6/node_modules/@luma.gl/core/dist/utils/array-utils-flat.js"],"sourcesContent":["// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Resource } from \"./resource.js\";\n/** Immutable Sampler object */\nexport class Sampler extends Resource {\n    static defaultProps = {\n        ...Resource.defaultProps,\n        type: 'color-sampler',\n        addressModeU: 'clamp-to-edge',\n        addressModeV: 'clamp-to-edge',\n        addressModeW: 'clamp-to-edge',\n        magFilter: 'nearest',\n        minFilter: 'nearest',\n        mipmapFilter: 'none',\n        lodMinClamp: 0,\n        lodMaxClamp: 32, // Per WebGPU spec\n        compare: 'less-equal',\n        maxAnisotropy: 1\n    };\n    get [Symbol.toStringTag]() {\n        return 'Sampler';\n    }\n    constructor(device, props) {\n        props = Sampler.normalizeProps(device, props);\n        super(device, props, Sampler.defaultProps);\n    }\n    static normalizeProps(device, props) {\n        return props;\n    }\n}\n//# sourceMappingURL=sampler.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Resource } from \"./resource.js\";\nimport { Sampler } from \"./sampler.js\";\nimport { log } from \"../../utils/log.js\";\nconst BASE_DIMENSIONS = {\n    '1d': '1d',\n    '2d': '2d',\n    '2d-array': '2d',\n    cube: '2d',\n    'cube-array': '2d',\n    '3d': '3d'\n};\n/**\n * Abstract Texture interface\n * Texture Object\n * https://gpuweb.github.io/gpuweb/#gputexture\n */\nexport class Texture extends Resource {\n    /** The texture can be bound for use as a sampled texture in a shader */\n    static SAMPLE = 0x04;\n    /** The texture can be bound for use as a storage texture in a shader */\n    static STORAGE = 0x08;\n    /** The texture can be used as a color or depth/stencil attachment in a render pass */\n    static RENDER = 0x10;\n    /** The texture can be used as the source of a copy operation */\n    static COPY_SRC = 0x01;\n    /** he texture can be used as the destination of a copy or write operation */\n    static COPY_DST = 0x02;\n    /** @deprecated Use Texture.SAMPLE */\n    static TEXTURE = 0x04;\n    /** @deprecated Use Texture.RENDER */\n    static RENDER_ATTACHMENT = 0x10;\n    /** dimension of this texture */\n    dimension;\n    /** base dimension of this texture */\n    baseDimension;\n    /** format of this texture */\n    format;\n    /** width in pixels of this texture */\n    width;\n    /** height in pixels of this texture */\n    height;\n    /** depth of this texture */\n    depth;\n    /** mip levels in this texture */\n    mipLevels;\n    /** \"Time\" of last update. Monotonically increasing timestamp. TODO move to AsyncTexture? */\n    updateTimestamp;\n    get [Symbol.toStringTag]() {\n        return 'Texture';\n    }\n    toString() {\n        return `Texture(${this.id},${this.format},${this.width}x${this.height})`;\n    }\n    /** Do not use directly. Create with device.createTexture() */\n    constructor(device, props) {\n        props = Texture.normalizeProps(device, props);\n        super(device, props, Texture.defaultProps);\n        this.dimension = this.props.dimension;\n        this.baseDimension = BASE_DIMENSIONS[this.dimension];\n        this.format = this.props.format;\n        // Size\n        this.width = this.props.width;\n        this.height = this.props.height;\n        this.depth = this.props.depth;\n        this.mipLevels = this.props.mipLevels;\n        // Calculate size, if not provided\n        if (this.props.width === undefined || this.props.height === undefined) {\n            if (device.isExternalImage(props.data)) {\n                const size = device.getExternalImageSize(props.data);\n                this.width = size?.width || 1;\n                this.height = size?.height || 1;\n            }\n            else {\n                this.width = 1;\n                this.height = 1;\n                if (this.props.width === undefined || this.props.height === undefined) {\n                    log.warn(`${this} created with undefined width or height. This is deprecated. Use AsyncTexture instead.`)();\n                }\n            }\n        }\n        // TODO - perhaps this should be set on async write completion?\n        this.updateTimestamp = device.incrementTimestamp();\n    }\n    /** Set sampler props associated with this texture */\n    setSampler(sampler) {\n        this.sampler = sampler instanceof Sampler ? sampler : this.device.createSampler(sampler);\n    }\n    /**\n     * Create a new texture with the same parameters and optionally a different size\n     * @note Textures are immutable and cannot be resized after creation, but we can create a similar texture with the same parameters but a new size.\n     * @note Does not copy contents of the texture\n     */\n    clone(size) {\n        return this.device.createTexture({ ...this.props, ...size });\n    }\n    /** Ensure we have integer coordinates */\n    static normalizeProps(device, props) {\n        const newProps = { ...props };\n        // Ensure we have integer coordinates\n        const { width, height } = newProps;\n        if (typeof width === 'number') {\n            newProps.width = Math.max(1, Math.ceil(width));\n        }\n        if (typeof height === 'number') {\n            newProps.height = Math.max(1, Math.ceil(height));\n        }\n        return newProps;\n    }\n    // HELPERS\n    /** Initialize texture with supplied props */\n    // eslint-disable-next-line max-statements\n    _initializeData(data) {\n        // Store opts for accessors\n        if (this.device.isExternalImage(data)) {\n            this.copyExternalImage({\n                image: data,\n                width: this.width,\n                height: this.height,\n                depth: this.depth,\n                mipLevel: 0,\n                x: 0,\n                y: 0,\n                z: 0,\n                aspect: 'all',\n                colorSpace: 'srgb',\n                premultipliedAlpha: false,\n                flipY: false\n            });\n        }\n        else if (data) {\n            this.copyImageData({\n                data,\n                // width: this.width,\n                // height: this.height,\n                // depth: this.depth,\n                mipLevel: 0,\n                x: 0,\n                y: 0,\n                z: 0,\n                aspect: 'all'\n            });\n        }\n    }\n    _normalizeCopyImageDataOptions(options_) {\n        const { width, height, depth } = this;\n        const options = { ...Texture.defaultCopyDataOptions, width, height, depth, ...options_ };\n        const info = this.device.getTextureFormatInfo(this.format);\n        if (!options_.bytesPerRow && !info.bytesPerPixel) {\n            throw new Error(`bytesPerRow must be provided for texture format ${this.format}`);\n        }\n        options.bytesPerRow = options_.bytesPerRow || width * (info.bytesPerPixel || 4);\n        options.rowsPerImage = options_.rowsPerImage || height;\n        // WebGL will error if we try to copy outside the bounds of the texture\n        // options.width = Math.min(options.width, this.width - options.x);\n        // options.height = Math.min(options.height, this.height - options.y);\n        return options;\n    }\n    _normalizeCopyExternalImageOptions(options_) {\n        const size = this.device.getExternalImageSize(options_.image);\n        const options = { ...Texture.defaultCopyExternalImageOptions, ...size, ...options_ };\n        // WebGL will error if we try to copy outside the bounds of the texture\n        options.width = Math.min(options.width, this.width - options.x);\n        options.height = Math.min(options.height, this.height - options.y);\n        return options;\n    }\n    /** Default options */\n    static defaultProps = {\n        ...Resource.defaultProps,\n        data: null,\n        dimension: '2d',\n        format: 'rgba8unorm',\n        usage: Texture.TEXTURE | Texture.RENDER_ATTACHMENT | Texture.COPY_DST,\n        width: undefined,\n        height: undefined,\n        depth: 1,\n        mipLevels: 1,\n        samples: undefined,\n        sampler: {},\n        view: undefined\n    };\n    static defaultCopyDataOptions = {\n        data: undefined,\n        byteOffset: 0,\n        bytesPerRow: undefined,\n        rowsPerImage: undefined,\n        mipLevel: 0,\n        x: 0,\n        y: 0,\n        z: 0,\n        aspect: 'all'\n    };\n    /** Default options */\n    static defaultCopyExternalImageOptions = {\n        image: undefined,\n        sourceX: 0,\n        sourceY: 0,\n        width: undefined,\n        height: undefined,\n        depth: 1,\n        mipLevel: 0,\n        x: 0,\n        y: 0,\n        z: 0,\n        aspect: 'all',\n        colorSpace: 'srgb',\n        premultipliedAlpha: false,\n        flipY: false\n    };\n}\n//# sourceMappingURL=texture.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Resource } from \"./resource.js\";\n/** Immutable TextureView object */\nexport class TextureView extends Resource {\n    get [Symbol.toStringTag]() {\n        return 'TextureView';\n    }\n    /** Should not be constructed directly. Use `texture.createView(props)` */\n    constructor(device, props) {\n        super(device, props, TextureView.defaultProps);\n    }\n    static defaultProps = {\n        ...Resource.defaultProps,\n        format: undefined,\n        dimension: undefined,\n        aspect: 'all',\n        baseMipLevel: 0,\n        mipLevelCount: undefined,\n        baseArrayLayer: 0,\n        arrayLayerCount: undefined\n    };\n}\n//# sourceMappingURL=texture-view.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/** @returns annotated errors or warnings */\nexport function formatCompilerLog(shaderLog, source, options) {\n    let formattedLog = '';\n    const lines = source.split(/\\r?\\n/);\n    const log = shaderLog.slice().sort((a, b) => a.lineNum - b.lineNum);\n    switch (options?.showSourceCode || 'no') {\n        case 'all':\n            // Parse the error - note: browser and driver dependent\n            let currentMessage = 0;\n            for (let lineNum = 1; lineNum <= lines.length; lineNum++) {\n                formattedLog += getNumberedLine(lines[lineNum - 1], lineNum, options);\n                while (log.length > currentMessage && log[currentMessage].lineNum === lineNum) {\n                    const message = log[currentMessage++];\n                    formattedLog += formatCompilerMessage(message, lines, message.lineNum, {\n                        ...options,\n                        inlineSource: false\n                    });\n                }\n            }\n            // Print any remaining messages\n            while (log.length > currentMessage) {\n                const message = log[currentMessage++];\n                formattedLog += formatCompilerMessage(message, [], 0, {\n                    ...options,\n                    inlineSource: false\n                });\n            }\n            return formattedLog;\n        case 'issues':\n        case 'no':\n            // Parse the error - note: browser and driver dependent\n            for (const message of shaderLog) {\n                formattedLog += formatCompilerMessage(message, lines, message.lineNum, {\n                    inlineSource: options?.showSourceCode !== 'no'\n                });\n            }\n            return formattedLog;\n    }\n}\n// Helpers\n/** Format one message */\nfunction formatCompilerMessage(message, lines, lineNum, options) {\n    if (options?.inlineSource) {\n        const numberedLines = getNumberedLines(lines, lineNum);\n        // If we got error position on line add a `^^^` indicator on next line\n        const positionIndicator = message.linePos > 0 ? `${' '.repeat(message.linePos + 5)}^^^\\n` : '';\n        return `\n${numberedLines}${positionIndicator}${message.type.toUpperCase()}: ${message.message}\n\n`;\n    }\n    const color = message.type === 'error' ? 'red' : '#8B4000'; // dark orange\n    return options?.html\n        ? `<div class='luma-compiler-log-error' style=\"color:${color};\"><b> ${message.type.toUpperCase()}: ${message.message}</b></div>`\n        : `${message.type.toUpperCase()}: ${message.message}`;\n}\nfunction getNumberedLines(lines, lineNum, options) {\n    let numberedLines = '';\n    for (let lineIndex = lineNum - 2; lineIndex <= lineNum; lineIndex++) {\n        const sourceLine = lines[lineIndex - 1];\n        if (sourceLine !== undefined) {\n            numberedLines += getNumberedLine(sourceLine, lineNum, options);\n        }\n    }\n    return numberedLines;\n}\nfunction getNumberedLine(line, lineNum, options) {\n    const escapedLine = options?.html ? escapeHTML(line) : line;\n    return `${padLeft(String(lineNum), 4)}: ${escapedLine}${options?.html ? '<br/>' : '\\n'}`;\n}\n/**\n * Pads a string with a number of spaces (space characters) to the left\n * @param {String} string - string to pad\n * @param {Number} digits - number of spaces to add\n * @return {String} string - The padded string\n */\nfunction padLeft(string, paddedLength) {\n    let result = '';\n    for (let i = string.length; i < paddedLength; ++i) {\n        result += ' ';\n    }\n    return result + string;\n}\nfunction escapeHTML(unsafe) {\n    return unsafe\n        .replaceAll('&', '&amp;')\n        .replaceAll('<', '&lt;')\n        .replaceAll('>', '&gt;')\n        .replaceAll('\"', '&quot;')\n        .replaceAll(\"'\", '&#039;');\n}\n//# sourceMappingURL=format-compiler-log.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Resource } from \"./resource.js\";\n// import { log } from '../../utils/log';\nimport { uid } from \"../../utils/uid.js\";\nimport { formatCompilerLog } from \"../../adapter-utils/format-compiler-log.js\";\n/**\n * Immutable Shader object\n * In WebGPU the handle can be copied between threads\n */\nexport class Shader extends Resource {\n    get [Symbol.toStringTag]() {\n        return 'Shader';\n    }\n    /** The stage of this shader */\n    stage;\n    /** The source code of this shader */\n    source;\n    /** The compilation status of the shader. 'pending' if compilation is asynchronous, and on production */\n    compilationStatus = 'pending';\n    /** Create a new Shader instance */\n    constructor(device, props) {\n        props = { ...props, debugShaders: props.debugShaders || device.props.debugShaders || 'errors' };\n        super(device, { id: getShaderIdFromProps(props), ...props }, Shader.defaultProps);\n        this.stage = this.props.stage;\n        this.source = this.props.source;\n    }\n    /** Get compiler log synchronously (WebGL only) */\n    getCompilationInfoSync() {\n        return null;\n    }\n    /** Get translated shader source in host platform's native language (HLSL, GLSL, and even GLSL ES), if available */\n    getTranslatedSource() {\n        return null;\n    }\n    // PORTABLE HELPERS\n    /** In browser logging of errors */\n    async debugShader() {\n        const trigger = this.props.debugShaders;\n        switch (trigger) {\n            case 'never':\n                return;\n            case 'errors':\n                // On WebGL - Don't extract the log unless errors\n                if (this.compilationStatus === 'success') {\n                    return;\n                }\n                break;\n            case 'warnings':\n            case 'always':\n                break;\n        }\n        const messages = await this.getCompilationInfo();\n        if (trigger === 'warnings' && messages?.length === 0) {\n            return;\n        }\n        this._displayShaderLog(messages, this.id);\n    }\n    // PRIVATE\n    /**\n     * In-browser UI logging of errors\n     * TODO - this HTML formatting code should not be in Device, should be pluggable\n     */\n    _displayShaderLog(messages, shaderId) {\n        // Return if under Node.js / incomplete `document` polyfills\n        if (typeof document === 'undefined' || !document?.createElement) {\n            return;\n        }\n        const shaderName = shaderId; // getShaderName(this.source) || ;\n        const shaderTitle = `${this.stage} shader \"${shaderName}\"`;\n        let htmlLog = formatCompilerLog(messages, this.source, { showSourceCode: 'all', html: true });\n        // Show translated source if available\n        const translatedSource = this.getTranslatedSource();\n        if (translatedSource) {\n            htmlLog += `<br /><br /><h1>Translated Source</h1><br /><br /><code style=\"user-select:text;\"><pre>${translatedSource}</pre></code>`;\n        }\n        // Make it clickable so we can copy to clipboard\n        const button = document.createElement('Button');\n        button.innerHTML = `\n<h1>Compilation error in ${shaderTitle}</h1><br /><br />\n<code style=\"user-select:text;\"><pre>\n${htmlLog}\n</pre></code>`;\n        button.style.top = '10px';\n        button.style.left = '10px';\n        button.style.position = 'absolute';\n        button.style.zIndex = '9999';\n        button.style.width = '100%';\n        button.style.textAlign = 'left';\n        document.body.appendChild(button);\n        const errors = document.getElementsByClassName('luma-compiler-log-error');\n        errors[0]?.scrollIntoView();\n        // TODO - add a small embedded copy button (instead of main button)\n        button.onclick = () => {\n            // const source = this.source.replaceAll('\\n', '<br />');\n            const dataURI = `data:text/plain,${encodeURIComponent(this.source)}`;\n            navigator.clipboard.writeText(dataURI);\n        };\n        // TODO - add a small embedded close button\n    }\n    static defaultProps = {\n        ...Resource.defaultProps,\n        language: 'auto',\n        stage: undefined,\n        source: '',\n        sourceMap: null,\n        entryPoint: 'main',\n        debugShaders: undefined\n    };\n}\n// HELPERS\n/** Deduce an id, from shader source, or supplied id, or shader type */\nfunction getShaderIdFromProps(props) {\n    return getShaderName(props.source) || props.id || uid(`unnamed ${props.stage}-shader`);\n}\n/** Extracts GLSLIFY style naming of shaders: `#define SHADER_NAME ...` */\nfunction getShaderName(shader, defaultName = 'unnamed') {\n    const SHADER_NAME_REGEXP = /#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/;\n    const match = SHADER_NAME_REGEXP.exec(shader);\n    return match ? match[1] : defaultName;\n}\n//# sourceMappingURL=shader.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Resource } from \"./resource.js\";\n/**\n * A compiled and linked shader program\n */\nexport class RenderPipeline extends Resource {\n    get [Symbol.toStringTag]() {\n        return 'RenderPipeline';\n    }\n    /** The merged layout */\n    shaderLayout;\n    /** Buffer map describing buffer interleaving etc */\n    bufferLayout;\n    /** The linking status of the pipeline. 'pending' if linking is asynchronous, and on production */\n    linkStatus = 'pending';\n    /** The hash of the pipeline */\n    hash = '';\n    constructor(device, props) {\n        super(device, props, RenderPipeline.defaultProps);\n        this.shaderLayout = this.props.shaderLayout;\n        this.bufferLayout = this.props.bufferLayout || [];\n    }\n    static defaultProps = {\n        ...Resource.defaultProps,\n        vs: null,\n        vertexEntryPoint: 'vertexMain',\n        vsConstants: {},\n        fs: null,\n        fragmentEntryPoint: 'fragmentMain',\n        fsConstants: {},\n        shaderLayout: null,\n        bufferLayout: [],\n        topology: 'triangle-list',\n        colorAttachmentFormats: undefined,\n        depthStencilAttachmentFormat: undefined,\n        parameters: {},\n        bindings: {},\n        uniforms: {}\n    };\n}\n//# sourceMappingURL=render-pipeline.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/** Split a uniform type string into type and components */\nexport function getVariableShaderTypeInfo(format) {\n    const decoded = UNIFORM_FORMATS[format];\n    return decoded;\n}\n/** Decodes a vertex type, returning byte length and flags (integer, signed, normalized) */\nexport function getAttributeShaderTypeInfo(attributeType) {\n    const [primitiveType, components] = TYPE_INFO[attributeType];\n    const integer = primitiveType === 'i32' || primitiveType === 'u32';\n    const signed = primitiveType !== 'u32';\n    const byteLength = PRIMITIVE_TYPE_SIZES[primitiveType] * components;\n    return {\n        primitiveType,\n        components,\n        byteLength,\n        integer,\n        signed\n    };\n}\nexport function makeShaderAttributeType(primitiveType, components) {\n    return components === 1 ? primitiveType : `vec${components}<${primitiveType}>`;\n}\nexport function resolveAttributeShaderTypeAlias(alias) {\n    return WGSL_ATTRIBUTE_TYPE_ALIAS_MAP[alias] || alias;\n}\nexport function resolveVariableShaderTypeAlias(alias) {\n    return WGSL_VARIABLE_TYPE_ALIAS_MAP[alias] || alias;\n}\n// TABLES\nconst PRIMITIVE_TYPE_SIZES = {\n    f32: 4,\n    f16: 2,\n    i32: 4,\n    u32: 4\n    // 'bool-webgl': 4,\n};\n/** All valid shader attribute types. A table guarantees exhaustive list and fast execution */\nconst TYPE_INFO = {\n    f32: ['f32', 1],\n    'vec2<f32>': ['f32', 2],\n    'vec3<f32>': ['f32', 3],\n    'vec4<f32>': ['f32', 4],\n    f16: ['f16', 1],\n    'vec2<f16>': ['f16', 2],\n    'vec3<f16>': ['f16', 3],\n    'vec4<f16>': ['f16', 4],\n    i32: ['i32', 1],\n    'vec2<i32>': ['i32', 2],\n    'vec3<i32>': ['i32', 3],\n    'vec4<i32>': ['i32', 4],\n    u32: ['u32', 1],\n    'vec2<u32>': ['u32', 2],\n    'vec3<u32>': ['u32', 3],\n    'vec4<u32>': ['u32', 4]\n};\n/** @todo These tables are quite big, consider parsing type strings instead */\nconst UNIFORM_FORMATS = {\n    f32: { type: 'f32', components: 1 },\n    f16: { type: 'f16', components: 1 },\n    i32: { type: 'i32', components: 1 },\n    u32: { type: 'u32', components: 1 },\n    // 'bool-webgl': {type: 'bool-webgl', components: 1},\n    'vec2<f32>': { type: 'f32', components: 2 },\n    'vec3<f32>': { type: 'f32', components: 3 },\n    'vec4<f32>': { type: 'f32', components: 4 },\n    'vec2<f16>': { type: 'f16', components: 2 },\n    'vec3<f16>': { type: 'f16', components: 3 },\n    'vec4<f16>': { type: 'f16', components: 4 },\n    'vec2<i32>': { type: 'i32', components: 2 },\n    'vec3<i32>': { type: 'i32', components: 3 },\n    'vec4<i32>': { type: 'i32', components: 4 },\n    'vec2<u32>': { type: 'u32', components: 2 },\n    'vec3<u32>': { type: 'u32', components: 3 },\n    'vec4<u32>': { type: 'u32', components: 4 },\n    'mat2x2<f32>': { type: 'f32', components: 4 },\n    'mat2x3<f32>': { type: 'f32', components: 6 },\n    'mat2x4<f32>': { type: 'f32', components: 8 },\n    'mat3x2<f32>': { type: 'f32', components: 6 },\n    'mat3x3<f32>': { type: 'f32', components: 9 },\n    'mat3x4<f32>': { type: 'f32', components: 12 },\n    'mat4x2<f32>': { type: 'f32', components: 8 },\n    'mat4x3<f32>': { type: 'f32', components: 12 },\n    'mat4x4<f32>': { type: 'f32', components: 16 },\n    'mat2x2<f16>': { type: 'f16', components: 4 },\n    'mat2x3<f16>': { type: 'f16', components: 6 },\n    'mat2x4<f16>': { type: 'f16', components: 8 },\n    'mat3x2<f16>': { type: 'f16', components: 6 },\n    'mat3x3<f16>': { type: 'f16', components: 9 },\n    'mat3x4<f16>': { type: 'f16', components: 12 },\n    'mat4x2<f16>': { type: 'f16', components: 8 },\n    'mat4x3<f16>': { type: 'f16', components: 12 },\n    'mat4x4<f16>': { type: 'f16', components: 16 },\n    'mat2x2<i32>': { type: 'i32', components: 4 },\n    'mat2x3<i32>': { type: 'i32', components: 6 },\n    'mat2x4<i32>': { type: 'i32', components: 8 },\n    'mat3x2<i32>': { type: 'i32', components: 6 },\n    'mat3x3<i32>': { type: 'i32', components: 9 },\n    'mat3x4<i32>': { type: 'i32', components: 12 },\n    'mat4x2<i32>': { type: 'i32', components: 8 },\n    'mat4x3<i32>': { type: 'i32', components: 12 },\n    'mat4x4<i32>': { type: 'i32', components: 16 },\n    'mat2x2<u32>': { type: 'u32', components: 4 },\n    'mat2x3<u32>': { type: 'u32', components: 6 },\n    'mat2x4<u32>': { type: 'u32', components: 8 },\n    'mat3x2<u32>': { type: 'u32', components: 6 },\n    'mat3x3<u32>': { type: 'u32', components: 9 },\n    'mat3x4<u32>': { type: 'u32', components: 12 },\n    'mat4x2<u32>': { type: 'u32', components: 8 },\n    'mat4x3<u32>': { type: 'u32', components: 12 },\n    'mat4x4<u32>': { type: 'u32', components: 16 }\n};\n/**  Predeclared aliases @see https://www.w3.org/TR/WGSL/#vector-types */\nexport const WGSL_ATTRIBUTE_TYPE_ALIAS_MAP = {\n    vec2i: 'vec2<i32>',\n    vec3i: 'vec3<i32>',\n    vec4i: 'vec4<i32>',\n    vec2u: 'vec2<u32>',\n    vec3u: 'vec3<u32>',\n    vec4u: 'vec4<u32>',\n    vec2f: 'vec2<f32>',\n    vec3f: 'vec3<f32>',\n    vec4f: 'vec4<f32>',\n    // Requires the f16 extension.\n    vec2h: 'vec2<f16>',\n    vec3h: 'vec3<f16>',\n    vec4h: 'vec4<f16>'\n};\n/** @todo These tables are quite big, consider parsing alias strings instead */\nexport const WGSL_VARIABLE_TYPE_ALIAS_MAP = {\n    ...WGSL_ATTRIBUTE_TYPE_ALIAS_MAP,\n    mat2x2f: 'mat2x2<f32>',\n    mat2x3f: 'mat2x3<f32>',\n    mat2x4f: 'mat2x4<f32>',\n    mat3x2f: 'mat3x2<f32>',\n    mat3x3f: 'mat3x3<f32>',\n    mat3x4f: 'mat3x4<f32>',\n    mat4x2f: 'mat4x2<f32>',\n    mat4x3f: 'mat4x3<f32>',\n    mat4x4f: 'mat4x4<f32>',\n    mat2x2i: 'mat2x2<i32>',\n    mat2x3i: 'mat2x3<i32>',\n    mat2x4i: 'mat2x4<i32>',\n    mat3x2i: 'mat3x2<i32>',\n    mat3x3i: 'mat3x3<i32>',\n    mat3x4i: 'mat3x4<i32>',\n    mat4x2i: 'mat4x2<i32>',\n    mat4x3i: 'mat4x3<i32>',\n    mat4x4i: 'mat4x4<i32>',\n    mat2x2u: 'mat2x2<u32>',\n    mat2x3u: 'mat2x3<u32>',\n    mat2x4u: 'mat2x4<u32>',\n    mat3x2u: 'mat3x2<u32>',\n    mat3x3u: 'mat3x3<u32>',\n    mat3x4u: 'mat3x4<u32>',\n    mat4x2u: 'mat4x2<u32>',\n    mat4x3u: 'mat4x3<u32>',\n    mat4x4u: 'mat4x4<u32>',\n    mat2x2h: 'mat2x2<f16>',\n    mat2x3h: 'mat2x3<f16>',\n    mat2x4h: 'mat2x4<f16>',\n    mat3x2h: 'mat3x2<f16>',\n    mat3x3h: 'mat3x3<f16>',\n    mat3x4h: 'mat3x4<f16>',\n    mat4x2h: 'mat4x2<f16>',\n    mat4x3h: 'mat4x3<f16>',\n    mat4x4h: 'mat4x4<f16>'\n};\n//# sourceMappingURL=decode-shader-types.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { log } from \"../utils/log.js\";\nimport { getAttributeShaderTypeInfo } from \"../shadertypes/data-types/decode-shader-types.js\";\nimport { getVertexFormatInfo, getCompatibleVertexFormat } from \"../shadertypes/vertex-arrays/decode-vertex-format.js\";\n/**\n * Map from \"attribute names\" to \"resolved attribute infos\"\n * containing information about both buffer layouts and shader attribute declarations\n */\nexport function getAttributeInfosFromLayouts(shaderLayout, bufferLayout) {\n    const attributeInfos = {};\n    for (const attribute of shaderLayout.attributes) {\n        const attributeInfo = getAttributeInfoFromLayouts(shaderLayout, bufferLayout, attribute.name);\n        if (attributeInfo) {\n            attributeInfos[attribute.name] = attributeInfo;\n        }\n    }\n    return attributeInfos;\n}\n/**\n * Array indexed by \"location\" holding \"resolved attribute infos\"\n */\nexport function getAttributeInfosByLocation(shaderLayout, bufferLayout, maxVertexAttributes = 16) {\n    const attributeInfos = getAttributeInfosFromLayouts(shaderLayout, bufferLayout);\n    const locationInfos = new Array(maxVertexAttributes).fill(null);\n    for (const attributeInfo of Object.values(attributeInfos)) {\n        locationInfos[attributeInfo.location] = attributeInfo;\n    }\n    return locationInfos;\n}\n/**\n * Get the combined information from a shader layout and a buffer layout for a specific attribute\n */\nfunction getAttributeInfoFromLayouts(shaderLayout, bufferLayout, name) {\n    const shaderDeclaration = getAttributeFromShaderLayout(shaderLayout, name);\n    const bufferMapping = getAttributeFromBufferLayout(bufferLayout, name);\n    // TODO should no longer happen\n    if (!shaderDeclaration) {\n        //  || !bufferMapping\n        return null;\n    }\n    const attributeTypeInfo = getAttributeShaderTypeInfo(shaderDeclaration.type);\n    const defaultVertexFormat = getCompatibleVertexFormat(attributeTypeInfo);\n    const vertexFormat = bufferMapping?.vertexFormat || defaultVertexFormat;\n    const vertexFormatInfo = getVertexFormatInfo(vertexFormat);\n    return {\n        attributeName: bufferMapping?.attributeName || shaderDeclaration.name,\n        bufferName: bufferMapping?.bufferName || shaderDeclaration.name,\n        location: shaderDeclaration.location,\n        shaderType: shaderDeclaration.type,\n        primitiveType: attributeTypeInfo.primitiveType,\n        shaderComponents: attributeTypeInfo.components,\n        vertexFormat,\n        bufferDataType: vertexFormatInfo.type,\n        bufferComponents: vertexFormatInfo.components,\n        // normalized is a property of the buffer's vertex format\n        normalized: vertexFormatInfo.normalized,\n        // integer is a property of the shader declaration\n        integer: attributeTypeInfo.integer,\n        stepMode: bufferMapping?.stepMode || shaderDeclaration.stepMode || 'vertex',\n        byteOffset: bufferMapping?.byteOffset || 0,\n        byteStride: bufferMapping?.byteStride || 0\n    };\n}\nfunction getAttributeFromShaderLayout(shaderLayout, name) {\n    const attribute = shaderLayout.attributes.find(attr => attr.name === name);\n    if (!attribute) {\n        log.warn(`shader layout attribute \"${name}\" not present in shader`);\n    }\n    return attribute || null;\n}\nfunction getAttributeFromBufferLayout(bufferLayouts, name) {\n    // Check that bufferLayouts are valid (each either has format or attribute)\n    checkBufferLayouts(bufferLayouts);\n    let bufferLayoutInfo = getAttributeFromShortHand(bufferLayouts, name);\n    if (bufferLayoutInfo) {\n        return bufferLayoutInfo;\n    }\n    bufferLayoutInfo = getAttributeFromAttributesList(bufferLayouts, name);\n    if (bufferLayoutInfo) {\n        return bufferLayoutInfo;\n    }\n    // Didn't find...\n    log.warn(`layout for attribute \"${name}\" not present in buffer layout`);\n    return null;\n}\n/** Check that bufferLayouts are valid (each either has format or attribute) */\nfunction checkBufferLayouts(bufferLayouts) {\n    for (const bufferLayout of bufferLayouts) {\n        if ((bufferLayout.attributes && bufferLayout.format) ||\n            (!bufferLayout.attributes && !bufferLayout.format)) {\n            log.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`);\n        }\n    }\n}\n/** Get attribute from format shorthand if specified */\nfunction getAttributeFromShortHand(bufferLayouts, name) {\n    for (const bufferLayout of bufferLayouts) {\n        if (bufferLayout.format && bufferLayout.name === name) {\n            return {\n                attributeName: bufferLayout.name,\n                bufferName: name,\n                stepMode: bufferLayout.stepMode,\n                vertexFormat: bufferLayout.format,\n                // If offset is needed, use `attributes` field.\n                byteOffset: 0,\n                byteStride: bufferLayout.byteStride || 0\n            };\n        }\n    }\n    return null;\n}\n/**\n * Search attribute mappings (e.g. interleaved attributes) for buffer mapping.\n * Not the name of the buffer might be the same as one of the interleaved attributes.\n */\nfunction getAttributeFromAttributesList(bufferLayouts, name) {\n    for (const bufferLayout of bufferLayouts) {\n        let byteStride = bufferLayout.byteStride;\n        // Calculate a default byte stride if not provided\n        if (typeof bufferLayout.byteStride !== 'number') {\n            for (const attributeMapping of bufferLayout.attributes || []) {\n                const info = getVertexFormatInfo(attributeMapping.format);\n                // @ts-ignore\n                byteStride += info.byteLength;\n            }\n        }\n        const attributeMapping = bufferLayout.attributes?.find(mapping => mapping.attribute === name);\n        if (attributeMapping) {\n            return {\n                attributeName: attributeMapping.attribute,\n                bufferName: bufferLayout.name,\n                stepMode: bufferLayout.stepMode,\n                vertexFormat: attributeMapping.format,\n                byteOffset: attributeMapping.byteOffset,\n                // @ts-ignore\n                byteStride\n            };\n        }\n    }\n    return null;\n}\n//# sourceMappingURL=get-attribute-from-layouts.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nlet arrayBuffer;\nexport function getScratchArrayBuffer(byteLength) {\n    if (!arrayBuffer || arrayBuffer.byteLength < byteLength) {\n        arrayBuffer = new ArrayBuffer(byteLength);\n    }\n    return arrayBuffer;\n}\nexport function getScratchArray(Type, length) {\n    const scratchArrayBuffer = getScratchArrayBuffer(Type.BYTES_PER_ELEMENT * length);\n    return new Type(scratchArrayBuffer, 0, length); // arrayBuffer, byteOffset, length (in elements)\n}\n//# sourceMappingURL=array-utils-flat.js.map"],"names":["Sampler","Resource","device","props","BASE_DIMENSIONS","Texture","size","log","sampler","newProps","width","height","data","options_","depth","options","info","TextureView","formatCompilerLog","shaderLog","source","formattedLog","lines","b","currentMessage","lineNum","getNumberedLine","message","formatCompilerMessage","numberedLines","getNumberedLines","positionIndicator","color","lineIndex","sourceLine","line","escapedLine","escapeHTML","padLeft","string","paddedLength","result","i","unsafe","Shader","getShaderIdFromProps","trigger","messages","shaderId","shaderName","shaderTitle","htmlLog","translatedSource","button","dataURI","getShaderName","uid","shader","defaultName","match","RenderPipeline","getVariableShaderTypeInfo","format","UNIFORM_FORMATS","getAttributeShaderTypeInfo","attributeType","primitiveType","components","TYPE_INFO","integer","signed","byteLength","PRIMITIVE_TYPE_SIZES","getAttributeInfosFromLayouts","shaderLayout","bufferLayout","attributeInfos","attribute","attributeInfo","getAttributeInfoFromLayouts","getAttributeInfosByLocation","maxVertexAttributes","locationInfos","name","shaderDeclaration","getAttributeFromShaderLayout","bufferMapping","getAttributeFromBufferLayout","attributeTypeInfo","defaultVertexFormat","getCompatibleVertexFormat","vertexFormat","vertexFormatInfo","getVertexFormatInfo","attr","bufferLayouts","checkBufferLayouts","bufferLayoutInfo","getAttributeFromShortHand","getAttributeFromAttributesList","byteStride","attributeMapping","mapping","arrayBuffer","getScratchArrayBuffer","getScratchArray","Type","length","scratchArrayBuffer"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8]}