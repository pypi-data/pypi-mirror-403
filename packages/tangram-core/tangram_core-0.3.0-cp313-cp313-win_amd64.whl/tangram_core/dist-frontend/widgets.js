import{W as f,L as ae,a as Qe,l as et}from"./assets/widget-BjgEeHAL.js";import{F as le}from"./assets/fly-to-interpolator-CIXGjOdo.js";import{W as ge,x as ee,i as ve}from"./assets/deep-equal-BTW2ZN6S.js";import{G as tt}from"./assets/globe-viewport-tqhQW7C4.js";import"./assets/assert-cyW4mg7q.js";var j,y,We,N,we,Ae,Fe,Ve,ce,te,ie,O={},De=[],it=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,X=Array.isArray;function C(t,e){for(var i in e)t[i]=e[i];return t}function de(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function st(t,e,i){var s,o,n,a={};for(n in e)n=="key"?s=e[n]:n=="ref"?o=e[n]:a[n]=e[n];if(arguments.length>2&&(a.children=arguments.length>3?j.call(arguments,2):i),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)a[n]===void 0&&(a[n]=t.defaultProps[n]);return V(t,a,s,o,null)}function V(t,e,i,s,o){var n={type:t,props:e,key:i,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++We,__i:-1,__u:0};return o==null&&y.vnode!=null&&y.vnode(n),n}function K(t){return t.children}function D(t,e){this.props=t,this.context=e}function H(t,e){if(e==null)return t.__?H(t.__,t.__i+1):null;for(var i;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null)return i.__e;return typeof t.type=="function"?H(t):null}function Ue(t){var e,i;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null){t.__e=t.__c.base=i.__e;break}return Ue(t)}}function be(t){(!t.__d&&(t.__d=!0)&&N.push(t)&&!G.__r++||we!=y.debounceRendering)&&((we=y.debounceRendering)||Ae)(G)}function G(){for(var t,e,i,s,o,n,a,l=1;N.length;)N.length>l&&N.sort(Fe),t=N.shift(),l=N.length,t.__d&&(i=void 0,s=void 0,o=(s=(e=t).__v).__e,n=[],a=[],e.__P&&((i=C({},s)).__v=s.__v+1,y.vnode&&y.vnode(i),he(e.__P,i,s,e.__n,e.__P.namespaceURI,32&s.__u?[o]:null,n,o??H(s),!!(32&s.__u),a),i.__v=s.__v,i.__.__k[i.__i]=i,qe(n,i,a),s.__e=s.__=null,i.__e!=o&&Ue(i)));G.__r=0}function Ge(t,e,i,s,o,n,a,l,h,c,u){var r,p,_,w,m,b,g,v=s&&s.__k||De,M=e.length;for(h=ot(i,e,v,h,M),r=0;r<M;r++)(_=i.__k[r])!=null&&(p=_.__i==-1?O:v[_.__i]||O,_.__i=r,b=he(t,_,p,o,n,a,l,h,c,u),w=_.__e,_.ref&&p.ref!=_.ref&&(p.ref&&pe(p.ref,null,_),u.push(_.ref,_.__c||w,_)),m==null&&w!=null&&(m=w),(g=!!(4&_.__u))||p.__k===_.__k?h=ze(_,h,t,g):typeof _.type=="function"&&b!==void 0?h=b:w&&(h=w.nextSibling),_.__u&=-7);return i.__e=m,h}function ot(t,e,i,s,o){var n,a,l,h,c,u=i.length,r=u,p=0;for(t.__k=new Array(o),n=0;n<o;n++)(a=e[n])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=t.__k[n]=V(null,a,null,null,null):X(a)?a=t.__k[n]=V(K,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?a=t.__k[n]=V(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):t.__k[n]=a,h=n+p,a.__=t,a.__b=t.__b+1,l=null,(c=a.__i=nt(a,i,h,r))!=-1&&(r--,(l=i[c])&&(l.__u|=2)),l==null||l.__v==null?(c==-1&&(o>u?p--:o<u&&p++),typeof a.type!="function"&&(a.__u|=4)):c!=h&&(c==h-1?p--:c==h+1?p++:(c>h?p--:p++,a.__u|=4))):t.__k[n]=null;if(r)for(n=0;n<u;n++)(l=i[n])!=null&&(2&l.__u)==0&&(l.__e==s&&(s=H(l)),je(l,l));return s}function ze(t,e,i,s){var o,n;if(typeof t.type=="function"){for(o=t.__k,n=0;o&&n<o.length;n++)o[n]&&(o[n].__=t,e=ze(o[n],e,i,s));return e}t.__e!=e&&(s&&(e&&t.type&&!e.parentNode&&(e=H(t)),i.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function nt(t,e,i,s){var o,n,a,l=t.key,h=t.type,c=e[i],u=c!=null&&(2&c.__u)==0;if(c===null&&l==null||u&&l==c.key&&h==c.type)return i;if(s>(u?1:0)){for(o=i-1,n=i+1;o>=0||n<e.length;)if((c=e[a=o>=0?o--:n++])!=null&&(2&c.__u)==0&&l==c.key&&h==c.type)return a}return-1}function ye(t,e,i){e[0]=="-"?t.setProperty(e,i??""):t[e]=i==null?"":typeof i!="number"||it.test(e)?i:i+"px"}function F(t,e,i,s,o){var n,a;e:if(e=="style")if(typeof i=="string")t.style.cssText=i;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(e in s)i&&e in i||ye(t.style,e,"");if(i)for(e in i)s&&i[e]==s[e]||ye(t.style,e,i[e])}else if(e[0]=="o"&&e[1]=="n")n=e!=(e=e.replace(Ve,"$1")),a=e.toLowerCase(),e=a in t||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+n]=i,i?s?i.u=s.u:(i.u=ce,t.addEventListener(e,n?ie:te,n)):t.removeEventListener(e,n?ie:te,n);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&i==1?"":i))}}function xe(t){return function(e){if(this.l){var i=this.l[e.type+t];if(e.t==null)e.t=ce++;else if(e.t<i.u)return;return i(y.event?y.event(e):e)}}}function he(t,e,i,s,o,n,a,l,h,c){var u,r,p,_,w,m,b,g,v,M,T,P,E,me,A,R,Z,S=e.type;if(e.constructor!==void 0)return null;128&i.__u&&(h=!!(32&i.__u),n=[l=e.__e=i.__e]),(u=y.__b)&&u(e);e:if(typeof S=="function")try{if(g=e.props,v="prototype"in S&&S.prototype.render,M=(u=S.contextType)&&s[u.__c],T=u?M?M.props.value:u.__:s,i.__c?b=(r=e.__c=i.__c).__=r.__E:(v?e.__c=r=new S(g,T):(e.__c=r=new D(g,T),r.constructor=S,r.render=at),M&&M.sub(r),r.state||(r.state={}),r.__n=s,p=r.__d=!0,r.__h=[],r._sb=[]),v&&r.__s==null&&(r.__s=r.state),v&&S.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=C({},r.__s)),C(r.__s,S.getDerivedStateFromProps(g,r.__s))),_=r.props,w=r.state,r.__v=e,p)v&&S.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),v&&r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(v&&S.getDerivedStateFromProps==null&&g!==_&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(g,T),e.__v==i.__v||!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(g,r.__s,T)===!1){for(e.__v!=i.__v&&(r.props=g,r.state=r.__s,r.__d=!1),e.__e=i.__e,e.__k=i.__k,e.__k.some(function($){$&&($.__=e)}),P=0;P<r._sb.length;P++)r.__h.push(r._sb[P]);r._sb=[],r.__h.length&&a.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(g,r.__s,T),v&&r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(_,w,m)})}if(r.context=T,r.props=g,r.__P=t,r.__e=!1,E=y.__r,me=0,v){for(r.state=r.__s,r.__d=!1,E&&E(e),u=r.render(r.props,r.state,r.context),A=0;A<r._sb.length;A++)r.__h.push(r._sb[A]);r._sb=[]}else do r.__d=!1,E&&E(e),u=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++me<25);r.state=r.__s,r.getChildContext!=null&&(s=C(C({},s),r.getChildContext())),v&&!p&&r.getSnapshotBeforeUpdate!=null&&(m=r.getSnapshotBeforeUpdate(_,w)),R=u,u!=null&&u.type===K&&u.key==null&&(R=Be(u.props.children)),l=Ge(t,X(R)?R:[R],e,i,s,o,n,a,l,h,c),r.base=e.__e,e.__u&=-161,r.__h.length&&a.push(r),b&&(r.__E=r.__=null)}catch($){if(e.__v=null,h||n!=null)if($.then){for(e.__u|=h?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;n[n.indexOf(l)]=null,e.__e=l}else{for(Z=n.length;Z--;)de(n[Z]);se(e)}else e.__e=i.__e,e.__k=i.__k,$.then||se(e);y.__e($,e,i)}else n==null&&e.__v==i.__v?(e.__k=i.__k,e.__e=i.__e):l=e.__e=rt(i.__e,e,i,s,o,n,a,h,c);return(u=y.diffed)&&u(e),128&e.__u?void 0:l}function se(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(se)}function qe(t,e,i){for(var s=0;s<i.length;s++)pe(i[s],i[++s],i[++s]);y.__c&&y.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(n){n.call(o)})}catch(n){y.__e(n,o.__v)}})}function Be(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:X(t)?t.map(Be):C({},t)}function rt(t,e,i,s,o,n,a,l,h){var c,u,r,p,_,w,m,b=i.props||O,g=e.props,v=e.type;if(v=="svg"?o="http://www.w3.org/2000/svg":v=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),n!=null){for(c=0;c<n.length;c++)if((_=n[c])&&"setAttribute"in _==!!v&&(v?_.localName==v:_.nodeType==3)){t=_,n[c]=null;break}}if(t==null){if(v==null)return document.createTextNode(g);t=document.createElementNS(o,v,g.is&&g),l&&(y.__m&&y.__m(e,n),l=!1),n=null}if(v==null)b===g||l&&t.data==g||(t.data=g);else{if(n=n&&j.call(t.childNodes),!l&&n!=null)for(b={},c=0;c<t.attributes.length;c++)b[(_=t.attributes[c]).name]=_.value;for(c in b)if(_=b[c],c!="children"){if(c=="dangerouslySetInnerHTML")r=_;else if(!(c in g)){if(c=="value"&&"defaultValue"in g||c=="checked"&&"defaultChecked"in g)continue;F(t,c,null,_,o)}}for(c in g)_=g[c],c=="children"?p=_:c=="dangerouslySetInnerHTML"?u=_:c=="value"?w=_:c=="checked"?m=_:l&&typeof _!="function"||b[c]===_||F(t,c,_,b[c],o);if(u)l||r&&(u.__html==r.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(r&&(t.innerHTML=""),Ge(e.type=="template"?t.content:t,X(p)?p:[p],e,i,s,v=="foreignObject"?"http://www.w3.org/1999/xhtml":o,n,a,n?n[0]:i.__k&&H(i,0),l,h),n!=null)for(c=n.length;c--;)de(n[c]);l||(c="value",v=="progress"&&w==null?t.removeAttribute("value"):w!=null&&(w!==t[c]||v=="progress"&&!w||v=="option"&&w!=b[c])&&F(t,c,w,b[c],o),c="checked",m!=null&&m!=t[c]&&F(t,c,m,b[c],o))}return t}function pe(t,e,i){try{if(typeof t=="function"){var s=typeof t.__u=="function";s&&t.__u(),s&&e==null||(t.__u=t(e))}else t.current=e}catch(o){y.__e(o,i)}}function je(t,e,i){var s,o;if(y.unmount&&y.unmount(t),(s=t.ref)&&(s.current&&s.current!=t.__e||pe(s,null,e)),(s=t.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(n){y.__e(n,e)}s.base=s.__P=null}if(s=t.__k)for(o=0;o<s.length;o++)s[o]&&je(s[o],e,i||typeof t.type!="function");i||de(t.__e),t.__c=t.__=t.__e=void 0}function at(t,e,i){return this.constructor(t,i)}function I(t,e,i){var s,o,n,a;e==document&&(e=document.documentElement),y.__&&y.__(t,e),o=(s=!1)?null:e.__k,n=[],a=[],he(e,t=e.__k=st(K,null,[t]),o||O,O,e.namespaceURI,o?null:e.firstChild?j.call(e.childNodes):null,n,o?o.__e:e.firstChild,s,a),qe(n,t,a)}j=De.slice,y={__e:function(t,e,i,s){for(var o,n,a;e=e.__;)if((o=e.__c)&&!o.__)try{if((n=o.constructor)&&n.getDerivedStateFromError!=null&&(o.setState(n.getDerivedStateFromError(t)),a=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,s||{}),a=o.__d),a)return o.__E=o}catch(l){t=l}throw t}},We=0,D.prototype.setState=function(t,e){var i;i=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=C({},this.state),typeof t=="function"&&(t=t(C({},i),this.props)),t&&C(i,t),t!=null&&this.__v&&(e&&this._sb.push(e),be(this))},D.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),be(this))},D.prototype.render=K,N=[],Ae=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fe=function(t,e){return t.__v.__b-e.__v.__b},G.__r=0,Ve=/(PointerCapture)$|Capture$/i,ce=0,te=xe(!1),ie=xe(!0);var lt=0;function d(t,e,i,s,o,n){e||(e={});var a,l,h=e;if("ref"in h)for(l in h={},e)l=="ref"?a=e[l]:h[l]=e[l];var c={type:t,props:h,key:i,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--lt,__i:-1,__u:0,__source:o,__self:n};if(typeof t=="function"&&(a=t.defaultProps))for(l in a)h[l]===void 0&&(h[l]=a[l]);return y.vnode&&y.vnode(c),c}const Xe=t=>{const{children:e,orientation:i="horizontal"}=t;return d("div",{className:`deck-widget-button-group ${i}`,children:e})},oe=t=>{const{className:e="",label:i,onClick:s,children:o}=t;return d("button",{className:`deck-widget-icon-button ${e}`,type:"button",onClick:s,title:i,children:o||d("div",{className:"deck-widget-icon"})})};class ct extends f{constructor(e={}){super(e),this.className="deck-widget-zoom",this.placement="top-left",this.viewports={},this.setProps(this.props)}setProps(e){this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e)}onRenderHTML(e){const i=d(Xe,{orientation:this.props.orientation,children:[d(oe,{onClick:()=>this.handleZoomIn(),label:this.props.zoomInLabel,className:"deck-widget-zoom-in"}),d(oe,{onClick:()=>this.handleZoomOut(),label:this.props.zoomOutLabel,className:"deck-widget-zoom-out"})]});I(i,e)}onViewportChange(e){this.viewports[e.id]=e}handleZoom(e,i){const s=this.viewId||e?.id||"default-view",o={...e,zoom:i};this.props.transitionDuration>0&&(o.transitionDuration=this.props.transitionDuration,o.transitionInterpolator="latitude"in o?new le:new ae({transitionProps:["zoom"]})),this.setViewState(s,o)}handleZoomIn(){for(const e of Object.values(this.viewports))this.handleZoom(e,e.zoom+1)}handleZoomOut(){for(const e of Object.values(this.viewports))this.handleZoom(e,e.zoom-1)}setViewState(e,i){this.deck._onViewStateChange({viewId:e,viewState:i,interactionState:{}})}}ct.defaultProps={...f.defaultProps,id:"zoom",placement:"top-left",orientation:"vertical",transitionDuration:200,zoomInLabel:"Zoom In",zoomOutLabel:"Zoom Out",viewId:null};const L=t=>{const{className:e="",label:i,onClick:s,children:o}=t;return d("div",{className:"deck-widget-button",children:d("button",{className:`deck-widget-icon-button ${e}`,type:"button",onClick:s,title:i,children:o||d("div",{className:"deck-widget-icon"})})})};class dt extends f{constructor(e={}){super(e),this.className="deck-widget-reset-view",this.placement="top-left",this.setProps(this.props)}setProps(e){this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e)}onRenderHTML(e){I(d(L,{className:"deck-widget-reset-focus",label:this.props.label,onClick:this.handleClick.bind(this)}),e)}handleClick(){const e=this.props.initialViewState||this.deck?.props.initialViewState;this.setViewState(e)}setViewState(e){const i=this.props.viewId||"default-view",s={...i!=="default-view"?e?.[i]:e};this.deck._onViewStateChange({viewId:i,viewState:s,interactionState:{}})}}dt.defaultProps={...f.defaultProps,id:"reset-view",placement:"top-left",label:"Reset View",initialViewState:void 0,viewId:null};class ht extends f{constructor(e={}){super(e),this.className="deck-widget-gimbal",this.placement="top-left",this.viewports={},this.setProps(this.props)}setProps(e){this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e)}onRenderHTML(e){const i=this.viewId||Object.values(this.viewports)[0]?.id||"default-view",s=this.viewports[i],{rotationOrbit:o,rotationX:n}=this.getNormalizedRotation(s),a=d("div",{className:"deck-widget-button",style:{perspective:100,pointerEvents:"auto"},children:d("button",{type:"button",onClick:()=>{for(const l of Object.values(this.viewports))this.resetOrbitView(l)},title:this.props.label,style:{position:"relative",width:26,height:26},children:[d("svg",{className:"gimbal-outer-ring",width:"100%",height:"100%",viewBox:"0 0 26 26",style:{position:"absolute",top:0,left:0,transform:`rotateY(${o}deg)`},children:d("circle",{cx:"13",cy:"13",r:"10",stroke:"var(--icon-gimbal-outer-color, rgb(68, 92, 204))",strokeWidth:this.props.strokeWidth,fill:"none"})}),d("svg",{className:"gimbal-inner-ring",width:"100%",height:"100%",viewBox:"0 0 26 26",style:{position:"absolute",top:0,left:0,transform:`rotateX(${n}deg)`},children:d("circle",{cx:"13",cy:"13",r:"7",stroke:"var(--icon-gimbal-inner-color, rgb(240, 92, 68))",strokeWidth:this.props.strokeWidth,fill:"none"})})]})});I(a,e)}onViewportChange(e){this.viewports[e.id]=e,this.updateHTML()}resetOrbitView(e){const i=this.getViewId(e),s=this.getViewState(i);if("rotationOrbit"in s||"rotationX"in s){const o={...s,rotationOrbit:0,rotationX:0,transitionDuration:this.props.transitionDuration,transitionInterpolator:new ae({transitionProps:["rotationOrbit","rotationX"]})};this.deck._onViewStateChange({viewId:i,viewState:o,interactionState:{}})}}getNormalizedRotation(e){const i=this.getViewState(this.getViewId(e)),[s,o]=this.getRotation(i),n=ke(s),a=ke(o);return{rotationOrbit:n,rotationX:a}}getRotation(e){return e&&("rotationOrbit"in e||"rotationX"in e)?[-(e.rotationOrbit||0),e.rotationX||0]:[0,0]}getViewId(e){return this.viewId||e?.id||"OrbitView"}getViewState(e){const i=this.getViewManager();return e&&i.getViewState(e)||i.viewState}getViewManager(){const e=this.deck?.viewManager;if(!e)throw new Error("wigdet must be added to a deck instance");return e}}ht.defaultProps={...f.defaultProps,id:"gimbal",placement:"top-left",viewId:null,label:"Gimbal",strokeWidth:1.5,transitionDuration:200};function ke(t){let e=((t+180)%360+360)%360-180;const i=10,s=e-90;return Math.abs(s)<i&&(s<i?e=90+i:s>-i&&(e=90-i)),e}class pt extends f{constructor(e={}){super(e),this.className="deck-widget-compass",this.placement="top-left",this.viewports={},this.setProps(this.props)}setProps(e){this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e)}onRenderHTML(e){const i=this.viewId||Object.values(this.viewports)[0]?.id||"default-view",s=this.viewports[i],[o,n]=this.getRotation(s),a=d("div",{className:"deck-widget-button",style:{perspective:100},children:d("button",{type:"button",onClick:()=>{for(const l of Object.values(this.viewports))this.handleCompassReset(l)},title:this.props.label,style:{transform:`rotateX(${n}deg)`},children:d("svg",{fill:"none",width:"100%",height:"100%",viewBox:"0 0 26 26",children:d("g",{transform:`rotate(${o},13,13)`,children:[d("path",{d:"M10 13.0001L12.9999 5L15.9997 13.0001H10Z",fill:"var(--icon-compass-north-color, rgb(240, 92, 68))"}),d("path",{d:"M16.0002 12.9999L13.0004 21L10.0005 12.9999H16.0002Z",fill:"var(--icon-compass-south-color, rgb(204, 204, 204))"})]})})})});I(a,e)}onViewportChange(e){e.equals(this.viewports[e.id])||(this.viewports[e.id]=e,this.updateHTML())}getRotation(e){return e instanceof ge?[-e.bearing,e.pitch]:e instanceof tt?[0,Math.max(-80,Math.min(80,e.latitude))]:[0,0]}handleCompassReset(e){const i=this.viewId||e.id||"default-view";if(e instanceof ge){const s={...e,bearing:0,...this.getRotation(e)[0]===0?{pitch:0}:{},transitionDuration:this.props.transitionDuration,transitionInterpolator:new le};this.deck._onViewStateChange({viewId:i,viewState:s,interactionState:{}})}}}pt.defaultProps={...f.defaultProps,id:"compass",placement:"top-left",viewId:null,label:"Reset Compass",transitionDuration:200};class ut extends f{constructor(e={}){super(e),this.className="deck-widget-scale",this.placement="bottom-left",this.scaleWidth=10,this.scaleValue=0,this.scaleText="",this.setProps(this.props)}setProps(e){this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e)}onRenderHTML(e){const s=50+this.scaleWidth,o=10;I(d("svg",{className:"deck-widget-scale",width:s,height:30,style:{overflow:"visible",background:"transparent"},onClick:this.handleClick.bind(this),children:[d("text",{x:55,y:"10",textAnchor:"end",alignmentBaseline:"middle",style:{fontSize:"16px",fill:"black",fontWeight:"bold",fontFamily:"sans-serif"},children:this.scaleText}),d("line",{x1:50,y1:"15",x2:50+this.scaleWidth,y2:"15",stroke:"black",strokeWidth:"6"}),d("line",{x1:50,y1:"15",x2:50,y2:15-o,stroke:"black",strokeWidth:"6"}),d("line",{x1:50+this.scaleWidth,y1:"15",x2:50+this.scaleWidth,y2:15-o,stroke:"black",strokeWidth:"6"})]}),e)}onViewportChange(e){if(!("latitude"in e))return;const{latitude:i,zoom:s}=e,o=_t(i,s),{candidate:n,candidatePixels:a}=ft(o);this.scaleValue=n,this.scaleWidth=a,n>=1e3?this.scaleText=`${(n/1e3).toFixed(1)} km`:this.scaleText=`${n} m`,this.updateHTML()}handleClick(){}}ut.defaultProps={...f.defaultProps,id:"scale",placement:"bottom-left",label:"Scale",viewId:null};function _t(t,e){return 40075016686e-3*Math.cos(t*Math.PI/180)/Math.pow(2,e+8)}function ft(t){const o=150*t,n=Math.floor(Math.log10(o)),a=Math.pow(10,n),l=[1,2,5];let h=l[0]*a,c=h/t;for(let u=0;u<l.length;u++){const r=l[u]*a,p=r/t;if(p>=100&&p<=200){h=r,c=p;break}if(p>200){h=u>0?l[u-1]*a:r,c=h/t;break}u===l.length-1&&p<100&&(h=l[0]*a*10,c=h/t)}return{candidate:h,candidatePixels:c}}var W,x,Y,Ie,z=0,Ke=[],k=y,Me=k.__b,Te=k.__r,Pe=k.diffed,Se=k.__c,Ce=k.unmount,Le=k.__;function ue(t,e){k.__h&&k.__h(x,t,z||e),z=0;var i=x.__H||(x.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({}),i.__[t]}function q(t){return z=1,mt(Je,t)}function mt(t,e,i){var s=ue(W++,2);if(s.t=t,!s.__c&&(s.__=[Je(void 0,e),function(l){var h=s.__N?s.__N[0]:s.__[0],c=s.t(h,l);h!==c&&(s.__N=[c,s.__[1]],s.__c.setState({}))}],s.__c=x,!x.__f)){var o=function(l,h,c){if(!s.__c.__H)return!0;var u=s.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!n||n.call(this,l,h,c);var r=s.__c.props!==l;return u.forEach(function(p){if(p.__N){var _=p.__[0];p.__=p.__N,p.__N=void 0,_!==p.__[0]&&(r=!0)}}),n&&n.call(this,l,h,c)||r};x.__f=!0;var n=x.shouldComponentUpdate,a=x.componentWillUpdate;x.componentWillUpdate=function(l,h,c){if(this.__e){var u=n;n=void 0,o(l,h,c),n=u}a&&a.call(this,l,h,c)},x.shouldComponentUpdate=o}return s.__N||s.__}function Ze(t,e){var i=ue(W++,3);!k.__s&&Ye(i.__H,e)&&(i.__=t,i.u=e,x.__H.__h.push(i))}function B(t){return z=5,gt(function(){return{current:t}},[])}function gt(t,e){var i=ue(W++,7);return Ye(i.__H,e)&&(i.__=t(),i.__H=e,i.__h=t),i.__}function vt(){for(var t;t=Ke.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(U),t.__H.__h.forEach(ne),t.__H.__h=[]}catch(e){t.__H.__h=[],k.__e(e,t.__v)}}k.__b=function(t){x=null,Me&&Me(t)},k.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Le&&Le(t,e)},k.__r=function(t){Te&&Te(t),W=0;var e=(x=t.__c).__H;e&&(Y===x?(e.__h=[],x.__h=[],e.__.forEach(function(i){i.__N&&(i.__=i.__N),i.u=i.__N=void 0})):(e.__h.forEach(U),e.__h.forEach(ne),e.__h=[],W=0)),Y=x},k.diffed=function(t){Pe&&Pe(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ke.push(e)!==1&&Ie===k.requestAnimationFrame||((Ie=k.requestAnimationFrame)||wt)(vt)),e.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.u=void 0})),Y=x=null},k.__c=function(t,e){e.some(function(i){try{i.__h.forEach(U),i.__h=i.__h.filter(function(s){return!s.__||ne(s)})}catch(s){e.some(function(o){o.__h&&(o.__h=[])}),e=[],k.__e(s,i.__v)}}),Se&&Se(t,e)},k.unmount=function(t){Ce&&Ce(t);var e,i=t.__c;i&&i.__H&&(i.__H.__.forEach(function(s){try{U(s)}catch(o){e=o}}),i.__H=void 0,e&&k.__e(e,i.__v))};var Ne=typeof requestAnimationFrame=="function";function wt(t){var e,i=function(){clearTimeout(s),Ne&&cancelAnimationFrame(e),setTimeout(t)},s=setTimeout(i,35);Ne&&(e=requestAnimationFrame(i))}function U(t){var e=x,i=t.__c;typeof i=="function"&&(t.__c=void 0,i()),x=e}function ne(t){var e=x;t.__c=t.__(),x=e}function Ye(t,e){return!t||t.length!==e.length||e.some(function(i,s){return i!==t[s]})}function Je(t,e){return typeof e=="function"?e(t):e}const bt=t=>{const[e,i]=q(!1),s=B(null),o=()=>i(!e),n=l=>{s.current&&!s.current.contains(l.target)&&i(!1)};Ze(()=>(document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}),[]);const a=l=>{t.onSelect(l),i(!1)};return d("div",{className:"dropdown-container",ref:s,style:{position:"relative",display:"inline-block",...t.style},children:[d("button",{onClick:o,style:{width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #ccc",borderRadius:"4px",background:"#fff",cursor:"pointer",padding:0},children:"▼"}),e&&d("ul",{style:{position:"absolute",top:"100%",right:"100%",background:"#fff",border:"1px solid #ccc",borderRadius:"4px",listStyle:"none",padding:"4px 0",margin:0,zIndex:1e3,minWidth:"200px"},children:t.menuItems.map(l=>d("li",{onClick:()=>a(l),style:{padding:"4px 8px",cursor:"pointer",whiteSpace:"nowrap"},children:l},l))})]})},yt="current",$e="deck-geocoder-history";class xt{constructor(e){this.addressText="",this.errorText="",this.addressHistory=[],this.props={maxEntries:5,...e},this.addressHistory=this.loadPreviousAddresses()}async geocode(e,i,s){this.errorText="",this.addressText=i;try{const o=await e.geocode(i,s);if(o)return this.storeAddress(this.addressText),o;this.errorText="Invalid address"}catch(o){this.errorText=`${o.message}`}return null}loadPreviousAddresses(){try{const e=window.localStorage.getItem($e),i=e&&JSON.parse(e);return Array.isArray(i)?i.filter(o=>typeof o=="string"):[]}catch{}return[]}storeAddress(e){const i=e.trim();if(!i||i===yt)return;const s=[i,...this.addressHistory.filter(o=>o!==i)];this.addressHistory=s.slice(0,this.props.maxEntries);try{window.localStorage.setItem($e,JSON.stringify(this.addressHistory))}catch{}}}const kt="https://maps.googleapis.com/maps/api/geocode/json",It="https://api.mapbox.com/geocoding/v5/mapbox.places",Mt="https://api.opencagedata.com/geocode/v1/json",Tt={name:"google",requiresApiKey:!0,async geocode(t,e){const i=encodeURIComponent(t),s=await _e(`${kt}?address=${i}&key=${e}`);if(s.status==="OK"){const o=s.results.length>0&&s.results[0].geometry.location;return o?{longitude:o.lng,latitude:o.lat}:null}else throw new Error(`Google Geocoder failed: ${s.status}`)}},Pt={name:"google",requiresApiKey:!0,async geocode(t,e){const i=encodeURIComponent(t),s=await _e(`${It}/${i}.json?access_token=${e}`);if(Array.isArray(s.features)&&s.features.length>0){const o=s.features[0].center;if(Array.isArray(o)&&o.length>=2)return{longitude:o[0],latitude:o[1]}}return null}},St={name:"opencage",requiresApiKey:!0,async geocode(t,e){const i=encodeURIComponent(t),s=await _e(`${Mt}?q=${i}&key=${e}`);if(Array.isArray(s.results)&&s.results.length>0){const o=s.results[0].geometry;return{longitude:o.lng,latitude:o.lat}}return null}},Ct={name:"current",requiresApiKey:!1,async geocode(){if(!navigator.geolocation)throw new Error("Geolocation not supported");return new Promise((t,e)=>{navigator.geolocation.getCurrentPosition(i=>{const{longitude:s,latitude:o}=i.coords;t({longitude:s,latitude:o})},i=>e(new Error(i.message)))})}};async function _e(t){let e;try{e=await fetch(t)}catch(s){throw new Error(`CORS error? ${s}. ${t}: `)}if(!e.ok)throw new Error(`${e.statusText}. ${t}: `);const i=await e.json();if(!i)throw new Error(`No data returned. ${t}`);return i}const fe={name:"coordinates",requiresApiKey:!1,placeholderLocation:"-122.45, 37.8 or 37°48'N, 122°27'W",async geocode(t){return Lt(t)||null}};function Lt(t){t=t.trim();const e=t.split(/[,;]/).map(o=>o.trim());if(e.length<2)return null;const i=He(e[0]),s=He(e[1]);return i===null||s===null?null:Math.abs(i)>90&&Math.abs(s)<=90?{longitude:i,latitude:s}:Math.abs(s)>90&&Math.abs(i)<=90?{longitude:s,latitude:i}:{latitude:i,longitude:s}}function He(t){if(t=t.trim(),t.includes("°")||t.includes("'")||t.includes('"')){const s=Nt(t);return isNaN(s)?null:s}let e=1;/[SW]/i.test(t)&&(e=-1),t=t.replace(/[NSEW]/gi,"");const i=parseFloat(t);return isNaN(i)?null:e*i}function Nt(t){const e=/(\d+)[°d]\s*(\d+)?['′m]?\s*(\d+(?:\.\d+)?)?[\"″s]?\s*([NSEW])?/i,i=t.match(e);if(!i)return NaN;const s=parseFloat(i[1])||0,o=parseFloat(i[2])||0,n=parseFloat(i[3])||0,a=i[4]||"";let l=s+o/60+n/3600;return/[SW]/i.test(a)&&(l=-l),l}const Ee="current";class $t extends f{constructor(e={}){super(e),this.className="deck-widget-geocoder",this.placement="top-left",this.geocodeHistory=new xt({}),this.addressText="",this.geocoder=fe,this.setInput=i=>{this.addressText=i},this.handleKeyPress=i=>{i.key==="Enter"&&this.handleSubmit()},this.handleSelect=i=>{this.setInput(i),this.handleSubmit()},this.handleSubmit=()=>{this.geocode(this.addressText)},this.geocode=async i=>{const o=this.props._geolocation&&i===Ee?Ct:this.geocoder,n=await this.geocodeHistory.geocode(o,this.addressText,this.props.apiKey);n&&this.setViewState(n)},this.viewports={},this.setProps(this.props)}setProps(e){if(this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,this.geocoder=Ht(this.props),this.geocoder.requiresApiKey&&!this.props.apiKey)throw new Error(`API key is required for the ${this.geocoder.name} geocoder`);super.setProps(e)}onRenderHTML(e){const i=this.props._geolocation?[Ee,...this.geocodeHistory.addressHistory]:[...this.geocodeHistory.addressHistory];I(d("div",{className:"deck-widget-geocoder",style:{pointerEvents:"auto",display:"flex",alignItems:"center",flexWrap:"wrap"},children:[d("input",{type:"text",placeholder:this.geocoder.placeholderLocation??"Enter address or location",value:this.geocodeHistory.addressText,onInput:s=>this.setInput(s.target?.value||""),onKeyPress:this.handleKeyPress,style:{flex:"1 1 auto",minWidth:"200px",margin:0,padding:"8px",boxSizing:"border-box"}}),d(bt,{menuItems:i,onSelect:this.handleSelect,style:{margin:2,padding:"4px 2px",boxSizing:"border-box"}}),this.geocodeHistory.errorText&&d("div",{className:"error",children:this.geocodeHistory.errorText})]}),e)}setViewState(e){const i=this.props.viewId||e?.id||"default-view",o={...this.viewports[i]||{},...e};this.props.transitionDuration>0&&(o.transitionDuration=this.props.transitionDuration,o.transitionInterpolator="latitude"in o?new le:new ae),this.deck._onViewStateChange({viewId:i,viewState:o,interactionState:{}})}onViewportChange(e){this.viewports[e.id]=e}}$t.defaultProps={...f.defaultProps,id:"geocoder",viewId:null,placement:"top-left",label:"Geocoder",transitionDuration:200,geocoder:"coordinates",customGeocoder:fe,apiKey:"",_geolocation:!1};function Ht(t){switch(t.geocoder){case"google":return Tt;case"mapbox":return Pt;case"opencage":return St;case"coordinates":return fe;case"custom":if(!t.customGeocoder)throw new Error("Custom geocoder is not defined");return t.customGeocoder;default:throw new Error(`Unknown geocoder: ${t.geocoder}`)}}class Et extends f{constructor(e={}){super(e),this.className="deck-widget-fullscreen",this.placement="top-left",this.fullscreen=!1,this.setProps(this.props)}onAdd(){document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this))}onRemove(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this))}onRenderHTML(e){I(d(L,{onClick:()=>{this.handleClick().catch(i=>ee.error(i)())},label:this.fullscreen?this.props.exitLabel:this.props.enterLabel,className:this.fullscreen?"deck-widget-fullscreen-exit":"deck-widget-fullscreen-enter"}),e)}setProps(e){this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e)}getContainer(){return this.props.container||this.deck?.getCanvas()?.parentElement}onFullscreenChange(){const e=this.fullscreen,i=document.fullscreenElement===this.getContainer();e!==i&&(this.fullscreen=!this.fullscreen),this.updateHTML()}async handleClick(){this.fullscreen?await this.exitFullscreen():await this.requestFullscreen(),this.updateHTML()}async requestFullscreen(){const e=this.getContainer();e?.requestFullscreen?await e.requestFullscreen({navigationUI:"hide"}):this.togglePseudoFullscreen()}async exitFullscreen(){document.exitFullscreen?await document.exitFullscreen():this.togglePseudoFullscreen()}togglePseudoFullscreen(){this.getContainer()?.classList.toggle("deck-pseudo-fullscreen")}}Et.defaultProps={...f.defaultProps,id:"fullscreen",placement:"top-left",viewId:null,enterLabel:"Enter Fullscreen",exitLabel:"Exit Fullscreen",container:void 0};class Rt extends f{constructor(e){super(e),this.className="deck-widget-splitter",this.placement="fill"}setProps(e){super.setProps(e)}onRenderHTML(e){e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.margin="0px",I(d(Ot,{orientation:this.props.orientation,initialSplit:this.props.initialSplit,onChange:this.props.onChange,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd}),e)}}Rt.defaultProps={...f.defaultProps,id:"splitter-widget",viewId1:"",viewId2:"",orientation:"vertical",initialSplit:.5,onChange:()=>{},onDragStart:()=>{},onDragEnd:()=>{}};function Ot({orientation:t,initialSplit:e,onChange:i,onDragStart:s,onDragEnd:o}){const[n,a]=q(e),l=B(!1),h=B(null),c=w=>{l.current=!0,s?.(),document.addEventListener("mousemove",u),document.addEventListener("mouseup",r),w.preventDefault()},u=w=>{if(!l.current||!h.current)return;const m=h.current.getBoundingClientRect();let b;t==="vertical"?b=(w.clientX-m.left)/m.width:b=(w.clientY-m.top)/m.height,b=Math.min(Math.max(b,.05),.95),a(b),i?.(b)},r=w=>{l.current&&(l.current=!1,o?.(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",r))},p=t==="vertical"?{position:"absolute",top:0,bottom:0,left:`${n*100}%`,width:"4px",cursor:"col-resize",background:"#ccc",zIndex:10,pointerEvents:"auto",boxShadow:"inset -1px 0 0 white, inset 1px 0 0 white"}:{position:"absolute",left:0,right:0,top:`${n*100}%`,height:"4px",cursor:"row-resize",background:"#ccc",zIndex:10,pointerEvents:"auto",boxShadow:"inset -1px 0 0 white, inset 1px 0 0 white"};return d("div",{ref:h,style:{position:"absolute",top:0,left:0,right:0,bottom:0},children:d("div",{style:p,onMouseDown:c})})}function Wt(t){const[e,i]=q(!1),s=B(null),o=p=>{s.current&&!s.current.contains(p.target)&&i(!1)};Ze(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[s]);const[n,a]=q(t.initialItem),l=p=>{a(p),i(!1),t.onItemSelected(p)},h=()=>i(!e),c=t.menuItems.find(p=>p.value===n),u=t.label||c?.label||"",r=t.icon||c?.icon;return d("div",{style:{position:"relative",display:"inline-block"},ref:s,children:[d(L,{className:t.className,label:u,onClick:h,children:r}),e&&d("div",{className:"deck-widget-icon-menu",children:d(Xe,{orientation:"vertical",children:t.menuItems.map(p=>d(oe,{label:p.label,onClick:()=>l(p.value),children:p.icon},p.value))})})]})}class At extends f{constructor(e={}){super(e),this.className="deck-widget-view-selector",this.placement="top-left",this.handleSelectMode=i=>{this.viewMode=i,this.updateHTML(),this.props.onViewModeChange(i)},this.viewMode=this.props.initialViewMode,this.setProps(this.props)}setProps(e){this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e)}onRenderHTML(e){I(d(Wt,{className:"deck-widget-view-selector",menuItems:Ft.map(i=>({...i,icon:i.icon()})),initialItem:this.props.initialViewMode,onItemSelected:this.handleSelectMode}),e)}}At.defaultProps={...f.defaultProps,id:"view-selector",placement:"top-left",viewId:null,label:"Split View",initialViewMode:"single",onViewModeChange:()=>{}};const J={width:"24px",height:"24px"},Q={single:()=>d("svg",{width:"24",height:"24",style:J,children:d("rect",{x:"4",y:"4",width:"16",height:"16",stroke:"var(--button-icon-hover, rgb(24, 24, 26))",fill:"none",strokeWidth:"2"})}),"split-horizontal":()=>d("svg",{width:"24",height:"24",style:J,children:[d("rect",{x:"4",y:"4",width:"16",height:"7",stroke:"var(--button-icon-hover, rgb(24, 24, 26))",fill:"none",strokeWidth:"2"}),d("rect",{x:"4",y:"13",width:"16",height:"7",stroke:"var(--button-icon-hover, rgb(24, 24, 26))",fill:"none",strokeWidth:"2"})]}),"split-vertical":()=>d("svg",{width:"24",height:"24",style:J,children:[d("rect",{x:"4",y:"4",width:"7",height:"16",stroke:"var(--button-icon-hover, rgb(24, 24, 26))",fill:"none",strokeWidth:"2"}),d("rect",{x:"13",y:"4",width:"7",height:"16",stroke:"var(--button-icon-hover, rgb(24, 24, 26))",fill:"none",strokeWidth:"2"})]})},Ft=[{value:"single",icon:Q.single,label:"Single View"},{value:"split-horizontal",icon:Q["split-horizontal"],label:"Split Horizontal"},{value:"split-vertical",icon:Q["split-vertical"],label:"Split Vertical"}];class Vt extends f{constructor(e){super(e),this.className="deck-widget-info",this.placement="fill",this.setProps(this.props)}setProps(e){this.viewId=e.viewId??this.viewId,super.setProps(e)}onCreateRootElement(){const e=super.onCreateRootElement();return Object.entries({margin:"0px",top:"0px",left:"0px",position:"absolute"}).forEach(([s,o])=>e.style.setProperty(s,o)),e}onViewportChange(e){this.viewport=e,this.updateHTML()}onHover(e){if(this.props.mode==="hover"&&this.props.getTooltip){const i=this.props.getTooltip(e,this);this.setProps({visible:i!==null,...i,style:{zIndex:"1",...i?.style}})}}onClick(e){if(this.props.mode==="click"&&this.props.getTooltip){const i=this.props.getTooltip(e,this);return this.setProps({visible:i!==null,...i}),i!==null}return this.props.onClick?.(this,e)||!1}onAdd({deck:e,viewId:i}){this.deck=e,i?this.viewport=e.getViewports().find(s=>s.id===i):this.viewport=e.getViewports()[0]}onRenderHTML(e){if(!this.viewport)return;const[i,s]=this.props.position,[o,n]=this.viewport.project([i,s]),a=this.props.minOffset||0,l=10,h=8,c=16,u=n>this.viewport.height/2,r=this.props.style&&this.props.style.background||"rgba(255,255,255,0.9)",p=this.props.visible?d("div",{className:"popup-container",style:{position:"absolute",left:0,top:0},children:[d("div",{className:"popup-content",style:{background:r,padding:"10px",position:"relative",...this.props.style},children:this.props.text}),d("div",{className:"popup-arrow",style:{position:"absolute",width:"0px",height:"0px"}})]}):null;I(p,e),requestAnimationFrame(()=>{if(!this.props.visible||!e.firstChild||!this.viewport)return;const _=e.firstChild,w=_.querySelector(".popup-content"),m=_.querySelector(".popup-arrow");if(!w||!m)return;const b=w.getBoundingClientRect(),g=b.width,v=b.height;let M=o-g/2,T;u?T=n-l-h-v:T=n+l+h,M<a&&(M=a),M+g>this.viewport.width-a&&(M=this.viewport.width-a-g),u?T<a&&(T=a):T+v+h>this.viewport.height-a&&(T=this.viewport.height-a-v-h),_.style.left=`${M}px`,_.style.top=`${T}px`,_.style.transform="";let P=o-M-c/2;P=Math.max(P,0),P=Math.min(P,g-c),u?(m.style.left=`${P}px`,m.style.bottom=`-${h}px`,m.style.top="",m.style.borderLeft=`${c/2}px solid transparent`,m.style.borderRight=`${c/2}px solid transparent`,m.style.borderTop=`${h}px solid ${r}`,m.style.borderBottom=""):(m.style.left=`${P}px`,m.style.top=`-${h}px`,m.style.bottom="",m.style.borderLeft=`${c/2}px solid transparent`,m.style.borderRight=`${c/2}px solid transparent`,m.style.borderBottom=`${h}px solid ${r}`,m.style.borderTop="")})}}Vt.defaultProps={...f.defaultProps,id:"info",position:[0,0],text:"",visible:!1,minOffset:0,viewId:null,mode:"hover",getTooltip:void 0,onClick:void 0};const Dt={position:"absolute",top:"100%",left:0,background:"white",border:"1px solid #ccc",borderRadius:"4px",marginTop:"var(--menu-gap, 4px)",zIndex:100},Ut={background:"white",border:"none",padding:"4px",cursor:"pointer",pointerEvents:"auto"},Gt=t=>{const{menuItems:e,onItemSelected:i,position:s,style:o}=t,n={...Dt,...o,left:`${s.x}px`,top:`${s.y}px`};return d("div",{style:n,children:e.map(({key:a,label:l})=>d("button",{style:{...Ut,display:"block"},onClick:h=>i(a),children:l},a))})},zt=2,qt=3;class Bt extends f{constructor(e){super(e),this.className="deck-widget-context-menu",this.placement="fill",this.pickInfo=null,this.pickInfo=null,this.setProps(this.props)}onAdd({deck:e}){const i=document.createElement("div");return i.classList.add("deck-widget","deck-widget-context-menu"),Object.entries({margin:"0px",top:"0px",left:"0px",position:"absolute",pointerEvents:"auto"}).forEach(([o,n])=>i.style.setProperty(o,n)),e.getCanvas()?.addEventListener("click",()=>this.hide()),e.getCanvas()?.addEventListener("contextmenu",o=>this.handleContextMenu(o)),i}onRenderHTML(e){const{visible:i,position:s,menuItems:o}=this.props,n=i&&o.length?d(Gt,{menuItems:o,onItemSelected:a=>this.props.onMenuItemSelected(a,this.pickInfo),position:s,style:{pointerEvents:"auto"}}):null;I(n,e)}handleContextMenu(e){if(e&&(e.button===zt||e.which===qt)){this.pickInfo=this.deck?.pickObject({x:e.clientX,y:e.clientY})||null;const i=this.pickInfo&&this.props.getMenuItems?.(this.pickInfo,this)||[],s=i.length>0;return this.setProps({visible:s,position:{x:e.clientX,y:e.clientY},menuItems:i}),this.updateHTML(),e.preventDefault(),s}return!1}hide(){this.setProps({visible:!1})}}Bt.defaultProps={...f.defaultProps,id:"context",viewId:null,visible:!1,position:{x:0,y:0},getMenuItems:void 0,menuItems:[],onMenuItemSelected:(t,e)=>console.log("Context menu item selected:",t,e)};class jt extends f{constructor(e={}){super(e),this.id="timeline",this.className="deck-widget-timeline",this.placement="bottom-left",this.playing=!1,this.timerId=null,this.handlePlayPause=()=>{this.playing?this.stop():this.start()},this.handleSliderChange=i=>{const s=i.target,o=Number(s.value);this.currentTime=o,this.props.onTimeChange(o),this.updateHTML()},this.tick=()=>{const[i,s]=this.props.timeRange;let o=this.currentTime+this.props.step;o>s&&(o=i),this.currentTime=o,this.props.onTimeChange(o),this.updateHTML(),this.playing&&(this.timerId=window.setTimeout(this.tick,this.props.playInterval))},this.currentTime=this.props.initialTime??this.props.timeRange[0],this.setProps(this.props)}setProps(e){this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e)}onAdd(){this.playing=!1,this.timerId=null}onRemove(){this.stop()}onRenderHTML(e){I(d("div",{style:{display:"flex",alignItems:"center",pointerEvents:"auto"},children:[d(L,{label:this.playing?"Pause":"Play",onClick:this.handlePlayPause,children:d("div",{className:"text",children:this.playing?"⏸":"▶"})}),d("input",{type:"range",className:"timeline-slider",min:this.props.timeRange[0],max:this.props.timeRange[1],step:this.props.step,value:this.currentTime,onInput:this.handleSliderChange})]}),e)}start(){this.playing=!0,this.updateHTML(),this.tick()}stop(){this.playing=!1,this.timerId!==null&&(window.clearTimeout(this.timerId),this.timerId=null),this.updateHTML()}}jt.defaultProps={...f.defaultProps,id:"timeline",placement:"bottom-left",viewId:null,timeRange:[0,100],step:1,initialTime:void 0,onTimeChange:()=>{},playInterval:1e3};class Xt extends f{constructor(e={}){super(e),this.className="deck-widget-screenshot",this.placement="top-left",this.setProps(this.props)}setProps(e){this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e)}onRenderHTML(e){I(d(L,{className:"deck-widget-camera",label:this.props.label,onClick:this.handleClick.bind(this)}),e)}handleClick(){if(this.props.onCapture){this.props.onCapture(this);return}const e=this.captureScreenToDataURL(this.props.imageFormat);e&&this.downloadDataURL(e,this.props.filename)}captureScreenToDataURL(e){return this.deck?.getCanvas()?.toDataURL(e)}downloadDataURL(e,i){const s=document.createElement("a");s.href=e,s.download=i,s.click()}}Xt.defaultProps={...f.defaultProps,id:"screenshot",placement:"top-left",viewId:null,label:"Screenshot",filename:"screenshot.png",imageFormat:"image/png",onCapture:void 0};const ci={"--widget-margin":"12px","--button-size":"28px","--button-corner-radius":"8px","--button-background":"#fff","--button-stroke":"rgba(255, 255, 255, 0.3)","--button-inner-stroke":"unset","--button-shadow":"0px 0px 8px 0px rgba(0, 0, 0, 0.25)","--button-backdrop-filter":"unset","--button-icon-idle":"rgba(97, 97, 102, 1)","--button-icon-hover":"rgba(24, 24, 26, 1)","--button-text":"rgb(24, 24, 26, 1)","--icon-compass-north-color":"rgb(240, 92, 68)","--icon-compass-south-color":"rgb(204, 204, 204)","--menu-gap":"4px"},di={"--widget-margin":"12px","--button-size":"28px","--button-corner-radius":"8px","--button-background":"rgba(18, 18, 20, 1)","--button-stroke":"rgba(18, 18, 20, 0.30)","--button-inner-stroke":"unset","--button-shadow":"0px 0px 8px 0px rgba(0, 0, 0, 0.25)","--button-backdrop-filter":"unset","--button-icon-idle":"rgba(158, 157, 168, 1)","--button-icon-hover":"rgba(215, 214, 229, 1)","--button-text":"rgb(215, 214, 229, 1)","--icon-compass-north-color":"rgb(240, 92, 68)","--icon-compass-south-color":"rgb(200, 199, 209)","--menu-gap":"4px"},Kt={"--widget-margin":"12px","--button-size":"28px","--button-corner-radius":"8px","--button-background":"rgba(255, 255, 255, 0.6)","--button-stroke":"rgba(255, 255, 255, 0.3)","--button-inner-stroke":"1px solid rgba(255, 255, 255, 0.6)","--button-shadow":"0px 0px 8px 0px rgba(0, 0, 0, 0.25), 0px 0px 8px 0px rgba(0, 0, 0, 0.1) inset","--button-backdrop-filter":"blur(4px)","--button-icon-idle":"rgba(97, 97, 102, 1)","--button-icon-hover":"rgba(24, 24, 26, 1)","--button-text":"rgb(24, 24, 26, 1)","--icon-compass-north-color":"rgb(240, 92, 68)","--icon-compass-south-color":"rgb(204, 204, 204)","--menu-gap":"4px"},Zt={"--widget-margin":"12px","--button-size":"28px","--button-corner-radius":"8px","--button-background":"rgba(18, 18, 20, 0.75)","--button-stroke":"rgba(18, 18, 20, 0.30)","--button-inner-stroke":"1px solid rgba(18, 18, 20, 0.75)","--button-shadow":"0px 0px 8px 0px rgba(0, 0, 0, 0.25), 0px 0px 8px 0px rgba(0, 0, 0, 0.1) inset","--button-backdrop-filter":"blur(4px)","--button-icon-idle":"rgba(158, 157, 168, 1)","--button-icon-hover":"rgba(215, 214, 229, 1)","--button-text":"rgb(215, 214, 229, 1)","--icon-compass-north-color":"rgb(240, 92, 68)","--icon-compass-south-color":"rgb(200, 199, 209)","--menu-gap":"4px"};class Yt extends f{constructor(e={}){super(e),this.className="deck-widget-theme",this.placement="top-left",this.themeMode="dark",this.themeMode=this._getInitialThemeMode(),this.setProps(this.props)}setProps(e){const{lightModeTheme:i,darkModeTheme:s}=this.props;switch(this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e),this.themeMode){case"light":e.lightModeTheme&&!ve(e.lightModeTheme,i,1)&&this._setThemeMode("light");break;case"dark":e.darkModeTheme&&!ve(e.darkModeTheme,s,1)&&this._setThemeMode("dark");break;default:ee.warn(`Invalid theme mode ${this.themeMode}`)()}}onRenderHTML(e){const{lightModeLabel:i,darkModeLabel:s}=this.props;I(d(L,{onClick:this._handleClick.bind(this),label:this.themeMode==="dark"?s:i,className:this.themeMode==="dark"?"deck-widget-moon":"deck-widget-sun"}),e)}onAdd(){this._setThemeMode(this.themeMode)}_handleClick(){const e=this.themeMode==="dark"?"light":"dark";this._setThemeMode(e)}_setThemeMode(e){this.themeMode=e;const i=this.rootElement?.closest(".deck-widget-container");if(i){const s=e==="dark"?this.props.darkModeTheme:this.props.lightModeTheme;Qe(i,s);const o=this.themeMode==="dark"?this.props.darkModeLabel:this.props.lightModeLabel;ee.log(1,`Switched theme to ${o}`,s)(),this.updateHTML()}}_getInitialThemeMode(){const{initialThemeMode:e}=this.props;return e==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e}}Yt.defaultProps={...f.defaultProps,id:"theme",placement:"top-left",viewId:null,lightModeLabel:"Light Mode",lightModeTheme:Kt,darkModeLabel:"Dark Mode",darkModeTheme:Zt,initialThemeMode:"auto"};class Jt extends f{constructor(e={}){super(e),this.className="deck-widget-loading",this.placement="top-left",this.loading=!0,this.setProps(this.props)}setProps(e){this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e)}onRenderHTML(e){I(this.loading&&d(L,{className:"deck-widget-spinner",label:this.props.label,onClick:this.handleClick.bind(this)}),e)}onRedraw({layers:e}){const i=e.some(s=>!s.isLoaded);i!==this.loading&&(this.loading=i,this.updateHTML())}handleClick(){}}Jt.defaultProps={...f.defaultProps,id:"loading",placement:"top-left",viewId:null,label:"Loading layer data"};class Qt extends f{constructor(e={}){super(e),this.className="deck-widget-fps",this.placement="top-left",this._lastFps=-1,this.setProps(this.props)}setProps(e){this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,super.setProps(e)}onAdd({}){this._lastFps=this._getFps(),requestAnimationFrame(()=>this._animate())}onRenderHTML(e){const i=this._getFps();I(d(L,{children:d("div",{className:"text",children:["FPS",d("br",{}),i]})}),e)}_animate(){const e=this._getFps();this._lastFps!==e&&(this._lastFps=e,this.updateHTML()),requestAnimationFrame(()=>this._animate())}_getFps(){return Math.round(this.deck?.metrics.fps??0)}}Qt.defaultProps={...f.defaultProps,id:"fps",placement:"top-left",viewId:null};const ei="▶",ti="⬇",re=t=>`${t.name}: ${t.count}`;function Re(t){return t<1e3?`${t.toFixed(2)}ms`:`${(t/1e3).toFixed(2)}s`}function ii(t){return`${(t/1e6).toFixed(1)} MB`}const Oe={count:re,averageTime:t=>`${t.name}: ${Re(t.getAverageTime())}`,totalTime:t=>`${t.name}: ${Re(t.time)}`,fps:t=>`${t.name}: ${Math.round(t.getHz())}fps`,memory:t=>`${t.name}: ${ii(t.count)}`};class si extends f{constructor(e={}){super(e),this.className="deck-widget-stats",this.placement="top-left",this._counter=0,this.collapsed=!0,this._toggleCollapsed=()=>{this.collapsed=!this.collapsed,this.updateHTML()},this._formatters={...Oe},this._resetOnUpdate={...this.props.resetOnUpdate},this._stats=this.props.stats,this.setProps(e)}setProps(e){if(this.placement=e.placement??this.placement,this.viewId=e.viewId??this.viewId,this._stats=this._getStats(),e.formatters)for(const i in e.formatters){const s=e.formatters[i];this._formatters[i]=typeof s=="string"?Oe[s]||re:s}e.resetOnUpdate&&(this._resetOnUpdate={...e.resetOnUpdate}),super.setProps(e)}onAdd(){this._stats=this._getStats(),this.updateHTML()}onRenderHTML(e){const i=this._stats,s=this.collapsed,o=this.props.title||i?.id||"Stats",n=[];!s&&i&&i.forEach(a=>{const l=this._getLines(a);this._resetOnUpdate&&this._resetOnUpdate[a.name]&&a.reset(),l.forEach((h,c)=>{n.push(d("div",{style:{whiteSpace:"pre"},children:h},`${a.name}-${c}`))})}),I(d("div",{className:"deck-widget-stats-container",style:{cursor:"default"},children:[d("div",{className:"deck-widget-stats-header",style:{cursor:"pointer",pointerEvents:"auto"},onClick:this._toggleCollapsed,children:[s?ei:ti," ",o]}),!s&&d("div",{className:"deck-widget-stats-content",children:n})]}),e)}onRedraw(){const e=Math.max(1,this.props.framesPerUpdate||1);this._counter++%e===0&&(this._stats=this._getStats(),this.updateHTML())}_getStats(){switch(this.props.type){case"deck":return this.deck?.stats;case"luma":return Array.from(et.stats.stats.values())[0];case"device":const i=this.deck?.device?.statsManager.stats.values();return i?Array.from(i)[0]:void 0;case"custom":return this.props.stats;default:throw new Error(`Unknown stats type: ${this.props.type}`)}}_getLines(e){return(this._formatters[e.name]||this._formatters[e.type||""]||re)(e).split(`
`)}}si.defaultProps={...f.defaultProps,type:"deck",placement:"top-left",viewId:null,stats:void 0,title:"Stats",framesPerUpdate:1,formatters:{},resetOnUpdate:{},id:"stats"};export{pt as CompassWidget,Zt as DarkGlassTheme,di as DarkTheme,Et as FullscreenWidget,ht as GimbalWidget,Kt as LightGlassTheme,ci as LightTheme,dt as ResetViewWidget,Xt as ScreenshotWidget,ct as ZoomWidget,Xe as _ButtonGroup,Bt as _ContextMenuWidget,fe as _CoordinatesGeocoder,Ct as _CurrentLocationGeocoder,bt as _DropdownMenu,Qt as _FpsWidget,$t as _GeocoderWidget,Tt as _GoogleGeocoder,oe as _GroupedIconButton,L as _IconButton,Wt as _IconMenu,Vt as _InfoWidget,Jt as _LoadingWidget,Pt as _MapboxGeocoder,St as _OpenCageGeocoder,ut as _ScaleWidget,Gt as _SimpleMenu,Rt as _SplitterWidget,si as _StatsWidget,Yt as _ThemeWidget,jt as _TimelineWidget,At as _ViewSelectorWidget};
//# sourceMappingURL=widgets.js.map
