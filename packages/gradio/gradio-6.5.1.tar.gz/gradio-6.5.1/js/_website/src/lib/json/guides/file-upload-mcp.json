{"guide": {"name": "file-upload-mcp", "category": "mcp", "pretty_category": "Mcp", "guide_index": 2, "absolute_index": 64, "pretty_name": "File Upload Mcp", "content": "# The File Upload MCP Server\n\n\n\nIf you've tried to to use a remote Gradio MCP server that takes a file as input (image, video, audio), you've probably run into this error:\n\n<img src=\"https://huggingface.co/datasets/freddyaboulton/bucket/resolve/main/MCPError.png\">\n\nThe reason is that since the Gradio server is hosted on a different machine, any input files must be available via a public URL so that they can downloaded in the remote machine.\n\nThere are many ways to host files on the internet, but they all require adding a manual step to your workflow. In the age of LLM agents, shouldn't we expect them to handle this step for you?\n\nIn this post, we'll show how you can connect your LLM to the \"File Upload\" MCP server so that it can handle the file uploading for you when appropriate!\n\n## Using the File Upload MCP Server\n\nAs of version 5.36.0, Gradio now comes with a built-in MCP server that can upload files to a running Gradio application. In the `View API` page of the server, you should see the following code snippet if any of the tools require file inputs:\n\n<img src=\"https://huggingface.co/datasets/freddyaboulton/bucket/resolve/main/MCPConnectionDocs.png\">\n\nThe command to start the MCP server takes two arguments:\n\n- The URL (or Hugging Face space id) of the gradio application to upload the files to. In this case, `http://127.0.0.1:7860`.\n- The local directory on your computer with which the server is allowed to upload files from (`<UPLOAD_DIRECTORY>`). For security, please make this directory as narrow as possible to prevent unintended file uploads.\n\nAs stated in the image, you need to install [uv](https://docs.astral.sh/uv/getting-started/installation/) (a python package manager that can run python scripts) before connecting from your MCP client. \n\nIf you have gradio installed locally and you don't want to install uv, you can replace the `uvx` command with the path to gradio binary. It should look like this:\n\n```json\n\"upload-files\": {\n    \"command\": \"<absoluate-path-to-gradio>\",\n    \"args\": [\n    \"upload-mcp\",\n    \"http://localhost:7860/\",\n    \"/Users/freddyboulton/Pictures\"\n    ]\n}\n```\n\nAfter connecting to the upload server, your LLM agent will know when to upload files for you automatically!\n\n<img src=\"https://huggingface.co/datasets/freddyaboulton/bucket/resolve/main/Ghibliafy.png\">\n\n## Conclusion\n\nIn this guide, we've covered how you can connect to the Upload File MCP Server so that your agent can upload files before using Gradio MCP servers. Remember to set the `<UPLOAD_DIRECTORY>` as small as possible to prevent unintended file uploads!\n\n", "tags": ["MCP", "TOOL", "LLM", "SERVER", "DOCS"], "spaces": [], "url": "/guides/file-upload-mcp/", "contributor": null}}