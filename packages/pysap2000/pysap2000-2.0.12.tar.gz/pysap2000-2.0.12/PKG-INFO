Metadata-Version: 2.1
Name: pysap2000
Version: 2.0.12
Summary: Python wrapper for SAP2000 structural analysis software API with LangChain AI agent support
Home-page: https://github.com/jiangyao/pysap2000
Author: jiangyao
Author-email: 631488424@qq.com
License: MIT
Platform: UNKNOWN
Classifier: Development Status :: 4 - Beta
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: Microsoft :: Windows
Classifier: Programming Language :: Python :: 3
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE

# PySap2000

[![PyPI version](https://badge.fury.io/py/pysap2000.svg)](https://badge.fury.io/py/pysap2000)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

**PySap2000** æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ SAP2000 ç»“æ„åˆ†æè½¯ä»¶ Python API å°è£…åº“ï¼Œæä¾›é¢å‘å¯¹è±¡çš„æ¥å£å’Œ AI æ™ºèƒ½åŠ©æ‰‹åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ—ï¸ **é¢å‘å¯¹è±¡è®¾è®¡** - æä¾›ç®€æ´ç›´è§‚çš„ API
- ğŸ¤– **AI æ™ºèƒ½åŠ©æ‰‹** - é›†æˆ LangChain Agentï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æ§åˆ¶ SAP2000
- ğŸ“Š **å®Œæ•´åŠŸèƒ½è¦†ç›–** - æ”¯æŒå»ºæ¨¡ã€åˆ†æã€è®¾è®¡ã€ç»“æœæå–ç­‰å…¨æµç¨‹
- ğŸ”’ **å®‰å…¨æ“ä½œ** - ä¿®æ”¹æ“ä½œéœ€ç¡®è®¤ï¼Œæ”¯æŒæ’¤å›åŠŸèƒ½
- ğŸ“š **RAG çŸ¥è¯†åº“** - å†…ç½® SAP2000 API æ–‡æ¡£æœç´¢

## ğŸ“¦ å®‰è£…

### åŸºç¡€å®‰è£…
```bash
pip install pysap2000
```

### å®‰è£… AI Agent åŠŸèƒ½
```bash
pip install pysap2000[agent]
```

### å®‰è£…å…¨éƒ¨åŠŸèƒ½
```bash
pip install pysap2000[all]
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºç¡€ç”¨æ³•

```python
from PySap2000 import Application
from PySap2000.structure_core import Point, Frame
from PySap2000.global_parameters import Units, UnitSystem

# è¿æ¥ SAP2000
with Application() as app:
    # è®¾ç½®å•ä½
    Units.set_present_units(app.model, UnitSystem.KN_M_C)
    
    # åˆ›å»ºèŠ‚ç‚¹
    app.create_object(Point(no=1, x=0, y=0, z=0))
    app.create_object(Point(no=2, x=10, y=0, z=0))
    
    # åˆ›å»ºæ¡†æ¶
    app.create_object(Frame(no=1, start_point=1, end_point=2, section="W14X30"))
    
    # è¿è¡Œåˆ†æ
    app.calculate()
```

### AI æ™ºèƒ½åŠ©æ‰‹

```python
from PySap2000.langchain_agent import SapAgent

# åˆ›å»º Agentï¼ˆéœ€è¦è®¾ç½® DASHSCOPE_API_KEY ç¯å¢ƒå˜é‡ï¼‰
agent = SapAgent(provider="qwen")

# è‡ªç„¶è¯­è¨€æ§åˆ¶
response = agent.chat("æ˜¾ç¤ºæ¨¡å‹ä¸­æ‰€æœ‰æ†ä»¶çš„æˆªé¢ä¿¡æ¯")
print(response)

response = agent.chat("æŠŠä¸Šå¼¦æ†ç»„çš„æˆªé¢æ”¹æˆ H400x200x8x12")
# Agent ä¼šè¯·æ±‚ç¡®è®¤åæ‰§è¡Œä¿®æ”¹
```

## ğŸ“– åŠŸèƒ½æ¨¡å—

| æ¨¡å— | åŠŸèƒ½ |
|------|------|
| `Application` | SAP2000 è¿æ¥å’Œæ¨¡å‹ç®¡ç† |
| `structure_core` | Point, Frame, Material, Section |
| `loading` | LoadPattern, LoadCombination |
| `loads` | PointLoad, FrameDistributedLoad |
| `results` | PointResults, FrameResults |
| `design` | SteelDesign, ConcreteDesign |
| `langchain_agent` | AI æ™ºèƒ½åŠ©æ‰‹ |
| `logger` | æ—¥å¿—ç®¡ç† |
| `config` | é…ç½®ç®¡ç† |
| `utils` | å·¥å…·å‡½æ•°ï¼ˆResult, deprecatedç­‰ï¼‰|

## ğŸ“¥ å¯¼å…¥è¯´æ˜

> **æ³¨æ„**: åŒ…ç›®å½•åä¸º `PySap2000`ï¼ˆå¤§å†™ï¼‰ï¼ŒPyPI åŒ…åä¸º `pysap2000`ï¼ˆå°å†™ï¼‰

```python
# å®‰è£…ï¼ˆå°å†™ï¼‰
pip install pysap2000

# å¯¼å…¥ï¼ˆå¤§å†™ï¼‰
from PySap2000 import Application
from PySap2000.structure_core import Point, Frame
```

### é…ç½®ç®¡ç†

```python
from PySap2000.config import config

# æŸ¥çœ‹/ä¿®æ”¹é…ç½®
config.log_level = "DEBUG"
config.agent.max_history_rounds = 20

# é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®
# export PYSAP_LOG_LEVEL=DEBUG
# export PYSAP_AGENT_MAX_HISTORY=20
```

### æ—¥å¿—ç³»ç»Ÿ

```python
from PySap2000.logger import logger, setup_logger

# ä½¿ç”¨é»˜è®¤æ—¥å¿—å™¨
logger.info("Connected to SAP2000")

# è‡ªå®šä¹‰é…ç½®
setup_logger(level="DEBUG", log_file="pysap2000.log")
```

### æ‰¹é‡æ“ä½œ

```python
from PySap2000.structure_core import Frame

# æ‰¹é‡è®¡ç®—é‡é‡ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
weights = Frame.calculate_weights_batch(model)
total = sum(weights.values())

# æ‰¹é‡åˆ›å»º
frames = [Frame(no=f"F{i}", ...) for i in range(100)]
succeeded, failed = Frame.create_batch(model, frames)
```

## âš™ï¸ ç¯å¢ƒè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windowsï¼ˆSAP2000 ä»…æ”¯æŒ Windowsï¼‰
- **Python**: 3.8+
- **SAP2000**: v19.0+ (éœ€è¦å·²å®‰è£…å¹¶æ¿€æ´»)

## ğŸ”‘ AI Agent é…ç½®

æ”¯æŒå¤šç§ LLM æä¾›å•†ï¼š

```python
# é€šä¹‰åƒé—®ï¼ˆæ¨èï¼‰
agent = SapAgent(provider="qwen")  # éœ€è¦ DASHSCOPE_API_KEY

# DeepSeek
agent = SapAgent(provider="deepseek")  # éœ€è¦ DEEPSEEK_API_KEY

# OpenAI
agent = SapAgent(provider="openai")  # éœ€è¦ OPENAI_API_KEY
```

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“§ è”ç³»

- ä½œè€…: jiangyaoï¼ˆæ±Ÿç‘¶ï¼‰
- é‚®ç®±: 631488424@qq.com
- åšå®¢: https://www.spancore.cn
- GitHub: [pysap2000](https://github.com/jiangyao/pysap2000)


