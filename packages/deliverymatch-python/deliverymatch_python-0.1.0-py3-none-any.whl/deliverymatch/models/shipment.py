from __future__ import annotations

from collections.abc import Mapping
from typing import Any, TypeVar, cast

from attrs import define as _attrs_define
from attrs import field as _attrs_field

from ..models.status import Status
from ..types import UNSET, Unset

T = TypeVar("T", bound="Shipment")


@_attrs_define
class Shipment:
    """General information about the shipment

    Attributes:
        status (Status | Unset): Shipment status
        order_number (str | Unset): Internal order number for this shipment Example: 10000000123.
        reference (str | Unset): A (second) internal reference number. If no reference if given, a reference number is
            generated by DeliveryMatch
        language (str | Unset): Language used for the descriptions(ISO 3166-1 alpha-2) Example: NL.
        currency (str | Unset): Currency used for the costs Example: EUR.
        first_pickup_date (str | Unset): First available pickup date Example: 2022-09-04.
        first_pickup_date_time (str | Unset): First available pickup date and time Example: 2022-09-04 12:00.
        pickup_time (str | Unset): The time your shipment is ready to be picked up by the carrier. (Only in case a
            pickup is booked at the carrier) Example: 17:00.
        carrier (list[Any] | str | Unset): To force DeliveryMatch to a specific carrier a carrier id can be
            communicated. The carrier must be configured in the system. Example: "123" or in case of multiple carriers:
            ["123", "321].
        service (list[Any] | str | Unset): Can be used to force DeliveryMatch to a specific carrier-service combination.
            The service must be configured in the system.  Example: "123" or in case of multiple services: ["123", "321"].
        dropoff_id (str | Unset): Can be used to directly select a specific dropoff location. Can only be used if a
            carrier has been specified with a carrier id.  Example: 123456.
        config (int | Unset): Can be used to force DeliveryMatch to a specific carrier configuration. The configruation
            id must exist in the system and can be found in the specific carrier configuration advanced settings. Example:
            123.
        delivery_time_from (str | Unset): Start time of the delivery time frame. This will be forwarded to the carrier,
            if possible Example: 12:00.
        delivery_date (str | Unset): Date of the planned delivery Example: 2022-09-04.
        delivery_time_to (str | Unset): End time of the delivery time frame. This will be forwarded to the carrier, if
            possible. If a deliveryTimeFrom is given but no deliveryTimeTo, it will be defaulted to +1 hour after the
            deliveryTimeFrom Example: 17:00.
        inbound (bool | Unset): Set to true if shipment is inbound (returns) Default: False.
        incoterm (str | Unset): Incoterm for this shipment. Will be forwarded to a selection of carriers and printed on
            CMR Example: EXW.
        note (str | Unset): Transport note for the carrier Example: Please leave behind gate.
        getdiscounts (bool | Unset): Request the discount rules for each carrier setup Default: False.
        instructions (str | Unset): Transport instructions for the carrier
        printerchannel (str | Unset): Printer channel code to specify a printer channel setup for this shipment. (Can
            only be used in combination with PrintNode)
        label_sequence (int | Unset): Sequence number of the package/label, used if one label per request is needed.
            Only works if combined with the action ‘print’.

            For example: if you want to add a second label to the shipment, fill this field with value `2`. You will then
            print only label two.

            - You will need to send an individual request per label sequence number to add a new label and print it.
            - The amount of total labels does not yet need to be known, only once it is definitely the last label sequence,
            `endOfShipment` must be set to `true`.

            **This is only for very specific usecases and absolutely not applicable for every situation. Contact
            DeliveryMatch for more information.**
        end_of_shipment (bool | Unset): Used in combination with ‘labelSequence’. If set to true, the requested amount
            of labels is used as the final amount of labels for the shipment.
            This value only needs to be set to `true` if this is the last label you are adding to the shipment.

            **This is only for very specific usecases and absolutely not applicable for every situation. Contact
            DeliveryMatch for more information.** Default: False.
        batch (str | Unset): Used for defining a shipping/production batch. Example: abc-1234-def.
        additional_documents (bool | Unset): Option to send own documents to carrier. (If no document added
            DeliveyrMatch will use their own. For example Commercial Invoice) Default: False.
        bonded (bool | Unset): Used for defining a bonded shipment Example: true.
    """

    status: Status | Unset = UNSET
    order_number: str | Unset = UNSET
    reference: str | Unset = UNSET
    language: str | Unset = UNSET
    currency: str | Unset = UNSET
    first_pickup_date: str | Unset = UNSET
    first_pickup_date_time: str | Unset = UNSET
    pickup_time: str | Unset = UNSET
    carrier: list[Any] | str | Unset = UNSET
    service: list[Any] | str | Unset = UNSET
    dropoff_id: str | Unset = UNSET
    config: int | Unset = UNSET
    delivery_time_from: str | Unset = UNSET
    delivery_date: str | Unset = UNSET
    delivery_time_to: str | Unset = UNSET
    inbound: bool | Unset = False
    incoterm: str | Unset = UNSET
    note: str | Unset = UNSET
    getdiscounts: bool | Unset = False
    instructions: str | Unset = UNSET
    printerchannel: str | Unset = UNSET
    label_sequence: int | Unset = UNSET
    end_of_shipment: bool | Unset = False
    batch: str | Unset = UNSET
    additional_documents: bool | Unset = False
    bonded: bool | Unset = UNSET
    additional_properties: dict[str, Any] = _attrs_field(init=False, factory=dict)

    def to_dict(self) -> dict[str, Any]:
        status: str | Unset = UNSET
        if not isinstance(self.status, Unset):
            status = self.status.value

        order_number = self.order_number

        reference = self.reference

        language = self.language

        currency = self.currency

        first_pickup_date = self.first_pickup_date

        first_pickup_date_time = self.first_pickup_date_time

        pickup_time = self.pickup_time

        carrier: list[Any] | str | Unset
        if isinstance(self.carrier, Unset):
            carrier = UNSET
        elif isinstance(self.carrier, list):
            carrier = self.carrier

        else:
            carrier = self.carrier

        service: list[Any] | str | Unset
        if isinstance(self.service, Unset):
            service = UNSET
        elif isinstance(self.service, list):
            service = self.service

        else:
            service = self.service

        dropoff_id = self.dropoff_id

        config = self.config

        delivery_time_from = self.delivery_time_from

        delivery_date = self.delivery_date

        delivery_time_to = self.delivery_time_to

        inbound = self.inbound

        incoterm = self.incoterm

        note = self.note

        getdiscounts = self.getdiscounts

        instructions = self.instructions

        printerchannel = self.printerchannel

        label_sequence = self.label_sequence

        end_of_shipment = self.end_of_shipment

        batch = self.batch

        additional_documents = self.additional_documents

        bonded = self.bonded

        field_dict: dict[str, Any] = {}
        field_dict.update(self.additional_properties)
        field_dict.update({})
        if status is not UNSET:
            field_dict["status"] = status
        if order_number is not UNSET:
            field_dict["orderNumber"] = order_number
        if reference is not UNSET:
            field_dict["reference"] = reference
        if language is not UNSET:
            field_dict["language"] = language
        if currency is not UNSET:
            field_dict["currency"] = currency
        if first_pickup_date is not UNSET:
            field_dict["firstPickupDate"] = first_pickup_date
        if first_pickup_date_time is not UNSET:
            field_dict["firstPickupDateTime"] = first_pickup_date_time
        if pickup_time is not UNSET:
            field_dict["pickupTime"] = pickup_time
        if carrier is not UNSET:
            field_dict["carrier"] = carrier
        if service is not UNSET:
            field_dict["service"] = service
        if dropoff_id is not UNSET:
            field_dict["dropoffId"] = dropoff_id
        if config is not UNSET:
            field_dict["config"] = config
        if delivery_time_from is not UNSET:
            field_dict["deliveryTimeFrom"] = delivery_time_from
        if delivery_date is not UNSET:
            field_dict["deliveryDate"] = delivery_date
        if delivery_time_to is not UNSET:
            field_dict["deliveryTimeTo"] = delivery_time_to
        if inbound is not UNSET:
            field_dict["inbound"] = inbound
        if incoterm is not UNSET:
            field_dict["incoterm"] = incoterm
        if note is not UNSET:
            field_dict["note"] = note
        if getdiscounts is not UNSET:
            field_dict["getdiscounts"] = getdiscounts
        if instructions is not UNSET:
            field_dict["instructions"] = instructions
        if printerchannel is not UNSET:
            field_dict["printerchannel"] = printerchannel
        if label_sequence is not UNSET:
            field_dict["labelSequence"] = label_sequence
        if end_of_shipment is not UNSET:
            field_dict["endOfShipment"] = end_of_shipment
        if batch is not UNSET:
            field_dict["batch"] = batch
        if additional_documents is not UNSET:
            field_dict["additionalDocuments"] = additional_documents
        if bonded is not UNSET:
            field_dict["bonded"] = bonded

        return field_dict

    @classmethod
    def from_dict(cls: type[T], src_dict: Mapping[str, Any]) -> T:
        d = dict(src_dict)
        _status = d.pop("status", UNSET)
        status: Status | Unset
        if isinstance(_status, Unset):
            status = UNSET
        else:
            status = Status(_status)

        order_number = d.pop("orderNumber", UNSET)

        reference = d.pop("reference", UNSET)

        language = d.pop("language", UNSET)

        currency = d.pop("currency", UNSET)

        first_pickup_date = d.pop("firstPickupDate", UNSET)

        first_pickup_date_time = d.pop("firstPickupDateTime", UNSET)

        pickup_time = d.pop("pickupTime", UNSET)

        def _parse_carrier(data: object) -> list[Any] | str | Unset:
            if isinstance(data, Unset):
                return data
            try:
                if not isinstance(data, list):
                    raise TypeError()
                carrier_type_1 = cast(list[Any], data)

                return carrier_type_1
            except (TypeError, ValueError, AttributeError, KeyError):
                pass
            return cast(list[Any] | str | Unset, data)

        carrier = _parse_carrier(d.pop("carrier", UNSET))

        def _parse_service(data: object) -> list[Any] | str | Unset:
            if isinstance(data, Unset):
                return data
            try:
                if not isinstance(data, list):
                    raise TypeError()
                service_type_1 = cast(list[Any], data)

                return service_type_1
            except (TypeError, ValueError, AttributeError, KeyError):
                pass
            return cast(list[Any] | str | Unset, data)

        service = _parse_service(d.pop("service", UNSET))

        dropoff_id = d.pop("dropoffId", UNSET)

        config = d.pop("config", UNSET)

        delivery_time_from = d.pop("deliveryTimeFrom", UNSET)

        delivery_date = d.pop("deliveryDate", UNSET)

        delivery_time_to = d.pop("deliveryTimeTo", UNSET)

        inbound = d.pop("inbound", UNSET)

        incoterm = d.pop("incoterm", UNSET)

        note = d.pop("note", UNSET)

        getdiscounts = d.pop("getdiscounts", UNSET)

        instructions = d.pop("instructions", UNSET)

        printerchannel = d.pop("printerchannel", UNSET)

        label_sequence = d.pop("labelSequence", UNSET)

        end_of_shipment = d.pop("endOfShipment", UNSET)

        batch = d.pop("batch", UNSET)

        additional_documents = d.pop("additionalDocuments", UNSET)

        bonded = d.pop("bonded", UNSET)

        shipment = cls(
            status=status,
            order_number=order_number,
            reference=reference,
            language=language,
            currency=currency,
            first_pickup_date=first_pickup_date,
            first_pickup_date_time=first_pickup_date_time,
            pickup_time=pickup_time,
            carrier=carrier,
            service=service,
            dropoff_id=dropoff_id,
            config=config,
            delivery_time_from=delivery_time_from,
            delivery_date=delivery_date,
            delivery_time_to=delivery_time_to,
            inbound=inbound,
            incoterm=incoterm,
            note=note,
            getdiscounts=getdiscounts,
            instructions=instructions,
            printerchannel=printerchannel,
            label_sequence=label_sequence,
            end_of_shipment=end_of_shipment,
            batch=batch,
            additional_documents=additional_documents,
            bonded=bonded,
        )

        shipment.additional_properties = d
        return shipment

    @property
    def additional_keys(self) -> list[str]:
        return list(self.additional_properties.keys())

    def __getitem__(self, key: str) -> Any:
        return self.additional_properties[key]

    def __setitem__(self, key: str, value: Any) -> None:
        self.additional_properties[key] = value

    def __delitem__(self, key: str) -> None:
        del self.additional_properties[key]

    def __contains__(self, key: str) -> bool:
        return key in self.additional_properties
