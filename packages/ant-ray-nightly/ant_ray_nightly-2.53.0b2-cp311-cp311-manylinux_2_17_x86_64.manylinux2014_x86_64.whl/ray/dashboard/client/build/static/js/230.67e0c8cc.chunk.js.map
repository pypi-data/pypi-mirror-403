{"version":3,"file":"static/js/230.67e0c8cc.chunk.js","mappings":"sSAQA,MAyGA,EAzGkBA,KAChB,MAAM,IAAEC,EAAG,GAAEC,EAAE,IAAEC,IAAQC,EAAAA,EAAAA,MAKlBC,EAAQC,IAAaC,EAAAA,EAAAA,aACrBC,EAAQC,IAAaF,EAAAA,EAAAA,UAAS,WAC/B,UAAEG,IAAcC,EAAAA,EAAAA,YAAWC,EAAAA,GAC3BC,GAAeC,EAAAA,EAAAA,cACnB,ICUoBC,EAACb,EAAYC,EAAaa,IACzCC,EAAAA,GAAcC,IAAY,cAAe,CAC9CC,OAAQ,CACNjB,KACAC,MACAa,aDdAD,CAASb,EAAIC,EAAKK,GACfY,MAAMC,IACDA,EAAIC,KAAKjB,OACXC,EAAUe,EAAIC,KAAKA,KAAKC,QAExBjB,EAAUe,EAAIC,KAAKE,IACrB,IAEDC,OAAOC,GAAQpB,EAAUoB,EAAIC,eAClC,CAACzB,EAAIC,EAAKK,IAoCZ,OAjCAoB,EAAAA,EAAAA,YAAU,KACR,OAAQ3B,GACN,IAAK,SCvBc4B,EAAC3B,EAAYC,IAC7Bc,EAAAA,GAAcC,IAAY,eAAgB,CAC/CC,OAAQ,CACNjB,KACAC,SDoBE0B,CAAU3B,EAAIC,GACXiB,MAAMC,IACDA,EAAIC,KAAKjB,OACXC,EAAUe,EAAIC,KAAKA,KAAKC,QAExBjB,EAAUe,EAAIC,KAAKE,IACrB,IAEDC,OAAOC,GAAQpB,EAAUoB,EAAIC,cAChC,MACF,IAAK,OCzBYG,EAAC5B,EAAYC,IAC3Bc,EAAAA,GAAcC,IAAY,aAAc,CAC7CC,OAAQ,CACNjB,KACAC,SDsBE2B,CAAQ5B,EAAIC,GACTiB,MAAMC,IACDA,EAAIC,KAAKjB,OACXC,EAAUe,EAAIC,KAAKA,KAAKC,QAExBjB,EAAUe,EAAIC,KAAKE,IACrB,IAEDC,OAAOC,GAAQpB,EAAUoB,EAAIC,cAChC,MACF,IAAK,QACHd,IACA,MACF,QACEP,EAAU,WAAWL,uBAEzB,GACC,CAACA,EAAKY,EAAcX,EAAIC,KAGzB4B,EAAAA,EAAAA,MAACC,EAAAA,EAAG,CAACC,GAAI,CAAEC,QAAS,EAAGC,MAAO,QAASC,SAAA,EACrCC,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CAACC,MAAOtC,EAAImC,SACX,UAARnC,IACCoC,EAAAA,EAAAA,KAACL,EAAAA,EAAG,CAACC,GAAI,CAAEC,QAAS,EAAGM,UAAW,GAAIJ,UACpCL,EAAAA,EAAAA,MAACU,EAAAA,GAAI,CAACC,WAAS,EAACC,QAAS,EAAEP,SAAA,EACzBC,EAAAA,EAAAA,KAACI,EAAAA,GAAI,CAACG,MAAI,EAAAR,UACRC,EAAAA,EAAAA,KAACQ,EAAAA,EAAM,CACLC,MAAOtC,EACPuC,SAAWC,GAAMvC,EAAUuC,EAAEC,OAAOH,OACpCb,GAAI,CAAE,qBAAsB,CAAEiB,MAAO,mBAAqBd,SAEzD,CACC,QACA,WACA,KACA,aACA,iBACA,QACA,gBACA,QACA,gBACA,SACA,UACA,oBACAe,KAAKH,IACLX,EAAAA,EAAAA,KAACe,EAAAA,EAAQ,CAACN,MAAOE,EAAEZ,SAAEY,WAI3BX,EAAAA,EAAAA,KAACI,EAAAA,GAAI,CAACG,MAAI,EAAAR,UACRC,EAAAA,EAAAA,KAACgB,EAAAA,EAAM,CAACC,QAASzC,EAAauB,SAAC,sBAMzCC,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CAACC,MAAO,OAAOrC,YAAaC,IAAMiC,UAC1CC,EAAAA,EAAAA,KAACkB,EAAAA,EAAc,CACbC,QAASnD,GAAU,UACnBoD,SAAS,SACTC,OAAQ,IACRC,MAAOjD,QAGP,C","sources":["pages/cmd/CMDResult.tsx","service/util.ts"],"sourcesContent":["import { Box, Button, Grid, MenuItem, Select } from \"@mui/material\";\nimport React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { GlobalContext } from \"../../App\";\nimport LogVirtualView from \"../../components/LogView/LogVirtualView\";\nimport TitleCard from \"../../components/TitleCard\";\nimport { getJmap, getJstack, getJstat } from \"../../service/util\";\n\nconst CMDResult = () => {\n  const { cmd, ip, pid } = useParams() as {\n    cmd: string;\n    ip: string;\n    pid: string;\n  };\n  const [result, setResult] = useState<string>();\n  const [option, setOption] = useState(\"gcutil\");\n  const { themeMode } = useContext(GlobalContext);\n  const executeJstat = useCallback(\n    () =>\n      getJstat(ip, pid, option)\n        .then((rsp) => {\n          if (rsp.data.result) {\n            setResult(rsp.data.data.output);\n          } else {\n            setResult(rsp.data.msg);\n          }\n        })\n        .catch((err) => setResult(err.toString())),\n    [ip, pid, option],\n  );\n\n  useEffect(() => {\n    switch (cmd) {\n      case \"jstack\":\n        getJstack(ip, pid)\n          .then((rsp) => {\n            if (rsp.data.result) {\n              setResult(rsp.data.data.output);\n            } else {\n              setResult(rsp.data.msg);\n            }\n          })\n          .catch((err) => setResult(err.toString()));\n        break;\n      case \"jmap\":\n        getJmap(ip, pid)\n          .then((rsp) => {\n            if (rsp.data.result) {\n              setResult(rsp.data.data.output);\n            } else {\n              setResult(rsp.data.msg);\n            }\n          })\n          .catch((err) => setResult(err.toString()));\n        break;\n      case \"jstat\":\n        executeJstat();\n        break;\n      default:\n        setResult(`Command ${cmd} is not supported.`);\n        break;\n    }\n  }, [cmd, executeJstat, ip, pid]);\n\n  return (\n    <Box sx={{ padding: 4, width: \"100%\" }}>\n      <TitleCard title={cmd}>\n        {cmd === \"jstat\" && (\n          <Box sx={{ padding: 2, marginTop: 2 }}>\n            <Grid container spacing={1}>\n              <Grid item>\n                <Select\n                  value={option}\n                  onChange={(e) => setOption(e.target.value as string)}\n                  sx={{ \"& .MuiSvgIcon-root\": { color: \"text.secondary\" } }}\n                >\n                  {[\n                    \"class\",\n                    \"compiler\",\n                    \"gc\",\n                    \"gccapacity\",\n                    \"gcmetacapacity\",\n                    \"gcnew\",\n                    \"gcnewcapacity\",\n                    \"gcold\",\n                    \"gcoldcapacity\",\n                    \"gcutil\",\n                    \"gccause\",\n                    \"printcompilation\",\n                  ].map((e) => (\n                    <MenuItem value={e}>{e}</MenuItem>\n                  ))}\n                </Select>\n              </Grid>\n              <Grid item>\n                <Button onClick={executeJstat}>Execute</Button>\n              </Grid>\n            </Grid>\n          </Box>\n        )}\n      </TitleCard>\n      <TitleCard title={`IP: ${ip} / Pid: ${pid}`}>\n        <LogVirtualView\n          content={result || \"loading\"}\n          language=\"prolog\"\n          height={800}\n          theme={themeMode}\n        />\n      </TitleCard>\n    </Box>\n  );\n};\n\nexport default CMDResult;\n","import { axiosInstance } from \"./requestHandlers\";\n\ntype CMDRsp = {\n  result: boolean;\n  msg: string;\n  data: {\n    output: string;\n  };\n};\n\nexport const getJstack = (ip: string, pid: string) => {\n  return axiosInstance.get<CMDRsp>(\"utils/jstack\", {\n    params: {\n      ip,\n      pid,\n    },\n  });\n};\n\nexport const getJmap = (ip: string, pid: string) => {\n  return axiosInstance.get<CMDRsp>(\"utils/jmap\", {\n    params: {\n      ip,\n      pid,\n    },\n  });\n};\n\nexport const getJstat = (ip: string, pid: string, options: string) => {\n  return axiosInstance.get<CMDRsp>(\"utils/jstat\", {\n    params: {\n      ip,\n      pid,\n      options,\n    },\n  });\n};\n\ntype NamespacesRsp = {\n  result: boolean;\n  msg: string;\n  data: {\n    namespaces: {\n      namespaceId: string;\n      hostNameList: string[];\n    }[];\n  };\n};\n\nexport const getNamespaces = () => {\n  return axiosInstance.get<NamespacesRsp>(\"namespaces\");\n};\n"],"names":["CMDResult","cmd","ip","pid","useParams","result","setResult","useState","option","setOption","themeMode","useContext","GlobalContext","executeJstat","useCallback","getJstat","options","axiosInstance","get","params","then","rsp","data","output","msg","catch","err","toString","useEffect","getJstack","getJmap","_jsxs","Box","sx","padding","width","children","_jsx","TitleCard","title","marginTop","Grid","container","spacing","item","Select","value","onChange","e","target","color","map","MenuItem","Button","onClick","LogVirtualView","content","language","height","theme"],"sourceRoot":""}