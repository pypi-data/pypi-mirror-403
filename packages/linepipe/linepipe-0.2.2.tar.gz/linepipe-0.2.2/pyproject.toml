[tool.poetry]
name = "linepipe"
version = "0.2.2"
description = "Composable, linear pipelines"
authors = ["Marek Kancir <kancir.marek@gmail.com>"]
license = "MIT"
readme = "README.md"
packages = [{ include = "linepipe", from = "src" }]

homepage = "https://github.com/marek-kan/linepipe"
repository = "https://github.com/marek-kan/linepipe"

keywords = [
  "pipeline",
  "data-processing"
]

classifiers = [
  "Development Status :: 3 - Alpha",
  "Intended Audience :: Developers",
  "License :: OSI Approved :: MIT License",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
]

[tool.poetry.dependencies]
python = ">=3.11,!=3.14.1"
memory-profiler = { version = "0.61.0", optional = true }
networkx = { version = "3.6.1", optional = true }
plotly   = { version = "6.5.2", optional = true }

[tool.poetry.extras]
memory = ["memory-profiler"]
plot = ["networkx", "plotly"]

[tool.poetry.group.dev.dependencies]
ruff = "0.14.13"
mypy = "1.19.1"
pre-commit = "4.5.1"
pytest = "9.0.2"

[tool.poetry.group.jupyter.dependencies]
ipykernel = "7.1.0"
nbformat = "5.10.4"

[tool.poetry-dynamic-versioning]
enable = true
vcs = "git"
style = "pep440"

[tool.poetry-dynamic-versioning.substitution]
files = ["src/linepipe/__init__.py"]

[build-system]
requires = [
  "poetry-core>=1.8.0",
  "poetry-dynamic-versioning>=1.3.0"
]
build-backend = "poetry.core.masonry.api"

[tool.ruff]
line-length = 125
target-version = "py310"
src = ["src"]

fix = true

exclude = [
  ".git",
  ".venv",
  "build",
  "dist",
  "__pycache__",
]

[tool.ruff.lint]
select = [
  "E",
  "F",
  "I",
  "B",
  "UP",
  "SIM",
  "S",
]

ignore = [
  "E203",
  "E266",
  "E501",
]

[tool.ruff.lint.per-file-ignores]
"tests/**" = ["S101"]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
line-ending = "auto"

[tool.mypy]
python_version = "3.10"
strict = true

warn_unused_configs = true
warn_redundant_casts = true
warn_unused_ignores = true
show_error_codes = true

disallow_untyped_defs = true
disallow_any_generics = true
no_implicit_optional = true

check_untyped_defs = true
implicit_reexport = false

exclude = [
  "^tests/",
]

[[tool.mypy.overrides]]
module = [
  "pytest.*",
]
ignore_missing_imports = true

[tool.pytest.ini_options]
pythonpath = ["src"]
