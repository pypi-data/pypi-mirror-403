[build-system]
requires = [
  "scikit-build-core>=0.9",
  "pybind11>=2.12",
  "cmake>=3.18",
  "ninja>=1.10",
]
build-backend = "scikit_build_core.build"

[project]
name = "error-align"
version = "0.1.0b8"
description = "Text-to-text alignment algorithm for speech recognition error analysis."
readme = "README.md"
requires-python = ">=3.10,<3.15"
license = { text = "MIT" }
authors = [{ name = "Lasse Borgholt", email = "lb@corti.ai" }]
keywords = ["speech-recognition", "text-alignment", "NLP", "evaluation"]
classifiers = [
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
    "Programming Language :: C++",
    "License :: OSI Approved :: MIT License",
    "Operating System :: OS Independent",
    "Topic :: Software Development :: Libraries",
    "Topic :: Scientific/Engineering :: Artificial Intelligence",
    "Topic :: Text Processing :: Linguistic",
    "Intended Audience :: Developers",
    "Intended Audience :: Science/Research",
]
dependencies = [
    "tqdm>=4.67.1",
    "unidecode>=1.4.0",
    "regex>=2025.9.18",
]

[project.urls]
Homepage = "https://github.com/corticph/error-align"

[project.optional-dependencies]
evaluation = [
    "rapidfuzz>=3.13.0; python_version == '3.12'",
    "num2words>=0.5.14; python_version == '3.12'",
    "datasets>=3.3.2; python_version == '3.12'",
    "soundfile>=0.13.1; python_version == '3.12'",
    "librosa>=0.11.0; python_version == '3.12'",
    "click>=8.2.1; python_version == '3.12'",
    "pandas>=2.3.1; python_version == '3.12'",
    "scipy>=1.16.1; python_version == '3.12'",
    "textgrid>=1.6.1; python_version == '3.12'",
    "nemo-toolkit[all]>=2.4.0; python_version == '3.12'",
    "transformers>=4.51.3; python_version == '3.12'",
    "backoff>=2.2.1; python_version == '3.12'",
    "gitpython>=3.1.45; python_version == '3.12'",
    "pyphen>=0.17.2; python_version == '3.12'",
    "matplotlib>=3.10.6; python_version == '3.12'",
    "numpy>=1.22,<2.0; python_version == '3.12'",
    "lilcom==1.8.1; python_version == '3.12'",
    "torchcodec (>=0.9.1,<0.10.0); python_version == '3.12'",
    "torch (>=2.9,<2.10); python_version == '3.12'",
    "torchvision (==0.24); python_version == '3.12'",
]

# --- Poetry-specific dev/test groups (still supported by Poetry) ---

[tool.poetry.group.dev]
optional = true

[tool.poetry.group.dev.dependencies]
ruff = ">=0.1,<0.13"
pre-commit = "^4.2.0"
build = "^1.3.0"
twine = "^6.2.0"
# NOTE: ipython is pinned to ^8 to maintain Python 3.10 compatibility.
# ipython 9.x (e.g., ^9.6.0) requires Python 3.11+, so we intentionally
# downgraded from ^9.6.0 to ^8 for this project.
ipython = "^8"
line-profiler = "^5.0.0"
pybind11 = "^3.0.1"
scikit-build-core = "^0.11.6"
ninja = "^1.13.0"

[tool.poetry.group.test]
optional = true

[tool.poetry.group.test.dependencies]
pytest = ">=7.4.3,<9.0.0"
pytest-cov = "^6.1.1"
typeguard = "^4.4.4"

# --- scikit-build configuration ---

[tool.scikit-build]
wheel.expand-macos-universal-tags = true
build-dir = "build/{wheel_tag}"

[tool.scikit-build.sdist]
include = ["cpp/*", "CMakeLists.txt", "error_align/*", "README.md", "pyproject.toml"]
