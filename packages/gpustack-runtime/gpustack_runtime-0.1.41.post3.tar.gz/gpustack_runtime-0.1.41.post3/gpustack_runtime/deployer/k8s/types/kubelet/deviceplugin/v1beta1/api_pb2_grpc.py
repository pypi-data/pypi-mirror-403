# Generated by the gRPC Python protocol compiler plugin. DO NOT EDIT!
"""Client and server classes corresponding to protobuf-defined services."""
import grpc

from gpustack_runtime.deployer.k8s.types.kubelet.deviceplugin.v1beta1 import api_pb2 as gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2


class RegistrationStub(object):
    """Registration is the service advertised by the Kubelet
    Only when Kubelet answers with a success code to a Register Request
    may Device Plugins start their service
    Registration may fail when device plugin version is not supported by
    Kubelet or the registered resourceName is already taken by another
    active device plugin. Device plugin is expected to terminate upon registration failure
    """

    def __init__(self, channel):
        """Constructor.

        Args:
            channel: A grpc.Channel.
        """
        self.Register = channel.unary_unary(
                '/v1beta1.Registration/Register',
                request_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.RegisterRequest.SerializeToString,
                response_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.Empty.FromString,
                _registered_method=True)


class RegistrationServicer(object):
    """Registration is the service advertised by the Kubelet
    Only when Kubelet answers with a success code to a Register Request
    may Device Plugins start their service
    Registration may fail when device plugin version is not supported by
    Kubelet or the registered resourceName is already taken by another
    active device plugin. Device plugin is expected to terminate upon registration failure
    """

    def Register(self, request, context):
        """Missing associated documentation comment in .proto file."""
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details('Method not implemented!')
        raise NotImplementedError('Method not implemented!')


def add_RegistrationServicer_to_server(servicer, server):
    rpc_method_handlers = {
            'Register': grpc.unary_unary_rpc_method_handler(
                    servicer.Register,
                    request_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.RegisterRequest.FromString,
                    response_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.Empty.SerializeToString,
            ),
    }
    generic_handler = grpc.method_handlers_generic_handler(
            'v1beta1.Registration', rpc_method_handlers)
    server.add_generic_rpc_handlers((generic_handler,))
    server.add_registered_method_handlers('v1beta1.Registration', rpc_method_handlers)


 # This class is part of an EXPERIMENTAL API.
class Registration(object):
    """Registration is the service advertised by the Kubelet
    Only when Kubelet answers with a success code to a Register Request
    may Device Plugins start their service
    Registration may fail when device plugin version is not supported by
    Kubelet or the registered resourceName is already taken by another
    active device plugin. Device plugin is expected to terminate upon registration failure
    """

    @staticmethod
    def Register(request,
            target,
            options=(),
            channel_credentials=None,
            call_credentials=None,
            insecure=False,
            compression=None,
            wait_for_ready=None,
            timeout=None,
            metadata=None):
        return grpc.experimental.unary_unary(
            request,
            target,
            '/v1beta1.Registration/Register',
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.RegisterRequest.SerializeToString,
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.Empty.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True)


class DevicePluginStub(object):
    """DevicePlugin is the service advertised by Device Plugins
    """

    def __init__(self, channel):
        """Constructor.

        Args:
            channel: A grpc.Channel.
        """
        self.GetDevicePluginOptions = channel.unary_unary(
                '/v1beta1.DevicePlugin/GetDevicePluginOptions',
                request_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.Empty.SerializeToString,
                response_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.DevicePluginOptions.FromString,
                _registered_method=True)
        self.ListAndWatch = channel.unary_stream(
                '/v1beta1.DevicePlugin/ListAndWatch',
                request_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.Empty.SerializeToString,
                response_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.ListAndWatchResponse.FromString,
                _registered_method=True)
        self.GetPreferredAllocation = channel.unary_unary(
                '/v1beta1.DevicePlugin/GetPreferredAllocation',
                request_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreferredAllocationRequest.SerializeToString,
                response_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreferredAllocationResponse.FromString,
                _registered_method=True)
        self.Allocate = channel.unary_unary(
                '/v1beta1.DevicePlugin/Allocate',
                request_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.AllocateRequest.SerializeToString,
                response_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.AllocateResponse.FromString,
                _registered_method=True)
        self.PreStartContainer = channel.unary_unary(
                '/v1beta1.DevicePlugin/PreStartContainer',
                request_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreStartContainerRequest.SerializeToString,
                response_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreStartContainerResponse.FromString,
                _registered_method=True)


class DevicePluginServicer(object):
    """DevicePlugin is the service advertised by Device Plugins
    """

    def GetDevicePluginOptions(self, request, context):
        """GetDevicePluginOptions returns options to be communicated with Device
        Manager
        """
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details('Method not implemented!')
        raise NotImplementedError('Method not implemented!')

    def ListAndWatch(self, request, context):
        """ListAndWatch returns a stream of List of Devices
        Whenever a Device state change or a Device disappears, ListAndWatch
        returns the new list
        """
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details('Method not implemented!')
        raise NotImplementedError('Method not implemented!')

    def GetPreferredAllocation(self, request, context):
        """GetPreferredAllocation returns a preferred set of devices to allocate
        from a list of available ones. The resulting preferred allocation is not
        guaranteed to be the allocation ultimately performed by the
        devicemanager. It is only designed to help the devicemanager make a more
        informed allocation decision when possible.
        """
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details('Method not implemented!')
        raise NotImplementedError('Method not implemented!')

    def Allocate(self, request, context):
        """Allocate is called during container creation so that the Device
        Plugin can run device specific operations and instruct Kubelet
        of the steps to make the Device available in the container
        """
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details('Method not implemented!')
        raise NotImplementedError('Method not implemented!')

    def PreStartContainer(self, request, context):
        """PreStartContainer is called, if indicated by Device Plugin during registeration phase,
        before each container start. Device plugin can run device specific operations
        such as resetting the device before making devices available to the container
        """
        context.set_code(grpc.StatusCode.UNIMPLEMENTED)
        context.set_details('Method not implemented!')
        raise NotImplementedError('Method not implemented!')


def add_DevicePluginServicer_to_server(servicer, server):
    rpc_method_handlers = {
            'GetDevicePluginOptions': grpc.unary_unary_rpc_method_handler(
                    servicer.GetDevicePluginOptions,
                    request_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.Empty.FromString,
                    response_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.DevicePluginOptions.SerializeToString,
            ),
            'ListAndWatch': grpc.unary_stream_rpc_method_handler(
                    servicer.ListAndWatch,
                    request_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.Empty.FromString,
                    response_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.ListAndWatchResponse.SerializeToString,
            ),
            'GetPreferredAllocation': grpc.unary_unary_rpc_method_handler(
                    servicer.GetPreferredAllocation,
                    request_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreferredAllocationRequest.FromString,
                    response_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreferredAllocationResponse.SerializeToString,
            ),
            'Allocate': grpc.unary_unary_rpc_method_handler(
                    servicer.Allocate,
                    request_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.AllocateRequest.FromString,
                    response_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.AllocateResponse.SerializeToString,
            ),
            'PreStartContainer': grpc.unary_unary_rpc_method_handler(
                    servicer.PreStartContainer,
                    request_deserializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreStartContainerRequest.FromString,
                    response_serializer=gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreStartContainerResponse.SerializeToString,
            ),
    }
    generic_handler = grpc.method_handlers_generic_handler(
            'v1beta1.DevicePlugin', rpc_method_handlers)
    server.add_generic_rpc_handlers((generic_handler,))
    server.add_registered_method_handlers('v1beta1.DevicePlugin', rpc_method_handlers)


 # This class is part of an EXPERIMENTAL API.
class DevicePlugin(object):
    """DevicePlugin is the service advertised by Device Plugins
    """

    @staticmethod
    def GetDevicePluginOptions(request,
            target,
            options=(),
            channel_credentials=None,
            call_credentials=None,
            insecure=False,
            compression=None,
            wait_for_ready=None,
            timeout=None,
            metadata=None):
        return grpc.experimental.unary_unary(
            request,
            target,
            '/v1beta1.DevicePlugin/GetDevicePluginOptions',
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.Empty.SerializeToString,
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.DevicePluginOptions.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True)

    @staticmethod
    def ListAndWatch(request,
            target,
            options=(),
            channel_credentials=None,
            call_credentials=None,
            insecure=False,
            compression=None,
            wait_for_ready=None,
            timeout=None,
            metadata=None):
        return grpc.experimental.unary_stream(
            request,
            target,
            '/v1beta1.DevicePlugin/ListAndWatch',
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.Empty.SerializeToString,
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.ListAndWatchResponse.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True)

    @staticmethod
    def GetPreferredAllocation(request,
            target,
            options=(),
            channel_credentials=None,
            call_credentials=None,
            insecure=False,
            compression=None,
            wait_for_ready=None,
            timeout=None,
            metadata=None):
        return grpc.experimental.unary_unary(
            request,
            target,
            '/v1beta1.DevicePlugin/GetPreferredAllocation',
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreferredAllocationRequest.SerializeToString,
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreferredAllocationResponse.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True)

    @staticmethod
    def Allocate(request,
            target,
            options=(),
            channel_credentials=None,
            call_credentials=None,
            insecure=False,
            compression=None,
            wait_for_ready=None,
            timeout=None,
            metadata=None):
        return grpc.experimental.unary_unary(
            request,
            target,
            '/v1beta1.DevicePlugin/Allocate',
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.AllocateRequest.SerializeToString,
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.AllocateResponse.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True)

    @staticmethod
    def PreStartContainer(request,
            target,
            options=(),
            channel_credentials=None,
            call_credentials=None,
            insecure=False,
            compression=None,
            wait_for_ready=None,
            timeout=None,
            metadata=None):
        return grpc.experimental.unary_unary(
            request,
            target,
            '/v1beta1.DevicePlugin/PreStartContainer',
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreStartContainerRequest.SerializeToString,
            gpustack__runtime_dot_deployer_dot_k8s_dot_types_dot_kubelet_dot_deviceplugin_dot_v1beta1_dot_api__pb2.PreStartContainerResponse.FromString,
            options,
            channel_credentials,
            insecure,
            call_credentials,
            compression,
            wait_for_ready,
            timeout,
            metadata,
            _registered_method=True)
