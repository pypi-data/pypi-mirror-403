import{d as L,e as q,f as V,h as x,dm as J,b as B,c as be,C as T,o as H,i as t,B as S,w as o,t as v,l as e,N as ae,ac as N,s as M,O as te,as as ye,dn as Re,r as b,ab as G,Z as se,Y as j,U as Z,W,k as ne,m as le,n as we,p as K,X,dp as Oe,dj as $e,ak as Ve,ad as Ee,aF as re,dq as Ie,dr as oe,I as E,dc as xe,a6 as ie,af as Q,E as Y,ds as Le,H as qe,dt as Ae,du as ce,A as ue,aa as Ce,dv as ke,dw as De,dx as pe,dy as Se,dz as Pe,dA as me,aw as Me,av as ze,K as Be,S as Ge,dB as Te,dC as Ne,dD as He,a as Fe,ax as fe,at as je,bu as ge,dg as Ke,df as Ze,au as We,j as Xe}from"./index-DJskbzIk.js";import{C as Ye}from"./ChevronBack-DryZPZd-.js";import{U as Ue}from"./UserMultiple-Cp5mi97o.js";import{A as ve}from"./Add-B9E6ooHy.js";import{_ as de}from"./Popconfirm-DFFNKs94.js";import{_ as ee}from"./DataTable-BkhITQT9.js";import{N as _e}from"./Switch-BTGJkP8J.js";import{i as Je}from"./json-editor-vue-cMpGPz9p.js";import{_ as Qe}from"./PaginationView.vue_vue_type_script_setup_true_lang-C5I4MAUI.js";import"./Checkbox-B0NmEvB4.js";import"./RadioGroup-DFjU_ho_.js";import"./Pagination-MzAc_u8k.js";import"./prop-NnGblK-3.js";import"./download-C2161hUv.js";const et={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},tt=L({name:"Devices",render:function(i,a){return V(),q("svg",et,a[0]||(a[0]=[x("path",{d:"M10 30H4a2 2 0 0 1-2-2V16a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2zM4 16v12h6V16z",fill:"currentColor"},null,-1),x("path",{d:"M28 4H6a2 2 0 0 0-2 2v6h2V6h22v14H14v2h2v4h-2v2h9v-2h-5v-4h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z",fill:"currentColor"},null,-1)]))}}),ot={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},he=L({name:"Settings",render:function(i,a){return V(),q("svg",ot,a[0]||(a[0]=[x("path",{d:"M27 16.76V16v-.77l1.92-1.68A2 2 0 0 0 29.3 11l-2.36-4a2 2 0 0 0-1.73-1a2 2 0 0 0-.64.1l-2.43.82a11.35 11.35 0 0 0-1.31-.75l-.51-2.52a2 2 0 0 0-2-1.61h-4.68a2 2 0 0 0-2 1.61l-.51 2.52a11.48 11.48 0 0 0-1.32.75l-2.38-.86A2 2 0 0 0 6.79 6a2 2 0 0 0-1.73 1L2.7 11a2 2 0 0 0 .41 2.51L5 15.24v1.53l-1.89 1.68A2 2 0 0 0 2.7 21l2.36 4a2 2 0 0 0 1.73 1a2 2 0 0 0 .64-.1l2.43-.82a11.35 11.35 0 0 0 1.31.75l.51 2.52a2 2 0 0 0 2 1.61h4.72a2 2 0 0 0 2-1.61l.51-2.52a11.48 11.48 0 0 0 1.32-.75l2.42.82a2 2 0 0 0 .64.1a2 2 0 0 0 1.73-1l2.28-4a2 2 0 0 0-.41-2.51zM25.21 24l-3.43-1.16a8.86 8.86 0 0 1-2.71 1.57L18.36 28h-4.72l-.71-3.55a9.36 9.36 0 0 1-2.7-1.57L6.79 24l-2.36-4l2.72-2.4a8.9 8.9 0 0 1 0-3.13L4.43 12l2.36-4l3.43 1.16a8.86 8.86 0 0 1 2.71-1.57L13.64 4h4.72l.71 3.55a9.36 9.36 0 0 1 2.7 1.57L25.21 8l2.36 4l-2.72 2.4a8.9 8.9 0 0 1 0 3.13L27.57 20z",fill:"currentColor"},null,-1),x("path",{d:"M16 22a6 6 0 1 1 6-6a5.94 5.94 0 0 1-6 6zm0-10a3.91 3.91 0 0 0-4 4a3.91 3.91 0 0 0 4 4a3.91 3.91 0 0 0 4-4a3.91 3.91 0 0 0-4-4z",fill:"currentColor"},null,-1)]))}}),at={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},st=L({name:"TwoFactorAuthentication",render:function(i,a){return V(),q("svg",at,a[0]||(a[0]=[x("path",{d:"M11 23.18l-2-2.001l-1.411 1.41L11 26l6-6l-1.41-1.41L11 23.18z",fill:"currentColor"},null,-1),x("path",{d:"M28 30h-4v-2h4V16h-4V8a4.005 4.005 0 0 0-4-4V2a6.007 6.007 0 0 1 6 6v6h2a2.002 2.002 0 0 1 2 2v12a2.002 2.002 0 0 1-2 2z",fill:"currentColor"},null,-1),x("path",{d:"M20 14h-2V8A6 6 0 0 0 6 8v6H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V16a2 2 0 0 0-2-2zM8 8a4 4 0 0 1 8 0v6H8zm12 20H4V16h16z",fill:"currentColor"},null,-1)]))}}),nt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},lt=L({name:"UserSettings",render:function(i,a){return V(),q("svg",nt,a[0]||(a[0]=[x("path",{d:"M30 10V8h-2.101a4.968 4.968 0 0 0-.732-1.753l1.49-1.49l-1.414-1.414l-1.49 1.49A4.968 4.968 0 0 0 24 4.101V2h-2v2.101a4.968 4.968 0 0 0-1.753.732l-1.49-1.49l-1.414 1.414l1.49 1.49A4.968 4.968 0 0 0 18.101 8H16v2h2.101a4.968 4.968 0 0 0 .732 1.753l-1.49 1.49l1.414 1.414l1.49-1.49a4.968 4.968 0 0 0 1.753.732V16h2v-2.101a4.968 4.968 0 0 0 1.753-.732l1.49 1.49l1.414-1.414l-1.49-1.49A4.968 4.968 0 0 0 27.899 10zm-7 2a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3z",fill:"currentColor"},null,-1),x("path",{d:"M16 30h-2v-5a3.003 3.003 0 0 0-3-3H7a3.003 3.003 0 0 0-3 3v5H2v-5a5.006 5.006 0 0 1 5-5h4a5.006 5.006 0 0 1 5 5z",fill:"currentColor"},null,-1),x("path",{d:"M9 10a3 3 0 1 1-3 3a3 3 0 0 1 3-3m0-2a5 5 0 1 0 5 5a5 5 0 0 0-5-5z",fill:"currentColor"},null,-1)]))}}),rt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},it=L({name:"AppFolder24Filled",render:function(i,a){return V(),q("svg",rt,a[0]||(a[0]=[x("g",{fill:"none"},[x("path",{d:"M18.25 3A2.75 2.75 0 0 1 21 5.75v12.5A2.75 2.75 0 0 1 18.25 21H5.75A2.75 2.75 0 0 1 3 18.25V5.75A2.75 2.75 0 0 1 5.75 3h12.5zm0 1.5H5.75c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25h12.5c.69 0 1.25-.56 1.25-1.25V5.75c0-.69-.56-1.25-1.25-1.25zm-8.498 8c.966 0 1.75.784 1.75 1.75v2A1.75 1.75 0 0 1 9.752 18h-2a1.75 1.75 0 0 1-1.75-1.75v-2c0-.966.783-1.75 1.75-1.75h2zm6.497 0c.967 0 1.75.784 1.75 1.75v2A1.75 1.75 0 0 1 16.25 18h-2a1.75 1.75 0 0 1-1.75-1.75v-2c0-.966.784-1.75 1.75-1.75h2zM9.751 6c.966 0 1.75.784 1.75 1.75v2a1.75 1.75 0 0 1-1.75 1.75h-2A1.75 1.75 0 0 1 6 9.75v-2C6 6.784 6.784 6 7.75 6h2zm6.497 0c.967 0 1.75.784 1.75 1.75v2a1.75 1.75 0 0 1-1.75 1.75h-2a1.75 1.75 0 0 1-1.75-1.75v-2c0-.966.784-1.75 1.75-1.75h2z",fill:"currentColor"})],-1)]))}}),ct={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 12 12"},ut=L({name:"Checkmark12Regular",render:function(i,a){return V(),q("svg",ct,a[0]||(a[0]=[x("g",{fill:"none"},[x("path",{d:"M9.854 3.146a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L5 7.293l4.146-4.147a.5.5 0 0 1 .708 0z",fill:"currentColor"})],-1)]))}}),dt={class:"flex items-center justify-start gap-2"},_t={class:"flex flex-1 justify-center items-center gap-5"},pt={class:"text-2xl flex items-center justify-center gap-1"},mt={key:0,class:"flex items-center gap-1"},ft={class:"flex items-center gap-1"},gt={class:"flex items-center gap-1"},vt=L({__name:"OrgInfo",setup(I){const i=J(),{t:a}=B(),m=be(),l=T(),r=async()=>{const C=l.query.id;if(!C)return;const[h,y]=await Re({org_id:+C});!h&&(y==null?void 0:y.status)===0&&i.$patch({info:y.data})},z=()=>{m.push({name:"orgList"})};return H(()=>{r()}),(C,h)=>{var f;const y=ae,R=S,_=ye;return V(),q("div",dt,[t(R,{onClick:z,quaternary:""},{icon:o(()=>[t(y,{size:"26"},{default:o(()=>[t(e(Ye))]),_:1})]),default:o(()=>[x("span",null,v(e(a)("org.backOrgList")),1)]),_:1}),x("div",_t,[x("div",pt,[t(y,{component:e(te)},null,8,["component"]),M(" "+v((f=e(i).info)==null?void 0:f.organization_name),1)]),e(i).info?(V(),q("div",mt,[t(_,{bordered:!1,size:"small",type:"success"},{default:o(()=>[M(" ID "+v(+e(l).query.id),1)]),_:1}),t(_,{bordered:!1,type:"warning",size:"small"},{default:o(()=>{var U;return[x("div",ft,[t(y,{component:e(Ue)},null,8,["component"]),M(" "+v((U=e(i).info)==null?void 0:U.member_count)+" "+v(e(a)("org.cmember")),1)])]}),_:1}),t(_,{bordered:!1,type:"info",size:"small"},{default:o(()=>{var U;return[x("div",gt,[t(y,{component:e(te)},null,8,["component"]),M(" "+v((U=e(i).info)==null?void 0:U.device_count)+" "+v(e(a)("org.cdevice")),1)])]}),_:1})])):N("",!0)])])}}}),ht=L({__name:"InsertMember",props:{type:{}},emits:["success"],setup(I,{expose:i,emit:a}){const m=J(),l=b(),{t:r}=B(),z=T(),C=a,h=[{label:r("org.admin"),value:"ORG_ADMIN"},{label:r("org.member"),value:"ORG_MEMBER"}],y=b(!1),R=b(!1),_=()=>{R.value=!1,$.value={user_name:void 0,org_role:void 0}},f=()=>{R.value=!0},U=b({user_name:{required:!0,message:r("common.required")},org_role:{required:!0,message:r("common.required")}}),k=b(null),$=b({user_name:void 0,org_role:void 0}),d=()=>{var u;(u=k.value)==null||u.validate(async n=>{if(n)return;const[p,c]=await Oe({...$.value,org_id:+z.query.id});!p&&(c==null?void 0:c.status)===0&&(C("success"),_())})},w=async()=>{var p;const[u,n]=await $e();!u&&(n==null?void 0:n.status)===0&&(l.value=(p=n.data)==null?void 0:p.map(c=>({...c,label:c.user_name,value:c.user_id})))};return H(()=>{w()}),i({open:f,close:_}),(u,n)=>{const p=le,c=we,s=K,g=ne,O=S,P=se;return V(),G(P,{show:e(R),"onUpdate:show":n[2]||(n[2]=A=>j(R)?R.value=A:null),"mask-closable":!1,"close-on-esc":!1,"auto-focus":!1},{default:o(()=>[t(Z,{style:{width:"700px"}},{default:o(()=>[t(W,null,{default:o(()=>[t(g,{ref_key:"formRef",ref:k,model:e($),rules:e(U),size:"small"},{default:o(()=>[t(p,{label:e(r)("org.orgName"),path:"name"},{default:o(()=>{var A;return[M(v((A=e(m).info)==null?void 0:A.organization_name),1)]}),_:1},8,["label"]),t(p,{label:e(r)("org.username"),path:"user_name"},{default:o(()=>[t(c,{value:e($).user_name,"onUpdate:value":n[0]||(n[0]=A=>e($).user_name=A)},null,8,["value"])]),_:1},8,["label"]),t(p,{label:e(r)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(s,{value:e($).org_role,"onUpdate:value":n[1]||(n[1]=A=>e($).org_role=A),options:h},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1}),t(X,{onCancel:_},{default:o(()=>[t(O,{type:"primary",onClick:d,loading:e(y)},{default:o(()=>[M(v(e(r)("org.omtab.invite")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),bt={class:"my-20 text-center"},yt=L({__name:"InsertUser",props:{type:{}},emits:["success"],setup(I,{expose:i,emit:a}){const m=J(),{t:l}=B(),r=T(),z=a,C=[{label:l("org.admin"),value:"ORG_ADMIN"},{label:l("org.member"),value:"ORG_MEMBER"}],h=b(!1),y=b(!1),R=()=>{y.value=!1,k.value={user_name:void 0,org_role:void 0}},_=()=>{y.value=!0},f=b({user_name:{required:!0,message:l("common.required")},org_role:{required:!0,message:l("common.required")}}),U=b(null),k=b({user_name:void 0,org_role:void 0}),$=b(""),d=b(!0),w=()=>{d.value=!1,$.value=""},u=()=>{var n;(n=U.value)==null||n.validate(async p=>{var g;if(p)return;const[c,s]=await Ie({...k.value,org_id:+r.query.id});!c&&(s==null?void 0:s.status)===0&&(d.value=!0,$.value=(g=s.data)==null?void 0:g.token,z("success"),R())})};return Ve(()=>{$.value=""}),i({open:_,close:R}),(n,p)=>{const c=le,s=we,g=K,O=ne,P=se,A=re;return V(),q(Ee,null,[t(P,{show:e(y),"onUpdate:show":p[2]||(p[2]=D=>j(y)?y.value=D:null),"mask-closable":!1,"close-on-esc":!1,"auto-focus":!1},{default:o(()=>[t(Z,{style:{width:"700px"}},{default:o(()=>[t(W,null,{default:o(()=>[t(O,{ref_key:"formRef",ref:U,model:e(k),rules:e(f),size:"small"},{default:o(()=>[t(c,{label:e(l)("org.orgName"),path:"name"},{default:o(()=>{var D;return[M(v((D=e(m).info)==null?void 0:D.organization_name),1)]}),_:1},8,["label"]),t(c,{label:e(l)("org.omtab.user"),path:"user_name"},{default:o(()=>[t(s,{value:e(k).user_name,"onUpdate:value":p[0]||(p[0]=D=>e(k).user_name=D)},null,8,["value"])]),_:1},8,["label"]),t(c,{label:e(l)("org.omtab.role"),path:"org_role"},{default:o(()=>[t(g,{value:e(k).org_role,"onUpdate:value":p[1]||(p[1]=D=>e(k).org_role=D),options:C},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1}),t(X,{onCancel:R},{default:o(()=>[t(e(S),{type:"primary",onClick:u,loading:e(h)},{default:o(()=>[M(v(e(l)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"]),t(P,{show:e(d),"onUpdate:show":p[3]||(p[3]=D=>j(d)?d.value=D:null),"mask-closable":!1,"close-on-esc":!1,"auto-focus":!1},{default:o(()=>[t(Z,{style:{width:"500px"}},{default:o(()=>[t(W,null,{default:o(()=>[t(A,{type:"info"},{default:o(()=>[M(v(e(l)("org.omtab.tokenTips")),1)]),_:1}),x("div",bt,v(e($)),1)]),_:1}),t(X,{custom:""},{default:o(()=>[t(e(S),{type:"primary",onClick:w,loading:e(h)},{default:o(()=>[M(v(e(l)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"])],64)}}}),wt="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_0)'%20customFrame='url(%23clipPath_0)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_0'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_1'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2049'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(51,49,64)'%20fill-opacity='0.5'%20/%3e%3cg%20id='Stroke%202/edit-write-alt'%20clip-path='url(%23clipPath_1)'%20customFrame='url(%23clipPath_1)'%3e%3crect%20id='Stroke%202/edit-write-alt'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20fill-opacity='0'%20/%3e%3cpath%20id='Vector'%20d='M9.75%2032.25L32.25%2032.25'%20stroke='rgb(108,92,231)'%20stroke-width='2'%20/%3e%3cpath%20id='Vector'%20d='M24.125%2010.375C25.1605%209.3395%2026.8395%209.3395%2027.875%2010.375C28.9105%2011.4106%2028.9105%2013.0895%2027.875%2014.125L15.375%2026.625L10.375%2027.875L11.625%2022.875L24.125%2010.375Z'%20fill-rule='evenodd'%20stroke='rgb(108,92,231)'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='2'%20/%3e%3c/g%3e%3c/svg%3e",xt="data:image/svg+xml,%3csvg%20viewBox='0%200%2042%2042'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='42.000000'%20height='42.000000'%20fill='none'%20clip-path='url(%23clipPath_2)'%20customFrame='url(%23clipPath_2)'%3e%3cdefs%3e%3cclipPath%20id='clipPath_2'%3e%3crect%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3cclipPath%20id='clipPath_3'%3e%3crect%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20fill='rgb(255,255,255)'%20/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='容器%2048'%20width='42.000000'%20height='42.000000'%20x='0.000000'%20y='0.000000'%20rx='5.000000'%20fill='rgb(255,0,0)'%20fill-opacity='0.25'%20/%3e%3cg%20id='Icon%20/%20delete%20user%2024%20Outline'%20clip-path='url(%23clipPath_3)'%20customFrame='url(%23clipPath_3)'%3e%3crect%20id='Icon%20/%20delete%20user%2024%20Outline'%20width='30.000000'%20height='30.000000'%20x='6.000000'%20y='6.000000'%20/%3e%3cpath%20id='Vector'%20d='M22.625%2021.275C23.292%2020.6977%2023.8269%2019.9836%2024.1936%2019.1813C24.5602%2018.379%2024.75%2017.5071%2024.75%2016.625C24.75%2014.9674%2024.0915%2013.3777%2022.9194%2012.2056C21.7473%2011.0335%2020.1576%2010.375%2018.5%2010.375C16.8424%2010.375%2015.2527%2011.0335%2014.0806%2012.2056C12.9085%2013.3777%2012.25%2014.9674%2012.25%2016.625C12.25%2017.5071%2012.4398%2018.379%2012.8064%2019.1813C13.1731%2019.9836%2013.708%2020.6977%2014.375%2021.275C12.6252%2022.0674%2011.1406%2023.3469%2010.0987%2024.9607C9.05687%2026.5745%208.50184%2028.4541%208.5%2030.375C8.5%2030.7065%208.6317%2031.0245%208.86612%2031.2589C9.10054%2031.4933%209.41848%2031.625%209.75%2031.625C10.0815%2031.625%2010.3995%2031.4933%2010.6339%2031.2589C10.8683%2031.0245%2011%2030.7065%2011%2030.375C11%2028.3859%2011.7902%2026.4782%2013.1967%2025.0717C14.6032%2023.6652%2016.5109%2022.875%2018.5%2022.875C20.4891%2022.875%2022.3968%2023.6652%2023.8033%2025.0717C25.2098%2026.4782%2026%2028.3859%2026%2030.375C26%2030.7065%2026.1317%2031.0245%2026.3661%2031.2589C26.6005%2031.4933%2026.9185%2031.625%2027.25%2031.625C27.5815%2031.625%2027.8995%2031.4933%2028.1339%2031.2589C28.3683%2031.0245%2028.5%2030.7065%2028.5%2030.375C28.4982%2028.4541%2027.9431%2026.5745%2026.9013%2024.9607C25.8594%2023.3469%2024.3748%2022.0674%2022.625%2021.275ZM18.5%2020.375C17.7583%2020.375%2017.0333%2020.1551%2016.4166%2019.743C15.7999%2019.331%2015.3193%2018.7453%2015.0355%2018.0601C14.7516%2017.3748%2014.6774%2016.6208%2014.8221%2015.8934C14.9667%2015.166%2015.3239%2014.4978%2015.8483%2013.9734C16.3728%2013.4489%2017.041%2013.0918%2017.7684%2012.9471C18.4958%2012.8024%2019.2498%2012.8766%2019.9351%2013.1605C20.6203%2013.4443%2021.206%2013.9249%2021.618%2014.5416C22.0301%2015.1583%2022.25%2015.8833%2022.25%2016.625C22.25%2017.6196%2021.8549%2018.5734%2021.1516%2019.2767C20.4484%2019.9799%2019.4946%2020.375%2018.5%2020.375ZM32.1375%2021L33.1375%2020.0125C33.254%2019.896%2033.3465%2019.7576%2033.4096%2019.6053C33.4726%2019.453%2033.5051%2019.2898%2033.5051%2019.125C33.5051%2018.9602%2033.4726%2018.797%2033.4096%2018.6447C33.3465%2018.4924%2033.254%2018.354%2033.1375%2018.2375C33.0209%2018.121%2032.8826%2018.0285%2032.7303%2017.9654C32.578%2017.9024%2032.4148%2017.8699%2032.25%2017.8699C32.0852%2017.8699%2031.922%2017.9024%2031.7697%2017.9654C31.6174%2018.0285%2031.479%2018.121%2031.3625%2018.2375L30.375%2019.2375L29.3875%2018.2375C29.2709%2018.121%2029.1326%2018.0285%2028.9803%2017.9654C28.828%2017.9024%2028.6648%2017.8699%2028.5%2017.8699C28.1671%2017.8699%2027.8479%2018.0021%2027.6125%2018.2375C27.4959%2018.354%2027.4035%2018.4924%2027.3404%2018.6447C27.2773%2018.797%2027.2449%2018.9602%2027.2449%2019.125C27.2449%2019.4579%2027.3771%2019.7771%2027.6125%2020.0125L28.6125%2021L27.6125%2021.9875C27.4953%2022.1037%2027.4023%2022.242%2027.3389%2022.3943C27.2754%2022.5466%2027.2427%2022.71%2027.2427%2022.875C27.2427%2023.04%2027.2754%2023.2034%2027.3389%2023.3557C27.4023%2023.508%2027.4953%2023.6463%2027.6125%2023.7625C27.7287%2023.8797%2027.867%2023.9727%2028.0193%2024.0361C28.1716%2024.0996%2028.335%2024.1323%2028.5%2024.1323C28.665%2024.1323%2028.8284%2024.0996%2028.9807%2024.0361C29.133%2023.9727%2029.2713%2023.8797%2029.3875%2023.7625L30.375%2022.7625L31.3625%2023.7625C31.4787%2023.8797%2031.6169%2023.9727%2031.7693%2024.0361C31.9216%2024.0996%2032.085%2024.1323%2032.25%2024.1323C32.415%2024.1323%2032.5784%2024.0996%2032.7307%2024.0361C32.883%2023.9727%2033.0213%2023.8797%2033.1375%2023.7625C33.2547%2023.6463%2033.3476%2023.508%2033.4111%2023.3557C33.4746%2023.2034%2033.5072%2023.04%2033.5072%2022.875C33.5072%2022.71%2033.4746%2022.5466%2033.4111%2022.3943C33.3476%2022.242%2033.2547%2022.1037%2033.1375%2021.9875L32.1375%2021Z'%20fill='rgb(214,48,49)'%20fill-rule='nonzero'%20/%3e%3c/g%3e%3c/svg%3e",Ct=L({__name:"OMember",setup(I){const i=b(!1),{t:a}=B(),m=T(),l=oe("insertMemberRef"),r=oe("insertUserRef"),z=b(!1),C=b(!1),h=()=>{z.value=!0,Y(()=>{var s;(s=l.value)==null||s.open()})},y=()=>{C.value=!0,Y(()=>{var s;(s=r.value)==null||s.open()})},R=()=>{c()},_=()=>{c()},f=b(),U=async s=>{const[g,O]=await Le({user_id:s,org_id:+m.query.id});!g&&(O==null?void 0:O.status)===0&&c()},k=b(),$=[{label:a("org.admin"),value:"ORG_ADMIN"},{label:a("org.member"),value:"ORG_MEMBER"}],d=s=>{const g=qe[s.value].color;return E("div",{class:"px-1 rounded-full border text-xs inline-block w-[80px] inline-flex items-center justify-center",style:{color:g,borderColor:g}},s.label)},w=(s,g)=>{k.value={userId:s,value:g}},u=s=>{k.value={...k.value,value:s}},n=async()=>{var O,P;const[s,g]=await Ae({org_id:+m.query.id,user_id:(O=k.value)==null?void 0:O.userId,org_role:(P=k.value)==null?void 0:P.value});!s&&(g==null?void 0:g.status)===0&&(k.value={userId:void 0,value:void 0},c())},p=[{title:"ID",key:"user_id",width:"20%"},{title:a("org.omtab.name"),key:"user_name",width:"25%"},{title:a("org.omtab.role"),key:"org_role",width:"30%",render(s){var g;return((g=k.value)==null?void 0:g.userId)===s.user_id?E("div",{class:"flex items-center gap-2"},[E(K,{options:$,renderLabel:d,defaultValue:k.value.value,onUpdateValue:u,style:{width:"200px"}}),E(S,{size:"small",onClick:()=>k.value={userId:void 0,value:void 0}},{default:()=>"x"}),E(S,{size:"small",onClick:n},{icon:()=>E(ut)})]):E(xe,{role:s.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:a("org.omtab.options"),key:"options",width:"25%",render(s){return E("div",{class:"flex items-center gap-2"},[E("img",{src:wt,class:"w-[30px] cursor-pointer",onClick:()=>w(s.user_id,s.org_role)}),E(de,{onPositiveClick:()=>U(s.user_id)},{default:()=>a("groupDetail.parameterManager.removeConfirm"),trigger:()=>E("img",{src:xt,class:"w-[30px] cursor-pointer"})})])}}],c=async()=>{if(i.value)return;i.value=!0;const s=+m.query.id;if(!s){i.value=!1;return}const[g,O]=await ce({organization_id:s});i.value=!1,!g&&(O==null?void 0:O.status)===0&&(f.value=O.data)};return ie(()=>+m.query.id,s=>{s&&c()}),H(()=>{c()}),(s,g)=>{const O=Q,P=ee;return V(),q("div",null,[t(O,null,{default:o(()=>[t(e(S),{type:"primary",onClick:h},{icon:o(()=>[t(e(ve))]),default:o(()=>[M(" "+v(e(a)("org.omtab.insertMember")),1)]),_:1}),t(e(S),{type:"primary",onClick:y},{icon:o(()=>[t(e(ve))]),default:o(()=>[M(" "+v(e(a)("org.omtab.insertUser")),1)]),_:1})]),_:1}),e(z)?(V(),G(ht,{key:0,ref_key:"insertMemberRef",ref:l,type:"insert",onSuccess:R},null,512)):N("",!0),e(C)?(V(),G(yt,{key:1,ref_key:"insertUserRef",ref:r,type:"insert",onSuccess:_},null,512)):N("",!0),t(P,{lading:e(i),class:"mt-5",columns:p,data:e(f)},null,8,["lading","data"])])}}}),kt={class:"flex items-center my-4"},Mt={class:"flex items-center gap-2 mr-4"},zt=L({__name:"AuthByMember",setup(I){const i=ue(),{t:a}=B(),m=T(),l=b(!1),r=b(),z=d=>{r.value=d},C=async(d,w)=>{if(l.value)return;l.value=!0;const[u,n]=await ke({org_id:+m.query.id,user_id:r.value,device_group_id:w,permission:d?"EDIT":"READ"});!u&&(n==null?void 0:n.status)===0?f():l.value=!1},h=[{title:a("org.oatab.device"),key:"device",render(d){return E("div",{class:""},[E("div",{class:"text-lg"},d.device_group_name),E("div",{class:""},`${a("org.deviceGroup")}: ${d.device_group_id}`)])}},{title:a("org.oatab.auth"),key:"auth",render(d){return E(_e,{railStyle:({checked:w})=>{const u={};return w?u.background="#638EE2":u.background="#7964E3",u},value:d.permission==="EDIT",onUpdateValue:w=>C(w,d.device_group_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],y=b(),R=async()=>{const[d,w]=await ce({organization_id:+m.query.id});!d&&(w==null?void 0:w.status)===0&&w.data&&(y.value=w.data.map(u=>({...u,label:u.user_name,value:u.user_id})))},_=b(),f=async()=>{l.value=!0;const[d,w]=await De({organization_id:+m.query.id,user_id:r.value});l.value=!1,!d&&w&&w.status===0&&(_.value=w.data.device_group_list)},U=async()=>{if(l.value)return;l.value=!0;const[d,w]=await pe({org_id:+m.query.id,user_id:r.value,permission:"EDIT"});!d&&(w==null?void 0:w.status)===0?f():l.value=!1},k=async()=>{if(l.value)return;l.value=!0;const[d,w]=await pe({org_id:+m.query.id,user_id:r.value,permission:"READ"});!d&&(w==null?void 0:w.status)===0?f():l.value=!1},$=()=>{};return H(()=>{R()}),ie(r,d=>{d&&f()}),(d,w)=>{const u=re,n=K,p=S,c=de,s=Q,g=ee;return V(),q("div",null,[t(u,{type:"info",class:"my-4"},{default:o(()=>[M(v(e(a)("org.oatab.tips")),1)]),_:1}),x("div",kt,[x("div",Mt,[x("div",{style:Ce({color:e(i).primaryColor})},v(e(a)("org.oatab.selectUser"))+": ",5),t(n,{style:{width:"200px"},onUpdateValue:z,options:e(y)},null,8,["options"])]),t(s,null,{default:o(()=>[t(c,{onPositiveClick:U,onNegativeClick:$,disabled:!e(r)},{trigger:o(()=>[t(p,{class:"!bg-[#638EE2] text-white",disabled:!e(r)},{default:o(()=>[M(v(e(a)("org.oatab.allDeviceEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[M(" "+v(e(a)("org.oatab.confirmDeviceEdit")),1)]),_:1},8,["disabled"]),t(c,{onPositiveClick:k,onNegativeClick:$,disabled:!e(r)},{trigger:o(()=>[t(p,{class:"!bg-[#7964E3] text-white",disabled:!e(r)},{default:o(()=>[M(v(e(a)("org.oatab.allDeviceRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[M(" "+v(e(a)("org.oatab.confirmDeviceRead")),1)]),_:1},8,["disabled"])]),_:1})]),t(g,{loading:e(l),columns:h,data:e(_)},null,8,["loading","data"])])}}}),Ut={class:"flex items-center my-2"},Rt={class:"flex items-center gap-2 mr-4"},Ot=L({__name:"AuthByDevice",setup(I){const i=ue(),{t:a}=B(),m=b(!1),l=T(),r=b(),z=u=>{r.value=u},C=b(),h=async(u,n)=>{if(m.value)return;m.value=!0;const[p,c]=await ke({org_id:+l.query.id,user_id:n,device_group_id:r.value,permission:u?"EDIT":"READ"});!p&&(c==null?void 0:c.status)===0?U():m.value=!1},y=[{title:a("org.oatab.member"),key:"user_name"},{title:a("org.oatab.role"),key:"role",render(u){return E(xe,{role:u.org_role,classes:"w-[80px] inline-flex items-center justify-center"})}},{title:a("org.oatab.auth"),key:"auth",render(u){return E(_e,{railStyle:({checked:n})=>{const p={};return n?p.background="#638EE2":p.background="#7964E3",p},value:u.permission==="EDIT",onUpdateValue:n=>h(n,u.user_id)},{checked:()=>"EDIT",unchecked:()=>"READ"})}}],R=b(),_=async()=>{const[u,n]=await Se({organization_id:+l.query.id});!u&&(n==null?void 0:n.status)===0&&n.data&&(R.value=n.data.map(p=>({...p,label:p.device_group_name,value:p.device_group_id})))},f=b(),U=async()=>{m.value=!0;const[u,n]=await Pe({organization_id:+l.query.id,device_group_id:r.value});m.value=!1,!u&&n&&n.status===0&&(f.value=n.data.user_list.map(p=>{var c,s;return{...p,org_role:(s=(c=C.value)==null?void 0:c.find(g=>g.user_id===p.user_id))==null?void 0:s.org_role}}))},k=async()=>{if(m.value)return;m.value=!0;const[u,n]=await me({org_id:+l.query.id,device_group_id:r.value,permission:"EDIT"});!u&&(n==null?void 0:n.status)===0?U():m.value=!1},$=async()=>{if(m.value)return;m.value=!0;const[u,n]=await me({org_id:+l.query.id,device_group_id:r.value,permission:"READ"});!u&&(n==null?void 0:n.status)===0?U():m.value=!1},d=()=>{},w=async()=>{const[u,n]=await ce({organization_id:+l.query.id});!u&&(n==null?void 0:n.status)===0&&(C.value=n.data)};return H(()=>{_(),w()}),ie(r,u=>{u&&U()}),(u,n)=>{const p=K,c=S,s=de,g=Q,O=ee;return V(),q("div",null,[x("div",Ut,[x("div",Rt,[x("div",{style:Ce({color:e(i).primaryColor})},v(e(a)("org.oatab.selectDevice"))+": ",5),t(p,{style:{width:"200px"},onUpdateValue:z,options:e(R)},null,8,["options"])]),t(g,null,{default:o(()=>[t(s,{onPositiveClick:k,onNegativeClick:d,disabled:!e(r)},{trigger:o(()=>[t(c,{class:"!bg-[#638EE2] text-white",disabled:!e(r)},{default:o(()=>[M(v(e(a)("org.oatab.allUserEdit")),1)]),_:1},8,["disabled"])]),default:o(()=>[M(" "+v(e(a)("org.oatab.confirmMemberRead")),1)]),_:1},8,["disabled"]),t(s,{onPositiveClick:$,onNegativeClick:d,disabled:!e(r)},{trigger:o(()=>[t(c,{class:"!bg-[#7964E3] text-white",disabled:!e(r)},{default:o(()=>[M(v(e(a)("org.oatab.allUserRead")),1)]),_:1},8,["disabled"])]),default:o(()=>[M(" "+v(e(a)("org.oatab.confirmMemberEdit")),1)]),_:1},8,["disabled"])]),_:1})]),t(O,{loading:e(m),columns:y,data:e(f)},null,8,["loading","data"])])}}}),$t={class:"flex items-center gap-1"},Vt={class:"flex items-center gap-1"},Et=L({__name:"OAuth",setup(I){const{t:i}=B();return(a,m)=>{const l=ae,r=ze,z=Me;return V(),q("div",null,[t(z,{type:"card","pane-class":"!pl-0"},{default:o(()=>[t(r,{name:"byuser"},{tab:o(()=>[x("div",$t,[t(l,{component:e(lt)},null,8,["component"]),M(" "+v(e(i)("org.oatab.tab1")),1)])]),default:o(()=>[t(zt)]),_:1}),t(r,{name:"bydevice"},{tab:o(()=>[x("div",Vt,[t(l,{component:e(tt)},null,8,["component"]),M(" "+v(e(i)("org.oatab.tab2")),1)])]),default:o(()=>[t(Ot)]),_:1})]),_:1})])}}}),It={class:"w-full"},Lt=L({__name:"OSSModal",props:{isGlobal:{type:Boolean}},emits:["close"],setup(I,{expose:i,emit:a}){const m=I,l=a,r=ue(),z=Be(),C=J(),{t:h}=B(),y=T(),R=b(!1),_=b(!1),f=()=>{_.value=!1,Y(()=>{setTimeout(()=>{d.value={if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}},200)}),l("close")},U=()=>{_.value=!0},k=b({user_id:{required:!0,message:h("common.required")},org_role:{required:!0,message:h("common.required")}}),$=b(null),d=b({if_global:void 0,disabled:void 0,organization_id:void 0,auth_text:void 0}),w=()=>{var c;(c=$.value)==null||c.validate(async s=>{if(s)return;const[g,O]=await Te({...d.value,if_global:m.isGlobal,organization_id:+y.query.id});!g&&(O==null?void 0:O.status)===0&&(z.success(h("org.ootab.successfully")),f())})},u=c=>{c||f()},n=async()=>{const[c,s]=await Ne({organization_id:+y.query.id});if(!c&&(s==null?void 0:s.status)===0){const g=s.data.auth_text;d.value={...d.value,auth_text:g}}},p=async()=>{const[c,s]=await He();if(!c&&(s==null?void 0:s.status)===0){const g=s.data.auth_text;d.value={...d.value,if_global:!0,auth_text:g}}};return H(()=>{m.isGlobal?p():n()}),i({open:U,close:f}),(c,s)=>{const g=le,O=re,P=ne,A=S,D=se;return V(),G(D,{show:e(_),"onUpdate:show":s[1]||(s[1]=F=>j(_)?_.value=F:null),"close-on-esc":!1,onUpdateShow:u,"auto-focus":!1},{default:o(()=>[t(Z,{style:{width:"700px"}},{default:o(()=>[t(W,null,{default:o(()=>[t(P,{ref_key:"formRef",ref:$,model:e(d),rules:e(k),size:"small"},{default:o(()=>[e(d).if_global?N("",!0):(V(),G(g,{key:0,label:e(h)("org.orgName"),path:"name"},{default:o(()=>{var F;return[M(v((F=e(C).info)==null?void 0:F.organization_name),1)]}),_:1},8,["label"])),t(g,{label:e(h)(`org.ootab.${c.isGlobal?"globalCfg":"orgCfg"}`),path:"auth_text"},{default:o(()=>[x("div",It,[t(O,{type:"info",title:e(h)("org.ootab.osstips"),class:"whitespace-pre-line w-full"},{default:o(()=>s[2]||(s[2]=[M(v(`{
                    "host": "oss.example.com",
                    "bucket": "minjiang",
                    "access_key": "AK",
                    "secret_key": "SK",
                    "secure": true,
                    "region": "cn-shanghai"
                }`))])),_:1},8,["title"]),t(e(Je),{class:Ge(["!w-full mt-5",[e(r).baseColor==="#000"?"jse-theme-dark":""]]),style:{height:"300px"},modelValue:e(d).auth_text,"onUpdate:modelValue":s[0]||(s[0]=F=>e(d).auth_text=F),mode:"text"},null,8,["class","modelValue"])])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1}),t(X,{onCancel:f},{default:o(()=>[t(A,{type:"primary",onClick:w,loading:e(R)},{default:o(()=>[M(v(e(h)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),qt=L({__name:"OOrg",setup(I){const i=Fe(),a=oe("ossRef"),{t:m}=B(),l=b(!1),r=b(!1),z=(C=!1)=>{l.value=!0,r.value=C,Y(()=>{setTimeout(()=>{var h;(h=a.value)==null||h.open()},100)})};return(C,h)=>{const y=S,R=Q;return V(),q("div",null,[t(R,null,{default:o(()=>{var _;return[t(y,{type:"primary",onClick:h[0]||(h[0]=()=>z())},{icon:o(()=>[t(e(he))]),default:o(()=>[M(" "+v(e(m)("org.ootab.setOss")),1)]),_:1}),(_=e(i).info)!=null&&_.is_sys_admin?(V(),G(y,{key:0,type:"primary",onClick:h[1]||(h[1]=()=>z(!0))},{icon:o(()=>[t(e(he))]),default:o(()=>[M(" "+v(e(m)("org.ootab.setGlobalOss")),1)]),_:1})):N("",!0)]}),_:1}),e(l)?(V(),G(Lt,{key:0,ref_key:"ossRef",ref:a,"is-global":e(r),onClose:h[2]||(h[2]=_=>l.value=!1)},null,8,["is-global"])):N("",!0)])}}}),At=L({__name:"OGroup",setup(I){const{t:i}=B(),a=be(),m=T(),l=async(_,f)=>{const[U,k]=await Ke({device_id:f,hidden:!_});!U&&(k==null?void 0:k.status)===0&&R()},r=[{title:i("deviceGroup.groupId"),key:"device_group_id"},{title:i("deviceGroup.groupName"),key:"device_group_name"},{title:i("deviceGroup.description"),key:"description"},{title:i("deviceGroup.createTime"),key:"create_time"},{title:i("createuser"),key:"user_name"},{title:i("deviceGroup.status"),key:"status",render:_=>{var f;if(_.status)return E(ye,{type:((f=fe[_.status])==null?void 0:f.type)||"default",bordered:!1},{default:()=>{var U;return i((U=fe[_.status])==null?void 0:U.text)}})}},{title:i("deviceGroup.show2desktop"),key:"status",render:_=>{if(_.status)return E("div",{onClick:f=>f.stopPropagation()},E(_e,{value:!_.hidden,onUpdateValue:f=>l(f,_.device_group_id)}))}}],z=b(),C=je({page:1,per_page:ge,total:0}),h=b(!1),y=({device_group_name:_})=>({class:"cursor-pointer",onClick:()=>{a.push({name:"taskList",query:{device_group_name:_}})}}),R=async()=>{h.value=!0,z.value=void 0;const[_,f]=await Ze({...We(C),org_id:+(m.query.id||"")});h.value=!1,!_&&f&&f.status===0&&(z.value=f.data.list,C.total=f.data.total)};return H(()=>{R()}),(_,f)=>{const U=ee,k=Qe;return V(),q("div",null,[t(U,{columns:r,data:e(z),pagination:!1,loading:e(h),"row-props":y},null,8,["data","loading"]),e(C).total>e(ge)?(V(),G(k,{key:0,"page-info":e(C),"onUpdate:pageInfo":f[0]||(f[0]=$=>j(C)?C.value=$:null),onUpdateList:R},null,8,["page-info"])):N("",!0)])}}}),Dt={class:"flex items-center gap-1"},St={class:"flex items-center gap-1"},Pt={class:"flex items-center gap-1"},Bt={class:"flex items-center gap-1"},t0=L({__name:"OrgView",setup(I){const{t:i}=B(),a=b("group");return(m,l)=>{const r=Xe,z=ae,C=ze,h=Me;return V(),q("div",null,[t(vt),t(r),t(h,{type:"line",value:e(a),"onUpdate:value":l[0]||(l[0]=y=>j(a)?a.value=y:null),placement:"left","pane-class":"!pl-5"},{default:o(()=>[t(C,{name:"group"},{tab:o(()=>[x("div",Dt,[t(z,{component:e(it)},null,8,["component"]),M(" "+v(e(i)("org.group")),1)])]),default:o(()=>[t(At)]),_:1}),t(C,{name:"member"},{tab:o(()=>[x("div",St,[t(z,{component:e(Ue)},null,8,["component"]),M(" "+v(e(i)("org.omember")),1)])]),default:o(()=>[t(Ct)]),_:1}),t(C,{name:"auth"},{tab:o(()=>[x("div",Pt,[t(z,{component:e(st)},null,8,["component"]),M(" "+v(e(i)("org.oauth")),1)])]),default:o(()=>[t(Et)]),_:1}),t(C,{name:"organization"},{tab:o(()=>[x("div",Bt,[t(z,{component:e(te)},null,8,["component"]),M(" "+v(e(i)("org.oorganization")),1)])]),default:o(()=>[t(qt)]),_:1})]),_:1},8,["value"])])}}});export{t0 as default};
