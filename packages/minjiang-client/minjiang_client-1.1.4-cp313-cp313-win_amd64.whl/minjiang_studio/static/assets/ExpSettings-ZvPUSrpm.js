import{u as B}from"./exp-fN6tgzBZ.js";import{d as w,A as P,e as k,f as t,al as $,i as r,w as m,ab as u,ac as p,l as a,cz as n,aF as D,s as O,t as j,p as R,cA as z,S as A,n as N,m as q,ad as J,bp as L,b as M,L as U,bk as Y,v as G,k as H,ap as K,h as Q,Y as W,aq as X}from"./index-DJskbzIk.js";import{i as Z}from"./json-editor-vue-cMpGPz9p.js";import{V as g}from"./index-DDdGfEJ1.js";import{N as ee}from"./InputNumber-CtZNiVVn.js";import{N as ae}from"./Switch-BTGJkP8J.js";import{_ as le}from"./Cascader-C4NH3za0.js";import"./index.browser-OxPLOBIU.js";import"./Checkbox-B0NmEvB4.js";const oe=w({__name:"DynamicFormItem",props:{paramsCfg:{},formValue:{},pathPrefix:{},disabled:{type:Boolean}},setup(C){const _=P();return(l,d)=>{const V=D,f=R,s=N,y=ee,h=ae,i=q;return t(!0),k(J,null,$(l.paramsCfg,(e,c)=>(t(),k("div",{key:c},[r(i,{label:e.dtype===a(n).text?"":e.title,path:`${l.pathPrefix?l.pathPrefix+".":""}${e.field}`},{default:m(()=>[e.dtype===a(n).text?(t(),u(V,{key:0,class:"w-full",type:"info","show-icon":!1},{default:m(()=>[O(j(e==null?void 0:e.title),1)]),_:2},1024)):p("",!0),e.dtype===a(n).enum&&e.options?(t(),u(f,{key:1,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,options:a(z)(e.options),clearable:"",filterable:"",multiple:e.multi_choose},null,8,["value","onUpdate:value","options","multiple"])):p("",!0),e.dtype===a(n).dict||e.dtype===a(n).list?(t(),u(a(Z),{key:2,class:A(["w-full",[a(_).baseColor==="#000"?"jse-theme-dark":""]]),modelValue:l.formValue[e.field],"onUpdate:modelValue":o=>l.formValue[e.field]=o,mode:"text"},null,8,["class","modelValue","onUpdate:modelValue"])):p("",!0),e.dtype===a(n).str&&e.is_python_script?(t(),u(a(g),{key:3,height:"100px",value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,theme:"vs-dark",language:"python"},null,8,["value","onUpdate:value"])):p("",!0),e.dtype===a(n).str&&e.multi_line?(t(),u(s,{key:4,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,clearable:"",maxlength:e.max_length,type:"textarea"},null,8,["value","onUpdate:value","maxlength"])):e.dtype===a(n).str?(t(),u(s,{key:5,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,clearable:"",maxlength:e.max_length},null,8,["value","onUpdate:value","maxlength"])):p("",!0),e.dtype===a(n).int?(t(),u(y,{key:6,min:e.min,max:e.max,precision:0,class:"w-full",value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o},null,8,["min","max","value","onUpdate:value"])):p("",!0),e.dtype===a(n).float?(t(),u(y,{key:7,min:e.min,max:e.max,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,class:"w-full"},null,8,["min","max","value","onUpdate:value"])):p("",!0),e.dtype===a(n).bool?(t(),u(h,{key:8,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o},null,8,["value","onUpdate:value"])):p("",!0)]),_:2},1032,["label","path"])]))),128)}}}),_e=w({__name:"ExpSettings",setup(C){const _=B(),{expOptions:l,running:d,showPlotParamsModal:V,expFolderId:f}=L(_),{t:s}=M(),y=U(()=>{const i={title:{required:!0,message:s("common.required")},desc:{required:!0,message:s("common.required")},options:{required:!0,message:s("common.required")}};return Object.keys(l.value||[]).forEach(e=>{i[e]={required:!0,message:s("common.required")}}),i}),h=U(()=>{const i=JSON.parse(JSON.stringify(_.expFolderTree||[]));return Y(i),i});return(i,e)=>{const c=N,o=q,S=le,I=K,E=H,F=G,T=X;return t(),u(T,{show:a(V)},{default:m(()=>[r(F,{style:{width:"800px"},"content-class":"!p-2",bordered:!1},{default:m(()=>{var b,x;return[r(E,{model:a(d).formValue,rules:a(y),ref:"formRef",class:"min-w-[340px]",disabled:!!((x=(b=a(_))==null?void 0:b.expInfo)!=null&&x.exp_id)},{default:m(()=>[r(I,{style:{"max-height":"calc(100vh - 255px)","padding-right":"12px"}},{default:m(()=>[Q("div",null,[r(o,{label:a(s)("expInfo.expTitle"),path:"title"},{default:m(()=>[r(c,{value:a(d).formValue.title,"onUpdate:value":e[0]||(e[0]=v=>a(d).formValue.title=v)},null,8,["value"])]),_:1},8,["label"]),r(o,{label:a(s)("expInfo.expDesc"),path:"desc"},{default:m(()=>[r(c,{type:"textarea",value:a(d).formValue.desc,"onUpdate:value":e[1]||(e[1]=v=>a(d).formValue.desc=v)},null,8,["value"])]),_:1},8,["label"]),r(o,{label:a(s)("expInfo.expFolder")},{default:m(()=>[r(S,{value:a(f),"onUpdate:value":e[2]||(e[2]=v=>W(f)?f.value=v:null),options:a(h),"value-field":"key","check-strategy":"child",cascade:!1},null,8,["value","options"])]),_:1},8,["label"])]),a(l)?(t(),u(oe,{key:0,paramsCfg:a(l),"form-value":a(d).formValue},null,8,["paramsCfg","form-value"])):p("",!0)]),_:1})]),_:1},8,["model","rules","disabled"])]}),_:1})]),_:1},8,["show"])}}});export{_e as default};
