from minjiang_client.com.request import request as request
from minjiang_client.utils.retry_wrapper import retry_on_failure as retry_on_failure

def create_sub_process(organization_id: int, device_group_name: str, space_id: int, title: str, description: str, resource_id: int, source: str, space_timestamp: int, template_name: str, exp_folder_id: int = None, exp_folder_path: str = None, priority: str = None): ...
def upload_result_chunk_to_cache(sub_process_id: int, piece_id: int, data_base64: str, progress: str, piece_start: int, piece_end: int, piece_status: str, final_piece: bool): ...
def download_result_chunk_from_cache(sub_process_id: int, piece_id: int): ...
def upload_result(sub_process_id: int, resource_id: int, progress: str, piece_id: int, piece_start: int, piece_end: int, piece_status: str, final_piece: bool): ...
def list_sub_processes(space_id: int, page: int = 1, per_page: int = 10): ...
def list_new_experiments(space_id: int, since_exp_id: int, exp_folder_id: int = None, limit: int = 50): ...
def get_sub_process_detail(sub_process_id: int): ...
def get_sub_process_progress(sub_process_id: int): ...
def get_sub_process_result(sub_process_id: int, last_piece_id: int, piece_num: int): ...
def terminate_sub_process(sub_process_id: int = None): ...
def pull_sub_process(device_group_name: str): ...
def upload_pull_status(sub_process_id: int): ...
def upload_sub_process_status(sub_process_id: int, status: str): ...
def add_sub_process_msg(sub_process_id: int, message_level: str, message: str): ...
def get_sub_process_msg(sub_process_id: int): ...
def add_fitting_result(space_id: int, sub_process_id_list: list, big_picture_id: int, small_picture_id: int, data_id: int = None): ...
def get_fitting_result(sub_process_id: int | list[int]): ...
def create_node(session_id: int, node_name: str, index: int): ...
def create_cali_session(space_id: int, resource_id: int): ...
def update_cali_session_status(session_id: int, status: str): ...
def save_cali_result(session_id: int, node_id: int, entity: str, result_data: str): ...
def session_heartbeat(session_id: int): ...
def get_cali_session_list(device_group_name: str, page: int = 1, per_page: int = 10): ...
def get_cali_session_resource_id(session_id: int): ...
def get_session_nodes(session_id: int): ...
def get_session_info(session_id: int): ...
def get_authorized_sub_processes_list(sub_process_id: int | list[int]) -> list[int]: ...
def mark_sub_process(exp_id: int, is_marked: bool, mark_note: str = None): ...
def create_exp_folder(space_id: int, exp_folder_name: str, parent_exp_folder_id: int = None, exp_folder_description: str = None): ...
def rename_exp_folder(exp_folder_id: int, new_exp_folder_name: str, new_exp_folder_description: str = None): ...
def delete_exp_folder(exp_folder_id: int): ...
def move_exp_folder(exp_folder_id: int, target_parent_exp_folder_id: int = None): ...
def move_experiments_to_exp_folder(space_id: int, sub_process_ids: list[int], target_exp_folder_id: int = None): ...
def get_exp_folder_tree(space_id: int): ...
def check_exp_folder_empty(exp_folder_id: int): ...
def list_sub_processes_by_folder(space_id: int, exp_folder_id: int = None, before_exp_id: int = None, limit: int = 10): ...
def batch_query_experiments(device_group_name: str, space_id: int, exp_ids: list[int]): ...
def count_experiments_by_folder(space_id: int, exp_folder_id: int = None): ...
def list_exp_folders_by_parent(device_group_name: str, space_id: int, parent_exp_folder_id: int = None): ...
def list_active_experiments(device_group_name: str): ...
def list_recent_finished_exps(device_group_name: str, minutes: int = 10): ...
def get_latest_sub_process_id_by_folder(device_group_name: str, space_id: int, exp_folder_id: int = None): ...
def list_marked_exps(organization_id: int = None, device_group_name: str = None, space_id: int = None, page: int = 1, per_page: int = 10): ...
