import{u as G}from"./groupDetail-grzpJhg1.js";import{d as L,e as S,f as c,h as n,b as I,t as i,l as e,az as re,r as C,C as P,c as pe,o as A,L as _e,aI as te,ab as T,s as u,i as t,N as B,aL as Z,F,aM as U,w as a,aN as H,aO as K,v as se,aE as j,ad as J,al as W,aq as ue,ap as oe,aP as de,aQ as me,a5 as V,K as fe,aR as ae,aS as xe,I as E,as as R,aT as ee,B as X,aG as ne,A as le,at as ge,E as ve,aa as N,ac as ie,ah as ye,aU as he,am as be,R as we,aD as ke}from"./index-DJskbzIk.js";import{A as ce}from"./AppsListDetail24Filled-BGRUPGEn.js";import{s as $e}from"./exp-Dzc8nAzP.js";import{R as Ce,g as Se,a as De,t as Te,E as ze}from"./ExpsTpl-Cy9MpRNK.js";import{u as Me}from"./useInterval-CS7hQKQu.js";import{_ as Le}from"./DataTable-BkhITQT9.js";import{_ as qe}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-BXf019OU.js";import{S as Ee,a as je,_ as Re,u as Fe}from"./index-B281A4Xr.js";import{S as Ie}from"./SpaceTools-Ds6UqpWj.js";import{A as Ne}from"./Add-B9E6ooHy.js";import{E as Pe}from"./ExperimentTwotone-CUUKUJME.js";import"./DynamicForm-B5kgL0W4.js";import"./json-editor-vue-cMpGPz9p.js";import"./index-DDdGfEJ1.js";import"./InputNumber-CtZNiVVn.js";import"./Checkbox-B0NmEvB4.js";import"./RadioGroup-DFjU_ho_.js";import"./Switch-BTGJkP8J.js";import"./WaveformPane.vue_vue_type_script_setup_true_lang-CYNgzszk.js";import"./exp-fN6tgzBZ.js";import"./index.browser-OxPLOBIU.js";import"./installCanvasRenderer-DQ3trSBi.js";import"./Refresh-IIbt43T_.js";import"./Pagination-MzAc_u8k.js";import"./prop-NnGblK-3.js";import"./download-C2161hUv.js";import"./index-CljUi5cZ.js";import"./params-elF_11QE.js";import"./PaginationView.vue_vue_type_script_setup_true_lang-C5I4MAUI.js";import"./Popconfirm-DFFNKs94.js";import"./FileSaver.min-CWr_Rv27.js";const Ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Be=L({name:"FlashAuto24Filled",render:function(m,_){return c(),S("svg",Ae,_[0]||(_[0]=[n("g",{fill:"none"},[n("path",{d:"M12.75 1.996a.75.75 0 0 1 .738.89l-.026.097l-1.671 5.013h4.46a.75.75 0 0 1 .61 1.187l-.07.082l-11.995 12.5c-.509.531-1.376.087-1.287-.605l.018-.096l1.767-7.068H2.75a.75.75 0 0 1-.742-.86l.021-.096l3-10.5a.75.75 0 0 1 .612-.536l.11-.008h7zm5.394 9.373l.05.105l3.75 9.496a.75.75 0 0 1-1.351.643l-.044-.092l-.998-2.525h-4.11l-.996 2.525a.75.75 0 0 1-.876.453l-.097-.031a.75.75 0 0 1-.453-.876l.03-.097l3.75-9.496c.235-.595 1.043-.63 1.345-.105zm-.648 2.422l-1.463 3.705h2.926l-1.463-3.705z",fill:"currentColor"})],-1)]))}}),Ue={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 25 24"},Ve=L({name:"PeopleQueue24Filled",render:function(m,_){return c(),S("svg",Ue,_[0]||(_[0]=[n("g",{fill:"none"},[n("path",{d:"M10.916 6a3 3 0 1 1-6 0a3 3 0 0 1 6 0zm-5.75 4a1.75 1.75 0 0 0-1.75 1.75v4.75a4.5 4.5 0 1 0 9 0v-4.75a1.75 1.75 0 0 0-1.75-1.75h-5.5zm6.11 10.854a5.49 5.49 0 0 0 2.14-4.354v-4.75c0-.665-.236-1.274-.629-1.75h2.379c.966 0 1.75.784 1.75 1.75v4.75a4.5 4.5 0 0 1-5.64 4.354zM11.916 6c0 1-.367 1.913-.973 2.614a3 3 0 1 0 0-5.229c.606.702.973 1.616.973 2.615zm3.86 14.854a5.49 5.49 0 0 0 2.14-4.354v-4.75c0-.665-.236-1.274-.629-1.75h2.379c.966 0 1.75.784 1.75 1.75v4.75a4.5 4.5 0 0 1-5.64 4.354zM16.416 6c0 1-.367 1.913-.973 2.614a3 3 0 1 0 0-5.229c.606.702.973 1.616.973 2.615z",fill:"currentColor"})],-1)]))}}),Qe=L({__name:"CheckMore",emits:["more"],setup(q,{emit:m}){const _=m,{t:l}=I(),f=()=>{_("more")};return(w,k)=>(c(),S("div",{onClick:f,class:"underline more-primary-link flex items-center justify-center h-full text-xs"},i(e(l)("common.seeMore")),1))}}),Oe={class:"card-root h-full pr-5"},Ye={class:"flex justify-between mb-4 color-bar"},Ge={class:"flex items-center gap-2 font-bold"},He={class:"flex justify-center items-center"},Ke={class:"font-bold mb-0.5 flex items-center gap-1"},Je={class:"font-bold mb-0.5 flex items-center gap-1"},We={class:"font-bold mb-0.5 flex items-center gap-1"},Xe=L({__name:"UtilityList",setup(q){const m=G(),_=re(),l=C(),{t:f}=I(),w=P(),k=pe(),b=async()=>{const[g,v]=await de({group_name:w.query.device_group_name});return!g&&(v==null?void 0:v.status)===0?(l.value=v.data.utilities,!0):!1};A(()=>{b()});const y=C(),$=async g=>{var o;if(y.value)return;y.value=g.utility_name;const v=g.utility_name;await b();const p=(o=l.value)==null?void 0:o.find(r=>r.utility_name===v);if(!p)return;if(p!=null&&p.is_running){y.value=void 0,_.refreshPluginUtilities=!0,window.open(p.full_url,"_blank");return}const[M,s]=await me({group_name:w.query.device_group_name,utility_name:p.utility_name,config:{}});y.value=void 0,!M&&(s==null?void 0:s.status)===0&&(window.open(`${s.data.url}${p==null?void 0:p.default_route}`,"_blank"),_.refreshPluginUtilities=!0)},z=()=>{k.push({name:"utilities",query:w.query})},D=_e(()=>{var v,p;let g=(v=m.curSpace)==null?void 0:v.space_id;return!g&&m.spaceList&&(g=(p=m.spaceList[0])==null?void 0:p.space_id),g});return(g,v)=>{const p=B,M=U,s=j,o=se,r=te("router-link"),d=K,h=ue,Q=H,O=oe;return c(),S("div",Oe,[n("div",Ye,[n("div",Ge,[n("div",He,[t(p,{component:e(Z)},null,8,["component"])]),u(" "+i(e(f)("groupDetail.utilities.tabName")),1)]),n("div",null,[t(Qe,{onMore:z})])]),e(F)(e(l))?(c(),T(M,{key:0,class:"!mt-20"})):(c(),T(O,{key:1,style:{height:"calc(50vh - 160px)"}},{default:a(()=>[t(Q,{cols:2,"x-gap":12,"y-gap":12},{default:a(()=>[t(d,null,{default:a(()=>[t(r,{to:{name:"exps",query:{device_group_name:e(w).query.device_group_name,space_id:e(D)}}},{default:a(()=>[t(o,{class:"utility-item gradient-border-boxshadow","content-class":"!p-0 flex gap-2 flex-col",bordered:!1},{default:a(()=>[n("div",Ke,[t(p,{component:e(ce),size:"20"},null,8,["component"]),u(" "+i(e(f)("groupDetail.parameterManager.tabName")),1)]),t(s,{"line-clamp":1,class:"opacity-70 text-xs font-light"},{default:a(()=>[u(i(e(f)("groupDetail.overview.paramsDesc")),1)]),_:1})]),_:1})]),_:1},8,["to"])]),_:1}),t(d,null,{default:a(()=>[t(r,{to:{name:"autoCaliList",query:{device_group_name:e(w).query.device_group_name}}},{default:a(()=>[t(o,{class:"utility-item gradient-border-boxshadow","content-class":"!p-0 flex gap-2 flex-col",bordered:!1},{default:a(()=>[n("div",Je,[t(p,{component:e(Be),size:"20"},null,8,["component"]),u(" "+i(e(f)("groupDetail.autoCali.tabName")),1)]),t(s,{"line-clamp":1,class:"opacity-70 text-xs font-light"},{default:a(()=>[u(i(e(f)("groupDetail.overview.autoCaliDesc")),1)]),_:1})]),_:1})]),_:1},8,["to"])]),_:1}),(c(!0),S(J,null,W(e(l),x=>(c(),T(d,{key:x.utility_name},{default:a(()=>[t(h,{show:!!(e(y)&&e(y)===x.utility_name)},{default:a(()=>[t(o,{class:"utility-item gradient-border-boxshadow","content-class":"!p-0 flex gap-2 flex-col",bordered:!1,onClick:()=>$(x)},{default:a(()=>[n("div",We,[t(p,{component:e(Z),size:"20"},null,8,["component"]),u(" "+i(x.title),1)]),t(s,{"line-clamp":1,class:"opacity-70 text-xs font-light"},{default:a(()=>[u(i(x.description),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1032,["show"])]),_:2},1024))),128))]),_:1})]),_:1}))])}}}),Ze=V(Xe,[["__scopeId","data-v-5b195e67"]]),et={class:"pr-5 pt-5"},tt={class:"flex justify-between mb-4 color-bar"},st={class:"flex items-center gap-2 font-bold"},ot={class:"flex justify-center items-center"},at=L({__name:"ExpQueue",setup(q,{expose:m}){const _=fe(),{t:l}=I(),f=C(!1),w=C(!1),k=C(),b=P(),y=async()=>{if(f.value)return;f.value=!0;const[s,o]=await Se({device_group_name:b.query.device_group_name});f.value=!1,!s&&(o==null?void 0:o.status)==0&&(k.value=o.data.list||[])},{stop:$,start:z,runing:D}=Me(y,{isManual:!0,duration:2*1e3});A(()=>{D.value||(y(),z())}),ae(()=>{D.value||(y(),z())}),xe(()=>{$()});const g=(s,o)=>{const r=new URLSearchParams({device_group_name:b.query.device_group_name,space_id:s.space_id,exp_id:String(s.exp_id)});window.open(`/experiment/plotter?${r.toString()}`,ne(o))};m({open:()=>w.value=!0});const v=async(s,o)=>{o.stopPropagation();const[r,d]=await $e({exp_id:s.exp_id});!r&&(d==null?void 0:d.status)===0&&(_.success("实验终止成功"),y())},p=[{title:l("groupDetail.exps.expTableId"),key:"exp_id",width:80},{title:l("groupDetail.exps.expTableTitle"),key:"exp_name",render(s){return E(j,{lineClamp:1},{default:()=>s.exp_name})}},{title:l("groupDetail.exps.expTableDesc"),key:"description",render(s){return E(j,{lineClamp:1},{default:()=>s.description})}},{title:l("groupDetail.exps.expTableSpaceName"),key:"space_name",width:120},{title:l("groupDetail.exps.expTableStatus"),key:"status",width:180,render(s){return E("div",{class:"flex items-center"},[E(R,{color:{color:ee[s.status].color,textColor:"#fff"},bordered:!1,class:"w-[180px] flex items-center justify-center text-xs"},{default:()=>{var o;return[E("span",l((o=ee[s.status])==null?void 0:o.text)),E("span",s.process)]}})])}},{title:l("groupDetail.exps.expTableAction"),key:"actions",align:"center",width:80,render(s){return E(X,{size:"small",quaternary:!0,type:"primary",onClick:o=>v(s,o)},{icon:()=>E(Ce),default:()=>l("groupDetail.exps.stop")})}}],M=s=>({class:"cursor-pointer",onClick:o=>{g(s,o)}});return(s,o)=>{const r=B,d=U,h=Le;return c(),S("div",et,[n("div",tt,[n("div",st,[n("div",ot,[t(r,{component:e(Ve)},null,8,["component"])]),u(" "+i(e(l)("groupDetail.exps.expQueue")),1)])]),e(F)(e(k))?(c(),T(d,{key:0,class:"!mt-20"})):(c(),T(h,{key:1,columns:p,data:e(k),pagination:!1,"row-props":M,"max-height":"calc(50vh - 200px)",size:"small"},null,8,["data"]))])}}}),nt=V(at,[["__scopeId","data-v-e5333904"]]),lt={class:"pl-5 pt-5"},it={class:"flex justify-between mb-4 color-bar"},ct={class:"flex items-center gap-2 font-bold"},rt={class:"flex justify-center items-center"},pt=["onClick"],_t={class:"flex justify-between items-center"},ut={class:"flex gap-1 items-center"},dt={class:"opacity-70"},mt={class:"flex-1 flex items-center justify-between gap-2 mt-1"},ft={class:"flex items-center gap-2"},xt={key:1,class:"italic opacity-70 text-xs"},gt=L({__name:"FavorityList",setup(q,{expose:m}){const _=le(),{t:l}=I(),f=C(!1),w=C(!1),k=C(),b=ge({page:1,per_page:20,total:0}),y=P(),$=async s=>{var h;if(f.value)return;f.value=!0;let o=b.page;s&&(o+=1);const[r,d]=await De({device_group_name:y.query.device_group_name,page:o,per_page:b.per_page});f.value=!1,!r&&(d==null?void 0:d.status)==0&&(F((h=d.data)==null?void 0:h.list)||(b.page=o),b.total=d.data.total,s?k.value=Fe([...k.value||[],...d.data.list],"sub_process_id"):k.value=d.data.list||[])};A(()=>{b.page=1,b.total=0,ve(()=>{$()})});const z=(s,o)=>{const r=new URLSearchParams({device_group_name:y.query.device_group_name,space_id:s.space_id,exp_id:String(s.sub_process_id)});window.open(`/experiment/plotter?${r.toString()}`,ne(o))};m({open:()=>w.value=!0});const D=C(),g=C(),v=(s,o)=>{var r;o.stopPropagation(),D.value=s,(r=g.value)==null||r.open()},p=async()=>{var r;if(!D.value)return;const[s,o]=await Te({exp_id:D.value.sub_process_id,is_marked:!D.value.is_marked});!s&&(o==null?void 0:o.status)===0&&($(),(r=g.value)==null||r.close())},M=()=>{f.value||$(!0)};return(s,o)=>{const r=B,d=U,h=K,Q=H,O=Re;return c(),S("div",lt,[n("div",it,[n("div",ct,[n("div",rt,[t(r,{component:e(Ee)},null,8,["component"])]),u(" "+i(e(l)("groupDetail.exps.favorites")),1)])]),e(F)(e(k))?(c(),T(d,{key:0,class:"!mt-20"})):(c(),T(O,{key:1,distance:50,onLoad:M,style:{height:"calc(50vh - 160px)"}},{default:a(()=>[t(Q,{cols:1,"x-gap":12,"y-gap":12},{default:a(()=>[(c(!0),S(J,null,W(e(k),x=>(c(),T(h,{key:x.exp_id},{default:a(()=>[n("div",{class:"utility-item border-b",style:N({borderColor:e(_).dividerColor}),onClick:Y=>z(x,Y)},[n("div",_t,[n("div",ut,[t(e(R),{color:{color:"#7816ff",textColor:"#fff"},size:"small",class:"w-20 flex justify-center items-center"},{default:a(()=>[u(" Exp "+i(x==null?void 0:x.sub_process_id),1)]),_:2},1024),t(e(j),{"line-clamp":1,class:"font-bold"},{default:a(()=>[u(i(x.title),1)]),_:2},1024),x.description?(c(),T(e(j),{key:0,"line-clamp":1,class:"opacity-70 max-w-1/2"},{default:a(()=>[u("  ( "+i(x.description)+" ) ",1)]),_:2},1024)):ie("",!0)]),n("div",dt,[t(e(R),{size:"tiny",bordered:!1},{default:a(()=>[u(i(e(ye)(x.create_timestamp*1e3).format("YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024)])]),n("div",mt,[n("div",ft,[t(e(R),{size:"tiny",bordered:!1},{default:a(()=>[u(i(e(l)("groupDetail.exps.progress"))+": "+i(e(he)(x.progress,!0)),1)]),_:2},1024),x.mark_note?(c(),T(e(j),{key:0,"line-clamp":1,class:"opacity-70 text-xs italic"},{default:a(()=>[u(i(e(l)("groupDetail.exps.expTableMarkNote"))+": "+i(x.mark_note),1)]),_:2},1024)):(c(),S("span",xt,i(e(l)("groupDetail.exps.noNote")),1))]),n("div",null,[t(e(X),{type:"primary",onClick:Y=>v(x,Y),size:"tiny"},{icon:a(()=>[t(e(je))]),default:a(()=>[u(" "+i(e(l)("groupDetail.exps.unfavority")),1)]),_:2},1032,["onClick"])])])],12,pt)]),_:2},1024))),128))]),_:1})]),_:1})),t(qe,{ref_key:"confirmModalRef",ref:g,contentTips:e(l)("groupDetail.exps.unfavorityTips"),onOk:p},null,8,["contentTips"])])}}}),vt=V(gt,[["__scopeId","data-v-548ee326"]]),yt={class:"flex justify-between mb-4 color-bar"},ht={class:"flex items-center gap-2 font-bold"},bt={class:"flex justify-center items-center"},wt=L({__name:"PaneTitle",props:{title:{}},setup(q){return(m,_)=>{const l=B;return c(),S("div",yt,[n("div",ht,[n("div",bt,[t(l,{component:e(ce)},null,8,["component"])]),u(" "+i(m.title),1)]),be(m.$slots,"default",{},void 0,!0)])}}}),kt=V(wt,[["__scopeId","data-v-4221738d"]]),$t={class:"pl-5"},Ct={class:"font-bold mb-0.5 flex items-center gap-1 justify-between"},St={class:"flex items-center gap-1 flex-1",style:{"max-width":"70%"}},Dt={class:"flex gap-1"},Tt={class:"flex items-center gap-1"},zt={class:"flex justify-between items-center gap-2"},Mt={class:"italic text-xs opacity-70"},Lt=L({__name:"SpaceList",setup(q){const{t:m}=I(),_=C(),l=P(),f=G(),w=C(),k=$=>{var z;w.value=$,(z=_.value)==null||z.open()},b=C(),y=()=>{var $;($=b.value)==null||$.add()};return($,z)=>{const D=X,g=U,v=j,p=R,M=se,s=te("router-link"),o=K,r=H,d=oe;return c(),S("div",$t,[t(kt,{title:e(m)("groupDetail.exps.expSpace")},{default:a(()=>[t(D,{onClick:y,type:"primary",size:"tiny"},{icon:a(()=>[t(e(Ne))]),default:a(()=>[u(" "+i(e(m)("groupDetail.parameterManager.createSpace")),1)]),_:1})]),_:1},8,["title"]),e(F)(e(f).spaceList)?(c(),T(g,{key:0,class:"!mt-20"})):ie("",!0),t(d,{style:{height:"calc(50vh - 160px)"}},{default:a(()=>[t(r,{cols:3,"x-gap":12,"y-gap":12,class:"gradient-border-boxshadow"},{default:a(()=>[(c(!0),S(J,null,W(e(f).spaceList,h=>(c(),T(o,{key:h.space_id},{default:a(()=>[t(s,{to:{name:"exps",query:{device_group_name:e(l).query.device_group_name,space_id:h.space_id}}},{default:a(()=>[t(M,{"content-class":"!p-[10px] flex gap-2 flex-col cursor-pointer"},{default:a(()=>[n("div",Ct,[n("div",St,[t(v,null,{default:a(()=>[u(i(h.space_name),1)]),_:2},1024)]),n("div",Dt,[t(D,{size:"tiny",type:"primary",onClick:we(()=>k(h.space_id),["stop","prevent"])},{icon:a(()=>[t(e(Pe))]),default:a(()=>[u(" "+i(e(m)("groupDetail.overview.createExp")),1)]),_:2},1032,["onClick"])])]),n("div",Tt,[t(p,{size:"tiny"},{default:a(()=>[u(" #"+i(h.space_id),1)]),_:2},1024),t(v,{"line-clamp":1,class:"opacity-70 text-xs font-light"},{default:a(()=>[u(i(h.description),1)]),_:2},1024)]),n("div",zt,[n("span",Mt,i(e(ke)(h.create_time)),1)])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})]),_:1}),t(ze,{ref_key:"expsTplRef",ref:_,fid:"root","space-id":String(e(w))},null,8,["space-id"]),t(Ie,{hidenbtns:!0,ref_key:"spaceToolsRef",ref:b},null,512)])}}}),qt={class:"flex flex-col",style:{height:"calc(100vh - 180px)"}},Et={class:"flex-1 h-full"},jt={class:"flex items-center flex-1"},Rt={class:"flex-1 h-full"},ms=L({__name:"OverView",setup(q){const m=G(),_=le(),l=()=>{m.curSpace=void 0};return A(()=>l()),ae(()=>l()),(f,w)=>(c(),S("div",qt,[n("div",{class:"flex items-center flex-1 border-b",style:N({borderColor:e(_).dividerColor})},[n("div",{class:"flex-1 border-r h-full",style:N({borderColor:e(_).dividerColor})},[t(Ze)],4),n("div",Et,[t(Lt)])],4),n("div",jt,[n("div",{class:"flex-1 border-r h-full",style:N({borderColor:e(_).dividerColor})},[t(nt)],4),n("div",Rt,[t(vt)])])]))}});export{ms as default};
