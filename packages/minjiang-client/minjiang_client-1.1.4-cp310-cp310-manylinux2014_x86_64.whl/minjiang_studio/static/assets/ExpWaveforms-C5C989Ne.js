import{bS as xi,I as fe,aV as tn,aX as Or,d as Ye,aZ as Si,b7 as Jo,b8 as pr,b$ as Ci,L as ht,bO as wn,ba as Oi,c0 as Ii,c1 as Ei,c2 as Ti,c3 as Di,aY as mo,c4 as Ni,c5 as Mi,ad as Xe,c6 as Ai,c7 as go,e as be,f as k,bd as Pi,h as L,J as Go,A as An,bp as hr,aa as Nt,l,c8 as ar,al as Tt,S as Wo,ab as Se,ac as Fe,w,i as y,B as Ct,s as ye,t as me,c9 as Vr,ca as ki,a5 as vr,r as _e,ap as Pn,am as Lr,ay as qr,b as Vt,a3 as _o,a6 as Dt,N as dn,Z as vn,Y as Ot,U as mn,V as $i,W as gn,X as _n,K as Ri,F as Ze,aE as zi,R as Fi,p as Xr,be as Li,E as St,bT as yo,ag as Ui,cb as In,bm as at,bn as mr,aA as Ur,k as gr,m as _r,cc as ji,n as Vo,j as qo,aN as Bi,aO as Hi,T as Ji,as as Gi,az as Wi,C as Vi,o as Xo,aM as qi,aq as Yo,cd as Xi,at as Ko,ce as Yr,by as Yi}from"./index-DJskbzIk.js";import{n as Kr}from"./index.browser-OxPLOBIU.js";import{u as yn}from"./exp-fN6tgzBZ.js";import{A as ir}from"./Add-B9E6ooHy.js";import{D as Qr,_ as Qo,Q as bo}from"./ScriptTemplate.vue_vue_type_script_setup_true_lang-DwkkEma9.js";import{P as Zo,a as Ki,_ as Qi}from"./WaveformPane.vue_vue_type_script_setup_true_lang-CYNgzszk.js";import{a as Zi,_ as ea}from"./Checkbox-B0NmEvB4.js";import{P as el}from"./Pulse-DtbfsA4Q.js";import{N as Zr}from"./InputNumber-CtZNiVVn.js";import{V as ta}from"./index-DDdGfEJ1.js";import{_ as tl}from"./InputGroupLabel-DspqGwTB.js";import{_ as nl}from"./Popconfirm-DFFNKs94.js";import{n as rl,o as ol,p as al}from"./exp-Dzc8nAzP.js";import{o as il}from"./index-DAzX16xw.js";import{C as ll}from"./CommingSoon-DLYSBCEt.js";import"./Cascader-C4NH3za0.js";import"./installCanvasRenderer-DQ3trSBi.js";import"./Refresh-IIbt43T_.js";import"./Image-CjHsT37c.js";import"./download-C2161hUv.js";let wo=!1;function sl(){if(xi&&window.CSS&&!wo&&(wo=!0,"registerProperty"in(window==null?void 0:window.CSS)))try{CSS.registerProperty({name:"--n-color-start",syntax:"<color>",inherits:!1,initialValue:"#0000"}),CSS.registerProperty({name:"--n-color-end",syntax:"<color>",inherits:!1,initialValue:"#0000"})}catch{}}function cl(){return fe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36"},fe("path",{fill:"#EF9645",d:"M15.5 2.965c1.381 0 2.5 1.119 2.5 2.5v.005L20.5.465c1.381 0 2.5 1.119 2.5 2.5V4.25l2.5-1.535c1.381 0 2.5 1.119 2.5 2.5V8.75L29 18H15.458L15.5 2.965z"}),fe("path",{fill:"#FFDC5D",d:"M4.625 16.219c1.381-.611 3.354.208 4.75 2.188.917 1.3 1.187 3.151 2.391 3.344.46.073 1.234-.313 1.234-1.397V4.5s0-2 2-2 2 2 2 2v11.633c0-.029 1-.064 1-.082V2s0-2 2-2 2 2 2 2v14.053c0 .017 1 .041 1 .069V4.25s0-2 2-2 2 2 2 2v12.638c0 .118 1 .251 1 .398V8.75s0-2 2-2 2 2 2 2V24c0 6.627-5.373 12-12 12-4.775 0-8.06-2.598-9.896-5.292C8.547 28.423 8.096 26.051 8 25.334c0 0-.123-1.479-1.156-2.865-1.469-1.969-2.5-3.156-3.125-3.866-.317-.359-.625-1.707.906-2.384z"}))}function ul(){return fe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36"},fe("circle",{fill:"#FFCB4C",cx:"18",cy:"17.018",r:"17"}),fe("path",{fill:"#65471B",d:"M14.524 21.036c-.145-.116-.258-.274-.312-.464-.134-.46.13-.918.59-1.021 4.528-1.021 7.577 1.363 7.706 1.465.384.306.459.845.173 1.205-.286.358-.828.401-1.211.097-.11-.084-2.523-1.923-6.182-1.098-.274.061-.554-.016-.764-.184z"}),fe("ellipse",{fill:"#65471B",cx:"13.119",cy:"11.174",rx:"2.125",ry:"2.656"}),fe("ellipse",{fill:"#65471B",cx:"24.375",cy:"12.236",rx:"2.125",ry:"2.656"}),fe("path",{fill:"#F19020",d:"M17.276 35.149s1.265-.411 1.429-1.352c.173-.972-.624-1.167-.624-1.167s1.041-.208 1.172-1.376c.123-1.101-.861-1.363-.861-1.363s.97-.4 1.016-1.539c.038-.959-.995-1.428-.995-1.428s5.038-1.221 5.556-1.341c.516-.12 1.32-.615 1.069-1.694-.249-1.08-1.204-1.118-1.697-1.003-.494.115-6.744 1.566-8.9 2.068l-1.439.334c-.54.127-.785-.11-.404-.512.508-.536.833-1.129.946-2.113.119-1.035-.232-2.313-.433-2.809-.374-.921-1.005-1.649-1.734-1.899-1.137-.39-1.945.321-1.542 1.561.604 1.854.208 3.375-.833 4.293-2.449 2.157-3.588 3.695-2.83 6.973.828 3.575 4.377 5.876 7.952 5.048l3.152-.681z"}),fe("path",{fill:"#65471B",d:"M9.296 6.351c-.164-.088-.303-.224-.391-.399-.216-.428-.04-.927.393-1.112 4.266-1.831 7.699-.043 7.843.034.433.231.608.747.391 1.154-.216.405-.74.546-1.173.318-.123-.063-2.832-1.432-6.278.047-.257.109-.547.085-.785-.042zm12.135 3.75c-.156-.098-.286-.243-.362-.424-.187-.442.023-.927.468-1.084 4.381-1.536 7.685.48 7.823.567.415.26.555.787.312 1.178-.242.39-.776.495-1.191.238-.12-.072-2.727-1.621-6.267-.379-.266.091-.553.046-.783-.096z"}))}function fl(){return fe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36"},fe("ellipse",{fill:"#292F33",cx:"18",cy:"26",rx:"18",ry:"10"}),fe("ellipse",{fill:"#66757F",cx:"18",cy:"24",rx:"18",ry:"10"}),fe("path",{fill:"#E1E8ED",d:"M18 31C3.042 31 1 16 1 12h34c0 2-1.958 19-17 19z"}),fe("path",{fill:"#77B255",d:"M35 12.056c0 5.216-7.611 9.444-17 9.444S1 17.271 1 12.056C1 6.84 8.611 3.611 18 3.611s17 3.229 17 8.445z"}),fe("ellipse",{fill:"#A6D388",cx:"18",cy:"13",rx:"15",ry:"7"}),fe("path",{d:"M21 17c-.256 0-.512-.098-.707-.293-2.337-2.337-2.376-4.885-.125-8.262.739-1.109.9-2.246.478-3.377-.461-1.236-1.438-1.996-1.731-2.077-.553 0-.958-.443-.958-.996 0-.552.491-.995 1.043-.995.997 0 2.395 1.153 3.183 2.625 1.034 1.933.91 4.039-.351 5.929-1.961 2.942-1.531 4.332-.125 5.738.391.391.391 1.023 0 1.414-.195.196-.451.294-.707.294zm-6-2c-.256 0-.512-.098-.707-.293-2.337-2.337-2.376-4.885-.125-8.262.727-1.091.893-2.083.494-2.947-.444-.961-1.431-1.469-1.684-1.499-.552 0-.989-.447-.989-1 0-.552.458-1 1.011-1 .997 0 2.585.974 3.36 2.423.481.899 1.052 2.761-.528 5.131-1.961 2.942-1.531 4.332-.125 5.738.391.391.391 1.023 0 1.414-.195.197-.451.295-.707.295z",fill:"#5C913B"}))}function dl(){return fe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 36 36"},fe("path",{fill:"#FFCC4D",d:"M36 18c0 9.941-8.059 18-18 18-9.94 0-18-8.059-18-18C0 8.06 8.06 0 18 0c9.941 0 18 8.06 18 18"}),fe("ellipse",{fill:"#664500",cx:"18",cy:"27",rx:"5",ry:"6"}),fe("path",{fill:"#664500",d:"M5.999 11c-.208 0-.419-.065-.599-.2-.442-.331-.531-.958-.2-1.4C8.462 5.05 12.816 5 13 5c.552 0 1 .448 1 1 0 .551-.445.998-.996 1-.155.002-3.568.086-6.204 3.6-.196.262-.497.4-.801.4zm24.002 0c-.305 0-.604-.138-.801-.4-2.64-3.521-6.061-3.598-6.206-3.6-.55-.006-.994-.456-.991-1.005C22.006 5.444 22.45 5 23 5c.184 0 4.537.05 7.8 4.4.332.442.242 1.069-.2 1.4-.18.135-.39.2-.599.2zm-16.087 4.5l1.793-1.793c.391-.391.391-1.023 0-1.414s-1.023-.391-1.414 0L12.5 14.086l-1.793-1.793c-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414l1.793 1.793-1.793 1.793c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l1.793-1.793 1.793 1.793c.195.195.451.293.707.293s.512-.098.707-.293c.391-.391.391-1.023 0-1.414L13.914 15.5zm11 0l1.793-1.793c.391-.391.391-1.023 0-1.414s-1.023-.391-1.414 0L23.5 14.086l-1.793-1.793c-.391-.391-1.023-.391-1.414 0s-.391 1.023 0 1.414l1.793 1.793-1.793 1.793c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l1.793-1.793 1.793 1.793c.195.195.451.293.707.293s.512-.098.707-.293c.391-.391.391-1.023 0-1.414L24.914 15.5z"}))}const pl=tn("result",`
 color: var(--n-text-color);
 line-height: var(--n-line-height);
 font-size: var(--n-font-size);
 transition:
 color .3s var(--n-bezier);
`,[tn("result-icon",`
 display: flex;
 justify-content: center;
 transition: color .3s var(--n-bezier);
 `,[Or("status-image",`
 font-size: var(--n-icon-size);
 width: 1em;
 height: 1em;
 `),tn("base-icon",`
 color: var(--n-icon-color);
 font-size: var(--n-icon-size);
 `)]),tn("result-content",{marginTop:"24px"}),tn("result-footer",`
 margin-top: 24px;
 text-align: center;
 `),tn("result-header",[Or("title",`
 margin-top: 16px;
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 text-align: center;
 color: var(--n-title-text-color);
 font-size: var(--n-title-font-size);
 `),Or("description",`
 margin-top: 4px;
 text-align: center;
 font-size: var(--n-font-size);
 `)])]),hl={403:cl,404:ul,418:fl,500:dl,info:()=>fe(Di,null),success:()=>fe(Ti,null),warning:()=>fe(Ei,null),error:()=>fe(Ii,null)},vl=Object.assign(Object.assign({},pr.props),{size:{type:String,default:"medium"},status:{type:String,default:"info"},title:String,description:String}),ml=Ye({name:"Result",props:vl,slots:Object,setup(e){const{mergedClsPrefixRef:n,inlineThemeDisabled:t}=Jo(e),r=pr("Result","-result",pl,Ci,e,n),a=ht(()=>{const{size:c,status:d}=e,{common:{cubicBezierEaseInOut:u},self:{textColor:g,lineHeight:h,titleTextColor:C,titleFontWeight:I,[wn("iconColor",d)]:v,[wn("fontSize",c)]:x,[wn("titleFontSize",c)]:O,[wn("iconSize",c)]:H}}=r.value;return{"--n-bezier":u,"--n-font-size":x,"--n-icon-size":H,"--n-line-height":h,"--n-text-color":g,"--n-title-font-size":O,"--n-title-font-weight":I,"--n-title-text-color":C,"--n-icon-color":v||""}}),i=t?Oi("result",ht(()=>{const{size:c,status:d}=e;let u="";return c&&(u+=c[0]),d&&(u+=d[0]),u}),a,e):void 0;return{mergedClsPrefix:n,cssVars:t?void 0:a,themeClass:i==null?void 0:i.themeClass,onRender:i==null?void 0:i.onRender}},render(){var e;const{status:n,$slots:t,mergedClsPrefix:r,onRender:a}=this;return a==null||a(),fe("div",{class:[`${r}-result`,this.themeClass],style:this.cssVars},fe("div",{class:`${r}-result-icon`},((e=t.icon)===null||e===void 0?void 0:e.call(t))||fe(Si,{clsPrefix:r},{default:()=>hl[n]()})),fe("div",{class:`${r}-result-header`},this.title?fe("div",{class:`${r}-result-header__title`},this.title):null,this.description?fe("div",{class:`${r}-result-header__description`},this.description):null),t.default&&fe("div",{class:`${r}-result-content`},t),t.footer&&fe("div",{class:`${r}-result-footer`},t.footer()))}}),gl=mo([tn("skeleton",`
 height: 1em;
 width: 100%;
 transition:
 --n-color-start .3s var(--n-bezier),
 --n-color-end .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 animation: 2s skeleton-loading infinite cubic-bezier(0.36, 0, 0.64, 1);
 background-color: var(--n-color-start);
 `),mo("@keyframes skeleton-loading",`
 0% {
 background: var(--n-color-start);
 }
 40% {
 background: var(--n-color-end);
 }
 80% {
 background: var(--n-color-start);
 }
 100% {
 background: var(--n-color-start);
 }
 `)]),_l=Object.assign(Object.assign({},pr.props),{text:Boolean,round:Boolean,circle:Boolean,height:[String,Number],width:[String,Number],size:String,repeat:{type:Number,default:1},animated:{type:Boolean,default:!0},sharp:{type:Boolean,default:!0}}),yl=Ye({name:"Skeleton",inheritAttrs:!1,props:_l,setup(e){sl();const{mergedClsPrefixRef:n}=Jo(e),t=pr("Skeleton","-skeleton",gl,Ai,e,n);return{mergedClsPrefix:n,style:ht(()=>{var r,a;const i=t.value,{common:{cubicBezierEaseInOut:c}}=i,d=i.self,{color:u,colorEnd:g,borderRadius:h}=d;let C;const{circle:I,sharp:v,round:x,width:O,height:H,size:B,text:ie,animated:ee}=e;B!==void 0&&(C=d[wn("height",B)]);const T=I?(r=O??H)!==null&&r!==void 0?r:C:O,N=(a=I?O??H:H)!==null&&a!==void 0?a:C;return{display:ie?"inline-block":"",verticalAlign:ie?"-0.125em":"",borderRadius:I?"50%":x?"4096px":v?"":h,width:typeof T=="number"?go(T):T,height:typeof N=="number"?go(N):N,animation:ee?"":"none","--n-bezier":c,"--n-color-start":u,"--n-color-end":g}})}},render(){const{repeat:e,style:n,mergedClsPrefix:t,$attrs:r}=this,a=fe("div",Ni({class:`${t}-skeleton`,style:n},r));return e>1?fe(Xe,null,Mi(e,null).map(i=>[a,`
`])):a}}),bl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},wl=Ye({name:"Draggable",render:function(n,t){return k(),be("svg",bl,t[0]||(t[0]=[Pi('<path d="M10 6h4v4h-4z" fill="currentColor"></path><path d="M18 6h4v4h-4z" fill="currentColor"></path><path d="M10 14h4v4h-4z" fill="currentColor"></path><path d="M18 14h4v4h-4z" fill="currentColor"></path><path d="M10 22h4v4h-4z" fill="currentColor"></path><path d="M18 22h4v4h-4z" fill="currentColor"></path>',6)]))}}),xl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},jr=Ye({name:"Script",render:function(n,t){return k(),be("svg",xl,t[0]||(t[0]=[L("path",{d:"M18.83 26l2.58-2.58L20 22l-4 4l4 4l1.42-1.41L18.83 26z",fill:"currentColor"},null,-1),L("path",{d:"M27.17 26l-2.58 2.58L26 30l4-4l-4-4l-1.42 1.41L27.17 26z",fill:"currentColor"},null,-1),L("path",{d:"M14 28H8V4h8v6a2.006 2.006 0 0 0 2 2h6v6h2v-8a.91.91 0 0 0-.3-.7l-7-7A.909.909 0 0 0 18 2H8a2.006 2.006 0 0 0-2 2v24a2.006 2.006 0 0 0 2 2h6zm4-23.6l5.6 5.6H18z",fill:"currentColor"},null,-1)]))}}),Sl={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Cl=Ye({name:"EditOutlined",render:function(n,t){return k(),be("svg",Sl,t[0]||(t[0]=[L("path",{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3l-362.7 362.6l-88.9 15.7l15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z",fill:"currentColor"},null,-1)]))}}),Ol={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Il=Ye({name:"ArrowLeft24Regular",render:function(n,t){return k(),be("svg",Ol,t[0]||(t[0]=[L("g",{fill:"none"},[L("path",{d:"M10.733 19.79a.75.75 0 0 0 1.034-1.086L5.516 12.75H20.25a.75.75 0 0 0 0-1.5H5.516l6.251-5.955a.75.75 0 0 0-1.034-1.086l-7.42 7.067a.995.995 0 0 0-.3.58a.754.754 0 0 0 .001.289a.995.995 0 0 0 .3.579l7.419 7.067z",fill:"currentColor"})],-1)]))}}),El={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Tl=Ye({name:"ArrowRight24Regular",render:function(n,t){return k(),be("svg",El,t[0]||(t[0]=[L("g",{fill:"none"},[L("path",{d:"M13.267 4.209a.75.75 0 0 0-1.034 1.086l6.251 5.955H3.75a.75.75 0 0 0 0 1.5h14.734l-6.251 5.954a.75.75 0 0 0 1.034 1.087l7.42-7.067a.996.996 0 0 0 .3-.58a.758.758 0 0 0-.001-.29a.995.995 0 0 0-.3-.578l-7.419-7.067z",fill:"currentColor"})],-1)]))}}),Dl={class:"thead"},Nl={class:"tr"},Ml={class:"th-title-wrap flex justify-between items-center group"},Al={class:"w-8 h-5 inline-flex"},Pl={class:"th-title inline-flex items-center gap-4 relative"},kl={class:"hidden group-hover:inline-flex items-center justify-center absolute top-[1px] -right-6"},$l={class:"w-8 h-5 inline-flex"},Rl=Ye({__name:"WaveformHeader",props:{layers:{}},setup(e){Go(u=>({"5097a8e4":l(n).dividerColor,"255fe442":l(n).tableHeaderColor}));const n=An(),t=yn(),{layers:r,gates:a,program:i}=hr(t),c=u=>{var I;const g=JSON.parse(JSON.stringify(a.value||{}));r.value[u].forEach(v=>{delete g[v]}),a.value=g;const C=JSON.parse(JSON.stringify(i.value));Vr(C.waveform_script,v=>v.layer===u),r.value.length>ki&&(r.value.splice(u,1),(I=C.waveform_script)==null||I.forEach(v=>{v.layer>u&&(v.layer=v.layer-1)})),i.value=C},d=u=>{var h;r.value.splice(u,0,[]);const g=JSON.parse(JSON.stringify(((h=i.value)==null?void 0:h.waveform_script)||[]));g==null||g.forEach(C=>{C.layer>=u&&(C.layer=C.layer+1)}),i.value={...i.value||{},waveform_script:g}};return(u,g)=>{const h=Ct;return k(),be("table",{class:"table",style:Nt({width:`${100+l(ar)*l(r).length}px`})},[L("colgroup",null,[g[0]||(g[0]=L("col",{class:"w-[100px]"},null,-1)),(k(!0),be(Xe,null,Tt(l(r),(C,I)=>(k(),be("col",{key:I,class:Wo(`w-[${l(ar)}px]`)},null,2))),128))]),L("thead",Dl,[L("tr",Nl,[g[1]||(g[1]=L("th",{class:"th"},[L("div",{class:"th-title-wrap"},[L("div",{class:"th-title"},"Entities")])],-1)),(k(!0),be(Xe,null,Tt(l(r),(C,I)=>{var v,x,O,H,B,ie;return k(),be("th",{class:"th",key:I},[L("div",Ml,[(x=(v=l(t))==null?void 0:v.expInfo)!=null&&x.exp_id?Fe("",!0):(k(),Se(h,{key:0,type:"info",circle:"",quaternary:"",onClick:()=>d(I)},{icon:w(()=>[L("div",Al,[y(l(Il)),y(l(ir))])]),_:2},1032,["onClick"])),L("div",Pl,[ye(me(I)+" ",1),L("div",kl,[(H=(O=l(t))==null?void 0:O.expInfo)!=null&&H.exp_id?Fe("",!0):(k(),Se(h,{key:0,size:"small",class:"!w-5 !h-5",circle:"",type:"error",onClick:()=>c(I)},{icon:w(()=>[y(l(Qr))]),_:2},1032,["onClick"]))])]),(ie=(B=l(t))==null?void 0:B.expInfo)!=null&&ie.exp_id?Fe("",!0):(k(),Se(h,{key:1,type:"info",circle:"",quaternary:"",onClick:()=>d(I+1)},{icon:w(()=>[L("div",$l,[y(l(ir)),y(l(Tl))])]),_:2},1032,["onClick"]))])])}),128))])])],4)}}}),zl=vr(Rl,[["__scopeId","data-v-e2e4148d"]]),Fl=Ye({__name:"WaveformScroll",setup(e){const n=_e(),t=_e(),r=i=>{var d,u;const c=i.target;(d=t.value)!=null&&d.scrollbarInstRef&&((u=t.value)==null||u.scrollTo({left:c.scrollLeft}))},a=i=>{var d,u;const c=i.target;(d=n.value)!=null&&d.scrollbarInstRef&&((u=n.value)==null||u.scrollTo({left:c.scrollLeft}))};return(i,c)=>{const d=Pn;return k(),be("div",null,[y(d,{ref_key:"headerRef",ref:n,style:{"max-width":"calc(100vw - 212px)"},onScroll:r},{default:w(()=>[Lr(i.$slots,"header")]),_:3},512),y(d,{class:"box-border","x-scrollable":"",ref_key:"bodyRef",ref:t,onScroll:a,style:{maxHeight:"calc(100vh - 380px)",maxWidth:"calc(100vw - 212px)"}},{default:w(()=>[Lr(i.$slots,"default")]),_:3},512)])}}}),Ll={class:"flex justify-between items-center mb-2"},Ul={class:"flex items-baseline gap-2"},jl={class:"opacity-65 italic text-xs"},Bl=Ye({__name:"WaveformAction",setup(e){const n=qr(),t=yn(),{t:r}=Vt(),a=_e(),i=_e(!1),c=_e(!1),d=()=>{c.value=!0},u=()=>{c.value=!1,i.value=!1},g=v=>{v||u()},h=ht(()=>{let v=[];return _o(t.gates,x=>{v=v.concat(x.entity)}),v}),C=v=>{const x=JSON.parse(JSON.stringify(t.allQubits||{}));_o(x,O=>{v.includes(O.value)?O.visible=!0:O.visible=!1}),t.allQubits=x};Dt(()=>t.allQubits,v=>{a.value=v.filter(x=>x.visible).map(x=>x.value)},{immediate:!0});const I=()=>{n.showWaveformPane=!0};return(v,x)=>{var N,P;const O=Ct,H=dn,B=ea,ie=Zi,ee=Pn,T=vn;return k(),be("div",null,[L("div",Ll,[L("div",Ul,[y(O,{type:"primary",onClick:d},{default:w(()=>[ye(me(l(r)("expInfo.chooseEntities")),1)]),_:1}),L("div",jl,[(P=(N=l(t))==null?void 0:N.expInfo)!=null&&P.exp_id?(k(),be(Xe,{key:0},[ye(me(l(r)("expInfo.waveformReadonlyTips")),1)],64)):(k(),be(Xe,{key:1},[ye(me(l(r)("expInfo.waveformTips")),1)],64))])]),l(n).showWaveformPane?Fe("",!0):(k(),Se(O,{key:0,type:"primary",onClick:I},{icon:w(()=>[y(H,{component:l(Zo)},null,8,["component"])]),default:w(()=>[ye(" "+me(l(r)("expInfo.viewWaveForms")),1)]),_:1}))]),y(T,{show:l(c),"onUpdate:show":x[1]||(x[1]=F=>Ot(c)?c.value=F:null),"on-update:show":g,"auto-focus":!1},{default:w(()=>[y(mn,{style:{width:"660px"},size:"huge",bordered:!1,class:"!pt-0"},{default:w(()=>[y($i,null,{default:w(()=>[ye(me(l(r)("expInfo.chooseEntities")),1)]),_:1}),y(gn,{style:{"min-height":"calc(100vh - 400px)"}},{default:w(()=>[y(ee,{style:{"max-height":"calc(100vh - 300px)"}},{default:w(()=>[y(ie,{value:l(a),"onUpdate:value":[x[0]||(x[0]=F=>Ot(a)?a.value=F:null),C]},{default:w(()=>[(k(!0),be(Xe,null,Tt(l(t).allQubits,F=>(k(),Se(B,{key:F.id,value:F.value,label:F.value,disabled:l(h).includes(F.value),style:{"min-width":"100px","margin-bottom":"14px"}},null,8,["value","label","disabled"]))),128))]),_:1},8,["value"])]),_:1})]),_:1}),y(_n,{onCancel:u,cancelText:"common.close"})]),_:1})]),_:1},8,["show"])])}}}),Hl=["id"],Jl={class:"flex items-center"},Gl={key:0,class:"gate-handle mt-1 px-2 cursor-move"},Wl={key:1,class:"ml-0.5 inline-flex items-center justify-center"},Vl={class:"flex items-center gap-3"},ql={class:"w-24"},Xl={class:"flex items-center gap-3 mt-5"},Yl={class:"w-24"},Kl=Ye({__name:"WaveformCell",props:{qubit:{},layer:{},layerIdx:{},changeId:{}},emits:["open-gate-modal","open-edit-modal"],setup(e,{expose:n,emit:t}){const{t:r}=Vt(),a=An(),i=yn(),{gates:c,layers:d,program:u}=hr(i),g=Ri(),h=_e(!1),C=()=>{h.value=!0},I=()=>{h.value=!1,x.value=void 0,v.value=void 0},v=_e(),x=_e(),O=ht(()=>i.allQubits.filter(X=>{if(X.visible)return!0}).map(X=>({...X,label:X.value}))),H=(R,X)=>{const ve=(j,G)=>c.value?d.value[G].some(te=>{var Ee;if(c.value&&c.value[te])return(Ee=c.value[te].entity)==null?void 0:Ee.includes(j)}):!1;return!R.some(j=>ve(j,X))},B=()=>{var Ee,we,K,$e,et,D,Q,ne;if(v.value===void 0)return;const R=($e=(K=(we=(Ee=_==null?void 0:_.value)==null?void 0:Ee.matchedGate)==null?void 0:we.val)==null?void 0:K.entity)==null?void 0:$e.length;if(R>1&&R!==((et=x.value)==null?void 0:et.length)||v.value>=d.value.length)return;if(!H(R===1?[x.value]:x.value,v.value)){g.error("目标位非空");return}if(R>1){const z=d.value[v.value];if(!Ze(z)){let de=[];if(z.forEach(ge=>{var re;de=de.concat(c.value?(re=c.value[ge])==null?void 0:re.entity:[])}),de.includes(x.value||""))return}}const ve=JSON.parse(JSON.stringify((D=_.value.matchedGate)==null?void 0:D.val));ve.entity=R>1?x.value:[x.value],(Q=ve==null?void 0:ve.waves)==null||Q.forEach((z,de)=>{var ge,re,ce,xe,Ie,Ce,De,Ae;if(z.channel){if(R===1)z.channel=z.channel.replace(((ce=(re=(ge=_==null?void 0:_.value)==null?void 0:ge.matchedGate)==null?void 0:re.val)==null?void 0:ce.entity[0])||"",x.value);else if(R>1){const Pe={i:0,t:""};(De=(Ce=(Ie=(xe=_==null?void 0:_.value)==null?void 0:xe.matchedGate)==null?void 0:Ie.val)==null?void 0:Ce.entity)==null||De.some((We,tt)=>{if(z.channel.startsWith(We))return Pe.i=tt,Pe.t=We,!0}),Pe.t&&(z.channel=(Ae=z.channel)==null?void 0:Ae.replace(Pe==null?void 0:Pe.t,x.value[Pe.i]))}}});const j=Kr();c.value={...c.value,[j]:ve};const G=JSON.parse(JSON.stringify(d.value));G[+v.value]?G[+v.value].push(j):G[+v.value]=[j],d.value=G;const Y=JSON.parse(JSON.stringify(u.value)),te=[];(ne=Y==null?void 0:Y.waveform_script)==null||ne.forEach(z=>{var de,ge,re,ce;z.layer===T.layerIdx&&((ce=(re=(ge=(de=_.value)==null?void 0:de.matchedGate)==null?void 0:ge.val)==null?void 0:re.entity)!=null&&ce.includes(z.entity))&&te.push({...z,entity:R>1?x.value[0]:x.value,layer:v.value})}),Y.waveform_script=Y.waveform_script.concat(te),u.value=Y,St(()=>{setTimeout(()=>{N("open-edit-modal",R===1?x.value:x.value[0],v.value),I()},200)})},ie=R=>{var ve,j,G,Y;const X=(Y=(G=(j=(ve=_==null?void 0:_.value)==null?void 0:ve.matchedGate)==null?void 0:j.val)==null?void 0:G.entity)==null?void 0:Y.length;Array.isArray(R)&&R.length>X&&St(()=>{var te;x.value=(te=x.value)==null?void 0:te.slice(0,X)})},ee=R=>{R||I()},T=e,N=t,P=R=>{R==null||R.preventDefault(),N("open-gate-modal",{...yo(T)})},F=()=>{var R;N("open-gate-modal",{...yo(T),gateInfo:(R=_.value)==null?void 0:R.matchedGate})},_=ht(()=>{var ve;if(Ze(c.value))return{};const R={};let X=`${T.qubit.id}__**__${T.qubit.value}__**__${T.layerIdx}`;return(ve=T.layer)==null||ve.some(j=>{var Y;const G=c.value?(Y=c.value[j])==null?void 0:Y.entity:null;if(G&&G.includes(T.qubit.value))return R.val=c.value?c.value[j]:void 0,R.key=j,X=`${T.qubit.id}__**__${T.qubit.value}__**__${T.layerIdx}__**__${j}`,!0}),{matchedGate:R,id:X}}),f=()=>{var G,Y,te;if(Ze((G=_.value)==null?void 0:G.matchedGate))return;const R=(te=(Y=_.value)==null?void 0:Y.matchedGate)==null?void 0:te.key,X=JSON.parse(JSON.stringify(c.value||{}));delete X[R];const ve=JSON.parse(JSON.stringify(d.value||[]));ve[T.layerIdx]=In(ve[T.layerIdx],R);const j=JSON.parse(JSON.stringify(u.value));Vr(j.waveform_script,Ee=>{var we,K,$e;if(T.layerIdx===Ee.layer&&(($e=(K=(we=_.value)==null?void 0:we.matchedGate)==null?void 0:K.val)!=null&&$e.entity.includes(Ee.entity)))return!0}),u.value=j,c.value=X,d.value=ve},$=_e(!1),q=_e(),U=R=>()=>fe(dn,null,{default:()=>fe(R)}),J=[{label:r("common.delete"),key:"delete",icon:U(Qr)},{label:r("common.copy"),key:"copy",icon:U(Ui)}],le=()=>{$.value=!1,q.value=void 0},ue=R=>{R==="delete"?f():R==="copy"&&C(),St(()=>le())},se=R=>{var X;(X=i==null?void 0:i.expInfo)!=null&&X.exp_id||(q.value={x:R.clientX+5,y:R.clientY+5},$.value=!0)};n({handleEdit:F,props:T});const Te=()=>{var R,X,ve;Ze((X=(R=_.value)==null?void 0:R.matchedGate)==null?void 0:X.val)&&!((ve=i==null?void 0:i.expInfo)!=null&&ve.exp_id)?P():F()};return(R,X)=>{var we,K,$e,et,D,Q,ne,z,de,ge,re,ce,xe,Ie,Ce,De,Ae,Pe,We,tt;const ve=Ct,j=zi,G=Xr,Y=Zr,te=vn,Ee=Li;return k(),be("div",{class:"group cell-group p-3",id:(we=l(_))==null?void 0:we.id,style:Nt({display:R.changeId===((K=l(_))==null?void 0:K.id)&&(($e=l(_))!=null&&$e.id)?"none":"block"}),onDblclick:Te},[l(Ze)((D=(et=l(_))==null?void 0:et.matchedGate)==null?void 0:D.val)&&!((ne=(Q=l(i))==null?void 0:Q.expInfo)!=null&&ne.exp_id)?(k(),Se(ve,{key:0,circle:"",type:"info",size:"small",class:"!w-5 !h-5",quaternary:"",onClick:P},{icon:w(()=>[y(l(ir))]),_:1})):l(Ze)((de=(z=l(_))==null?void 0:z.matchedGate)==null?void 0:de.val)?Fe("",!0):(k(),be(Xe,{key:1},[L("div",{class:"flex gap-4 justify-between items-center cursor-pointer",onDblclick:F,onContextmenu:Fi(se,["stop","prevent"])},[L("div",Jl,[(re=(ge=l(i))==null?void 0:ge.expInfo)!=null&&re.exp_id?Fe("",!0):(k(),be("span",Gl,[y(l(dn),{component:l(wl)},null,8,["component"])])),y(j,{style:{"max-width":"110px"}},{default:w(()=>{var Ve,Ue,Ke;return[ye(me((Ke=(Ue=(Ve=l(_))==null?void 0:Ve.matchedGate)==null?void 0:Ue.val)==null?void 0:Ke.gate_name),1)]}),_:1}),ye(" ("+me((Ce=(Ie=(xe=(ce=l(_))==null?void 0:ce.matchedGate)==null?void 0:xe.val)==null?void 0:Ie.entity)==null?void 0:Ce.join(","))+") ",1),l(Ze)((Pe=(Ae=(De=l(_))==null?void 0:De.matchedGate)==null?void 0:Ae.val)==null?void 0:Pe.waves)?Fe("",!0):(k(),be("span",Wl,[y(l(dn),{component:l(el),color:l(a).infoColor,size:"16"},null,8,["component","color"])]))])],32),y(te,{show:l(h),"onUpdate:show":X[2]||(X[2]=Ve=>Ot(h)?h.value=Ve:null),onUpdateShow:ee,"auto-focus":!1},{default:w(()=>[y(mn,{style:{width:"500px"}},{default:w(()=>[y(gn,null,{default:w(()=>{var Ve,Ue,Ke,st;return[L("div",Vl,[L("div",ql,me(l(r)("expInfo.targetEntity")),1),y(G,{multiple:((st=(Ke=(Ue=(Ve=l(_))==null?void 0:Ve.matchedGate)==null?void 0:Ue.val)==null?void 0:Ke.entity)==null?void 0:st.length)>1,filterable:"",value:l(x),"onUpdate:value":X[0]||(X[0]=vt=>Ot(x)?x.value=vt:null),options:l(O),"max-tag-count":2,onUpdateValue:ie,class:"flex-1"},null,8,["multiple","value","options"])]),L("div",Xl,[L("div",Yl,me(l(r)("expInfo.targetLayer")),1),y(Y,{class:"flex-1",value:l(v),"onUpdate:value":X[1]||(X[1]=vt=>Ot(v)?v.value=vt:null),min:0},null,8,["value"])])]}),_:1}),y(_n,{onCancel:I},{default:w(()=>[y(ve,{type:"primary",onClick:B},{default:w(()=>[ye(me(l(r)("common.OK")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])],64)),l($)?(k(),Se(Ee,{key:2,placement:"bottom-start",show:!0,options:J,x:(We=l(q))==null?void 0:We.x,y:(tt=l(q))==null?void 0:tt.y,onClickoutside:le,onSelect:ue},{default:w(()=>X[3]||(X[3]=[L("div",null,null,-1)])),_:1},8,["x","y"])):Fe("",!0)],44,Hl)}}});var xn={exports:{}};xn.exports;var xo;function Ql(){return xo||(xo=1,function(e,n){var t=200,r="Expected a function",a="__lodash_hash_undefined__",i=1,c=2,d=9007199254740991,u="[object Arguments]",g="[object Array]",h="[object Boolean]",C="[object Date]",I="[object Error]",v="[object Function]",x="[object GeneratorFunction]",O="[object Map]",H="[object Number]",B="[object Object]",ie="[object Promise]",ee="[object RegExp]",T="[object Set]",N="[object String]",P="[object Symbol]",F="[object WeakMap]",_="[object ArrayBuffer]",f="[object DataView]",$="[object Float32Array]",q="[object Float64Array]",U="[object Int8Array]",J="[object Int16Array]",le="[object Int32Array]",ue="[object Uint8Array]",se="[object Uint8ClampedArray]",Te="[object Uint16Array]",R="[object Uint32Array]",X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ve=/^\w*$/,j=/^\./,G=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,te=/\\(\\)?/g,Ee=/^\[object .+?Constructor\]$/,we=/^(?:0|[1-9]\d*)$/,K={};K[$]=K[q]=K[U]=K[J]=K[le]=K[ue]=K[se]=K[Te]=K[R]=!0,K[u]=K[g]=K[_]=K[h]=K[f]=K[C]=K[I]=K[v]=K[O]=K[H]=K[B]=K[ee]=K[T]=K[N]=K[F]=!1;var $e=typeof at=="object"&&at&&at.Object===Object&&at,et=typeof self=="object"&&self&&self.Object===Object&&self,D=$e||et||Function("return this")(),Q=n&&!n.nodeType&&n,ne=Q&&!0&&e&&!e.nodeType&&e,z=ne&&ne.exports===Q,de=z&&$e.process,ge=function(){try{return de&&de.binding("util")}catch{}}(),re=ge&&ge.isTypedArray;function ce(o,s){for(var b=-1,M=o?o.length:0;++b<M;)if(s(o[b],b,o))return!0;return!1}function xe(o){return function(s){return s==null?void 0:s[o]}}function Ie(o,s){for(var b=-1,M=Array(o);++b<o;)M[b]=s(b);return M}function Ce(o){return function(s){return o(s)}}function De(o,s){return o==null?void 0:o[s]}function Ae(o){var s=!1;if(o!=null&&typeof o.toString!="function")try{s=!!(o+"")}catch{}return s}function Pe(o){var s=-1,b=Array(o.size);return o.forEach(function(M,pe){b[++s]=[pe,M]}),b}function We(o,s){return function(b){return o(s(b))}}function tt(o){var s=-1,b=Array(o.size);return o.forEach(function(M){b[++s]=M}),b}var Ve=Array.prototype,Ue=Function.prototype,Ke=Object.prototype,st=D["__core-js_shared__"],vt=function(){var o=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),mt=Ue.toString,He=Ke.hasOwnProperty,nt=Ke.toString,jt=RegExp("^"+mt.call(He).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pt=D.Symbol,m=D.Uint8Array,E=Ke.propertyIsEnumerable,Z=Ve.splice,ke=We(Object.keys,Object),p=an(D,"DataView"),S=an(D,"Map"),W=an(D,"Promise"),Re=an(D,"Set"),ct=an(D,"WeakMap"),ut=an(Object,"create"),rn=Yt(p),qt=Yt(S),bn=Yt(W),on=Yt(Re),Rn=Yt(ct),zn=Pt?Pt.prototype:void 0,br=zn?zn.valueOf:void 0,ro=zn?zn.toString:void 0;function Xt(o){var s=-1,b=o?o.length:0;for(this.clear();++s<b;){var M=o[s];this.set(M[0],M[1])}}function xa(){this.__data__=ut?ut(null):{}}function Sa(o){return this.has(o)&&delete this.__data__[o]}function Ca(o){var s=this.__data__;if(ut){var b=s[o];return b===a?void 0:b}return He.call(s,o)?s[o]:void 0}function Oa(o){var s=this.__data__;return ut?s[o]!==void 0:He.call(s,o)}function Ia(o,s){var b=this.__data__;return b[o]=ut&&s===void 0?a:s,this}Xt.prototype.clear=xa,Xt.prototype.delete=Sa,Xt.prototype.get=Ca,Xt.prototype.has=Oa,Xt.prototype.set=Ia;function kt(o){var s=-1,b=o?o.length:0;for(this.clear();++s<b;){var M=o[s];this.set(M[0],M[1])}}function Ea(){this.__data__=[]}function Ta(o){var s=this.__data__,b=Ln(s,o);if(b<0)return!1;var M=s.length-1;return b==M?s.pop():Z.call(s,b,1),!0}function Da(o){var s=this.__data__,b=Ln(s,o);return b<0?void 0:s[b][1]}function Na(o){return Ln(this.__data__,o)>-1}function Ma(o,s){var b=this.__data__,M=Ln(b,o);return M<0?b.push([o,s]):b[M][1]=s,this}kt.prototype.clear=Ea,kt.prototype.delete=Ta,kt.prototype.get=Da,kt.prototype.has=Na,kt.prototype.set=Ma;function $t(o){var s=-1,b=o?o.length:0;for(this.clear();++s<b;){var M=o[s];this.set(M[0],M[1])}}function Aa(){this.__data__={hash:new Xt,map:new(S||kt),string:new Xt}}function Pa(o){return Un(this,o).delete(o)}function ka(o){return Un(this,o).get(o)}function $a(o){return Un(this,o).has(o)}function Ra(o,s){return Un(this,o).set(o,s),this}$t.prototype.clear=Aa,$t.prototype.delete=Pa,$t.prototype.get=ka,$t.prototype.has=$a,$t.prototype.set=Ra;function Fn(o){var s=-1,b=o?o.length:0;for(this.__data__=new $t;++s<b;)this.add(o[s])}function za(o){return this.__data__.set(o,a),this}function Fa(o){return this.__data__.has(o)}Fn.prototype.add=Fn.prototype.push=za,Fn.prototype.has=Fa;function Rt(o){this.__data__=new kt(o)}function La(){this.__data__=new kt}function Ua(o){return this.__data__.delete(o)}function ja(o){return this.__data__.get(o)}function Ba(o){return this.__data__.has(o)}function Ha(o,s){var b=this.__data__;if(b instanceof kt){var M=b.__data__;if(!S||M.length<t-1)return M.push([o,s]),this;b=this.__data__=new $t(M)}return b.set(o,s),this}Rt.prototype.clear=La,Rt.prototype.delete=Ua,Rt.prototype.get=ja,Rt.prototype.has=Ba,Rt.prototype.set=Ha;function Ja(o,s){var b=Kt(o)||fo(o)?Ie(o.length,String):[],M=b.length,pe=!!M;for(var V in o)He.call(o,V)&&!(pe&&(V=="length"||lo(V,M)))&&b.push(V);return b}function Ln(o,s){for(var b=o.length;b--;)if(uo(o[b][0],s))return b;return-1}var Ga=ai();function Wa(o,s){return o&&Ga(o,s,Gn)}function oo(o,s){s=jn(s,o)?[s]:ao(s);for(var b=0,M=s.length;o!=null&&b<M;)o=o[Bn(s[b++])];return b&&b==M?o:void 0}function Va(o){return nt.call(o)}function qa(o,s){return o!=null&&s in Object(o)}function wr(o,s,b,M,pe){return o===s?!0:o==null||s==null||!Hn(o)&&!Jn(s)?o!==o&&s!==s:Xa(o,s,wr,b,M,pe)}function Xa(o,s,b,M,pe,V){var Oe=Kt(o),qe=Kt(s),je=g,rt=g;Oe||(je=Bt(o),je=je==u?B:je),qe||(rt=Bt(s),rt=rt==u?B:rt);var ft=je==B&&!Ae(o),dt=rt==B&&!Ae(s),it=je==rt;if(it&&!ft)return V||(V=new Rt),Oe||vi(o)?io(o,s,b,M,pe,V):ii(o,s,je,b,M,pe,V);if(!(pe&c)){var bt=ft&&He.call(o,"__wrapped__"),wt=dt&&He.call(s,"__wrapped__");if(bt||wt){var Ht=bt?o.value():o,zt=wt?s.value():s;return V||(V=new Rt),b(Ht,zt,M,pe,V)}}return it?(V||(V=new Rt),li(o,s,b,M,pe,V)):!1}function Ya(o,s,b,M){var pe=b.length,V=pe;if(o==null)return!V;for(o=Object(o);pe--;){var Oe=b[pe];if(Oe[2]?Oe[1]!==o[Oe[0]]:!(Oe[0]in o))return!1}for(;++pe<V;){Oe=b[pe];var qe=Oe[0],je=o[qe],rt=Oe[1];if(Oe[2]){if(je===void 0&&!(qe in o))return!1}else{var ft=new Rt,dt;if(!(dt===void 0?wr(rt,je,M,i|c,ft):dt))return!1}}return!0}function Ka(o){if(!Hn(o)||fi(o))return!1;var s=ho(o)||Ae(o)?jt:Ee;return s.test(Yt(o))}function Qa(o){return Jn(o)&&Sr(o.length)&&!!K[nt.call(o)]}function Za(o){return typeof o=="function"?o:o==null?bi:typeof o=="object"?Kt(o)?ni(o[0],o[1]):ti(o):wi(o)}function ei(o){if(!di(o))return ke(o);var s=[];for(var b in Object(o))He.call(o,b)&&b!="constructor"&&s.push(b);return s}function ti(o){var s=si(o);return s.length==1&&s[0][2]?co(s[0][0],s[0][1]):function(b){return b===o||Ya(b,o,s)}}function ni(o,s){return jn(o)&&so(s)?co(Bn(o),s):function(b){var M=gi(b,o);return M===void 0&&M===s?_i(b,o):wr(s,M,void 0,i|c)}}function ri(o){return function(s){return oo(s,o)}}function oi(o){if(typeof o=="string")return o;if(Cr(o))return ro?ro.call(o):"";var s=o+"";return s=="0"&&1/o==-1/0?"-0":s}function ao(o){return Kt(o)?o:pi(o)}function ai(o){return function(s,b,M){for(var pe=-1,V=Object(s),Oe=M(s),qe=Oe.length;qe--;){var je=Oe[++pe];if(b(V[je],je,V)===!1)break}return s}}function io(o,s,b,M,pe,V){var Oe=pe&c,qe=o.length,je=s.length;if(qe!=je&&!(Oe&&je>qe))return!1;var rt=V.get(o);if(rt&&V.get(s))return rt==s;var ft=-1,dt=!0,it=pe&i?new Fn:void 0;for(V.set(o,s),V.set(s,o);++ft<qe;){var bt=o[ft],wt=s[ft];if(M)var Ht=Oe?M(wt,bt,ft,s,o,V):M(bt,wt,ft,o,s,V);if(Ht!==void 0){if(Ht)continue;dt=!1;break}if(it){if(!ce(s,function(zt,Qt){if(!it.has(Qt)&&(bt===zt||b(bt,zt,M,pe,V)))return it.add(Qt)})){dt=!1;break}}else if(!(bt===wt||b(bt,wt,M,pe,V))){dt=!1;break}}return V.delete(o),V.delete(s),dt}function ii(o,s,b,M,pe,V,Oe){switch(b){case f:if(o.byteLength!=s.byteLength||o.byteOffset!=s.byteOffset)return!1;o=o.buffer,s=s.buffer;case _:return!(o.byteLength!=s.byteLength||!M(new m(o),new m(s)));case h:case C:case H:return uo(+o,+s);case I:return o.name==s.name&&o.message==s.message;case ee:case N:return o==s+"";case O:var qe=Pe;case T:var je=V&c;if(qe||(qe=tt),o.size!=s.size&&!je)return!1;var rt=Oe.get(o);if(rt)return rt==s;V|=i,Oe.set(o,s);var ft=io(qe(o),qe(s),M,pe,V,Oe);return Oe.delete(o),ft;case P:if(br)return br.call(o)==br.call(s)}return!1}function li(o,s,b,M,pe,V){var Oe=pe&c,qe=Gn(o),je=qe.length,rt=Gn(s),ft=rt.length;if(je!=ft&&!Oe)return!1;for(var dt=je;dt--;){var it=qe[dt];if(!(Oe?it in s:He.call(s,it)))return!1}var bt=V.get(o);if(bt&&V.get(s))return bt==s;var wt=!0;V.set(o,s),V.set(s,o);for(var Ht=Oe;++dt<je;){it=qe[dt];var zt=o[it],Qt=s[it];if(M)var vo=Oe?M(Qt,zt,it,s,o,V):M(zt,Qt,it,o,s,V);if(!(vo===void 0?zt===Qt||b(zt,Qt,M,pe,V):vo)){wt=!1;break}Ht||(Ht=it=="constructor")}if(wt&&!Ht){var Wn=o.constructor,Vn=s.constructor;Wn!=Vn&&"constructor"in o&&"constructor"in s&&!(typeof Wn=="function"&&Wn instanceof Wn&&typeof Vn=="function"&&Vn instanceof Vn)&&(wt=!1)}return V.delete(o),V.delete(s),wt}function Un(o,s){var b=o.__data__;return ui(s)?b[typeof s=="string"?"string":"hash"]:b.map}function si(o){for(var s=Gn(o),b=s.length;b--;){var M=s[b],pe=o[M];s[b]=[M,pe,so(pe)]}return s}function an(o,s){var b=De(o,s);return Ka(b)?b:void 0}var Bt=Va;(p&&Bt(new p(new ArrayBuffer(1)))!=f||S&&Bt(new S)!=O||W&&Bt(W.resolve())!=ie||Re&&Bt(new Re)!=T||ct&&Bt(new ct)!=F)&&(Bt=function(o){var s=nt.call(o),b=s==B?o.constructor:void 0,M=b?Yt(b):void 0;if(M)switch(M){case rn:return f;case qt:return O;case bn:return ie;case on:return T;case Rn:return F}return s});function ci(o,s,b){s=jn(s,o)?[s]:ao(s);for(var M,pe=-1,Oe=s.length;++pe<Oe;){var V=Bn(s[pe]);if(!(M=o!=null&&b(o,V)))break;o=o[V]}if(M)return M;var Oe=o?o.length:0;return!!Oe&&Sr(Oe)&&lo(V,Oe)&&(Kt(o)||fo(o))}function lo(o,s){return s=s??d,!!s&&(typeof o=="number"||we.test(o))&&o>-1&&o%1==0&&o<s}function jn(o,s){if(Kt(o))return!1;var b=typeof o;return b=="number"||b=="symbol"||b=="boolean"||o==null||Cr(o)?!0:ve.test(o)||!X.test(o)||s!=null&&o in Object(s)}function ui(o){var s=typeof o;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?o!=="__proto__":o===null}function fi(o){return!!vt&&vt in o}function di(o){var s=o&&o.constructor,b=typeof s=="function"&&s.prototype||Ke;return o===b}function so(o){return o===o&&!Hn(o)}function co(o,s){return function(b){return b==null?!1:b[o]===s&&(s!==void 0||o in Object(b))}}var pi=xr(function(o){o=mi(o);var s=[];return j.test(o)&&s.push(""),o.replace(G,function(b,M,pe,V){s.push(pe?V.replace(te,"$1"):M||b)}),s});function Bn(o){if(typeof o=="string"||Cr(o))return o;var s=o+"";return s=="0"&&1/o==-1/0?"-0":s}function Yt(o){if(o!=null){try{return mt.call(o)}catch{}try{return o+""}catch{}}return""}function xr(o,s){if(typeof o!="function"||s&&typeof s!="function")throw new TypeError(r);var b=function(){var M=arguments,pe=s?s.apply(this,M):M[0],V=b.cache;if(V.has(pe))return V.get(pe);var Oe=o.apply(this,M);return b.cache=V.set(pe,Oe),Oe};return b.cache=new(xr.Cache||$t),b}xr.Cache=$t;function uo(o,s){return o===s||o!==o&&s!==s}function fo(o){return hi(o)&&He.call(o,"callee")&&(!E.call(o,"callee")||nt.call(o)==u)}var Kt=Array.isArray;function po(o){return o!=null&&Sr(o.length)&&!ho(o)}function hi(o){return Jn(o)&&po(o)}function ho(o){var s=Hn(o)?nt.call(o):"";return s==v||s==x}function Sr(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=d}function Hn(o){var s=typeof o;return!!o&&(s=="object"||s=="function")}function Jn(o){return!!o&&typeof o=="object"}function Cr(o){return typeof o=="symbol"||Jn(o)&&nt.call(o)==P}var vi=re?Ce(re):Qa;function mi(o){return o==null?"":oi(o)}function gi(o,s,b){var M=o==null?void 0:oo(o,s);return M===void 0?b:M}function _i(o,s){return o!=null&&ci(o,s,qa)}function Gn(o){return po(o)?Ja(o):ei(o)}function yi(o,s){var b={};return s=Za(s),Wa(o,function(M,pe,V){b[pe]=s(M,pe,V)}),b}function bi(o){return o}function wi(o){return jn(o)?xe(Bn(o)):ri(o)}e.exports=yi}(xn,xn.exports)),xn.exports}var Zl=Ql();const So=mr(Zl),es={class:"whitespace-pre-line"},ts={class:"flex items-center gap-2 mb-4"},ns=Ye({__name:"ScriptTool",props:{scripts:{},idx:{},editable:{type:Boolean}},emits:["close","update-value"],setup(e,{emit:n}){const t=e,r=n,{t:a}=Vt(),i=_e(),c=_e({script:void 0}),d=_e(!1),u=()=>{d.value=!1,c.value={script:""},r("close")},g=()=>{t.editable&&(d.value=!0,c.value={script:(t==null?void 0:t.idx)!==void 0&&t.idx>-1&&(t==null?void 0:t.scripts)!==void 0?t.scripts[t.idx].script:void 0})},h=v=>{v||u()},C=()=>{var v;(v=i.value)==null||v.validate(x=>{var O;x||(r("update-value",(O=c.value)==null?void 0:O.script,t.idx),u())})},I=v=>{c.value={...c.value,script:v}};return Dt(t,v=>{c.value={script:(v==null?void 0:v.idx)!==void 0&&v.idx>-1&&(v==null?void 0:v.scripts)!==void 0?v.scripts[v.idx].script:void 0}},{immediate:!0}),(v,x)=>{var ee;const O=dn,H=_r,B=gr,ie=vn;return k(),be("div",null,[v.idx!==void 0&&v.idx>-1&&v.scripts!==void 0&&((ee=v.scripts[v.idx])!=null&&ee.script)?(k(),Se(l(Ur),{key:0,trigger:"hover"},{trigger:w(()=>[y(l(Ct),{type:"warning",onClick:g},{default:w(()=>[y(O,null,{default:w(()=>[y(l(jr))]),_:1})]),_:1})]),default:w(()=>[L("div",es,me(v.scripts[v.idx].script),1)]),_:1})):(k(),Se(l(Ct),{key:1,type:"info",onClick:g},{default:w(()=>[y(O,null,{default:w(()=>[y(l(jr))]),_:1})]),_:1})),y(ie,{show:l(d),"onUpdate:show":x[1]||(x[1]=T=>Ot(d)?d.value=T:null),"on-update:show":h,"auto-focus":!1},{default:w(()=>[y(mn,{style:{width:"750px"}},{default:w(()=>[y(gn,null,{default:w(()=>[y(B,{model:l(c),ref_key:"formRef",ref:i,size:"small"},{default:w(()=>[y(H,{path:"script",class:"w-full",label:"Script"},{label:w(()=>[L("div",ts,[x[2]||(x[2]=L("span",{class:"inline-block w-12"}," Script ",-1)),v.editable?(k(),Se(Qo,{key:0,"onUpdate:value":I})):Fe("",!0)])]),default:w(()=>[y(l(ta),{height:"500px",theme:"vs-dark",value:l(c).script,"onUpdate:value":x[0]||(x[0]=T=>l(c).script=T),language:"python",options:{scrollBeyondLastLine:!1,minimap:{enabled:!1}}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),y(_n,{onCancel:u},{default:w(()=>[y(l(Ct),{type:"primary",onClick:C},{default:w(()=>[ye(me(l(a)("common.OK")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])])}}}),qn=vr(ns,[["__scopeId","data-v-1e470283"]]),rs={class:"flex justify-between items-center gap-2"},os={class:"flex justify-between gap-2"},as={class:"flex items-center gap-2"},is=Ye({__name:"WaveformModal",props:{gateInfo:{},layerIdx:{},len:{},waveInfo:{},scriptInfo:{}},emits:["close","update-value"],setup(e,{expose:n,emit:t}){const r=e,a=t,{t:i}=Vt(),c=An(),d=yn(),u=_e(),g=_e(),h=_e({type:"func",t0:0,ratio:1,channel:void 0,func_name:void 0,wave_parameters:{},waveform_compiler_config:{},name:void 0}),C=_e({type:{required:!0,message:i("common.required")},channel:{required:!0,message:i("common.required")},func_name:{required:!0,message:i("common.required")},t0:{required:!0,message:i("common.required")},ratio:{required:!0,message:i("common.required")}}),I=_e(!1),v=()=>{I.value=!1,a("close")},x=()=>{I.value=!0},O=()=>{v()},H=()=>{var N;(N=g.value)==null||N.validate(P=>{var F;P||(a("update-value",(F=u.value)==null?void 0:F.map(_=>{var f;return{..._,gate_name:(f=r.gateInfo)==null?void 0:f.gate_name,wave_func_names:[h.value.func_name]}}),h.value),v())})},B=ht(()=>{const N=h.value.func_name;return N?d.waveFunctions?d.waveFunctions[N]:void 0:{}}),ie=N=>fe("div",{class:"inline-flex justify-center items-center gap-2"},[fe("div",fe(Ur,{trigger:"hover",style:"white-space: pre-line"},{default:()=>fe("div",d.waveFunctions?d.waveFunctions[N.label].docstring:""),trigger:()=>fe(Ct,{size:"small",class:"!relative !mt-1 !w-5 !h-5",circle:!0,type:"info"},{icon:()=>fe(bo)})})),fe("div",N.value)]),ee=N=>{St(()=>{var F;const P=JSON.parse(JSON.stringify(((F=B.value)==null?void 0:F.parameters)||{}));h.value={...h.value,wave_parameters:So(P,()=>{}),name:N}})},T=(N,P,F)=>{var f;const _=JSON.parse(JSON.stringify(u.value||[]));P===void 0||P<0?_.push({entity:r.gateInfo.entity,layer:r.layerIdx,ratio:1,t0:0,channel:r.gateInfo.channel,wave_ids:((f=r.waveInfo)==null?void 0:f.wave_id)!==void 0?[r.waveInfo.wave_id]:[r.len],parameter:F,script:N,gate_name:r.gateInfo.gate_name,wave_func_names:h.value.func_name,search_type:"ids"}):_[P]={..._[P],script:N},u.value=_};return Dt(()=>d.waveCompiler,N=>{if(N){const P=JSON.parse(JSON.stringify(N));h.value={...h.value,waveform_compiler_config:So(P,()=>0)}}},{immediate:!0}),Dt(()=>r.scriptInfo,N=>{u.value=N},{immediate:!0}),Dt(()=>r.waveInfo,N=>{Ze(N==null?void 0:N.wave)||(h.value={...N.wave,waveform_compiler_config:N.wave.waveform_compiler_config||{}})},{immediate:!0}),n({open:x,close:v}),(N,P)=>{const F=tl,_=Vo,f=ji,$=_r,q=Xr,U=qo,J=Zr,le=Hi,ue=Bi,se=gr,Te=Pn,R=vn;return k(),Se(R,{show:l(I),"onUpdate:show":P[7]||(P[7]=X=>Ot(I)?I.value=X:null),"on-update:show":O,"auto-focus":!1},{default:w(()=>[y(mn,{style:{width:"880px"}},{default:w(()=>[y(gn,null,{default:w(()=>[y(Te,{style:{"max-height":"500px"}},{default:w(()=>{var X,ve;return[y(se,{model:l(h),rules:l(C),ref_key:"formRef",ref:g,size:"small",disabled:!!((ve=(X=l(d))==null?void 0:X.expInfo)!=null&&ve.exp_id)},{default:w(()=>[L("div",rs,[y($,{path:"channel",class:"flex-1"},{default:w(()=>[y(f,null,{default:w(()=>[y(F,{size:"small"},{default:w(()=>[ye(me(l(i)("expInfo.channel"))+" ",1),L("span",{style:Nt({color:l(c).errorColor})}," *",4)]),_:1}),y(_,{value:l(h).channel,"onUpdate:value":P[0]||(P[0]=j=>l(h).channel=j)},null,8,["value"])]),_:1})]),_:1}),y($,{path:"type",class:"flex-1"},{default:w(()=>[y(f,null,{default:w(()=>[y(F,{size:"small"},{default:w(()=>[ye(me(l(i)("expInfo.type")),1)]),_:1}),y(q,{disabled:"",options:[{label:"func",value:"func"}],value:l(h).type,"onUpdate:value":P[1]||(P[1]=j=>l(h).type=j)},null,8,["value"])]),_:1})]),_:1})]),y(U,{class:"!mt-0 !mb-2"},{default:w(()=>[ye(me(l(i)("expInfo.waveformParameter")),1)]),_:1}),L("div",os,[y($,{path:"func_name",class:"flex-1"},{default:w(()=>[y(f,null,{default:w(()=>[y(F,{size:"small"},{default:w(()=>[ye(me(l(i)("expInfo.function"))+" ",1),L("span",{style:Nt({color:l(c).errorColor})}," *",4)]),_:1}),y(q,{value:l(h).func_name,"onUpdate:value":P[2]||(P[2]=j=>l(h).func_name=j),options:Object.keys(l(d).waveFunctions||{}).map(j=>({label:j,value:j})),"render-label":ie,onUpdateValue:ee},null,8,["value","options"])]),_:1})]),_:1}),y($,{path:"t0",class:"flex-1"},{default:w(()=>[y(f,null,{default:w(()=>{var j,G,Y;return[y(F,{size:"small"},{default:w(()=>[P[8]||(P[8]=ye(" t0 ")),L("span",{style:Nt({color:l(c).errorColor})}," *",4)]),_:1}),y(J,{value:l(h).t0,"onUpdate:value":P[3]||(P[3]=te=>l(h).t0=te),class:"w-full"},null,8,["value"]),y(qn,{editable:!((G=(j=l(d))==null?void 0:j.expInfo)!=null&&G.exp_id),scripts:l(u),idx:(Y=l(u))==null?void 0:Y.findIndex(te=>te.parameter==="t0"),onUpdateValue:P[4]||(P[4]=(te,Ee)=>T(te,Ee,"t0"))},null,8,["editable","scripts","idx"])]}),_:1})]),_:1}),y($,{path:"ratio",class:"flex-1"},{default:w(()=>[y(f,null,{default:w(()=>{var j,G,Y;return[y(F,{size:"small"},{default:w(()=>[P[9]||(P[9]=ye(" ratio ")),L("span",{style:Nt({color:l(c).errorColor})}," *",4)]),_:1}),y(J,{value:l(h).ratio,"onUpdate:value":P[5]||(P[5]=te=>l(h).ratio=te),class:"w-full"},null,8,["value"]),y(qn,{editable:!((G=(j=l(d))==null?void 0:j.expInfo)!=null&&G.exp_id),scripts:l(u),idx:(Y=l(u))==null?void 0:Y.findIndex(te=>te.parameter==="ratio"),onUpdateValue:P[6]||(P[6]=(te,Ee)=>T(te,Ee,"ratio"))},null,8,["editable","scripts","idx"])]}),_:1})]),_:1})]),l(Ze)(l(h).wave_parameters)?Fe("",!0):(k(),Se(ue,{key:0,cols:3,"x-gap":"8"},{default:w(()=>{var j;return[(k(!0),be(Xe,null,Tt((j=l(B))==null?void 0:j.parameters,(G,Y)=>(k(),Se(le,{key:Y},{default:w(()=>[(k(),Se($,{key:Y,path:`wave_parameters.(${Y})`,class:"flex-1"},{default:w(()=>[y(f,null,{default:w(()=>{var te,Ee,we;return[y(F,{size:"small"},{default:w(()=>[ye(me(Y),1)]),_:2},1024),G!=null&&G.includes("list")?(k(),Se(_,{key:0,placeholder:String(G),value:l(h).wave_parameters[Y],"onUpdate:value":K=>l(h).wave_parameters[Y]=K},null,8,["placeholder","value","onUpdate:value"])):(k(),Se(J,{key:1,placeholder:String(G),value:l(h).wave_parameters[Y],"onUpdate:value":K=>l(h).wave_parameters[Y]=K},null,8,["placeholder","value","onUpdate:value"])),y(qn,{editable:!((Ee=(te=l(d))==null?void 0:te.expInfo)!=null&&Ee.exp_id),scripts:l(u),idx:(we=l(u))==null?void 0:we.findIndex(K=>K.parameter===String(Y)),onUpdateValue:(K,$e)=>T(K,$e,String(Y))},null,8,["editable","scripts","idx","onUpdateValue"])]}),_:2},1024)]),_:2},1032,["path"]))]),_:2},1024))),128))]}),_:1})),y(U,{class:"!m-0"},{default:w(()=>[ye(me(l(i)("expInfo.waveCompilerSetup")),1)]),_:1}),y(ue,{cols:3,"x-gap":"8"},{default:w(()=>[(k(!0),be(Xe,null,Tt(l(d).waveCompiler,(j,G)=>(k(),Se(le,{key:G},{default:w(()=>[(k(),Se($,{key:G,path:`waveform_compiler_config.${G}`,class:"flex-1"},{default:w(()=>[y(f,null,{default:w(()=>{var Y,te,Ee;return[y(l(Ur),{trigger:"hover"},{trigger:w(()=>[y(F,{size:"small"},{default:w(()=>[L("div",as,[ye(me(G)+" ",1),y(l(Ct),{type:"info",size:"small",class:"!w-5 !h-5",circle:""},{icon:w(()=>[y(l(bo))]),_:1})])]),_:2},1024)]),default:w(()=>[ye(" "+me(j==null?void 0:j.desc),1)]),_:2},1024),y(J,{placeholder:String(j.type),value:l(h).waveform_compiler_config[G],"onUpdate:value":we=>l(h).waveform_compiler_config[G]=we},null,8,["placeholder","value","onUpdate:value"]),y(qn,{editable:!((te=(Y=l(d))==null?void 0:Y.expInfo)!=null&&te.exp_id),scripts:l(u),idx:(Ee=l(u))==null?void 0:Ee.findIndex(we=>we.parameter===String(G)),onUpdateValue:(we,K)=>T(we,K,String(G))},null,8,["editable","scripts","idx","onUpdateValue"])]}),_:2},1024)]),_:2},1032,["path"]))]),_:2},1024))),128))]),_:1})]),_:1},8,["model","rules","disabled"])]}),_:1})]),_:1}),y(_n,{onCancel:v},{default:w(()=>[y(l(Ct),{type:"primary",onClick:H},{default:w(()=>[ye(me(l(i)("common.OK")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}});var Ir,Co;function ls(){if(Co)return Ir;Co=1;var e="Expected a function",n="__lodash_hash_undefined__",t="[object Function]",r="[object GeneratorFunction]",a="[object Symbol]",i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,d=/^\./,u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,g=/[\\^$.*+?()[\]{}|]/g,h=/\\(\\)?/g,C=/^\[object .+?Constructor\]$/,I=typeof at=="object"&&at&&at.Object===Object&&at,v=typeof self=="object"&&self&&self.Object===Object&&self,x=I||v||Function("return this")();function O(m,E){return m==null?void 0:m[E]}function H(m){var E=!1;if(m!=null&&typeof m.toString!="function")try{E=!!(m+"")}catch{}return E}var B=Array.prototype,ie=Function.prototype,ee=Object.prototype,T=x["__core-js_shared__"],N=function(){var m=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||"");return m?"Symbol(src)_1."+m:""}(),P=ie.toString,F=ee.hasOwnProperty,_=ee.toString,f=RegExp("^"+P.call(F).replace(g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=x.Symbol,q=B.splice,U=Ce(x,"Map"),J=Ce(Object,"create"),le=$?$.prototype:void 0,ue=le?le.toString:void 0;function se(m){var E=-1,Z=m?m.length:0;for(this.clear();++E<Z;){var ke=m[E];this.set(ke[0],ke[1])}}function Te(){this.__data__=J?J(null):{}}function R(m){return this.has(m)&&delete this.__data__[m]}function X(m){var E=this.__data__;if(J){var Z=E[m];return Z===n?void 0:Z}return F.call(E,m)?E[m]:void 0}function ve(m){var E=this.__data__;return J?E[m]!==void 0:F.call(E,m)}function j(m,E){var Z=this.__data__;return Z[m]=J&&E===void 0?n:E,this}se.prototype.clear=Te,se.prototype.delete=R,se.prototype.get=X,se.prototype.has=ve,se.prototype.set=j;function G(m){var E=-1,Z=m?m.length:0;for(this.clear();++E<Z;){var ke=m[E];this.set(ke[0],ke[1])}}function Y(){this.__data__=[]}function te(m){var E=this.__data__,Z=de(E,m);if(Z<0)return!1;var ke=E.length-1;return Z==ke?E.pop():q.call(E,Z,1),!0}function Ee(m){var E=this.__data__,Z=de(E,m);return Z<0?void 0:E[Z][1]}function we(m){return de(this.__data__,m)>-1}function K(m,E){var Z=this.__data__,ke=de(Z,m);return ke<0?Z.push([m,E]):Z[ke][1]=E,this}G.prototype.clear=Y,G.prototype.delete=te,G.prototype.get=Ee,G.prototype.has=we,G.prototype.set=K;function $e(m){var E=-1,Z=m?m.length:0;for(this.clear();++E<Z;){var ke=m[E];this.set(ke[0],ke[1])}}function et(){this.__data__={hash:new se,map:new(U||G),string:new se}}function D(m){return Ie(this,m).delete(m)}function Q(m){return Ie(this,m).get(m)}function ne(m){return Ie(this,m).has(m)}function z(m,E){return Ie(this,m).set(m,E),this}$e.prototype.clear=et,$e.prototype.delete=D,$e.prototype.get=Q,$e.prototype.has=ne,$e.prototype.set=z;function de(m,E){for(var Z=m.length;Z--;)if(Ke(m[Z][0],E))return Z;return-1}function ge(m,E){E=De(E,m)?[E]:xe(E);for(var Z=0,ke=E.length;m!=null&&Z<ke;)m=m[tt(E[Z++])];return Z&&Z==ke?m:void 0}function re(m){if(!mt(m)||Pe(m))return!1;var E=vt(m)||H(m)?f:C;return E.test(Ve(m))}function ce(m){if(typeof m=="string")return m;if(nt(m))return ue?ue.call(m):"";var E=m+"";return E=="0"&&1/m==-1/0?"-0":E}function xe(m){return st(m)?m:We(m)}function Ie(m,E){var Z=m.__data__;return Ae(E)?Z[typeof E=="string"?"string":"hash"]:Z.map}function Ce(m,E){var Z=O(m,E);return re(Z)?Z:void 0}function De(m,E){if(st(m))return!1;var Z=typeof m;return Z=="number"||Z=="symbol"||Z=="boolean"||m==null||nt(m)?!0:c.test(m)||!i.test(m)||E!=null&&m in Object(E)}function Ae(m){var E=typeof m;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?m!=="__proto__":m===null}function Pe(m){return!!N&&N in m}var We=Ue(function(m){m=jt(m);var E=[];return d.test(m)&&E.push(""),m.replace(u,function(Z,ke,p,S){E.push(p?S.replace(h,"$1"):ke||Z)}),E});function tt(m){if(typeof m=="string"||nt(m))return m;var E=m+"";return E=="0"&&1/m==-1/0?"-0":E}function Ve(m){if(m!=null){try{return P.call(m)}catch{}try{return m+""}catch{}}return""}function Ue(m,E){if(typeof m!="function"||E&&typeof E!="function")throw new TypeError(e);var Z=function(){var ke=arguments,p=E?E.apply(this,ke):ke[0],S=Z.cache;if(S.has(p))return S.get(p);var W=m.apply(this,ke);return Z.cache=S.set(p,W),W};return Z.cache=new(Ue.Cache||$e),Z}Ue.Cache=$e;function Ke(m,E){return m===E||m!==m&&E!==E}var st=Array.isArray;function vt(m){var E=mt(m)?_.call(m):"";return E==t||E==r}function mt(m){var E=typeof m;return!!m&&(E=="object"||E=="function")}function He(m){return!!m&&typeof m=="object"}function nt(m){return typeof m=="symbol"||He(m)&&_.call(m)==a}function jt(m){return m==null?"":ce(m)}function Pt(m,E,Z){var ke=m==null?void 0:ge(m,E);return ke===void 0?Z:ke}return Ir=Pt,Ir}var ss=ls();const cs=mr(ss),us={class:"flex items-center"},fs={key:0},ds=Ye({__name:"WaveQuickEdit",props:{wave:{},pkey:{},editable:{type:Boolean},idx:{},scriptInfo:{}},emits:["update-value"],setup(e,{emit:n}){const{t}=Vt(),r=n,a=e,i=_e({value:void 0,script:void 0}),c=_e(null),d=_e(!1),u=()=>{d.value=!0},g=()=>{d.value=!1},h=x=>{x||g()},C=()=>{r("update-value",{idx:a.idx,pkey:a.pkey,...i.value}),g()},I=(x="")=>{i.value={...i.value,script:x}};Dt(d,()=>{var O;const x=JSON.parse(JSON.stringify(a||{}));i.value={value:cs(a.wave,a.pkey),script:((O=x==null?void 0:x.scriptInfo)==null?void 0:O.script)||""}},{immediate:!0,deep:!0});const v=ht(()=>{var x,O,H;return((x=a.scriptInfo)==null?void 0:x.parameter)===((O=a.pkey.split("."))==null?void 0:O.pop())&&((H=a==null?void 0:a.scriptInfo)==null?void 0:H.script)});return(x,O)=>{var F;const H=Ct,B=Ji,ie=Zr,ee=Vo,T=_r,N=gr,P=vn;return k(),be("div",{class:"flex items-center",onClick:u},[y(B,{trigger:"hover",disabled:!((F=x.scriptInfo)!=null&&F.script)},{trigger:w(()=>[L("div",us,[L("div",null,[Lr(x.$slots,"default",{},void 0,!0)]),l(v)?(k(),Se(H,{key:0,size:"small",class:"!w-5 !h-5",type:"warning"},{icon:w(()=>[y(l(jr))]),_:1})):Fe("",!0)])]),default:w(()=>[x.scriptInfo.script?(k(),be("span",fs,me(x.scriptInfo.script),1)):Fe("",!0)]),_:3},8,["disabled"]),y(P,{show:l(d),"onUpdate:show":O[3]||(O[3]=_=>Ot(d)?d.value=_:null),onUpdateShow:h,"auto-focus":!1},{default:w(()=>[y(mn,{style:{width:"900px"}},{default:w(()=>[y(gn,null,{default:w(()=>[y(N,{model:l(i),ref_key:"formRef",ref:c,size:"small",disabled:!x.editable},{default:w(()=>{var _;return[y(T,{label:(_=x.pkey.split("."))==null?void 0:_.pop()},{default:w(()=>[typeof l(i).value=="number"?(k(),Se(ie,{key:0,class:"w-52",value:l(i).value,"onUpdate:value":O[0]||(O[0]=f=>l(i).value=f)},null,8,["value"])):(k(),Se(ee,{key:1,value:l(i).value,"onUpdate:value":O[1]||(O[1]=f=>l(i).value=f)},null,8,["value"]))]),_:1},8,["label"]),y(T,{path:"script",class:"w-full",label:"Script"},{label:w(()=>[L("div",null,[O[4]||(O[4]=L("span",{class:"inline-block w-12 mb-2"}," Script ",-1)),x.editable?(k(),Se(Qo,{key:0,"onUpdate:value":I})):Fe("",!0)])]),default:w(()=>[y(l(ta),{height:"400px",theme:"vs-dark",value:l(i).script,"onUpdate:value":O[2]||(O[2]=f=>l(i).script=f),language:"python",options:{readOnly:!x.editable}},null,8,["value","options"])]),_:1})]}),_:1},8,["model","disabled"])]),_:1}),y(_n,{onCancel:g},{default:w(()=>[y(H,{type:"primary",onClick:C},{default:w(()=>[ye(me(l(t)("common.OK")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])])}}}),Xn=vr(ds,[["__scopeId","data-v-5c6c5ed0"]]);var Er,Oo;function ps(){if(Oo)return Er;Oo=1;var e="Expected a function",n="__lodash_hash_undefined__",t=9007199254740991,r="[object Function]",a="[object GeneratorFunction]",i="[object Symbol]",c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/,u=/^\./,g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,h=/[\\^$.*+?()[\]{}|]/g,C=/\\(\\)?/g,I=/^\[object .+?Constructor\]$/,v=/^(?:0|[1-9]\d*)$/,x=typeof at=="object"&&at&&at.Object===Object&&at,O=typeof self=="object"&&self&&self.Object===Object&&self,H=x||O||Function("return this")();function B(p,S){return p==null?void 0:p[S]}function ie(p){var S=!1;if(p!=null&&typeof p.toString!="function")try{S=!!(p+"")}catch{}return S}var ee=Array.prototype,T=Function.prototype,N=Object.prototype,P=H["__core-js_shared__"],F=function(){var p=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),_=T.toString,f=N.hasOwnProperty,$=N.toString,q=RegExp("^"+_.call(f).replace(h,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),U=H.Symbol,J=ee.splice,le=Pe(H,"Map"),ue=Pe(Object,"create"),se=U?U.prototype:void 0,Te=se?se.toString:void 0;function R(p){var S=-1,W=p?p.length:0;for(this.clear();++S<W;){var Re=p[S];this.set(Re[0],Re[1])}}function X(){this.__data__=ue?ue(null):{}}function ve(p){return this.has(p)&&delete this.__data__[p]}function j(p){var S=this.__data__;if(ue){var W=S[p];return W===n?void 0:W}return f.call(S,p)?S[p]:void 0}function G(p){var S=this.__data__;return ue?S[p]!==void 0:f.call(S,p)}function Y(p,S){var W=this.__data__;return W[p]=ue&&S===void 0?n:S,this}R.prototype.clear=X,R.prototype.delete=ve,R.prototype.get=j,R.prototype.has=G,R.prototype.set=Y;function te(p){var S=-1,W=p?p.length:0;for(this.clear();++S<W;){var Re=p[S];this.set(Re[0],Re[1])}}function Ee(){this.__data__=[]}function we(p){var S=this.__data__,W=ce(S,p);if(W<0)return!1;var Re=S.length-1;return W==Re?S.pop():J.call(S,W,1),!0}function K(p){var S=this.__data__,W=ce(S,p);return W<0?void 0:S[W][1]}function $e(p){return ce(this.__data__,p)>-1}function et(p,S){var W=this.__data__,Re=ce(W,p);return Re<0?W.push([p,S]):W[Re][1]=S,this}te.prototype.clear=Ee,te.prototype.delete=we,te.prototype.get=K,te.prototype.has=$e,te.prototype.set=et;function D(p){var S=-1,W=p?p.length:0;for(this.clear();++S<W;){var Re=p[S];this.set(Re[0],Re[1])}}function Q(){this.__data__={hash:new R,map:new(le||te),string:new R}}function ne(p){return Ae(this,p).delete(p)}function z(p){return Ae(this,p).get(p)}function de(p){return Ae(this,p).has(p)}function ge(p,S){return Ae(this,p).set(p,S),this}D.prototype.clear=Q,D.prototype.delete=ne,D.prototype.get=z,D.prototype.has=de,D.prototype.set=ge;function re(p,S,W){var Re=p[S];(!(f.call(p,S)&&He(Re,W))||W===void 0&&!(S in p))&&(p[S]=W)}function ce(p,S){for(var W=p.length;W--;)if(He(p[W][0],S))return W;return-1}function xe(p){if(!Pt(p)||Ue(p))return!1;var S=jt(p)||ie(p)?q:I;return S.test(vt(p))}function Ie(p,S,W,Re){if(!Pt(p))return p;S=tt(S,p)?[S]:De(S);for(var ct=-1,ut=S.length,rn=ut-1,qt=p;qt!=null&&++ct<ut;){var bn=st(S[ct]),on=W;if(ct!=rn){var Rn=qt[bn];on=void 0,on===void 0&&(on=Pt(Rn)?Rn:We(S[ct+1])?[]:{})}re(qt,bn,on),qt=qt[bn]}return p}function Ce(p){if(typeof p=="string")return p;if(E(p))return Te?Te.call(p):"";var S=p+"";return S=="0"&&1/p==-1/0?"-0":S}function De(p){return nt(p)?p:Ke(p)}function Ae(p,S){var W=p.__data__;return Ve(S)?W[typeof S=="string"?"string":"hash"]:W.map}function Pe(p,S){var W=B(p,S);return xe(W)?W:void 0}function We(p,S){return S=S??t,!!S&&(typeof p=="number"||v.test(p))&&p>-1&&p%1==0&&p<S}function tt(p,S){if(nt(p))return!1;var W=typeof p;return W=="number"||W=="symbol"||W=="boolean"||p==null||E(p)?!0:d.test(p)||!c.test(p)||S!=null&&p in Object(S)}function Ve(p){var S=typeof p;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?p!=="__proto__":p===null}function Ue(p){return!!F&&F in p}var Ke=mt(function(p){p=Z(p);var S=[];return u.test(p)&&S.push(""),p.replace(g,function(W,Re,ct,ut){S.push(ct?ut.replace(C,"$1"):Re||W)}),S});function st(p){if(typeof p=="string"||E(p))return p;var S=p+"";return S=="0"&&1/p==-1/0?"-0":S}function vt(p){if(p!=null){try{return _.call(p)}catch{}try{return p+""}catch{}}return""}function mt(p,S){if(typeof p!="function"||S&&typeof S!="function")throw new TypeError(e);var W=function(){var Re=arguments,ct=S?S.apply(this,Re):Re[0],ut=W.cache;if(ut.has(ct))return ut.get(ct);var rn=p.apply(this,Re);return W.cache=ut.set(ct,rn),rn};return W.cache=new(mt.Cache||D),W}mt.Cache=D;function He(p,S){return p===S||p!==p&&S!==S}var nt=Array.isArray;function jt(p){var S=Pt(p)?$.call(p):"";return S==r||S==a}function Pt(p){var S=typeof p;return!!p&&(S=="object"||S=="function")}function m(p){return!!p&&typeof p=="object"}function E(p){return typeof p=="symbol"||m(p)&&$.call(p)==i}function Z(p){return p==null?"":Ce(p)}function ke(p,S,W){return p==null?p:Ie(p,S,W)}return Er=ke,Er}var hs=ps();const vs=mr(hs),ms={style:{border:"1px dashed rgba(56, 137, 197, 0.35)"},class:"rounded p-1 my-1"},gs={class:"flex justify-between items-center gap-2 flex-wrap"},_s={class:"text-l"},ys={class:"my-1 flex gap-1 flex-1 flex-wrap"},bs={class:"inline-flex gap-2 items-center"},ws=Ye({__name:"WaveView",props:{widx:{},wave:{},editable:{type:Boolean},root:{},scriptInfo:{}},emits:["edit-wave","delete-wave","update-wave-script"],setup(e,{emit:n}){const t=e,{t:r}=Vt(),a=_e(),i=n,c=()=>{i("edit-wave")},d=()=>{i("delete-wave")};Dt(()=>t.scriptInfo,g=>{a.value=g==null?void 0:g.waveformScript},{immediate:!0,deep:!0});const u=({pkey:g,script:h,value:C,idx:I})=>{const v=JSON.parse(JSON.stringify(t.wave));vs(v,g,C),i("update-wave-script",{wave:v,pkey:g,script:h,widx:t.widx,idx:I})};return(g,h)=>{var x,O,H,B,ie,ee;const C=Gi,I=Ct,v=nl;return k(),be("div",ms,[L("div",gs,[L("div",_s,[y(C,{type:"info",bordered:!1,size:"small"},{default:w(()=>{var T;return[ye(me((T=g.wave)==null?void 0:T.channel),1)]}),_:1}),h[0]||(h[0]=ye(" : ")),y(C,{type:"success",bordered:!1,size:"small"},{default:w(()=>{var T;return[ye(me((T=g.wave)==null?void 0:T.func_name),1)]}),_:1})]),L("div",ys,[h[3]||(h[3]=ye(" ( ")),y(Xn,{pkey:"t0",wave:g.wave,editable:g.editable,idx:(x=l(a))==null?void 0:x.findIndex(T=>T.parameter==="t0"),"script-info":(O=l(a))==null?void 0:O.find(T=>T.parameter==="t0"),onUpdateValue:u},{default:w(()=>[y(C,{bordered:!1,class:"!cursor-pointer",size:"small",color:{textColor:"#ff7d00"}},{default:w(()=>{var T;return[ye(" t0 = "+me((T=g.wave)==null?void 0:T.t0),1)]}),_:1})]),_:1},8,["wave","editable","idx","script-info"]),h[4]||(h[4]=ye(" , ")),y(Xn,{pkey:"ratio",wave:g.wave,editable:g.editable,idx:(H=l(a))==null?void 0:H.findIndex(T=>T.parameter==="ratio"),"script-info":(B=l(a))==null?void 0:B.find(T=>T.parameter==="ratio"),onUpdateValue:u},{default:w(()=>[y(C,{bordered:!1,size:"small",class:"!cursor-pointer",color:{textColor:"#ff7d00"}},{default:w(()=>{var T;return[ye(" ratio = "+me((T=g.wave)==null?void 0:T.ratio),1)]}),_:1})]),_:1},8,["wave","editable","idx","script-info"]),h[5]||(h[5]=ye(" , ")),(k(!0),be(Xe,null,Tt((ie=g.wave)==null?void 0:ie.wave_parameters,(T,N)=>{var P,F;return k(),be(Xe,{key:N},[y(Xn,{wave:g.wave,pkey:`wave_parameters.${N}`,editable:g.editable,idx:(P=l(a))==null?void 0:P.findIndex(_=>_.parameter===N),"script-info":(F=l(a))==null?void 0:F.find(_=>_.parameter===N),onUpdateValue:u},{default:w(()=>[y(C,{bordered:!1,class:"!cursor-pointer",size:"small",color:{textColor:"#ff7d00"}},{default:w(()=>[ye(me(N)+" = "+me(T),1)]),_:2},1024)]),_:2},1032,["wave","pkey","editable","idx","script-info"]),h[1]||(h[1]=ye(" , "))],64)}),128)),(k(!0),be(Xe,null,Tt((ee=g.wave)==null?void 0:ee.waveform_compiler_config,(T,N)=>{var P,F;return k(),be(Xe,{key:N},[y(Xn,{wave:g.wave,pkey:`waveform_compiler_config.${N}`,editable:g.editable,idx:(P=l(a))==null?void 0:P.findIndex(_=>_.parameter===N),"script-info":(F=l(a))==null?void 0:F.find(_=>_.parameter===N),onUpdateValue:u},{default:w(()=>[y(C,{bordered:!1,class:"!cursor-pointer",size:"small",color:{textColor:"#00b42a"}},{default:w(()=>[ye(me(N)+" = "+me(T),1)]),_:2},1024)]),_:2},1032,["wave","pkey","editable","idx","script-info"]),h[2]||(h[2]=L("span",{class:"last:hidden"},",",-1))],64)}),128)),h[6]||(h[6]=ye(" ) "))]),L("div",bs,[y(I,{type:"info",size:"small",circle:"",onClick:c},{icon:w(()=>[y(l(Cl))]),_:1}),g.editable?(k(),Se(v,{key:0,trigger:"click",onPositiveClick:d},{trigger:w(()=>[y(I,{type:"error",size:"small",circle:""},{icon:w(()=>[y(l(Qr))]),_:1})]),default:w(()=>[ye(" "+me(l(r)("common.removeConfirm")),1)]),_:1})):Fe("",!0)])])])}}}),xs={class:"flex justify-between items-center gap-2"},Ss={class:"flex justify-between"},Cs={class:"text-xl inline-flex items-center gap-2"},Os={class:"flex items-center gap-2"},Is={key:0,class:"text-center mt-20"},Es={class:"n-empty__description"},Ts={key:1,class:"text-center mt-20"},Ds={class:"n-empty__description"},Ns={class:"h-[236px] overflow-hidden"},Ms=Ye({__name:"GateModal",props:{info:{}},emits:["ok","close"],setup(e,{expose:n,emit:t}){const r=e,a=Wi(),i=qr(),c=An(),d=yn(),{allQubits:u,gates:g,program:h,layers:C}=hr(d),{t:I}=Vt(),v=Vi(),x=_e(),O=_e(),H=_e(),B=_e(!1),ie=_e(!1),ee=_e(!1),T=_e([]),N=_e(!1),P=_e(),F=_e(),_=_e(),f=_e({gate_name:void 0,entity:void 0}),$=_e({gate_name:{required:!0,message:I("common.required")},entity:{required:!0,message:I("common.required")}}),q=t,U=_e(!1),J=()=>{U.value=!1,P.value=void 0,q("close"),a.refreshWaveformPane=!0},le=()=>{U.value=!0},ue=()=>{J()},se=()=>{N.value=!0,St(()=>{var D;(D=F.value)==null||D.open()})},Te=()=>{P.value=void 0,N.value=!1,H.value=void 0},R=()=>{var D;(D=_.value)==null||D.validate(Q=>{var ne,z,de,ge;if(!Q){let re=JSON.parse(JSON.stringify(((ne=h.value)==null?void 0:ne.waveform_script)||[]));const{idx:ce=[],waveformScript:xe=[]}=O.value||{};if(xe.forEach(Ce=>{var De;Ce.entity=f.value.entity?f.value.entity[0]:"",Ce.gate_name=((De=f.value)==null?void 0:De.gate_name)||""}),ce==null||ce.forEach((Ce,De)=>{re[Ce]=xe[De]}),re=re.concat(xe.slice(ce.length)),Vr(re,Ce=>!Ce.script),h.value={space_parameter_script:(z=h.value)==null?void 0:z.space_parameter_script,waveform_script:re},(de=r.info)!=null&&de.gateInfo)g.value={...g.value||{},[r.info.gateInfo.key]:f.value};else if(((ge=r.info)==null?void 0:ge.layerIdx)!==void 0){const Ce=Kr(),De=JSON.parse(JSON.stringify(C.value||[]));De[r.info.layerIdx].push(Ce),C.value=De,g.value={...g.value||{},[Ce]:f.value}}const Ie=JSON.parse(JSON.stringify(u.value));Ie==null||Ie.forEach(Ce=>{var De;(Ce.value===f.value.entity||(De=f.value.entity)!=null&&De.includes(Ce.value))&&(Ce.visible=!0)}),u.value=Ie,J()}})},X=ht(()=>{var Q;let D=[];return C.value[(Q=r.info)==null?void 0:Q.layerIdx].forEach(ne=>{var de;const z=g!=null&&g.value?(de=g.value[ne])==null?void 0:de.entity:[];D=D.concat(z)}),u.value.filter(ne=>!D.includes(ne.value)).map(ne=>({label:ne.value,value:ne.value}))}),ve=D=>{if(D.length>2){St(()=>{f.value={...f.value,entity:D.slice(0,2)}});return}},j=(D,Q)=>{var de,ge;const ne=[],z=(ge=(de=O.value)==null?void 0:de.waveformScript)==null?void 0:ge.filter((re,ce)=>{var xe,Ie,Ce,De,Ae;if(re.search_type==="ids"&&re.script&&((Ie=(xe=re.wave_ids)==null?void 0:xe.map(We=>+We))==null?void 0:Ie.includes(+Q))||re.search_type==="name"&&re.script&&re.wave_names.includes(D.name)||re.search_type==="channel"&&re.script&&(re.channels.includes(D.channel)||re.channels.includes((Ae=D.channel)==null?void 0:Ae.replace(((De=(Ce=r.info)==null?void 0:Ce.qubit)==null?void 0:De.value)||"",""))))return ne.push(ce),!0});return{idx:ne,waveformScript:z}},G=(D,Q)=>{H.value=j(D,Q),P.value={wave_id:Q,wave:f.value.waves?f.value.waves[Q]:void 0},se()},Y=D=>{if(f.value.waves){const Q=JSON.parse(JSON.stringify(O.value));Q.waveformScript.forEach(z=>{var de,ge;z.search_type==="ids"&&(((de=z.wave_ids)==null?void 0:de.length)>1?In(z.wave_ids,D):(ge=z.wave_ids)!=null&&ge.includes(D)&&(z.script=""),z.wave_ids.forEach((ce,xe)=>{ce>D&&(z.wave_ids[xe]=ce-1)}))}),O.value=Q;const ne=JSON.parse(JSON.stringify(f.value.waves));ne.splice(D,1),f.value={...f.value,waves:ne},St(()=>{var z;((z=f.value.waves)==null?void 0:z.length)===0&&(x.value=void 0)})}},te=async D=>{if(B.value)return;B.value=!0;const Q=f.value.waves;if(!Q)return;const[ne,z]=await rl({device_group_name:v.query.device_group_name,space_id:v.query.space_id,waves:Q,use_carrier:i.applyCarrier});B.value=!1,!ne&&(z==null?void 0:z.status)===0&&(x.value=z.data)},Ee=async()=>{var D,Q,ne,z,de,ge;if((D=f.value)!=null&&D.entity&&((Q=f.value)!=null&&Q.gate_name)&&Ze((ne=f.value)==null?void 0:ne.waves)){const[re,ce]=await ol({device_group_name:v.query.device_group_name,space_id:v.query.space_id,entities:(de=(z=f.value)==null?void 0:z.entity)==null?void 0:de.join(","),gate_name:(ge=f.value)==null?void 0:ge.gate_name});!re&&(ce==null?void 0:ce.status)===0&&(f.value={...f.value,waves:ce.data.waves})}},we=(D,Q)=>{var ge,re,ce;let ne=JSON.parse(JSON.stringify(((ge=O.value)==null?void 0:ge.waveformScript)||[]));const{idx:z=[]}=H.value||{};z==null||z.forEach((xe,Ie)=>{ne[xe]=D[Ie]}),(D==null?void 0:D.length)>z.length&&(ne=ne.concat(D.slice(z.length))),O.value={idx:((re=O.value)==null?void 0:re.idx)||[],waveformScript:ne};const de=JSON.parse(JSON.stringify(f.value.waves||[]));P.value?(de[P.value.wave_id]=Q,f.value={...f.value,waves:de}):f.value={...f.value,waves:(((ce=f.value)==null?void 0:ce.waves)||[]).concat(Q)}},K=({wave:D,script:Q,pkey:ne,widx:z,idx:de})=>{var Ce,De;const ge=JSON.parse(JSON.stringify(f.value.waves));ge[z]=D,f.value={...f.value,waves:ge};const re=JSON.parse(JSON.stringify(O.value||{waveformScript:[],idx:[]})),{idx:ce,waveformScript:xe}=j(D,z),Ie=(Ce=ne.split("."))==null?void 0:Ce.pop();xe==null||xe.forEach(Ae=>{Ae.parameter===Ie&&(Ae.script=Q||"")}),ce.forEach((Ae,Pe)=>{re.waveformScript[Ae]=xe?xe[Pe]:void 0}),Ie&&!(xe!=null&&xe.map(Ae=>Ae.parameter).includes(Ie))&&re.waveformScript.push({entity:f.value.entity,layer:(De=r.info)==null?void 0:De.layerIdx,channel:D.channel,wave_ids:[z],parameter:Ie,script:Q,gate_name:f.value.gate_name,wave_func_names:[D.func_name],search_type:"ids"}),O.value=re};Dt(r,D=>{var Q,ne,z,de,ge,re,ce;if((ne=(Q=D==null?void 0:D.info)==null?void 0:Q.qubit)!=null&&ne.value&&(f.value={...f.value,...(z=D.info.gateInfo)==null?void 0:z.val,entity:(ge=(de=D.info.gateInfo)==null?void 0:de.val)==null?void 0:ge.entity},(re=D==null?void 0:D.info)!=null&&re.gateInfo)){const xe=[],Ie=JSON.parse(JSON.stringify(((ce=h.value)==null?void 0:ce.waveform_script)||[])),Ce=Ie==null?void 0:Ie.filter((De,Ae)=>{var Pe,We,tt,Ve;if(((Pe=D.info)==null?void 0:Pe.layerIdx)===De.layer&&((Ve=(tt=(We=D.info.gateInfo)==null?void 0:We.val)==null?void 0:tt.entity)!=null&&Ve.includes(De.entity)))return xe.push(Ae),!0});O.value={idx:xe,waveformScript:Ce}}},{immediate:!0}),Dt(f,D=>{D.gate_name&&!Ze(D.entity)?(ie.value=!1,ee.value=!1):(ie.value=!0,ee.value=!0)},{deep:!0,immediate:!0}),Dt(()=>f.value.waves,D=>{St(()=>{Ze(D)||te()})},{immediate:!0});const $e=async()=>{const[D,Q]=await al({device_group_name:v.query.device_group_name,space_id:v.query.space_id});!D&&(Q==null?void 0:Q.status)===0&&(T.value=Object.keys(Q.data).map(ne=>({label:ne,value:ne})))};Xo(()=>{$e()}),n({open:le,close:J});const et=()=>{te()};return(D,Q)=>{const ne=Xr,z=_r,de=gr,ge=qo,re=dn,ce=Ct,xe=qi,Ie=Pn,Ce=Yo,De=ea,Ae=vn;return k(),Se(Ae,{show:l(U),"onUpdate:show":Q[3]||(Q[3]=Pe=>Ot(U)?U.value=Pe:null),"on-update:show":ue,"auto-focus":!1},{default:w(()=>[y(mn,{style:Nt([{width:"1000px",height:"93vh"},{background:l(c).modalColor}])},{default:w(()=>[y(gn,null,{default:w(()=>{var Pe,We,tt,Ve;return[y(de,{model:l(f),rules:l($),ref_key:"formRef",ref:_,size:"small",disabled:!!((We=(Pe=l(d))==null?void 0:Pe.expInfo)!=null&&We.exp_id)},{default:w(()=>[L("div",xs,[y(z,{label:l(I)("expInfo.gateName"),path:"gate_name",class:"flex-1"},{default:w(()=>[y(ne,{tag:"",filterable:"",value:l(f).gate_name,"onUpdate:value":Q[0]||(Q[0]=Ue=>l(f).gate_name=Ue),options:l(T)},null,8,["value","options"])]),_:1},8,["label"]),y(z,{label:l(I)("expInfo.qubits"),path:"entity",class:"w-full flex-1"},{default:w(()=>[y(ne,{multiple:"",filterable:"",value:l(f).entity,"onUpdate:value":Q[1]||(Q[1]=Ue=>l(f).entity=Ue),options:l(X),"max-tag-count":2,onUpdateValue:ve},null,8,["value","options"])]),_:1},8,["label"])])]),_:1},8,["model","rules","disabled"]),y(ge,{class:"!mb-2 !mt-0"}),L("div",Ss,[L("div",Cs,[y(re,{component:l(Zo)},null,8,["component"]),ye(" "+me(l(I)("expInfo.waveformsTitle")),1)]),L("div",Os,[l(Ze)(l(f).waves)?(k(),Se(ce,{key:0,type:"info",size:"small",onClick:Ee,disabled:l(ee)},{default:w(()=>[ye(me(l(I)("expInfo.waveformsTips")),1)]),_:1},8,["disabled"])):Fe("",!0),(Ve=(tt=l(d))==null?void 0:tt.expInfo)!=null&&Ve.exp_id?Fe("",!0):(k(),Se(ce,{key:1,onClick:se,type:"info",size:"small",disabled:l(ie)},{icon:w(()=>[y(l(ir))]),default:w(()=>[ye(" "+me(l(I)("expInfo.addWaveForm")),1)]),_:1},8,["disabled"]))])]),y(Ie,{style:{height:"calc(93vh - 445px)"}},{default:w(()=>{var Ue,Ke,st,vt;return[l(ee)?(k(),be("div",Is,[y(xe,{description:l(I)("expInfo.nowaveforms")},{extra:w(()=>[L("div",Es,me(l(I)("expInfo.checkTips")),1)]),_:1},8,["description"])])):Fe("",!0),l(Ze)(l(f).waves)&&!l(ee)?(k(),be("div",Ts,[y(xe,{description:l(I)("expInfo.nowaveforms")},{extra:w(()=>[L("div",Ds,me(l(I)("expInfo.defaultTips")),1)]),_:1},8,["description"])])):Fe("",!0),(k(!0),be(Xe,null,Tt(l(f).waves,(mt,He)=>{var nt,jt;return k(),Se(ws,{key:He,widx:He,root:l(f),wave:mt,"script-info":j(mt,He),onEditWave:()=>G(mt,He),onDeleteWave:()=>Y(He),onUpdateWaveScript:K,editable:!((jt=(nt=l(d))==null?void 0:nt.expInfo)!=null&&jt.exp_id)},null,8,["widx","root","wave","script-info","onEditWave","onDeleteWave","editable"])}),128)),l(N)&&((Ue=D.info)==null?void 0:Ue.layerIdx)!==void 0?(k(),Se(is,{key:2,ref_key:"waveFormRef",ref:F,"layer-idx":(Ke=D.info)==null?void 0:Ke.layerIdx,"gate-info":l(f),"wave-info":l(P),"script-info":(st=l(H))==null?void 0:st.waveformScript,len:((vt=l(f).waves)==null?void 0:vt.length)||0,onClose:Te,onUpdateValue:we},null,8,["layer-idx","gate-info","wave-info","script-info","len"])):Fe("",!0)]}),_:1}),L("div",Ns,[l(B)?(k(),Se(Ce,{key:0,class:"h-full w-full","v-show":!0})):l(x)?(k(),Se(Ki,{key:1,data:l(x)},null,8,["data"])):Fe("",!0)]),y(_n,{onCancel:J},{prefix:w(()=>[l(Ze)(l(f).waves)?Fe("",!0):(k(),Se(De,{key:0,checked:l(i).applyCarrier,"onUpdate:checked":Q[2]||(Q[2]=Ue=>l(i).applyCarrier=Ue),onUpdateChecked:et},{default:w(()=>[ye(me(l(I)("expInfo.applyCarrier")),1)]),_:1},8,["checked"]))]),default:w(()=>[y(ce,{type:"primary",onClick:R},{default:w(()=>[ye(me(l(I)("common.OK")),1)]),_:1})]),_:1})]}),_:1})]),_:1},8,["style"])]),_:1},8,["show"])}}});var As=Object.defineProperty,lr=Object.getOwnPropertySymbols,na=Object.prototype.hasOwnProperty,ra=Object.prototype.propertyIsEnumerable,Io=(e,n,t)=>n in e?As(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,un=(e,n)=>{for(var t in n||(n={}))na.call(n,t)&&Io(e,t,n[t]);if(lr)for(var t of lr(n))ra.call(n,t)&&Io(e,t,n[t]);return e},oa=(e,n)=>{var t={};for(var r in e)na.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&lr)for(var r of lr(e))n.indexOf(r)<0&&ra.call(e,r)&&(t[r]=e[r]);return t};const aa="[vue-draggable-plus]: ";function Ps(e){console.warn(aa+e)}function ks(e){console.error(aa+e)}function Eo(e,n,t){return t>=0&&t<e.length&&e.splice(t,0,e.splice(n,1)[0]),e}function $s(e){return e.replace(/-(\w)/g,(n,t)=>t?t.toUpperCase():"")}function Rs(e){return Object.keys(e).reduce((n,t)=>(typeof e[t]<"u"&&(n[$s(t)]=e[t]),n),{})}function To(e,n){return Array.isArray(e)&&e.splice(n,1),e}function Do(e,n,t){return Array.isArray(e)&&e.splice(n,0,t),e}function zs(e){return typeof e>"u"}function Fs(e){return typeof e=="string"}function No(e,n,t){const r=e.children[t];e.insertBefore(n,r)}function Tr(e){e.parentNode&&e.parentNode.removeChild(e)}function Ls(e,n=document){var t;let r=null;return typeof(n==null?void 0:n.querySelector)=="function"?r=(t=n==null?void 0:n.querySelector)==null?void 0:t.call(n,e):r=document.querySelector(e),r||Ps(`Element not found: ${e}`),r}function Us(e,n,t=null){return function(...r){return e.apply(t,r),n.apply(t,r)}}function js(e,n){const t=un({},e);return Object.keys(n).forEach(r=>{t[r]?t[r]=Us(e[r],n[r]):t[r]=n[r]}),t}function Bs(e){return e instanceof HTMLElement}function Mo(e,n){Object.keys(e).forEach(t=>{n(t,e[t])})}function Hs(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const Js=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ao(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function At(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Ao(Object(t),!0).forEach(function(r){Gs(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ao(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function er(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?er=function(n){return typeof n}:er=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},er(e)}function Gs(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Lt(){return Lt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Lt.apply(this,arguments)}function Ws(e,n){if(e==null)return{};var t={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(n.indexOf(a)>=0)&&(t[a]=e[a]);return t}function Vs(e,n){if(e==null)return{};var t=Ws(e,n),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}var qs="1.15.2";function Ft(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Ut=Ft(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),kn=Ft(/Edge/i),Po=Ft(/firefox/i),En=Ft(/safari/i)&&!Ft(/chrome/i)&&!Ft(/android/i),ia=Ft(/iP(ad|od|hone)/i),la=Ft(/chrome/i)&&Ft(/android/i),sa={capture:!1,passive:!1};function Me(e,n,t){e.addEventListener(n,t,!Ut&&sa)}function Ne(e,n,t){e.removeEventListener(n,t,!Ut&&sa)}function sr(e,n){if(n){if(n[0]===">"&&(n=n.substring(1)),e)try{if(e.matches)return e.matches(n);if(e.msMatchesSelector)return e.msMatchesSelector(n);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(n)}catch{return!1}return!1}}function Xs(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Et(e,n,t,r){if(e){t=t||document;do{if(n!=null&&(n[0]===">"?e.parentNode===t&&sr(e,n):sr(e,n))||r&&e===t)return e;if(e===t)break}while(e=Xs(e))}return null}var ko=/\s+/g;function gt(e,n,t){if(e&&n)if(e.classList)e.classList[t?"add":"remove"](n);else{var r=(" "+e.className+" ").replace(ko," ").replace(" "+n+" "," ");e.className=(r+(t?" "+n:"")).replace(ko," ")}}function oe(e,n,t){var r=e&&e.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(t=e.currentStyle),n===void 0?t:t[n];!(n in r)&&n.indexOf("webkit")===-1&&(n="-webkit-"+n),r[n]=t+(typeof t=="string"?"":"px")}}function pn(e,n){var t="";if(typeof e=="string")t=e;else do{var r=oe(e,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!n&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(t)}function ca(e,n,t){if(e){var r=e.getElementsByTagName(n),a=0,i=r.length;if(t)for(;a<i;a++)t(r[a],a);return r}return[]}function Mt(){var e=document.scrollingElement;return e||document.documentElement}function Ge(e,n,t,r,a){if(!(!e.getBoundingClientRect&&e!==window)){var i,c,d,u,g,h,C;if(e!==window&&e.parentNode&&e!==Mt()?(i=e.getBoundingClientRect(),c=i.top,d=i.left,u=i.bottom,g=i.right,h=i.height,C=i.width):(c=0,d=0,u=window.innerHeight,g=window.innerWidth,h=window.innerHeight,C=window.innerWidth),(n||t)&&e!==window&&(a=a||e.parentNode,!Ut))do if(a&&a.getBoundingClientRect&&(oe(a,"transform")!=="none"||t&&oe(a,"position")!=="static")){var I=a.getBoundingClientRect();c-=I.top+parseInt(oe(a,"border-top-width")),d-=I.left+parseInt(oe(a,"border-left-width")),u=c+i.height,g=d+i.width;break}while(a=a.parentNode);if(r&&e!==window){var v=pn(a||e),x=v&&v.a,O=v&&v.d;v&&(c/=O,d/=x,C/=x,h/=O,u=c+h,g=d+C)}return{top:c,left:d,bottom:u,right:g,width:C,height:h}}}function $o(e,n,t){for(var r=Wt(e,!0),a=Ge(e)[n];r;){var i=Ge(r)[t],c=void 0;if(c=a>=i,!c)return r;if(r===Mt())break;r=Wt(r,!1)}return!1}function hn(e,n,t,r){for(var a=0,i=0,c=e.children;i<c.length;){if(c[i].style.display!=="none"&&c[i]!==ae.ghost&&(r||c[i]!==ae.dragged)&&Et(c[i],t.draggable,e,!1)){if(a===n)return c[i];a++}i++}return null}function eo(e,n){for(var t=e.lastElementChild;t&&(t===ae.ghost||oe(t,"display")==="none"||n&&!sr(t,n));)t=t.previousElementSibling;return t||null}function xt(e,n){var t=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==ae.clone&&(!n||sr(e,n))&&t++;return t}function Ro(e){var n=0,t=0,r=Mt();if(e)do{var a=pn(e),i=a.a,c=a.d;n+=e.scrollLeft*i,t+=e.scrollTop*c}while(e!==r&&(e=e.parentNode));return[n,t]}function Ys(e,n){for(var t in e)if(e.hasOwnProperty(t)){for(var r in n)if(n.hasOwnProperty(r)&&n[r]===e[t][r])return Number(t)}return-1}function Wt(e,n){if(!e||!e.getBoundingClientRect)return Mt();var t=e,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var a=oe(t);if(t.clientWidth<t.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return Mt();if(r||n)return t;r=!0}}while(t=t.parentNode);return Mt()}function Ks(e,n){if(e&&n)for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function Dr(e,n){return Math.round(e.top)===Math.round(n.top)&&Math.round(e.left)===Math.round(n.left)&&Math.round(e.height)===Math.round(n.height)&&Math.round(e.width)===Math.round(n.width)}var Tn;function ua(e,n){return function(){if(!Tn){var t=arguments,r=this;t.length===1?e.call(r,t[0]):e.apply(r,t),Tn=setTimeout(function(){Tn=void 0},n)}}}function Qs(){clearTimeout(Tn),Tn=void 0}function fa(e,n,t){e.scrollLeft+=n,e.scrollTop+=t}function da(e){var n=window.Polymer,t=window.jQuery||window.Zepto;return n&&n.dom?n.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function pa(e,n,t){var r={};return Array.from(e.children).forEach(function(a){var i,c,d,u;if(!(!Et(a,n.draggable,e,!1)||a.animated||a===t)){var g=Ge(a);r.left=Math.min((i=r.left)!==null&&i!==void 0?i:1/0,g.left),r.top=Math.min((c=r.top)!==null&&c!==void 0?c:1/0,g.top),r.right=Math.max((d=r.right)!==null&&d!==void 0?d:-1/0,g.right),r.bottom=Math.max((u=r.bottom)!==null&&u!==void 0?u:-1/0,g.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var yt="Sortable"+new Date().getTime();function Zs(){var e=[],n;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var t=[].slice.call(this.el.children);t.forEach(function(r){if(!(oe(r,"display")==="none"||r===ae.ghost)){e.push({target:r,rect:Ge(r)});var a=At({},e[e.length-1].rect);if(r.thisAnimationDuration){var i=pn(r,!0);i&&(a.top-=i.f,a.left-=i.e)}r.fromRect=a}})}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(Ys(e,{target:t}),1)},animateAll:function(t){var r=this;if(!this.options.animation){clearTimeout(n),typeof t=="function"&&t();return}var a=!1,i=0;e.forEach(function(c){var d=0,u=c.target,g=u.fromRect,h=Ge(u),C=u.prevFromRect,I=u.prevToRect,v=c.rect,x=pn(u,!0);x&&(h.top-=x.f,h.left-=x.e),u.toRect=h,u.thisAnimationDuration&&Dr(C,h)&&!Dr(g,h)&&(v.top-h.top)/(v.left-h.left)===(g.top-h.top)/(g.left-h.left)&&(d=tc(v,C,I,r.options)),Dr(h,g)||(u.prevFromRect=g,u.prevToRect=h,d||(d=r.options.animation),r.animate(u,v,h,d)),d&&(a=!0,i=Math.max(i,d),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},d),u.thisAnimationDuration=d)}),clearTimeout(n),a?n=setTimeout(function(){typeof t=="function"&&t()},i):typeof t=="function"&&t(),e=[]},animate:function(t,r,a,i){if(i){oe(t,"transition",""),oe(t,"transform","");var c=pn(this.el),d=c&&c.a,u=c&&c.d,g=(r.left-a.left)/(d||1),h=(r.top-a.top)/(u||1);t.animatingX=!!g,t.animatingY=!!h,oe(t,"transform","translate3d("+g+"px,"+h+"px,0)"),this.forRepaintDummy=ec(t),oe(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),oe(t,"transform","translate3d(0,0,0)"),typeof t.animated=="number"&&clearTimeout(t.animated),t.animated=setTimeout(function(){oe(t,"transition",""),oe(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},i)}}}}function ec(e){return e.offsetWidth}function tc(e,n,t,r){return Math.sqrt(Math.pow(n.top-e.top,2)+Math.pow(n.left-e.left,2))/Math.sqrt(Math.pow(n.top-t.top,2)+Math.pow(n.left-t.left,2))*r.animation}var ln=[],Nr={initializeByDefault:!0},$n={mount:function(e){for(var n in Nr)Nr.hasOwnProperty(n)&&!(n in e)&&(e[n]=Nr[n]);ln.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),ln.push(e)},pluginEvent:function(e,n,t){var r=this;this.eventCanceled=!1,t.cancel=function(){r.eventCanceled=!0};var a=e+"Global";ln.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][a]&&n[i.pluginName][a](At({sortable:n},t)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](At({sortable:n},t)))})},initializePlugins:function(e,n,t,r){ln.forEach(function(c){var d=c.pluginName;if(!(!e.options[d]&&!c.initializeByDefault)){var u=new c(e,n,e.options);u.sortable=e,u.options=e.options,e[d]=u,Lt(t,u.defaults)}});for(var a in e.options)if(e.options.hasOwnProperty(a)){var i=this.modifyOption(e,a,e.options[a]);typeof i<"u"&&(e.options[a]=i)}},getEventProperties:function(e,n){var t={};return ln.forEach(function(r){typeof r.eventProperties=="function"&&Lt(t,r.eventProperties.call(n[r.pluginName],e))}),t},modifyOption:function(e,n,t){var r;return ln.forEach(function(a){e[a.pluginName]&&a.optionListeners&&typeof a.optionListeners[n]=="function"&&(r=a.optionListeners[n].call(e[a.pluginName],t))}),r}};function nc(e){var n=e.sortable,t=e.rootEl,r=e.name,a=e.targetEl,i=e.cloneEl,c=e.toEl,d=e.fromEl,u=e.oldIndex,g=e.newIndex,h=e.oldDraggableIndex,C=e.newDraggableIndex,I=e.originalEvent,v=e.putSortable,x=e.extraEventProperties;if(n=n||t&&t[yt],!!n){var O,H=n.options,B="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Ut&&!kn?O=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(O=document.createEvent("Event"),O.initEvent(r,!0,!0)),O.to=c||t,O.from=d||t,O.item=a||t,O.clone=i,O.oldIndex=u,O.newIndex=g,O.oldDraggableIndex=h,O.newDraggableIndex=C,O.originalEvent=I,O.pullMode=v?v.lastPutMode:void 0;var ie=At(At({},x),$n.getEventProperties(r,n));for(var ee in ie)O[ee]=ie[ee];t&&t.dispatchEvent(O),H[B]&&H[B].call(n,O)}}var rc=["evt"],pt=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=t.evt,a=Vs(t,rc);$n.pluginEvent.bind(ae)(e,n,At({dragEl:A,parentEl:Be,ghostEl:he,rootEl:ze,nextEl:nn,lastDownEl:tr,cloneEl:Le,cloneHidden:Gt,dragStarted:Sn,putSortable:Qe,activeSortable:ae.active,originalEvent:r,oldIndex:fn,oldDraggableIndex:Dn,newIndex:_t,newDraggableIndex:Jt,hideGhostForTarget:ga,unhideGhostForTarget:_a,cloneNowHidden:function(){Gt=!0},cloneNowShown:function(){Gt=!1},dispatchSortableEvent:function(i){lt({sortable:n,name:i,originalEvent:r})}},a))};function lt(e){nc(At({putSortable:Qe,cloneEl:Le,targetEl:A,rootEl:ze,oldIndex:fn,oldDraggableIndex:Dn,newIndex:_t,newDraggableIndex:Jt},e))}var A,Be,he,ze,nn,tr,Le,Gt,fn,_t,Dn,Jt,Yn,Qe,cn=!1,cr=!1,ur=[],Zt,It,Mr,Ar,zo,Fo,Sn,sn,Nn,Mn=!1,Kn=!1,nr,ot,Pr=[],Br=!1,fr=[],yr=typeof document<"u",Qn=ia,Lo=kn||Ut?"cssFloat":"float",oc=yr&&!la&&!ia&&"draggable"in document.createElement("div"),ha=function(){if(yr){if(Ut)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),va=function(e,n){var t=oe(e),r=parseInt(t.width)-parseInt(t.paddingLeft)-parseInt(t.paddingRight)-parseInt(t.borderLeftWidth)-parseInt(t.borderRightWidth),a=hn(e,0,n),i=hn(e,1,n),c=a&&oe(a),d=i&&oe(i),u=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Ge(a).width,g=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+Ge(i).width;if(t.display==="flex")return t.flexDirection==="column"||t.flexDirection==="column-reverse"?"vertical":"horizontal";if(t.display==="grid")return t.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(a&&c.float&&c.float!=="none"){var h=c.float==="left"?"left":"right";return i&&(d.clear==="both"||d.clear===h)?"vertical":"horizontal"}return a&&(c.display==="block"||c.display==="flex"||c.display==="table"||c.display==="grid"||u>=r&&t[Lo]==="none"||i&&t[Lo]==="none"&&u+g>r)?"vertical":"horizontal"},ac=function(e,n,t){var r=t?e.left:e.top,a=t?e.right:e.bottom,i=t?e.width:e.height,c=t?n.left:n.top,d=t?n.right:n.bottom,u=t?n.width:n.height;return r===c||a===d||r+i/2===c+u/2},ic=function(e,n){var t;return ur.some(function(r){var a=r[yt].options.emptyInsertThreshold;if(!(!a||eo(r))){var i=Ge(r),c=e>=i.left-a&&e<=i.right+a,d=n>=i.top-a&&n<=i.bottom+a;if(c&&d)return t=r}}),t},ma=function(e){function n(a,i){return function(c,d,u,g){var h=c.options.group.name&&d.options.group.name&&c.options.group.name===d.options.group.name;if(a==null&&(i||h))return!0;if(a==null||a===!1)return!1;if(i&&a==="clone")return a;if(typeof a=="function")return n(a(c,d,u,g),i)(c,d,u,g);var C=(i?c:d).options.group.name;return a===!0||typeof a=="string"&&a===C||a.join&&a.indexOf(C)>-1}}var t={},r=e.group;(!r||er(r)!="object")&&(r={name:r}),t.name=r.name,t.checkPull=n(r.pull,!0),t.checkPut=n(r.put),t.revertClone=r.revertClone,e.group=t},ga=function(){!ha&&he&&oe(he,"display","none")},_a=function(){!ha&&he&&oe(he,"display","")};yr&&!la&&document.addEventListener("click",function(e){if(cr)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),cr=!1,!1},!0);var en=function(e){if(A){e=e.touches?e.touches[0]:e;var n=ic(e.clientX,e.clientY);if(n){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.target=t.rootEl=n,t.preventDefault=void 0,t.stopPropagation=void 0,n[yt]._onDragOver(t)}}},lc=function(e){A&&A.parentNode[yt]._isOutsideThisEl(e.target)};function ae(e,n){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=n=Lt({},n),e[yt]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return va(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,c){i.setData("Text",c.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ae.supportPointer!==!1&&"PointerEvent"in window&&!En,emptyInsertThreshold:5};$n.initializePlugins(this,e,t);for(var r in t)!(r in n)&&(n[r]=t[r]);ma(n);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=n.forceFallback?!1:oc,this.nativeDraggable&&(this.options.touchStartThreshold=1),n.supportPointer?Me(e,"pointerdown",this._onTapStart):(Me(e,"mousedown",this._onTapStart),Me(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Me(e,"dragover",this),Me(e,"dragenter",this)),ur.push(this.el),n.store&&n.store.get&&this.sort(n.store.get(this)||[]),Lt(this,Zs())}ae.prototype={constructor:ae,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(sn=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,A):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,t=this.el,r=this.options,a=r.preventOnFilter,i=e.type,c=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,d=(c||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||d,g=r.filter;if(vc(t),!A&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||r.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&En&&d&&d.tagName.toUpperCase()==="SELECT")&&(d=Et(d,r.draggable,t,!1),!(d&&d.animated)&&tr!==d)){if(fn=xt(d),Dn=xt(d,r.draggable),typeof g=="function"){if(g.call(this,e,d,this)){lt({sortable:n,rootEl:u,name:"filter",targetEl:d,toEl:t,fromEl:t}),pt("filter",n,{evt:e}),a&&e.cancelable&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(h){if(h=Et(u,h.trim(),t,!1),h)return lt({sortable:n,rootEl:h,name:"filter",targetEl:d,fromEl:t,toEl:t}),pt("filter",n,{evt:e}),!0}),g)){a&&e.cancelable&&e.preventDefault();return}r.handle&&!Et(u,r.handle,t,!1)||this._prepareDragStart(e,c,d)}}},_prepareDragStart:function(e,n,t){var r=this,a=r.el,i=r.options,c=a.ownerDocument,d;if(t&&!A&&t.parentNode===a){var u=Ge(t);if(ze=a,A=t,Be=A.parentNode,nn=A.nextSibling,tr=t,Yn=i.group,ae.dragged=A,Zt={target:A,clientX:(n||e).clientX,clientY:(n||e).clientY},zo=Zt.clientX-u.left,Fo=Zt.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,A.style["will-change"]="all",d=function(){if(pt("delayEnded",r,{evt:e}),ae.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Po&&r.nativeDraggable&&(A.draggable=!0),r._triggerDragStart(e,n),lt({sortable:r,name:"choose",originalEvent:e}),gt(A,i.chosenClass,!0)},i.ignore.split(",").forEach(function(g){ca(A,g.trim(),kr)}),Me(c,"dragover",en),Me(c,"mousemove",en),Me(c,"touchmove",en),Me(c,"mouseup",r._onDrop),Me(c,"touchend",r._onDrop),Me(c,"touchcancel",r._onDrop),Po&&this.nativeDraggable&&(this.options.touchStartThreshold=4,A.draggable=!0),pt("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(kn||Ut))){if(ae.eventCanceled){this._onDrop();return}Me(c,"mouseup",r._disableDelayedDrag),Me(c,"touchend",r._disableDelayedDrag),Me(c,"touchcancel",r._disableDelayedDrag),Me(c,"mousemove",r._delayedDragTouchMoveHandler),Me(c,"touchmove",r._delayedDragTouchMoveHandler),i.supportPointer&&Me(c,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(d,i.delay)}else d()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){A&&kr(A),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ne(e,"mouseup",this._disableDelayedDrag),Ne(e,"touchend",this._disableDelayedDrag),Ne(e,"touchcancel",this._disableDelayedDrag),Ne(e,"mousemove",this._delayedDragTouchMoveHandler),Ne(e,"touchmove",this._delayedDragTouchMoveHandler),Ne(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Me(document,"pointermove",this._onTouchMove):n?Me(document,"touchmove",this._onTouchMove):Me(document,"mousemove",this._onTouchMove):(Me(A,"dragend",this),Me(ze,"dragstart",this._onDragStart));try{document.selection?rr(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(cn=!1,ze&&A){pt("dragStarted",this,{evt:n}),this.nativeDraggable&&Me(document,"dragover",lc);var t=this.options;!e&&gt(A,t.dragClass,!1),gt(A,t.ghostClass,!0),ae.active=this,e&&this._appendGhost(),lt({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(It){this._lastX=It.clientX,this._lastY=It.clientY,ga();for(var e=document.elementFromPoint(It.clientX,It.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(It.clientX,It.clientY),e!==n);)n=e;if(A.parentNode[yt]._isOutsideThisEl(e),n)do{if(n[yt]){var t=void 0;if(t=n[yt]._onDragOver({clientX:It.clientX,clientY:It.clientY,target:e,rootEl:n}),t&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);_a()}},_onTouchMove:function(e){if(Zt){var n=this.options,t=n.fallbackTolerance,r=n.fallbackOffset,a=e.touches?e.touches[0]:e,i=he&&pn(he,!0),c=he&&i&&i.a,d=he&&i&&i.d,u=Qn&&ot&&Ro(ot),g=(a.clientX-Zt.clientX+r.x)/(c||1)+(u?u[0]-Pr[0]:0)/(c||1),h=(a.clientY-Zt.clientY+r.y)/(d||1)+(u?u[1]-Pr[1]:0)/(d||1);if(!ae.active&&!cn){if(t&&Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))<t)return;this._onDragStart(e,!0)}if(he){i?(i.e+=g-(Mr||0),i.f+=h-(Ar||0)):i={a:1,b:0,c:0,d:1,e:g,f:h};var C="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");oe(he,"webkitTransform",C),oe(he,"mozTransform",C),oe(he,"msTransform",C),oe(he,"transform",C),Mr=g,Ar=h,It=a}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!he){var e=this.options.fallbackOnBody?document.body:ze,n=Ge(A,!0,Qn,!0,e),t=this.options;if(Qn){for(ot=e;oe(ot,"position")==="static"&&oe(ot,"transform")==="none"&&ot!==document;)ot=ot.parentNode;ot!==document.body&&ot!==document.documentElement?(ot===document&&(ot=Mt()),n.top+=ot.scrollTop,n.left+=ot.scrollLeft):ot=Mt(),Pr=Ro(ot)}he=A.cloneNode(!0),gt(he,t.ghostClass,!1),gt(he,t.fallbackClass,!0),gt(he,t.dragClass,!0),oe(he,"transition",""),oe(he,"transform",""),oe(he,"box-sizing","border-box"),oe(he,"margin",0),oe(he,"top",n.top),oe(he,"left",n.left),oe(he,"width",n.width),oe(he,"height",n.height),oe(he,"opacity","0.8"),oe(he,"position",Qn?"absolute":"fixed"),oe(he,"zIndex","100000"),oe(he,"pointerEvents","none"),ae.ghost=he,e.appendChild(he),oe(he,"transform-origin",zo/parseInt(he.style.width)*100+"% "+Fo/parseInt(he.style.height)*100+"%")}},_onDragStart:function(e,n){var t=this,r=e.dataTransfer,a=t.options;if(pt("dragStart",this,{evt:e}),ae.eventCanceled){this._onDrop();return}pt("setupClone",this),ae.eventCanceled||(Le=da(A),Le.removeAttribute("id"),Le.draggable=!1,Le.style["will-change"]="",this._hideClone(),gt(Le,this.options.chosenClass,!1),ae.clone=Le),t.cloneId=rr(function(){pt("clone",t),!ae.eventCanceled&&(t.options.removeCloneOnHide||ze.insertBefore(Le,A),t._hideClone(),lt({sortable:t,name:"clone"}))}),!n&&gt(A,a.dragClass,!0),n?(cr=!0,t._loopId=setInterval(t._emulateDragOver,50)):(Ne(document,"mouseup",t._onDrop),Ne(document,"touchend",t._onDrop),Ne(document,"touchcancel",t._onDrop),r&&(r.effectAllowed="move",a.setData&&a.setData.call(t,r,A)),Me(document,"drop",t),oe(A,"transform","translateZ(0)")),cn=!0,t._dragStartId=rr(t._dragStarted.bind(t,n,e)),Me(document,"selectstart",t),Sn=!0,En&&oe(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,t=e.target,r,a,i,c=this.options,d=c.group,u=ae.active,g=Yn===d,h=c.sort,C=Qe||u,I,v=this,x=!1;if(Br)return;function O(Te,R){pt(Te,v,At({evt:e,isOwner:g,axis:I?"vertical":"horizontal",revert:i,dragRect:r,targetRect:a,canSort:h,fromSortable:C,target:t,completed:B,onMove:function(X,ve){return Zn(ze,n,A,r,X,Ge(X),e,ve)},changed:ie},R))}function H(){O("dragOverAnimationCapture"),v.captureAnimationState(),v!==C&&C.captureAnimationState()}function B(Te){return O("dragOverCompleted",{insertion:Te}),Te&&(g?u._hideClone():u._showClone(v),v!==C&&(gt(A,Qe?Qe.options.ghostClass:u.options.ghostClass,!1),gt(A,c.ghostClass,!0)),Qe!==v&&v!==ae.active?Qe=v:v===ae.active&&Qe&&(Qe=null),C===v&&(v._ignoreWhileAnimating=t),v.animateAll(function(){O("dragOverAnimationComplete"),v._ignoreWhileAnimating=null}),v!==C&&(C.animateAll(),C._ignoreWhileAnimating=null)),(t===A&&!A.animated||t===n&&!t.animated)&&(sn=null),!c.dragoverBubble&&!e.rootEl&&t!==document&&(A.parentNode[yt]._isOutsideThisEl(e.target),!Te&&en(e)),!c.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),x=!0}function ie(){_t=xt(A),Jt=xt(A,c.draggable),lt({sortable:v,name:"change",toEl:n,newIndex:_t,newDraggableIndex:Jt,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),t=Et(t,c.draggable,n,!0),O("dragOver"),ae.eventCanceled)return x;if(A.contains(e.target)||t.animated&&t.animatingX&&t.animatingY||v._ignoreWhileAnimating===t)return B(!1);if(cr=!1,u&&!c.disabled&&(g?h||(i=Be!==ze):Qe===this||(this.lastPutMode=Yn.checkPull(this,u,A,e))&&d.checkPut(this,u,A,e))){if(I=this._getDirection(e,t)==="vertical",r=Ge(A),O("dragOverValid"),ae.eventCanceled)return x;if(i)return Be=ze,H(),this._hideClone(),O("revert"),ae.eventCanceled||(nn?ze.insertBefore(A,nn):ze.appendChild(A)),B(!0);var ee=eo(n,c.draggable);if(!ee||fc(e,I,this)&&!ee.animated){if(ee===A)return B(!1);if(ee&&n===e.target&&(t=ee),t&&(a=Ge(t)),Zn(ze,n,A,r,t,a,e,!!t)!==!1)return H(),ee&&ee.nextSibling?n.insertBefore(A,ee.nextSibling):n.appendChild(A),Be=n,ie(),B(!0)}else if(ee&&uc(e,I,this)){var T=hn(n,0,c,!0);if(T===A)return B(!1);if(t=T,a=Ge(t),Zn(ze,n,A,r,t,a,e,!1)!==!1)return H(),n.insertBefore(A,T),Be=n,ie(),B(!0)}else if(t.parentNode===n){a=Ge(t);var N=0,P,F=A.parentNode!==n,_=!ac(A.animated&&A.toRect||r,t.animated&&t.toRect||a,I),f=I?"top":"left",$=$o(t,"top","top")||$o(A,"top","top"),q=$?$.scrollTop:void 0;sn!==t&&(P=a[f],Mn=!1,Kn=!_&&c.invertSwap||F),N=dc(e,t,a,I,_?1:c.swapThreshold,c.invertedSwapThreshold==null?c.swapThreshold:c.invertedSwapThreshold,Kn,sn===t);var U;if(N!==0){var J=xt(A);do J-=N,U=Be.children[J];while(U&&(oe(U,"display")==="none"||U===he))}if(N===0||U===t)return B(!1);sn=t,Nn=N;var le=t.nextElementSibling,ue=!1;ue=N===1;var se=Zn(ze,n,A,r,t,a,e,ue);if(se!==!1)return(se===1||se===-1)&&(ue=se===1),Br=!0,setTimeout(cc,30),H(),ue&&!le?n.appendChild(A):t.parentNode.insertBefore(A,ue?le:t),$&&fa($,0,q-$.scrollTop),Be=A.parentNode,P!==void 0&&!Kn&&(nr=Math.abs(P-Ge(t)[f])),ie(),B(!0)}if(n.contains(A))return B(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ne(document,"mousemove",this._onTouchMove),Ne(document,"touchmove",this._onTouchMove),Ne(document,"pointermove",this._onTouchMove),Ne(document,"dragover",en),Ne(document,"mousemove",en),Ne(document,"touchmove",en)},_offUpEvents:function(){var e=this.el.ownerDocument;Ne(e,"mouseup",this._onDrop),Ne(e,"touchend",this._onDrop),Ne(e,"pointerup",this._onDrop),Ne(e,"touchcancel",this._onDrop),Ne(document,"selectstart",this)},_onDrop:function(e){var n=this.el,t=this.options;if(_t=xt(A),Jt=xt(A,t.draggable),pt("drop",this,{evt:e}),Be=A&&A.parentNode,_t=xt(A),Jt=xt(A,t.draggable),ae.eventCanceled){this._nulling();return}cn=!1,Kn=!1,Mn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Hr(this.cloneId),Hr(this._dragStartId),this.nativeDraggable&&(Ne(document,"drop",this),Ne(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),En&&oe(document.body,"user-select",""),oe(A,"transform",""),e&&(Sn&&(e.cancelable&&e.preventDefault(),!t.dropBubble&&e.stopPropagation()),he&&he.parentNode&&he.parentNode.removeChild(he),(ze===Be||Qe&&Qe.lastPutMode!=="clone")&&Le&&Le.parentNode&&Le.parentNode.removeChild(Le),A&&(this.nativeDraggable&&Ne(A,"dragend",this),kr(A),A.style["will-change"]="",Sn&&!cn&&gt(A,Qe?Qe.options.ghostClass:this.options.ghostClass,!1),gt(A,this.options.chosenClass,!1),lt({sortable:this,name:"unchoose",toEl:Be,newIndex:null,newDraggableIndex:null,originalEvent:e}),ze!==Be?(_t>=0&&(lt({rootEl:Be,name:"add",toEl:Be,fromEl:ze,originalEvent:e}),lt({sortable:this,name:"remove",toEl:Be,originalEvent:e}),lt({rootEl:Be,name:"sort",toEl:Be,fromEl:ze,originalEvent:e}),lt({sortable:this,name:"sort",toEl:Be,originalEvent:e})),Qe&&Qe.save()):_t!==fn&&_t>=0&&(lt({sortable:this,name:"update",toEl:Be,originalEvent:e}),lt({sortable:this,name:"sort",toEl:Be,originalEvent:e})),ae.active&&((_t==null||_t===-1)&&(_t=fn,Jt=Dn),lt({sortable:this,name:"end",toEl:Be,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pt("nulling",this),ze=A=Be=he=nn=Le=tr=Gt=Zt=It=Sn=_t=Jt=fn=Dn=sn=Nn=Qe=Yn=ae.dragged=ae.ghost=ae.clone=ae.active=null,fr.forEach(function(e){e.checked=!0}),fr.length=Mr=Ar=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":A&&(this._onDragOver(e),sc(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,t=this.el.children,r=0,a=t.length,i=this.options;r<a;r++)n=t[r],Et(n,i.draggable,this.el,!1)&&e.push(n.getAttribute(i.dataIdAttr)||hc(n));return e},sort:function(e,n){var t={},r=this.el;this.toArray().forEach(function(a,i){var c=r.children[i];Et(c,this.options.draggable,r,!1)&&(t[a]=c)},this),n&&this.captureAnimationState(),e.forEach(function(a){t[a]&&(r.removeChild(t[a]),r.appendChild(t[a]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return Et(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var t=this.options;if(n===void 0)return t[e];var r=$n.modifyOption(this,e,n);typeof r<"u"?t[e]=r:t[e]=n,e==="group"&&ma(t)},destroy:function(){pt("destroy",this);var e=this.el;e[yt]=null,Ne(e,"mousedown",this._onTapStart),Ne(e,"touchstart",this._onTapStart),Ne(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ne(e,"dragover",this),Ne(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ur.splice(ur.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Gt){if(pt("hideClone",this),ae.eventCanceled)return;oe(Le,"display","none"),this.options.removeCloneOnHide&&Le.parentNode&&Le.parentNode.removeChild(Le),Gt=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Gt){if(pt("showClone",this),ae.eventCanceled)return;A.parentNode==ze&&!this.options.group.revertClone?ze.insertBefore(Le,A):nn?ze.insertBefore(Le,nn):ze.appendChild(Le),this.options.group.revertClone&&this.animate(A,Le),oe(Le,"display",""),Gt=!1}}};function sc(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function Zn(e,n,t,r,a,i,c,d){var u,g=e[yt],h=g.options.onMove,C;return window.CustomEvent&&!Ut&&!kn?u=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(u=document.createEvent("Event"),u.initEvent("move",!0,!0)),u.to=n,u.from=e,u.dragged=t,u.draggedRect=r,u.related=a||n,u.relatedRect=i||Ge(n),u.willInsertAfter=d,u.originalEvent=c,e.dispatchEvent(u),h&&(C=h.call(g,u,c)),C}function kr(e){e.draggable=!1}function cc(){Br=!1}function uc(e,n,t){var r=Ge(hn(t.el,0,t.options,!0)),a=pa(t.el,t.options,he),i=10;return n?e.clientX<a.left-i||e.clientY<r.top&&e.clientX<r.right:e.clientY<a.top-i||e.clientY<r.bottom&&e.clientX<r.left}function fc(e,n,t){var r=Ge(eo(t.el,t.options.draggable)),a=pa(t.el,t.options,he),i=10;return n?e.clientX>a.right+i||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>a.bottom+i||e.clientX>r.right&&e.clientY>r.top}function dc(e,n,t,r,a,i,c,d){var u=r?e.clientY:e.clientX,g=r?t.height:t.width,h=r?t.top:t.left,C=r?t.bottom:t.right,I=!1;if(!c){if(d&&nr<g*a){if(!Mn&&(Nn===1?u>h+g*i/2:u<C-g*i/2)&&(Mn=!0),Mn)I=!0;else if(Nn===1?u<h+nr:u>C-nr)return-Nn}else if(u>h+g*(1-a)/2&&u<C-g*(1-a)/2)return pc(n)}return I=I||c,I&&(u<h+g*i/2||u>C-g*i/2)?u>h+g/2?1:-1:0}function pc(e){return xt(A)<xt(e)?1:-1}function hc(e){for(var n=e.tagName+e.className+e.src+e.href+e.textContent,t=n.length,r=0;t--;)r+=n.charCodeAt(t);return r.toString(36)}function vc(e){fr.length=0;for(var n=e.getElementsByTagName("input"),t=n.length;t--;){var r=n[t];r.checked&&fr.push(r)}}function rr(e){return setTimeout(e,0)}function Hr(e){return clearTimeout(e)}yr&&Me(document,"touchmove",function(e){(ae.active||cn)&&e.cancelable&&e.preventDefault()});ae.utils={on:Me,off:Ne,css:oe,find:ca,is:function(e,n){return!!Et(e,n,e,!1)},extend:Ks,throttle:ua,closest:Et,toggleClass:gt,clone:da,index:xt,nextTick:rr,cancelNextTick:Hr,detectDirection:va,getChild:hn};ae.get=function(e){return e[yt]};ae.mount=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];n[0].constructor===Array&&(n=n[0]),n.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(ae.utils=At(At({},ae.utils),r.utils)),$n.mount(r)})};ae.create=function(e,n){return new ae(e,n)};ae.version=qs;var Je=[],Cn,Jr,Gr=!1,$r,Rr,dr,On;function mc(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this))}return e.prototype={dragStarted:function(n){var t=n.originalEvent;this.sortable.nativeDraggable?Me(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Me(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Me(document,"touchmove",this._handleFallbackAutoScroll):Me(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var t=n.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Ne(document,"dragover",this._handleAutoScroll):(Ne(document,"pointermove",this._handleFallbackAutoScroll),Ne(document,"touchmove",this._handleFallbackAutoScroll),Ne(document,"mousemove",this._handleFallbackAutoScroll)),Uo(),or(),Qs()},nulling:function(){dr=Jr=Cn=Gr=On=$r=Rr=null,Je.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,t){var r=this,a=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,c=document.elementFromPoint(a,i);if(dr=n,t||this.options.forceAutoScrollFallback||kn||Ut||En){zr(n,this.options,c,t);var d=Wt(c,!0);Gr&&(!On||a!==$r||i!==Rr)&&(On&&Uo(),On=setInterval(function(){var u=Wt(document.elementFromPoint(a,i),!0);u!==d&&(d=u,or()),zr(n,r.options,u,t)},10),$r=a,Rr=i)}else{if(!this.options.bubbleScroll||Wt(c,!0)===Mt()){or();return}zr(n,this.options,Wt(c,!1),!1)}}},Lt(e,{pluginName:"scroll",initializeByDefault:!0})}function or(){Je.forEach(function(e){clearInterval(e.pid)}),Je=[]}function Uo(){clearInterval(On)}var zr=ua(function(e,n,t,r){if(n.scroll){var a=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,c=n.scrollSensitivity,d=n.scrollSpeed,u=Mt(),g=!1,h;Jr!==t&&(Jr=t,or(),Cn=n.scroll,h=n.scrollFn,Cn===!0&&(Cn=Wt(t,!0)));var C=0,I=Cn;do{var v=I,x=Ge(v),O=x.top,H=x.bottom,B=x.left,ie=x.right,ee=x.width,T=x.height,N=void 0,P=void 0,F=v.scrollWidth,_=v.scrollHeight,f=oe(v),$=v.scrollLeft,q=v.scrollTop;v===u?(N=ee<F&&(f.overflowX==="auto"||f.overflowX==="scroll"||f.overflowX==="visible"),P=T<_&&(f.overflowY==="auto"||f.overflowY==="scroll"||f.overflowY==="visible")):(N=ee<F&&(f.overflowX==="auto"||f.overflowX==="scroll"),P=T<_&&(f.overflowY==="auto"||f.overflowY==="scroll"));var U=N&&(Math.abs(ie-a)<=c&&$+ee<F)-(Math.abs(B-a)<=c&&!!$),J=P&&(Math.abs(H-i)<=c&&q+T<_)-(Math.abs(O-i)<=c&&!!q);if(!Je[C])for(var le=0;le<=C;le++)Je[le]||(Je[le]={});(Je[C].vx!=U||Je[C].vy!=J||Je[C].el!==v)&&(Je[C].el=v,Je[C].vx=U,Je[C].vy=J,clearInterval(Je[C].pid),(U!=0||J!=0)&&(g=!0,Je[C].pid=setInterval((function(){r&&this.layer===0&&ae.active._onTouchMove(dr);var ue=Je[this.layer].vy?Je[this.layer].vy*d:0,se=Je[this.layer].vx?Je[this.layer].vx*d:0;typeof h=="function"&&h.call(ae.dragged.parentNode[yt],se,ue,e,dr,Je[this.layer].el)!=="continue"||fa(Je[this.layer].el,se,ue)}).bind({layer:C}),24))),C++}while(n.bubbleScroll&&I!==u&&(I=Wt(I,!1)));Gr=g}},30),ya=function(e){var n=e.originalEvent,t=e.putSortable,r=e.dragEl,a=e.activeSortable,i=e.dispatchSortableEvent,c=e.hideGhostForTarget,d=e.unhideGhostForTarget;if(n){var u=t||a;c();var g=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,h=document.elementFromPoint(g.clientX,g.clientY);d(),u&&!u.el.contains(h)&&(i("spill"),this.onSpill({dragEl:r,putSortable:t}))}};function to(){}to.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,t=e.putSortable;this.sortable.captureAnimationState(),t&&t.captureAnimationState();var r=hn(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),t&&t.animateAll()},drop:ya};Lt(to,{pluginName:"revertOnSpill"});function no(){}no.prototype={onSpill:function(e){var n=e.dragEl,t=e.putSortable,r=t||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:ya};Lt(no,{pluginName:"removeOnSpill"});ae.mount(new mc);ae.mount(no,to);function gc(e){return e==null?e:JSON.parse(JSON.stringify(e))}function _c(e){Yr()&&Yi(e)}function yc(e){Yr()?Xo(e):St(e)}let ba=null,wa=null;function jo(e=null,n=null){ba=e,wa=n}function bc(){return{data:ba,clonedData:wa}}const Bo=Symbol("cloneElement");function wc(...e){var n,t;const r=(n=Yr())==null?void 0:n.proxy;let a=null;const i=e[0];let[,c,d]=e;Array.isArray(l(c))||(d=c,c=null);let u=null;const{immediate:g=!0,clone:h=gc,customUpdate:C}=(t=l(d))!=null?t:{};function I(_){var f;const{from:$,oldIndex:q,item:U}=_;a=Array.from($.childNodes);const J=l((f=l(c))==null?void 0:f[q]),le=h(J);jo(J,le),U[Bo]=le}function v(_){const f=_.item[Bo];if(!zs(f)){if(Tr(_.item),Ot(c)){const $=[...l(c)];c.value=Do($,_.newDraggableIndex,f);return}Do(l(c),_.newDraggableIndex,f)}}function x(_){const{from:f,item:$,oldIndex:q,oldDraggableIndex:U,pullMode:J,clone:le}=_;if(No(f,$,q),J==="clone"){Tr(le);return}if(Ot(c)){const ue=[...l(c)];c.value=To(ue,U);return}To(l(c),U)}function O(_){if(C){C(_);return}const{from:f,item:$,oldIndex:q,oldDraggableIndex:U,newDraggableIndex:J}=_;if(Tr($),No(f,$,q),Ot(c)){const le=[...l(c)];c.value=Eo(le,U,J);return}Eo(l(c),U,J)}function H(_){const{newIndex:f,oldIndex:$,from:q,to:U}=_;let J=null;const le=f===$&&q===U;try{if(le){let ue=null;a==null||a.some((se,Te)=>{if(ue&&(a==null?void 0:a.length)!==U.childNodes.length)return q.insertBefore(ue,se.nextSibling),!0;const R=U.childNodes[Te];ue=U==null?void 0:U.replaceChild(se,R)})}}catch(ue){J=ue}finally{a=null}St(()=>{if(jo(),J)throw J})}const B={onUpdate:O,onStart:I,onAdd:v,onRemove:x,onEnd:H};function ie(_){const f=l(i);return _||(_=Fs(f)?Ls(f,r==null?void 0:r.$el):f),_&&!Bs(_)&&(_=_.$el),_||ks("Root element not found"),_}function ee(){var _;const f=(_=l(d))!=null?_:{},{immediate:$,clone:q}=f,U=oa(f,["immediate","clone"]);return Mo(U,(J,le)=>{Hs(J)&&(U[J]=(ue,...se)=>{const Te=bc();return Js(ue,Te),le(ue,...se)})}),js(c===null?{}:B,U)}const T=_=>{_=ie(_),u&&N.destroy(),u=new ae(_,ee())};Dt(()=>d,()=>{u&&Mo(ee(),(_,f)=>{u==null||u.option(_,f)})},{deep:!0});const N={option:(_,f)=>u==null?void 0:u.option(_,f),destroy:()=>{u==null||u.destroy(),u=null},save:()=>u==null?void 0:u.save(),toArray:()=>u==null?void 0:u.toArray(),closest:(..._)=>u==null?void 0:u.closest(..._)},P=()=>N==null?void 0:N.option("disabled",!0),F=()=>N==null?void 0:N.option("disabled",!1);return yc(()=>{g&&T()}),_c(N.destroy),un({start:T,pause:P,resume:F},N)}const Wr=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],xc=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Wr.map(e=>`on${e.replace(/^\S/,n=>n.toUpperCase())}`)],Sc=Ye({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:xc,emits:["update:modelValue",...Wr],setup(e,{slots:n,emit:t,expose:r,attrs:a}){const i=Wr.reduce((h,C)=>{const I=`on${C.replace(/^\S/,v=>v.toUpperCase())}`;return h[I]=(...v)=>t(C,...v),h},{}),c=ht(()=>{const h=Xi(e),{modelValue:C}=h,I=oa(h,["modelValue"]),v=Object.entries(I).reduce((x,[O,H])=>{const B=l(H);return B!==void 0&&(x[O]=B),x},{});return un(un({},i),Rs(un(un({},a),v)))}),d=ht({get:()=>e.modelValue,set:h=>t("update:modelValue",h)}),u=_e(),g=Ko(wc(e.target||u,d,c));return r(g),()=>{var h;return fe(e.tag||"div",{ref:u},(h=n==null?void 0:n.default)==null?void 0:h.call(n,g))}}});var Fr,Ho;function Cc(){if(Ho)return Fr;Ho=1;var e=9007199254740991,n="[object Arguments]",t="[object Function]",r="[object GeneratorFunction]",a=typeof at=="object"&&at&&at.Object===Object&&at,i=typeof self=="object"&&self&&self.Object===Object&&self,c=a||i||Function("return this")();function d(f,$){for(var q=-1,U=$.length,J=f.length;++q<U;)f[J+q]=$[q];return f}var u=Object.prototype,g=u.hasOwnProperty,h=u.toString,C=c.Symbol,I=u.propertyIsEnumerable,v=C?C.isConcatSpreadable:void 0;function x(f,$,q,U,J){var le=-1,ue=f.length;for(q||(q=O),J||(J=[]);++le<ue;){var se=f[le];q(se)?d(J,se):J[J.length]=se}return J}function O(f){return ie(f)||B(f)||!!(v&&f&&f[v])}function H(f){var $=f?f.length:0;return $?x(f):[]}function B(f){return T(f)&&g.call(f,"callee")&&(!I.call(f,"callee")||h.call(f)==n)}var ie=Array.isArray;function ee(f){return f!=null&&P(f.length)&&!N(f)}function T(f){return _(f)&&ee(f)}function N(f){var $=F(f)?h.call(f):"";return $==t||$==r}function P(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=e}function F(f){var $=typeof f;return!!f&&($=="object"||$=="function")}function _(f){return!!f&&typeof f=="object"}return Fr=H,Fr}var Oc=Cc();const Ic=mr(Oc),Ec={class:"tbody"},Tc={class:"td"},Dc={class:"p-3"},Nc={class:"w-72 text-center"},Mc=Ye({__name:"ExpWaveforms",setup(e){Go(_=>({"4508ffd6":l(t).dividerColor,"6132baf3":l(t).tableHeaderColor}));const n=qr(),t=An(),r=yn(),{allQubits:a,layers:i,gates:c,expInfo:d,program:u}=hr(r),{t:g}=Vt(),h=ht(()=>a.value.filter(_=>_.visible)),C=_e(),I=_e(),v=()=>{I.value=void 0},x=_=>{var U;const f=JSON.parse(JSON.stringify(c.value||{})),$=JSON.parse(JSON.stringify(i.value||[])),q=Kr();f[q]={gate_name:_.gate_name,entity:_.entity},$[I.value.layerIdx].push(q),c.value=f,i.value=$,I.value=void 0,(U=C.value)==null||U.close()},O=_=>{I.value=JSON.parse(JSON.stringify({..._||{},show:!0})),St(()=>{var f;(f=C.value)==null||f.open()})},H=Ko({}),B=(_,f)=>{H[f]=_},ie=_e(),ee=_=>{var q,U,J;const f=(q=_.item)==null?void 0:q.id,$=(J=Array.from((U=_.to)==null?void 0:U.querySelectorAll(".cell-group")))==null?void 0:J.map(le=>le.id);In($,f),ie.value=$[0]},T=(_,f)=>{var $;($=H[`${_}-${f}`])==null||$.handleEdit()},N=_=>{var ve,j,G,Y,te,Ee;ie.value=void 0;const[f,$,q,U]=(j=(ve=_.to)==null?void 0:ve.querySelector(".cell-group"))==null?void 0:j.getAttribute("id").split("__**__"),[J,le,ue,se]=(Y=(G=_.item)==null?void 0:G.id)==null?void 0:Y.split("__**__");let Te=JSON.parse(JSON.stringify(c.value));const R=JSON.parse(JSON.stringify(i.value));if(Te&&((te=Te[se])==null||te.entity.some((we,K)=>{var $e;we===le&&(Te[se].entity[K]=$,($e=Te[se].waves)==null||$e.forEach(et=>{var D;et.channel=(D=et.channel)==null?void 0:D.replace(le,$)}))})),U===se)return;U&&(Te=il(Te,U),In(R[+q],U)),In(R[+ue],se),R[+q]=[...R[+q]||[],se];const X=JSON.parse(JSON.stringify(u.value));X==null||X.waveform_script.forEach(we=>{var K;we.entity===le&&we.layer===+ue&&(we.entity=$,we.layer=+q,we.channel=(K=we.channel)==null?void 0:K.replace(le,$))}),i.value=R,c.value=Te,u.value={space_parameter_script:(Ee=u.value)==null?void 0:Ee.space_parameter_script,waveform_script:X.waveform_script},St(()=>{setTimeout(()=>{T($,q)},200)})},P=ht(()=>i.value.map(_=>_.map(f=>[f]))),F=ht(()=>{var f,$,q;const _=($=(f=r==null?void 0:r.expInfo)==null?void 0:f.exp)==null?void 0:$.wave_circuit;return!_||Ze(_==null?void 0:_.gates)&&Ze(_==null?void 0:_.layers)?(q=r==null?void 0:r.expInfo)==null?void 0:q.exp_id:!1});return(_,f)=>{const $=yl,q=ml,U=Pn,J=Yo;return k(),be("div",null,[y(J,{show:l(r).loading},{default:w(()=>{var le,ue,se,Te,R,X,ve;return[((se=(ue=(le=l(r))==null?void 0:le.expInfo)==null?void 0:ue.exp)==null?void 0:se.exp_mode)==="normal"?(k(),be(Xe,{key:0},[l(d)?l(F)?(k(),Se(q,{key:1,status:"info",title:l(g)("expInfo.tips"),description:l(g)("expInfo.emptyTips"),class:"flex flex-col items-center justify-center",style:Nt({height:l(n).showWaveformPane?"calc(100vh - 540px)":"auto"})},null,8,["title","description","style"])):(k(),Se(U,{key:2,style:Nt({height:l(n).showWaveformPane?"calc(100vh - 540px)":"auto"})},{default:w(()=>[y(Bl),y(Fl,null,{header:w(()=>[y(zl,{layers:l(i)},null,8,["layers"])]),default:w(()=>[L("table",{class:"table !border-t-0",size:"small",style:Nt({width:`${100+l(ar)*l(i).length}px`})},[L("colgroup",null,[f[0]||(f[0]=L("col",{class:"w-[100px]"},null,-1)),(k(!0),be(Xe,null,Tt(l(i),(j,G)=>(k(),be("col",{key:G,class:Wo(`w-[${l(ar)}px]`)},null,2))),128))]),L("tbody",Ec,[(k(!0),be(Xe,null,Tt(l(h),j=>(k(),be("tr",{class:"tr",key:j.id},[L("td",Tc,[L("div",Dc,me(j.value),1)]),(k(!0),be(Xe,null,Tt(l(P),(G,Y)=>{var te,Ee;return k(),be("td",{key:Y,class:"td"},[y(l(Sc),{modelValue:l(P)[Y],"onUpdate:modelValue":we=>l(P)[Y]=we,onEnd:N,group:"gateGroup",handle:".gate-handle",disabled:!!((Ee=(te=l(r))==null?void 0:te.expInfo)!=null&&Ee.exp_id),onChange:ee},{default:w(()=>[y(Kl,{qubit:j,layer:l(Ic)(G),"layer-idx":Y,info:l(I),"change-id":l(ie),ref_for:!0,ref:we=>B(we,`${j.value}-${Y}`),onOpenGateModal:O,onOpenEditModal:T},null,8,["qubit","layer","layer-idx","info","change-id"])]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])}),128))]))),128))])],4)]),_:1})]),_:1},8,["style"])):(k(),Se($,{key:0,text:"",sharp:!1,size:"small",repeat:10})),(Te=l(I))!=null&&Te.show?(k(),Se(Ms,{key:3,ref_key:"gateModalRef",ref:C,onOk:x,info:l(I),onClose:v},null,8,["info"])):Fe("",!0)],64)):((ve=(X=(R=l(r))==null?void 0:R.expInfo)==null?void 0:X.exp)==null?void 0:ve.exp_mode)==="batch_circuit"?(k(),Se(ll,{key:1},{default:w(()=>[L("div",Nc,me(l(g)("expInfo.modeTips")),1)]),_:1})):Fe("",!0),l(n).showWaveformPane?(k(),Se(Qi,{key:2})):Fe("",!0)]}),_:1},8,["show"])])}}}),Qc=vr(Mc,[["__scopeId","data-v-5118e0c1"]]);export{Qc as default};
