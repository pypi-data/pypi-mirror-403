import{d as Pt,e as Q,f as L,h as j,bm as at,bn as da,r as G,C as pa,c as _a,K as ga,A as ma,b as ya,L as Et,a3 as $e,I,aA as ha,p as va,n as ba,aE as zt,B as he,N as Vt,cI as wa,o as xa,F as Ot,ak as Ta,ac as ke,i as D,l as u,Y as Aa,j as Ca,w as B,ap as Ia,ab as ve,s as Me,t as ne,aq as Ea,aM as Oa,ad as Jt,bB as Pa,al as Ra,aa as La,U as ka,W as Ma,S as Na,X as Ua,Z as Fa,E as qe,bT as Da,T as Sa,a5 as $a}from"./index-DJskbzIk.js";import{u as qa,a as Ba,v as Ha,w as Ka,x as Ga,y as za,z as Va,A as Ja}from"./exp-Dzc8nAzP.js";import{D as Ya}from"./DynamicForm-B5kgL0W4.js";import{i as Wa}from"./json-editor-vue-cMpGPz9p.js";import{u as Xa}from"./exp-fN6tgzBZ.js";import{c as Za}from"./index-CljUi5cZ.js";import{A as Yt}from"./Angle-CZ8Qpap6.js";import{N as ja}from"./InputNumber-CtZNiVVn.js";import{N as Qa}from"./Switch-BTGJkP8J.js";import{_ as er}from"./Cascader-C4NH3za0.js";import{_ as tr}from"./Popconfirm-DFFNKs94.js";import{_ as nr}from"./Image-CjHsT37c.js";import{_ as ar}from"./DataTable-BkhITQT9.js";import"./index-DDdGfEJ1.js";import"./Checkbox-B0NmEvB4.js";import"./RadioGroup-DFjU_ho_.js";import"./index.browser-OxPLOBIU.js";import"./download-C2161hUv.js";import"./Pagination-MzAc_u8k.js";import"./prop-NnGblK-3.js";const rr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},sr=Pt({name:"Edit",render:function(z,b){return L(),Q("svg",rr,b[0]||(b[0]=[j("path",{d:"M2 26h28v2H2z",fill:"currentColor"},null,-1),j("path",{d:"M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z",fill:"currentColor"},null,-1)]))}}),ir={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},lr=Pt({name:"Folder16Regular",render:function(z,b){return L(),Q("svg",ir,b[0]||(b[0]=[j("g",{fill:"none"},[j("path",{d:"M2 5v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H7.175l-1.113-.89A.5.5 0 0 0 5.75 3H4a2 2 0 0 0-2 2zm1 0a1 1 0 0 1 1-1h1.575l.868.694l-.886.806H3V5zm4.593 0H12a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V6.5h2.75a.5.5 0 0 0 .336-.13L7.593 5z",fill:"currentColor"})],-1)]))}});var Be={exports:{}};Be.exports;var Wt;function or(){return Wt||(Wt=1,function(be,z){var b=200,rt="Expected a function",Ne="__lodash_hash_undefined__",we=1,a=2,M=9007199254740991,ce="[object Arguments]",V="[object Array]",de="[object Boolean]",pe="[object Date]",ae="[object Error]",re="[object Function]",st="[object GeneratorFunction]",xe="[object Map]",He="[object Number]",H="[object Object]",Ke="[object Promise]",Ue="[object RegExp]",_e="[object Set]",J="[object String]",Oe="[object Symbol]",Te="[object WeakMap]",Ae="[object ArrayBuffer]",se="[object DataView]",it="[object Float32Array]",lt="[object Float64Array]",Fe="[object Int8Array]",Pe="[object Int16Array]",ot="[object Int32Array]",ut="[object Uint8Array]",ft="[object Uint8ClampedArray]",Ge="[object Uint16Array]",ct="[object Uint32Array]",dt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pt=/^\w*$/,_t=/^\./,gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/[\\^$.*+?()[\]{}|]/g,i=/\\(\\)?/g,g=/^\[object .+?Constructor\]$/,p=/^(?:0|[1-9]\d*)$/,l={};l[it]=l[lt]=l[Fe]=l[Pe]=l[ot]=l[ut]=l[ft]=l[Ge]=l[ct]=!0,l[ce]=l[V]=l[Ae]=l[de]=l[se]=l[pe]=l[ae]=l[re]=l[xe]=l[He]=l[H]=l[Ue]=l[_e]=l[J]=l[Te]=!1;var o=typeof at=="object"&&at&&at.Object===Object&&at,x=typeof self=="object"&&self&&self.Object===Object&&self,h=o||x||Function("return this")(),y=z&&!z.nodeType&&z,_=y&&!0&&be&&!be.nodeType&&be,T=_&&_.exports===y,m=T&&o.process,A=function(){try{return m&&m.binding("util")}catch{}}(),S=A&&A.isTypedArray;function N(e,t,n,r){for(var f=-1,s=e?e.length:0;++f<s;){var d=e[f];t(r,d,n(d),e)}return r}function Y(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function W(e){return function(t){return t==null?void 0:t[e]}}function E(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function P(e){return function(t){return e(t)}}function w(e,t){return e==null?void 0:e[t]}function O(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function k(e){var t=-1,n=Array(e.size);return e.forEach(function(r,f){n[++t]=[f,r]}),n}function K(e,t){return function(n){return e(t(n))}}function ee(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var te=Array.prototype,Zt=Function.prototype,ze=Object.prototype,mt=h["__core-js_shared__"],Rt=function(){var e=/[^.]+$/.exec(mt&&mt.keys&&mt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Lt=Zt.toString,ie=ze.hasOwnProperty,Re=ze.toString,jt=RegExp("^"+Lt.call(ie).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kt=h.Symbol,Mt=h.Uint8Array,Qt=ze.propertyIsEnumerable,en=te.splice,tn=K(Object.keys,Object),yt=Le(h,"DataView"),De=Le(h,"Map"),ht=Le(h,"Promise"),vt=Le(h,"Set"),bt=Le(h,"WeakMap"),Se=Le(Object,"create"),nn=Ie(yt),an=Ie(De),rn=Ie(ht),sn=Ie(vt),ln=Ie(bt),Ve=kt?kt.prototype:void 0,wt=Ve?Ve.valueOf:void 0,Nt=Ve?Ve.toString:void 0;function Ce(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function on(){this.__data__=Se?Se(null):{}}function un(e){return this.has(e)&&delete this.__data__[e]}function fn(e){var t=this.__data__;if(Se){var n=t[e];return n===Ne?void 0:n}return ie.call(t,e)?t[e]:void 0}function cn(e){var t=this.__data__;return Se?t[e]!==void 0:ie.call(t,e)}function dn(e,t){var n=this.__data__;return n[e]=Se&&t===void 0?Ne:t,this}Ce.prototype.clear=on,Ce.prototype.delete=un,Ce.prototype.get=fn,Ce.prototype.has=cn,Ce.prototype.set=dn;function le(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function pn(){this.__data__=[]}function _n(e){var t=this.__data__,n=Ye(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():en.call(t,n,1),!0}function gn(e){var t=this.__data__,n=Ye(t,e);return n<0?void 0:t[n][1]}function mn(e){return Ye(this.__data__,e)>-1}function yn(e,t){var n=this.__data__,r=Ye(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}le.prototype.clear=pn,le.prototype.delete=_n,le.prototype.get=gn,le.prototype.has=mn,le.prototype.set=yn;function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function hn(){this.__data__={hash:new Ce,map:new(De||le),string:new Ce}}function vn(e){return We(this,e).delete(e)}function bn(e){return We(this,e).get(e)}function wn(e){return We(this,e).has(e)}function xn(e,t){return We(this,e).set(e,t),this}oe.prototype.clear=hn,oe.prototype.delete=vn,oe.prototype.get=bn,oe.prototype.has=wn,oe.prototype.set=xn;function Je(e){var t=-1,n=e?e.length:0;for(this.__data__=new oe;++t<n;)this.add(e[t])}function Tn(e){return this.__data__.set(e,Ne),this}function An(e){return this.__data__.has(e)}Je.prototype.add=Je.prototype.push=Tn,Je.prototype.has=An;function ue(e){this.__data__=new le(e)}function Cn(){this.__data__=new le}function In(e){return this.__data__.delete(e)}function En(e){return this.__data__.get(e)}function On(e){return this.__data__.has(e)}function Pn(e,t){var n=this.__data__;if(n instanceof le){var r=n.__data__;if(!De||r.length<b-1)return r.push([e,t]),this;n=this.__data__=new oe(r)}return n.set(e,t),this}ue.prototype.clear=Cn,ue.prototype.delete=In,ue.prototype.get=En,ue.prototype.has=On,ue.prototype.set=Pn;function Rn(e,t){var n=me(e)||Ht(e)?E(e.length,String):[],r=n.length,f=!!r;for(var s in e)ie.call(e,s)&&!(f&&(s=="length"||St(s,r)))&&n.push(s);return n}function Ye(e,t){for(var n=e.length;n--;)if(Bt(e[n][0],t))return n;return-1}function Ln(e,t,n,r){return kn(e,function(f,s,d){t(r,f,n(f),d)}),r}var kn=Yn(Nn),Mn=Wn();function Nn(e,t){return e&&Mn(e,t,et)}function Ut(e,t){t=Xe(t,e)?[t]:Ft(t);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Ze(t[n++])];return n&&n==r?e:void 0}function Un(e){return Re.call(e)}function Fn(e,t){return e!=null&&t in Object(e)}function xt(e,t,n,r,f){return e===t?!0:e==null||t==null||!je(e)&&!Qe(t)?e!==e&&t!==t:Dn(e,t,xt,n,r,f)}function Dn(e,t,n,r,f,s){var d=me(e),R=me(t),C=V,U=V;d||(C=ge(e),C=C==ce?H:C),R||(U=ge(t),U=U==ce?H:U);var $=C==H&&!O(e),q=U==H&&!O(t),F=C==U;if(F&&!$)return s||(s=new ue),d||ia(e)?Dt(e,t,n,r,f,s):Xn(e,t,C,n,r,f,s);if(!(f&a)){var X=$&&ie.call(e,"__wrapped__"),Z=q&&ie.call(t,"__wrapped__");if(X||Z){var ye=X?e.value():e,fe=Z?t.value():t;return s||(s=new ue),n(ye,fe,r,f,s)}}return F?(s||(s=new ue),Zn(e,t,n,r,f,s)):!1}function Sn(e,t,n,r){var f=n.length,s=f;if(e==null)return!s;for(e=Object(e);f--;){var d=n[f];if(d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++f<s;){d=n[f];var R=d[0],C=e[R],U=d[1];if(d[2]){if(C===void 0&&!(R in e))return!1}else{var $=new ue,q;if(!(q===void 0?xt(U,C,r,we|a,$):q))return!1}}return!0}function $n(e){if(!je(e)||ta(e))return!1;var t=Kt(e)||O(e)?jt:g;return t.test(Ie(e))}function qn(e){return Qe(e)&&Ct(e.length)&&!!l[Re.call(e)]}function Bn(e){return typeof e=="function"?e:e==null?fa:typeof e=="object"?me(e)?Gn(e[0],e[1]):Kn(e):ca(e)}function Hn(e){if(!na(e))return tn(e);var t=[];for(var n in Object(e))ie.call(e,n)&&n!="constructor"&&t.push(n);return t}function Kn(e){var t=jn(e);return t.length==1&&t[0][2]?qt(t[0][0],t[0][1]):function(n){return n===e||Sn(n,e,t)}}function Gn(e,t){return Xe(e)&&$t(t)?qt(Ze(e),t):function(n){var r=oa(n,e);return r===void 0&&r===t?ua(n,e):xt(t,r,void 0,we|a)}}function zn(e){return function(t){return Ut(t,e)}}function Vn(e){if(typeof e=="string")return e;if(It(e))return Nt?Nt.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Ft(e){return me(e)?e:aa(e)}function Jn(e,t){return function(n,r){var f=me(n)?N:Ln,s=t?t():{};return f(n,e,Bn(r),s)}}function Yn(e,t){return function(n,r){if(n==null)return n;if(!At(n))return e(n,r);for(var f=n.length,s=-1,d=Object(n);++s<f&&r(d[s],s,d)!==!1;);return n}}function Wn(e){return function(t,n,r){for(var f=-1,s=Object(t),d=r(t),R=d.length;R--;){var C=d[++f];if(n(s[C],C,s)===!1)break}return t}}function Dt(e,t,n,r,f,s){var d=f&a,R=e.length,C=t.length;if(R!=C&&!(d&&C>R))return!1;var U=s.get(e);if(U&&s.get(t))return U==t;var $=-1,q=!0,F=f&we?new Je:void 0;for(s.set(e,t),s.set(t,e);++$<R;){var X=e[$],Z=t[$];if(r)var ye=d?r(Z,X,$,t,e,s):r(X,Z,$,e,t,s);if(ye!==void 0){if(ye)continue;q=!1;break}if(F){if(!Y(t,function(fe,Ee){if(!F.has(Ee)&&(X===fe||n(X,fe,r,f,s)))return F.add(Ee)})){q=!1;break}}else if(!(X===Z||n(X,Z,r,f,s))){q=!1;break}}return s.delete(e),s.delete(t),q}function Xn(e,t,n,r,f,s,d){switch(n){case se:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ae:return!(e.byteLength!=t.byteLength||!r(new Mt(e),new Mt(t)));case de:case pe:case He:return Bt(+e,+t);case ae:return e.name==t.name&&e.message==t.message;case Ue:case J:return e==t+"";case xe:var R=k;case _e:var C=s&a;if(R||(R=ee),e.size!=t.size&&!C)return!1;var U=d.get(e);if(U)return U==t;s|=we,d.set(e,t);var $=Dt(R(e),R(t),r,f,s,d);return d.delete(e),$;case Oe:if(wt)return wt.call(e)==wt.call(t)}return!1}function Zn(e,t,n,r,f,s){var d=f&a,R=et(e),C=R.length,U=et(t),$=U.length;if(C!=$&&!d)return!1;for(var q=C;q--;){var F=R[q];if(!(d?F in t:ie.call(t,F)))return!1}var X=s.get(e);if(X&&s.get(t))return X==t;var Z=!0;s.set(e,t),s.set(t,e);for(var ye=d;++q<C;){F=R[q];var fe=e[F],Ee=t[F];if(r)var Gt=d?r(Ee,fe,F,t,e,s):r(fe,Ee,F,e,t,s);if(!(Gt===void 0?fe===Ee||n(fe,Ee,r,f,s):Gt)){Z=!1;break}ye||(ye=F=="constructor")}if(Z&&!ye){var tt=e.constructor,nt=t.constructor;tt!=nt&&"constructor"in e&&"constructor"in t&&!(typeof tt=="function"&&tt instanceof tt&&typeof nt=="function"&&nt instanceof nt)&&(Z=!1)}return s.delete(e),s.delete(t),Z}function We(e,t){var n=e.__data__;return ea(t)?n[typeof t=="string"?"string":"hash"]:n.map}function jn(e){for(var t=et(e),n=t.length;n--;){var r=t[n],f=e[r];t[n]=[r,f,$t(f)]}return t}function Le(e,t){var n=w(e,t);return $n(n)?n:void 0}var ge=Un;(yt&&ge(new yt(new ArrayBuffer(1)))!=se||De&&ge(new De)!=xe||ht&&ge(ht.resolve())!=Ke||vt&&ge(new vt)!=_e||bt&&ge(new bt)!=Te)&&(ge=function(e){var t=Re.call(e),n=t==H?e.constructor:void 0,r=n?Ie(n):void 0;if(r)switch(r){case nn:return se;case an:return xe;case rn:return Ke;case sn:return _e;case ln:return Te}return t});function Qn(e,t,n){t=Xe(t,e)?[t]:Ft(t);for(var r,f=-1,d=t.length;++f<d;){var s=Ze(t[f]);if(!(r=e!=null&&n(e,s)))break;e=e[s]}if(r)return r;var d=e?e.length:0;return!!d&&Ct(d)&&St(s,d)&&(me(e)||Ht(e))}function St(e,t){return t=t??M,!!t&&(typeof e=="number"||p.test(e))&&e>-1&&e%1==0&&e<t}function Xe(e,t){if(me(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||It(e)?!0:pt.test(e)||!dt.test(e)||t!=null&&e in Object(t)}function ea(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ta(e){return!!Rt&&Rt in e}function na(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||ze;return e===n}function $t(e){return e===e&&!je(e)}function qt(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var aa=Tt(function(e){e=la(e);var t=[];return _t.test(e)&&t.push(""),e.replace(gt,function(n,r,f,s){t.push(f?s.replace(i,"$1"):r||n)}),t});function Ze(e){if(typeof e=="string"||It(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Ie(e){if(e!=null){try{return Lt.call(e)}catch{}try{return e+""}catch{}}return""}var ra=Jn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Tt(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(rt);var n=function(){var r=arguments,f=t?t.apply(this,r):r[0],s=n.cache;if(s.has(f))return s.get(f);var d=e.apply(this,r);return n.cache=s.set(f,d),d};return n.cache=new(Tt.Cache||oe),n}Tt.Cache=oe;function Bt(e,t){return e===t||e!==e&&t!==t}function Ht(e){return sa(e)&&ie.call(e,"callee")&&(!Qt.call(e,"callee")||Re.call(e)==ce)}var me=Array.isArray;function At(e){return e!=null&&Ct(e.length)&&!Kt(e)}function sa(e){return Qe(e)&&At(e)}function Kt(e){var t=je(e)?Re.call(e):"";return t==re||t==st}function Ct(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=M}function je(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Qe(e){return!!e&&typeof e=="object"}function It(e){return typeof e=="symbol"||Qe(e)&&Re.call(e)==Oe}var ia=S?P(S):qn;function la(e){return e==null?"":Vn(e)}function oa(e,t,n){var r=e==null?void 0:Ut(e,t);return r===void 0?n:r}function ua(e,t){return e!=null&&Qn(e,t,Fn)}function et(e){return At(e)?Rn(e):Hn(e)}function fa(e){return e}function ca(e){return Xe(e)?W(Ze(e)):zn(e)}be.exports=ra}(Be,Be.exports)),Be.exports}var ur=or();const fr=da(ur),cr={class:"!h-full flex flex-1"},dr={key:0,class:"flex-1 flex gap-3"},pr={class:"w-72 pl-2"},_r={class:"mb-5 relative exp-r-s"},gr={key:0,class:"text-right mt-2"},mr={class:"flex justify-between items-center mb-2"},yr={class:"flex-1"},hr={key:0},vr={class:"text-xl"},br={class:"opacity-75 italic pl-2"},wr={key:1,class:"text-xl"},xr={key:0,class:"flex gap-2"},Tr={class:"mt-4 mb-2 text-xl"},v="__SPACE_PARAMETER_UPDATING__",Xt="__SELECTED_SPACE_PARAMETER_UPDATING__",Ar=Pt({__name:"ExpRunResult",setup(be){const z=G(!1),b=pa(),rt=_a(),Ne=ga(),we=ma(),a=Xa(),{t:M}=ya(),ce=G(),V=G({show:!1}),de=G(!1),pe=G(!1),ae=G(!1),re=G(!1),st=[{label:"str",value:"str"},{label:"int",value:"int"},{label:"float",value:"float"},{label:"bool",value:"bool"},{label:"list",value:"list"},{label:"tuple",value:"tuple"},{label:"dict",value:"dict"},{label:"complex",value:"complex"},{label:"ndarray",value:"ndarray"}],xe=c=>{let i="";const g=J.value;return $e(H.value,(p,l)=>{var o;(o=p.children)!=null&&o.find(x=>x.key===g)&&(i=l)}),i},He=G(),H=G(),Ke=async()=>{var g,p;const[c,i]=await qa();if(!c&&(i==null?void 0:i.status)===0){H.value=i.data;const[l]=(p=(g=a==null?void 0:a.expInfo)==null?void 0:g.exp)!=null&&p.template?a.expInfo.exp.template.split("/"):"";l&&i.data[l]?qe(()=>{Te(l,2)}):qe(()=>{Te(Object.keys(i.data)[0],1)})}},Ue=async()=>{var g,p,l;if(!b.query.exp_id)return;const[c,i]=await Ba({exp_id:b.query.exp_id,device_group_name:b.query.device_group_name,space_id:b.query.space_id});if(!c&&(i==null?void 0:i.status)===0){if((g=i.data)!=null&&g.data){i.data.data=JSON.parse(i.data.data);const o=(p=i.data.data)!=null&&p.tables?(l=i.data.data)==null?void 0:l.tables[v]:null;o&&(o.crows=o.rows)}a.result=i.data}},_e=Et(()=>{var p,l;const c=[];(p=a.result)!=null&&p.data&&$e((l=a.result.data)==null?void 0:l.tables,o=>{const x=o.rows.map(y=>{var T;const _={};return(T=o.columns)==null||T.forEach((m,A)=>{_[m.name]=typeof y[A]!==void 0?`${y[A]}`:y[A]}),_}),h=o.columns.map((y,_)=>{const T={...y,title:y.name,key:y.name};return y.name==="key"?{...T,minWidth:200,render(m){return I(ha,{},{default:()=>se.value&&se.value[m.key]?I("div",`${M("expInfo.latestParamsTips")}: ${se.value[m.key]}`):I("div",m.key),trigger:()=>I("div",{class:"cursor-pointer"},m.key)})}}:y.name==="type"&&o.name===v?{...T,width:200,render(m,A){if(z.value){const S=o.crows?o.crows[A][_]:null;return I(va,{class:S!=m.type?"!outline !outline-red-500 w-32":"w-32",options:st,value:m.type,onUpdateValue:N=>{var Y,W,E,P,w,O,k,K;(W=(Y=a==null?void 0:a.result)==null?void 0:Y.data)!=null&&W.tables&&((P=(E=a==null?void 0:a.result)==null?void 0:E.data)!=null&&P.tables[v])&&(((O=(w=a==null?void 0:a.result)==null?void 0:w.data)==null?void 0:O.tables[v]).rows[A][_]=N,N==="bool"&&(((K=(k=a==null?void 0:a.result)==null?void 0:k.data)==null?void 0:K.tables[v]).rows[A][_+1]=!1))}})}return m.type}}:y.name==="value"&&o.name===v?{...T,render:(m,A)=>{const S=o.crows?o.crows[A][_]:null;if(z.value){const N=I(ja,{value:+m.value,class:S!=m.value?"outline outline-red-500 w-full":"w-full",onUpdateValue(P){var w,O,k,K,ee,te;(O=(w=a==null?void 0:a.result)==null?void 0:w.data)!=null&&O.tables&&((K=(k=a==null?void 0:a.result)==null?void 0:k.data)!=null&&K.tables[v])&&(((te=(ee=a==null?void 0:a.result)==null?void 0:ee.data)==null?void 0:te.tables[v]).rows[A][_]=P)}}),Y=I(ba,{value:String(m.value),class:S!==m.value?"!outline !outline-red-500":"",onUpdateValue(P){var w,O,k,K,ee,te;(O=(w=a==null?void 0:a.result)==null?void 0:w.data)!=null&&O.tables&&((K=(k=a==null?void 0:a.result)==null?void 0:k.data)!=null&&K.tables[v])&&(((te=(ee=a==null?void 0:a.result)==null?void 0:ee.data)==null?void 0:te.tables[v]).rows[A][_]=P)}}),W=I("div",{class:"flex gap-2 h-[34px] leading-[34px]"},[I("div",{class:S!=m.value?"outline outline-red-500":""},I(zt,{lineClamp:1},{default:()=>m.value})),I(he,{type:"info",size:"tiny",class:"!h-[34px] !w-[34px]",onClick:()=>{V.value={show:!0,info:{rowIdx:A,cidx:_,value:m.value}}}},{icon:()=>I(sr)})]),E=I(Qa,{class:S!=m.value?"!outline !outline-red-500 w-32":"w-32",checkedValue:"true",uncheckedValue:"false",onUpdateValue:P=>{var w,O,k,K,ee,te;(O=(w=a==null?void 0:a.result)==null?void 0:w.data)!=null&&O.tables&&((K=(k=a==null?void 0:a.result)==null?void 0:k.data)!=null&&K.tables[v])&&(((te=(ee=a==null?void 0:a.result)==null?void 0:ee.data)==null?void 0:te.tables[v]).rows[A][_]=P)}});return I("div",{class:"flex items-center"},Za([["float","int"].includes(m.type)?N:null,["str","complex"].includes(m.type)?Y:null,["dict","list","tuple","ndarray"].includes(m.type)?W:null,["bool"].includes(m.type)?E:null]))}return m.value}}:T});z.value&&o.name===v&&h.push({title:M("expInfo.tableOptions"),key:"options",width:100,align:"rigth",render(y,_){const T=o.columns.findIndex(N=>N.name==="type"),m=o.crows?o.crows[_][T]:null,A=o.columns.findIndex(N=>N.name==="value"),S=o.crows?o.crows[_][A]:null;return I(he,{type:"info",size:"small",class:"!h-[34px]",onClick:()=>{var N,Y,W,E,P,w,O,k;(Y=(N=a==null?void 0:a.result)==null?void 0:N.data)!=null&&Y.tables&&((E=(W=a==null?void 0:a.result)==null?void 0:W.data)!=null&&E.tables[v])&&(((w=(P=a==null?void 0:a.result)==null?void 0:P.data)==null?void 0:w.tables[v]).rows[_][A]=S,((k=(O=a==null?void 0:a.result)==null?void 0:O.data)==null?void 0:k.tables[v]).rows[_][T]=m)}},{icon:()=>I(Vt,{component:wa})})}}),o.name===v&&z.value&&h.unshift({type:"selection",key:"selection"}),c.push({oname:o.name,name:o.name===v?M("expInfo.needUpdateParams"):o.name===Xt?M("expInfo.updatedParams"):o.name,columns:h,rows:x})});const[i,g]=fr(c,{oname:Xt});return[...i,...g]}),J=G(),Oe=G(),Te=async(c,i)=>{var l,o,x;const[g,p]=await Ha({fitter_group_name:c});if(!g&&(p==null?void 0:p.status)===0){const h=[];$e(p.data,(_,T)=>{h.push({..._,label:_.title,value:T,key:T,isLeaf:!0})}),He.value=p.data,H.value={...H.value,[c]:{...H.value[c],children:h}};const y=(x=(o=(l=a==null?void 0:a.expInfo)==null?void 0:l.exp)==null?void 0:o.template)==null?void 0:x.split("/")[1];if(i===2)if(y&&p.data[y])J.value=y,setTimeout(()=>{qe(()=>{Ae(y)})},500);else{const _=Object.keys(p.data)[0];J.value=_,Ae(_)}else if(i===1){const _=Object.keys(p.data)[0];J.value=_,Ae(_)}}},Ae=async c=>{if(de.value)return;de.value=!0;const[i,g]=await Ka({fitter_group_name:xe(),fitter_name:c,group_name:b.query.device_group_name,space_id:b.query.space_id});de.value=!1,!i&&(g==null?void 0:g.status)===0&&(g.data.exp_id&&(g.data.exp_id.default=b.query.exp_id?Number(b.query.exp_id):null),Oe.value=g.data)},se=G(),it=async()=>{var p;const c=[];(p=_e.value)==null||p.forEach(l=>{l.rows.forEach(o=>{o.key&&c.push(o.key)})});const[i,g]=await Ja({device_group_name:b.query.device_group_name,space_id:+(b.query.space_id||""),keys:c});!i&&(g==null?void 0:g.status)===0&&(se.value=g.data)},lt=async()=>{var x;if(!ce.value||pe.value)return;pe.value=!0;const c=await((x=ce.value)==null?void 0:x.submit()),i=Da(c);if(Ot(i)){pe.value=!1;return}const{device_group_name:g,space_id:p}=b.query,[l,o]=await Ga({setting:i,group_name:g,space_id:p,fitter_group:xe(),fitter_name:J.value});if(pe.value=!1,!l&&(o==null?void 0:o.status)===0){a.result={...o.data,big_picture_url:"/"+o.data.plot_file_in_static};const[h,y]=await za("/"+o.data.table_file_in_static);h||(z.value=!0,$e(y==null?void 0:y.tables,(_,T)=>{T===v&&(_.crows=JSON.parse(JSON.stringify(_.rows)),Pe.value=_.crows.map(m=>m[0]))}),a.result={...a.result||{},data:y},qe(()=>{it()}))}},Fe=async(c=!1)=>{var l,o,x,h;if(c){if(re.value)return;re.value=!0}else{if(ae.value)return;ae.value=!0}const i={group_name:b.query.device_group_name,space_id:b.query.space_id,exp_id:b.query.exp_id,img_file:((l=a.result)==null?void 0:l.plot_file)||"",table_file:((o=a.result)==null?void 0:o.table_file)||"",update_space_parameters:c};if(c){const y=(x=_e.value)==null?void 0:x.find(_=>_.oname===v);i.space_parameters=(h=Pe.value)==null?void 0:h.map(_=>{var T;return(T=y.rows)==null?void 0:T.find(m=>m.key===_)})}const[g,p]=await Va(i);!g&&(p==null?void 0:p.status)===0&&(Ne.success("Submit Successfully"),await Ue(),z.value=!1),c?re.value=!1:ae.value=!1},Pe=G(),ot=c=>{Pe.value=c};xa(()=>{if(!b.query.exp_id){rt.back();return}Ke(),Ue()});const ut=()=>{Fe()},ft=Et(()=>{var i,g,p,l,o,x;const c=(g=(i=a.result)==null?void 0:i.data)!=null&&g.tables?(l=(p=a.result)==null?void 0:p.data)==null?void 0:l.tables[v]:null;if(!Ot(c)){const h=(o=c.columns)==null?void 0:o.findIndex(y=>y.name==="value");return h<0?!1:(x=c.crows)==null?void 0:x.some((y,_)=>y[h]!==c.rows[_][h])}return!1}),Ge=()=>{V.value={show:!1,info:void 0}},ct=()=>{var p,l,o,x,h,y;const{rowIdx:c,cidx:i,value:g}=V.value.info;(l=(p=a==null?void 0:a.result)==null?void 0:p.data)!=null&&l.tables&&((x=(o=a==null?void 0:a.result)==null?void 0:o.data)!=null&&x.tables[v])&&(((y=(h=a==null?void 0:a.result)==null?void 0:h.data)==null?void 0:y.tables[v]).rows[c][i]=g),Ge()};Ta(()=>{a.result=void 0});const dt=Et(()=>{const c=[],i=JSON.parse(JSON.stringify(H.value||{}));return $e(i,(g,p)=>{c.push({...g,label:g.title,value:p,key:p,isLeaf:!1})}),c}),pt=c=>new Promise(async i=>{await Te(c.value),i()}),_t=c=>{setTimeout(()=>{qe(()=>{Ae(c)})},500)},gt=c=>I("div",{class:"flex gap-2 items-center"},[I(Sa,{trigger:"hover"},{trigger:()=>I(he,{circle:!0,size:"tiny",bordered:!1},{icon:()=>c.isLeaf?I(Yt):I(lr)}),default:()=>c.desc}),I(zt,{class:"!flex-1"},{default:()=>c.title})]);return(c,i)=>{var m,A,S,N,Y,W;const g=er,p=Ca,l=Ia,o=Ea,x=Oa,h=tr,y=nr,_=ar,T=Fa;return L(),Q("div",cr,[u(J)?(L(),Q("div",dr,[j("div",pr,[j("div",_r,[D(u(Vt),{component:u(Yt),size:20,style:{position:"absolute",top:"50%",left:"10px",transform:"translateY(-50%)"}},null,8,["component"]),D(g,{remote:"",status:"warning",value:u(J),"onUpdate:value":i[0]||(i[0]=E=>Aa(J)?J.value=E:null),"show-path":!1,"check-strategy":"child",options:u(dt),"render-label":gt,size:"large",onLoad:pt,onUpdateValue:_t,"theme-overrides":{columnWidth:"280px",menuHeight:"500px"}},null,8,["value","options"])]),D(p),D(o,{show:u(de)},{default:B(()=>{var E,P;return[D(l,{style:{"max-height":"calc(100vh - 400px)"}},{default:B(()=>[u(Oe)&&!u(de)?(L(),ve(Ya,{key:0,cfgs:u(Oe),ref_key:"dynamicFormRef",ref:ce},null,8,["cfgs"])):ke("",!0)]),_:1}),(P=(E=u(a))==null?void 0:E.expInfo)!=null&&P.exp_id?(L(),Q("div",gr,[D(u(he),{type:"primary",onClick:lt,loading:u(pe)},{default:B(()=>[Me(ne(u(M)("expInfo.ffitting")),1)]),_:1},8,["loading"])])):ke("",!0)]}),_:1},8,["show"])]),j("div",{class:"flex-1 pl-3",style:La({borderLeft:`1px solid ${u(we).dividerColor}`})},[u(Ot)(u(a).result)?(L(),ve(x,{key:0,description:u(M)("expInfo.nores"),class:"mt-20"},null,8,["description"])):(L(),Q(Jt,{key:1},[j("div",mr,[j("div",yr,[!((m=u(a).result)!=null&&m.plot_file)&&!((A=u(a).result)!=null&&A.table_file)&&((S=u(a).result)!=null&&S.create_time)?(L(),Q("div",hr,[j("span",vr,ne(u(M)("expInfo.resUploaded")),1),j("span",br,ne((N=u(a).result)==null?void 0:N.create_time),1)])):(L(),Q("div",wr,ne(u(M)("expInfo.result")),1))]),(Y=u(a).result)!=null&&Y.plot_file||(W=u(a).result)!=null&&W.table_file?(L(),Q("div",xr,[u(ft)?(L(),ve(h,{key:0,onPositiveClick:ut},{trigger:B(()=>[D(u(he),{loading:u(ae),type:"primary",disabled:u(re)},{default:B(()=>[Me(ne(u(M)("expInfo.uploadOnly")),1)]),_:1},8,["loading","disabled"])]),default:B(()=>[Me(" "+ne(u(M)("expInfo.updateOnlyTips")),1)]),_:1})):(L(),ve(u(he),{key:1,loading:u(ae),type:"primary",onClick:i[1]||(i[1]=()=>Fe()),disabled:u(re)},{default:B(()=>[Me(ne(u(M)("expInfo.uploadOnly")),1)]),_:1},8,["loading","disabled"])),D(u(he),{loading:u(re),type:"primary",onClick:i[2]||(i[2]=()=>Fe(!0)),disabled:u(ae)},{default:B(()=>[Me(ne(u(M)("expInfo.uploadAndModifyParams")),1)]),_:1},8,["loading","disabled"])])):ke("",!0)]),D(p,{class:"!my-2"}),D(l,{style:{"max-height":"calc(100vh - 294px)"}},{default:B(()=>{var E,P;return[(E=u(a).result)!=null&&E.big_picture_url?(L(),ve(y,{key:0,src:u(Pa)((P=u(a).result)==null?void 0:P.big_picture_url,"t",String(+new Date)),alt:"",class:"max-w-full"},null,8,["src"])):ke("",!0),(L(!0),Q(Jt,null,Ra(u(_e),(w,O)=>(L(),Q("div",{key:O},[j("div",Tr,ne(w.name),1),w.oname===v?(L(),ve(_,{key:0,columns:w.columns,data:w.rows,"checked-row-keys":u(Pe),"row-key":k=>k.key,"onUpdate:checkedRowKeys":ot},null,8,["columns","data","checked-row-keys","row-key"])):(L(),ve(_,{key:1,columns:w.columns,data:w.rows},null,8,["columns","data"]))]))),128))]}),_:1})],64))],4)])):ke("",!0),D(T,{show:u(V).show,"onUpdate:show":i[4]||(i[4]=E=>u(V).show=E),"mask-closable":!1,"auto-focus":!1},{default:B(()=>[D(ka,{style:{width:"1000px","min-height":"500px"}},{default:B(()=>[D(Ma,null,{default:B(()=>[u(V).info?(L(),ve(u(Wa),{key:0,class:Na(["w-full h-[70vh] overflow-auto",[u(we).baseColor==="#000"?"jse-theme-dark":""]]),modelValue:u(V).info.value,"onUpdate:modelValue":i[3]||(i[3]=E=>u(V).info.value=E),mode:"text"},null,8,["class","modelValue"])):ke("",!0)]),_:1}),D(Ua,{onCancel:Ge},{default:B(()=>[D(u(he),{type:"primary",onClick:ct},{default:B(()=>[Me(ne(u(M)("common.OK")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])])}}}),zr=$a(Ar,[["__scopeId","data-v-2b43d74e"]]);export{zr as default};
