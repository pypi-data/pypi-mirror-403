import{d as ke,e as fe,f as H,h as ie,A as Fe,b as Ne,a9 as rn,K as on,C as Ve,r as g,Q as Wt,I as S,N as Ue,ag as rt,aE as Xt,B as be,at as sn,bu as Na,o as Mt,aR as ln,aG as xt,aI as Va,i as s,ab as ve,ac as ce,aw as un,l as a,Y as le,w as l,bs as Da,s as se,t as ue,ad as It,am as Ka,X as Le,Z as De,U as Ie,W as Te,E as ot,bZ as _e,L as Zt,a6 as dn,k as pn,m as cn,p as Ga,bW as fn,n as st,bv as ja,S as mn,bU as Yt,bV as Wa,as as Xa,b_ as _n,bt as vn,bm as at,bn as gn,V as bt,al as Za,av as Ya,bi as Ja,ap as Qa,bT as Jt,F as Qt,T as er,bz as en,bA as tr,a5 as nr}from"./index-DJskbzIk.js";import{i as ar}from"./exp-Dzc8nAzP.js";import{u as rr}from"./groupDetail-grzpJhg1.js";import{i as hn}from"./json-editor-vue-cMpGPz9p.js";import{c as Ct}from"./index-CljUi5cZ.js";import{s as yn,b as or,r as sr,c as ir,d as lr,e as ur,f as dr,h as pr,i as cr}from"./params-elF_11QE.js";import{_ as tn}from"./PaginationView.vue_vue_type_script_setup_true_lang-C5I4MAUI.js";import{_ as wn}from"./Popconfirm-DFFNKs94.js";import{_ as xn}from"./DataTable-BkhITQT9.js";import{N as fr}from"./Switch-BTGJkP8J.js";import{D as mr}from"./DynamicForm-B5kgL0W4.js";import{A as _r,F as vr}from"./FileSaver.min-CWr_Rv27.js";const gr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},hr=ke({name:"Reload",render:function(W,I){return H(),fe("svg",gr,I[0]||(I[0]=[ie("path",{d:"M400 148l-21.12-24.57A191.43 191.43 0 0 0 240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 0 0 181.07-128",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),ie("path",{d:"M464 97.42V208a16 16 0 0 1-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z",fill:"currentColor"},null,-1)]))}}),yr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},wr=ke({name:"FormNew24Regular",render:function(W,I){return H(),fe("svg",yr,I[0]||(I[0]=[ie("g",{fill:"none"},[ie("path",{d:"M5.75 3A2.75 2.75 0 0 0 3 5.75v12.5A2.75 2.75 0 0 0 5.75 21h6.272a6.471 6.471 0 0 1-.709-1.5H5.75c-.69 0-1.25-.56-1.25-1.25V5.75c0-.69.56-1.25 1.25-1.25h12.5c.69 0 1.25.56 1.25 1.25v5.563a6.471 6.471 0 0 1 1.5.709V5.75A2.75 2.75 0 0 0 18.25 3H5.75zm12.207 8.016a.749.749 0 0 0-.703-1.014H12.25a.75.75 0 0 0 0 1.5h2.742a6.48 6.48 0 0 1 2.965-.486zM8.25 8.502a2.25 2.25 0 1 0 0 4.5a2.25 2.25 0 0 0 0-4.5zm-.75 2.25a.75.75 0 1 1 1.5 0a.75.75 0 0 1-1.5 0zM6 16.25a2.25 2.25 0 1 1 4.5 0a2.25 2.25 0 0 1-4.5 0zm2.25-.75a.75.75 0 1 0 0 1.5a.75.75 0 0 0 0-1.5zm9.004-8h-10.5a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5zM23 17.5a5.5 5.5 0 1 0-11 0a5.5 5.5 0 0 0 11 0zm-4.999 3.003a.5.5 0 1 1-1 0V18h-2.505a.5.5 0 1 1 0-1H17v-2.5a.5.5 0 1 1 1 0V17h2.503a.5.5 0 1 1 0 1h-2.502v2.503z",fill:"currentColor"})],-1)]))}}),xr={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},br=ke({name:"HandRight24Filled",render:function(W,I){return H(),fe("svg",xr,I[0]||(I[0]=[ie("g",{fill:"none"},[ie("path",{d:"M10 4.25a1 1 0 0 0-2 0v6.748a.5.5 0 1 1-1 0v-5a1 1 0 0 0-2 0v8.756c0 2.18 1.168 4.51 1.914 5.789c.556.954 1.58 1.459 2.623 1.459h2.168a3.25 3.25 0 0 0 2.907-1.797l.133-.267c.42-.842.945-1.628 1.562-2.339l2.212-2.552l2.192-1.705A.75.75 0 0 0 21 12.75c0-.485-.26-.845-.592-1.06c-.296-.19-.65-.272-.962-.31c-.636-.075-1.41.002-2.089.134a4.7 4.7 0 0 0-1.357.504V4.25a1 1 0 1 0-2 0v6.25a.5.5 0 1 1-1 0V2.997a1 1 0 1 0-2 0V10.5a.5.5 0 1 1-1 0V4.25z",fill:"currentColor"})],-1)]))}}),Cr={class:"flex justify-end w-full ml-2"},Sr={class:"flex gap-2 items-center"},bn=ke({__name:"ParamsHistory",props:{spaceId:{},hkey:{},maxHeight:{},hideHistoryOption:{type:Boolean},hideRevertOption:{type:Boolean},showFooter:{type:Boolean},showPagination:{type:Boolean},keep:{type:Boolean}},emits:["update:success","close:modal"],setup(K,{expose:W,emit:I}){const h=K,X=I,A=Fe(),{t:d}=Ne(),{copy:M,isSupported:O}=rn({legacy:!0}),Y=on(),w=Ve(),x=g(!1),L=g("globalOverview"),z=g(),E=g({show:!1,info:{k_full:void 0}}),B=async r=>{M(r),Y.success(d("common.copied"))},V=Wt(async r=>{const[y,U]=await yn({keys:[r.k_full],values:[r.v],types:[r.t],device_group_name:w.query.device_group_name,space_id:h.spaceId});if(!y&&(U==null?void 0:U.status)===0){Y.success(d("groupDetail.parameterManager.revertSuccess"));const R=r.k_full.replace(/(.*)\/.*$/,"$1").split("/");X("update:success",Ct(R),!1),c()}},300),q=Wt(r=>{E.value={show:!0,info:r}},300),Z=[{title:d("groupDetail.parameterManager.keyPath"),key:"k_full",width:280,render:r=>S("div",{class:"inline-flex gap-2"},[S("div",r.k_full),O.value?S(Ue,{class:"cursor-pointer transition-transform hover:translate-y-[1px]",size:20,onClick:()=>{B(r.k_full)}},{default:()=>S(rt)}):void 0])},{title:d("groupDetail.parameterManager.dataType"),key:"t",width:100},{title:d("groupDetail.parameterManager.value"),key:"v",render:r=>{if(r.v)return S("div",{class:"flex gap-2"},[S(Xt,{tooltip:{show:!1}},{default:()=>r.v}),O.value?S(Ue,{class:"cursor-pointer transition-transform hover:translate-y-[1px]",size:20,onClick:()=>{B(r.v)}},{default:()=>S(rt)}):void 0])}},{title:d("groupDetail.parameterManager.time"),key:"timestamp",width:180},{title:d("createuser"),key:"user_name",width:140,render(r){return S(Xt,null,{default:()=>r.user_name})}},{title:d("groupDetail.parameterManager.source"),key:"source",width:100,render:r=>Ct([r.experiment_id?S("div",{onClick:y=>C(r,y),className:r.experiment_id?"cursor-pointer hover:underline":"",style:{color:r.experiment_id?A.value.infoColor:A.value.textColorBase}},`Epx ${r.experiment_id}`):void 0,r.session_id?S("div",{onClick:y=>m(r,y),className:"w-full h-full "+(r.session_id?"cursor-pointer hover:underline":""),style:{color:r.session_id?A.value.infoColor:A.value.textColorBase}},`Session ${r.session_id}`):void 0,r.node_id?S("div",{onClick:y=>F(r,y),className:r.node_id?"cursor-pointer hover:underline":"",style:{color:r.node_id?A.value.infoColor:A.value.textColorBase}},`Node ${r.node_id}`):void 0])},{title:d("groupDetail.parameterManager.options"),key:"options",width:!h.hideHistoryOption&&!h.hideRevertOption?140:90,align:"center",render:r=>S("div",{class:"flex justify-center"},Ct([h.hideRevertOption?null:S(wn,{onPositiveClick:()=>V(r),placement:"left"},{default:()=>d("groupDetail.parameterManager.revertConfirm"),trigger:()=>S(be,{quaternary:!0,type:"info",size:"small"},{default:()=>d("groupDetail.parameterManager.optionRevert")})}),h.hideHistoryOption?void 0:S(be,{size:"small",type:"info",quaternary:!0,onClick:()=>q(r)},{default:()=>d("groupDetail.parameterManager.optionHistory")})]))}],G=r=>({class:r.deleted_flag?"removed":""}),p=sn({page:1,per_page:Na,total:0}),c=async()=>{if(x.value)return;x.value=!0;const r=w.query.device_group_name;if(!h.spaceId||!r)return;const[y,U]=await or({device_group_name:r,space_id:h.spaceId,key:h.hkey,page:p.page,per_page:p.per_page});x.value=!1,!y&&(U==null?void 0:U.status)===0&&(z.value=U.data.list,p.total=U.data.total)},P=g(0);Mt(()=>{h.keep||P.value===0&&(c(),P.value=1)}),ln(()=>{h.keep&&ot(()=>{if(P.value===1){P.value=0;return}else c()})}),W({refresh:c});const f=()=>{E.value={show:!1,info:{k_full:void 0}},X("close:modal")},i=r=>{r||f()},m=(r,y)=>{if(!r.session_id)return;const U=new URLSearchParams({session_id:r.session_id,device_group_name:String(w.query.device_group_name||"")});window.open(`/groupDetail/autoCaliDetail/config?${U.toString()}`,xt(y))},C=(r,y)=>{if(!r.experiment_id||!w.query.space_id)return;const U=new URLSearchParams({device_group_name:w.query.device_group_name,space_id:w.query.space_id,exp_id:String(r.experiment_id)});window.open(`/experiment/plotter?${U.toString()}`,xt(y))},F=(r,y)=>{if(!r.session_id)return;const U=new URLSearchParams({device_group_name:w.query.device_group_name,space_id:w.query.space_id,session_id:String(r.session_id||""),node_id:r.node_id});window.open(`/groupDetail/autoCaliDetail/process?${U.toString()}`,xt(y))},te=()=>{E.value={show:!1,info:{k_full:void 0}}};return(r,y)=>{const U=Da,R=un,T=xn,b=Va("params-history",!0),j=De;return H(),fe("div",null,[s(R,{value:a(L),"onUpdate:value":y[1]||(y[1]=$=>le(L)?L.value=$:null),class:"!h-full",disabled:a(x)},{suffix:l(()=>[Ka(r.$slots,"default"),ie("div",Cr,[s(a(be),{type:"primary",onClick:y[0]||(y[0]=()=>c())},{icon:l(()=>[s(a(hr))]),default:l(()=>[se(" "+ue(a(d)("groupDetail.parameterManager.refresh")),1)]),_:1})])]),default:l(()=>[s(U,{name:"globalOverview"},{default:l(()=>[ie("div",Sr,[se(ue(a(d)("groupDetail.parameterManager.globalHistory"))+" ",1),r.hkey?(H(),fe(It,{key:0},[se(" -  [  "+ue(r.hkey)+"  ] ",1)],64)):ce("",!0)])]),_:1})]),_:3},8,["value","disabled"]),s(T,{columns:Z,data:a(z),pagination:!1,"row-props":G,loading:a(x),"max-height":r.maxHeight||"calc(100vh - 320px)",class:"mt-5 min-h-96"},null,8,["data","loading","max-height"]),r.showPagination?(H(),ve(tn,{key:0,"page-info":a(p),"onUpdate:pageInfo":y[2]||(y[2]=$=>le(p)?p.value=$:null),onUpdateList:c},null,8,["page-info"])):ce("",!0),r.showFooter?(H(),ve(Le,{key:1,onCancel:f},{prefix:l(()=>[s(tn,{class:"!pt-0","page-info":a(p),"onUpdate:pageInfo":y[3]||(y[3]=$=>le(p)?p.value=$:null),onUpdateList:c},null,8,["page-info"])]),_:1})):ce("",!0),s(j,{show:a(E).show,"onUpdate:show":y[4]||(y[4]=$=>a(E).show=$),onUpdateShow:i,"auto-focus":!1},{default:l(()=>[s(Ie,{style:{"min-height":"400px",overflow:"auto",width:"1300px","min-width":"500px"}},{default:l(()=>[s(Te,{style:{"min-height":"400px"}},{default:l(()=>{var $;return[a(E).show?(H(),ve(b,{key:0,"max-height":r.maxHeight,"space-id":r.spaceId,hkey:($=a(E).info)==null?void 0:$.k_full,"hide-history-option":!0,"hide-revert-option":r.hideRevertOption,"onUpdate:success":c,"onClose:modal":te,"show-footer":""},null,8,["max-height","space-id","hkey","hide-revert-option"])):ce("",!0)]}),_:1})]),_:1})]),_:1},8,["show"])])}}}),Mr={class:"flex gap-5"},Ir=ke({__name:"ParamsAction",props:{info:{},spaceId:{},actionTye:{},hideParentTree:{type:Boolean},showHistoryEntry:{type:Boolean}},emits:["update:success","ok","update:hisotry:success"],setup(K,{expose:W,emit:I}){const{t:h}=Ne(),X=Ve(),A=Fe(),d=g(!1),M=g(!1),O=K,Y=I,w=g(null),x=g({types:_e.str,keys:void 0,values:void 0}),L=g({keys:{required:!0},values:{required:!0},types:{required:!0}}),z=[_e.float,_e.str,_e.int,_e.complex],E=[_e.list,_e.tuple,_e.dict,_e.ndarray],B=()=>{M.value=!1,x.value={types:_e.str,keys:void 0,values:void 0}},V=Zt(()=>{var f,i;if((f=x.value)!=null&&f.types)return(i=x.value)==null?void 0:i.types}),q=()=>{var f;d.value||(d.value=!0,(f=w.value)==null||f.validate(async i=>{var y;if(i){d.value=!1;return}if(O.actionTye==="custom"){Y("ok",x.value),B(),d.value=!1;return}const{keys:m,values:C,types:F}=x.value,[te,r]=await yn({keys:[`${G.value}/${m}`],values:[C||""],types:[F],device_group_name:X.query.device_group_name,space_id:O.spaceId});d.value=!1,!te&&(r==null?void 0:r.status)===0&&(B(),Y("update:success",((y=G.value)==null?void 0:y.split("/"))||[]))}))},Z=f=>{x.value=f},G=Zt(()=>{var f,i,m,C;return((f=O.info)==null?void 0:f.type)==="add"?(i=O.info)==null?void 0:i.full_key:(C=(m=O.info)==null?void 0:m.full_key)==null?void 0:C.replace(/(.*)\/.*$/,"$1")}),p=g(!1),c=()=>{p.value=!0},P=()=>{Y("update:success")};return dn(p,f=>{f&&B()}),W({open:()=>M.value=!0,close:B,setFormValue:Z}),(f,i)=>{const m=Ga,C=cn,F=st,te=fr,r=pn,y=be,U=De;return H(),fe(It,null,[s(U,{show:a(M),"onUpdate:show":i[5]||(i[5]=R=>le(M)?M.value=R:null),"auto-focus":!1},{default:l(()=>[s(Ie,{style:{"min-height":"400px",overflow:"auto",width:"800px","min-width":"500px"}},{default:l(()=>[s(Te,{class:"min-h-96"},{default:l(()=>[s(r,{model:a(x),rules:a(L),ref_key:"formRef",ref:w},{default:l(()=>[ie("div",Mr,[s(C,{label:"Type",path:"types",class:"w-40"},{default:l(()=>[s(m,{options:a(fn),value:a(x).types,"onUpdate:value":i[0]||(i[0]=R=>a(x).types=R)},null,8,["options","value"])]),_:1}),s(C,{label:"Key",path:"keys",class:"flex-1"},{default:l(()=>{var R;return[s(F,{value:a(x).keys,"onUpdate:value":i[1]||(i[1]=T=>a(x).keys=T),disabled:((R=f.info)==null?void 0:R.type)==="edit"},ja({_:2},[f.hideParentTree?void 0:{name:"prefix",fn:l(()=>[se(ue(a(G))+"/ ",1)]),key:"0"}]),1032,["value","disabled"])]}),_:1})]),s(C,{label:"Value",path:"values"},{default:l(()=>[a(V)&&z.includes(a(V))?(H(),ve(F,{key:0,value:a(x).values,"onUpdate:value":i[2]||(i[2]=R=>a(x).values=R)},null,8,["value"])):ce("",!0),a(V)&&a(V)===a(_e).bool?(H(),ve(te,{key:1,value:a(x).values,"onUpdate:value":i[3]||(i[3]=R=>a(x).values=R)},null,8,["value"])):ce("",!0),a(V)&&E.includes(a(V))?(H(),ve(a(hn),{key:2,class:mn(["w-full max-h-[65vh] overflow-auto",[a(A).baseColor==="#000"?"jse-theme-dark":""]]),modelValue:a(x).values,"onUpdate:modelValue":i[4]||(i[4]=R=>a(x).values=R),mode:"text"},null,8,["class","modelValue"])):ce("",!0)]),_:1})]),_:1},8,["model","rules"])]),_:1}),s(Le,{onCancel:B},{default:l(()=>[f.showHistoryEntry?(H(),ve(y,{key:0,type:"info",onClick:c},{default:l(()=>[se(ue(a(h)("groupDetail.parameterManager.history")),1)]),_:1})):ce("",!0),s(y,{type:"primary",loading:a(d),onClick:q},{default:l(()=>[se(ue(a(h)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"]),s(U,{show:a(p),"onUpdate:show":i[7]||(i[7]=R=>le(p)?p.value=R:null),"auto-focus":!1},{default:l(()=>[s(Ie,{style:{"min-height":"400px",overflow:"auto",width:"1300px","min-width":"500px"}},{default:l(()=>[s(Te,null,{default:l(()=>{var R;return[s(bn,{"max-height":"auto","space-id":f.spaceId?Number(f.spaceId):void 0,hkey:(R=f.info)==null?void 0:R.full_key,"hide-history-option":"","onClose:modal":i[6]||(i[6]=()=>p.value=!1),"onUpdate:success":P,"show-footer":""},null,8,["space-id","hkey"])]}),_:1})]),_:1})]),_:1},8,["show"])],64)}}}),Tr={class:"relative mb-2 w-[450px]"},kr=ke({__name:"ParamsSearch",props:Yt({spaceId:{}},{modelValue:{},modelModifiers:{}}),emits:Yt(["refresh"],["update:modelValue"]),setup(K,{emit:W}){const I=W,h=K,X=Ve(),A=Fe(),{t:d}=Ne(),{copy:M,isSupported:O}=rn({legacy:!0}),Y=on(),w=g(!1),x=g(),L=Wa(K,"modelValue"),z=g({show:!1,info:void 0}),E=g(),B=g(),V=()=>{z.value={show:!1,info:void 0}},q=i=>{M(i),Y.success(d("common.copied"))},Z=i=>{var m,C;(m=E.value)==null||m.open(),(C=E.value)==null||C.setFormValue({types:i.t,keys:i.full_key.replace(/^.*\/([^\/]*)$/,"$1"),values:i.v}),B.value={...i,type:"edit"}},G=async i=>{const[m,C]=await sr({key:i.full_key,device_group_name:X.query.device_group_name,space_id:h.spaceId});!m&&(C==null?void 0:C.status)===0&&(f(),I("refresh"))},p=()=>{f(),I("refresh")},c=i=>{z.value={show:!0,info:i}},P=[{title:d("groupDetail.parameterManager.key"),key:"full_key",render:i=>S("div",{class:"inline-flex gap-2"},[S("div",i.full_key),S(Ue,{class:"cursor-pointer transition-transform hover:translate-y-[1px]",size:20,onClick:()=>q(i.full_key)},{default:()=>S(rt)})])},{title:d("groupDetail.parameterManager.dataType"),key:"t",width:100,render:i=>{if(i.expandable)return;const m=fn.find(C=>C.value===i.t);return S(Xa,{size:"small",bordered:!1,color:{textColor:"#fff",color:(m==null?void 0:m.color)||"#2080f0"},class:"min-w-16 text-center inline-flex justify-center"},{default:()=>i.t})}},{title:d("groupDetail.parameterManager.value"),key:"v",ellipsis:{tooltip:!0},render:i=>i.expandable?i.v:S("div",{class:"flex gap-2"},[S("div",i.v),O.value?S(Ue,{class:"cursor-pointer transition-transform hover:translate-y-[1px]",size:20,onClick:()=>q(i.v)},{default:()=>S(rt)}):void 0])},{title:d("groupDetail.parameterManager.options"),key:"options",width:260,align:"center",render:i=>{const m={quaternary:!0,type:"info",size:"small"},C=S(be,{...m,onClick:()=>{Z(i)}},{default:()=>d("groupDetail.parameterManager.optionEdit")}),F=S(be,{...m,onClick:()=>c(i)},{default:()=>d("groupDetail.parameterManager.optionHistory")}),te=S(wn,{onPositiveClick:()=>G(i),placement:"left-start"},{default:()=>d("groupDetail.parameterManager.removeConfirm"),icon:()=>S(Ue,{color:"#e88080",size:22},S(br)),trigger:()=>S(be,{...m,type:"error"},{default:()=>d("groupDetail.parameterManager.optionRemove")})});return S("div",{class:"flex justify-end"},[C,F,te])}}],f=async()=>{var C;if(!((C=L.value)!=null&&C.trim())||!h.spaceId||w.value)return;w.value=!0;const[i,m]=await ir({device_group_name:X.query.device_group_name,space_id:h.spaceId,search_word:L.value});w.value=!1,(i||(m==null?void 0:m.status)==0)&&(x.value=m==null?void 0:m.data)};return Mt(()=>{ot(()=>{setTimeout(()=>{f()},200)})}),(i,m)=>{const C=st,F=xn,te=De;return H(),fe("div",null,[ie("div",Tr,[s(C,{style:{width:"450px","padding-right":"20px"},value:L.value,"onUpdate:value":m[0]||(m[0]=r=>L.value=r),valueModifiers:{trim:!0},placeholder:a(d)("groupDetail.parameterManager.searchPlaceholder"),onKeyup:_n(f,["enter"])},null,8,["value","placeholder"]),ie("div",{class:"absolute -right-4 top-1/2 -translate-1/2 h-full w-8 flex items-center justify-center cursor-pointer",onClick:f},[s(a(Ue),{color:a(A).primaryColor,component:a(vn)},null,8,["color","component"])])]),s(F,{size:"small","max-height":"calc(100vh - 340px)",columns:P,data:a(x),loading:a(w),"row-key":r=>r.full_key},null,8,["data","loading","row-key"]),i.spaceId?(H(),ve(Ir,{key:0,info:a(B),ref_key:"actionInfoRef",ref:E,"space-id":i.spaceId,"onUpdate:success":p},null,8,["info","space-id"])):ce("",!0),s(te,{show:a(z).show,"onUpdate:show":m[1]||(m[1]=r=>a(z).show=r),"auto-focus":!1},{default:l(()=>[s(Ie,{style:{"min-height":"400px",overflow:"auto",width:"1300px","min-width":"500px"}},{default:l(()=>[s(Te,null,{default:l(()=>{var r;return[s(bn,{"max-height":"auto","space-id":i.spaceId,hkey:(r=a(z).info)==null?void 0:r.full_key,"hide-history-option":"","onUpdate:success":p,"onClose:modal":V,"show-footer":""},null,8,["space-id","hkey"])]}),_:1})]),_:1})]),_:1},8,["show"])])}}});var Be={exports:{}};Be.exports;var nn;function Ar(){return nn||(nn=1,function(K,W){var I=200,h="Expected a function",X="__lodash_hash_undefined__",A=1,d=2,M=9007199254740991,O="[object Arguments]",Y="[object Array]",w="[object Boolean]",x="[object Date]",L="[object Error]",z="[object Function]",E="[object GeneratorFunction]",B="[object Map]",V="[object Number]",q="[object Object]",Z="[object Promise]",G="[object RegExp]",p="[object Set]",c="[object String]",P="[object Symbol]",f="[object WeakMap]",i="[object ArrayBuffer]",m="[object DataView]",C="[object Float32Array]",F="[object Float64Array]",te="[object Int8Array]",r="[object Int16Array]",y="[object Int32Array]",U="[object Uint8Array]",R="[object Uint8ClampedArray]",T="[object Uint16Array]",b="[object Uint32Array]",j=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,Q=/^\./,me=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qe=/[\\^$.*+?()[\]{}|]/g,it=/\\(\\)?/g,lt=/^\[object .+?Constructor\]$/,ut=/^(?:0|[1-9]\d*)$/,k={};k[C]=k[F]=k[te]=k[r]=k[y]=k[U]=k[R]=k[T]=k[b]=!0,k[O]=k[Y]=k[i]=k[w]=k[m]=k[x]=k[L]=k[z]=k[B]=k[V]=k[q]=k[G]=k[p]=k[c]=k[f]=!1;var ne=typeof at=="object"&&at&&at.Object===Object&&at,Ce=typeof self=="object"&&self&&self.Object===Object&&self,ae=ne||Ce||Function("return this")(),Tt=W&&!W.nodeType&&W,kt=Tt&&!0&&K&&!K.nodeType&&K,Cn=kt&&kt.exports===Tt,At=Cn&&ne.process,Pt=function(){try{return At&&At.binding("util")}catch{}}(),Rt=Pt&&Pt.isTypedArray;function Sn(e,t){for(var n=-1,o=e?e.length:0;++n<o;)if(t(e[n],n,e))return!0;return!1}function Mn(e){return function(t){return t==null?void 0:t[e]}}function In(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}function Tn(e){return function(t){return e(t)}}function kn(e,t){return e==null?void 0:e[t]}function dt(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function An(e){var t=-1,n=Array(e.size);return e.forEach(function(o,_){n[++t]=[_,o]}),n}function Pn(e,t){return function(n){return e(t(n))}}function Rn(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n}var On=Array.prototype,Un=Function.prototype,Ke=Object.prototype,pt=ae["__core-js_shared__"],Ot=function(){var e=/[^.]+$/.exec(pt&&pt.keys&&pt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ut=Un.toString,ge=Ke.hasOwnProperty,$e=Ke.toString,$n=RegExp("^"+Ut.call(ge).replace(qe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$t=ae.Symbol,Et=ae.Uint8Array,En=Ke.propertyIsEnumerable,Ln=On.splice,qn=Pn(Object.keys,Object),ct=Ee(ae,"DataView"),He=Ee(ae,"Map"),ft=Ee(ae,"Promise"),mt=Ee(ae,"Set"),_t=Ee(ae,"WeakMap"),ze=Ee(Object,"create"),Hn=Pe(ct),zn=Pe(He),Bn=Pe(ft),Fn=Pe(mt),Nn=Pe(_t),Ge=$t?$t.prototype:void 0,vt=Ge?Ge.valueOf:void 0,Lt=Ge?Ge.toString:void 0;function Ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Vn(){this.__data__=ze?ze(null):{}}function Dn(e){return this.has(e)&&delete this.__data__[e]}function Kn(e){var t=this.__data__;if(ze){var n=t[e];return n===X?void 0:n}return ge.call(t,e)?t[e]:void 0}function Gn(e){var t=this.__data__;return ze?t[e]!==void 0:ge.call(t,e)}function jn(e,t){var n=this.__data__;return n[e]=ze&&t===void 0?X:t,this}Ae.prototype.clear=Vn,Ae.prototype.delete=Dn,Ae.prototype.get=Kn,Ae.prototype.has=Gn,Ae.prototype.set=jn;function he(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Wn(){this.__data__=[]}function Xn(e){var t=this.__data__,n=We(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():Ln.call(t,n,1),!0}function Zn(e){var t=this.__data__,n=We(t,e);return n<0?void 0:t[n][1]}function Yn(e){return We(this.__data__,e)>-1}function Jn(e,t){var n=this.__data__,o=We(n,e);return o<0?n.push([e,t]):n[o][1]=t,this}he.prototype.clear=Wn,he.prototype.delete=Xn,he.prototype.get=Zn,he.prototype.has=Yn,he.prototype.set=Jn;function ye(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function Qn(){this.__data__={hash:new Ae,map:new(He||he),string:new Ae}}function ea(e){return Xe(this,e).delete(e)}function ta(e){return Xe(this,e).get(e)}function na(e){return Xe(this,e).has(e)}function aa(e,t){return Xe(this,e).set(e,t),this}ye.prototype.clear=Qn,ye.prototype.delete=ea,ye.prototype.get=ta,ye.prototype.has=na,ye.prototype.set=aa;function je(e){var t=-1,n=e?e.length:0;for(this.__data__=new ye;++t<n;)this.add(e[t])}function ra(e){return this.__data__.set(e,X),this}function oa(e){return this.__data__.has(e)}je.prototype.add=je.prototype.push=ra,je.prototype.has=oa;function we(e){this.__data__=new he(e)}function sa(){this.__data__=new he}function ia(e){return this.__data__.delete(e)}function la(e){return this.__data__.get(e)}function ua(e){return this.__data__.has(e)}function da(e,t){var n=this.__data__;if(n instanceof he){var o=n.__data__;if(!He||o.length<I-1)return o.push([e,t]),this;n=this.__data__=new ye(o)}return n.set(e,t),this}we.prototype.clear=sa,we.prototype.delete=ia,we.prototype.get=la,we.prototype.has=ua,we.prototype.set=da;function pa(e,t){var n=Re(e)||Dt(e)?In(e.length,String):[],o=n.length,_=!!o;for(var u in e)ge.call(e,u)&&!(_&&(u=="length"||Bt(u,o)))&&n.push(u);return n}function We(e,t){for(var n=e.length;n--;)if(Vt(e[n][0],t))return n;return-1}function ca(e,t,n){for(var o=-1,_=e.length;++o<_;){var u=e[o],v=t(u);if(v!=null&&(D===void 0?v===v&&!et(v):n(v,D)))var D=v,N=u}return N}function qt(e,t){t=Ze(t,e)?[t]:Ht(t);for(var n=0,o=t.length;e!=null&&n<o;)e=e[Ye(t[n++])];return n&&n==o?e:void 0}function fa(e){return $e.call(e)}function ma(e,t){return e>t}function _a(e,t){return e!=null&&t in Object(e)}function gt(e,t,n,o,_){return e===t?!0:e==null||t==null||!Je(e)&&!Qe(t)?e!==e&&t!==t:va(e,t,gt,n,o,_)}function va(e,t,n,o,_,u){var v=Re(e),D=Re(t),N=Y,J=Y;v||(N=Se(e),N=N==O?q:N),D||(J=Se(t),J=J==O?q:J);var re=N==q&&!dt(e),oe=J==q&&!dt(t),ee=N==J;if(ee&&!re)return u||(u=new we),v||Ea(e)?zt(e,t,n,o,_,u):Ia(e,t,N,n,o,_,u);if(!(_&d)){var de=re&&ge.call(e,"__wrapped__"),pe=oe&&ge.call(t,"__wrapped__");if(de||pe){var Me=de?e.value():e,xe=pe?t.value():t;return u||(u=new we),n(Me,xe,o,_,u)}}return ee?(u||(u=new we),Ta(e,t,n,o,_,u)):!1}function ga(e,t,n,o){var _=n.length,u=_;if(e==null)return!u;for(e=Object(e);_--;){var v=n[_];if(v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++_<u;){v=n[_];var D=v[0],N=e[D],J=v[1];if(v[2]){if(N===void 0&&!(D in e))return!1}else{var re=new we,oe;if(!(oe===void 0?gt(J,N,o,A|d,re):oe))return!1}}return!0}function ha(e){if(!Je(e)||Ra(e))return!1;var t=Gt(e)||dt(e)?$n:lt;return t.test(Pe(e))}function ya(e){return Qe(e)&&yt(e.length)&&!!k[$e.call(e)]}function wa(e){return typeof e=="function"?e:e==null?za:typeof e=="object"?Re(e)?Ca(e[0],e[1]):ba(e):Ba(e)}function xa(e){if(!Oa(e))return qn(e);var t=[];for(var n in Object(e))ge.call(e,n)&&n!="constructor"&&t.push(n);return t}function ba(e){var t=ka(e);return t.length==1&&t[0][2]?Nt(t[0][0],t[0][1]):function(n){return n===e||ga(n,e,t)}}function Ca(e,t){return Ze(e)&&Ft(t)?Nt(Ye(e),t):function(n){var o=qa(n,e);return o===void 0&&o===t?Ha(n,e):gt(t,o,void 0,A|d)}}function Sa(e){return function(t){return qt(t,e)}}function Ma(e){if(typeof e=="string")return e;if(et(e))return Lt?Lt.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Ht(e){return Re(e)?e:Ua(e)}function zt(e,t,n,o,_,u){var v=_&d,D=e.length,N=t.length;if(D!=N&&!(v&&N>D))return!1;var J=u.get(e);if(J&&u.get(t))return J==t;var re=-1,oe=!0,ee=_&A?new je:void 0;for(u.set(e,t),u.set(t,e);++re<D;){var de=e[re],pe=t[re];if(o)var Me=v?o(pe,de,re,t,e,u):o(de,pe,re,e,t,u);if(Me!==void 0){if(Me)continue;oe=!1;break}if(ee){if(!Sn(t,function(xe,Oe){if(!ee.has(Oe)&&(de===xe||n(de,xe,o,_,u)))return ee.add(Oe)})){oe=!1;break}}else if(!(de===pe||n(de,pe,o,_,u))){oe=!1;break}}return u.delete(e),u.delete(t),oe}function Ia(e,t,n,o,_,u,v){switch(n){case m:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case i:return!(e.byteLength!=t.byteLength||!o(new Et(e),new Et(t)));case w:case x:case V:return Vt(+e,+t);case L:return e.name==t.name&&e.message==t.message;case G:case c:return e==t+"";case B:var D=An;case p:var N=u&d;if(D||(D=Rn),e.size!=t.size&&!N)return!1;var J=v.get(e);if(J)return J==t;u|=A,v.set(e,t);var re=zt(D(e),D(t),o,_,u,v);return v.delete(e),re;case P:if(vt)return vt.call(e)==vt.call(t)}return!1}function Ta(e,t,n,o,_,u){var v=_&d,D=wt(e),N=D.length,J=wt(t),re=J.length;if(N!=re&&!v)return!1;for(var oe=N;oe--;){var ee=D[oe];if(!(v?ee in t:ge.call(t,ee)))return!1}var de=u.get(e);if(de&&u.get(t))return de==t;var pe=!0;u.set(e,t),u.set(t,e);for(var Me=v;++oe<N;){ee=D[oe];var xe=e[ee],Oe=t[ee];if(o)var jt=v?o(Oe,xe,ee,t,e,u):o(xe,Oe,ee,e,t,u);if(!(jt===void 0?xe===Oe||n(xe,Oe,o,_,u):jt)){pe=!1;break}Me||(Me=ee=="constructor")}if(pe&&!Me){var tt=e.constructor,nt=t.constructor;tt!=nt&&"constructor"in e&&"constructor"in t&&!(typeof tt=="function"&&tt instanceof tt&&typeof nt=="function"&&nt instanceof nt)&&(pe=!1)}return u.delete(e),u.delete(t),pe}function Xe(e,t){var n=e.__data__;return Pa(t)?n[typeof t=="string"?"string":"hash"]:n.map}function ka(e){for(var t=wt(e),n=t.length;n--;){var o=t[n],_=e[o];t[n]=[o,_,Ft(_)]}return t}function Ee(e,t){var n=kn(e,t);return ha(n)?n:void 0}var Se=fa;(ct&&Se(new ct(new ArrayBuffer(1)))!=m||He&&Se(new He)!=B||ft&&Se(ft.resolve())!=Z||mt&&Se(new mt)!=p||_t&&Se(new _t)!=f)&&(Se=function(e){var t=$e.call(e),n=t==q?e.constructor:void 0,o=n?Pe(n):void 0;if(o)switch(o){case Hn:return m;case zn:return B;case Bn:return Z;case Fn:return p;case Nn:return f}return t});function Aa(e,t,n){t=Ze(t,e)?[t]:Ht(t);for(var o,_=-1,v=t.length;++_<v;){var u=Ye(t[_]);if(!(o=e!=null&&n(e,u)))break;e=e[u]}if(o)return o;var v=e?e.length:0;return!!v&&yt(v)&&Bt(u,v)&&(Re(e)||Dt(e))}function Bt(e,t){return t=t??M,!!t&&(typeof e=="number"||ut.test(e))&&e>-1&&e%1==0&&e<t}function Ze(e,t){if(Re(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||et(e)?!0:$.test(e)||!j.test(e)||t!=null&&e in Object(t)}function Pa(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ra(e){return!!Ot&&Ot in e}function Oa(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Ke;return e===n}function Ft(e){return e===e&&!Je(e)}function Nt(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var Ua=ht(function(e){e=La(e);var t=[];return Q.test(e)&&t.push(""),e.replace(me,function(n,o,_,u){t.push(_?u.replace(it,"$1"):o||n)}),t});function Ye(e){if(typeof e=="string"||et(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Pe(e){if(e!=null){try{return Ut.call(e)}catch{}try{return e+""}catch{}}return""}function ht(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(h);var n=function(){var o=arguments,_=t?t.apply(this,o):o[0],u=n.cache;if(u.has(_))return u.get(_);var v=e.apply(this,o);return n.cache=u.set(_,v),v};return n.cache=new(ht.Cache||ye),n}ht.Cache=ye;function Vt(e,t){return e===t||e!==e&&t!==t}function Dt(e){return $a(e)&&ge.call(e,"callee")&&(!En.call(e,"callee")||$e.call(e)==O)}var Re=Array.isArray;function Kt(e){return e!=null&&yt(e.length)&&!Gt(e)}function $a(e){return Qe(e)&&Kt(e)}function Gt(e){var t=Je(e)?$e.call(e):"";return t==z||t==E}function yt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=M}function Je(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Qe(e){return!!e&&typeof e=="object"}function et(e){return typeof e=="symbol"||Qe(e)&&$e.call(e)==P}var Ea=Rt?Tn(Rt):ya;function La(e){return e==null?"":Ma(e)}function qa(e,t,n){var o=e==null?void 0:qt(e,t);return o===void 0?n:o}function Ha(e,t){return e!=null&&Aa(e,t,_a)}function wt(e){return Kt(e)?pa(e):xa(e)}function za(e){return e}function Ba(e){return Ze(e)?Mn(Ye(e)):Sa(e)}function Fa(e,t){return e&&e.length?ca(e,wa(t),ma):void 0}K.exports=Fa}(Be,Be.exports)),Be.exports}var Pr=Ar();const Yr=gn(Pr);var St,an;function Rr(){if(an)return St;an=1;function K(h,X){for(var A,d=-1,M=h.length;++d<M;){var O=X(h[d]);O!==void 0&&(A=A===void 0?O:A+O)}return A}function W(h){return h}function I(h){return h&&h.length?K(h,W):0}return St=I,St}var Or=Rr();const Jr=gn(Or),Ur=ke({__name:"SpaceModal",props:{spaceId:{}},emits:["success","reload"],setup(K,{expose:W,emit:I}){const h=sn({}),X=K,A=Fe(),d=Ve(),{t:M}=Ne(),O=I,Y=g(),w=g({space_name:void 0,description:void 0}),x=g({space_name:{required:!0,message:M("common.required")},description:{required:!0,message:M("common.required")}}),L=g(!1),z=g(!1),E=g(!1),B=g(),V=g(),q=g(),Z=g(),G=g(!1),p=g(!1),c=g(!1),P=()=>{c.value=!1,w.value={space_name:void 0,description:void 0}},f=()=>{p.value=!1,G.value=!1,q.value=void 0,V.value=void 0},i=T=>{T||P()},m=T=>{T||f()},C=T=>{T||(G.value=!1,q.value=void 0)},F=async()=>{const[T,b]=await lr();!T&&(b==null?void 0:b.status)===0&&(B.value=b.data,Z.value=Object.keys(b.data||{})[0],ot(()=>{te(Z.value)}))},te=async T=>{const[b,j]=await ur({initializer_name:T});!b&&(j==null?void 0:j.status)===0&&(V.value=j.data)},r=T=>{te(T)},y=async T=>{var me;if(L.value)return;L.value=!0;const b=await((me=h[T])==null?void 0:me.submit()),j=Jt(b);if(Qt(j)){L.value=!1;return}G.value=!0;const[$,Q]=await dr({device_group_name:d.query.device_group_name,space_id:X.spaceId,initializer_name:Z.value,setting:j});L.value=!1,!$&&(Q==null?void 0:Q.status)===0&&(q.value=Q.data)},U=async T=>{var me;if(z.value)return;z.value=!0;const b=await((me=h[T])==null?void 0:me.submit()),j=Jt(b);if(Qt(j)){z.value=!1;return}const[$,Q]=await pr({device_group_name:d.query.device_group_name,space_id:X.spaceId,initializer_name:Z.value,setting:j});z.value=!1,O("reload"),!$&&(Q==null?void 0:Q.status)===0&&f()},R=async()=>{var T;E.value||(E.value=!0,(T=Y.value)==null||T.validate(async b=>{var Q;if(b){E.value=!1;return}const[j,$]=await cr({device_group_name:d.query.device_group_name,...w.value});E.value=!1,!j&&($==null?void 0:$.status)===0&&(P(),O("success",(Q=$.data)==null?void 0:Q.space_id))}))};return dn(p,T=>{T&&F()},{immediate:!0}),W({openInitialLizerModal:()=>p.value=!0,openAddModal:()=>c.value=!0}),(T,b)=>{const j=st,$=cn,Q=pn,me=be,qe=De,it=Qa,lt=Ja,ut=Ya,k=un;return H(),fe("div",null,[s(qe,{show:a(c),"onUpdate:show":b[2]||(b[2]=ne=>le(c)?c.value=ne:null),onUpdateShow:i},{default:l(()=>[s(Ie,{style:{width:"700px",height:"320px"}},{default:l(()=>[s(bt,null,{default:l(()=>[se(ue(a(M)("groupDetail.parameterManager.createSpace")),1)]),_:1}),s(Te,null,{default:l(()=>[s(Q,{ref_key:"addFormRef",ref:Y,model:a(w),rules:a(x)},{default:l(()=>[s($,{label:a(M)("groupDetail.parameterManager.spaceName"),path:"space_name"},{default:l(()=>[s(j,{value:a(w).space_name,"onUpdate:value":b[0]||(b[0]=ne=>a(w).space_name=ne)},null,8,["value"])]),_:1},8,["label"]),s($,{label:a(M)("groupDetail.parameterManager.description"),path:"description"},{default:l(()=>[s(j,{value:a(w).description,"onUpdate:value":b[1]||(b[1]=ne=>a(w).description=ne)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1}),s(Le,{onCancel:P},{default:l(()=>[s(me,{type:"primary",loading:a(E),onClick:R},{default:l(()=>[se(ue(a(M)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"]),s(qe,{show:a(p),"onUpdate:show":b[6]||(b[6]=ne=>le(p)?p.value=ne:null),"onOnUpdate:show":m,"auto-focus":!1},{default:l(()=>[s(Ie,{style:{width:"800px","min-height":"600px",height:"80vh"}},{default:l(()=>[s(bt,null,{default:l(()=>[se(ue(a(M)("groupDetail.parameterManager.paramsTpl")),1)]),_:1}),s(Te,null,{default:l(()=>[s(k,{type:"card",placement:"left",value:a(Z),"onUpdate:value":b[5]||(b[5]=ne=>le(Z)?Z.value=ne:null),onUpdateValue:r},{default:l(()=>[(H(!0),fe(It,null,Za(a(B),(ne,Ce)=>(H(),ve(ut,{key:Ce,tab:ne.title,name:Ce},{default:l(()=>[s(lt,{class:"pt-3 pl-4 pb-4 pr-4"},{default:l(()=>[s(it,{style:{"max-height":"calc(80vh - 190px)"}},{default:l(()=>[a(V)?(H(),ve(mr,{ref_for:!0,ref:ae=>a(h)[Ce]=ae,cfgs:a(V),key:Ce},null,8,["cfgs"])):ce("",!0)]),_:2},1024),s(Le,{onCancel:f},{default:l(()=>[s(me,{type:"primary",loading:a(L),onClick:()=>y(Ce)},{default:l(()=>[se(ue(a(M)("common.OK")),1)]),_:2},1032,["loading","onClick"])]),_:2},1024),s(qe,{show:a(G),"onUpdate:show":b[4]||(b[4]=ae=>le(G)?G.value=ae:null),"onOnUpdate:show":C,"auto-focus":!1},{default:l(()=>[s(Ie,{style:{width:"700px"}},{default:l(()=>[s(bt,null,{default:l(()=>b[7]||(b[7]=[se(" Preview ")])),_:1}),s(Te,null,{default:l(()=>[s(a(hn),{class:mn(["w-full overflow-auto",[a(A).baseColor==="#000"?"jse-theme-dark":""]]),style:{height:"calc(80vh - 100px)"},disabled:"",modelValue:a(q),"onUpdate:modelValue":b[3]||(b[3]=ae=>le(q)?q.value=ae:null),mode:"text"},null,8,["class","modelValue"])]),_:1}),s(Le,{onCancel:f},{default:l(()=>[s(me,{type:"primary",loading:a(z),onClick:()=>U(Ce)},{default:l(()=>[se(ue(a(M)("common.submit")),1)]),_:2},1032,["loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["show"])]),_:2},1024)]),_:2},1032,["tab","name"]))),128))]),_:1},8,["value"])]),_:1})]),_:1})]),_:1},8,["show"])])}}}),$r={key:0,class:"flex flex-1 items-center justify-between gap-2"},Er={class:"flex gap-2 items-center"},Lr={class:"relative"},qr={key:0,class:"flex items-center gap-2"},Hr=ke({__name:"SpaceTools",props:{hidenbtns:{type:Boolean},hideInit:{type:Boolean}},setup(K,{expose:W}){const I=Ve(),{t:h}=Ne(),X=Fe();rr();const A=g(),d=g(),M=g(!1);g(!1);const O=()=>{var p;(p=A.value)==null||p.openAddModal()},Y=()=>{var p;(p=A.value)==null||p.openInitialLizerModal()},w=g(),x=()=>{d.value=I.query.space_id};Mt(()=>{x()}),ln(()=>{x()});const L=()=>{var p;(p=w.value)!=null&&p.trim()&&(M.value=!0)},z=g(),E=g(),B=g(),V=()=>{var p,c,P;(p=z.value)==null||p.refresh(),(c=E.value)==null||c.refresh(),(P=B.value)==null||P.refresh()},q=async()=>{var P;const[p,c]=await ar({group_name:I.query.device_group_name,space_id:d.value});!p&&(c==null?void 0:c.status)===0&&vr.saveAs(`${en(location.origin)}/${en((P=c==null?void 0:c.data)==null?void 0:P.filename)}`,tr(c.data.filename))},Z=p=>{d.value=p,ot(()=>{var f;const c=I.query;(f=I.matched)!=null&&f.find(i=>i.name==="space")&&(c.space_id=p);const P=new URLSearchParams(c);window.open(`${I.path}?${P.toString()}`,"_self")})},G=()=>{window.location.reload()};return W({add:O}),(p,c)=>{const P=be,f=er,i=st,m=Ue,C=De;return H(),fe("div",null,[p.hidenbtns?ce("",!0):(H(),fe("div",$r,[ie("div",Er,[s(f,{trigger:"hover"},{trigger:l(()=>[s(P,{type:"primary",class:"!ml-1",onClick:q},{icon:l(()=>[s(a(_r))]),_:1})]),default:l(()=>[se(" "+ue(a(h)("expInfo.downloadSpaceParams")),1)]),_:1}),ie("div",Lr,[s(i,{style:{width:"310px","padding-right":"20px"},value:a(w),"onUpdate:value":c[0]||(c[0]=F=>le(w)?w.value=F:null),valueModifiers:{trim:!0},onKeyup:_n(L,["enter"]),placeholder:a(h)("groupDetail.parameterManager.searchPlaceholder")},null,8,["value","placeholder"]),ie("div",{class:"absolute -right-4 top-1/2 -translate-1/2 h-full w-8 flex items-center justify-center cursor-pointer",onClick:L},[s(m,{color:a(X).primaryColor,component:a(vn)},null,8,["color","component"])])])]),p.hideInit?ce("",!0):(H(),fe("div",qr,[s(P,{size:"small",type:"primary",class:"!h-[34px]",onClick:Y},{icon:l(()=>[s(a(wr))]),default:l(()=>[se(" "+ue(a(h)("groupDetail.parameterManager.initSpaceParams")),1)]),_:1})]))])),s(Ur,{ref_key:"spaceModalRef",ref:A,"space-id":a(d),onSuccess:Z,onReload:G},null,8,["space-id"]),s(C,{show:a(M),"onUpdate:show":c[3]||(c[3]=F=>le(M)?M.value=F:null),"auto-focus":!1},{default:l(()=>[s(Ie,{style:{"min-height":"400px",overflow:"auto",width:"1300px","max-width":"95vw","min-width":"500px"}},{default:l(()=>[s(Te,{style:{"min-height":"300px"}},{default:l(()=>[s(kr,{search:"","space-id":+a(d),"hide-history-option":"",modelValue:a(w),"onUpdate:modelValue":c[1]||(c[1]=F=>le(w)?w.value=F:null),onRefresh:V},null,8,["space-id","modelValue"])]),_:1}),s(Le,{onCancel:c[2]||(c[2]=F=>M.value=!1)})]),_:1})]),_:1},8,["show"])])}}}),Qr=nr(Hr,[["__scopeId","data-v-d920d196"]]);export{br as H,hr as R,Qr as S,Ir as _,bn as a,Yr as m,Jr as s};
