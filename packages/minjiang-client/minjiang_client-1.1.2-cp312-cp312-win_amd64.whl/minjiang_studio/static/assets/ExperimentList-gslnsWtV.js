import{d as K,e as D,f as m,h as x,bd as Pe,I as G,bj as ze,af as gt,z as ht,r as y,C as ie,A as me,b as te,a6 as pe,F as J,L as H,bk as He,ab as q,Z as Ee,l as e,Y as re,w as s,i as o,U as Ce,V as Ne,s as h,t as f,W as $e,aa as P,aq as De,ap as Oe,ad as xe,al as ve,aE as Fe,B as ge,X as Me,bl as Ge,k as We,m as Je,N as ae,n as Ye,c as Xe,j as he,E as ne,aF as yt,a5 as ce,J as Qe,aR as Te,a8 as Ae,ac as V,aM as Ze,aO as et,R as tt,aN as ot,be as nt,bm as be,bn as bt,K as kt,aU as Re,bo as Z,aG as wt,aT as de,at as st,aS as Et,a3 as Ct,bp as lt,as as rt,aD as we,am as Ue}from"./index-DFmXBO_y.js";import{b as je,m as Nt,c as $t,r as Dt,E as Ft,d as Mt,e as St,f as Lt,R as It,t as Tt}from"./ExpsTpl-C-QAVlgQ.js";import{_ as Rt,a as jt}from"./Checkbox-1HN6lbh2.js";import{_ as at}from"./Tree-IQsjqbLM.js";import{H as it,D as Ot,_ as ee}from"./InfoItem.vue_vue_type_script_setup_true_lang-izJk7EnN.js";import{F as ct}from"./Folder-C6aUz1yW.js";import{_ as dt,a as ut}from"./BreadcrumbItem-iNeO1RRN.js";import{o as Bt}from"./index-0IyaaWNo.js";import{F as qt}from"./FolderAdd28Regular-pqKcvoun.js";import{A as zt}from"./Add-BM2Qtof0.js";import{_ as At}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-6IYkdn7q.js";import{D as Ut,_ as pt}from"./Delete24Regular-Dn4YYklC.js";import{s as Vt,g as Kt,a as Pt}from"./exp-DjOP_yTH.js";import{u as Ht}from"./groupDetail-BmkuIw6x.js";import{u as Gt}from"./useInterval-B9ffeHkB.js";import{c as _t}from"./index-DcQUyUKO.js";import{S as ue,a as Wt,u as Jt,_ as Yt}from"./index-BjTvM4Vo.js";import{P as ft}from"./Pulse-B8j2fPk_.js";import{_ as Xt,N as Qt}from"./Image-BVtUlqGI.js";import"./DynamicForm-DoNpBqAS.js";import"./json-editor-vue-jX9aR6ea.js";import"./index-B6_I1O0p.js";import"./InputNumber-DfgLr1Gf.js";import"./RadioGroup-CoMSa7Uc.js";import"./Switch-CQ9ZKs-S.js";import"./WaveformPane.vue_vue_type_script_setup_true_lang-DDtq5xro.js";import"./exp-3rwfokvF.js";import"./index.browser-OxPLOBIU.js";import"./installCanvasRenderer-DQ3trSBi.js";import"./Refresh-_eXVZVC6.js";import"./ExperimentTwotone-C6nRu73C.js";import"./download-C2161hUv.js";const Zt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},eo=K({name:"ArrowBackOutline",render:function(g,a){return m(),D("svg",Zt,a[0]||(a[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M244 400L100 256l144-144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M120 256h292"},null,-1)]))}}),to={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},oo=K({name:"Eye",render:function(g,a){return m(),D("svg",to,a[0]||(a[0]=[x("circle",{cx:"256",cy:"256",r:"64",fill:"currentColor"},null,-1),x("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96c-42.52 0-84.33 12.15-124.27 36.11c-40.73 24.43-77.63 60.12-109.68 106.07a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416c46.71 0 93.81-14.43 136.2-41.72c38.46-24.77 72.72-59.66 99.08-100.92a32.2 32.2 0 0 0-.1-34.76zM256 352a96 96 0 1 1 96-96a96.11 96.11 0 0 1-96 96z",fill:"currentColor"},null,-1)]))}}),no={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},so=K({name:"Move",render:function(g,a){return m(),D("svg",no,a[0]||(a[0]=[Pe('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M176 112l80-80l80 80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M255.98 32l.02 448"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M176 400l80 80l80-80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M400 176l80 80l-80 80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M112 176l-80 80l80 80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M32 256h448"></path>',6)]))}}),lo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ro=K({name:"ArrowBarRight",render:function(g,a){return m(),D("svg",lo,a[0]||(a[0]=[Pe('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 12H10"></path><path d="M20 12l-4 4"></path><path d="M20 12l-4-4"></path><path d="M4 4v16"></path></g>',1)]))}}),ao={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},io=K({name:"ArrowMove24Regular",render:function(g,a){return m(),D("svg",ao,a[0]||(a[0]=[x("g",{fill:"none"},[x("path",{d:"M15.28 6.03a.75.75 0 0 1-1.06 0l-1.47-1.47v3.69a.75.75 0 0 1-1.5 0V4.56L9.78 6.03a.75.75 0 0 1-1.06-1.06l2.75-2.75a.75.75 0 0 1 1.06 0l2.75 2.75a.75.75 0 0 1 0 1.06zm-9.25 8.19a.75.75 0 1 1-1.06 1.06l-2.75-2.75a.75.75 0 0 1 0-1.06l2.75-2.75a.75.75 0 0 1 1.06 1.06l-1.47 1.47h3.69a.75.75 0 0 1 0 1.5H4.56l1.47 1.47zm11.94 1.06a.75.75 0 0 1 0-1.06l1.47-1.47h-3.69a.75.75 0 0 1 0-1.5h3.69l-1.47-1.47a.75.75 0 0 1 1.06-1.06l2.75 2.75a.75.75 0 0 1 0 1.06l-2.75 2.75a.75.75 0 0 1-1.06 0zm-2.69 2.69a.75.75 0 0 0-1.06 0l-1.47 1.47v-3.69a.75.75 0 0 0-1.5 0v3.69l-1.47-1.47a.75.75 0 0 0-1.06 1.06l2.75 2.75a.75.75 0 0 0 1.06 0l2.75-2.75a.75.75 0 0 0 0-1.06z",fill:"currentColor"})],-1)]))}}),co={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},uo=K({name:"DriveFileRenameOutlineFilled",render:function(g,a){return m(),D("svg",co,a[0]||(a[0]=[x("path",{d:"M18.41 5.8L17.2 4.59c-.78-.78-2.05-.78-2.83 0l-2.68 2.68L3 15.96V20h4.04l8.74-8.74l2.63-2.63c.79-.78.79-2.05 0-2.83zM6.21 18H5v-1.21l8.66-8.66l1.21 1.21L6.21 18zM11 20l4-4h6v4H11z",fill:"currentColor"},null,-1)]))}}),Ve=(R,g)=>{var d;if(!R.length)return;const a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0);const n=R.map(u=>G(Xt,{width:100,src:u}));let p=document.querySelector("#preview-image");if(!p){const u=document.createElement("div");u.id="preview-image",document.body.appendChild(u),p=u}n.length>1?ze(G(Qt,{},[G(gt,{},n)]),p):ze(n[0],p),(d=p==null?void 0:p.querySelectorAll(".n-image img")[g])==null||d.dispatchEvent(a)},X=ht("expList",()=>{const R=y(),g=y(),a=y(),n=y([]),p=y(!1),d=y(),u=y(),$=y(0),k=y(!1);return{tree:R,curNode:g,curExpList:n,refreshExpFolderTree:a,refreshExpList:p,curExpNode:d,curExpCounts:$,curFolderNode:u,loadingCurNode:k,reset:()=>{g.value=void 0,d.value=void 0,u.value=void 0,$.value=0}}}),po={class:"flex"},_o={class:"flex-1"},fo={class:"flex justify-center items-center mx-2"},mo={class:"flex-1 min-h-[300px]"},xo=K({__name:"BatchModal",setup(R,{expose:g}){const a=ie(),n=me(),{t:p}=te(),d=y(!1),u=X(),$=()=>{d.value=!1,F.value=["root"],T.value=!1,I.value=!1,C.value=[],b.value=[]};g({open:()=>{d.value=!0},close:$});const k=y(),O=y(!1),F=y(["root"]),S=({option:i})=>G("div",{className:i.keys==="root"?"font-extrabold w-full":"flex justify-between w-full"},G("div",{className:"flex justify-between items-center gap-1 w-full"},[G("span",i.label)])),L=(i,c,r)=>{k.value=r.action==="unselect"||r==null?void 0:r.node},B=i=>{F.value=i},T=y(!1),I=y(!1),v=y(!1),b=y(),E=async()=>{var r,t;if(v.value)return;v.value=!0;const[i,c]=await je({device_group_name:a.query.device_group_name,exp_folder_id:(r=u.curNode)==null?void 0:r.exp_folder_id,limit:999999999,before_exp_id:null,space_id:a.query.space_id});v.value=!1,!i&&(c==null?void 0:c.status)===0&&(b.value=c.data.list,I.value&&(C.value=(t=c.data.list)==null?void 0:t.map(_=>_.exp_id)))};pe(I,i=>{var c,r;i&&(T.value=!0),i&&J(b.value)&&E(),i&&!J(b)&&(C.value=(c=b.value)==null?void 0:c.map(t=>t.exp_id)),!i&&T.value&&(C.value=(r=u.curExpList)==null?void 0:r.map(t=>t.exp_id)),!i&&!T.value&&(C.value=[])}),pe(T,i=>{var c,r;i&&I.value&&(C.value=(c=b.value)==null?void 0:c.map(t=>t.exp_id)),i&&!I.value&&(C.value=u.curExpList.map(t=>t.exp_id)),!i&&I.value&&(C.value=(r=b.value)==null?void 0:r.map(t=>t.exp_id)),!i&&!I.value&&(C.value=[])}),pe(d,i=>{i||$()});const j=H(()=>I.value?b.value:(T.value,u.curExpList)),C=y(),N=async()=>{var r;const[i,c]=await Nt({sub_process_ids:C.value||[],target_exp_folder_id:(r=k.value)==null?void 0:r.exp_folder_id,space_id:a.query.space_id});!i&&(c==null?void 0:c.status)===0&&($(),u.refreshExpList=!0)},l=H(()=>{const i=JSON.parse(JSON.stringify(u.tree||[]));return He(i),i});return(i,c)=>{const r=Rt,t=Fe,_=jt,w=Oe,M=De,A=ge,Y=at,oe=Ee;return m(),q(oe,{show:e(d),"onUpdate:show":c[3]||(c[3]=z=>re(d)?d.value=z:null),"auto-focus":!1},{default:s(()=>[o(Ce,{style:{width:"1000px"}},{default:s(()=>[o(Ne,null,{default:s(()=>[h(f(e(p)("groupDetail.exps.batchMove")),1)]),_:1}),o($e,null,{default:s(()=>[x("div",po,[x("div",_o,[x("div",null,[o(r,{checked:e(T),"onUpdate:checked":c[0]||(c[0]=z=>re(T)?T.value=z:null)},{default:s(()=>[h(f(e(p)("groupDetail.exps.selectedCurPage")),1)]),_:1},8,["checked"]),o(r,{checked:e(I),"onUpdate:checked":c[1]||(c[1]=z=>re(I)?I.value=z:null)},{default:s(()=>[h(f(e(p)("groupDetail.exps.selectedAllExps")),1)]),_:1},8,["checked"])]),x("div",{style:P({backgroundColor:e(n).baseColor}),class:"rounded-xl p-2"},[o(M,{show:e(v)},{default:s(()=>[o(w,{style:{height:"calc(100vh - 350px)"}},{default:s(()=>[o(_,{value:e(C),"onUpdate:value":c[2]||(c[2]=z=>re(C)?C.value=z:null)},{default:s(()=>[(m(!0),D(xe,null,ve(e(j),z=>(m(),D("div",{key:z.exp_id},[o(r,{value:z.exp_id},{default:s(()=>[o(t,{"line-clamp":1},{default:s(()=>[h(f(z.exp_id)+" "+f(z.description),1)]),_:2},1024)]),_:2},1032,["value"])]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["show"])],4)]),x("div",fo,[o(A,{disabled:e(J)(e(k)),type:"primary",onClick:N},{icon:s(()=>[o(e(ro))]),_:1},8,["disabled"])]),x("div",mo,[x("div",null,f(e(p)("groupDetail.exps.selecteTargetFolder")),1),x("div",{style:P({backgroundColor:e(n).baseColor}),class:"rounded-xl p-2"},[o(w,{style:{height:"calc(100vh - 350px)"}},{default:s(()=>[o(Y,{"block-line":"","show-line":"",selectable:"",disabled:e(O),"render-label":S,"expanded-keys":e(F),data:e(l),onUpdateExpandedKeys:B,"onUpdate:selectedKeys":L},null,8,["disabled","expanded-keys","data"])]),_:1})],4)])])]),_:1}),o(Me,{onCancel:$})]),_:1})]),_:1},8,["show"])}}}),vo={key:0},go={key:1},mt=K({__name:"FolderEdit",props:{type:{}},setup(R,{expose:g}){const a=R,n=X(),p=ie(),{t:d}=te(),u=y(!1),$=y(),k=y({exp_folder_name:void 0,exp_folder_description:void 0,exp_folder_id:void 0}),O={exp_folder_name:{required:!0,message:d("groupDetail.exps.folderNameTips"),trigger:"blur"}},F=y(!1),S=b=>{b||L()},L=()=>{F.value=!1,k.value={exp_folder_description:void 0,exp_folder_name:void 0,exp_folder_id:void 0}},B=async()=>{var b;u.value||(u.value=!0,(b=$.value)==null||b.validate(async E=>{var N;if(E){u.value=!1;return}const[j,C]=await $t({...k.value,parent_exp_folder_id:(N=n.curNode)==null?void 0:N.exp_folder_id,space_id:p.query.space_id});u.value=!1,!j&&(C==null?void 0:C.status)===0&&(L(),n.refreshExpFolderTree=!0)}))},T=async()=>{var b;u.value||(u.value=!0,(b=$.value)==null||b.validate(async E=>{if(E||!k.value.exp_folder_id){u.value=!1;return}const[j,C]=await Dt({exp_folder_id:k.value.exp_folder_id,new_exp_folder_name:k.value.exp_folder_name||"",new_exp_folder_description:k.value.exp_folder_description||""});u.value=!1,!j&&(C==null?void 0:C.status)===0&&(L(),n.refreshExpFolderTree=!0)}))},I=()=>{a.type==="create"?B():T()},v=H(()=>{var b;return Ge(n.tree||[],((b=n.curNode)==null?void 0:b.exp_folder_id)||null)});return g({open:()=>F.value=!0,close:L,setData:(b={})=>k.value={...k.value||{},...b}}),(b,E)=>{const j=ae,C=ut,N=dt,l=Je,i=Ye,c=We,r=ge,t=Ee;return m(),q(t,{show:e(F),"onUpdate:show":E[2]||(E[2]=_=>re(F)?F.value=_:null),"on-update:show":S,"auto-focus":!1},{default:s(()=>[o(Ce,{style:{width:"800px"}},{default:s(()=>[o(Ne,null,{default:s(()=>[b.type==="create"?(m(),D("span",vo,f(e(d)("groupDetail.exps.newFolder")),1)):(m(),D("span",go,f(e(d)("groupDetail.exps.rename")),1))]),_:1}),o($e,null,{default:s(()=>[o(c,{ref_key:"formRef",ref:$,model:e(k),rules:O},{default:s(()=>[o(l,{label:e(d)("groupDetail.exps.targetPath")},{default:s(()=>[o(N,null,{default:s(()=>[(m(!0),D(xe,null,ve(e(v),(_,w)=>(m(),q(C,{clickable:!1,separator:">",key:_.exp_folder_id},{default:s(()=>[w===0?(m(),q(j,{key:0,component:e(it)},null,8,["component"])):(m(),q(j,{key:1,component:e(ct)},null,8,["component"])),h(" "+f(_.exp_folder_name),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["label"]),o(l,{label:e(d)("groupDetail.exps.folderName"),path:"exp_folder_name"},{default:s(()=>[o(i,{value:e(k).exp_folder_name,"onUpdate:value":E[0]||(E[0]=_=>e(k).exp_folder_name=_)},null,8,["value"])]),_:1},8,["label"]),o(l,{label:e(d)("groupDetail.exps.folderDesc"),path:"description"},{default:s(()=>[o(i,{type:"textarea",value:e(k).exp_folder_description,"onUpdate:value":E[1]||(E[1]=_=>e(k).exp_folder_description=_)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),o(Me,{onCancel:L},{default:s(()=>[o(r,{type:"primary",onClick:I,loading:e(u)},{default:s(()=>[h(f(e(d)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),ho={class:"flex justify-between items-center"},yo={class:"flex gap-2 items-center"},bo={class:"flex items-center gap-2"},ko=K({__name:"ExpTitleBar",setup(R){const g=X(),{t:a}=te(),n=ie(),p=Xe(),d=H(()=>{var v;return Ge(g.tree||[],((v=g.curNode)==null?void 0:v.exp_folder_id)||null)}),u=({exp_folder_id:v},b)=>{if(!b)return;const E=Bt(n.query,"fid");v&&(E.fid=v),g.curNode=void 0,g.loadingCurNode=!0,g.curExpList=[],g.curExpNode=void 0,g.curFolderNode=void 0,ne(()=>{p.push({name:"exps",query:E}).then(()=>{g.curNode={exp_folder_id:v}})})},$=y(),k=()=>{var v;(v=$.value)==null||v.open()},O=y(),F=y(),S=()=>{var v;(v=O.value)==null||v.open()},L=()=>{var v;(v=F.value)==null||v.open()},B=H(()=>!J(g.curExpList)),T=H(()=>d.value&&d.value.length<=1),I=()=>{d.value&&d.value.length>1?u(d.value[d.value.length-2],!0):p.push({name:"taskList",query:{device_group_name:n.query.device_group_name}})};return(v,b)=>{var i;const E=ae,j=ge,C=he,N=ut,l=dt;return m(),D("div",null,[x("div",ho,[x("div",yo,[o(j,{size:"tiny",secondary:"",type:"primary",onClick:I,disabled:e(T)},{default:s(()=>[o(E,{component:e(eo)},null,8,["component"])]),_:1},8,["disabled"]),o(C,{vertical:""}),o(l,null,{default:s(()=>[(m(!0),D(xe,null,ve(e(d),(c,r)=>(m(),q(N,{clickable:r<=e(d).length-1,onClick:()=>u(c,r<e(d).length-1),separator:">",key:c.exp_folder_id},{default:s(()=>[r===0?(m(),q(E,{key:0,component:e(it)},null,8,["component"])):(m(),q(E,{key:1,component:e(ct)},null,8,["component"])),h(" "+f(c.exp_folder_name),1)]),_:2},1032,["clickable","onClick"]))),128))]),_:1})]),x("div",bo,[o(j,{type:"primary",onClick:L,disabled:!e(B)},{icon:s(()=>[o(e(io))]),default:s(()=>[h(" "+f(e(a)("groupDetail.exps.move")),1)]),_:1},8,["disabled"]),o(j,{type:"primary",onClick:k},{icon:s(()=>[o(e(qt))]),default:s(()=>[h(" "+f(e(a)("groupDetail.exps.newFolder")),1)]),_:1}),o(j,{type:"primary",onClick:S},{icon:s(()=>[o(e(zt))]),default:s(()=>[h(" "+f(e(a)("groupDetail.exps.createFromTemplate")),1)]),_:1})])]),o(C,{class:"!mt-5 !mb-2"}),o(mt,{type:"create",ref_key:"folderEditRef",ref:$},null,512),o(Ft,{ref_key:"expsTplRef",ref:O,fid:((i=e(g).curNode)==null?void 0:i.exp_folder_id)||"root"},null,8,["fid"]),o(xo,{ref_key:"batchModalRef",ref:F},null,512)])}}}),wo={class:"flex-1 min-h-[300px]"},Eo=K({__name:"FolderMove",setup(R,{expose:g}){const a=y(),n=me(),{t:p}=te(),d=y(!1),u=X(),$=()=>{d.value=!1,F.value=["root"]};g({open:()=>{d.value=!0},close:$,setData:v=>{a.value=v.id}});const k=y(),O=y(!1),F=y(["root"]),S=({option:v})=>G("div",{className:v.keys==="root"?"font-extrabold w-full":"flex justify-between w-full"},G("div",{className:"flex justify-between items-center gap-1 w-full"},[G("span",v.label)])),L=(v,b,E)=>{k.value=E.action==="unselect"||E==null?void 0:E.node},B=v=>{F.value=v};pe(d,v=>{v||$()});const T=async()=>{const[v,b]=await Mt({exp_folder_id:a.value,target_parent_exp_folder_id:k.value.exp_folder_id});!v&&(b==null?void 0:b.status)===0&&($(),ne(()=>{u.refreshExpFolderTree=!0}))},I=H(()=>{const v=JSON.parse(JSON.stringify(u.tree||[]));return He(v),v});return(v,b)=>{const E=yt,j=at,C=Oe,N=ge,l=Ee;return m(),q(l,{show:e(d),"onUpdate:show":b[0]||(b[0]=i=>re(d)?d.value=i:null),"auto-focus":!1},{default:s(()=>[o(Ce,{style:{width:"500px"}},{default:s(()=>[o(Ne,null,{default:s(()=>[h(f(e(p)("groupDetail.exps.moveFolder")),1)]),_:1}),o($e,null,{default:s(()=>[x("div",wo,[o(E,{type:"info",class:"mb-2"},{default:s(()=>[h(f(e(p)("groupDetail.exps.selecteTargetFolder")),1)]),_:1}),x("div",{style:P({backgroundColor:e(n).baseColor}),class:"rounded-xl p-2"},[o(C,{style:{"max-height":"400px"}},{default:s(()=>[o(j,{"block-line":"","show-line":"",selectable:"",disabled:e(O),"render-label":S,"expanded-keys":e(F),data:e(I),onUpdateExpandedKeys:B,"onUpdate:selectedKeys":L},null,8,["disabled","expanded-keys","data"])]),_:1})],4)])]),_:1}),o(Me,{onCancel:$},{default:s(()=>[o(N,{disabled:e(J)(e(k)),type:"primary",onClick:T},{default:s(()=>[h(f(e(p)("common.OK")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),Co={class:"folder-icon"},No=K({__name:"FolderItem",props:{count:{}},setup(R){return(g,a)=>(m(),D("div",Co))}}),$o=ce(No,[["__scopeId","data-v-98d54097"]]),Do=["onDblclick","onClick","onContextmenu"],Fo=K({__name:"ExpFolders",setup(R){Qe(r=>({"428b48e7":e(a).cardColor}));const{t:g}=te(),a=me(),n=X(),p=Xe(),d=ie(),u=y(!1),$=async()=>{var w;if(u.value||(u.value=!0,!d.query.device_group_name))return;const[t,_]=await St({space_id:+(((w=d.query)==null?void 0:w.space_id)||""),include_experiments:!1});u.value=!1,!t&&_&&_.status===0&&(Array.isArray(_.data.folder_tree)||(_.data.folder_tree=[_.data.folder_tree]),n.tree=_.data.folder_tree,n.refreshExpFolderTree&&(n.refreshExpFolderTree=!1),d.query.fid&&ne(()=>{n.curNode=Ae(n.tree||[],+(d.query.fid||""),"exp_folder_id")}))};Te(()=>{$()}),pe(()=>n.refreshExpFolderTree,r=>{r&&$()});const k=H(()=>{var r,t;return(t=Ae(n.tree||[],(r=n.curNode)==null?void 0:r.exp_folder_id,"exp_folder_id"))==null?void 0:t.children}),O=r=>{n.curNode=void 0,n.loadingCurNode=!0,n.curExpList=[],n.curExpNode=void 0,n.curFolderNode=void 0,ne(()=>{p.push({name:"exps",query:{...d.query,fid:r.exp_folder_id}}).then(()=>{n.curNode=r})})},F=H(()=>J(k.value)&&J(n.curExpList)),S=r=>()=>G(ae,null,{default:()=>G(r)}),L=[{label:g("groupDetail.exps.delete"),key:"delete",icon:S(Ut)},{label:g("groupDetail.exps.rename"),key:"rename",icon:S(uo)},{label:g("groupDetail.exps.moveFolder"),key:"move",icon:S(so)}],B=y(),T=y(!1),I=y(),v=y(),b=async()=>{var r,t;if((r=v.value)!=null&&r.exp_folder_id){const[_,w]=await Lt({exp_folder_id:v.value.exp_folder_id});!_&&(w==null?void 0:w.status)===0&&((t=I.value)==null||t.close(),v.value=void 0,n.refreshExpFolderTree=!0)}},E=(r,t)=>{r.preventDefault(),v.value=t,B.value={x:r.clientX,y:r.clientY},T.value=!0},j=()=>{T.value=!1,B.value=void 0},C=y(),N=y(),l=r=>{var t,_,w,M,A;r==="delete"?(t=I.value)==null||t.open():r=="rename"?((_=C.value)==null||_.open(),(w=C.value)==null||w.setData({exp_folder_id:v.value.exp_folder_id,exp_folder_name:v.value.exp_folder_name,exp_folder_description:v.value.exp_folder_description})):r==="move"&&((M=N.value)==null||M.open(),(A=N.value)==null||A.setData({id:v.value.exp_folder_id}))},i=r=>{r||(v.value=void 0)},c=r=>{n.curFolderNode=r,n.curExpNode=void 0};return(r,t)=>{var oe,z;const _=Ze,w=Fe,M=et,A=ot,Y=nt;return m(),D("div",null,[e(F)?(m(),q(_,{key:0,class:"mt-40"})):V("",!0),o(A,{"x-gap":16,"y-gap":16,cols:"6 1200:8 1600:8",class:"mb-4"},{default:s(()=>[(m(!0),D(xe,null,ve(e(k),W=>(m(),q(M,{key:W.exp_folder_id,class:"rounded cursor-pointer"},{default:s(()=>[x("div",{class:"flex justify-center flex-col items-center exp-folder-card",onDblclick:()=>O(W),onClick:()=>c(W),onContextmenu:tt(le=>E(le,W),["prevent"])},[o($o,{count:W.experiment_count},null,8,["count"]),x("div",null,[o(w,{"line-clamp":1,class:"!text-center"},{default:s(()=>[h(f(W.exp_folder_name),1)]),_:2},1024)])],40,Do)]),_:2},1024))),128))]),_:1}),o(mt,{type:"edit",ref_key:"folderEditRef",ref:C},null,512),o(Eo,{ref_key:"folderMoveRef",ref:N},null,512),e(T)?(m(),q(Y,{key:1,placement:"bottom-start",show:!0,options:L,x:(oe=e(B))==null?void 0:oe.x,y:(z=e(B))==null?void 0:z.y,onClickoutside:j,onSelect:l},{default:s(()=>t[0]||(t[0]=[x("div",null,null,-1)])),_:1},8,["x","y"])):V("",!0),o(At,{ref_key:"confirmRef",ref:I,onOk:b,onChange:i},null,512)])}}}),Mo=ce(Fo,[["__scopeId","data-v-f45c2740"]]);var Ie,Ke;function So(){if(Ke)return Ie;Ke=1;var R="Expected a function",g=NaN,a="[object Symbol]",n=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,u=/^0o[0-7]+$/i,$=parseInt,k=typeof be=="object"&&be&&be.Object===Object&&be,O=typeof self=="object"&&self&&self.Object===Object&&self,F=k||O||Function("return this")(),S=Object.prototype,L=S.toString,B=Math.max,T=Math.min,I=function(){return F.Date.now()};function v(l,i,c){var r,t,_,w,M,A,Y=0,oe=!1,z=!1,W=!0;if(typeof l!="function")throw new TypeError(R);i=N(i)||0,E(c)&&(oe=!!c.leading,z="maxWait"in c,_=z?B(N(c.maxWait)||0,i):_,W="trailing"in c?!!c.trailing:W);function le(U){var se=r,fe=t;return r=t=void 0,Y=U,w=l.apply(fe,se),w}function Se(U){return Y=U,M=setTimeout(Q,i),oe?le(U):w}function ye(U){var se=U-A,fe=U-Y,qe=i-se;return z?T(qe,_-fe):qe}function _e(U){var se=U-A,fe=U-Y;return A===void 0||se>=i||se<0||z&&fe>=_}function Q(){var U=I();if(_e(U))return Be(U);M=setTimeout(Q,ye(U))}function Be(U){return M=void 0,W&&r?le(U):(r=t=void 0,w)}function xt(){M!==void 0&&clearTimeout(M),Y=0,r=A=t=M=void 0}function vt(){return M===void 0?w:Be(I())}function Le(){var U=I(),se=_e(U);if(r=arguments,t=this,A=U,se){if(M===void 0)return Se(A);if(z)return M=setTimeout(Q,i),le(A)}return M===void 0&&(M=setTimeout(Q,i)),w}return Le.cancel=xt,Le.flush=vt,Le}function b(l,i,c){var r=!0,t=!0;if(typeof l!="function")throw new TypeError(R);return E(c)&&(r="leading"in c?!!c.leading:r,t="trailing"in c?!!c.trailing:t),v(l,i,{leading:r,maxWait:i,trailing:t})}function E(l){var i=typeof l;return!!l&&(i=="object"||i=="function")}function j(l){return!!l&&typeof l=="object"}function C(l){return typeof l=="symbol"||j(l)&&L.call(l)==a}function N(l){if(typeof l=="number")return l;if(C(l))return g;if(E(l)){var i=typeof l.valueOf=="function"?l.valueOf():l;l=E(i)?i+"":i}if(typeof l!="string")return l===0?l:+l;l=l.replace(n,"");var c=d.test(l);return c||u.test(l)?$(l.slice(2),c?2:8):p.test(l)?g:+l}return Ie=b,Ie}var Lo=So();const Io=bt(Lo),To={key:0,class:"absolute right-1 top-0.5 z-10"},Ro={key:1,class:"file-triangle"},jo={class:"flex justify-center absolute left-[2px] top-[2px] rounded z-10"},Oo={class:"file-title"},Bo=["src"],qo={key:3,class:"mt-10 text-center opacity-40"},zo={key:4,class:"absolute text-center whitespace-pre-line file-text flex flex-col gap-1 items-center opacity-40 text-xs"},Ao={key:5,class:"absolute right-1 bottom-2 !w-5 !h-5 rounded-full"},Uo={class:"mt-1 text-xs text-center"},Vo=K({__name:"ExpFile",props:{exp:{}},setup(R){Qe(t=>({"40f5fad8":e(d).cardColor,c531cada:e(de)[t.exp.status].color}));const g={STOP:"stop",FAVORITY:"favority"},a=R,n=kt(),p=X(),d=me(),{t:u}=te(),$=ie(),k=H(()=>{const t=Re(a==null?void 0:a.exp.progress,!1);if(t==="0%")return 0;const[_,w]=t==null?void 0:t.split("/");return+w==0?0:+_/+w}),O=H(()=>[Z.SERVICE_QUEUING,Z.RUNNING,Z.HOST_DOWNLOADED].includes(a.exp.status)),F=()=>{p.curFolderNode=void 0,p.curExpNode=a.exp},S=t=>()=>G(ae,null,{default:()=>G(t)}),L=y(!1),B=H(()=>_t([{label:u("groupDetail.exps.stop"),key:"stop",icon:S(It),disabled:![Z.SERVICE_QUEUING,Z.RUNNING,Z.HOST_DOWNLOADED].includes(a.exp.status)},{label:u("expInfo.duplicate"),key:"duplicate",icon:S(Ot),props:{onClick:t=>b({dup:"1"},t)}},{label:u("groupDetail.exps.preview"),key:"preview",icon:S(oo),props:{onClick:t=>b({},t)}},a.exp.is_marked?{label:u("groupDetail.exps.unfavority"),key:"favority",icon:S(Wt)}:{label:u("groupDetail.exps.favority"),key:"favority",icon:S(ue)}])),T=y(),I=t=>{t.preventDefault(),T.value={x:t.clientX+5,y:t.clientY+5},L.value=!0},v=()=>{L.value=!1,T.value=void 0},b=(t={},_)=>{var M;const w=new URLSearchParams({device_group_name:$.query.device_group_name,space_id:$.query.space_id,exp_id:String(a.exp.exp_id),...t,fid:String(((M=p.curNode)==null?void 0:M.exp_folder_id)||"root")});window.open(`/experiment/expSettings?${w.toString()}`,wt(_))},E=y(!1),j=async()=>{E.value=!0;const[t,_]=await Vt({exp_id:a.exp.exp_id});E.value=!1,!t&&(_==null?void 0:_.status)===0&&(n.success(u("groupDetail.exps.stopSuccess")),p.refreshExpList=!0)},C=async()=>{const[t,_]=await Tt({exp_id:a.exp.exp_id,is_marked:!a.exp.is_marked,mark_note:l.value.mark_note});!t&&(_==null?void 0:_.status)===0&&(p.refreshExpList=!0,c())},N=t=>{t===g.STOP?j():t===g.FAVORITY&&(a.exp.is_marked?C():i.value=!0),v()},l=y({mark_note:void 0}),i=y(!1),c=()=>{i.value=!1,l.value={mark_note:void 0}},r=t=>{t||c()};return(t,_)=>{const w=pt,M=Fe,A=nt,Y=Ye,oe=Je,z=We,W=ge,le=Ee,Se=De;return m(),q(Se,{show:e(E)},{default:s(()=>{var ye,_e;return[x("div",{class:"flex items-center flex-col file-wraper px-0 py-4 rounded-xl box-border",onClick:F,onDblclick:_[0]||(_[0]=Q=>b({},Q)),onContextmenu:tt(I,["prevent"])},[x("div",{class:"rounded file-card shadow-2xl relative",style:P({borderColor:e(d).dividerColor,backgroundColor:e(d).cardColor})},[t.exp.is_marked?(m(),D("div",To,[o(e(ae),{component:e(ue),color:"#fadb14",size:"16"},null,8,["component"])])):(m(),D("div",Ro,_[3]||(_[3]=[x("div",null,null,-1)]))),x("div",jo,[x("div",Oo,"#"+f(t.exp.exp_id),1)]),t.exp.img?(m(),D("img",{key:2,src:t.exp.img,class:"w-[120px] h-[120px] absolute top-0 left-0",alt:""},null,8,Bo)):t.exp.img===void 0?(m(),D("div",qo,f(e(u)("common.loading")),1)):t.exp.img===null?(m(),D("div",zo,[o(e(ae),{component:e(ft),size:"30"},null,8,["component"]),h(" "+f(e(u)("groupDetail.exps.expNoResult")),1)])):V("",!0),x("div",{class:"text-center absolute bottom-0 w-full left-0 text-xs",style:P({background:"rgba(255, 255, 255, 0.5 )",borderBottom:`4px solid ${e(de)[t.exp.status].color}`})},[x("div",{style:P({background:`rgba(255, 255, 255, ${e(k)} )`}),class:"h-full opacity-60"},null,4)],4),e(k)!==1?(m(),D("div",Ao,[o(w,{type:"circle",processing:e(O),percentage:e(k)*100,"show-indicator":!1,class:"!w-5 !h-5","stroke-width":16},null,8,["processing","percentage"])])):V("",!0)],4),x("div",Uo,[o(M,{"line-clamp":2},{default:s(()=>[h(f(t.exp.title),1)]),_:1})]),e(L)?(m(),q(A,{key:0,placement:"bottom-start",show:!0,options:e(B),x:(ye=e(T))==null?void 0:ye.x,y:(_e=e(T))==null?void 0:_e.y,onClickoutside:v,onSelect:N},{default:s(()=>_[4]||(_[4]=[x("div",null,null,-1)])),_:1},8,["options","x","y"])):V("",!0)],32),o(le,{show:e(i),"onUpdate:show":_[2]||(_[2]=Q=>re(i)?i.value=Q:null),onUpdateShow:r,"auto-focus":!1},{default:s(()=>[o(Ce,{style:{width:"500px"}},{default:s(()=>[o(Ne,null,{default:s(()=>[h(f(e(u)("groupDetail.exps.favorityTitle"))+" Exp-"+f(t.exp.exp_id)+" :: ",1),x("span",null,'"'+f(t.exp.title)+'"',1)]),_:1}),o($e,null,{default:s(()=>[o(z,{ref:"formRef",model:e(l)},{default:s(()=>[o(oe,{label:e(u)("groupDetail.exps.favorityNote"),path:"exp_folder_name"},{default:s(()=>[o(Y,{type:"textarea",value:e(l).mark_note,"onUpdate:value":_[1]||(_[1]=Q=>e(l).mark_note=Q)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),o(Me,{onCancel:c},{default:s(()=>[o(W,{type:"primary",onClick:C,loading:e(E)},{default:s(()=>[h(f(e(u)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"])]}),_:1},8,["show"])}}}),Ko=ce(Vo,[["__scopeId","data-v-b8bc3392"]]),Po=K({__name:"ExpFiles",setup(R,{expose:g}){const a=st({per_page:48,total:0}),n=ie(),p=X(),d=Ht(),u=y(!1),$=y({}),k=y([]),O=y(!1),F=N=>[Z.COMPLETE,Z.ERROR,Z.CANCELED,Z.HOST_DOWNLOADED].includes(N),S=async(N,l)=>{var r;const[i,c]=await Kt({exp_ids:N,group_name:n.query.device_group_name,create_timestamps:l,org_id:(r=d.groupInfo)==null?void 0:r.organization_id});!i&&(c==null?void 0:c.status)===0&&Ct(c.data,(t,_)=>{var M;const w=(M=p.curExpList)==null?void 0:M.find(A=>_===String(A.exp_id));w&&(F(w==null?void 0:w.status)?(w.img=t,$.value={...$.value,[_]:t||null}):k.value.push({exp_id:_,create_timestamp:w.create_timestamp}))})},L=async()=>{var N,l,i,c;J(k.value)||(await S((l=(N=k.value)==null?void 0:N.map(r=>r.exp_id))==null?void 0:l.join(","),(c=(i=k.value)==null?void 0:i.map(r=>r.create_timestamp))==null?void 0:c.join(",")),ne(()=>{E()}))},B=async()=>{var i;const[N,l]=await je({device_group_name:n.query.device_group_name,exp_folder_id:(i=p.curNode)==null?void 0:i.exp_folder_id,limit:a.per_page,before_exp_id:null,space_id:n.query.space_id});if(!N&&(l==null?void 0:l.status)===0){const c=JSON.parse(JSON.stringify(p.curExpList));l.data.list.reverse().forEach(r=>{const t=c.findIndex(_=>_.exp_id===r.exp_id);t<0?c.unshift(r):c.splice(t,1,{...r,img:c[t].img})}),p.curExpList=c,p.curExpCounts=l.data.count,ne(()=>{var _,w;const r=p.curExpList.find(M=>{var A;return M.exp_id==((A=p.curExpNode)==null?void 0:A.exp_id)});r&&(p.curExpNode=r);const t=b(l.data.list||[]);J(t)||S((_=t==null?void 0:t.map(M=>M.exp_id))==null?void 0:_.join(","),(w=t==null?void 0:t.map(M=>M.create_timestamp))==null?void 0:w.join(","))})}},{start:T,stop:I,runing:v}=Gt(()=>{L(),B()},{delay:!0,isManual:!0});Te(()=>{v.value?I():T()}),Et(()=>{I()});const b=N=>_t(N.map(l=>$.value[l.exp_id]===void 0?l:void 0)),E=()=>{const N=[];k.value.forEach(l=>{$.value[l.exp_id]===void 0&&N.push(l)}),k.value=N},j=async()=>{var c,r;if(u.value)return;u.value=!0;const N=p.curExpList,[l,i]=await je({device_group_name:n.query.device_group_name,exp_folder_id:(c=p.curNode)==null?void 0:c.exp_folder_id,limit:a.per_page,before_exp_id:((r=N[N.length-1])==null?void 0:r.exp_id)||null,space_id:n.query.space_id});u.value=!1,p.loadingCurNode&&(p.loadingCurNode=!1),!l&&(i==null?void 0:i.status)===0&&(ne(()=>{var _,w;const t=b(i.data.list||[]);J(t)||S((_=t==null?void 0:t.map(M=>M.exp_id))==null?void 0:_.join(","),(w=t==null?void 0:t.map(M=>M.create_timestamp))==null?void 0:w.join(","))}),p.curExpList=Jt([...p.curExpList||[],...i.data.list],"exp_id"),a.total=i.data.count,p.curExpCounts=i.data.count,ne(()=>{var t;O.value=a.total===((t=p.curExpList)==null?void 0:t.length)}),p.refreshExpList&&(p.refreshExpList=!1))};Te(()=>{a.total=0,p.curExpCounts=0,p.curExpList=[],$.value={},k.value=[],n.query.fid&&(p.curNode={exp_folder_id:+n.query.fid}),ne(()=>{j()})}),pe(()=>p.refreshExpList,N=>{N&&(p.curExpList=[],$.value={},j())},{immediate:!0});const C=Io(()=>{O.value||j()},500);return g({loadMore:C}),(N,l)=>{const i=et,c=ot;return m(),q(c,{class:"!max-[1600px]","x-gap":"8",cols:"6 1200:8 1600:8"},{default:s(()=>[(m(!0),D(xe,null,ve(e(p).curExpList,r=>(m(),q(i,{key:r.exp_id},{default:s(()=>[o(Ko,{exp:r},null,8,["exp"])]),_:2},1024))),128))]),_:1})}}}),Ho={key:0,class:"flex items-center flex-col w-full"},Go={key:0,class:"relative flex-none"},Wo=["src"],Jo={key:0,class:"absolute right-1 top-6 z-10"},Yo={class:"flex justify-center absolute left-[2px] top-[2px] rounded z-10"},Xo={class:"file-title"},Qo={key:0,class:"absolute right-1 top-1 z-10"},Zo={key:1,class:"file-triangle",style:{background:"rgba(255, 255, 255, 0.25)"}},en={key:2,class:"absolute right-1 bottom-2 !w-5 !h-5 rounded-full"},tn={class:"inline-flex flex-col items-center gap-1 opacity-40"},on={class:"flex justify-center absolute left-[2px] top-[2px] rounded z-10"},nn={class:"file-title"},sn={key:0,class:"absolute right-1 top-1 z-10"},ln={key:2,class:"absolute right-1 bottom-2 !w-5 !h-5 rounded-full"},rn={class:"opacity-40"},an={class:"text-lg font-bold w-full"},cn={class:"mt-4 opacity-70 text-xs text-left w-full"},dn={class:"w-full flex flex-col"},un={class:"break-all inline-block whitespace-pre-line"},pn={class:"text-xs opacity-70 min-w-18 flex items-center gap-1"},_n={class:"italic"},fn={class:"text-xs"},mn=K({__name:"ExpInfo",setup(R){const g=ie(),a=X(),{curExpNode:n}=lt(a),p=me(),{t:d}=te(),u=y(),$=st({}),k=async F=>{if($[String(F.exp_id)]){Ve([$[String(F.exp_id)]],0);return}u.value=F.exp_id;const[S,L]=await Pt({exp_id:F.exp_id,device_group_name:g.query.device_group_name,space_id:g.query.space_id});u.value=void 0,!S&&(L==null?void 0:L.status)===0&&(Ve([L.data.big_picture_url],0),$[String(F.exp_id)]=L.data.big_picture_url)},O=H(()=>{if(!n.value)return 0;const F=Re(n.value.progress,!1);if(F==="0%")return 0;const[S,L]=F==null?void 0:F.split("/");return+L==0?0:+S/+L});return(F,S)=>{var j,C,N;const L=De,B=ae,T=pt,I=he,v=rt,b=Fe,E=Oe;return e(n)?(m(),D("div",Ho,[e(n).img?(m(),D("div",Go,[o(L,{show:e(u)===e(n).exp_id},{default:s(()=>[x("img",{class:"w-[160px] h-[160px] my-5 cursor-pointer",src:e(n).img,alt:"",onClick:S[0]||(S[0]=()=>k(e(n)))},null,8,Wo)]),_:1},8,["show"]),(j=e(n))!=null&&j.is_marked?(m(),D("div",Jo,[o(B,{component:e(ue),color:"#fadb14",size:"20"},null,8,["component"])])):V("",!0)])):e(n).img===null?(m(),D("div",{key:1,class:"!w-[160px] file-card relative shadow-2xl flex-none whitespace-pre-line !h-[160px] my-5 rounded text-center leading-4 text-xs flex items-center justify-center text-white",style:P({borderColor:e(p).dividerColor,backgroundColor:e(p).cardColor})},[x("div",Yo,[x("div",Xo,"#"+f(e(n).exp_id),1)]),(C=e(n))!=null&&C.is_marked?(m(),D("div",Qo,[o(B,{component:e(ue),color:"#fadb14",size:"20"},null,8,["component"])])):(m(),D("div",Zo)),x("div",{class:"text-center absolute bottom-0 w-full left-0 text-xs",style:P({background:"rgba(255, 255, 255, 0.5 )",borderBottom:`4px solid ${e(de)[e(n).status].color}`})},[x("div",{style:P({background:`rgba(255, 255, 255, ${e(O)} )`}),class:"h-full opacity-60"},null,4)],4),e(O)!==1?(m(),D("div",en,[o(T,{type:"circle",percentage:e(O)*100,"show-indicator":!1,class:"!w-5 !h-5","stroke-width":16},null,8,["percentage"])])):V("",!0),x("span",tn,[o(B,{component:e(ft),size:"40"},null,8,["component"]),h(" "+f(e(d)("groupDetail.exps.expNoResult")),1)])],4)):(m(),D("div",{key:2,class:"!w-[160px] flex-none file-card relative shadow-2xl whitespace-pre-line !h-[160px] my-5 rounded text-center leading-4 text-xs flex items-center justify-center text-white",style:P({borderColor:e(p).dividerColor,backgroundColor:e(p).cardColor})},[x("div",on,[x("div",nn,"#"+f(e(n).exp_id),1)]),(N=e(n))!=null&&N.is_marked?(m(),D("div",sn,[o(B,{component:e(ue),color:"#fadb14",size:"20"},null,8,["component"])])):(m(),D("div",{key:1,class:"file-triangle",style:P({background:e(n).is_marked?"#fadb14":"rgba(255, 255, 255, 0.25)"})},null,4)),x("div",{class:"text-center absolute bottom-0 w-full left-0 text-xs",style:P({background:"rgba(255, 255, 255, 0.5 )",borderBottom:`4px solid ${e(de)[e(n).status].color}`})},[x("div",{style:P({background:`rgba(255, 255, 255, ${e(O)} )`}),class:"h-full opacity-60"},null,4)],4),e(O)!==1?(m(),D("div",ln,[o(T,{type:"circle",percentage:e(O)*100,"show-indicator":!1,class:"!w-5 !h-5","stroke-width":16},null,8,["percentage"])])):V("",!0),x("span",rn,f(e(d)("common.loading")),1)],4)),x("div",an,[x("span",null," Exp "+f(e(n).exp_id)+"  -  ",1),x("span",null,f(e(n).title),1)]),x("div",cn,f(e(n).description),1),o(I),o(E,{style:{"max-height":"calc(100vh - 300px)"}},{default:s(()=>[x("div",dn,[o(ee,null,{label:s(()=>[h(f(e(d)("groupDetail.exps.status")),1)]),default:s(()=>{var l;return[(l=e(n))!=null&&l.status?(m(),q(v,{key:0,color:{color:e(de)[e(n).status].color,textColor:"#fff"},bordered:!1,size:"small",class:"min-w-[150px] flex justify-center"},{default:s(()=>[h(f(e(d)(e(de)[e(n).status].text)),1)]),_:1},8,["color"])):V("",!0)]}),_:1}),o(ee,null,{label:s(()=>[h(f(e(d)("groupDetail.exps.progress")),1)]),default:s(()=>[o(v,{size:"small",type:"info",class:"flex justify-center items-center min-w-[150px]"},{default:s(()=>{var l;return[h(f(e(Re)((l=e(n))==null?void 0:l.progress,!0)),1)]}),_:1})]),_:1}),o(ee,null,{label:s(()=>[h(f(e(d)("groupDetail.exps.source")),1)]),default:s(()=>[o(v,{size:"small",type:"info",class:"flex justify-center items-center min-w-[150px]"},{default:s(()=>{var l;return[h(f((l=e(n))==null?void 0:l.source),1)]}),_:1})]),_:1}),o(ee,null,{label:s(()=>[h(f(e(d)("groupDetail.exps.tpl")),1)]),default:s(()=>[o(v,{type:"warning",size:"small",class:"!break-all flex justify-center items-center min-w-[150px]"},{default:s(()=>{var l,i;return[x("span",un,f(((l=e(n))==null?void 0:l.template_name)==="-"?"No Template":(i=e(n))==null?void 0:i.template_name),1)]}),_:1})]),_:1}),o(ee,null,{label:s(()=>[h(f(e(d)("groupDetail.exps.createTime")),1)]),default:s(()=>{var l;return[h(" "+f((l=e(n))==null?void 0:l.create_time),1)]}),_:1}),o(ee,null,{label:s(()=>[h(f(e(d)("groupDetail.exps.creator")),1)]),default:s(()=>{var l;return[h(" "+f((l=e(n))==null?void 0:l.user_name),1)]}),_:1}),e(n).is_marked?(m(),D("div",{key:0,class:"flex justify-between items-center py-2 border-b",style:P({borderColor:e(p).dividerColor})},[x("div",pn,[o(B,{size:"18",color:"#fadb14",component:e(ue)},null,8,["component"]),x("span",_n,f(e(d)("groupDetail.exps.markNote")),1)]),x("div",fn,[o(b,{"line-clamp":2},{default:s(()=>[h(f(e(n).mark_note||"-"),1)]),_:1})])],4)):V("",!0)])]),_:1})])):V("",!0)}}}),xn=ce(mn,[["__scopeId","data-v-a9778ddd"]]),vn={key:0,class:"flex items-center flex-col w-full"},gn={class:"text-lg font-bold w-full text-center"},hn={key:0,class:"mt-4 opacity-70 text-xs text-left w-full"},yn={class:"w-full flex flex-col"},bn=K({__name:"FolderInfo",setup(R){const g=X(),{curFolderNode:a}=lt(g),{t:n}=te();return(p,d)=>{const u=he;return e(a)?(m(),D("div",vn,[d[0]||(d[0]=x("div",{class:"folder-icon"},null,-1)),x("div",gn,f(e(a).exp_folder_name),1),e(a).exp_folder_description?(m(),D("div",hn,f(e(a).exp_folder_description),1)):V("",!0),o(u),x("div",yn,[o(ee,null,{label:s(()=>[h(f(e(n)("groupDetail.exps.expFolderId")),1)]),default:s(()=>[h(" "+f(e(a).exp_folder_id),1)]),_:1}),o(ee,null,{label:s(()=>[h(f(e(n)("groupDetail.exps.createTime")),1)]),default:s(()=>[h(" "+f(e(we)(e(a).create_time)),1)]),_:1}),o(ee,null,{label:s(()=>[h(f(e(n)("groupDetail.exps.updateTime")),1)]),default:s(()=>[h(" "+f(e(we)(e(a).update_time)||"-"),1)]),_:1}),o(ee,null,{label:s(()=>[h(f(e(n)("groupDetail.exps.creator")),1)]),default:s(()=>[h(" "+f(e(a).create_user_name),1)]),_:1})])])):V("",!0)}}}),kn=ce(bn,[["__scopeId","data-v-1dcd9b41"]]),wn={},En={class:"flex items-center gap-1"},Cn={class:"opacity-70"};function Nn(R,g){return m(),D("div",En,[x("span",Cn,[Ue(R.$slots,"label"),g[0]||(g[0]=h(":  "))]),x("span",null,[Ue(R.$slots,"default")])])}const ke=ce(wn,[["render",Nn]]),$n={key:0},Dn={class:"flex justify-between items-center text-xs px-2"},Fn={class:"flex items-center gap-10"},Mn={key:0},Sn=K({__name:"InfoBar",setup(R){const g=X(),{t:a}=te(),n=H(()=>g.curNode);return(p,d)=>{const u=he,$=rt;return e(J)(e(n))?V("",!0):(m(),D("div",$n,[o(u,{class:"!mt-0 !mb-2"}),x("div",Dn,[x("div",Fn,[e(n).create_time?(m(),q(ke,{key:0},{label:s(()=>[h(f(e(a)("groupDetail.exps.createTime")),1)]),default:s(()=>[h(" "+f(e(we)(e(n).create_time)),1)]),_:1})):V("",!0),e(n).update_time?(m(),q(ke,{key:1},{label:s(()=>[h(f(e(a)("groupDetail.exps.updateTime")),1)]),default:s(()=>[h(" "+f(e(we)(e(n).update_time)),1)]),_:1})):V("",!0),e(n).create_user_name?(m(),q(ke,{key:2},{label:s(()=>[h(f(e(a)("groupDetail.exps.creator")),1)]),default:s(()=>[h(" "+f(e(n).create_user_name||"-"),1)]),_:1})):V("",!0)]),e(g).curExpCounts?(m(),D("div",Mn,[o(ke,null,{label:s(()=>[h(f(e(a)("groupDetail.exps.expCount")),1)]),default:s(()=>[o($,{type:"primary",round:"",size:"tiny"},{default:s(()=>[h(f(e(g).curExpCounts),1)]),_:1})]),_:1})])):V("",!0)])]))}}}),Ln={class:"flex"},In={class:"flex-1"},Tn={class:"flex w-[280px]",style:{height:"calc(100vh - 245px)"}},Rn={key:2,class:"w-full flex justify-center items-center"},jn=K({__name:"ExperimentList",setup(R){const{t:g}=te(),a=X(),n=y(),p=()=>{var u;(u=n.value)==null||u.loadMore()},d=H(()=>{var u;return J(a.curNode)||!((u=a==null?void 0:a.curNode)!=null&&u.exp_folder_id)});return(u,$)=>{const k=Yt,O=he,F=Ze,S=De;return m(),q(S,{show:e(a).loadingCurNode},{default:s(()=>[o(ko),x("div",Ln,[x("div",In,[o(k,{style:P({height:`calc(100vh - ${e(d)?245:268}px)`}),distance:50,onLoad:p},{default:s(()=>[o(Mo),o(Po,{ref_key:"expFilesRef",ref:n},null,512)]),_:1},8,["style"]),e(d)?V("",!0):(m(),q(Sn,{key:0}))]),x("div",Tn,[o(O,{vertical:"",class:"!h-full !mr-5 !ml-0"}),e(a).curExpNode?(m(),q(xn,{key:0})):e(a).curFolderNode?(m(),q(kn,{key:1})):(m(),D("div",Rn,[o(F,{description:e(g)("groupDetail.exps.expInfoEmpty")},null,8,["description"])]))])])]),_:1},8,["show"])}}}),ms=ce(jn,[["__scopeId","data-v-b3c7263a"]]);export{ms as default};
