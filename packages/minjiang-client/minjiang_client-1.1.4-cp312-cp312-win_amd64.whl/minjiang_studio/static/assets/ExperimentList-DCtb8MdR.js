import{d as K,e as D,f,h as x,bd as Pe,I as G,bj as ze,af as gt,z as ht,r as b,C as ce,A as me,b as te,a6 as ae,F as J,L as H,bk as He,ab as B,Z as Ee,l as e,Y as re,w as s,i as o,U as Ce,V as Ne,s as y,t as _,W as $e,aa as P,aq as De,ap as Oe,ad as xe,al as ve,aE as Fe,B as ge,X as Me,bl as Ge,k as We,m as Je,N as ie,n as Ye,c as Xe,j as he,E as ne,aF as yt,a5 as de,J as Qe,aR as Te,a8 as Ae,ac as U,aM as Ze,aO as et,R as tt,aN as ot,be as nt,bm as be,bn as bt,K as kt,aU as Re,bo as Z,aG as wt,aT as ue,at as st,aS as Et,a3 as Ct,bp as lt,as as rt,aD as we,am as Ue}from"./index-DJskbzIk.js";import{b as je,m as Nt,c as $t,r as Dt,E as Ft,d as Mt,e as Lt,f as St,R as It,t as Tt}from"./ExpsTpl-Cy9MpRNK.js";import{_ as Rt,a as jt}from"./Checkbox-B0NmEvB4.js";import{_ as at}from"./Tree-BoW8GUcI.js";import{H as it,D as Ot,_ as ee}from"./InfoItem.vue_vue_type_script_setup_true_lang-BSRMWTP5.js";import{F as ct}from"./Folder-DXQZcgnC.js";import{_ as dt,a as ut}from"./BreadcrumbItem-B0PCod7V.js";import{o as Bt}from"./index-DAzX16xw.js";import{F as qt}from"./FolderAdd28Regular-BJil7e6t.js";import{A as zt}from"./Add-B9E6ooHy.js";import{_ as At}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-BXf019OU.js";import{D as Ut,_ as pt}from"./Delete24Regular-DrP9EFqh.js";import{s as Vt,g as Kt,a as Pt}from"./exp-Dzc8nAzP.js";import{u as Ht}from"./groupDetail-grzpJhg1.js";import{u as Gt}from"./useInterval-CS7hQKQu.js";import{c as _t}from"./index-CljUi5cZ.js";import{S as pe,a as Wt,u as Jt,_ as Yt}from"./index-B281A4Xr.js";import{P as ft}from"./Pulse-DtbfsA4Q.js";import{_ as Xt,N as Qt}from"./Image-CjHsT37c.js";import"./DynamicForm-B5kgL0W4.js";import"./json-editor-vue-cMpGPz9p.js";import"./index-DDdGfEJ1.js";import"./InputNumber-CtZNiVVn.js";import"./RadioGroup-DFjU_ho_.js";import"./Switch-BTGJkP8J.js";import"./WaveformPane.vue_vue_type_script_setup_true_lang-CYNgzszk.js";import"./exp-fN6tgzBZ.js";import"./index.browser-OxPLOBIU.js";import"./installCanvasRenderer-DQ3trSBi.js";import"./Refresh-IIbt43T_.js";import"./ExperimentTwotone-CUUKUJME.js";import"./download-C2161hUv.js";const Zt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},eo=K({name:"ArrowBackOutline",render:function(g,a){return f(),D("svg",Zt,a[0]||(a[0]=[x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M244 400L100 256l144-144"},null,-1),x("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M120 256h292"},null,-1)]))}}),to={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},oo=K({name:"Eye",render:function(g,a){return f(),D("svg",to,a[0]||(a[0]=[x("circle",{cx:"256",cy:"256",r:"64",fill:"currentColor"},null,-1),x("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96c-42.52 0-84.33 12.15-124.27 36.11c-40.73 24.43-77.63 60.12-109.68 106.07a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416c46.71 0 93.81-14.43 136.2-41.72c38.46-24.77 72.72-59.66 99.08-100.92a32.2 32.2 0 0 0-.1-34.76zM256 352a96 96 0 1 1 96-96a96.11 96.11 0 0 1-96 96z",fill:"currentColor"},null,-1)]))}}),no={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},so=K({name:"Move",render:function(g,a){return f(),D("svg",no,a[0]||(a[0]=[Pe('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M176 112l80-80l80 80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M255.98 32l.02 448"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M176 400l80 80l80-80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M400 176l80 80l-80 80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M112 176l-80 80l80 80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M32 256h448"></path>',6)]))}}),lo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ro=K({name:"ArrowBarRight",render:function(g,a){return f(),D("svg",lo,a[0]||(a[0]=[Pe('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 12H10"></path><path d="M20 12l-4 4"></path><path d="M20 12l-4-4"></path><path d="M4 4v16"></path></g>',1)]))}}),ao={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},io=K({name:"ArrowMove24Regular",render:function(g,a){return f(),D("svg",ao,a[0]||(a[0]=[x("g",{fill:"none"},[x("path",{d:"M15.28 6.03a.75.75 0 0 1-1.06 0l-1.47-1.47v3.69a.75.75 0 0 1-1.5 0V4.56L9.78 6.03a.75.75 0 0 1-1.06-1.06l2.75-2.75a.75.75 0 0 1 1.06 0l2.75 2.75a.75.75 0 0 1 0 1.06zm-9.25 8.19a.75.75 0 1 1-1.06 1.06l-2.75-2.75a.75.75 0 0 1 0-1.06l2.75-2.75a.75.75 0 0 1 1.06 1.06l-1.47 1.47h3.69a.75.75 0 0 1 0 1.5H4.56l1.47 1.47zm11.94 1.06a.75.75 0 0 1 0-1.06l1.47-1.47h-3.69a.75.75 0 0 1 0-1.5h3.69l-1.47-1.47a.75.75 0 0 1 1.06-1.06l2.75 2.75a.75.75 0 0 1 0 1.06l-2.75 2.75a.75.75 0 0 1-1.06 0zm-2.69 2.69a.75.75 0 0 0-1.06 0l-1.47 1.47v-3.69a.75.75 0 0 0-1.5 0v3.69l-1.47-1.47a.75.75 0 0 0-1.06 1.06l2.75 2.75a.75.75 0 0 0 1.06 0l2.75-2.75a.75.75 0 0 0 0-1.06z",fill:"currentColor"})],-1)]))}}),co={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},uo=K({name:"DriveFileRenameOutlineFilled",render:function(g,a){return f(),D("svg",co,a[0]||(a[0]=[x("path",{d:"M18.41 5.8L17.2 4.59c-.78-.78-2.05-.78-2.83 0l-2.68 2.68L3 15.96V20h4.04l8.74-8.74l2.63-2.63c.79-.78.79-2.05 0-2.83zM6.21 18H5v-1.21l8.66-8.66l1.21 1.21L6.21 18zM11 20l4-4h6v4H11z",fill:"currentColor"},null,-1)]))}}),Ve=(R,g)=>{var d;if(!R.length)return;const a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0);const n=R.map(m=>G(Xt,{width:100,src:m}));let u=document.querySelector("#preview-image");if(!u){const m=document.createElement("div");m.id="preview-image",document.body.appendChild(m),u=m}n.length>1?ze(G(Qt,{},[G(gt,{},n)]),u):ze(n[0],u),(d=u==null?void 0:u.querySelectorAll(".n-image img")[g])==null||d.dispatchEvent(a)},X=ht("expList",()=>{const R=b(),g=b(),a=b(),n=b([]),u=b(!1),d=b(),m=b(),h=b(0),w=b(!1),j=b(!1);return{tree:R,curNode:g,curExpList:n,refreshExpFolderTree:a,refreshExpList:u,curExpNode:d,curExpCounts:h,curFolderNode:m,loadingCurNode:j,reset:()=>{g.value=void 0,d.value=void 0,m.value=void 0,h.value=0},curEmpty:w}}),po={class:"flex"},_o={class:"flex-1"},fo={class:"flex justify-center items-center mx-2"},mo={class:"flex-1 min-h-[300px]"},xo=K({__name:"BatchModal",setup(R,{expose:g}){const a=ce(),n=me(),{t:u}=te(),d=b(!1),m=X(),h=()=>{d.value=!1,F.value=["root"],T.value=!1,I.value=!1,N.value=[],k.value=[]};g({open:()=>{d.value=!0},close:h});const w=b(),j=b(!1),F=b(["root"]),S=({option:i})=>G("div",{className:i.keys==="root"?"font-extrabold w-full":"flex justify-between w-full"},G("div",{className:"flex justify-between items-center gap-1 w-full"},[G("span",i.label)])),L=(i,c,r)=>{w.value=r.action==="unselect"||r==null?void 0:r.node},q=i=>{F.value=i},T=b(!1),I=b(!1),v=b(!1),k=b(),C=async()=>{var r,t;if(v.value)return;v.value=!0;const[i,c]=await je({device_group_name:a.query.device_group_name,exp_folder_id:(r=m.curNode)==null?void 0:r.exp_folder_id,limit:999999999,before_exp_id:null,space_id:a.query.space_id});v.value=!1,!i&&(c==null?void 0:c.status)===0&&(k.value=c.data.list,I.value&&(N.value=(t=c.data.list)==null?void 0:t.map(p=>p.exp_id)))};ae(I,i=>{var c,r;i&&(T.value=!0),i&&J(k.value)&&C(),i&&!J(k)&&(N.value=(c=k.value)==null?void 0:c.map(t=>t.exp_id)),!i&&T.value&&(N.value=(r=m.curExpList)==null?void 0:r.map(t=>t.exp_id)),!i&&!T.value&&(N.value=[])}),ae(T,i=>{var c,r;i&&I.value&&(N.value=(c=k.value)==null?void 0:c.map(t=>t.exp_id)),i&&!I.value&&(N.value=m.curExpList.map(t=>t.exp_id)),!i&&I.value&&(N.value=(r=k.value)==null?void 0:r.map(t=>t.exp_id)),!i&&!I.value&&(N.value=[])}),ae(d,i=>{i||h()});const O=H(()=>I.value?k.value:(T.value,m.curExpList)),N=b(),$=async()=>{var r;const[i,c]=await Nt({sub_process_ids:N.value||[],target_exp_folder_id:(r=w.value)==null?void 0:r.exp_folder_id,space_id:a.query.space_id});!i&&(c==null?void 0:c.status)===0&&(h(),m.refreshExpList=!0)},l=H(()=>{const i=JSON.parse(JSON.stringify(m.tree||[]));return He(i),i});return(i,c)=>{const r=Rt,t=Fe,p=jt,E=Oe,M=De,A=ge,Y=at,oe=Ee;return f(),B(oe,{show:e(d),"onUpdate:show":c[3]||(c[3]=z=>re(d)?d.value=z:null),"auto-focus":!1},{default:s(()=>[o(Ce,{style:{width:"1000px"}},{default:s(()=>[o(Ne,null,{default:s(()=>[y(_(e(u)("groupDetail.exps.batchMove")),1)]),_:1}),o($e,null,{default:s(()=>[x("div",po,[x("div",_o,[x("div",null,[o(r,{checked:e(T),"onUpdate:checked":c[0]||(c[0]=z=>re(T)?T.value=z:null)},{default:s(()=>[y(_(e(u)("groupDetail.exps.selectedCurPage")),1)]),_:1},8,["checked"]),o(r,{checked:e(I),"onUpdate:checked":c[1]||(c[1]=z=>re(I)?I.value=z:null)},{default:s(()=>[y(_(e(u)("groupDetail.exps.selectedAllExps")),1)]),_:1},8,["checked"])]),x("div",{style:P({backgroundColor:e(n).baseColor}),class:"rounded-xl p-2"},[o(M,{show:e(v)},{default:s(()=>[o(E,{style:{height:"calc(100vh - 350px)"}},{default:s(()=>[o(p,{value:e(N),"onUpdate:value":c[2]||(c[2]=z=>re(N)?N.value=z:null)},{default:s(()=>[(f(!0),D(xe,null,ve(e(O),z=>(f(),D("div",{key:z.exp_id},[o(r,{value:z.exp_id},{default:s(()=>[o(t,{"line-clamp":1},{default:s(()=>[y(_(z.exp_id)+" "+_(z.description),1)]),_:2},1024)]),_:2},1032,["value"])]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["show"])],4)]),x("div",fo,[o(A,{disabled:e(J)(e(w)),type:"primary",onClick:$},{icon:s(()=>[o(e(ro))]),_:1},8,["disabled"])]),x("div",mo,[x("div",null,_(e(u)("groupDetail.exps.selecteTargetFolder")),1),x("div",{style:P({backgroundColor:e(n).baseColor}),class:"rounded-xl p-2"},[o(E,{style:{height:"calc(100vh - 350px)"}},{default:s(()=>[o(Y,{"block-line":"","show-line":"",selectable:"",disabled:e(j),"render-label":S,"expanded-keys":e(F),data:e(l),onUpdateExpandedKeys:q,"onUpdate:selectedKeys":L},null,8,["disabled","expanded-keys","data"])]),_:1})],4)])])]),_:1}),o(Me,{onCancel:h})]),_:1})]),_:1},8,["show"])}}}),vo={key:0},go={key:1},mt=K({__name:"FolderEdit",props:{type:{}},setup(R,{expose:g}){const a=R,n=X(),u=ce(),{t:d}=te(),m=b(!1),h=b(),w=b({exp_folder_name:void 0,exp_folder_description:void 0,exp_folder_id:void 0}),j={exp_folder_name:{required:!0,message:d("groupDetail.exps.folderNameTips"),trigger:"blur"}},F=b(!1),S=k=>{k||L()},L=()=>{F.value=!1,w.value={exp_folder_description:void 0,exp_folder_name:void 0,exp_folder_id:void 0}},q=async()=>{var k;m.value||(m.value=!0,(k=h.value)==null||k.validate(async C=>{var $;if(C){m.value=!1;return}const[O,N]=await $t({...w.value,parent_exp_folder_id:($=n.curNode)==null?void 0:$.exp_folder_id,space_id:u.query.space_id});m.value=!1,!O&&(N==null?void 0:N.status)===0&&(L(),n.refreshExpFolderTree=!0)}))},T=async()=>{var k;m.value||(m.value=!0,(k=h.value)==null||k.validate(async C=>{if(C||!w.value.exp_folder_id){m.value=!1;return}const[O,N]=await Dt({exp_folder_id:w.value.exp_folder_id,new_exp_folder_name:w.value.exp_folder_name||"",new_exp_folder_description:w.value.exp_folder_description||""});m.value=!1,!O&&(N==null?void 0:N.status)===0&&(L(),n.refreshExpFolderTree=!0)}))},I=()=>{a.type==="create"?q():T()},v=H(()=>{var k;return Ge(n.tree||[],((k=n.curNode)==null?void 0:k.exp_folder_id)||null)});return g({open:()=>F.value=!0,close:L,setData:(k={})=>w.value={...w.value||{},...k}}),(k,C)=>{const O=ie,N=ut,$=dt,l=Je,i=Ye,c=We,r=ge,t=Ee;return f(),B(t,{show:e(F),"onUpdate:show":C[2]||(C[2]=p=>re(F)?F.value=p:null),"on-update:show":S,"auto-focus":!1},{default:s(()=>[o(Ce,{style:{width:"800px"}},{default:s(()=>[o(Ne,null,{default:s(()=>[k.type==="create"?(f(),D("span",vo,_(e(d)("groupDetail.exps.newFolder")),1)):(f(),D("span",go,_(e(d)("groupDetail.exps.rename")),1))]),_:1}),o($e,null,{default:s(()=>[o(c,{ref_key:"formRef",ref:h,model:e(w),rules:j},{default:s(()=>[o(l,{label:e(d)("groupDetail.exps.targetPath")},{default:s(()=>[o($,null,{default:s(()=>[(f(!0),D(xe,null,ve(e(v),(p,E)=>(f(),B(N,{clickable:!1,separator:">",key:p.exp_folder_id},{default:s(()=>[E===0?(f(),B(O,{key:0,component:e(it)},null,8,["component"])):(f(),B(O,{key:1,component:e(ct)},null,8,["component"])),y(" "+_(p.exp_folder_name),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["label"]),o(l,{label:e(d)("groupDetail.exps.folderName"),path:"exp_folder_name"},{default:s(()=>[o(i,{value:e(w).exp_folder_name,"onUpdate:value":C[0]||(C[0]=p=>e(w).exp_folder_name=p)},null,8,["value"])]),_:1},8,["label"]),o(l,{label:e(d)("groupDetail.exps.folderDesc"),path:"description"},{default:s(()=>[o(i,{type:"textarea",value:e(w).exp_folder_description,"onUpdate:value":C[1]||(C[1]=p=>e(w).exp_folder_description=p)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),o(Me,{onCancel:L},{default:s(()=>[o(r,{type:"primary",onClick:I,loading:e(m)},{default:s(()=>[y(_(e(d)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),ho={class:"flex justify-between items-center"},yo={class:"flex gap-2 items-center"},bo={class:"flex items-center gap-2"},ko=K({__name:"ExpTitleBar",setup(R){const g=X(),{t:a}=te(),n=ce(),u=Xe(),d=H(()=>{var v;return Ge(g.tree||[],((v=g.curNode)==null?void 0:v.exp_folder_id)||null)}),m=({exp_folder_id:v},k)=>{if(!k)return;const C=Bt(n.query,"fid");v&&(C.fid=v),g.curNode=void 0,g.loadingCurNode=!0,g.curExpList=[],g.curExpNode=void 0,g.curFolderNode=void 0,ne(()=>{u.push({name:"exps",query:C}).then(()=>{g.curNode={exp_folder_id:v}})})},h=b(),w=()=>{var v;(v=h.value)==null||v.open()},j=b(),F=b(),S=()=>{var v;(v=j.value)==null||v.open()},L=()=>{var v;(v=F.value)==null||v.open()},q=H(()=>!J(g.curExpList)),T=H(()=>d.value&&d.value.length<=1),I=()=>{d.value&&d.value.length>1?m(d.value[d.value.length-2],!0):u.push({name:"taskList",query:{device_group_name:n.query.device_group_name}})};return(v,k)=>{var i;const C=ie,O=ge,N=he,$=ut,l=dt;return f(),D("div",null,[x("div",ho,[x("div",yo,[o(O,{size:"tiny",secondary:"",type:"primary",onClick:I,disabled:e(T)},{default:s(()=>[o(C,{component:e(eo)},null,8,["component"])]),_:1},8,["disabled"]),o(N,{vertical:""}),o(l,null,{default:s(()=>[(f(!0),D(xe,null,ve(e(d),(c,r)=>(f(),B($,{clickable:r<=e(d).length-1,onClick:()=>m(c,r<e(d).length-1),separator:">",key:c.exp_folder_id},{default:s(()=>[r===0?(f(),B(C,{key:0,component:e(it)},null,8,["component"])):(f(),B(C,{key:1,component:e(ct)},null,8,["component"])),y(" "+_(c.exp_folder_name),1)]),_:2},1032,["clickable","onClick"]))),128))]),_:1})]),x("div",bo,[o(O,{type:"primary",onClick:L,disabled:!e(q)},{icon:s(()=>[o(e(io))]),default:s(()=>[y(" "+_(e(a)("groupDetail.exps.move")),1)]),_:1},8,["disabled"]),o(O,{type:"primary",onClick:w},{icon:s(()=>[o(e(qt))]),default:s(()=>[y(" "+_(e(a)("groupDetail.exps.newFolder")),1)]),_:1}),o(O,{type:"primary",onClick:S},{icon:s(()=>[o(e(zt))]),default:s(()=>[y(" "+_(e(a)("groupDetail.exps.createFromTemplate")),1)]),_:1})])]),o(N,{class:"!mt-5 !mb-2"}),o(mt,{type:"create",ref_key:"folderEditRef",ref:h},null,512),o(Ft,{ref_key:"expsTplRef",ref:j,fid:((i=e(g).curNode)==null?void 0:i.exp_folder_id)||"root"},null,8,["fid"]),o(xo,{ref_key:"batchModalRef",ref:F},null,512)])}}}),wo={class:"flex-1 min-h-[300px]"},Eo=K({__name:"FolderMove",setup(R,{expose:g}){const a=b(),n=me(),{t:u}=te(),d=b(!1),m=X(),h=()=>{d.value=!1,F.value=["root"]};g({open:()=>{d.value=!0},close:h,setData:v=>{a.value=v.id}});const w=b(),j=b(!1),F=b(["root"]),S=({option:v})=>G("div",{className:v.keys==="root"?"font-extrabold w-full":"flex justify-between w-full"},G("div",{className:"flex justify-between items-center gap-1 w-full"},[G("span",v.label)])),L=(v,k,C)=>{w.value=C.action==="unselect"||C==null?void 0:C.node},q=v=>{F.value=v};ae(d,v=>{v||h()});const T=async()=>{const[v,k]=await Mt({exp_folder_id:a.value,target_parent_exp_folder_id:w.value.exp_folder_id});!v&&(k==null?void 0:k.status)===0&&(h(),ne(()=>{m.refreshExpFolderTree=!0}))},I=H(()=>{const v=JSON.parse(JSON.stringify(m.tree||[]));return He(v),v});return(v,k)=>{const C=yt,O=at,N=Oe,$=ge,l=Ee;return f(),B(l,{show:e(d),"onUpdate:show":k[0]||(k[0]=i=>re(d)?d.value=i:null),"auto-focus":!1},{default:s(()=>[o(Ce,{style:{width:"500px"}},{default:s(()=>[o(Ne,null,{default:s(()=>[y(_(e(u)("groupDetail.exps.moveFolder")),1)]),_:1}),o($e,null,{default:s(()=>[x("div",wo,[o(C,{type:"info",class:"mb-2"},{default:s(()=>[y(_(e(u)("groupDetail.exps.selecteTargetFolder")),1)]),_:1}),x("div",{style:P({backgroundColor:e(n).baseColor}),class:"rounded-xl p-2"},[o(N,{style:{"max-height":"400px"}},{default:s(()=>[o(O,{"block-line":"","show-line":"",selectable:"",disabled:e(j),"render-label":S,"expanded-keys":e(F),data:e(I),onUpdateExpandedKeys:q,"onUpdate:selectedKeys":L},null,8,["disabled","expanded-keys","data"])]),_:1})],4)])]),_:1}),o(Me,{onCancel:h},{default:s(()=>[o($,{disabled:e(J)(e(w)),type:"primary",onClick:T},{default:s(()=>[y(_(e(u)("common.OK")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),Co={class:"folder-icon"},No=K({__name:"FolderItem",props:{count:{}},setup(R){return(g,a)=>(f(),D("div",Co))}}),$o=de(No,[["__scopeId","data-v-98d54097"]]),Do=["onDblclick","onClick","onContextmenu"],Fo=K({__name:"ExpFolders",setup(R){Qe(r=>({"251060d2":e(a).cardColor}));const{t:g}=te(),a=me(),n=X(),u=Xe(),d=ce(),m=b(!1),h=async()=>{var E;if(m.value||(m.value=!0,!d.query.device_group_name))return;const[t,p]=await Lt({space_id:+(((E=d.query)==null?void 0:E.space_id)||""),include_experiments:!1});m.value=!1,!t&&p&&p.status===0&&(Array.isArray(p.data.folder_tree)||(p.data.folder_tree=[p.data.folder_tree]),n.tree=p.data.folder_tree,n.refreshExpFolderTree&&(n.refreshExpFolderTree=!1),d.query.fid&&ne(()=>{n.curNode=Ae(n.tree||[],+(d.query.fid||""),"exp_folder_id")}))};Te(()=>{h()}),ae(()=>n.refreshExpFolderTree,r=>{r&&h()});const w=H(()=>{var r,t;return(t=Ae(n.tree||[],(r=n.curNode)==null?void 0:r.exp_folder_id,"exp_folder_id"))==null?void 0:t.children}),j=r=>{n.curNode=void 0,n.loadingCurNode=!0,n.curExpList=[],n.curExpNode=void 0,n.curFolderNode=void 0,ne(()=>{u.push({name:"exps",query:{...d.query,fid:r.exp_folder_id}}).then(()=>{n.curNode=r})})},F=H(()=>J(w.value)&&J(n.curExpList));ae(F,r=>{n.curEmpty=r},{immediate:!0});const S=r=>()=>G(ie,null,{default:()=>G(r)}),L=[{label:g("groupDetail.exps.delete"),key:"delete",icon:S(Ut)},{label:g("groupDetail.exps.rename"),key:"rename",icon:S(uo)},{label:g("groupDetail.exps.moveFolder"),key:"move",icon:S(so)}],q=b(),T=b(!1),I=b(),v=b(),k=async()=>{var r,t;if((r=v.value)!=null&&r.exp_folder_id){const[p,E]=await St({exp_folder_id:v.value.exp_folder_id});!p&&(E==null?void 0:E.status)===0&&((t=I.value)==null||t.close(),v.value=void 0,n.refreshExpFolderTree=!0)}},C=(r,t)=>{r.preventDefault(),v.value=t,q.value={x:r.clientX,y:r.clientY},T.value=!0},O=()=>{T.value=!1,q.value=void 0},N=b(),$=b(),l=r=>{var t,p,E,M,A;r==="delete"?(t=I.value)==null||t.open():r=="rename"?((p=N.value)==null||p.open(),(E=N.value)==null||E.setData({exp_folder_id:v.value.exp_folder_id,exp_folder_name:v.value.exp_folder_name,exp_folder_description:v.value.exp_folder_description})):r==="move"&&((M=$.value)==null||M.open(),(A=$.value)==null||A.setData({id:v.value.exp_folder_id}))},i=r=>{r||(v.value=void 0)},c=r=>{n.curFolderNode=r,n.curExpNode=void 0};return(r,t)=>{var oe,z;const p=Ze,E=Fe,M=et,A=ot,Y=nt;return f(),D("div",null,[e(F)?(f(),B(p,{key:0,class:"pt-40"})):U("",!0),o(A,{"x-gap":16,"y-gap":16,cols:"6 1200:8 1600:8",class:"mb-4"},{default:s(()=>[(f(!0),D(xe,null,ve(e(w),W=>(f(),B(M,{key:W.exp_folder_id,class:"rounded cursor-pointer"},{default:s(()=>[x("div",{class:"flex justify-center flex-col items-center exp-folder-card",onDblclick:()=>j(W),onClick:()=>c(W),onContextmenu:tt(le=>C(le,W),["prevent"])},[o($o,{count:W.experiment_count},null,8,["count"]),x("div",null,[o(E,{"line-clamp":1,class:"!text-center"},{default:s(()=>[y(_(W.exp_folder_name),1)]),_:2},1024)])],40,Do)]),_:2},1024))),128))]),_:1}),o(mt,{type:"edit",ref_key:"folderEditRef",ref:N},null,512),o(Eo,{ref_key:"folderMoveRef",ref:$},null,512),e(T)?(f(),B(Y,{key:1,placement:"bottom-start",show:!0,options:L,x:(oe=e(q))==null?void 0:oe.x,y:(z=e(q))==null?void 0:z.y,onClickoutside:O,onSelect:l},{default:s(()=>t[0]||(t[0]=[x("div",null,null,-1)])),_:1},8,["x","y"])):U("",!0),o(At,{ref_key:"confirmRef",ref:I,onOk:k,onChange:i},null,512)])}}}),Mo=de(Fo,[["__scopeId","data-v-dddfd125"]]);var Ie,Ke;function Lo(){if(Ke)return Ie;Ke=1;var R="Expected a function",g=NaN,a="[object Symbol]",n=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,m=/^0o[0-7]+$/i,h=parseInt,w=typeof be=="object"&&be&&be.Object===Object&&be,j=typeof self=="object"&&self&&self.Object===Object&&self,F=w||j||Function("return this")(),S=Object.prototype,L=S.toString,q=Math.max,T=Math.min,I=function(){return F.Date.now()};function v(l,i,c){var r,t,p,E,M,A,Y=0,oe=!1,z=!1,W=!0;if(typeof l!="function")throw new TypeError(R);i=$(i)||0,C(c)&&(oe=!!c.leading,z="maxWait"in c,p=z?q($(c.maxWait)||0,i):p,W="trailing"in c?!!c.trailing:W);function le(V){var se=r,fe=t;return r=t=void 0,Y=V,E=l.apply(fe,se),E}function Le(V){return Y=V,M=setTimeout(Q,i),oe?le(V):E}function ye(V){var se=V-A,fe=V-Y,qe=i-se;return z?T(qe,p-fe):qe}function _e(V){var se=V-A,fe=V-Y;return A===void 0||se>=i||se<0||z&&fe>=p}function Q(){var V=I();if(_e(V))return Be(V);M=setTimeout(Q,ye(V))}function Be(V){return M=void 0,W&&r?le(V):(r=t=void 0,E)}function xt(){M!==void 0&&clearTimeout(M),Y=0,r=A=t=M=void 0}function vt(){return M===void 0?E:Be(I())}function Se(){var V=I(),se=_e(V);if(r=arguments,t=this,A=V,se){if(M===void 0)return Le(A);if(z)return M=setTimeout(Q,i),le(A)}return M===void 0&&(M=setTimeout(Q,i)),E}return Se.cancel=xt,Se.flush=vt,Se}function k(l,i,c){var r=!0,t=!0;if(typeof l!="function")throw new TypeError(R);return C(c)&&(r="leading"in c?!!c.leading:r,t="trailing"in c?!!c.trailing:t),v(l,i,{leading:r,maxWait:i,trailing:t})}function C(l){var i=typeof l;return!!l&&(i=="object"||i=="function")}function O(l){return!!l&&typeof l=="object"}function N(l){return typeof l=="symbol"||O(l)&&L.call(l)==a}function $(l){if(typeof l=="number")return l;if(N(l))return g;if(C(l)){var i=typeof l.valueOf=="function"?l.valueOf():l;l=C(i)?i+"":i}if(typeof l!="string")return l===0?l:+l;l=l.replace(n,"");var c=d.test(l);return c||m.test(l)?h(l.slice(2),c?2:8):u.test(l)?g:+l}return Ie=k,Ie}var So=Lo();const Io=bt(So),To={key:0,class:"absolute right-1 top-0.5 z-10"},Ro={key:1,class:"file-triangle"},jo={class:"flex justify-center absolute left-[2px] top-[2px] rounded z-10"},Oo={class:"file-title"},Bo=["src"],qo={key:3,class:"mt-10 text-center opacity-40"},zo={key:4,class:"absolute text-center whitespace-pre-line file-text flex flex-col gap-1 items-center opacity-40 text-xs"},Ao={key:5,class:"absolute right-1 bottom-2 !w-5 !h-5 rounded-full"},Uo={class:"mt-1 text-xs text-center"},Vo=K({__name:"ExpFile",props:{exp:{}},setup(R){Qe(t=>({"40f5fad8":e(d).cardColor,c531cada:e(ue)[t.exp.status].color}));const g={STOP:"stop",FAVORITY:"favority"},a=R,n=kt(),u=X(),d=me(),{t:m}=te(),h=ce(),w=H(()=>{const t=Re(a==null?void 0:a.exp.progress,!1);if(t==="0%")return 0;const[p,E]=t==null?void 0:t.split("/");return+E==0?0:+p/+E}),j=H(()=>[Z.SERVICE_QUEUING,Z.RUNNING,Z.HOST_DOWNLOADED].includes(a.exp.status)),F=()=>{u.curFolderNode=void 0,u.curExpNode=a.exp},S=t=>()=>G(ie,null,{default:()=>G(t)}),L=b(!1),q=H(()=>_t([{label:m("groupDetail.exps.stop"),key:"stop",icon:S(It),disabled:![Z.SERVICE_QUEUING,Z.RUNNING,Z.HOST_DOWNLOADED].includes(a.exp.status)},{label:m("expInfo.duplicate"),key:"duplicate",icon:S(Ot),props:{onClick:t=>k({dup:"1"},t)}},{label:m("groupDetail.exps.preview"),key:"preview",icon:S(oo),props:{onClick:t=>k({},t)}},a.exp.is_marked?{label:m("groupDetail.exps.unfavority"),key:"favority",icon:S(Wt)}:{label:m("groupDetail.exps.favority"),key:"favority",icon:S(pe)}])),T=b(),I=t=>{t.preventDefault(),T.value={x:t.clientX+5,y:t.clientY+5},L.value=!0},v=()=>{L.value=!1,T.value=void 0},k=(t={},p)=>{var M;const E=new URLSearchParams({device_group_name:h.query.device_group_name,space_id:h.query.space_id,exp_id:String(a.exp.exp_id),...t,fid:String(((M=u.curNode)==null?void 0:M.exp_folder_id)||"root")});window.open(`/experiment/expSettings?${E.toString()}`,wt(p))},C=b(!1),O=async()=>{C.value=!0;const[t,p]=await Vt({exp_id:a.exp.exp_id});C.value=!1,!t&&(p==null?void 0:p.status)===0&&(n.success(m("groupDetail.exps.stopSuccess")),u.refreshExpList=!0)},N=async()=>{const[t,p]=await Tt({exp_id:a.exp.exp_id,is_marked:!a.exp.is_marked,mark_note:l.value.mark_note});!t&&(p==null?void 0:p.status)===0&&(u.refreshExpList=!0,c())},$=t=>{t===g.STOP?O():t===g.FAVORITY&&(a.exp.is_marked?N():i.value=!0),v()},l=b({mark_note:void 0}),i=b(!1),c=()=>{i.value=!1,l.value={mark_note:void 0}},r=t=>{t||c()};return(t,p)=>{const E=pt,M=Fe,A=nt,Y=Ye,oe=Je,z=We,W=ge,le=Ee,Le=De;return f(),B(Le,{show:e(C)},{default:s(()=>{var ye,_e;return[x("div",{class:"flex items-center flex-col file-wraper px-0 py-4 rounded-xl box-border",onClick:F,onDblclick:p[0]||(p[0]=Q=>k({},Q)),onContextmenu:tt(I,["prevent"])},[x("div",{class:"rounded file-card shadow-2xl relative",style:P({borderColor:e(d).dividerColor,backgroundColor:e(d).cardColor})},[t.exp.is_marked?(f(),D("div",To,[o(e(ie),{component:e(pe),color:"#fadb14",size:"16"},null,8,["component"])])):(f(),D("div",Ro,p[3]||(p[3]=[x("div",null,null,-1)]))),x("div",jo,[x("div",Oo,"#"+_(t.exp.exp_id),1)]),t.exp.img?(f(),D("img",{key:2,src:t.exp.img,class:"w-[120px] h-[120px] absolute top-0 left-0",alt:""},null,8,Bo)):t.exp.img===void 0?(f(),D("div",qo,_(e(m)("common.loading")),1)):t.exp.img===null?(f(),D("div",zo,[o(e(ie),{component:e(ft),size:"30"},null,8,["component"]),y(" "+_(e(m)("groupDetail.exps.expNoResult")),1)])):U("",!0),x("div",{class:"text-center absolute bottom-0 w-full left-0 text-xs",style:P({background:"rgba(255, 255, 255, 0.5 )",borderBottom:`4px solid ${e(ue)[t.exp.status].color}`})},[x("div",{style:P({background:`rgba(255, 255, 255, ${e(w)} )`}),class:"h-full opacity-60"},null,4)],4),e(w)!==1?(f(),D("div",Ao,[o(E,{type:"circle",processing:e(j),percentage:e(w)*100,"show-indicator":!1,class:"!w-5 !h-5","stroke-width":16},null,8,["processing","percentage"])])):U("",!0)],4),x("div",Uo,[o(M,{"line-clamp":2},{default:s(()=>[y(_(t.exp.title),1)]),_:1})]),e(L)?(f(),B(A,{key:0,placement:"bottom-start",show:!0,options:e(q),x:(ye=e(T))==null?void 0:ye.x,y:(_e=e(T))==null?void 0:_e.y,onClickoutside:v,onSelect:$},{default:s(()=>p[4]||(p[4]=[x("div",null,null,-1)])),_:1},8,["options","x","y"])):U("",!0)],32),o(le,{show:e(i),"onUpdate:show":p[2]||(p[2]=Q=>re(i)?i.value=Q:null),onUpdateShow:r,"auto-focus":!1},{default:s(()=>[o(Ce,{style:{width:"500px"}},{default:s(()=>[o(Ne,null,{default:s(()=>[y(_(e(m)("groupDetail.exps.favorityTitle"))+" Exp-"+_(t.exp.exp_id)+" :: ",1),x("span",null,'"'+_(t.exp.title)+'"',1)]),_:1}),o($e,null,{default:s(()=>[o(z,{ref:"formRef",model:e(l)},{default:s(()=>[o(oe,{label:e(m)("groupDetail.exps.favorityNote"),path:"exp_folder_name"},{default:s(()=>[o(Y,{type:"textarea",value:e(l).mark_note,"onUpdate:value":p[1]||(p[1]=Q=>e(l).mark_note=Q)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),o(Me,{onCancel:c},{default:s(()=>[o(W,{type:"primary",onClick:N,loading:e(C)},{default:s(()=>[y(_(e(m)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"])]}),_:1},8,["show"])}}}),Ko=de(Vo,[["__scopeId","data-v-b8bc3392"]]),Po=K({__name:"ExpFiles",setup(R,{expose:g}){const a=st({per_page:48,total:0}),n=ce(),u=X(),d=Ht(),m=b(!1),h=b({}),w=b([]),j=b(!1),F=$=>[Z.COMPLETE,Z.ERROR,Z.CANCELED,Z.HOST_DOWNLOADED].includes($),S=async($,l)=>{var r;const[i,c]=await Kt({exp_ids:$,group_name:n.query.device_group_name,create_timestamps:l,org_id:(r=d.groupInfo)==null?void 0:r.organization_id});!i&&(c==null?void 0:c.status)===0&&Ct(c.data,(t,p)=>{var M;const E=(M=u.curExpList)==null?void 0:M.find(A=>p===String(A.exp_id));E&&(F(E==null?void 0:E.status)?(E.img=t,h.value={...h.value,[p]:t||null}):w.value.push({exp_id:p,create_timestamp:E.create_timestamp}))})},L=async()=>{var $,l,i,c;J(w.value)||(await S((l=($=w.value)==null?void 0:$.map(r=>r.exp_id))==null?void 0:l.join(","),(c=(i=w.value)==null?void 0:i.map(r=>r.create_timestamp))==null?void 0:c.join(",")),ne(()=>{C()}))},q=async()=>{var i;const[$,l]=await je({device_group_name:n.query.device_group_name,exp_folder_id:(i=u.curNode)==null?void 0:i.exp_folder_id,limit:a.per_page,before_exp_id:null,space_id:n.query.space_id});if(!$&&(l==null?void 0:l.status)===0){const c=JSON.parse(JSON.stringify(u.curExpList));l.data.list.reverse().forEach(r=>{const t=c.findIndex(p=>p.exp_id===r.exp_id);t<0?c.unshift(r):c.splice(t,1,{...r,img:c[t].img})}),u.curExpList=c,u.curExpCounts=l.data.count,ne(()=>{var p,E;const r=u.curExpList.find(M=>{var A;return M.exp_id==((A=u.curExpNode)==null?void 0:A.exp_id)});r&&(u.curExpNode=r);const t=k(l.data.list||[]);J(t)||S((p=t==null?void 0:t.map(M=>M.exp_id))==null?void 0:p.join(","),(E=t==null?void 0:t.map(M=>M.create_timestamp))==null?void 0:E.join(","))})}},{start:T,stop:I,runing:v}=Gt(()=>{L(),q()},{delay:!0,isManual:!0});Te(()=>{v.value?I():T()}),Et(()=>{I()});const k=$=>_t($.map(l=>h.value[l.exp_id]===void 0?l:void 0)),C=()=>{const $=[];w.value.forEach(l=>{h.value[l.exp_id]===void 0&&$.push(l)}),w.value=$},O=async()=>{var c,r;if(m.value)return;m.value=!0;const $=u.curExpList,[l,i]=await je({device_group_name:n.query.device_group_name,exp_folder_id:(c=u.curNode)==null?void 0:c.exp_folder_id,limit:a.per_page,before_exp_id:((r=$[$.length-1])==null?void 0:r.exp_id)||null,space_id:n.query.space_id});m.value=!1,u.loadingCurNode&&(u.loadingCurNode=!1),!l&&(i==null?void 0:i.status)===0&&(ne(()=>{var p,E;const t=k(i.data.list||[]);J(t)||S((p=t==null?void 0:t.map(M=>M.exp_id))==null?void 0:p.join(","),(E=t==null?void 0:t.map(M=>M.create_timestamp))==null?void 0:E.join(","))}),u.curExpList=Jt([...u.curExpList||[],...i.data.list],"exp_id"),a.total=i.data.count,u.curExpCounts=i.data.count,ne(()=>{var t;j.value=a.total===((t=u.curExpList)==null?void 0:t.length)}),u.refreshExpList&&(u.refreshExpList=!1))};Te(()=>{a.total=0,u.curExpCounts=0,u.curExpList=[],h.value={},w.value=[],n.query.fid&&(u.curNode={exp_folder_id:+n.query.fid}),ne(()=>{O()})}),ae(()=>u.refreshExpList,$=>{$&&(u.curExpList=[],h.value={},O())},{immediate:!0});const N=Io(()=>{j.value||O()},500);return g({loadMore:N}),($,l)=>{const i=et,c=ot;return f(),B(c,{class:"!max-[1600px]","x-gap":"8",cols:"6 1200:8 1600:8"},{default:s(()=>[(f(!0),D(xe,null,ve(e(u).curExpList,r=>(f(),B(i,{key:r.exp_id},{default:s(()=>[o(Ko,{exp:r},null,8,["exp"])]),_:2},1024))),128))]),_:1})}}}),Ho={key:0,class:"flex items-center flex-col w-full"},Go={key:0,class:"relative flex-none"},Wo=["src"],Jo={key:0,class:"absolute right-1 top-6 z-10"},Yo={class:"flex justify-center absolute left-[2px] top-[2px] rounded z-10"},Xo={class:"file-title"},Qo={key:0,class:"absolute right-1 top-1 z-10"},Zo={key:1,class:"file-triangle",style:{background:"rgba(255, 255, 255, 0.25)"}},en={key:2,class:"absolute right-1 bottom-2 !w-5 !h-5 rounded-full"},tn={class:"inline-flex flex-col items-center gap-1 opacity-40"},on={class:"flex justify-center absolute left-[2px] top-[2px] rounded z-10"},nn={class:"file-title"},sn={key:0,class:"absolute right-1 top-1 z-10"},ln={key:2,class:"absolute right-1 bottom-2 !w-5 !h-5 rounded-full"},rn={class:"opacity-40"},an={class:"text-lg font-bold w-full"},cn={class:"mt-4 opacity-70 text-xs text-left w-full"},dn={class:"w-full flex flex-col"},un={class:"break-all inline-block whitespace-pre-line"},pn={class:"text-xs opacity-70 min-w-18 flex items-center gap-1"},_n={class:"italic"},fn={class:"text-xs"},mn=K({__name:"ExpInfo",setup(R){const g=ce(),a=X(),{curExpNode:n}=lt(a),u=me(),{t:d}=te(),m=b(),h=st({}),w=async F=>{if(h[String(F.exp_id)]){Ve([h[String(F.exp_id)]],0);return}m.value=F.exp_id;const[S,L]=await Pt({exp_id:F.exp_id,device_group_name:g.query.device_group_name,space_id:g.query.space_id});m.value=void 0,!S&&(L==null?void 0:L.status)===0&&(Ve([L.data.big_picture_url],0),h[String(F.exp_id)]=L.data.big_picture_url)},j=H(()=>{if(!n.value)return 0;const F=Re(n.value.progress,!1);if(F==="0%")return 0;const[S,L]=F==null?void 0:F.split("/");return+L==0?0:+S/+L});return(F,S)=>{var O,N,$;const L=De,q=ie,T=pt,I=he,v=rt,k=Fe,C=Oe;return e(n)?(f(),D("div",Ho,[e(n).img?(f(),D("div",Go,[o(L,{show:e(m)===e(n).exp_id},{default:s(()=>[x("img",{class:"w-[160px] h-[160px] my-5 cursor-pointer",src:e(n).img,alt:"",onClick:S[0]||(S[0]=()=>w(e(n)))},null,8,Wo)]),_:1},8,["show"]),(O=e(n))!=null&&O.is_marked?(f(),D("div",Jo,[o(q,{component:e(pe),color:"#fadb14",size:"20"},null,8,["component"])])):U("",!0)])):e(n).img===null?(f(),D("div",{key:1,class:"!w-[160px] file-card relative shadow-2xl flex-none whitespace-pre-line !h-[160px] my-5 rounded text-center leading-4 text-xs flex items-center justify-center text-white",style:P({borderColor:e(u).dividerColor,backgroundColor:e(u).cardColor})},[x("div",Yo,[x("div",Xo,"#"+_(e(n).exp_id),1)]),(N=e(n))!=null&&N.is_marked?(f(),D("div",Qo,[o(q,{component:e(pe),color:"#fadb14",size:"20"},null,8,["component"])])):(f(),D("div",Zo)),x("div",{class:"text-center absolute bottom-0 w-full left-0 text-xs",style:P({background:"rgba(255, 255, 255, 0.5 )",borderBottom:`4px solid ${e(ue)[e(n).status].color}`})},[x("div",{style:P({background:`rgba(255, 255, 255, ${e(j)} )`}),class:"h-full opacity-60"},null,4)],4),e(j)!==1?(f(),D("div",en,[o(T,{type:"circle",percentage:e(j)*100,"show-indicator":!1,class:"!w-5 !h-5","stroke-width":16},null,8,["percentage"])])):U("",!0),x("span",tn,[o(q,{component:e(ft),size:"40"},null,8,["component"]),y(" "+_(e(d)("groupDetail.exps.expNoResult")),1)])],4)):(f(),D("div",{key:2,class:"!w-[160px] flex-none file-card relative shadow-2xl whitespace-pre-line !h-[160px] my-5 rounded text-center leading-4 text-xs flex items-center justify-center text-white",style:P({borderColor:e(u).dividerColor,backgroundColor:e(u).cardColor})},[x("div",on,[x("div",nn,"#"+_(e(n).exp_id),1)]),($=e(n))!=null&&$.is_marked?(f(),D("div",sn,[o(q,{component:e(pe),color:"#fadb14",size:"20"},null,8,["component"])])):(f(),D("div",{key:1,class:"file-triangle",style:P({background:e(n).is_marked?"#fadb14":"rgba(255, 255, 255, 0.25)"})},null,4)),x("div",{class:"text-center absolute bottom-0 w-full left-0 text-xs",style:P({background:"rgba(255, 255, 255, 0.5 )",borderBottom:`4px solid ${e(ue)[e(n).status].color}`})},[x("div",{style:P({background:`rgba(255, 255, 255, ${e(j)} )`}),class:"h-full opacity-60"},null,4)],4),e(j)!==1?(f(),D("div",ln,[o(T,{type:"circle",percentage:e(j)*100,"show-indicator":!1,class:"!w-5 !h-5","stroke-width":16},null,8,["percentage"])])):U("",!0),x("span",rn,_(e(d)("common.loading")),1)],4)),x("div",an,[x("span",null," Exp "+_(e(n).exp_id)+"  -  ",1),x("span",null,_(e(n).title),1)]),x("div",cn,_(e(n).description),1),o(I),o(C,{style:{"max-height":"calc(100vh - 300px)"}},{default:s(()=>[x("div",dn,[o(ee,null,{label:s(()=>[y(_(e(d)("groupDetail.exps.status")),1)]),default:s(()=>{var l;return[(l=e(n))!=null&&l.status?(f(),B(v,{key:0,color:{color:e(ue)[e(n).status].color,textColor:"#fff"},bordered:!1,size:"small",class:"min-w-[150px] flex justify-center"},{default:s(()=>[y(_(e(d)(e(ue)[e(n).status].text)),1)]),_:1},8,["color"])):U("",!0)]}),_:1}),o(ee,null,{label:s(()=>[y(_(e(d)("groupDetail.exps.progress")),1)]),default:s(()=>[o(v,{size:"small",type:"info",class:"flex justify-center items-center min-w-[150px]"},{default:s(()=>{var l;return[y(_(e(Re)((l=e(n))==null?void 0:l.progress,!0)),1)]}),_:1})]),_:1}),o(ee,null,{label:s(()=>[y(_(e(d)("groupDetail.exps.source")),1)]),default:s(()=>[o(v,{size:"small",type:"info",class:"flex justify-center items-center min-w-[150px]"},{default:s(()=>{var l;return[y(_((l=e(n))==null?void 0:l.source),1)]}),_:1})]),_:1}),o(ee,null,{label:s(()=>[y(_(e(d)("groupDetail.exps.tpl")),1)]),default:s(()=>[o(v,{type:"warning",size:"small",class:"!break-all flex justify-center items-center min-w-[150px]"},{default:s(()=>{var l,i;return[x("span",un,_(((l=e(n))==null?void 0:l.template_name)==="-"?"No Template":(i=e(n))==null?void 0:i.template_name),1)]}),_:1})]),_:1}),o(ee,null,{label:s(()=>[y(_(e(d)("groupDetail.exps.createTime")),1)]),default:s(()=>{var l;return[y(" "+_((l=e(n))==null?void 0:l.create_time),1)]}),_:1}),o(ee,null,{label:s(()=>[y(_(e(d)("groupDetail.exps.creator")),1)]),default:s(()=>{var l;return[y(" "+_((l=e(n))==null?void 0:l.user_name),1)]}),_:1}),e(n).is_marked?(f(),D("div",{key:0,class:"flex justify-between items-center py-2 border-b",style:P({borderColor:e(u).dividerColor})},[x("div",pn,[o(q,{size:"18",color:"#fadb14",component:e(pe)},null,8,["component"]),x("span",_n,_(e(d)("groupDetail.exps.markNote")),1)]),x("div",fn,[o(k,{"line-clamp":2},{default:s(()=>[y(_(e(n).mark_note||"-"),1)]),_:1})])],4)):U("",!0)])]),_:1})])):U("",!0)}}}),xn=de(mn,[["__scopeId","data-v-a9778ddd"]]),vn={key:0,class:"flex items-center flex-col w-full"},gn={class:"text-lg font-bold w-full text-center break-all"},hn={key:0,class:"mt-4 opacity-70 text-xs text-left w-full"},yn={class:"w-full flex flex-col"},bn=K({__name:"FolderInfo",setup(R){const g=X(),{curFolderNode:a}=lt(g),{t:n}=te();return(u,d)=>{const m=he;return e(a)?(f(),D("div",vn,[d[0]||(d[0]=x("div",{class:"folder-icon"},null,-1)),x("div",gn,_(e(a).exp_folder_name),1),e(a).exp_folder_description?(f(),D("div",hn,_(e(a).exp_folder_description),1)):U("",!0),o(m),x("div",yn,[o(ee,null,{label:s(()=>[y(_(e(n)("groupDetail.exps.expFolderId")),1)]),default:s(()=>[y(" "+_(e(a).exp_folder_id),1)]),_:1}),o(ee,null,{label:s(()=>[y(_(e(n)("groupDetail.exps.createTime")),1)]),default:s(()=>[y(" "+_(e(we)(e(a).create_time)),1)]),_:1}),o(ee,null,{label:s(()=>[y(_(e(n)("groupDetail.exps.updateTime")),1)]),default:s(()=>[y(" "+_(e(we)(e(a).update_time)||"-"),1)]),_:1}),o(ee,null,{label:s(()=>[y(_(e(n)("groupDetail.exps.creator")),1)]),default:s(()=>[y(" "+_(e(a).create_user_name),1)]),_:1})])])):U("",!0)}}}),kn=de(bn,[["__scopeId","data-v-a5a7d661"]]),wn={},En={class:"flex items-center gap-1"},Cn={class:"opacity-70"};function Nn(R,g){return f(),D("div",En,[x("span",Cn,[Ue(R.$slots,"label"),g[0]||(g[0]=y(":  "))]),x("span",null,[Ue(R.$slots,"default")])])}const ke=de(wn,[["render",Nn]]),$n={key:0},Dn={class:"flex justify-between items-center text-xs px-2"},Fn={class:"flex items-center gap-10"},Mn={key:0},Ln=K({__name:"InfoBar",setup(R){const g=X(),{t:a}=te(),n=H(()=>g.curNode);return(u,d)=>{const m=he,h=rt;return e(J)(e(n))?U("",!0):(f(),D("div",$n,[o(m,{class:"!mt-0 !mb-2"}),x("div",Dn,[x("div",Fn,[e(n).create_time?(f(),B(ke,{key:0},{label:s(()=>[y(_(e(a)("groupDetail.exps.createTime")),1)]),default:s(()=>[y(" "+_(e(we)(e(n).create_time)),1)]),_:1})):U("",!0),e(n).update_time?(f(),B(ke,{key:1},{label:s(()=>[y(_(e(a)("groupDetail.exps.updateTime")),1)]),default:s(()=>[y(" "+_(e(we)(e(n).update_time)),1)]),_:1})):U("",!0),e(n).create_user_name?(f(),B(ke,{key:2},{label:s(()=>[y(_(e(a)("groupDetail.exps.creator")),1)]),default:s(()=>[y(" "+_(e(n).create_user_name||"-"),1)]),_:1})):U("",!0)]),e(g).curExpCounts?(f(),D("div",Mn,[o(ke,null,{label:s(()=>[y(_(e(a)("groupDetail.exps.expCount")),1)]),default:s(()=>[o(h,{type:"primary",round:"",size:"tiny"},{default:s(()=>[y(_(e(g).curExpCounts),1)]),_:1})]),_:1})])):U("",!0)])]))}}}),Sn={class:"flex"},In={class:"flex-1"},Tn={class:"flex w-[280px]",style:{height:"calc(100vh - 245px)"}},Rn={key:2,class:"w-full flex justify-center items-center"},jn=K({__name:"ExperimentList",setup(R){const{t:g}=te(),a=X(),n=b(),u=()=>{var h;(h=n.value)==null||h.loadMore()},d=H(()=>{var h;return J(a.curNode)||!((h=a==null?void 0:a.curNode)!=null&&h.exp_folder_id)}),m=H(()=>{var h;return a.curExpCounts<=((h=a.curExpList)==null?void 0:h.length)&&!a.curEmpty});return(h,w)=>{const j=he,F=Yt,S=Ze,L=De;return f(),B(L,{show:e(a).loadingCurNode},{default:s(()=>[o(ko),x("div",Sn,[x("div",In,[o(F,{style:P({height:`calc(100vh - ${e(d)?245:268}px)`}),distance:50,onLoad:u},{default:s(()=>[x("div",{style:P({minHeight:`calc(100vh - ${e(d)?315:338}px)`})},[o(Mo),o(Po,{ref_key:"expFilesRef",ref:n},null,512)],4),e(m)?(f(),B(j,{key:0,"title-placement":"center",class:"!text-xs opacity-65"},{default:s(()=>[y(_(e(g)("groupDetail.exps.nomore")),1)]),_:1})):U("",!0)]),_:1},8,["style"]),e(d)?U("",!0):(f(),B(Ln,{key:0}))]),x("div",Tn,[o(j,{vertical:"",class:"!h-full !mr-5 !ml-0"}),e(a).curExpNode?(f(),B(xn,{key:0})):e(a).curFolderNode?(f(),B(kn,{key:1})):(f(),D("div",Rn,[o(S,{description:e(g)("groupDetail.exps.expInfoEmpty")},null,8,["description"])]))])])]),_:1},8,["show"])}}}),ms=de(jn,[["__scopeId","data-v-93a94c64"]]);export{ms as default};
