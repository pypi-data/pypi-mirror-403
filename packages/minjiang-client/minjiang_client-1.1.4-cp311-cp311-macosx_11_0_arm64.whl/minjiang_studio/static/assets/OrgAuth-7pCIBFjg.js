import{d as B,r as _,b as A,o as I,ab as R,f as x,Z as S,l as e,Y as E,w as o,i as n,U as K,W as j,k as F,m as H,n as W,p as X,X as Y,B as $,s as v,t as f,di as Z,dj as G,c as J,A as P,e as q,ac as Q,dd as ee,ad as ne,al as oe,aO as se,h as N,aa as M,dk as te,N as ae,O as le,af as re,as as ie,aN as ue,dl as _e,E as de}from"./index-DJskbzIk.js";import{A as ce}from"./Add-B9E6ooHy.js";import{U as V}from"./UserMultiple-Cp5mi97o.js";const me=B({__name:"OrgModal",props:{type:{}},emits:["success"],setup(T,{expose:U,emit:w}){const d=_(),{t:l}=A(),y=w,C=_(!1),c=_(!1),b=()=>{c.value=!1,t.value={name:void 0,user_ids:void 0,admin_ids:void 0}},z=()=>{c.value=!0},u=_({name:{required:!0,message:l("common.required")},user_ids:{required:!0,message:l("common.required")},admin_ids:{required:!0,message:l("common.required")}}),r=_(null),t=_({name:void 0,user_ids:void 0,admin_ids:void 0}),h=()=>{var i;(i=r.value)==null||i.validate(async s=>{if(s)return;const[m,a]=await Z(t.value);!m&&(a==null?void 0:a.status)===0&&(y("success"),b())})},L=async()=>{var m;const[i,s]=await G();!i&&(s==null?void 0:s.status)===0&&(d.value=(m=s.data)==null?void 0:m.map(a=>({...a,label:a.user_name,value:a.user_id})))};return I(()=>{L()}),U({open:z,close:b}),(i,s)=>{const m=W,a=H,k=X,O=F,p=$,D=S;return x(),R(D,{show:e(c),"onUpdate:show":s[3]||(s[3]=g=>E(c)?c.value=g:null),"mask-closable":!1,"close-on-esc":!1,"auto-focus":!1},{default:o(()=>[n(K,{style:{width:"700px"}},{default:o(()=>[n(j,null,{default:o(()=>[n(O,{ref_key:"formRef",ref:r,model:e(t),rules:e(u),size:"small"},{default:o(()=>[n(a,{label:e(l)("org.orgName"),path:"name"},{default:o(()=>[n(m,{disabled:i.type==="edit",value:e(t).name,"onUpdate:value":s[0]||(s[0]=g=>e(t).name=g)},null,8,["disabled","value"])]),_:1},8,["label"]),n(a,{label:e(l)("org.admin"),path:"admin_ids"},{default:o(()=>[n(k,{value:e(t).admin_ids,"onUpdate:value":s[1]||(s[1]=g=>e(t).admin_ids=g),filterable:"",multiple:"",options:e(d)},null,8,["value","options"])]),_:1},8,["label"]),n(a,{label:e(l)("org.member"),path:"user_ids"},{default:o(()=>[n(k,{value:e(t).user_ids,"onUpdate:value":s[2]||(s[2]=g=>e(t).user_ids=g),filterable:"",multiple:"",options:e(d)},null,8,["value","options"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1}),n(Y,{onCancel:b},{default:o(()=>[n(p,{type:"primary",onClick:h,loading:e(C)},{default:o(()=>[v(f(e(l)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),pe=["onClick"],fe={class:"flex items-center gap-1"},ge={class:"flex items-center gap-1"},he=B({__name:"OrgAuth",setup(T){const U=J(),w=P(),{t:d}=A(),l=_(),y=_(),C=_(),c=async()=>{var t;const[u,r]=await _e();!u&&(r==null?void 0:r.status)===0&&(C.value=(t=r==null?void 0:r.data)==null?void 0:t.organizations)},b=()=>{y.value={type:"insert",show:!0},de(()=>{var u;(u=l.value)==null||u.open()})},z=u=>{U.push({name:"org",query:{id:u}})};return I(()=>{c()}),(u,r)=>{var k,O;const t=$,h=ae,L=te,i=ie,s=re,m=se,a=ue;return x(),q("div",null,[n(ee,{title:e(d)("org.orgList")},{extra:o(()=>[n(t,{type:"primary",onClick:b},{icon:o(()=>[n(e(ce))]),default:o(()=>[v(" "+f(e(d)("org.createOrg")),1)]),_:1})]),_:1},8,["title"]),n(a,{cols:4,"x-gap":16,"y-gap":16},{default:o(()=>[(x(!0),q(ne,null,oe(e(C),p=>(x(),R(m,{key:p.organization_id},{default:o(()=>[N("div",{class:"border rounded-xl cursor-pointer",style:M({borderColor:e(w).dividerColor}),onClick:()=>z(p.organization_id)},[n(L,{class:"px-3 py-2 min-h-20 flex items-center"},{default:o(()=>[n(h,{class:"mr-1",component:e(le)},null,8,["component"]),v(" "+f(p.organization_name),1)]),_:2},1024),N("div",{class:"px-2 py-3 border-t",style:M({borderColor:e(w).dividerColor})},[n(s,null,{default:o(()=>[n(i,{bordered:!1,type:"success",round:""},{default:o(()=>[v(" ID "+f(p.organization_id),1)]),_:2},1024),n(i,{bordered:!1,type:"warning",round:""},{default:o(()=>[N("div",fe,[n(h,{component:e(V)},null,8,["component"]),v(" "+f(p.member_count)+" "+f(e(d)("org.cmember")),1)])]),_:2},1024),n(i,{bordered:!1,type:"info",round:""},{default:o(()=>[N("div",ge,[n(h,{component:e(V)},null,8,["component"]),v(" "+f(p.device_count)+" "+f(e(d)("org.cdevice")),1)])]),_:2},1024)]),_:2},1024)],4)],12,pe)]),_:2},1024))),128))]),_:1}),(k=e(y))!=null&&k.show?(x(),R(me,{key:0,type:(O=e(y))==null?void 0:O.type,ref_key:"orgModalRef",ref:l,onSuccess:c},null,8,["type"])):Q("",!0)])}}});export{he as default};
