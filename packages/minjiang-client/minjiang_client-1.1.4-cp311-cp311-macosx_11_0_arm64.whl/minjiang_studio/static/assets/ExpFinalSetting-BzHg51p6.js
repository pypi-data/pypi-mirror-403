import{aY as Qe,aV as q,cB as Rr,cC as Tr,aW as ze,aX as ut,bH as la,cD as Or,d as pe,I as ve,cg as Pr,ch as Er,br as Nr,cj as Hr,ck as Ut,bI as $r,b7 as Br,b8 as ja,cE as Fr,r as W,co as Gr,L as se,aj as Ur,b3 as Kr,a6 as Le,E as ue,ak as Wr,ba as ua,cs as Xr,bc as ct,cF as dt,cG as ht,bU as Mt,bV as Ee,a3 as Be,ab as ye,f as J,l as b,cH as Ae,aN as qt,w as ie,e as ce,ad as zt,al as Jt,aO as Qt,ac as Me,F as he,h as fe,i as ae,t as Ve,p as Za,ay as qe,A as Ke,o as it,cf as Vt,by as ot,S as st,aa as He,Y as Re,s as Te,as as Yr,bd as jr,b as qa,af as Zr,N as qr,j as Jr,be as Qr,B as en,C as tn,Q as ca,aR as an,aS as rn,bY as da,cb as ha,ap as nn,aq as on,v as sn,bo as Pe}from"./index-DJskbzIk.js";import{t as pa}from"./exp-Dzc8nAzP.js";import{_ as ln}from"./Tree-BoW8GUcI.js";import{_ as be,L as Ct,s as re,M as It,N as ea,P as ta,O as va,o as un,e as Ie,m as Je,Q as Kt,T as Ja,U as _t,V as rt,W as cn,X as dn,Y as fa,$ as je,a0 as hn,g as lt,a1 as aa,a2 as ra,a3 as Qa,R as Ze,a4 as na,a5 as Wt,a6 as er,a7 as pn,a8 as vn,a9 as tr,aa as fn,ab as gn,ac as mn,ad as yn,ae as xn,af as _n,ag as bn,ah as Sn,ai as bt,aj as ar,ak as wn,A as Fe,al as Mn,am as Ce,k as zn,i as Ge,l as rr,an as Ot,ao as Pt,ap as Oe,aq as Vn,ar as Cn,as as Ue,at as In,au as An,av as Et,aw as ga,ax as nr,ay as Ln,az as kn,aA as Dn,q as Rn,aB as Tn,aC as ir,aD as ma,C as On,aE as Pn,aF as En,b as Nn,a as Hn,Z as at,c as yt,aG as Xt,aH as $n,aI as Bn,aJ as Fn,aK as Nt,aL as Ht,aM as Gn,aN as Un,aO as Kn,aP as Wn,aQ as Xn,aR as ya,aS as Yn,aT as jn,B as At,D as Lt,E as kt,F as or,G as ia,H as Dt,J as Zn,K as sr,I as qn}from"./installCanvasRenderer-DQ3trSBi.js";import{u as Jn}from"./exp-fN6tgzBZ.js";import{a as lr,_ as ur}from"./Checkbox-B0NmEvB4.js";import{_ as Qn,a as xa}from"./RadioGroup-DFjU_ho_.js";import{N as ei}from"./Switch-BTGJkP8J.js";import"./index.browser-OxPLOBIU.js";const ti=Qe([q("slider",`
 display: block;
 padding: calc((var(--n-handle-size) - var(--n-rail-height)) / 2) 0;
 position: relative;
 z-index: 0;
 width: 100%;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 `,[ze("reverse",[q("slider-handles",[q("slider-handle-wrapper",`
 transform: translate(50%, -50%);
 `)]),q("slider-dots",[q("slider-dot",`
 transform: translateX(50%, -50%);
 `)]),ze("vertical",[q("slider-handles",[q("slider-handle-wrapper",`
 transform: translate(-50%, -50%);
 `)]),q("slider-marks",[q("slider-mark",`
 transform: translateY(calc(-50% + var(--n-dot-height) / 2));
 `)]),q("slider-dots",[q("slider-dot",`
 transform: translateX(-50%) translateY(0);
 `)])])]),ze("vertical",`
 box-sizing: content-box;
 padding: 0 calc((var(--n-handle-size) - var(--n-rail-height)) / 2);
 width: var(--n-rail-width-vertical);
 height: 100%;
 `,[q("slider-handles",`
 top: calc(var(--n-handle-size) / 2);
 right: 0;
 bottom: calc(var(--n-handle-size) / 2);
 left: 0;
 `,[q("slider-handle-wrapper",`
 top: unset;
 left: 50%;
 transform: translate(-50%, 50%);
 `)]),q("slider-rail",`
 height: 100%;
 `,[ut("fill",`
 top: unset;
 right: 0;
 bottom: unset;
 left: 0;
 `)]),ze("with-mark",`
 width: var(--n-rail-width-vertical);
 margin: 0 32px 0 8px;
 `),q("slider-marks",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 22px;
 font-size: var(--n-mark-font-size);
 `,[q("slider-mark",`
 transform: translateY(50%);
 white-space: nowrap;
 `)]),q("slider-dots",`
 top: calc(var(--n-handle-size) / 2);
 right: unset;
 bottom: calc(var(--n-handle-size) / 2);
 left: 50%;
 `,[q("slider-dot",`
 transform: translateX(-50%) translateY(50%);
 `)])]),ze("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `,[q("slider-handle",`
 cursor: not-allowed;
 `)]),ze("with-mark",`
 width: 100%;
 margin: 8px 0 32px 0;
 `),Qe("&:hover",[q("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[ut("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),q("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),ze("active",[q("slider-rail",{backgroundColor:"var(--n-rail-color-hover)"},[ut("fill",{backgroundColor:"var(--n-fill-color-hover)"})]),q("slider-handle",{boxShadow:"var(--n-handle-box-shadow-hover)"})]),q("slider-marks",`
 position: absolute;
 top: 18px;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[q("slider-mark",`
 position: absolute;
 transform: translateX(-50%);
 white-space: nowrap;
 `)]),q("slider-rail",`
 width: 100%;
 position: relative;
 height: var(--n-rail-height);
 background-color: var(--n-rail-color);
 transition: background-color .3s var(--n-bezier);
 border-radius: calc(var(--n-rail-height) / 2);
 `,[ut("fill",`
 position: absolute;
 top: 0;
 bottom: 0;
 border-radius: calc(var(--n-rail-height) / 2);
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-fill-color);
 `)]),q("slider-handles",`
 position: absolute;
 top: 0;
 right: calc(var(--n-handle-size) / 2);
 bottom: 0;
 left: calc(var(--n-handle-size) / 2);
 `,[q("slider-handle-wrapper",`
 outline: none;
 position: absolute;
 top: 50%;
 transform: translate(-50%, -50%);
 cursor: pointer;
 display: flex;
 `,[q("slider-handle",`
 height: var(--n-handle-size);
 width: var(--n-handle-size);
 border-radius: 50%;
 overflow: hidden;
 transition: box-shadow .2s var(--n-bezier), background-color .3s var(--n-bezier);
 background-color: var(--n-handle-color);
 box-shadow: var(--n-handle-box-shadow);
 `,[Qe("&:hover",`
 box-shadow: var(--n-handle-box-shadow-hover);
 `)]),Qe("&:focus",[q("slider-handle",`
 box-shadow: var(--n-handle-box-shadow-focus);
 `,[Qe("&:hover",`
 box-shadow: var(--n-handle-box-shadow-active);
 `)])])])]),q("slider-dots",`
 position: absolute;
 top: 50%;
 left: calc(var(--n-handle-size) / 2);
 right: calc(var(--n-handle-size) / 2);
 `,[ze("transition-disabled",[q("slider-dot","transition: none;")]),q("slider-dot",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 position: absolute;
 transform: translate(-50%, -50%);
 height: var(--n-dot-height);
 width: var(--n-dot-width);
 border-radius: var(--n-dot-border-radius);
 overflow: hidden;
 box-sizing: border-box;
 border: var(--n-dot-border);
 background-color: var(--n-dot-color);
 `,[ze("active","border: var(--n-dot-border-active);")])])]),q("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[la()]),q("slider-handle-indicator",`
 font-size: var(--n-font-size);
 padding: 6px 10px;
 border-radius: var(--n-indicator-border-radius);
 color: var(--n-indicator-text-color);
 background-color: var(--n-indicator-color);
 box-shadow: var(--n-indicator-box-shadow);
 `,[ze("top",`
 margin-bottom: 12px;
 `),ze("right",`
 margin-left: 12px;
 `),ze("bottom",`
 margin-top: 12px;
 `),ze("left",`
 margin-right: 12px;
 `),la()]),Rr(q("slider",[q("slider-dot","background-color: var(--n-dot-color-modal);")])),Tr(q("slider",[q("slider-dot","background-color: var(--n-dot-color-popover);")]))]);function _a(n){return window.TouchEvent&&n instanceof window.TouchEvent}function ba(){const n=new Map,a=e=>t=>{n.set(e,t)};return Or(()=>{n.clear()}),[n,a]}const ai=0,ri=Object.assign(Object.assign({},ja.props),{to:Ut.propTo,defaultValue:{type:[Number,Array],default:0},marks:Object,disabled:{type:Boolean,default:void 0},formatTooltip:Function,keyboard:{type:Boolean,default:!0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:[Number,String],default:1},range:Boolean,value:[Number,Array],placement:String,showTooltip:{type:Boolean,default:void 0},tooltip:{type:Boolean,default:!0},vertical:Boolean,reverse:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onDragstart:[Function],onDragend:[Function]}),ni=pe({name:"Slider",props:ri,slots:Object,setup(n){const{mergedClsPrefixRef:a,namespaceRef:e,inlineThemeDisabled:t}=Br(n),r=ja("Slider","-slider",ti,Fr,n,a),o=W(null),[i,s]=ba(),[l,c]=ba(),d=W(new Set),u=Gr(n),{mergedDisabledRef:h}=u,v=se(()=>{const{step:_}=n;if(Number(_)<=0||_==="mark")return 0;const w=_.toString();let T=0;return w.includes(".")&&(T=w.length-w.indexOf(".")-1),T}),g=W(n.defaultValue),x=Ur(n,"value"),f=Kr(x,g),m=se(()=>{const{value:_}=f;return(n.range?_:[_]).map(A)}),S=se(()=>m.value.length>2),M=se(()=>n.placement===void 0?n.vertical?"right":"top":n.placement),N=se(()=>{const{marks:_}=n;return _?Object.keys(_).map(Number.parseFloat):null}),k=W(-1),R=W(-1),p=W(-1),I=W(!1),D=W(!1),G=se(()=>{const{vertical:_,reverse:w}=n;return _?w?"top":"bottom":w?"right":"left"}),V=se(()=>{if(S.value)return;const _=m.value,w=z(n.range?Math.min(..._):n.min),T=z(n.range?Math.max(..._):_[0]),{value:te}=G;return n.vertical?{[te]:`${w}%`,height:`${T-w}%`}:{[te]:`${w}%`,width:`${T-w}%`}}),H=se(()=>{const _=[],{marks:w}=n;if(w){const T=m.value.slice();T.sort((we,xe)=>we-xe);const{value:te}=G,{value:oe}=S,{range:me}=n,ke=oe?()=>!1:we=>me?we>=T[0]&&we<=T[T.length-1]:we<=T[0];for(const we of Object.keys(w)){const xe=Number(we);_.push({active:ke(xe),key:xe,label:w[we],style:{[te]:`${z(xe)}%`}})}}return _});function Z(_,w){const T=z(_),{value:te}=G;return{[te]:`${T}%`,zIndex:w===k.value?1:0}}function Q(_){return n.showTooltip||p.value===_||k.value===_&&I.value}function X(_){return I.value?!(k.value===_&&R.value===_):!0}function ge(_){var w;~_&&(k.value=_,(w=i.get(_))===null||w===void 0||w.focus())}function U(){l.forEach((_,w)=>{Q(w)&&_.syncPosition()})}function $(_){const{"onUpdate:value":w,onUpdateValue:T}=n,{nTriggerFormInput:te,nTriggerFormChange:oe}=u;T&&ct(T,_),w&&ct(w,_),g.value=_,te(),oe()}function ee(_){const{range:w}=n;if(w){if(Array.isArray(_)){const{value:T}=m;_.join()!==T.join()&&$(_)}}else Array.isArray(_)||m.value[0]!==_&&$(_)}function L(_,w){if(n.range){const T=m.value.slice();T.splice(w,1,_),ee(T)}else ee(_)}function C(_,w,T){const te=T!==void 0;T||(T=_-w>0?1:-1);const oe=N.value||[],{step:me}=n;if(me==="mark"){const xe=P(_,oe.concat(w),te?T:void 0);return xe?xe.value:w}if(me<=0)return w;const{value:ke}=v;let we;if(te){const xe=Number((w/me).toFixed(ke)),Ne=Math.floor(xe),Rt=xe>Ne?Ne:Ne-1,Tt=xe<Ne?Ne:Ne+1;we=P(w,[Number((Rt*me).toFixed(ke)),Number((Tt*me).toFixed(ke)),...oe],T)}else{const xe=B(_);we=P(_,[...oe,xe])}return we?A(we.value):w}function A(_){return Math.min(n.max,Math.max(n.min,_))}function z(_){const{max:w,min:T}=n;return(_-T)/(w-T)*100}function y(_){const{max:w,min:T}=n;return T+(w-T)*_}function B(_){const{step:w,min:T}=n;if(Number(w)<=0||w==="mark")return _;const te=Math.round((_-T)/w)*w+T;return Number(te.toFixed(v.value))}function P(_,w=N.value,T){if(!(w!=null&&w.length))return null;let te=null,oe=-1;for(;++oe<w.length;){const me=w[oe]-_,ke=Math.abs(me);(T===void 0||me*T>0)&&(te===null||ke<te.distance)&&(te={index:oe,distance:ke,value:w[oe]})}return te}function j(_){const w=o.value;if(!w)return;const T=_a(_)?_.touches[0]:_,te=w.getBoundingClientRect();let oe;return n.vertical?oe=(te.bottom-T.clientY)/te.height:oe=(T.clientX-te.left)/te.width,n.reverse&&(oe=1-oe),y(oe)}function O(_){if(h.value||!n.keyboard)return;const{vertical:w,reverse:T}=n;switch(_.key){case"ArrowUp":_.preventDefault(),K(w&&T?-1:1);break;case"ArrowRight":_.preventDefault(),K(!w&&T?-1:1);break;case"ArrowDown":_.preventDefault(),K(w&&T?1:-1);break;case"ArrowLeft":_.preventDefault(),K(!w&&T?1:-1);break}}function K(_){const w=k.value;if(w===-1)return;const{step:T}=n,te=m.value[w],oe=Number(T)<=0||T==="mark"?te:te+T*_;L(C(oe,te,_>0?1:-1),w)}function Y(_){var w,T;if(h.value||!_a(_)&&_.button!==ai)return;const te=j(_);if(te===void 0)return;const oe=m.value.slice(),me=n.range?(T=(w=P(te,oe))===null||w===void 0?void 0:w.index)!==null&&T!==void 0?T:-1:0;me!==-1&&(_.preventDefault(),ge(me),F(),L(C(te,m.value[me]),me))}function F(){I.value||(I.value=!0,n.onDragstart&&ct(n.onDragstart),dt("touchend",document,le),dt("mouseup",document,le),dt("touchmove",document,ne),dt("mousemove",document,ne))}function E(){I.value&&(I.value=!1,n.onDragend&&ct(n.onDragend),ht("touchend",document,le),ht("mouseup",document,le),ht("touchmove",document,ne),ht("mousemove",document,ne))}function ne(_){const{value:w}=k;if(!I.value||w===-1){E();return}const T=j(_);T!==void 0&&L(C(T,m.value[w]),w)}function le(){E()}function Se(_){k.value=_,h.value||(p.value=_)}function de(_){k.value===_&&(k.value=-1,E()),p.value===_&&(p.value=-1)}function yr(_){p.value=_}function xr(_){p.value===_&&(p.value=-1)}Le(k,(_,w)=>void ue(()=>R.value=w)),Le(f,()=>{if(n.marks){if(D.value)return;D.value=!0,ue(()=>{D.value=!1})}ue(U)}),Wr(()=>{E()});const oa=se(()=>{const{self:{markFontSize:_,railColor:w,railColorHover:T,fillColor:te,fillColorHover:oe,handleColor:me,opacityDisabled:ke,dotColor:we,dotColorModal:xe,handleBoxShadow:Ne,handleBoxShadowHover:Rt,handleBoxShadowActive:Tt,handleBoxShadowFocus:_r,dotBorder:br,dotBoxShadow:Sr,railHeight:wr,railWidthVertical:Mr,handleSize:zr,dotHeight:Vr,dotWidth:Cr,dotBorderRadius:Ir,fontSize:Ar,dotBorderActive:Lr,dotColorPopover:kr},common:{cubicBezierEaseInOut:Dr}}=r.value;return{"--n-bezier":Dr,"--n-dot-border":br,"--n-dot-border-active":Lr,"--n-dot-border-radius":Ir,"--n-dot-box-shadow":Sr,"--n-dot-color":we,"--n-dot-color-modal":xe,"--n-dot-color-popover":kr,"--n-dot-height":Vr,"--n-dot-width":Cr,"--n-fill-color":te,"--n-fill-color-hover":oe,"--n-font-size":Ar,"--n-handle-box-shadow":Ne,"--n-handle-box-shadow-active":Tt,"--n-handle-box-shadow-focus":_r,"--n-handle-box-shadow-hover":Rt,"--n-handle-color":me,"--n-handle-size":zr,"--n-opacity-disabled":ke,"--n-rail-color":w,"--n-rail-color-hover":T,"--n-rail-height":wr,"--n-rail-width-vertical":Mr,"--n-mark-font-size":_}}),We=t?ua("slider",void 0,oa,n):void 0,sa=se(()=>{const{self:{fontSize:_,indicatorColor:w,indicatorBoxShadow:T,indicatorTextColor:te,indicatorBorderRadius:oe}}=r.value;return{"--n-font-size":_,"--n-indicator-border-radius":oe,"--n-indicator-box-shadow":T,"--n-indicator-color":w,"--n-indicator-text-color":te}}),Xe=t?ua("slider-indicator",void 0,sa,n):void 0;return{mergedClsPrefix:a,namespace:e,uncontrolledValue:g,mergedValue:f,mergedDisabled:h,mergedPlacement:M,isMounted:Xr(),adjustedTo:Ut(n),dotTransitionDisabled:D,markInfos:H,isShowTooltip:Q,shouldKeepTooltipTransition:X,handleRailRef:o,setHandleRefs:s,setFollowerRefs:c,fillStyle:V,getHandleStyle:Z,activeIndex:k,arrifiedValues:m,followerEnabledIndexSet:d,handleRailMouseDown:Y,handleHandleFocus:Se,handleHandleBlur:de,handleHandleMouseEnter:yr,handleHandleMouseLeave:xr,handleRailKeyDown:O,indicatorCssVars:t?void 0:sa,indicatorThemeClass:Xe==null?void 0:Xe.themeClass,indicatorOnRender:Xe==null?void 0:Xe.onRender,cssVars:t?void 0:oa,themeClass:We==null?void 0:We.themeClass,onRender:We==null?void 0:We.onRender}},render(){var n;const{mergedClsPrefix:a,themeClass:e,formatTooltip:t}=this;return(n=this.onRender)===null||n===void 0||n.call(this),ve("div",{class:[`${a}-slider`,e,{[`${a}-slider--disabled`]:this.mergedDisabled,[`${a}-slider--active`]:this.activeIndex!==-1,[`${a}-slider--with-mark`]:this.marks,[`${a}-slider--vertical`]:this.vertical,[`${a}-slider--reverse`]:this.reverse}],style:this.cssVars,onKeydown:this.handleRailKeyDown,onMousedown:this.handleRailMouseDown,onTouchstart:this.handleRailMouseDown},ve("div",{class:`${a}-slider-rail`},ve("div",{class:`${a}-slider-rail__fill`,style:this.fillStyle}),this.marks?ve("div",{class:[`${a}-slider-dots`,this.dotTransitionDisabled&&`${a}-slider-dots--transition-disabled`]},this.markInfos.map(r=>ve("div",{key:r.key,class:[`${a}-slider-dot`,{[`${a}-slider-dot--active`]:r.active}],style:r.style}))):null,ve("div",{ref:"handleRailRef",class:`${a}-slider-handles`},this.arrifiedValues.map((r,o)=>{const i=this.isShowTooltip(o);return ve(Pr,null,{default:()=>[ve(Er,null,{default:()=>ve("div",{ref:this.setHandleRefs(o),class:`${a}-slider-handle-wrapper`,tabindex:this.mergedDisabled?-1:0,role:"slider","aria-valuenow":r,"aria-valuemin":this.min,"aria-valuemax":this.max,"aria-orientation":this.vertical?"vertical":"horizontal","aria-disabled":this.disabled,style:this.getHandleStyle(r,o),onFocus:()=>{this.handleHandleFocus(o)},onBlur:()=>{this.handleHandleBlur(o)},onMouseenter:()=>{this.handleHandleMouseEnter(o)},onMouseleave:()=>{this.handleHandleMouseLeave(o)}},Nr(this.$slots.thumb,()=>[ve("div",{class:`${a}-slider-handle`})]))}),this.tooltip&&ve(Hr,{ref:this.setFollowerRefs(o),show:i,to:this.adjustedTo,enabled:this.showTooltip&&!this.range||this.followerEnabledIndexSet.has(o),teleportDisabled:this.adjustedTo===Ut.tdkey,placement:this.mergedPlacement,containerClass:this.namespace},{default:()=>ve($r,{name:"fade-in-scale-up-transition",appear:this.isMounted,css:this.shouldKeepTooltipTransition(o),onEnter:()=>{this.followerEnabledIndexSet.add(o)},onAfterLeave:()=>{this.followerEnabledIndexSet.delete(o)}},{default:()=>{var s;return i?((s=this.indicatorOnRender)===null||s===void 0||s.call(this),ve("div",{class:[`${a}-slider-handle-indicator`,this.indicatorThemeClass,`${a}-slider-handle-indicator--${this.mergedPlacement}`],style:this.indicatorCssVars},typeof t=="function"?t(r):r)):null}})})]})})),this.marks?ve("div",{class:`${a}-slider-marks`},this.markInfos.map(r=>ve("div",{key:r.key,class:`${a}-slider-mark`,style:r.style},typeof r.label=="function"?r.label():r.label))):null))}}),ii=pe({__name:"DataFields",props:Mt({allFields:{},dividerKey:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const a=n,e=Ee(n,"modelValue"),t=se(()=>{const o=[];return Be(a.allFields,(i,s)=>{o.push({key:s,label:s,children:i==null?void 0:i.map(l=>({key:`${s}${a.dividerKey}${l}`,label:l}))})}),o}),r=(o,i)=>{};return(o,i)=>{const s=ln;return J(),ye(s,{"block-line":"","show-line":"",checkable:"","expand-on-click":"","check-on-click":"","default-expand-all":"","check-strategy":"child",data:b(t),"checked-keys":e.value,"onUpdate:checkedKeys":i[0]||(i[0]=l=>e.value=l),onUpdateCheckedKeys:r},null,8,["data","checked-keys"])}}}),oi={key:0,class:"flex items-center gap-2"},si={class:"w-2"},li=pe({__name:"VarSelect",props:Mt({options:{},plotType:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const a=n,e=Ee(n,"modelValue"),t=["X","Y","Z"],r=se(()=>{var i;return(i=a.options)==null?void 0:i.map(s=>s==null?void 0:s.map((l,c)=>({...l,label:Ae(l),value:c})))}),o=(i,s)=>{};return(i,s)=>{const l=Za,c=Qt,d=qt;return J(),ye(d,{cols:1,"x-gap":10,"y-gap":"10"},{default:ie(()=>[(J(!0),ce(zt,null,Jt(i.options,(u,h)=>(J(),ye(c,{key:h},{default:ie(()=>[!b(he)(u)&&b(r)?(J(),ce("div",oi,[fe("span",si,Ve(t[h]),1),ae(l,{options:b(r)[h],value:e.value[h],"onUpdate:value":v=>e.value[h]=v,class:"flex-1",onUpdateValue:o,size:"small"},null,8,["options","value","onUpdate:value"])])):Me("",!0)]),_:2},1024))),128))]),_:1})}}});var Yt=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.getInitialData=function(e,t){return Ct(null,this,{useEncodeDefaulter:!0})},a.prototype.getMarkerPosition=function(e,t,r){var o=this.coordinateSystem;if(o&&o.clampData){var i=o.clampData(e),s=o.dataToPoint(i);if(r)re(o.getAxes(),function(h,v){if(h.type==="category"&&t!=null){var g=h.getTicksCoords(),x=h.getTickModel().get("alignWithLabel"),f=i[v],m=t[v]==="x1"||t[v]==="y1";if(m&&!x&&(f+=1),g.length<2)return;if(g.length===2){s[v]=h.toGlobalCoord(h.getExtent()[m?1:0]);return}for(var S=void 0,M=void 0,N=1,k=0;k<g.length;k++){var R=g[k].coord,p=k===g.length-1?g[k-1].tickValue+N:g[k].tickValue;if(p===f){M=R;break}else if(p<f)S=R;else if(S!=null&&p>f){M=(R+S)/2;break}k===1&&(N=p-g[0].tickValue)}M==null&&(S?S&&(M=g[g.length-1].coord):M=g[0].coord),s[v]=h.toGlobalCoord(M)}});else{var l=this.getData(),c=l.getLayout("offset"),d=l.getLayout("size"),u=o.getBaseAxis().isHorizontal()?0:1;s[u]+=c+d/2}return s}return[NaN,NaN]},a.type="series.__base_bar__",a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},a}(It);It.registerClass(Yt);var ui=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.getInitialData=function(){return Ct(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},a.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},a.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return t>e&&(e=t),e},a.prototype.brushSelector=function(e,t,r){return r.rect(t.getItemLayout(e))},a.type="series.bar",a.dependencies=["grid","polar"],a.defaultOption=ea(Yt.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),a}(Yt),ci=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),Sa=function(n){be(a,n);function a(e){var t=n.call(this,e)||this;return t.type="sausage",t}return a.prototype.getDefaultShape=function(){return new ci},a.prototype.buildPath=function(e,t){var r=t.cx,o=t.cy,i=Math.max(t.r0||0,0),s=Math.max(t.r,0),l=(s-i)*.5,c=i+l,d=t.startAngle,u=t.endAngle,h=t.clockwise,v=Math.PI*2,g=h?u-d<v:d-u<v;g||(d=u-(h?v:-v));var x=Math.cos(d),f=Math.sin(d),m=Math.cos(u),S=Math.sin(u);g?(e.moveTo(x*i+r,f*i+o),e.arc(x*c+r,f*c+o,l,-Math.PI+d,d,!h)):e.moveTo(x*s+r,f*s+o),e.arc(r,o,s,d,u,!h),e.arc(m*c+r,S*c+o,l,u-Math.PI*2,u-Math.PI,!h),i!==0&&e.arc(r,o,i,u,d,h)},a}(ta);function di(n,a){a=a||{};var e=a.isRoundCap;return function(t,r,o){var i=r.position;if(!i||i instanceof Array)return va(t,r,o);var s=n(i),l=r.distance!=null?r.distance:5,c=this.shape,d=c.cx,u=c.cy,h=c.r,v=c.r0,g=(h+v)/2,x=c.startAngle,f=c.endAngle,m=(x+f)/2,S=e?Math.abs(h-v)/2:0,M=Math.cos,N=Math.sin,k=d+h*M(x),R=u+h*N(x),p="left",I="top";switch(s){case"startArc":k=d+(v-l)*M(m),R=u+(v-l)*N(m),p="center",I="top";break;case"insideStartArc":k=d+(v+l)*M(m),R=u+(v+l)*N(m),p="center",I="bottom";break;case"startAngle":k=d+g*M(x)+pt(x,l+S,!1),R=u+g*N(x)+vt(x,l+S,!1),p="right",I="middle";break;case"insideStartAngle":k=d+g*M(x)+pt(x,-l+S,!1),R=u+g*N(x)+vt(x,-l+S,!1),p="left",I="middle";break;case"middle":k=d+g*M(m),R=u+g*N(m),p="center",I="middle";break;case"endArc":k=d+(h+l)*M(m),R=u+(h+l)*N(m),p="center",I="bottom";break;case"insideEndArc":k=d+(h-l)*M(m),R=u+(h-l)*N(m),p="center",I="top";break;case"endAngle":k=d+g*M(f)+pt(f,l+S,!0),R=u+g*N(f)+vt(f,l+S,!0),p="left",I="middle";break;case"insideEndAngle":k=d+g*M(f)+pt(f,-l+S,!0),R=u+g*N(f)+vt(f,-l+S,!0),p="right",I="middle";break;default:return va(t,r,o)}return t=t||{},t.x=k,t.y=R,t.align=p,t.verticalAlign=I,t}}function hi(n,a,e,t){if(un(t)){n.setTextConfig({rotation:t});return}else if(Ie(a)){n.setTextConfig({rotation:0});return}var r=n.shape,o=r.clockwise?r.startAngle:r.endAngle,i=r.clockwise?r.endAngle:r.startAngle,s=(o+i)/2,l,c=e(a);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=i;break;default:n.setTextConfig({rotation:0});return}var d=Math.PI*1.5-l;c==="middle"&&d>Math.PI/2&&d<Math.PI*1.5&&(d-=Math.PI),n.setTextConfig({rotation:d})}function pt(n,a,e){return a*Math.sin(n)*(e?-1:1)}function vt(n,a,e){return a*Math.cos(n)*(e?1:-1)}function pi(n,a,e){var t=n.get("borderRadius");if(t==null)return{cornerRadius:0};Ie(t)||(t=[t,t,t,t]);var r=Math.abs(a.r||0-a.r0||0);return{cornerRadius:Je(t,function(o){return Kt(o,r)})}}var $t=Math.max,Bt=Math.min;function vi(n,a){var e=n.getArea&&n.getArea();if(ra(n,"cartesian2d")){var t=n.getBaseAxis();if(t.type!=="category"||!t.onBand){var r=a.getLayout("bandWidth");t.isHorizontal()?(e.x-=r,e.width+=r*2):(e.y-=r,e.height+=r*2)}}return e}var fi=function(n){be(a,n);function a(){var e=n.call(this)||this;return e.type=a.type,e._isFirstFrame=!0,e}return a.prototype.render=function(e,t,r,o){this._model=e,this._removeOnRenderedListener(r),this._updateDrawMode(e);var i=e.get("coordinateSystem");(i==="cartesian2d"||i==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,t,r):this._renderNormal(e,t,r,o))},a.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},a.prototype.incrementalRender=function(e,t){this._progressiveEls=[],this._incrementalRenderLarge(e,t)},a.prototype.eachRendered=function(e){Ja(this._progressiveEls||this.group,e)},a.prototype._updateDrawMode=function(e){var t=e.pipelineContext.large;(this._isLargeDraw==null||t!==this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},a.prototype._renderNormal=function(e,t,r,o){var i=this.group,s=e.getData(),l=this._data,c=e.coordinateSystem,d=c.getBaseAxis(),u;c.type==="cartesian2d"?u=d.isHorizontal():c.type==="polar"&&(u=d.dim==="angle");var h=e.isAnimationEnabled()?e:null,v=gi(e,c);v&&this._enableRealtimeSort(v,s,r);var g=e.get("clip",!0)||v,x=vi(c,s);i.removeClipPath();var f=e.get("roundCap",!0),m=e.get("showBackground",!0),S=e.getModel("backgroundStyle"),M=S.get("borderRadius")||0,N=[],k=this._backgroundEls,R=o&&o.isInitSort,p=o&&o.type==="changeAxisOrder";function I(V){var H=ft[c.type](s,V),Z=wi(c,u,H);return Z.useStyle(S.getItemStyle()),c.type==="cartesian2d"?Z.setShape("r",M):Z.setShape("cornerRadius",M),N[V]=Z,Z}s.diff(l).add(function(V){var H=s.getItemModel(V),Z=ft[c.type](s,V,H);if(m&&I(V),!(!s.hasValue(V)||!Ca[c.type](Z))){var Q=!1;g&&(Q=wa[c.type](x,Z));var X=Ma[c.type](e,s,V,Z,u,h,d.model,!1,f);v&&(X.forceLabelAnimation=!0),Ia(X,s,V,H,Z,e,u,c.type==="polar"),R?X.attr({shape:Z}):v?za(v,h,X,Z,V,u,!1,!1):_t(X,{shape:Z},e,V),s.setItemGraphicEl(V,X),i.add(X),X.ignore=Q}}).update(function(V,H){var Z=s.getItemModel(V),Q=ft[c.type](s,V,Z);if(m){var X=void 0;k.length===0?X=I(H):(X=k[H],X.useStyle(S.getItemStyle()),c.type==="cartesian2d"?X.setShape("r",M):X.setShape("cornerRadius",M),N[V]=X);var ge=ft[c.type](s,V),U=dr(u,ge,c);rt(X,{shape:U},h,V)}var $=l.getItemGraphicEl(H);if(!s.hasValue(V)||!Ca[c.type](Q)){i.remove($);return}var ee=!1;if(g&&(ee=wa[c.type](x,Q),ee&&i.remove($)),$?cn($):$=Ma[c.type](e,s,V,Q,u,h,d.model,!!$,f),v&&($.forceLabelAnimation=!0),p){var L=$.getTextContent();if(L){var C=dn(L);C.prevValue!=null&&(C.prevValue=C.value)}}else Ia($,s,V,Z,Q,e,u,c.type==="polar");R?$.attr({shape:Q}):v?za(v,h,$,Q,V,u,!0,p):rt($,{shape:Q},e,V,null),s.setItemGraphicEl(V,$),$.ignore=ee,i.add($)}).remove(function(V){var H=l.getItemGraphicEl(V);H&&fa(H,e,V)}).execute();var D=this._backgroundGroup||(this._backgroundGroup=new je);D.removeAll();for(var G=0;G<N.length;++G)D.add(N[G]);i.add(D),this._backgroundEls=N,this._data=s},a.prototype._renderLarge=function(e,t,r){this._clear(),La(e,this.group),this._updateLargeClip(e)},a.prototype._incrementalRenderLarge=function(e,t){this._removeBackground(),La(t,this.group,this._progressiveEls,!0)},a.prototype._updateLargeClip=function(e){var t=e.get("clip",!0)&&hn(e.coordinateSystem,!1,e),r=this.group;t?r.setClipPath(t):r.removeClipPath()},a.prototype._enableRealtimeSort=function(e,t,r){var o=this;if(t.count()){var i=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(t,e,r),this._isFirstFrame=!1;else{var s=function(l){var c=t.getItemGraphicEl(l),d=c&&c.shape;return d&&Math.abs(i.isHorizontal()?d.height:d.width)||0};this._onRendered=function(){o._updateSortWithinSameData(t,s,i,r)},r.getZr().on("rendered",this._onRendered)}}},a.prototype._dataSort=function(e,t,r){var o=[];return e.each(e.mapDimension(t.dim),function(i,s){var l=r(s);l=l??NaN,o.push({dataIndex:s,mappedValue:l,ordinalNumber:i})}),o.sort(function(i,s){return s.mappedValue-i.mappedValue}),{ordinalNumbers:Je(o,function(i){return i.ordinalNumber})}},a.prototype._isOrderChangedWithinSameData=function(e,t,r){for(var o=r.scale,i=e.mapDimension(r.dim),s=Number.MAX_VALUE,l=0,c=o.getOrdinalMeta().categories.length;l<c;++l){var d=e.rawIndexOf(i,o.getRawOrdinalNumber(l)),u=d<0?Number.MIN_VALUE:t(e.indexOfRawIndex(d));if(u>s)return!0;s=u}return!1},a.prototype._isOrderDifferentInView=function(e,t){for(var r=t.scale,o=r.getExtent(),i=Math.max(0,o[0]),s=Math.min(o[1],r.getOrdinalMeta().categories.length-1);i<=s;++i)if(e.ordinalNumbers[i]!==r.getRawOrdinalNumber(i))return!0},a.prototype._updateSortWithinSameData=function(e,t,r,o){if(this._isOrderChangedWithinSameData(e,t,r)){var i=this._dataSort(e,r,t);this._isOrderDifferentInView(i,r)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:r.dim+"Axis",axisId:r.index,sortInfo:i}))}},a.prototype._dispatchInitSort=function(e,t,r){var o=t.baseAxis,i=this._dataSort(e,o,function(s){return e.get(e.mapDimension(t.otherAxis.dim),s)});r.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:i})},a.prototype.remove=function(e,t){this._clear(this._model),this._removeOnRenderedListener(t)},a.prototype.dispose=function(e,t){this._removeOnRenderedListener(t)},a.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},a.prototype._clear=function(e){var t=this.group,r=this._data;e&&e.isAnimationEnabled()&&r&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],r.eachItemGraphicEl(function(o){fa(o,e,lt(o).dataIndex)})):t.removeAll(),this._data=null,this._isFirstFrame=!0},a.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},a.type="bar",a}(aa),wa={cartesian2d:function(n,a){var e=a.width<0?-1:1,t=a.height<0?-1:1;e<0&&(a.x+=a.width,a.width=-a.width),t<0&&(a.y+=a.height,a.height=-a.height);var r=n.x+n.width,o=n.y+n.height,i=$t(a.x,n.x),s=Bt(a.x+a.width,r),l=$t(a.y,n.y),c=Bt(a.y+a.height,o),d=s<i,u=c<l;return a.x=d&&i>r?s:i,a.y=u&&l>o?c:l,a.width=d?0:s-i,a.height=u?0:c-l,e<0&&(a.x+=a.width,a.width=-a.width),t<0&&(a.y+=a.height,a.height=-a.height),d||u},polar:function(n,a){var e=a.r0<=a.r?1:-1;if(e<0){var t=a.r;a.r=a.r0,a.r0=t}var r=Bt(a.r,n.r),o=$t(a.r0,n.r0);a.r=r,a.r0=o;var i=r-o<0;if(e<0){var t=a.r;a.r=a.r0,a.r0=t}return i}},Ma={cartesian2d:function(n,a,e,t,r,o,i,s,l){var c=new Ze({shape:na({},t),z2:1});if(c.__dataIndex=e,c.name="item",o){var d=c.shape,u=r?"height":"width";d[u]=0}return c},polar:function(n,a,e,t,r,o,i,s,l){var c=!r&&l?Sa:Qa,d=new c({shape:t,z2:1});d.name="item";var u=cr(r);if(d.calculateTextPosition=di(u,{isRoundCap:c===Sa}),o){var h=d.shape,v=r?"r":"endAngle",g={};h[v]=r?t.r0:t.startAngle,g[v]=t[v],(s?rt:_t)(d,{shape:g},o)}return d}};function gi(n,a){var e=n.get("realtimeSort",!0),t=a.getBaseAxis();if(e&&t.type==="category"&&a.type==="cartesian2d")return{baseAxis:t,otherAxis:a.getOtherAxis(t)}}function za(n,a,e,t,r,o,i,s){var l,c;o?(c={x:t.x,width:t.width},l={y:t.y,height:t.height}):(c={y:t.y,height:t.height},l={x:t.x,width:t.width}),s||(i?rt:_t)(e,{shape:l},a,r,null);var d=a?n.baseAxis.model:null;(i?rt:_t)(e,{shape:c},d,r)}function Va(n,a){for(var e=0;e<a.length;e++)if(!isFinite(n[a[e]]))return!0;return!1}var mi=["x","y","width","height"],yi=["cx","cy","r","startAngle","endAngle"],Ca={cartesian2d:function(n){return!Va(n,mi)},polar:function(n){return!Va(n,yi)}},ft={cartesian2d:function(n,a,e){var t=n.getItemLayout(a),r=e?_i(e,t):0,o=t.width>0?1:-1,i=t.height>0?1:-1;return{x:t.x+o*r/2,y:t.y+i*r/2,width:t.width-o*r,height:t.height-i*r}},polar:function(n,a,e){var t=n.getItemLayout(a);return{cx:t.cx,cy:t.cy,r0:t.r0,r:t.r,startAngle:t.startAngle,endAngle:t.endAngle,clockwise:t.clockwise}}};function xi(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function cr(n){return function(a){var e=a?"Arc":"Angle";return function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}}}(n)}function Ia(n,a,e,t,r,o,i,s){var l=a.getItemVisual(e,"style");if(s){if(!o.get("roundCap")){var d=n.shape,u=pi(t.getModel("itemStyle"),d);na(d,u),n.setShape(d)}}else{var c=t.get(["itemStyle","borderRadius"])||0;n.setShape("r",c)}n.useStyle(l);var h=t.getShallow("cursor");h&&n.attr("cursor",h);var v=s?i?r.r>=r.r0?"endArc":"startArc":r.endAngle>=r.startAngle?"endAngle":"startAngle":i?r.height>=0?"bottom":"top":r.width>=0?"right":"left",g=Wt(t);er(n,g,{labelFetcher:o,labelDataIndex:e,defaultText:pn(o.getData(),e),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:v});var x=n.getTextContent();if(s&&x){var f=t.get(["label","position"]);n.textConfig.inside=f==="middle"?!0:null,hi(n,f==="outside"?v:f,cr(i),t.get(["label","rotate"]))}vn(x,g,o.getRawValue(e),function(S){return mn(a,S)});var m=t.getModel(["emphasis"]);tr(n,m.get("focus"),m.get("blurScope"),m.get("disabled")),fn(n,t),xi(r)&&(n.style.fill="none",n.style.stroke="none",re(n.states,function(S){S.style&&(S.style.fill=S.style.stroke="none")}))}function _i(n,a){var e=n.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var t=n.get(["itemStyle","borderWidth"])||0,r=isNaN(a.width)?Number.MAX_VALUE:Math.abs(a.width),o=isNaN(a.height)?Number.MAX_VALUE:Math.abs(a.height);return Math.min(t,r,o)}var bi=function(){function n(){}return n}(),Aa=function(n){be(a,n);function a(e){var t=n.call(this,e)||this;return t.type="largeBar",t}return a.prototype.getDefaultShape=function(){return new bi},a.prototype.buildPath=function(e,t){for(var r=t.points,o=this.baseDimIdx,i=1-this.baseDimIdx,s=[],l=[],c=this.barWidth,d=0;d<r.length;d+=3)l[o]=c,l[i]=r[d+2],s[o]=r[d+o],s[i]=r[d+i],e.rect(s[0],s[1],l[0],l[1])},a}(ta);function La(n,a,e,t){var r=n.getData(),o=r.getLayout("valueAxisHorizontal")?1:0,i=r.getLayout("largeDataIndices"),s=r.getLayout("size"),l=n.getModel("backgroundStyle"),c=r.getLayout("largeBackgroundPoints");if(c){var d=new Aa({shape:{points:c},incremental:!!t,silent:!0,z2:0});d.baseDimIdx=o,d.largeDataIndices=i,d.barWidth=s,d.useStyle(l.getItemStyle()),a.add(d),e&&e.push(d)}var u=new Aa({shape:{points:r.getLayout("largePoints")},incremental:!!t,ignoreCoarsePointer:!0,z2:1});u.baseDimIdx=o,u.largeDataIndices=i,u.barWidth=s,a.add(u),u.useStyle(r.getVisual("style")),u.style.stroke=null,lt(u).seriesIndex=n.seriesIndex,n.get("silent")||(u.on("mousedown",ka),u.on("mousemove",ka)),e&&e.push(u)}var ka=gn(function(n){var a=this,e=Si(a,n.offsetX,n.offsetY);lt(a).dataIndex=e>=0?e:null},30,!1);function Si(n,a,e){for(var t=n.baseDimIdx,r=1-t,o=n.shape.points,i=n.largeDataIndices,s=[],l=[],c=n.barWidth,d=0,u=o.length/3;d<u;d++){var h=d*3;if(l[t]=c,l[r]=o[h+2],s[t]=o[h+t],s[r]=o[h+r],l[r]<0&&(s[r]+=l[r],l[r]=-l[r]),a>=s[0]&&a<=s[0]+l[0]&&e>=s[1]&&e<=s[1]+l[1])return i[d]}return-1}function dr(n,a,e){if(ra(e,"cartesian2d")){var t=a,r=e.getArea();return{x:n?t.x:r.x,y:n?r.y:t.y,width:n?t.width:r.width,height:n?r.height:t.height}}else{var r=e.getArea(),o=a;return{cx:r.cx,cy:r.cy,r0:n?r.r0:o.r0,r:n?r.r:o.r,startAngle:n?o.startAngle:0,endAngle:n?o.endAngle:Math.PI*2}}}function wi(n,a,e){var t=n.type==="polar"?Qa:Ze;return new t({shape:dr(a,e,n),silent:!0,z2:0})}function Mi(n){n.registerChartView(fi),n.registerSeriesModel(ui),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,yn(bn,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,xn("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,_n("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(a,e){var t=a.componentType||"series";e.eachComponent({mainType:t,query:a},function(r){a.sortInfo&&r.axis.setCategorySortInfo(a.sortInfo)})})}var zi=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e.hasSymbolVisual=!0,e}return a.prototype.getInitialData=function(e,t){return Ct(null,this,{useEncodeDefaulter:!0})},a.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},a.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},a.prototype.brushSelector=function(e,t,r){return r.point(t.getItemLayout(e))},a.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},a.type="series.scatter",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},a}(It),hr=4,Vi=function(){function n(){}return n}(),Ci=function(n){be(a,n);function a(e){var t=n.call(this,e)||this;return t._off=0,t.hoverDataIdx=-1,t}return a.prototype.getDefaultShape=function(){return new Vi},a.prototype.reset=function(){this.notClear=!1,this._off=0},a.prototype.buildPath=function(e,t){var r=t.points,o=t.size,i=this.symbolProxy,s=i.shape,l=e.getContext?e.getContext():e,c=l&&o[0]<hr,d=this.softClipShape,u;if(c){this._ctx=l;return}for(this._ctx=null,u=this._off;u<r.length;){var h=r[u++],v=r[u++];isNaN(h)||isNaN(v)||d&&!d.contain(h,v)||(s.x=h-o[0]/2,s.y=v-o[1]/2,s.width=o[0],s.height=o[1],i.buildPath(e,s,!0))}this.incremental&&(this._off=u,this.notClear=!0)},a.prototype.afterBrush=function(){var e=this.shape,t=e.points,r=e.size,o=this._ctx,i=this.softClipShape,s;if(o){for(s=this._off;s<t.length;){var l=t[s++],c=t[s++];isNaN(l)||isNaN(c)||i&&!i.contain(l,c)||o.fillRect(l-r[0]/2,c-r[1]/2,r[0],r[1])}this.incremental&&(this._off=s,this.notClear=!0)}},a.prototype.findDataIndex=function(e,t){for(var r=this.shape,o=r.points,i=r.size,s=Math.max(i[0],4),l=Math.max(i[1],4),c=o.length/2-1;c>=0;c--){var d=c*2,u=o[d]-s/2,h=o[d+1]-l/2;if(e>=u&&t>=h&&e<=u+s&&t<=h+l)return c}return-1},a.prototype.contain=function(e,t){var r=this.transformCoordToLocal(e,t),o=this.getBoundingRect();if(e=r[0],t=r[1],o.contain(e,t)){var i=this.hoverDataIdx=this.findDataIndex(e,t);return i>=0}return this.hoverDataIdx=-1,!1},a.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var t=this.shape,r=t.points,o=t.size,i=o[0],s=o[1],l=1/0,c=1/0,d=-1/0,u=-1/0,h=0;h<r.length;){var v=r[h++],g=r[h++];l=Math.min(v,l),d=Math.max(v,d),c=Math.min(g,c),u=Math.max(g,u)}e=this._rect=new Sn(l-i/2,c-s/2,d-l+i,u-c+s)}return e},a}(ta),Ii=function(){function n(){this.group=new je}return n.prototype.updateData=function(a,e){this._clear();var t=this._create();t.setShape({points:a.getLayout("points")}),this._setCommon(t,a,e)},n.prototype.updateLayout=function(a){var e=a.getLayout("points");this.group.eachChild(function(t){if(t.startIndex!=null){var r=(t.endIndex-t.startIndex)*2,o=t.startIndex*4*2;e=new Float32Array(e.buffer,o,r)}t.setShape("points",e),t.reset()})},n.prototype.incrementalPrepareUpdate=function(a){this._clear()},n.prototype.incrementalUpdate=function(a,e,t){var r=this._newAdded[0],o=e.getLayout("points"),i=r&&r.shape.points;if(i&&i.length<2e4){var s=i.length,l=new Float32Array(s+o.length);l.set(i),l.set(o,s),r.endIndex=a.end,r.setShape({points:l})}else{this._newAdded=[];var c=this._create();c.startIndex=a.start,c.endIndex=a.end,c.incremental=!0,c.setShape({points:o}),this._setCommon(c,e,t)}},n.prototype.eachRendered=function(a){this._newAdded[0]&&a(this._newAdded[0])},n.prototype._create=function(){var a=new Ci({cursor:"default"});return a.ignoreCoarsePointer=!0,this.group.add(a),this._newAdded.push(a),a},n.prototype._setCommon=function(a,e,t){var r=e.hostModel;t=t||{};var o=e.getVisual("symbolSize");a.setShape("size",o instanceof Array?o:[o,o]),a.softClipShape=t.clipShape||null,a.symbolProxy=bt(e.getVisual("symbol"),0,0,0,0),a.setColor=a.symbolProxy.setColor;var i=a.shape.size[0]<hr;a.useStyle(r.getModel("itemStyle").getItemStyle(i?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("style"),l=s&&s.fill;l&&a.setColor(l);var c=lt(a);c.seriesIndex=r.seriesIndex,a.on("mousemove",function(d){c.dataIndex=null;var u=a.hoverDataIdx;u>=0&&(c.dataIndex=u+(a.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),Ai=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.render=function(e,t,r){var o=e.getData(),i=this._updateSymbolDraw(o,e);i.updateData(o,{clipShape:this._getClipShape(e)}),this._finished=!0},a.prototype.incrementalPrepareRender=function(e,t,r){var o=e.getData(),i=this._updateSymbolDraw(o,e);i.incrementalPrepareUpdate(o),this._finished=!1},a.prototype.incrementalRender=function(e,t,r){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},a.prototype.updateTransform=function(e,t,r){var o=e.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var i=ar("").reset(e,t,r);i.progress&&i.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},a.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},a.prototype._getClipShape=function(e){if(e.get("clip",!0)){var t=e.coordinateSystem;return t&&t.getArea&&t.getArea(.1)}},a.prototype._updateSymbolDraw=function(e,t){var r=this._symbolDraw,o=t.pipelineContext,i=o.large;return(!r||i!==this._isLargeDraw)&&(r&&r.remove(),r=this._symbolDraw=i?new Ii:new wn,this._isLargeDraw=i,this.group.removeAll()),this.group.add(r.group),r},a.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},a.prototype.dispose=function(){},a.type="scatter",a}(aa);function Li(n){Fe(Mn),n.registerSeriesModel(zi),n.registerChartView(Ai),n.registerLayout(ar("scatter"))}var nt=re,ki=Ge,St=-1,_e=function(){function n(a){var e=a.mappingMethod,t=a.type,r=this.option=Oe(a);this.type=t,this.mappingMethod=e,this._normalizeData=Ti[e];var o=n.visualHandlers[t];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[e],e==="piecewise"?(Ft(r),Di(r)):e==="category"?r.categories?Ri(r):Ft(r,!0):(Cn(e!=="linear"||r.dataExtent),Ft(r))}return n.prototype.mapValueToVisual=function(a){var e=this._normalizeData(a);return this._normalizedToVisual(e,a)},n.prototype.getNormalizer=function(){return Ce(this._normalizeData,this)},n.listVisualTypes=function(){return zn(n.visualHandlers)},n.isValidType=function(a){return n.visualHandlers.hasOwnProperty(a)},n.eachVisual=function(a,e,t){Ge(a)?re(a,e,t):e.call(t,a)},n.mapVisual=function(a,e,t){var r,o=Ie(a)?[]:Ge(a)?{}:(r=!0,null);return n.eachVisual(a,function(i,s){var l=e.call(t,i,s);r?o=l:o[s]=l}),o},n.retrieveVisuals=function(a){var e={},t;return a&&nt(n.visualHandlers,function(r,o){a.hasOwnProperty(o)&&(e[o]=a[o],t=!0)}),t?e:null},n.prepareVisualTypes=function(a){if(Ie(a))a=a.slice();else if(ki(a)){var e=[];nt(a,function(t,r){e.push(r)}),a=e}else return[];return a.sort(function(t,r){return r==="color"&&t!=="color"&&t.indexOf("color")===0?1:-1}),a},n.dependsOn=function(a,e){return e==="color"?!!(a&&a.indexOf(e)===0):a===e},n.findPieceIndex=function(a,e,t){for(var r,o=1/0,i=0,s=e.length;i<s;i++){var l=e[i].value;if(l!=null){if(l===a||rr(l)&&l===a+"")return i;t&&h(l,i)}}for(var i=0,s=e.length;i<s;i++){var c=e[i],d=c.interval,u=c.close;if(d){if(d[0]===-1/0){if(mt(u[1],a,d[1]))return i}else if(d[1]===1/0){if(mt(u[0],d[0],a))return i}else if(mt(u[0],d[0],a)&&mt(u[1],a,d[1]))return i;t&&h(d[0],i),t&&h(d[1],i)}}if(t)return a===1/0?e.length-1:a===-1/0?0:r;function h(v,g){var x=Math.abs(v-a);x<o&&(o=x,r=g)}},n.visualHandlers={color:{applyVisual:et("color"),getColorMapper:function(){var a=this.option;return Ce(a.mappingMethod==="category"?function(e,t){return!t&&(e=this._normalizeData(e)),tt.call(this,e)}:function(e,t,r){var o=!!r;return!t&&(e=this._normalizeData(e)),r=Pt(e,a.parsedVisual,r),o?r:Ot(r,"rgba")},this)},_normalizedToVisual:{linear:function(a){return Ot(Pt(a,this.option.parsedVisual),"rgba")},category:tt,piecewise:function(a,e){var t=Zt.call(this,e);return t==null&&(t=Ot(Pt(a,this.option.parsedVisual),"rgba")),t},fixed:$e}},colorHue:gt(function(a,e){return Et(a,e)}),colorSaturation:gt(function(a,e){return Et(a,null,e)}),colorLightness:gt(function(a,e){return Et(a,null,null,e)}),colorAlpha:gt(function(a,e){return An(a,e)}),decal:{applyVisual:et("decal"),_normalizedToVisual:{linear:null,category:tt,piecewise:null,fixed:null}},opacity:{applyVisual:et("opacity"),_normalizedToVisual:jt([0,1])},liftZ:{applyVisual:et("liftZ"),_normalizedToVisual:{linear:$e,category:$e,piecewise:$e,fixed:$e}},symbol:{applyVisual:function(a,e,t){var r=this.mapValueToVisual(a);t("symbol",r)},_normalizedToVisual:{linear:Da,category:tt,piecewise:function(a,e){var t=Zt.call(this,e);return t==null&&(t=Da.call(this,a)),t},fixed:$e}},symbolSize:{applyVisual:et("symbolSize"),_normalizedToVisual:jt([0,1])}},n}();function Di(n){var a=n.pieceList;n.hasSpecialVisual=!1,re(a,function(e,t){e.originIndex=t,e.visual!=null&&(n.hasSpecialVisual=!0)})}function Ri(n){var a=n.categories,e=n.categoryMap={},t=n.visual;if(nt(a,function(i,s){e[i]=s}),!Ie(t)){var r=[];Ge(t)?nt(t,function(i,s){var l=e[s];r[l??St]=i}):r[St]=t,t=pr(n,r)}for(var o=a.length-1;o>=0;o--)t[o]==null&&(delete e[a[o]],a.pop())}function Ft(n,a){var e=n.visual,t=[];Ge(e)?nt(e,function(o){t.push(o)}):e!=null&&t.push(e);var r={color:1,symbol:1};!a&&t.length===1&&!r.hasOwnProperty(n.type)&&(t[1]=t[0]),pr(n,t)}function gt(n){return{applyVisual:function(a,e,t){var r=this.mapValueToVisual(a);t("color",n(e("color"),r))},_normalizedToVisual:jt([0,1])}}function Da(n){var a=this.option.visual;return a[Math.round(Ue(n,[0,1],[0,a.length-1],!0))]||{}}function et(n){return function(a,e,t){t(n,this.mapValueToVisual(a))}}function tt(n){var a=this.option.visual;return a[this.option.loop&&n!==St?n%a.length:n]}function $e(){return this.option.visual[0]}function jt(n){return{linear:function(a){return Ue(a,n,this.option.visual,!0)},category:tt,piecewise:function(a,e){var t=Zt.call(this,e);return t==null&&(t=Ue(a,n,this.option.visual,!0)),t},fixed:$e}}function Zt(n){var a=this.option,e=a.pieceList;if(a.hasSpecialVisual){var t=_e.findPieceIndex(n,e),r=e[t];if(r&&r.visual)return r.visual[this.type]}}function pr(n,a){return n.visual=a,n.type==="color"&&(n.parsedVisual=Je(a,function(e){var t=In(e);return t||[0,0,0,1]})),a}var Ti={linear:function(n){return Ue(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var a=this.option.pieceList,e=_e.findPieceIndex(n,a,!0);if(e!=null)return Ue(e,[0,a.length-1],[0,1],!0)},category:function(n){var a=this.option.categories?this.option.categoryMap[n]:n;return a??St},fixed:Vn};function mt(n,a,e){return n?a<=e:a<e}var Oi=256,Pi=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var a=ga.createCanvas();this.canvas=a}return n.prototype.update=function(a,e,t,r,o,i){var s=this._getBrush(),l=this._getGradient(o,"inRange"),c=this._getGradient(o,"outOfRange"),d=this.pointSize+this.blurSize,u=this.canvas,h=u.getContext("2d"),v=a.length;u.width=e,u.height=t;for(var g=0;g<v;++g){var x=a[g],f=x[0],m=x[1],S=x[2],M=r(S);h.globalAlpha=M,h.drawImage(s,f-d,m-d)}if(!u.width||!u.height)return u;for(var N=h.getImageData(0,0,u.width,u.height),k=N.data,R=0,p=k.length,I=this.minOpacity,D=this.maxOpacity,G=D-I;R<p;){var M=k[R+3]/256,V=Math.floor(M*(Oi-1))*4;if(M>0){var H=i(M)?l:c;M>0&&(M=M*G+I),k[R++]=H[V],k[R++]=H[V+1],k[R++]=H[V+2],k[R++]=H[V+3]*M*256}else R+=4}return h.putImageData(N,0,0),u},n.prototype._getBrush=function(){var a=this._brushCanvas||(this._brushCanvas=ga.createCanvas()),e=this.pointSize+this.blurSize,t=e*2;a.width=t,a.height=t;var r=a.getContext("2d");return r.clearRect(0,0,t,t),r.shadowOffsetX=t,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-e,e,this.pointSize,0,Math.PI*2,!0),r.closePath(),r.fill(),a},n.prototype._getGradient=function(a,e){for(var t=this._gradientPixels,r=t[e]||(t[e]=new Uint8ClampedArray(256*4)),o=[0,0,0,0],i=0,s=0;s<256;s++)a[e](s/255,!0,o),r[i++]=o[0],r[i++]=o[1],r[i++]=o[2],r[i++]=o[3];return r},n}();function Ei(n,a,e){var t=n[1]-n[0];a=Je(a,function(i){return{interval:[(i.interval[0]-n[0])/t,(i.interval[1]-n[0])/t]}});var r=a.length,o=0;return function(i){var s;for(s=o;s<r;s++){var l=a[s].interval;if(l[0]<=i&&i<=l[1]){o=s;break}}if(s===r)for(s=o-1;s>=0;s--){var l=a[s].interval;if(l[0]<=i&&i<=l[1]){o=s;break}}return s>=0&&s<r&&e[s]}}function Ni(n,a){var e=n[1]-n[0];return a=[(a[0]-n[0])/e,(a[1]-n[0])/e],function(t){return t>=a[0]&&t<=a[1]}}function Ra(n){var a=n.dimensions;return a[0]==="lng"&&a[1]==="lat"}var Hi=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.render=function(e,t,r){var o;t.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===e&&(o=s)})}),this._progressiveEls=null,this.group.removeAll();var i=e.coordinateSystem;i.type==="cartesian2d"||i.type==="calendar"?this._renderOnCartesianAndCalendar(e,r,0,e.getData().count()):Ra(i)&&this._renderOnGeo(i,e,o,r)},a.prototype.incrementalPrepareRender=function(e,t,r){this.group.removeAll()},a.prototype.incrementalRender=function(e,t,r,o){var i=t.coordinateSystem;i&&(Ra(i)?this.render(t,r,o):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(t,o,e.start,e.end,!0)))},a.prototype.eachRendered=function(e){Ja(this._progressiveEls||this.group,e)},a.prototype._renderOnCartesianAndCalendar=function(e,t,r,o,i){var s=e.coordinateSystem,l=ra(s,"cartesian2d"),c,d,u,h;if(l){var v=s.getAxis("x"),g=s.getAxis("y");c=v.getBandWidth()+.5,d=g.getBandWidth()+.5,u=v.scale.getExtent(),h=g.scale.getExtent()}for(var x=this.group,f=e.getData(),m=e.getModel(["emphasis","itemStyle"]).getItemStyle(),S=e.getModel(["blur","itemStyle"]).getItemStyle(),M=e.getModel(["select","itemStyle"]).getItemStyle(),N=e.get(["itemStyle","borderRadius"]),k=Wt(e),R=e.getModel("emphasis"),p=R.get("focus"),I=R.get("blurScope"),D=R.get("disabled"),G=l?[f.mapDimension("x"),f.mapDimension("y"),f.mapDimension("value")]:[f.mapDimension("time"),f.mapDimension("value")],V=r;V<o;V++){var H=void 0,Z=f.getItemVisual(V,"style");if(l){var Q=f.get(G[0],V),X=f.get(G[1],V);if(isNaN(f.get(G[2],V))||isNaN(Q)||isNaN(X)||Q<u[0]||Q>u[1]||X<h[0]||X>h[1])continue;var ge=s.dataToPoint([Q,X]);H=new Ze({shape:{x:ge[0]-c/2,y:ge[1]-d/2,width:c,height:d},style:Z})}else{if(isNaN(f.get(G[1],V)))continue;H=new Ze({z2:1,shape:s.dataToRect([f.get(G[0],V)]).contentShape,style:Z})}if(f.hasItemOption){var U=f.getItemModel(V),$=U.getModel("emphasis");m=$.getModel("itemStyle").getItemStyle(),S=U.getModel(["blur","itemStyle"]).getItemStyle(),M=U.getModel(["select","itemStyle"]).getItemStyle(),N=U.get(["itemStyle","borderRadius"]),p=$.get("focus"),I=$.get("blurScope"),D=$.get("disabled"),k=Wt(U)}H.shape.r=N;var ee=e.getRawValue(V),L="-";ee&&ee[2]!=null&&(L=ee[2]+""),er(H,k,{labelFetcher:e,labelDataIndex:V,defaultOpacity:Z.opacity,defaultText:L}),H.ensureState("emphasis").style=m,H.ensureState("blur").style=S,H.ensureState("select").style=M,tr(H,p,I,D),H.incremental=i,i&&(H.states.emphasis.hoverLayer=!0),x.add(H),f.setItemGraphicEl(V,H),this._progressiveEls&&this._progressiveEls.push(H)}},a.prototype._renderOnGeo=function(e,t,r,o){var i=r.targetVisuals.inRange,s=r.targetVisuals.outOfRange,l=t.getData(),c=this._hmLayer||this._hmLayer||new Pi;c.blurSize=t.get("blurSize"),c.pointSize=t.get("pointSize"),c.minOpacity=t.get("minOpacity"),c.maxOpacity=t.get("maxOpacity");var d=e.getViewRect().clone(),u=e.getRoamTransform();d.applyTransform(u);var h=Math.max(d.x,0),v=Math.max(d.y,0),g=Math.min(d.width+d.x,o.getWidth()),x=Math.min(d.height+d.y,o.getHeight()),f=g-h,m=x-v,S=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],M=l.mapArray(S,function(p,I,D){var G=e.dataToPoint([p,I]);return G[0]-=h,G[1]-=v,G.push(D),G}),N=r.getExtent(),k=r.type==="visualMap.continuous"?Ni(N,r.option.range):Ei(N,r.getPieceList(),r.option.selected);c.update(M,f,m,i.color.getNormalizer(),{inRange:i.color.getColorMapper(),outOfRange:s.color.getColorMapper()},k);var R=new nr({style:{width:f,height:m,x:h,y:v,image:c.canvas},silent:!0});this.group.add(R)},a.type="heatmap",a}(aa),$i=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.getInitialData=function(e,t){return Ct(null,this,{generateCoord:"value"})},a.prototype.preventIncremental=function(){var e=Ln.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},a.type="series.heatmap",a.dependencies=["grid","geo","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},a}(It);function Bi(n){n.registerChartView(Hi),n.registerSeriesModel($i)}var Ta=re;function Oa(n){if(n){for(var a in n)if(n.hasOwnProperty(a))return!0}}function Pa(n,a,e){var t={};return Ta(a,function(o){var i=t[o]=r();Ta(n[o],function(s,l){if(_e.isValidType(l)){var c={type:l,visual:s};e&&e(c,o),i[l]=new _e(c),l==="opacity"&&(c=Oe(c),c.type="colorAlpha",i.__hidden.__alphaForOpacity=new _e(c))}})}),t;function r(){var o=function(){};o.prototype.__hidden=o.prototype;var i=new o;return i}}function Fi(n,a,e){var t;re(e,function(r){a.hasOwnProperty(r)&&Oa(a[r])&&(t=!0)}),t&&re(e,function(r){a.hasOwnProperty(r)&&Oa(a[r])?n[r]=Oe(a[r]):delete n[r]})}function Gi(n,a,e,t){var r={};return re(n,function(o){var i=_e.prepareVisualTypes(a[o]);r[o]=i}),{progress:function(i,s){var l;t!=null&&(l=s.getDimensionIndex(t));function c(k){return kn(s,u,k)}function d(k,R){Dn(s,u,k,R)}for(var u,h=s.getStore();(u=i.next())!=null;){var v=s.getRawDataItem(u);if(!(v&&v.visualMap===!1))for(var g=t!=null?h.get(l,u):u,x=e(g),f=a[x],m=r[x],S=0,M=m.length;S<M;S++){var N=m[S];f[N]&&f[N].applyVisual(g,c,d)}}}}}var vr={get:function(n,a,e){var t=Oe((Ui[n]||{})[a]);return e&&Ie(t)?t[t.length-1]:t}},Ui={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Ea=_e.mapVisual,Ki=_e.eachVisual,Wi=Ie,Na=re,Xi=ir,Yi=Ue,wt=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return a.prototype.init=function(e,t,r){this.mergeDefaultAndTheme(e,r)},a.prototype.optionUpdated=function(e,t){var r=this.option;!t&&Fi(r,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},a.prototype.resetVisual=function(e){var t=this.stateList;e=Ce(e,this),this.controllerVisuals=Pa(this.option.controller,t,e),this.targetVisuals=Pa(this.option.target,t,e)},a.prototype.getItemSymbol=function(){return null},a.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,t=[];return e==null||e==="all"?this.ecModel.eachSeries(function(r,o){t.push(o)}):t=Rn(e),t},a.prototype.eachTargetSeries=function(e,t){re(this.getTargetSeriesIndices(),function(r){var o=this.ecModel.getSeriesByIndex(r);o&&e.call(t,o)},this)},a.prototype.isTargetSeries=function(e){var t=!1;return this.eachTargetSeries(function(r){r===e&&(t=!0)}),t},a.prototype.formatValueText=function(e,t,r){var o=this.option,i=o.precision,s=this.dataBound,l=o.formatter,c;r=r||["<",">"],Ie(e)&&(e=e.slice(),c=!0);var d=t?e:c?[u(e[0]),u(e[1])]:u(e);if(rr(l))return l.replace("{value}",c?d[0]:d).replace("{value2}",c?d[1]:d);if(Tn(l))return c?l(e[0],e[1]):l(e);if(c)return e[0]===s[0]?r[0]+" "+d[1]:e[1]===s[1]?r[1]+" "+d[0]:d[0]+" - "+d[1];return d;function u(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(i,20))}},a.prototype.resetExtent=function(){var e=this.option,t=Xi([e.min,e.max]);this._dataExtent=t},a.prototype.getDataDimensionIndex=function(e){var t=this.option.dimension;if(t!=null)return e.getDimensionIndex(t);for(var r=e.dimensions,o=r.length-1;o>=0;o--){var i=r[o],s=e.getDimensionInfo(i);if(!s.isCalculationCoord)return s.storeDimIndex}},a.prototype.getExtent=function(){return this._dataExtent.slice()},a.prototype.completeVisualOption=function(){var e=this.ecModel,t=this.option,r={inRange:t.inRange,outOfRange:t.outOfRange},o=t.target||(t.target={}),i=t.controller||(t.controller={});ma(o,r),ma(i,r);var s=this.isCategory();l.call(this,o),l.call(this,i),c.call(this,o,"inRange","outOfRange"),d.call(this,i);function l(u){Wi(t.color)&&!u.inRange&&(u.inRange={color:t.color.slice().reverse()}),u.inRange=u.inRange||{color:e.get("gradientColor")}}function c(u,h,v){var g=u[h],x=u[v];g&&!x&&(x=u[v]={},Na(g,function(f,m){if(_e.isValidType(m)){var S=vr.get(m,"inactive",s);S!=null&&(x[m]=S,m==="color"&&!x.hasOwnProperty("opacity")&&!x.hasOwnProperty("colorAlpha")&&(x.opacity=[0,0]))}}))}function d(u){var h=(u.inRange||{}).symbol||(u.outOfRange||{}).symbol,v=(u.inRange||{}).symbolSize||(u.outOfRange||{}).symbolSize,g=this.get("inactiveColor"),x=this.getItemSymbol(),f=x||"roundRect";Na(this.stateList,function(m){var S=this.itemSize,M=u[m];M||(M=u[m]={color:s?g:[g]}),M.symbol==null&&(M.symbol=h&&Oe(h)||(s?f:[f])),M.symbolSize==null&&(M.symbolSize=v&&Oe(v)||(s?S[0]:[S[0],S[0]])),M.symbol=Ea(M.symbol,function(R){return R==="none"?f:R});var N=M.symbolSize;if(N!=null){var k=-1/0;Ki(N,function(R){R>k&&(k=R)}),M.symbolSize=Ea(N,function(R){return Yi(R,[0,k],[0,S[0]],!0)})}},this)}},a.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},a.prototype.isCategory=function(){return!!this.option.categories},a.prototype.setSelected=function(e){},a.prototype.getSelected=function(){return null},a.prototype.getValueState=function(e){return null},a.prototype.getVisualMeta=function(e){return null},a.type="visualMap",a.dependencies=["series"],a.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},a}(On),Ha=[20,140],ji=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.optionUpdated=function(e,t){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(r){r.mappingMethod="linear",r.dataExtent=this.getExtent()}),this._resetRange()},a.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=Ha[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=Ha[1])},a.prototype._resetRange=function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):Ie(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},a.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),re(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=t[1]/3)},this)},a.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},a.prototype.getSelected=function(){var e=this.getExtent(),t=ir((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},a.prototype.getValueState=function(e){var t=this.option.range,r=this.getExtent();return(t[0]<=r[0]||t[0]<=e)&&(t[1]>=r[1]||e<=t[1])?"inRange":"outOfRange"},a.prototype.findTargetDataIndices=function(e){var t=[];return this.eachTargetSeries(function(r){var o=[],i=r.getData();i.each(this.getDataDimensionIndex(i),function(s,l){e[0]<=s&&s<=e[1]&&o.push(l)},this),t.push({seriesId:r.id,dataIndex:o})},this),t},a.prototype.getVisualMeta=function(e){var t=$a(this,"outOfRange",this.getExtent()),r=$a(this,"inRange",this.option.range.slice()),o=[];function i(v,g){o.push({value:v,color:e(v,g)})}for(var s=0,l=0,c=r.length,d=t.length;l<d&&(!r.length||t[l]<=r[0]);l++)t[l]<r[s]&&i(t[l],"outOfRange");for(var u=1;s<c;s++,u=0)u&&o.length&&i(r[s],"outOfRange"),i(r[s],"inRange");for(var u=1;l<d;l++)(!r.length||r[r.length-1]<t[l])&&(u&&(o.length&&i(o[o.length-1].value,"outOfRange"),u=0),i(t[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},a.type="visualMap.continuous",a.defaultOption=ea(wt.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),a}(wt);function $a(n,a,e){if(e[0]===e[1])return e.slice();for(var t=200,r=(e[1]-e[0])/t,o=e[0],i=[],s=0;s<=t&&o<e[1];s++)i.push(o),o+=r;return i.push(e[1]),i}var fr=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return a.prototype.init=function(e,t){this.ecModel=e,this.api=t},a.prototype.render=function(e,t,r,o){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,t,r,o)},a.prototype.renderBackground=function(e){var t=this.visualMapModel,r=Pn(t.get("padding")||0),o=e.getBoundingRect();e.add(new Ze({z2:-1,silent:!0,shape:{x:o.x-r[3],y:o.y-r[0],width:o.width+r[3]+r[1],height:o.height+r[0]+r[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},a.prototype.getControllerVisual=function(e,t,r){r=r||{};var o=r.forceState,i=this.visualMapModel,s={};if(t==="color"){var l=i.get("contentColor");s.color=l}function c(v){return s[v]}function d(v,g){s[v]=g}var u=i.controllerVisuals[o||i.getValueState(e)],h=_e.prepareVisualTypes(u);return re(h,function(v){var g=u[v];r.convertOpacityToAlpha&&v==="opacity"&&(v="colorAlpha",g=u.__alphaForOpacity),_e.dependsOn(v,t)&&g&&g.applyVisual(e,c,d)}),s[t]},a.prototype.positionGroup=function(e){var t=this.visualMapModel,r=this.api;En(e,t.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})},a.prototype.doRender=function(e,t,r,o){},a.type="visualMap",a}(Nn),Ba=[["left","right","width"],["top","bottom","height"]];function gr(n,a,e){var t=n.option,r=t.align;if(r!=null&&r!=="auto")return r;for(var o={width:a.getWidth(),height:a.getHeight()},i=t.orient==="horizontal"?1:0,s=Ba[i],l=[0,null,10],c={},d=0;d<3;d++)c[Ba[1-i][d]]=l[d],c[s[d]]=d===2?e[0]:t[s[d]];var u=[["x","width",3],["y","height",0]][i],h=Hn(c,o,t.padding);return s[(h.margin[u[2]]||0)+h[u[0]]+h[u[1]]*.5<o[u[1]]*.5?0:1]}function xt(n,a){return re(n||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(a?a.componentIndex:"")}),n}var De=Ue,Zi=re,Fa=Math.min,Gt=Math.max,qi=12,Ji=6,Qi=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return a.prototype.init=function(e,t){n.prototype.init.call(this,e,t),this._hoverLinkFromSeriesMouseOver=Ce(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Ce(this._hideIndicator,this)},a.prototype.doRender=function(e,t,r,o){(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},a.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var r=e.get("text");this._renderEndsText(t,r,0),this._renderEndsText(t,r,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},a.prototype._renderEndsText=function(e,t,r){if(t){var o=t[1-r];o=o!=null?o+"":"";var i=this.visualMapModel,s=i.get("textGap"),l=i.itemSize,c=this._shapes.mainGroup,d=this._applyTransform([l[0]/2,r===0?-s:l[1]+s],c),u=this._applyTransform(r===0?"bottom":"top",c),h=this._orient,v=this.visualMapModel.textStyleModel;this.group.add(new at({style:yt(v,{x:d[0],y:d[1],verticalAlign:h==="horizontal"?"middle":u,align:h==="horizontal"?u:"center",text:o})}))}},a.prototype._renderBar=function(e){var t=this.visualMapModel,r=this._shapes,o=t.itemSize,i=this._orient,s=this._useHandle,l=gr(t,this.api,o),c=r.mainGroup=this._createBarGroup(l),d=new je;c.add(d),d.add(r.outOfRange=Ga()),d.add(r.inRange=Ga(null,s?Ka(this._orient):null,Ce(this._dragHandle,this,"all",!1),Ce(this._dragHandle,this,"all",!0))),d.setClipPath(new Ze({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var u=t.textStyleModel.getTextRect(""),h=Gt(u.width,u.height);s&&(r.handleThumbs=[],r.handleLabels=[],r.handleLabelPoints=[],this._createHandle(t,c,0,o,h,i),this._createHandle(t,c,1,o,h,i)),this._createIndicator(t,c,o,h,i),e.add(c)},a.prototype._createHandle=function(e,t,r,o,i,s){var l=Ce(this._dragHandle,this,r,!1),c=Ce(this._dragHandle,this,r,!0),d=Kt(e.get("handleSize"),o[0]),u=bt(e.get("handleIcon"),-d/2,-d/2,d,d,null,!0),h=Ka(this._orient);u.attr({cursor:h,draggable:!0,drift:l,ondragend:c,onmousemove:function(m){Xt(m.event)}}),u.x=o[0]/2,u.useStyle(e.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),$n(u,!0),t.add(u);var v=this.visualMapModel.textStyleModel,g=new at({cursor:h,draggable:!0,drift:l,onmousemove:function(m){Xt(m.event)},ondragend:c,style:yt(v,{x:0,y:0,text:""})});g.ensureState("blur").style={opacity:.1},g.stateTransition={duration:200},this.group.add(g);var x=[d,0],f=this._shapes;f.handleThumbs[r]=u,f.handleLabelPoints[r]=x,f.handleLabels[r]=g},a.prototype._createIndicator=function(e,t,r,o,i){var s=Kt(e.get("indicatorSize"),r[0]),l=bt(e.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:r[0]/2});var c=e.getModel("indicatorStyle").getItemStyle();if(l instanceof nr){var d=l.style;l.useStyle(na({image:d.image,x:d.x,y:d.y,width:d.width,height:d.height},c))}else l.useStyle(c);t.add(l);var u=this.visualMapModel.textStyleModel,h=new at({silent:!0,invisible:!0,style:yt(u,{x:0,y:0,text:""})});this.group.add(h);var v=[(i==="horizontal"?o/2:Ji)+r[0]/2,0],g=this._shapes;g.indicator=l,g.indicatorLabel=h,g.indicatorLabelPoint=v,this._firstShowIndicator=!0},a.prototype._dragHandle=function(e,t,r,o){if(this._useHandle){if(this._dragging=!t,!t){var i=this._applyTransform([r,o],this._shapes.mainGroup,!0);this._updateInterval(e,i[1]),this._hideIndicator(),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():Ua(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},a.prototype._resetInterval=function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),r=e.getExtent(),o=[0,e.itemSize[1]];this._handleEnds=[De(t[0],r,o,!0),De(t[1],r,o,!0)]},a.prototype._updateInterval=function(e,t){t=t||0;var r=this.visualMapModel,o=this._handleEnds,i=[0,r.itemSize[1]];Bn(t,o,i,e,0);var s=r.getExtent();this._dataInterval=[De(o[0],i,s,!0),De(o[1],i,s,!0)]},a.prototype._updateView=function(e){var t=this.visualMapModel,r=t.getExtent(),o=this._shapes,i=[0,t.itemSize[1]],s=e?i:this._handleEnds,l=this._createBarVisual(this._dataInterval,r,s,"inRange"),c=this._createBarVisual(r,r,i,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(s,l)},a.prototype._createBarVisual=function(e,t,r,o){var i={forceState:o,convertOpacityToAlpha:!0},s=this._makeColorGradient(e,i),l=[this.getControllerVisual(e[0],"symbolSize",i),this.getControllerVisual(e[1],"symbolSize",i)],c=this._createBarPoints(r,l);return{barColor:new Fn(0,0,0,1,s),barPoints:c,handlesColor:[s[0].color,s[s.length-1].color]}},a.prototype._makeColorGradient=function(e,t){var r=100,o=[],i=(e[1]-e[0])/r;o.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var s=1;s<r;s++){var l=e[0]+i*s;if(l>e[1])break;o.push({color:this.getControllerVisual(l,"color",t),offset:s/r})}return o.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),o},a.prototype._createBarPoints=function(e,t){var r=this.visualMapModel.itemSize;return[[r[0]-t[0],e[0]],[r[0],e[0]],[r[0],e[1]],[r[0]-t[1],e[1]]]},a.prototype._createBarGroup=function(e){var t=this._orient,r=this.visualMapModel.get("inverse");return new je(t==="horizontal"&&!r?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:t==="horizontal"&&r?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:t==="vertical"&&!r?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},a.prototype._updateHandle=function(e,t){if(this._useHandle){var r=this._shapes,o=this.visualMapModel,i=r.handleThumbs,s=r.handleLabels,l=o.itemSize,c=o.getExtent(),d=this._applyTransform("left",r.mainGroup);Zi([0,1],function(u){var h=i[u];h.setStyle("fill",t.handlesColor[u]),h.y=e[u];var v=De(e[u],[0,l[1]],c,!0),g=this.getControllerVisual(v,"symbolSize");h.scaleX=h.scaleY=g/l[0],h.x=l[0]-g/2;var x=Nt(r.handleLabelPoints[u],Ht(h,this.group));if(this._orient==="horizontal"){var f=d==="left"||d==="top"?(l[0]-g)/2:(l[0]-g)/-2;x[1]+=f}s[u].setStyle({x:x[0],y:x[1],text:o.formatValueText(this._dataInterval[u]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",r.mainGroup):"center"})},this)}},a.prototype._showIndicator=function(e,t,r,o){var i=this.visualMapModel,s=i.getExtent(),l=i.itemSize,c=[0,l[1]],d=this._shapes,u=d.indicator;if(u){u.attr("invisible",!1);var h={convertOpacityToAlpha:!0},v=this.getControllerVisual(e,"color",h),g=this.getControllerVisual(e,"symbolSize"),x=De(e,s,c,!0),f=l[0]-g/2,m={x:u.x,y:u.y};u.y=x,u.x=f;var S=Nt(d.indicatorLabelPoint,Ht(u,this.group)),M=d.indicatorLabel;M.attr("invisible",!1);var N=this._applyTransform("left",d.mainGroup),k=this._orient,R=k==="horizontal";M.setStyle({text:(r||"")+i.formatValueText(t),verticalAlign:R?N:"middle",align:R?"center":N});var p={x:f,y:x,style:{fill:v}},I={style:{x:S[0],y:S[1]}};if(i.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var D={duration:100,easing:"cubicInOut",additive:!0};u.x=m.x,u.y=m.y,u.animateTo(p,D),M.animateTo(I,D)}else u.attr(p),M.attr(I);this._firstShowIndicator=!1;var G=this._shapes.handleLabels;if(G)for(var V=0;V<G.length;V++)this.api.enterBlur(G[V])}},a.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var r=e.visualMapModel.itemSize,o=e._applyTransform([t.offsetX,t.offsetY],e._shapes.mainGroup,!0,!0);o[1]=Fa(Gt(0,o[1]),r[1]),e._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=r[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},a.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},a.prototype._doHoverLinkToSeries=function(e,t){var r=this.visualMapModel,o=r.itemSize;if(r.option.hoverLink){var i=[0,o[1]],s=r.getExtent();e=Fa(Gt(i[0],e),i[1]);var l=eo(r,s,i),c=[e-l,e+l],d=De(e,i,s,!0),u=[De(c[0],i,s,!0),De(c[1],i,s,!0)];c[0]<i[0]&&(u[0]=-1/0),c[1]>i[1]&&(u[1]=1/0),t&&(u[0]===-1/0?this._showIndicator(d,u[1],"< ",l):u[1]===1/0?this._showIndicator(d,u[0],"> ",l):this._showIndicator(d,d," ",l));var h=this._hoverLinkDataIndices,v=[];(t||Ua(r))&&(v=this._hoverLinkDataIndices=r.findTargetDataIndices(u));var g=Gn(h,v);this._dispatchHighDown("downplay",xt(g[0],r)),this._dispatchHighDown("highlight",xt(g[1],r))}},a.prototype._hoverLinkFromSeriesMouseOver=function(e){var t;if(Un(e.target,function(l){var c=lt(l);if(c.dataIndex!=null)return t=c,!0},!0),!!t){var r=this.ecModel.getSeriesByIndex(t.seriesIndex),o=this.visualMapModel;if(o.isTargetSeries(r)){var i=r.getData(t.dataType),s=i.getStore().get(o.getDataDimensionIndex(i),t.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},a.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var t=this._shapes.handleLabels;if(t)for(var r=0;r<t.length;r++)this.api.leaveBlur(t[r])},a.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",xt(e,this.visualMapModel)),e.length=0},a.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},a.prototype._applyTransform=function(e,t,r,o){var i=Ht(t,o?null:this.group);return Ie(e)?Nt(e,i,r):Kn(e,i,r)},a.prototype._dispatchHighDown=function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},a.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},a.type="visualMap.continuous",a}(fr);function Ga(n,a,e,t){return new Wn({shape:{points:n},draggable:!!e,cursor:a,drift:e,onmousemove:function(r){Xt(r.event)},ondragend:t})}function eo(n,a,e){var t=qi/2,r=n.get("hoverLinkDataSize");return r&&(t=De(r,a,e,!0)/2),t}function Ua(n){var a=n.get("hoverLinkOnHandle");return!!(a??n.get("realtime"))}function Ka(n){return n==="vertical"?"ns-resize":"ew-resize"}var to={type:"selectDataRange",event:"dataRangeSelected",update:"update"},ao=function(n,a){a.eachComponent({mainType:"visualMap",query:n},function(e){e.setSelected(n.selected)})},ro=[{createOnAllSeries:!0,reset:function(n,a){var e=[];return a.eachComponent("visualMap",function(t){var r=n.pipelineContext;!t.isTargetSeries(n)||r&&r.large||e.push(Gi(t.stateList,t.targetVisuals,Ce(t.getValueState,t),t.getDataDimensionIndex(n.getData())))}),e}},{createOnAllSeries:!0,reset:function(n,a){var e=n.getData(),t=[];a.eachComponent("visualMap",function(r){if(r.isTargetSeries(n)){var o=r.getVisualMeta(Ce(no,null,n,r))||{stops:[],outerColors:[]},i=r.getDataDimensionIndex(e);i>=0&&(o.dimension=i,t.push(o))}}),n.getData().setVisual("visualMeta",t)}}];function no(n,a,e,t){for(var r=a.targetVisuals[t],o=_e.prepareVisualTypes(r),i={color:Xn(n.getData(),"color")},s=0,l=o.length;s<l;s++){var c=o[s],d=r[c==="opacity"?"__alphaForOpacity":c];d&&d.applyVisual(e,u,h)}return i.color;function u(v){return i[v]}function h(v,g){i[v]=g}}var Wa=re;function io(n){var a=n&&n.visualMap;Ie(a)||(a=a?[a]:[]),Wa(a,function(e){if(e){Ye(e,"splitList")&&!Ye(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&Ie(t)&&Wa(t,function(r){Ge(r)&&(Ye(r,"start")&&!Ye(r,"min")&&(r.min=r.start),Ye(r,"end")&&!Ye(r,"max")&&(r.max=r.end))})}})}function Ye(n,a){return n&&n.hasOwnProperty&&n.hasOwnProperty(a)}var Xa=!1;function mr(n){Xa||(Xa=!0,n.registerSubTypeDefaulter("visualMap",function(a){return!a.categories&&(!(a.pieces?a.pieces.length>0:a.splitNumber>0)||a.calculable)?"continuous":"piecewise"}),n.registerAction(to,ao),re(ro,function(a){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,a)}),n.registerPreprocessor(io))}function oo(n){n.registerComponentModel(ji),n.registerComponentView(Qi),mr(n)}var so=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e._pieceList=[],e}return a.prototype.optionUpdated=function(e,t){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var r=this._mode=this._determineMode();this._pieceList=[],lo[this._mode].call(this,this._pieceList),this._resetSelected(e,t);var o=this.option.categories;this.resetVisual(function(i,s){r==="categories"?(i.mappingMethod="category",i.categories=Oe(o)):(i.dataExtent=this.getExtent(),i.mappingMethod="piecewise",i.pieceList=Je(this._pieceList,function(l){return l=Oe(l),s!=="inRange"&&(l.visual=null),l}))})},a.prototype.completeVisualOption=function(){var e=this.option,t={},r=_e.listVisualTypes(),o=this.isCategory();re(e.pieces,function(s){re(r,function(l){s.hasOwnProperty(l)&&(t[l]=1)})}),re(t,function(s,l){var c=!1;re(this.stateList,function(d){c=c||i(e,d,l)||i(e.target,d,l)},this),!c&&re(this.stateList,function(d){(e[d]||(e[d]={}))[l]=vr.get(l,d==="inRange"?"active":"inactive",o)})},this);function i(s,l,c){return s&&s[l]&&s[l].hasOwnProperty(c)}n.prototype.completeVisualOption.apply(this,arguments)},a.prototype._resetSelected=function(e,t){var r=this.option,o=this._pieceList,i=(t?r:e).selected||{};if(r.selected=i,re(o,function(l,c){var d=this.getSelectedMapKey(l);i.hasOwnProperty(d)||(i[d]=!0)},this),r.selectedMode==="single"){var s=!1;re(o,function(l,c){var d=this.getSelectedMapKey(l);i[d]&&(s?i[d]=!1:s=!0)},this)}},a.prototype.getItemSymbol=function(){return this.get("itemSymbol")},a.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},a.prototype.getPieceList=function(){return this._pieceList},a.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},a.prototype.setSelected=function(e){this.option.selected=Oe(e)},a.prototype.getValueState=function(e){var t=_e.findPieceIndex(e,this._pieceList);return t!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},a.prototype.findTargetDataIndices=function(e){var t=[],r=this._pieceList;return this.eachTargetSeries(function(o){var i=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,c){var d=_e.findPieceIndex(l,r);d===e&&i.push(c)},this),t.push({seriesId:o.id,dataIndex:i})},this),t},a.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(e.value!=null)t=e.value;else{var r=e.interval||[];t=r[0]===-1/0&&r[1]===1/0?0:(r[0]+r[1])/2}return t},a.prototype.getVisualMeta=function(e){if(this.isCategory())return;var t=[],r=["",""],o=this;function i(d,u){var h=o.getRepresentValue({interval:d});u||(u=o.getValueState(h));var v=e(h,u);d[0]===-1/0?r[0]=v:d[1]===1/0?r[1]=v:t.push({value:d[0],color:v},{value:d[1],color:v})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var c=-1/0;return re(s,function(d){var u=d.interval;u&&(u[0]>c&&i([c,u[0]],"outOfRange"),i(u.slice()),c=u[1])},this),{stops:t,outerColors:r}},a.type="visualMap.piecewise",a.defaultOption=ea(wt.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),a}(wt),lo={splitNumber:function(n){var a=this.option,e=Math.min(a.precision,20),t=this.getExtent(),r=a.splitNumber;r=Math.max(parseInt(r,10),1),a.splitNumber=r;for(var o=(t[1]-t[0])/r;+o.toFixed(e)!==o&&e<5;)e++;a.precision=e,o=+o.toFixed(e),a.minOpen&&n.push({interval:[-1/0,t[0]],close:[0,0]});for(var i=0,s=t[0];i<r;s+=o,i++){var l=i===r-1?t[1]:s+o;n.push({interval:[s,l],close:[1,1]})}a.maxOpen&&n.push({interval:[t[1],1/0],close:[0,0]}),ya(n),re(n,function(c,d){c.index=d,c.text=this.formatValueText(c.interval)},this)},categories:function(n){var a=this.option;re(a.categories,function(e){n.push({text:this.formatValueText(e,!0),value:e})},this),Ya(a,n)},pieces:function(n){var a=this.option;re(a.pieces,function(e,t){Ge(e)||(e={value:e});var r={text:"",index:t};if(e.label!=null&&(r.text=e.label),e.hasOwnProperty("value")){var o=r.value=e.value;r.interval=[o,o],r.close=[1,1]}else{for(var i=r.interval=[],s=r.close=[0,0],l=[1,0,1],c=[-1/0,1/0],d=[],u=0;u<2;u++){for(var h=[["gte","gt","min"],["lte","lt","max"]][u],v=0;v<3&&i[u]==null;v++)i[u]=e[h[v]],s[u]=l[v],d[u]=v===2;i[u]==null&&(i[u]=c[u])}d[0]&&i[1]===1/0&&(s[0]=0),d[1]&&i[0]===-1/0&&(s[1]=0),i[0]===i[1]&&s[0]&&s[1]&&(r.value=i[0])}r.visual=_e.retrieveVisuals(e),n.push(r)},this),Ya(a,n),ya(n),re(n,function(e){var t=e.close,r=[["<",""][t[1]],[">",""][t[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,r)},this)}};function Ya(n,a){var e=n.inverse;(n.orient==="vertical"?!e:e)&&a.reverse()}var uo=function(n){be(a,n);function a(){var e=n!==null&&n.apply(this,arguments)||this;return e.type=a.type,e}return a.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,r=t.get("textGap"),o=t.textStyleModel,i=o.getFont(),s=o.getTextColor(),l=this._getItemAlign(),c=t.itemSize,d=this._getViewData(),u=d.endsText,h=Yn(t.get("showLabel",!0),!u),v=!t.get("selectedMode");u&&this._renderEndsText(e,u[0],c,h,l),re(d.viewPieceList,function(g){var x=g.piece,f=new je;f.onclick=Ce(this._onItemClick,this,x),this._enableHoverLink(f,g.indexInModelPieceList);var m=t.getRepresentValue(x);if(this._createItemSymbol(f,m,[0,0,c[0],c[1]],v),h){var S=this.visualMapModel.getValueState(m);f.add(new at({style:{x:l==="right"?-r:c[0]+r,y:c[1]/2,text:x.text,verticalAlign:"middle",align:l,font:i,fill:s,opacity:S==="outOfRange"?.5:1},silent:v}))}e.add(f)},this),u&&this._renderEndsText(e,u[1],c,h,l),jn(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},a.prototype._enableHoverLink=function(e,t){var r=this;e.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(i){var s=r.visualMapModel;s.option.hoverLink&&r.api.dispatchAction({type:i,batch:xt(s.findTargetDataIndices(t),s)})}},a.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if(t.orient==="vertical")return gr(e,this.api,e.itemSize);var r=t.align;return(!r||r==="auto")&&(r="left"),r},a.prototype._renderEndsText=function(e,t,r,o,i){if(t){var s=new je,l=this.visualMapModel.textStyleModel;s.add(new at({style:yt(l,{x:o?i==="right"?r[0]:0:r[0]/2,y:r[1]/2,verticalAlign:"middle",align:o?i:"center",text:t})})),e.add(s)}},a.prototype._getViewData=function(){var e=this.visualMapModel,t=Je(e.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),r=e.get("text"),o=e.get("orient"),i=e.get("inverse");return(o==="horizontal"?i:!i)?t.reverse():r&&(r=r.slice().reverse()),{viewPieceList:t,endsText:r}},a.prototype._createItemSymbol=function(e,t,r,o){var i=bt(this.getControllerVisual(t,"symbol"),r[0],r[1],r[2],r[3],this.getControllerVisual(t,"color"));i.silent=o,e.add(i)},a.prototype._onItemClick=function(e){var t=this.visualMapModel,r=t.option,o=r.selectedMode;if(o){var i=Oe(r.selected),s=t.getSelectedMapKey(e);o==="single"||o===!0?(i[s]=!0,re(i,function(l,c){i[c]=c===s})):i[s]=!i[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}},a.type="visualMap.piecewise",a}(fr);function co(n){n.registerComponentModel(so),n.registerComponentView(uo),mr(n)}function ho(n){Fe(oo),Fe(co)}const po=pe({__name:"LineChart",props:{data:{},size:{}},setup(n){const a=n;Fe([Lt,kt,or,ia,Dt,Zn,sr]);const e=qe(),t=Ke(),r=W(),o=W();return it(()=>{var s,l,c,d,u,h;r.value=Vt(At(o.value,t.value.baseColor==="#000"?"dark":"light"));const i={backgroundColor:t.value.cardColor,tooltip:{trigger:"none",axisPointer:{type:"cross"}},grid:{top:"20px",left:"100px",right:"20px",bottom:"60px"},dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"filter",start:0}],xAxis:{type:"category",name:(s=a.data)==null?void 0:s.xname,nameLocation:"middle",nameGap:30,axisTick:{alignWithLabel:!0},data:(l=a.data)==null?void 0:l.x,nameTextStyle:{color:t.value.primaryColor}},yAxis:{type:"value",name:((c=a==null?void 0:a.data)==null?void 0:c.yname)||"",nameLocation:"middle",nameGap:80,nameTextStyle:{color:t.value.primaryColor},min:(d=a.data)!=null&&d.y?Math.min(...a.data.y):0,max:(u=a.data)!=null&&u.y?Math.max(...a.data.y):0,axisLine:{show:!0},axisTick:{show:!0,alignWithLabel:!0},axisLabel:{formatter:function(v){if(v===0)return"0";if(Math.abs(v)>=1e4){const g=Math.floor(Math.log10(Math.abs(v)));return`${(v/Math.pow(10,g)).toPrecision(3)}10{sup|${g}}`}return parseFloat(v.toFixed(4)).toString()},rich:{sup:{verticalAlign:"super",fontSize:10,padding:[0,2]}}}},series:[{type:"line",data:(h=a.data)==null?void 0:h.y}]};ue(()=>{r.value.setOption(i)})}),Le(()=>a.data,i=>{i&&ue(()=>{var s,l,c,d,u,h;(h=r.value)==null||h.setOption({xAxis:{name:(s=a.data)==null?void 0:s.xname,data:(l=a.data)==null?void 0:l.x},yAxis:{min:(c=a.data)!=null&&c.y?Math.min(...a.data.y):0,max:(d=a.data)!=null&&d.y?Math.max(...a.data.y):0},series:[{type:"line",data:(u=a.data)==null?void 0:u.y}]})})}),ot(()=>{var i;(i=r.value)==null||i.dispose()}),Le(()=>e.chartLayoutCols,()=>{ue(()=>{setTimeout(()=>{var i;(i=r.value)==null||i.resize()},200)})}),(i,s)=>{var l,c,d,u;return J(),ce("div",{ref_key:"chartRef",ref:o,style:He({width:`${((l=i.size)==null?void 0:l.w)||690}px`,height:`${((c=i.size)==null?void 0:c.h)||300}px`}),class:st([[`min-w-[${((d=i.size)==null?void 0:d.w)||690}px] min-h-[${((u=i.size)==null?void 0:u.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),vo=pe({__name:"HeatMap",props:{data:{},size:{},activeKey:{}},setup(n){const a=n;Fe([Lt,kt,ho,Dt,Bi]);const e=qe(),t=Ke(),r=W(),o=W();return it(()=>{r.value=Vt(At(o.value,t.value.baseColor==="#000"?"dark":"light"))}),Le(()=>a.data,i=>{var l,c,d,u,h,v,g;if(!i)return;const s={backgroundColor:t.value.cardColor,tooltip:{formatter:function({data:x}){var f,m;return`x: ${(f=a.data)==null?void 0:f.x[x[0]]}<br> y: ${(m=a.data)==null?void 0:m.y[x[1]]}<br> value: ${x[2]}`}},grid:{top:"20px",left:"80px",right:"90px",bottom:"50"},xAxis:{type:"category",name:(l=a.data)==null?void 0:l.xname,nameLocation:"middle",nameGap:25,data:(c=a.data)==null?void 0:c.x,axisLabel:{width:75,overflow:"truncate"},nameTextStyle:{color:t.value.primaryColor}},yAxis:[{type:"category",name:((d=a.data)==null?void 0:d.yname)||"",nameLocation:"middle",nameGap:70,nameTextStyle:{color:t.value.primaryColor},splitArea:{show:!0},data:(u=a.data)==null?void 0:u.y,axisLabel:{width:40,overflow:"truncate"}},{name:(a.activeKey||"").replace(/^.*\/([^/]+)$/,"$1"),nameLocation:"middle",nameGap:5}],visualMap:{min:((h=a.data)==null?void 0:h.min)||0,max:((v=a.data)==null?void 0:v.max)||1,calculable:!0,realtime:!1,align:"left",top:5,right:0,bottom:40,width:"80%",itemHeight:250,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},formatter:function(x){if(x===0)return"0";if(Math.abs(x)>=1e4){const f=Math.floor(Math.log10(Math.abs(x)));return`${(x/Math.pow(10,f)).toPrecision(3)}10{sup|${f}}`}return parseFloat(x.toFixed(4)).toString()},textStyle:{width:30,overflow:"break",rich:{sup:{verticalAlign:"super",fontSize:10,padding:[0,2],rotate:30}}}},series:[{type:"heatmap",data:(g=a.data)==null?void 0:g.data}]};ue(()=>{var x;(x=r.value)==null||x.setOption(s)})},{immediate:!0}),ot(()=>{var i;(i=r.value)==null||i.dispose()}),Le(()=>e.chartLayoutCols,()=>{ue(()=>{setTimeout(()=>{var i;(i=r.value)==null||i.resize()},200)})}),(i,s)=>{var l,c,d,u;return J(),ce("div",{ref_key:"chartRef",ref:o,style:He({width:`${((l=i.size)==null?void 0:l.w)||690}px`,height:`${((c=i.size)==null?void 0:c.h)||300}px`}),class:st([[`min-w-[${((d=i.size)==null?void 0:d.w)||690}px] min-h-[${((u=i.size)==null?void 0:u.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),fo=pe({__name:"ScatterView",props:{data:{},size:{},allValues:{}},setup(n){const a=n;Fe([Lt,kt,ia,Dt,sr,Li,qn]);const e=qe(),t=Ke(),r=W(),o=W();return it(()=>{var s;r.value=Vt(At(o.value,t.value.baseColor==="#000"?"dark":"light"));const i={backgroundColor:t.value.cardColor,tooltip:{axisPointer:{type:"cross"}},grid:{top:"20px",left:"100px",right:"20px",bottom:"60px"},dataZoom:[{type:"inside",xAxisIndex:0,filterMode:"filter",start:0}],xAxis:{name:"Real",nameLocation:"middle",nameGap:25,nameTextStyle:{color:t.value.primaryColor},axisLabel:{width:75,overflow:"truncate"}},yAxis:{name:"Imag",nameLocation:"middle",nameGap:60,nameTextStyle:{color:t.value.primaryColor},axisLabel:{width:40,overflow:"truncate"}}};a.data.length==1?i.series={type:"scatter",data:a.data[0]}:(i.series=a.data.map((l,c)=>({type:"scatter",data:l,name:he(a.allValues)?"":String(a.allValues[c])})),i.legend={type:"scroll",data:(s=a.allValues)==null?void 0:s.map(l=>String(l)),left:"center",bottom:1}),ue(()=>{r.value.setOption(i)})}),Le(()=>a.data,i=>{var l;if(!i)return;const s={};i.length==1?s.series={type:"scatter",data:i[0]}:(s.series=i.map((c,d)=>({type:"scatter",data:c,name:he(a.allValues)?"":String(a.allValues[d])})),s.legend={type:"scroll",data:(l=a.allValues)==null?void 0:l.map(c=>String(c)),left:"center",bottom:1}),ue(()=>{var c;(c=r.value)==null||c.setOption(s)})}),ot(()=>{var i;(i=r.value)==null||i.dispose()}),Le(()=>e.chartLayoutCols,()=>{ue(()=>{setTimeout(()=>{var i;(i=r.value)==null||i.resize()},200)})}),(i,s)=>{var l,c,d,u;return J(),ce("div",{ref_key:"chartRef",ref:o,style:He({width:`${((l=i.size)==null?void 0:l.w)||690}px`,height:`${((c=i.size)==null?void 0:c.h)||300}px`}),class:st([[`min-w-[${((d=i.size)==null?void 0:d.w)||690}px] min-h-[${((u=i.size)==null?void 0:u.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),go={key:0,class:"flex items-center gap-2"},mo=pe({__name:"SliderView",props:Mt({options:{},dim:{}},{value:{},valueModifiers:{},showall:{},showallModifiers:{},selected:{},selectedModifiers:{}}),emits:["update:value","update:showall","update:selected"],setup(n){const a=Ke(),e=n,t=Ee(n,"value"),r=Ee(n,"showall"),o=Ee(n,"selected"),i=W(),s=se(()=>{var f;return(f=e.options)==null?void 0:f.map(m=>m==null?void 0:m.map((S,M)=>({...S,label:Ae(S),value:M})))}),l=se(()=>{var f;return(f=e.options)==null?void 0:f.map(m=>{if(!he(m))return 100/(m[0].value.length-1)})}),c=(f,m,S)=>{if(S===void 0)return"";const M=Math.round(f/S);return e.options?e.options[m][0].value[M]:"0"},d=(f,m)=>{if(l.value){const S=Math.round(f/l.value[m]),M=t.value||[];M[m]=S,t.value=M}},u=se(()=>{var m;let f=0;return(m=e.options)==null||m.forEach(S=>{he(S)||f++}),f}),h=f=>{he(f)?i.value=[]:i.value=[f.pop()],ue(()=>{r.value=i.value[0]})},v=W(),g=W();it(()=>{var f;v.value&&(g.value=(f=v.value)==null?void 0:f.offsetWidth)});const x=se(()=>{var f;return!he(e.dim)&&!((f=e.dim)!=null&&f.includes("m"))});return(f,m)=>{const S=Za,M=ur,N=ni,k=Qt,R=qt,p=lr;return J(),ce("div",null,[ae(p,{value:b(i),"onUpdate:value":[m[0]||(m[0]=I=>Re(i)?i.value=I:null),h]},{default:ie(()=>[fe("div",{ref_key:"wrapRef",ref:v},[ae(R,{cols:b(g)<650?1:b(u)>2?2:b(u),"x-gap":5,"y-gap":5},{default:ie(()=>[(J(!0),ce(zt,null,Jt(f.options,(I,D)=>(J(),ye(k,{key:D,class:st(["p-2",[b(he)(I)?"w-0 hidden":""]]),style:He({border:`1px solid ${b(a).tabColor}`})},{default:ie(()=>{var G,V,H,Z;return[b(he)(I)?Me("",!0):(J(),ce("div",go,[Te(Ve(["X","Y","Z"][D])+" : ",1),ae(S,{options:b(s)?b(s)[D]:[],"default-value":0,class:"flex-1",size:"small",value:o.value[D],"onUpdate:value":Q=>o.value[D]=Q,disabled:(G=e.dim)==null?void 0:G.includes(["x","y","z"][D])},null,8,["options","value","onUpdate:value","disabled"]),b(x)?Me("",!0):(J(),ye(M,{key:0,disabled:(V=e.dim)==null?void 0:V.includes(["x","y","z"][D]),value:D},{default:ie(()=>m[1]||(m[1]=[Te("Show All")])),_:2},1032,["disabled","value"]))])),b(l)&&b(l)[D]!==void 0&&!b(he)(I)?(J(),ye(N,{key:1,class:"!flex-1",disabled:((H=b(i))==null?void 0:H.includes(D))||((Z=e.dim)==null?void 0:Z.includes(["x","y","z"][D])),step:b(l)[D],"format-tooltip":Q=>c(Q,D,b(l)?b(l)[D]:void 0),onUpdateValue:Q=>d(Q,D)},null,8,["disabled","step","format-tooltip","onUpdateValue"])):Me("",!0)]}),_:2},1032,["class","style"]))),128))]),_:1},8,["cols"])],512)]),_:1},8,["value"])])}}}),yo=pe({__name:"BarChart",props:{data:{},size:{}},setup(n){const a=n;Fe([Lt,kt,or,ia,Dt,Mi]);const e=qe(),t=Ke(),r=W(),o=W();return it(()=>{r.value=Vt(At(o.value,t.value.baseColor==="#000"?"dark":"light"))}),Le(()=>a.data,i=>{var l,c,d,u;if(!i)return;const s={backgroundColor:t.value.cardColor,tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:"20px",left:"100px",right:"20px",bottom:"30px"},xAxis:{type:"category",name:(l=a.data)==null?void 0:l.xname,nameLocation:"middle",nameGap:30,nameTextStyle:{color:t.value.primaryColor},axisTick:{alignWithLabel:!0},data:(c=a.data)==null?void 0:c.x},yAxis:{type:"value",name:((d=a.data)==null?void 0:d.yname)||"",nameLocation:"middle",nameGap:70,nameTextStyle:{color:t.value.primaryColor},axisLabel:{width:40,overflow:"truncate"},axisTick:{alignWithLabel:!0}},series:[{type:"bar",data:(u=a.data)==null?void 0:u.data}]};ue(()=>{var h;(h=r.value)==null||h.setOption(s)})},{immediate:!0}),ot(()=>{var i;(i=r.value)==null||i.dispose()}),Le(()=>e.chartLayoutCols,()=>{ue(()=>{setTimeout(()=>{var i;(i=r.value)==null||i.resize()},200)})}),(i,s)=>{var l,c,d,u;return J(),ce("div",{ref_key:"chartRef",ref:o,style:He({width:`${((l=i.size)==null?void 0:l.w)||690}px`,height:`${((c=i.size)==null?void 0:c.h)||300}px`}),class:st([[`min-w-[${((d=i.size)==null?void 0:d.w)||690}px] min-h-[${((u=i.size)==null?void 0:u.h)||220}px]`],"!w-full h-full mt-4"])},null,6)}}}),xo={class:"h-8 text-center"},_o={key:0},bo=pe({__name:"ChartView",props:{activeKey:{},latestStep:{},normalize:{type:Boolean},axisNormalize:{},axisLog:{},dim:{},barChart:{}},setup(n,{expose:a}){const e=["1d_complex_scatter","2d_complex_scatter","3d_complex_scatter","scalar_complex_scatter"],t=n,r=Jn(),o=W(),i=W([]),s=W({}),l=W(),c=W([]),d=W([0,0]),u=W(),h=({data:p,type:I})=>{var D,G;if(!Array.isArray(t.activeKey))if(I==="concat"&&!he(t.latestStep)){const V=s.value[t.activeKey];let H=!1;if(V&&Array.isArray(V)&&(H=!0),H)s.value={[t.activeKey]:(G=(D=s.value[t.activeKey]||[])==null?void 0:D.slice(0,t.latestStep[0]))==null?void 0:G.concat(p||[])};else if(V){const Z={};Be(s.value[t.activeKey],(Q,X)=>{var ge;Z[X]=(ge=Q==null?void 0:Q.slice(0,t.latestStep[0]))==null?void 0:ge.concat(p[X]||[])}),s.value={[t.activeKey]:Z}}}else s.value={[t.activeKey]:p||[]}},v=se(()=>{let p=0;return Be(i.value,I=>{he(I)||p++}),p}),g=p=>{const I=Math.max(...p),D=Math.min(...p),G=I-D;return{max:I,min:D,delta:G}},x=async p=>{o.value=p.exp_detail,s.value=p.data.result,l.value=p.data.plot_type;const I=[];Be(p.sweep_variables,D=>{I.push(D)}),i.value=I,he(c.value)&&(c.value=I.map(D=>{if(!he(D))return 0}))},f=se(()=>{const p=Object.keys(l.value||{});return!he(p)&&l.value?l.value[p[0]]:""}),m=(p,I)=>{var D,G;return!Array.isArray(p)&&typeof p!="number"?p:I=="x"&&((D=t.axisLog)!=null&&D.includes("x"))&&!t.normalize?Array.isArray(p)?p.map(V=>Math.log10(V)):Math.log10(p):I=="y"&&((G=t.axisLog)!=null&&G.includes("y"))&&!t.normalize?Array.isArray(p)?p.map(V=>Math.log10(V)):Math.log10(p):p},S=se(()=>{var I,D,G,V,H,Z,Q,X,ge,U,$,ee;if(Array.isArray(t.activeKey))return;const p=s.value[t.activeKey];if(f.value==="1d_normal"){const L=c.value[0],C=L!==void 0?i.value[0][L]:{},{min:A,delta:z}=g(p);return t.normalize?{x:C==null?void 0:C.value,y:z==0?0:p.map(y=>(y-A)/z),xname:Ae(C)}:{x:m(C==null?void 0:C.value,"x"),y:m(p,"y"),xname:Ae(C),yname:t.activeKey}}if(f.value==="2d_normal"){const L=c.value[0],C=c.value[1];if(L===void 0||C===void 0)return[];const A=i.value[0][L].value,z=i.value[1][C].value,y=z.length;let B=[];const{min:P,delta:j}=g(p),O=[],K=JSON.parse(JSON.stringify(p));if(t.axisNormalize==="x"&&!t.normalize?z.forEach((Y,F)=>{const E=[];A.forEach((Se,de)=>{E.push(K[de*y+F])});const{min:ne,delta:le}=g(E);A.forEach((Se,de)=>{K[de*y+F]=le==0?0:(K[de*y+F]-ne)/le})}):t.axisNormalize=="y"&&!t.normalize&&A.forEach((Y,F)=>{const E=[];z.forEach((Se,de)=>{E.push(K[F*y+de])});const{min:ne,delta:le}=g(E);z.forEach((Se,de)=>{K[F*y+de]=le==0?0:(K[de*y+C]-ne)/le})}),z.forEach((Y,F)=>{const E=[];A.forEach((ne,le)=>{const Se=K[le*y+F];if(t.normalize){const de=p[le*y+F];O.push(j==0?0:(de-P)/j),E.push([le,F,j==0?0:(de-P)/j])}else Se!==void 0&&(O.push(Se),E.push([le,F,Se]))}),B=B.concat(E)}),R.value){const Y=(I=t.dim)!=null&&I.includes("x")?A:z,F=[];return(D=t.dim)!=null&&D.includes("x")?Y==null||Y.forEach((E,ne)=>{F.push(K[ne*y+d.value[1]])}):(G=t.dim)!=null&&G.includes("y")&&(Y==null||Y.forEach((E,ne)=>{F.push(K[d.value[0]*y+ne])})),{x:Y,y:F,xname:Ae(i.value[0][L]),yname:Ae(i.value[1][C])}}return{data:B,x:m(A,"x"),y:m(z,"y"),xname:Ae(i.value[0][L]),yname:Ae(i.value[1][C]),min:Math.min(...O),max:Math.max(...O)}}if(f.value==="3d_normal"){const[L=0,C=0,A=0]=d.value,z=c.value[0],y=c.value[1],B=c.value[2],P=i.value[1][y||0].value.length,j=i.value[2][B||0].value.length,O=i.value[0][z||0].value,K=i.value[1][y||0].value,Y=i.value[2][y||0].value;if(R.value){if((V=t.dim)!=null&&V.includes("x"))return{x:O,y:O.map((F,E)=>p[E*P*j+C*j+A]),xname:Ae(i.value[0][z||0]),yname:""};if((H=t.dim)!=null&&H.includes("y"))return{x:K,y:K.map((F,E)=>p[L*P*j+E*j+A]),xname:Ae(i.value[1][z||0]),yname:""};if((Z=t.dim)!=null&&Z.includes("z"))return{x:Y,y:Y.map((F,E)=>p[L*P*j+C*j+E]),xname:Ae(i.value[2][z||0]),yname:""}}}if(f.value==="scalar_complex_scatter"){const{min:L,delta:C}=g(p.real[0]),{min:A,delta:z}=g(p.imag[0]);return t.normalize?[(Q=p.real[0])==null?void 0:Q.map((y,B)=>[C==0?0:(y-L)/C,z==0?0:(p.imag[0][B]-A)/z])]:[(X=p.real[0])==null?void 0:X.map((y,B)=>[m(y,"x"),m(p.imag[0][B],"y")])]}if(f.value==="1d_complex_scatter"){const[L=0]=d.value;if(u.value===0){const C=[];return i.value[u.value][0].value.forEach((z,y)=>{var K,Y;const{min:B,delta:P}=g(p.real[y]),{min:j,delta:O}=g(p.imag[y]);t.normalize?C.push((K=p.real[y])==null?void 0:K.map((F,E)=>[P==0?0:(F-B)/P,O==0?0:(p.imag[y][E]-j)/O])):C.push((Y=p.real[y])==null?void 0:Y.map((F,E)=>[m(F,"x"),m(p.imag[y][E],"y")]))}),C}return[(ge=p.real[L])==null?void 0:ge.map((C,A)=>[m(C,"x"),m(p.imag[L][A],"y")])]}if(f.value==="2d_complex_scatter"){const L=[],[C=0,A=0]=d.value,z=i.value[1][0].value.length;if(u.value!==void 0){const y=i.value[u.value][0].value;if(u.value===0)return y.forEach((B,P)=>{var j;L.push((j=p.real[P*z+A])==null?void 0:j.map((O,K)=>{if(t.normalize){const{min:Y,delta:F}=g(p.real[P*z+A]),{min:E,delta:ne}=g(p.imag[P*z+A]);return[F==0?0:(O-Y)/F,ne==0?0:(p.imag[P*z+A][K]-E)/ne]}return[m(O,"x"),m(p.imag[P*z+A][K],"y")]}))}),L;if(u.value===1)return y.forEach((B,P)=>{var j;L.push((j=p.real[C*z+P])==null?void 0:j.map((O,K)=>{const{min:Y,delta:F}=g(p.real[C*z+P]),{min:E,delta:ne}=g(p.imag[C*z+P]);return t.normalize?[F==0?0:(O-Y)/F,ne==0?0:(p.imag[C*z+P][K]-E)/ne]:[m(O,"x"),m(p.imag[C*z+P][K],"y")]}))}),L}return[(U=p.real[C*z+A])==null?void 0:U.map((y,B)=>{if(t.normalize){const{min:P,delta:j}=g(p.real[C*z+A]),{min:O,delta:K}=g(p.imag[C*z+A]);return[j==0?0:(y-P)/j,K==0?0:(p.imag[C*z+A][B]-O)/K]}return[m(y,"x"),m(p.imag[C*z+A][B],"y")]})]}if(f.value==="3d_complex_scatter"){const[L=0,C=0,A=0]=d.value,z=i.value[1][0].value.length,y=i.value[2][0].value.length,B=[],P=i.value[u.value][0].value;if(u.value===0)return P.forEach((j,O)=>{var K,Y;if(t.normalize){const{min:F,delta:E}=g(p.real[O*z*y+C*y+A]),{min:ne,delta:le}=g(p.imag[O*z*y+C*y+A]);B.push((K=p.real[O*z*y+C*y+A])==null?void 0:K.map((Se,de)=>[E==0?0:(Se-F)/E,le==0?0:(p.imag[O*z*y+C*y+A][de]-ne)/le]))}else B.push((Y=p.real[O*z*y+C*y+A])==null?void 0:Y.map((F,E)=>[m(F,"x"),m(p.imag[O*z*y+C*y+A][E],"y")]))}),B;if(u.value===1)return P.forEach((j,O)=>{var K,Y;if(t.normalize){const{min:F,delta:E}=g(p.real[L*z*y+O*y+A]),{min:ne,delta:le}=g(p.imag[L*z*y+O*y+A]);B.push((K=p.real[L*z*y+O*y+A])==null?void 0:K.map((Se,de)=>[E==0?0:(Se-F)/E,le==0?0:(p.imag[L*z*y+O*y+A][de]-ne)/le]))}else B.push((Y=p.real[L*z*y+O*y+A])==null?void 0:Y.map((F,E)=>[m(F,"x"),m(p.imag[L*z*y+O*y+A][E],"y")]))}),B;if(u.value===2)return P.forEach((j,O)=>{var K,Y;if(t.normalize){const{min:F,delta:E}=g(p.real[L*z*y+C*y+O]),{min:ne,delta:le}=g(p.imag[L*z*y+C*y+O]);B.push((K=p.real[L*z*y+C*y+O])==null?void 0:K.map((Se,de)=>[E==0?0:(Se-F)/E,le==0?0:(p.imag[L*z*y+C*y+O][de]-ne)/le]))}else B.push((Y=p.real[L*z*y+C*y+O])==null?void 0:Y.map((F,E)=>[m(F,"x"),m(p.imag[L*z*y+C*y+O][E],"y")]))}),B;if(t.normalize){const{min:j,delta:O}=g(p.real[L*z*y+C*y+A]),{min:K,delta:Y}=g(p.imag[L*z*y+C*y+A]);return[($=p.real[L*z*y+C*y+A])==null?void 0:$.map((F,E)=>[O==0?0:(F-j)/O,Y==0?0:(p.imag[L*z*y+C*y+A][E]-K)/Y])]}return[(ee=p.real[L*z*y+C*y+A])==null?void 0:ee.map((j,O)=>[m(j,"x"),m(p.imag[L*z*y+C*y+A][O],"y")])]}return{x:[],y:[],xname:""}}),M=se(()=>{var p,I,D,G,V;if(t.normalize){const{min:H,delta:Z}=g(((p=t.barChart)==null?void 0:p.data)||[]),Q=(I=t.barChart)==null?void 0:I.data.map(X=>Z==0?0:(X-H)/Z);return{x:(D=t.barChart)==null?void 0:D.x,data:Q}}return{x:m((G=t.barChart)==null?void 0:G.x,"x"),data:m((V=t.barChart)==null?void 0:V.data,"y")}});a({setData:h,updateStore:x});const N=se(()=>!!(!(!e.includes(f.value)&&v.value>0)||f.value=="2d_normal"&&R.value||f.value=="3d_normal"&&R.value)),k=se(()=>!e.includes(f.value)&&v.value>0&&!R.value),R=se(()=>{var p;return!he(t.dim)&&!((p=t.dim)!=null&&p.includes("m"))});return(p,I)=>{var G,V,H,Z,Q;const D=Yr;return J(),ce("div",null,[fe("div",xo,[ae(D,{color:{color:"#7816ff",textColor:"#fff"},size:"tiny"},{default:ie(()=>{var X,ge;return[Te(" Exp "+Ve((ge=(X=b(r))==null?void 0:X.expInfo)==null?void 0:ge.exp_id),1)]}),_:1}),Te(" "+Ve((G=b(o))==null?void 0:G.title)+" ",1),fe("div",null,[Te(Ve((V=b(r).expInfo)==null?void 0:V.group_name)+" :: "+Ve((H=b(r).expInfo)==null?void 0:H.space_name)+" ",1),(Z=b(r).expInfo)!=null&&Z.create_time?(J(),ce("span",_o,":: "+Ve((Q=b(r).expInfo)==null?void 0:Q.create_time),1)):Me("",!0)])]),Array.isArray(p.activeKey)?Me("",!0):(J(),ce(zt,{key:0},[b(f)==="1d_normal"||b(R)&&b(f)==="2d_normal"||b(f)==="3d_normal"?(J(),ye(po,{key:0,data:b(S)},null,8,["data"])):Me("",!0),b(f)==="2d_normal"&&!b(R)?(J(),ye(vo,{key:1,data:b(S),"active-key":p.activeKey},null,8,["data","active-key"])):Me("",!0)],64)),e.includes(b(f))?(J(),ye(fo,{key:1,"all-values":b(he)(b(i)[b(u)])?[]:b(i)[b(u)][0].value,data:b(S)},null,8,["all-values","data"])):Me("",!0),Array.isArray(p.activeKey)&&p.activeKey.length>0?(J(),ye(yo,{key:2,data:b(M)},null,8,["data"])):Me("",!0),b(k)?(J(),ye(li,{key:3,"plot-type":b(f),options:b(i),modelValue:b(c),"onUpdate:modelValue":I[0]||(I[0]=X=>Re(c)?c.value=X:null)},null,8,["plot-type","options","modelValue"])):Me("",!0),b(N)?(J(),ye(mo,{key:4,options:b(i),dim:p.dim,value:b(d),"onUpdate:value":I[1]||(I[1]=X=>Re(d)?d.value=X:null),showall:b(u),"onUpdate:showall":I[2]||(I[2]=X=>Re(u)?u.value=X:null),selected:b(c),"onUpdate:selected":I[3]||(I[3]=X=>Re(c)?c.value=X:null)},null,8,["options","dim","value","showall","selected"])):Me("",!0)])}}}),So={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},wo=pe({name:"ToolsAlt",render:function(a,e){return J(),ce("svg",So,e[0]||(e[0]=[fe("path",{d:"M29.415 21.666l-6.335-6.335l6.334-6.334a2 2 0 0 0 .001-2.829l-.001-.002l-3.58-3.58a2 2 0 0 0-2.829-.001l-.001.001L16.67 8.92l-6.335-6.335a2.004 2.004 0 0 0-2.828 0L2.585 7.506a2.001 2.001 0 0 0 0 2.829l6.334 6.334L2 23.59V30h6.41l6.92-6.92l6.335 6.337a2.008 2.008 0 0 0 2.83 0l4.92-4.922a2.001 2.001 0 0 0 0-2.829zm-5.002-17.67l3.59 3.59l-6.333 6.334l-3.59-3.59zM8 28H4v-3.591l6.33-6.329l3.676 3.678zm15.08.004L4 8.92L8.922 4l3.788 3.787l-2.252 2.253l1.415 1.414l2.251-2.252l4.13 4.13L16 15.582l1.416 1.414l2.252-2.252l4.13 4.13l-2.252 2.251l1.414 1.415l2.252-2.251l2.79 2.791z",fill:"currentColor"},null,-1)]))}}),Mo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},zo=pe({name:"SmallDashOutlined",render:function(a,e){return J(),ce("svg",Mo,e[0]||(e[0]=[fe("path",{d:"M112 476h72v72h-72zm182 0h72v72h-72zm364 0h72v72h-72zm182 0h72v72h-72zm-364 0h72v72h-72z",fill:"currentColor"},null,-1)]))}}),Vo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Co=pe({name:"AxisX",render:function(a,e){return J(),ce("svg",Vo,e[0]||(e[0]=[jr('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 13v.01"></path><path d="M4 9v.01"></path><path d="M4 5v.01"></path><path d="M17 20l3-3l-3-3"></path><path d="M4 17h16"></path></g>',1)]))}}),Io={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Ao=pe({name:"Table20Filled",render:function(a,e){return J(),ce("svg",Io,e[0]||(e[0]=[fe("g",{fill:"none"},[fe("path",{d:"M13 17h1.5a2.5 2.5 0 0 0 2.5-2.5V13h-4v4zm0-5V8h4v4h-4zm-1 0H8V8h4v4zm-4 1h4v4H8v-4zm-1-1V8H3v4h4zm-4 1h4v4H5.5A2.5 2.5 0 0 1 3 14.5V13zm10-6h4V5.5A2.5 2.5 0 0 0 14.5 3H13v4zm-1-4v4H8V3h4zM7 3v4H3V5.5A2.5 2.5 0 0 1 5.5 3H7z",fill:"currentColor"})],-1)]))}}),Lo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 16 16"},ko=pe({name:"TableMoveBelow16Regular",render:function(a,e){return J(),ce("svg",Lo,e[0]||(e[0]=[fe("g",{fill:"none"},[fe("path",{d:"M13.5 14a.5.5 0 0 0 0-1h-11a.5.5 0 0 0 0 1h11zm-9-12A2.5 2.5 0 0 0 2 4.5v5a.5.5 0 0 0 .5.5H5a1.495 1.495 0 0 1 1-1.415V6h4v2.585A1.495 1.495 0 0 1 11 10h2.5a.5.5 0 0 0 .5-.5v-5A2.5 2.5 0 0 0 11.5 2h-7zM13 6v3h-2V6h2zM5 9H3V6h2v3zm1-6h4v2H6V3zm5 0h.5A1.5 1.5 0 0 1 13 4.5V5h-2V3zM5 3v2H3v-.5A1.5 1.5 0 0 1 4.5 3H5zm1.146 6.646a.5.5 0 0 1 .708 0l.646.647V8.5a.5.5 0 0 1 1 0v1.793l.646-.647a.5.5 0 1 1 .708.708l-1.5 1.5a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 0-.708z",fill:"currentColor"})],-1)]))}}),Do={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Ro=pe({name:"TableSimple20Filled",render:function(a,e){return J(),ce("svg",Do,e[0]||(e[0]=[fe("g",{fill:"none"},[fe("path",{d:"M5.5 3A2.5 2.5 0 0 0 3 5.5v4h6.5V3h-4zm4 7.5H3v4A2.5 2.5 0 0 0 5.5 17h4v-6.5zm1 0H17v4a2.5 2.5 0 0 1-2.5 2.5h-4v-6.5zm6.5-1v-4A2.5 2.5 0 0 0 14.5 3h-4v6.5H17z",fill:"currentColor"})],-1)]))}}),To={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Oo=pe({name:"TableRowsRound",render:function(a,e){return J(),ce("svg",To,e[0]||(e[0]=[fe("path",{d:"M19 8H5c-1.1 0-2-.9-2-2s.9-2 2-2h14c1.1 0 2 .9 2 2s-.9 2-2 2zm0 2H5c-1.1 0-2 .9-2 2s.9 2 2 2h14c1.1 0 2-.9 2-2s-.9-2-2-2zm0 6H5c-1.1 0-2 .9-2 2s.9 2 2 2h14c1.1 0 2-.9 2-2s-.9-2-2-2z",fill:"currentColor"},null,-1)]))}}),Po={class:"flex justify-center items-center"},Eo=pe({__name:"ToolbarView",props:Mt({zdisabled:{type:Boolean},axisLogDisabled:{type:Boolean}},{normalize:{type:Boolean},normalizeModifiers:{},axisNormalize:{},axisNormalizeModifiers:{},axisLog:{},axisLogModifiers:{},dim:{},dimModifiers:{}}),emits:["update:normalize","update:axisNormalize","update:axisLog","update:dim"],setup(n){const a=n,e=qe(),{t}=qa(),r=Ke(),o=Ee(n,"normalize"),i=Ee(n,"axisNormalize"),s=Ee(n,"axisLog"),l=Ee(n,"dim"),c=[{label:t("plot.tools.t7"),key:"m"},{label:t("plot.tools.t5"),key:"x"},{label:t("plot.tools.t6"),key:"y"}],d=[{label:t("plot.tools.t10"),key:"m"},{label:t("plot.tools.t11"),key:"x"},{label:t("plot.tools.t12"),key:"y"},{label:t("plot.tools.t13"),key:"z"}],u=[{label:t("plot.tools.t8"),key:"x"},{label:t("plot.tools.t9"),key:"y"}],h=x=>ve(xa,{label:x.label,value:x.key}),v=x=>ve(xa,{label:x.label,value:x.key,disabled:a.zdisabled&&x.key==="z"}),g=x=>ve(ur,{label:x.label,value:x.key});return(x,f)=>{const m=qr,S=Jr,M=en,N=Qr,k=lr,R=Qn,p=ei,I=Zr;return J(),ce("div",{class:"flex justify-between items-center border-b pb-2 mb-2",style:He({borderColor:b(r).dividerColor})},[ae(I,{align:"center"},{default:ie(()=>[fe("div",Po,[ae(m,{component:b(wo)},null,8,["component"])]),ae(S,{vertical:""}),ae(k,{value:s.value,"onUpdate:value":f[0]||(f[0]=D=>s.value=D)},{default:ie(()=>[ae(N,{options:u,"render-label":g,disabled:o.value},{default:ie(()=>[ae(M,{type:"primary",disabled:o.value},{icon:ie(()=>[ae(b(zo))]),default:ie(()=>[Te(" "+Ve(b(t)("plot.tools.t2")),1)]),_:1},8,["disabled"])]),_:1},8,["disabled"])]),_:1},8,["value"]),ae(R,{value:l.value,"onUpdate:value":f[1]||(f[1]=D=>l.value=D),name:"radiogroup"},{default:ie(()=>[ae(N,{options:d,"render-label":v},{default:ie(()=>[ae(M,{type:"primary",disabled:o.value},{icon:ie(()=>[ae(b(ko))]),default:ie(()=>[Te(" "+Ve(b(t)("plot.tools.t4")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["value"]),ae(S,{vertical:""}),ae(R,{value:i.value,"onUpdate:value":f[2]||(f[2]=D=>i.value=D),name:"radiogroup",disabled:x.axisLogDisabled},{default:ie(()=>[ae(N,{options:c,"render-label":h,disabled:o.value||x.axisLogDisabled},{default:ie(()=>[ae(M,{type:"primary",disabled:o.value||x.axisLogDisabled},{icon:ie(()=>[ae(b(Co))]),default:ie(()=>[Te(" "+Ve(b(t)("plot.tools.t3")),1)]),_:1},8,["disabled"])]),_:1},8,["disabled"])]),_:1},8,["value","disabled"]),ae(p,{size:"large",value:o.value,"onUpdate:value":f[3]||(f[3]=D=>o.value=D)},{checked:ie(()=>[Te(Ve(`${b(t)("plot.tools.t1")}`),1)]),unchecked:ie(()=>[Te(Ve(`${b(t)("plot.tools.t1")}`),1)]),_:1},8,["value"]),ae(S,{vertical:""}),ae(M,{type:"primary",size:"small",onClick:b(e).toggleChartLayoutCols},{icon:ie(()=>[b(e).chartLayoutCols==1?(J(),ye(b(Oo),{key:0})):Me("",!0),b(e).chartLayoutCols==2?(J(),ye(b(Ro),{key:1})):Me("",!0),b(e).chartLayoutCols==3?(J(),ye(b(Ao),{key:2})):Me("",!0)]),_:1},8,["onClick"])]),_:1})],4)}}}),No={class:"flex min-h-80"},Ho={class:"font-bold mb-2"},$o={class:"flex-1 pl-5"},Bo="/",Fo=pe({__name:"PlotView",setup(n){const{t:a}=qa(),e=qe(),t=tn(),r=Ke(),o=W(!1),i=W(),s=W([]),l=W(),c=W([]),d=W({}),u=W(),h=W(),v=W([]),g=W(null),x=W({}),f=W([]),m=W([]),S=W(null),M=W(!1),N=U=>{M.value&&(S.value=setTimeout(U,1e3))},k=()=>{S.value&&(clearInterval(S.value),S.value=null)},R=U=>{const $=[Pe.SERVICE_QUEUING,Pe.SERVICE_PENDING,Pe.HOST_DOWNLOADED,Pe.WAITING,"LOADING_DATA"].includes(U),ee=[Pe.RUNNING].includes(U),L=[Pe.COMPLETE,Pe.CANCELING,Pe.CANCELED,Pe.ERROR].includes(U);if($)return"LOADING";if(ee)return"RUNNING";if(L)return"COMPLETE"},p=W([]),I=ca(async()=>{var L,C,A,z,y,B,P,j,O;if(!t.query.device_group_name||!t.query.exp_id)return;const U={device_group_name:t.query.device_group_name,space_id:t.query.space_id,exp_id:t.query.exp_id,fields:v.value||[],latest_step:Array(v.value.length===0?1:v.value.length).fill(p.value.pop()||0)},[$,ee]=await pa(U);if(!$&&(ee==null?void 0:ee.status)===0){const K=(C=(L=ee.data)==null?void 0:L.data)==null?void 0:C.result,Y=Object.keys(((z=(A=ee.data)==null?void 0:A.data)==null?void 0:z.data_range)||{});Y.length>0?p.value=ee.data.data.data_range[Y[0]]:p.value=[],ue(()=>{S.value&&!he(K)&&Be(x.value,(E,ne)=>{E&&E.setData({data:K[ne],type:"concat"})})});const F=R((y=ee.data)==null?void 0:y.status);F&&F!=="COMPLETE"&&N(I),S.value&&R((B=ee.data)==null?void 0:B.status)==="COMPLETE"&&(ue(()=>{Be(x.value,(E,ne)=>{E&&E.setData({data:K[ne],type:"concat"})})}),k()),d.value=((P=ee.data)==null?void 0:P.all_fields)||{},u.value=(j=ee.data)==null?void 0:j.status,(O=ee.data)!=null&&O.message&&(h.value=ee.data.message)}},200),D=se(()=>R(u.value)),G=W(),V=W(),H=W({x:[],data:[]}),Z=ca(async U=>{var C,A,z,y;if(!t.query.exp_id)return;const $={device_group_name:t.query.device_group_name,space_id:t.query.space_id,exp_id:t.query.exp_id,fields:U,latest_step:[0]},[ee,L]=await pa($);!ee&&(L==null?void 0:L.status)===0&&(G.value={...G.value,...((A=(C=L.data)==null?void 0:C.data)==null?void 0:A.plot_type)||{}},L.data.data.plot_type[U[0]]==="scalar_normal"&&(V.value={...V.value||{},...((y=(z=L.data)==null?void 0:z.data)==null?void 0:y.result)||{}}),ue(()=>{const B=[];let P=-1;v.value.forEach((O,K)=>{if(G.value[O]==="scalar_normal"){const Y=B.findIndex(F=>Array.isArray(F));Y>-1?(B[Y].push(O),P=Y):(B.push([O]),P=K)}else B.push(O)});const j=[];Array.isArray(B[P])&&B[P].forEach(O=>{j.push(V.value[O][0])}),H.value={x:B[P],data:j},m.value=B}),ue(()=>{setTimeout(()=>{var B,P;Be((B=L.data.data)==null?void 0:B.plot_type,j=>{c.value=[...new Set([...c.value,j])]}),(P=x.value[U[0]])==null||P.updateStore(L.data)},100)}))},200);an(()=>{M.value=!0,ue(()=>{S.value?k():I()})}),ot(()=>{M.value=!1,ue(()=>{k()})}),rn(()=>{M.value=!1,ue(()=>{k()})}),Le(v,U=>{var ee,L,C;if((U==null?void 0:U.length)>((ee=f.value)==null?void 0:ee.length)){const A=da(U,f.value);Z(A)}let $="";if((U==null?void 0:U.length)<f.value.length&&($=da(f.value,U)[0]),f.value=U,$){let A=JSON.parse(JSON.stringify(m.value||[]));A=ha(A,$);const z=A.findIndex(P=>Array.isArray(P));if(z>-1){let P=A[z];P=ha(P,$),he(P)?A.splice(z,1):A[z]=P}m.value=A;const y=JSON.parse(JSON.stringify(H.value||{})),B=(L=y.x)==null?void 0:L.findIndex(P=>P===$);B>-1&&(y.x.splice(B,1),(C=y.data)==null||C.splice(B,1)),ue(()=>{H.value=y})}ue(()=>{var A;(A=g.value)==null||A.scrollTo({top:384*Math.ceil(v.value.length/2),behavior:"smooth"})})});const Q=(U,$)=>{x.value[$]=U},X=se(()=>c.value.some(U=>U==null?void 0:U.includes("3d_"))),ge=se(()=>c.value.some(U=>(U==null?void 0:U.includes("1d_"))||(U==null?void 0:U.includes("scalar_"))));return(U,$)=>{const ee=nn,L=Qt,C=qt,A=on,z=sn;return J(),ye(z,{style:{height:"calc(100vh - 235px)"},"content-class":"!p-2"},{default:ie(()=>[fe("div",No,[fe("div",{class:"w-52",style:He({borderRight:`1px solid ${b(r).tabColor}`,height:"calc(100vh - 190px)"})},[fe("div",Ho,Ve(b(a)("expInfo.dataField")),1),ae(ee,{style:{"max-height":"calc(100vh - 285px)"}},{default:ie(()=>[ae(ii,{modelValue:b(v),"onUpdate:modelValue":$[0]||($[0]=y=>Re(v)?v.value=y:null),"all-fields":b(d),"divider-key":Bo},null,8,["modelValue","all-fields"])]),_:1})],4),fe("div",$o,[ae(Eo,{normalize:b(o),"onUpdate:normalize":$[1]||($[1]=y=>Re(o)?o.value=y:null),"axis-normalize":b(i),"onUpdate:axisNormalize":$[2]||($[2]=y=>Re(i)?i.value=y:null),"axis-log":b(s),"onUpdate:axisLog":$[3]||($[3]=y=>Re(s)?s.value=y:null),dim:b(l),"onUpdate:dim":$[4]||($[4]=y=>Re(l)?l.value=y:null),zdisabled:!b(X),"axis-log-disabled":b(ge)},null,8,["normalize","axis-normalize","axis-log","dim","zdisabled","axis-log-disabled"]),ae(ee,{style:{"max-height":"calc(100vh - 310px)"},ref_key:"scrollbarRef",ref:g},{default:ie(()=>[ae(A,{show:b(D)==="LOADING"},{default:ie(()=>[ae(C,{cols:b(e).chartLayoutCols,"x-gap":"10","y-gap":"10",class:"min-h-[200px]"},{default:ie(()=>[(J(!0),ce(zt,null,Jt(b(m),y=>(J(),ye(L,{class:"min-h-[300px] p-2 rounded-xl",style:He({border:`1px solid ${b(r).tabColor}`}),key:Array.isArray(y)?"bar":y},{default:ie(()=>[ae(bo,{"latest-step":b(p),"bar-chart":b(H),normalize:b(o),"axis-normalize":b(i),"axis-log":b(s),dim:b(l),ref_for:!0,ref:B=>Q(B,Array.isArray(y)?"bar--":y),"active-key":y},null,8,["latest-step","bar-chart","normalize","axis-normalize","axis-log","dim","active-key"])]),_:2},1032,["style"]))),128))]),_:1},8,["cols"])]),_:1},8,["show"])]),_:1},512)])])]),_:1})}}}),Go={class:"flex gap-5"},Qo=pe({__name:"ExpFinalSetting",setup(n){return(a,e)=>(J(),ce("div",Go,[ae(Fo)]))}});export{Qo as default};
