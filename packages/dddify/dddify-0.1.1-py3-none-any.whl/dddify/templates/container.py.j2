from dishka import Provider, Scope, provide
from sqlalchemy.ext.asyncio import AsyncSession

from {{ domain_path }}.domain import {{ entity_name }}Repository
from {{ domain_path }}.infrastructure.persistence.repository import SqlAlchemy{{ entity_name }}Repository


class {{ entity_name }}Provider(Provider):
    @provide(scope=Scope.REQUEST)
    def get_repository(self, session: AsyncSession) -> {{ entity_name }}Repository:
        return SqlAlchemy{{ entity_name }}Repository(session)

    @provide(scope=Scope.REQUEST)
    def get_session(self) -> AsyncSession:
        raise NotImplementedError("Session Provider implementieren")
