# =============================================================================
# MAIN SECTION
# =============================================================================
#
# Pipeline parameters:
# - name (str, required): human-readable pipeline name
# - description (str, required): detailed description of pipeline purpose
#
# =============================================================================
name: "Intelligent Close Platform"
description: "Focused agentic workflows for Intelligent Close Platform with three specialized workflows (Argus - Anomaly Detector and Reconvoy - Open Items Resolver). Arugs detects anomalies in financial journal entries. Reconvoy researches and resolves open item reconciliation issues acorss multiple entities and currencies."

# =============================================================================
# SERVERS SECTION - Server configuration
# =============================================================================
#
# Server configurations for FastAPI and MCP servers
#
# Parameters:
# - fastapi (object, required): FastAPI server configuration
#   - fastapi.url (str, required): FastAPI server URL
# - mcp (list, required): MCP servers configuration
#   - mcp[].name (str, required): unique server name
#   - mcp[].url (str, required): server URL
#   - mcp[].model (str, required): model for this server
#   - mcp[].transport (str, required): transport for this server
#   - mcp[].embedding_model (str, optional): embedding model for this server
#   - mcp[].db_path (str, optional): path to ChromaDB database for this server
#
# =============================================================================
servers:
  fastapi:
    url: http://0.0.0.0:8090
  mcp:
    - name: topaz-mcp
      url: http://0.0.0.0:8050
      model: azure_openai
      transport: streamable-http
      db_path: "./data/chroma_db"
      embedding_model: azure_openai_embedding

# =============================================================================
# INDEPENDENT AGENTS SECTION - Independent agents configuration
# =============================================================================
#
# Defines the independent agents configuration for flat structure.
#
# Parameters:
# - independent_agents (list[object], required): list of independent agents
#   - independent_agents[].id (str, required): unique agent identifier
#   - independent_agents[].config_file (str, required): path to agent configuration file relative to config/
#
# =============================================================================
independent_agents: []

# =============================================================================
# PIPELINES SECTION - Pipeline configuration
# =============================================================================
#
# Defines the pipelines configuration.
#
# Parameters:
# - pipelines (list[object], required): list of pipelines
#   - pipelines[].id (str, required): unique pipeline identifier
#   - pipelines[].config_file (str, required): path to pipeline configuration file relative to config/
#
# =============================================================================
pipelines:
  - id: argus
    config_file: "pipelines/argus.yml"
  - id: reconvoy
    config_file: "pipelines/reconvoy.yml"

# =============================================================================
# DATABASE SECTION - SQLite database configuration
# =============================================================================
#
# Defines the chat database configuration.
#
## Parameters:
# - chatdb_path (str, required): path to SQLite database file
# - chromadb_path (str, optional): path to ChromaDB database file
# - rag_files_path (str, optional): path to RAG file storage directory (for document/image ingestion)
# - user_files_path (str, optional): path to user file storage directory (for session attachments)
# - embedding_model (str, optional): embedding model to use for document and image ingestion
# - vision_model (str, optional): vision model to use for image ingestion
#
# =============================================================================
chatdb_path: "./data/chat.db"
chromadb_path: "./data/chroma_db"
rag_files_path: "./data/rag_files"
user_files_path: "./data/user_files"
embedding_model: azure_openai_embedding
vision_model: azure_openai_vision

# =============================================================================
# ASSISTANT SECTION - Assistant configuration for routing
# =============================================================================
#
# Assistant configuration
#
# Parameters:
#   - id (str, required): unique assistant identifier
#   - type (str, required): assistant type (adk, adk_agent)
#   - model (str, optional): model to use for routing (inherits from settings.json)
#   - prompt: custom prompt for LLM classification
#     - prompt.instruction: custom prompt for LLM classification
#       - instruction.inline (str, optional): inline prompt content with Jinja variable support
#       - instruction.file (str, optional): prompt file path relative to project root
#       - instruction.jinja (str, optional): Jinja template path or inline template
#     - prompt.inputs (dict[str, str], optional): input variables for the prompt
#       - inputs.inline (str, optional): inline prompt content with Jinja variable support
#       - inputs.file (str, optional): prompt file path relative to project root
#       - inputs.jinja (str, optional): Jinja template path or inline template
#
# =============================================================================
assistant:
  id: assistant
  type: maf
  model: azure_openai
  prompt:
    instruction:
      jinja: prompts/assistant_intent_classifier.jinja

# =============================================================================
# OPERATIONS ASSISTANT SECTION - Operations Assistant configuration
# =============================================================================
#
# Operations Assistant configuration for HITL queue and case management.
#
# Parameters:
#   - id (str, required): unique operations assistant identifier
#   - type (str, required): assistant framework type (maf, agno, langgraph, etc.)
#   - model (str, required): model to use for operations assistant
#   - prompt: custom prompt for operations assistant
#     - prompt.instruction: custom prompt for operations assistant
#       - instruction.jinja (str, optional): Jinja template path
#
# =============================================================================
operations_assistant:
  id: operations_assistant
  type: maf
  model: azure_openai
  prompt:
    instruction:
      jinja: prompts/operations_assistant.jinja

# =============================================================================
# ORCHESTRATOR SECTION - Orchestrator configuration for handoff pattern
# =============================================================================
#
# Orchestrator configuration for virtual orchestrators in handoff patterns.
# This sets the default model for all virtual orchestrators across pipelines.
#
# Parameters:
#   - model (str, optional): model to use for orchestrator LLM calls
#                            Defaults to "azure_openai" if not specified
#
# Notes:
# - Virtual orchestrators are auto-generated from agent descriptions
# - Individual pipelines can override this with pattern.model in their config
# - This is a global default for all handoff patterns
#
# =============================================================================
orchestrator:
  model: azure_openai # Default model for all virtual orchestrators
