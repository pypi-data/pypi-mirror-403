# =============================================================================
# SUMMARY REPORTER AGENT CONFIGURATION
# =============================================================================
#
# This agent generates a summary report of journal entry processing results for this run.
# It uses completed_cases and hitl_queued_cases (automatically populated by LoopRunner)
# to track straight-through vs pending review counts, and provides a link to the
# Operations Center for detailed case management.
#
# =============================================================================
id: argus_summary_reporter
type: maf
model: azure_openai
run_mode: local

# =============================================================================
# RESUME BEHAVIOR CONFIGURATION
# =============================================================================
# Controls when this agent runs after resuming from checkpoint
# Options:
#   - "always" (default): Run normally, skip only if output already in upstream
#   - "skip_on_resume": Always skip when resuming from checkpoint
#   - "run_only_when_complete": Only run when all loop iterations are complete
# 
# NOTE: Set to "run_only_when_complete" because this agent needs all loop iterations
# to complete before generating the summary report. It will skip during resume and
# only run when the loop finishes naturally (all iterations processed).
# =============================================================================
resume_behavior: "run_only_when_complete"

# =============================================================================
# REMOTE EXECUTION CONFIGURATION
# =============================================================================
remote:
  url: http://127.0.0.1:8100/argus_summary_reporter
  timeout: 30000
  retry_attempts: 3

# =============================================================================
# MCP CONFIGURATION
# =============================================================================
mcp:
  servers:
    - url: "http://localhost:8050/mcp"
      toolkits: ["sqlite", "filesystem"]
      tools: ["sqlite.*", "fs_*"]

# =============================================================================
# PROMPT CONFIGURATION
# =============================================================================
prompt:
  instruction:
    jinja: prompts/argus_summary_reporter.jinja
  inputs:
    inline: |
      - Run ID: {{argus_pending_journal_scanner.run_id}}
      - Total Pending Count: {{argus_pending_journal_scanner.total_count}}
      - Completed Cases: {{completed_cases}}
      - HITL Queued Cases: {{hitl_queued_cases}}
      - Project Directory: {{project_dir}}
