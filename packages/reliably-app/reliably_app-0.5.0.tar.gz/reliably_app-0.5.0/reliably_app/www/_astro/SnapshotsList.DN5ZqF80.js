import{M as A}from"./MultiButton.BdOjon-N.js";import{r as B,d as R,e as N}from"./snapshots.Bn5DFrP3.js";import{E as M}from"./EntityFilter.DE3cAZtq.js";import{L as x}from"./LoadingPlaceholder.BoWrztnb.js";import{T as j}from"./TagList.DHWFg1rv.js";import{A as D}from"./AwsLogo.UvCYOLAB.js";import{K as T}from"./KubernetesLogo.HTj9OyEL.js";/* empty css                       */import{_ as P}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as k,t as E,g as K,h as s,c as t,a as r,i as p,e as n,j as g,l as v,f as z,F as y,k as F,r as m,o as V}from"./runtime-core.esm-bundler.Y6RLDZTT.js";import{P as C}from"./Pager.Cmasf88E.js";import{N as H}from"./NoData.CWOJbPLy.js";import{u as I}from"./index.CwJxcYEt.js";import"./runtime-dom.esm-bundler.DChKj6X8.js";import"./index.DUHDLdXK.js";import"./CopyIcon.CpId03NM.js";import"./TrashIcon.BzGEjUcP.js";import"./EditIcon.VtRJix1y.js";import"./PlusIcon.CLPjCzPo.js";/* empty css                      */import"./ChevronDown.BHvjSUQm.js";import"./user.BEEfOshe.js";import"./user.Bg1Nd46A.js";import"./index.BSdFiPHn.js";import"./loader.BQDlK3Tc.js";import"./notifications.NSMm1_5U.js";import"./strings.Fm4VVZpd.js";import"./dayjs.min.xlbmdZiw.js";import"./duration.BGVtNWJ9.js";/* empty css                       *//* empty css                       *//* empty css                        *//* empty css                       *//* empty css                        */const O=k({__name:"ResourcePreview",props:{resource:{},page:{}},setup(f,{expose:o}){o();const i=f,{resource:e,page:a}=E(i),u=K(()=>{let c=[];return e.value.meta.kind!=="pod"&&c.push(e.value.meta.name),e.value.meta.project&&c.push(`project: ${e.value.meta.project}`),e.value.meta.region&&c.push(`region: ${e.value.meta.region}`),e.value.meta.zone&&c.push(`zone: ${e.value.meta.zone}`),e.value.meta.ns&&c.push(`ns: ${e.value.meta.ns}`),c}),l={props:i,resource:e,page:a,tags:u,TagList:j,AwsLogo:D,KubernetesLogo:T};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}}),U={class:"resourcePreview tableList__row"},W={class:"tableList__cell tableList__cell--center tableList__cell--status resourcePreview__icon"},q={key:0,title:"Kubernetes Resource"},G={key:1,title:"AWS Resource"},J={class:"tableList__cell resourcePreview__metaname"},Q=["href"],X={class:"tableList__cell resourcePreview__meta"},Y=["href"],Z={class:"tableList__cell resourcePreview__meta"},$=["href"],ee={class:"tableList__cell resourcePreview__meta"},se=["href"],te={key:0,class:"tableList__cell resourcePreview__tags"};function re(f,o,i,e,a,u){return s(),t("li",U,[r("div",W,[e.resource.meta.platform==="k8s"?(s(),t("span",q,[p(e.KubernetesLogo)])):e.resource.meta.platform==="aws"?(s(),t("span",G,[p(e.AwsLogo)])):n("",!0)]),r("div",J,[e.resource.id?(s(),t("a",{key:0,href:`/resources/view/?id=${e.resource.id}`},g(e.resource.meta.display),9,Q)):n("",!0)]),r("div",X,[e.resource.id?(s(),t("a",{key:0,href:`/resources/view/?id=${e.resource.id}`},g(e.resource.meta.kind),9,Y)):n("",!0)]),r("div",Z,[e.resource.id?(s(),t("a",{key:0,href:`/resources/view/?id=${e.resource.id}`},g(e.resource.meta.category),9,$)):n("",!0)]),r("div",ee,[e.resource.id?(s(),t("a",{key:0,href:`/resources/view/?id=${e.resource.id}`},g(e.resource.links.length),9,se)):n("",!0)]),e.tags.length?(s(),t("div",te,[p(e.TagList,{tags:e.tags},null,8,["tags"])])):n("",!0)])}const ae=P(O,[["render",re],["__scopeId","data-v-c52622af"]]),oe=k({__name:"SnapshotsList",setup(f,{expose:o}){o();const i=m(!0),e=m(void 0),a=m(""),u=m({currentPage:1,lastPage:1,urlBase:""}),l=I(B),c=m([{label:"Refresh",action:"refresh",icon:"refresh"},{label:"Configure",action:"setup",icon:"edit"}]);async function S(_){_=="setup"?window.location.assign("/resources/configure"):_=="refresh"&&await N()}const h=()=>{let _=window.location,d=new URLSearchParams(_.search);d.has("page")?e.value=parseInt(d.get("page")):e.value=1,d.has("search")?a.value=d.get("search"):a.value=""},L=()=>{let _="/resources/?page=";a.value!==""&&(_=`/resources/?search=${a.value}&page=`);let d={currentPage:e.value,lastPage:Math.ceil(l.value.total/10),urlBase:_};u.value=d};async function b(){i.value=!0,h(),await R(e.value,a.value),L(),i.value=!1}V(async()=>{await b()});const w={isLoading:i,page:e,searchTerm:a,pagerData:u,res:l,manageActions:c,handleMultiButtonAction:S,getParams:h,getPagerData:L,refreshList:b,MultiButton:A,EntityFilter:M,LoadingPlaceholder:x,ResourcePreview:ae,Pager:C,NoData:H};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),ie={class:"pageHeader"},le={class:"pageHeader__actions"},ce={key:2,class:"snapshotsList tableList"};function ne(f,o,i,e,a,u){return s(),t(y,null,[r("header",ie,[o[0]||(o[0]=r("div",null,[r("h1",{class:"pageHeader__title"},[r("span",null," Resources ")]),r("p",null," Known resources from your system. ")],-1)),r("div",le,[p(e.MultiButton,{title:"Manage",options:e.manageActions,onEmitAction:e.handleMultiButtonAction},null,8,["options"])])]),p(e.EntityFilter,{onSearch:e.refreshList}),e.isLoading?(s(),v(e.LoadingPlaceholder,{key:0,size:"large"})):n("",!0),e.res.total===0?(s(),v(e.NoData,{key:1,message:"No resources found"})):(s(),t("ul",ce,[o[1]||(o[1]=z('<li class="tableList__row tableList__row--header"><div class="tableList__cell tableList__cell--center tableList__cell--status"></div><div class="tableList__cell">Name</div><div class="tableList__cell">Type</div><div class="tableList__cell">Usage</div><div class="tableList__cell"># Relations</div><div class="tableList__cell">Tags</div><div class="tableList__cell"><span class="screen-reader-text">Actions</span></div></li>',1)),(s(!0),t(y,null,F(e.res.resources,l=>(s(),v(e.ResourcePreview,{resource:l,page:e.page,key:l.id,class:"tableList__row"},null,8,["resource","page"]))),128))])),e.res.total>10?(s(),v(e.Pager,{key:3,page:e.pagerData},null,8,["page"])):n("",!0)],64)}const Ue=P(oe,[["render",ne]]);export{Ue as default};
