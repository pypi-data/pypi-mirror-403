import{u as g}from"./notifications.NSMm1_5U.js";import{d as w}from"./dayjs.min.xlbmdZiw.js";import{h as l}from"./user.BEEfOshe.js";import{o as S}from"./user.Bg1Nd46A.js";import{i as y,d as f}from"./loader.BQDlK3Tc.js";import{u as $}from"./index.CwJxcYEt.js";import{a as m}from"./index.BSdFiPHn.js";const E={ASSETS_PREFIX:void 0,BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,PUBLIC_API_URL:"/api",SITE:void 0,SSR:!1},i=E===void 0?"https://62ff903e9350a1e548e1952e.mockapi.io/api":"/api",_=i==="https://62ff903e9350a1e548e1952e.mockapi.io/api",u=_?"assistant_scenario":"assistant/scenario",o=$(S),p=m(null);async function c(e){return p.set(e),p.get()}const z=async e=>{const n=`${i}/organization/${o.value}/${u}`;try{const s=await fetch(n,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify(e)});if(s.status===403)l(o.value);else if(s.ok){const t=await s.json();c(t)}else throw new Error(s.statusText)}catch(s){h({title:"Something went wrong when creating your experiment",message:s.message})}},L=async(e,n)=>{const s=`${i}/organization/${o.value}/${u}/${e}`;try{const t=await fetch(s);if(t.status===403)l(o.value);else if(t.ok){const a=await t.json();c(a)}else throw new Error(t.statusText)}catch(t){h({title:"Something went wrong when retrieving a scenario",message:t.message})}finally{f()}},R=async(e,n,s)=>{y();const t=`${i}/organization/${o.value}/${u}/by/experiment/${e}`;try{const a=await fetch(t);if(a.status===403)l(o.value);else if(a.ok){const d=await a.json();c(d)}else throw new Error(a.statusText)}catch{}finally{f()}},U=async(e,n)=>{const s=`${i}/organization/${o.value}/${u}/${e}/experiment/${n}`;try{const t=await fetch(s,{method:"PUT"});if(t.status===403)l(o.value);else if(t.ok){const a=await t.json();c(a)}else throw new Error(t.statusText)}catch{}},b=()=>{c(null)},r=m([]);async function h(e){const n={title:e.title,message:e.message,created_at:w().format(),id:g.v4()};return r.set([...r.get(),n]),r.get()}function C(){let e=r.get();if(e.length>1)return e.splice(0,1),r.set([...e]),r.get()}export{C as a,L as b,z as c,U as d,r as e,R as f,h as p,b as r,p as s};
