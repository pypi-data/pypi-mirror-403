import{a as k,f as S}from"./experiments.E3MiUWYx.js";import{E as B}from"./EntityFilter.DE3cAZtq.js";import{N as C}from"./NoData.CWOJbPLy.js";import{w as N}from"./runtime-dom.esm-bundler.DChKj6X8.js";import{T}from"./TimeAgo.hHi23vP_.js";import{M as F}from"./ModalWindow.Go1bYN-e.js";import{E as M,C as V,a as A,b as j}from"./ExperimentTrend.DSrZa87Y.js";import{D as I}from"./DeleteButton.Ch6PF2gM.js";/* empty css                       */import{_ as E}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as D,t as O,g as b,r as p,h as t,c as x,a,l as s,e as o,j as L,b as w,i as f,m as P,f as R,F as y,k as W,o as z}from"./runtime-core.esm-bundler.Y6RLDZTT.js";import{L as U}from"./LoadingPlaceholder.BoWrztnb.js";import{P as q}from"./Pager.Cmasf88E.js";import{u as G}from"./index.CwJxcYEt.js";import"./user.BEEfOshe.js";import"./user.Bg1Nd46A.js";import"./index.BSdFiPHn.js";import"./loader.BQDlK3Tc.js";import"./notifications.NSMm1_5U.js";import"./experiments.rwiqw3d6.js";import"./objects.CrQdKsRW.js";import"./strings.Fm4VVZpd.js";import"./dayjs.min.xlbmdZiw.js";import"./duration.BGVtNWJ9.js";/* empty css                       *//* empty css                        */import"./index.DUHDLdXK.js";import"./CloseIcon.DLOPA8gH.js";/* empty css                        *//* empty css                       */import"./TrashIcon.BzGEjUcP.js";/* empty css                       *//* empty css                       */const H=D({__name:"ExperimentPreview",props:{experiment:{},page:{}},setup(u,{expose:i}){i();const n=u,{experiment:e,page:r}=O(n),c=b(()=>e.value.last_statuses!==void 0&&e.value.last_statuses.length?e.value.last_statuses[0]:"unknown"),l=b(()=>e.value.last_execution?e.value.last_execution.toString():null),m=p(!1),d={props:n,experiment:e,page:r,lastStatus:c,lastExecution:l,isDeleteDisplayed:m,displayDelete:()=>{m.value=!0},closeDelete:()=>{m.value=!1},TimeAgo:T,ModalWindow:F,ExperimentScoreBox:M,ConfirmDeleteExperiment:V,ExperimentFreshness:A,ExperimentTrend:j,DeleteButton:I};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),J={class:"experimentPreview tableList__row"},K={class:"experimentPreview__score tableList__cell tableList__cell--center"},Q={class:"experimentPreview__meta tableList__cell"},X={class:"experimentPreview__name"},Y=["href"],Z={class:"experimentPreview__info"},$={key:0},ee={class:"experimentPreview__freshness tableList__cell"},te={class:"experimentPreview__trend tableList__cell"},re={class:"experimentPreview__last tableList__cell"},ie={class:"experimentPreview__actions tableList__cell tableList__cell--small"};function ae(u,i,n,e,r,c){return t(),x("li",J,[a("div",K,[e.experiment.score!==void 0?(t(),s(e.ExperimentScoreBox,{key:0,score:e.experiment.score,mini:!0},null,8,["score"])):o("",!0)]),a("div",Q,[a("div",X,[a("a",{href:`/experiments/view/?id=${e.experiment.id}`},L(e.experiment.title),9,Y)]),a("div",Z,[w(" #"+L(e.experiment.id)+" created ",1),f(e.TimeAgo,{timestamp:e.experiment.created_date},null,8,["timestamp"]),e.experiment.created_by?(t(),x("span",$,"by "+L(e.experiment.created_by),1)):o("",!0)])]),a("div",ee,[e.experiment.last_execution!==void 0?(t(),s(e.ExperimentFreshness,{key:0,last:e.experiment.last_execution,mini:!0},null,8,["last"])):o("",!0)]),a("div",te,[e.experiment.trend!==void 0&&e.experiment.trend!==null?(t(),s(e.ExperimentTrend,{key:0,trend:e.experiment.trend,exp:e.experiment.id,mini:!0},null,8,["trend","exp"])):o("",!0)]),a("div",re,[e.lastExecution?(t(),s(e.TimeAgo,{key:0,timestamp:e.lastExecution},null,8,["timestamp"])):o("",!0)]),a("div",ie,[f(e.DeleteButton,{onClick:N(e.displayDelete,["prevent"])})]),e.isDeleteDisplayed?(t(),s(e.ModalWindow,{key:0,hasCloseButton:!0,hasPadding:!0,onClose:e.closeDelete},{title:P(()=>i[0]||(i[0]=[w("Delete Experiment")])),content:P(()=>[f(e.ConfirmDeleteExperiment,{id:e.experiment.id,"in-place":!0,page:e.page,onClose:e.closeDelete},null,8,["id","page"])]),_:1})):o("",!0)])}const se=E(H,[["render",ae],["__scopeId","data-v-e1132dd3"]]),ne=D({__name:"ExperimentsList",setup(u,{expose:i}){i();const n=p(!0),e=p(void 0),r=p(""),c=p({currentPage:1,lastPage:1,urlBase:""}),l=G(k),m=()=>{let v=window.location,_=new URLSearchParams(v.search);_.has("page")?e.value=parseInt(_.get("page")):e.value=1,_.has("search")?r.value=_.get("search"):r.value=""},g=()=>{let v="/experiments/?page=";r.value!==""&&(v=`/experiments/?search=${r.value}&page=`);let _={currentPage:e.value,lastPage:Math.ceil(l.value.total/10),urlBase:v};c.value=_};async function h(){n.value=!0,m(),await S(e.value,r.value),g(),n.value=!1}z(async()=>{await h()});const d={isLoading:n,page:e,searchTerm:r,pagerData:c,exps:l,getParams:m,getPagerData:g,refreshList:h,EntityFilter:B,NoData:C,ExperimentPreview:se,LoadingPlaceholder:U,Pager:q};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),le={key:2,class:"experimentsList tableList"};function oe(u,i,n,e,r,c){return t(),x(y,null,[f(e.EntityFilter,{onSearch:e.refreshList}),e.isLoading?(t(),s(e.LoadingPlaceholder,{key:0,size:"large"})):e.exps.total===0?(t(),s(e.NoData,{key:1,message:"No experiments found"})):(t(),x("ul",le,[i[0]||(i[0]=R('<li class="tableList__row tableList__row--header"><div class="tableList__cell"></div><div class="tableList__cell">Name</div><div class="tableList__cell">Freshness</div><div class="tableList__cell">Trend</div><div class="tableList__cell">Last Execution</div><div class="tableList__cell"><span class="screen-reader-text">Actions</span></div></li>',1)),(t(!0),x(y,null,W(e.exps.experiments,l=>(t(),s(e.ExperimentPreview,{experiment:l,page:e.page,key:l.id,class:"tableList__row"},null,8,["experiment","page"]))),128))])),e.exps.total>10?(t(),s(e.Pager,{key:3,page:e.pagerData},null,8,["page"])):o("",!0)],64)}const ze=E(ne,[["render",oe]]);export{ze as default};
