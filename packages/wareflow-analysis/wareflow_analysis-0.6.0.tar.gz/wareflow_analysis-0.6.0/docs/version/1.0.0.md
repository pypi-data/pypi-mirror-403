# Wareflow Analysis v1.0.0 - Architecture & Design Document

**Version:** 1.0.0
**Status:** Design Specification
**Last Updated:** 2025-01-23

---

## Table of Contents

1. [Executive Summary](#executive-summary)
2. [System Architecture](#system-architecture)
3. [CLI vs GUI Responsibilities](#cli-vs-gui-responsibilities)
4. [Analysis System Design](#analysis-system-design)
5. [Plugin Architecture](#plugin-architecture)
6. [Project Structure](#project-structure)
7. [Implementation Roadmap](#implementation-roadmap)
8. [Technical Decisions](#technical-decisions)

---

## Executive Summary

Wareflow Analysis v1.0.0 is a warehouse analytics tool with dual interfaces:

1. **CLI Interface** - Technical tool for developers
2. **GUI Application (Tkinter)** - User-friendly interface for non-technical users

The core value proposition is providing warehouse-specific business insights through SQL-based analyses, with extensibility for custom analyses without requiring recompilation.

**Key Design Principle:** The executable (`.exe`) contains official "core" analyses, while the project directory allows custom analyses to be added without code changes to the executable.

---

## System Architecture

### High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Wareflow Analysis                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   CLI Interface  â”‚        â”‚   GUI Interface      â”‚  â”‚
â”‚  â”‚   (wareflow)     â”‚        â”‚   (wareflow-ui.exe)  â”‚  â”‚
â”‚  â”‚                  â”‚        â”‚                      â”‚  â”‚
â”‚  â”‚  For Developers  â”‚        â”‚  For End Users       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                             â”‚              â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                      â–¼                                 â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚           â”‚  Analysis Engine     â”‚                     â”‚
â”‚           â”‚  - Core Analyses     â”‚                     â”‚
â”‚           â”‚  - Custom Analyses   â”‚                     â”‚
â”‚           â”‚  - SQL Execution     â”‚                     â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                      â”‚                                 â”‚
â”‚                      â–¼                                 â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚           â”‚   SQLite Database    â”‚                     â”‚
â”‚           â”‚   (warehouse.db)     â”‚                     â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dual Interface Strategy

| Aspect | CLI | GUI (Tkinter) |
|--------|-----|---------------|
| **Target Users** | Developers (internal) | End users (business) |
| **Primary Use** | Development, debugging, automation | Daily operations, reports |
| **Extensibility** | Python-based plugins | YAML-based analyses |
| **Complexity** | Full Python power | Simplified UI forms |
| **Distribution** | pip install or standalone exe | Compiled exe |
| **Update Mechanism** | pip/replace exe | Replace exe |

---

## CLI vs GUI Responsibilities

### CLI Responsibilities (Developer Tool)

The CLI (`wareflow`) is designed for technical users and development:

```bash
# CLI Usage Examples
wareflow init my-warehouse           # Create new project
wareflow import                      # Import Excel data
wareflow analyze --abc               # Run specific analysis
wareflow analyze --list              # List available analyses
wareflow export                      # Generate reports
wareflow run                         # Full pipeline
```

**Key Features:**
- Command-line arguments for automation
- JSON output for integration
- Verbose/debug modes
- Access to all core and custom analyses
- Python plugin system for extensibility

### GUI Responsibilities (End-User Application)

The GUI (`wareflow-ui.exe`) is designed for non-technical business users:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Wareflow Analysis UI                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Import Data] [Analyze] [Export] [Reports] â”‚
â”‚                                             â”‚
â”‚ Available Analyses:                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Core Analyses:                          â”‚ â”‚
â”‚ â”‚   [ABC Classification]                   â”‚ â”‚
â”‚ â”‚   [Product KPIs]                        â”‚ â”‚
â”‚ â”‚   [Movement Analytics]                  â”‚ â”‚
â”‚ â”‚   [Order Analytics]                     â”‚ â”‚
â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚ Custom Analyses:                        â”‚ â”‚
â”‚ â”‚   [My Inventory Check]                  â”‚ â”‚
â”‚ â”‚   [Slow Moving Report]                  â”‚ â”‚
â”‚ â”‚                                         â”‚ â”‚
â”‚ â”‚ [+ Create New Analysis]                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Features:**
- Click-to-run interface for analyses
- Form-based data import
- Visual report generation
- Custom analysis creation via UI forms
- Export to Excel with one click
- No code/terminal required

---

## Analysis System Design

### Core Analyses (Built-in)

These analyses are compiled into the executable and represent official, validated analytics:

1. **ABC Classification** - Pareto analysis (20% products = 80% movements)
2. **Product Performance KPIs** - Movement velocity, activity status, trends
3. **Movement Analytics** - Type distribution, temporal patterns, peak times
4. **Order Analytics** - Status distribution, fulfillment rates, lead times
5. **Picking Efficiency** - Operator performance, pick rates, zone analysis
6. **Slow-Moving Inventory** - Stale/dead stock identification

**Characteristics:**
- Written in Python with full programming capabilities
- Can include complex business logic
- Version-controlled with the application
- Updated via application updates

### Custom Analyses (User-Defined)

Users can create their own analyses through the GUI using YAML configuration:

```yaml
# analyses/custom/inventory_check.yaml

name: inventory_check
display_name: "Daily Inventory Check"
description: "Identify products needing attention"
category: "Inventory"

sql_queries:
  - name: low_stock_products
    query: |
      SELECT
        p.no_produit,
        p.nom_produit,
        COUNT(m.oid) as movements
      FROM produits p
      LEFT JOIN mouvements m ON p.no_produit = m.no_produit
      WHERE m.date_heure >= date('now', '-7 days')
      GROUP BY p.no_produit
      HAVING movements < 5

output:
  type: table
  columns:
    - field: no_produit
      label: "SKU"
      format: number
    - field: nom_produit
      label: "Product Name"
    - field: movements
      label: "Movements (7d)"
      format: number

  export_to_excel: true
  filename: "low_stock_{timestamp}.xlsx"

chart:
  type: bar
  x: nom_produit
  y: movements
  title: "Low Stock Products (Last 7 Days)"
```

**Characteristics:**
- SQL-based (no programming required)
- Created and edited via GUI forms
- Stored in project directory (`analyses/custom/`)
- No recompilation needed
- Shareable via version control

---

## Plugin Architecture

### Analysis Discovery System

The system uses a hybrid discovery mechanism:

1. **Core Analyses:** Loaded from the compiled executable
2. **Custom Analyses:** Discovered by scanning the `analyses/` directory

```python
# Pseudo-code for analysis loading

class AnalysisLoader:
    def load_all_analyses(self, project_path):
        all_analyses = {}

        # 1. Load core analyses (from executable)
        all_analyses.update(self.get_core_analyses())

        # 2. Scan and load custom analyses
        custom_dir = project_path / "analyses" / "custom"
        if custom_dir.exists():
            for yaml_file in custom_dir.glob("*.yaml"):
                analysis = self.load_yaml_analysis(yaml_file)
                all_analyses[analysis["name"]] = analysis

        return all_analyses
```

### CLI Plugin System (Python-Based)

For developers using the CLI, analyses can be created as Python functions:

```python
# analyses/custom/advanced_metrics.py

from wareflow_analysis import register_analysis

@register_analysis(
    name="advanced_metrics",
    description="Advanced warehouse metrics",
    requires=["produits", "mouvements", "commandes"],
    tags=["advanced", "metrics"]
)
def advanced_metrics(conn: sqlite3.Connection, config: dict) -> dict:
    """
    Calculate advanced warehouse metrics with complex business logic.
    """
    lookback_days = config.get("lookback_days", 30)

    # Complex SQL with CTEs, window functions, etc.
    query = f"""
    WITH product_movement AS (
        SELECT
            no_produit,
            COUNT(*) as movements,
            SUM(CASE WHEN type = 'SORTIE' THEN quantite ELSE 0 END) as picked
        FROM mouvements
        WHERE date_heure >= date('now', '-{lookback_days} days')
        GROUP BY no_produit
    ),
    with_percentiles AS (
        SELECT *,
            NTILE(100) OVER (ORDER BY picked DESC) as percentile
        FROM product_movement
    )
    SELECT
        no_produit,
        movements,
        picked,
        CASE
            WHEN percentile <= 20 THEN 'A'
            WHEN percentile <= 50 THEN 'B'
            ELSE 'C'
        END as abc_class
    FROM with_percentiles
    """

    df = pd.read_sql_query(query, conn)

    # Complex post-processing in Python
    result = {
        "classification": df.to_dict('records'),
        "summary": {
            "class_a_count": len(df[df['abc_class'] == 'A']),
            "class_b_count": len(df[df['abc_class'] == 'B']),
            "class_c_count": len(df[df['abc_class'] == 'C'])
        }
    }

    return result
```

**Benefits:**
- Full programming capabilities
- Complex business logic
- Conditional processing
- External library support
- Suitable for advanced analytics

### GUI Analysis System (YAML-Based)

For end users, the GUI provides a form-based interface:

```python
# GUI Analysis Editor

class AnalysisEditor:
    def create_analysis(self):
        """Display form to create new analysis"""
        return {
            "name": self.get_input("Analysis Name"),
            "display_name": self.get_input("Display Name"),
            "description": self.get_input("Description"),
            "category": self.get_dropdown("Category", ["Inventory", "Movements", "Orders"]),
            "sql_query": self.get_text_area("SQL Query"),
            "output_type": self.get_radio("Output", ["Table", "Chart", "Both"]),
            "export_to_excel": self.get_checkbox("Export to Excel")
        }

    def save_analysis(self, analysis_config):
        """Save analysis to YAML file"""
        project_path = self.get_current_project_path()
        custom_dir = project_path / "analyses" / "custom"
        custom_dir.mkdir(parents=True, exist_ok=True)

        yaml_file = custom_dir / f"{analysis_config['name']}.yaml"
        with open(yaml_file, 'w') as f:
            yaml.dump(analysis_config, f)

        # Reload analyses to show new one
        self.reload_analyses()
```

**Benefits:**
- No programming knowledge required
- Visual form-based creation
- Instant validation
- SQL-only (safer than arbitrary code)
- Suitable for business users

---

## Project Structure

### Structure Created by `wareflow init`

```
my-warehouse/
â”œâ”€â”€ warehouse.db              # SQLite database (created on import)
â”œâ”€â”€ config.yaml               # Configuration for excel-to-sql
â”œâ”€â”€ schema.sql                # Database schema
â”‚
â”œâ”€â”€ analyses/                 # Analysis definitions
â”‚   â”œâ”€â”€ core/                # Core analysis configs (read-only reference)
â”‚   â”‚   â”œâ”€â”€ abc.yaml
â”‚   â”‚   â”œâ”€â”€ kpis.yaml
â”‚   â”‚   â”œâ”€â”€ movements.yaml
â”‚   â”‚   â””â”€â”€ orders.yaml
â”‚   â”‚
â”‚   â””â”€â”€ custom/              # User-defined analyses (editable)
â”‚       â”œâ”€â”€ my_inventory_check.yaml
â”‚       â””â”€â”€ daily_report.yaml
â”‚
â”œâ”€â”€ scripts/                  # Custom Python scripts (for CLI users)
â”‚   â”œâ”€â”€ analyze.py           # Template analysis script
â”‚   â””â”€â”€ export.py            # Template export script
â”‚
â”œâ”€â”€ data/                     # Excel files to import
â”‚   â”œâ”€â”€ produits.xlsx
â”‚   â”œâ”€â”€ mouvements.xlsx
â”‚   â””â”€â”€ commandes.xlsx
â”‚
â””â”€â”€ output/                   # Generated reports
    â”œâ”€â”€ abc_analysis.xlsx
    â””â”€â”€ inventory_report.xlsx
```

### Application Directory Structure

```
wareflow-analysis/
â”œâ”€â”€ src/wareflow_analysis/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ cli.py               # CLI entry point
â”‚   â”œâ”€â”€ init.py              # Project initialization
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                # Core analyses (Python)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ abc.py
â”‚   â”‚   â”œâ”€â”€ kpis.py
â”‚   â”‚   â”œâ”€â”€ movements.py
â”‚   â”‚   â””â”€â”€ orders.py
â”‚   â”‚
â”‚   â”œâ”€â”€ analyze/             # Analysis engine
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ loader.py        # Analysis discovery
â”‚   â”‚   â”œâ”€â”€ executor.py      # SQL execution
â”‚   â”‚   â””â”€â”€ formatter.py     # Output formatting
â”‚   â”‚
â”‚   â”œâ”€â”€ gui/                 # Tkinter GUI
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py          # Main window
â”‚   â”‚   â”œâ”€â”€ analysis_editor.py
â”‚   â”‚   â”œâ”€â”€ report_viewer.py
â”‚   â”‚   â””â”€â”€ widgets/         # Custom widgets
â”‚   â”‚
â”‚   â””â”€â”€ data_import/         # Import functionality
â”‚
â”œâ”€â”€ tests/
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ version/
â”‚       â””â”€â”€ 1.0.0.md         # This document
â”‚
â””â”€â”€ setup.py                 # Build configuration
```

---

## Implementation Roadmap

### Phase 1: Core MVP (Current Status)

**Completed:**
- âœ… CLI infrastructure
- âœ… `init` command
- âœ… `import-data` command with excel-to-sql integration
- âœ… `status` command
- âœ… `validate` command with comprehensive validation

**In Progress:**
- ðŸ”„ `analyze` command (basic implementation)

### Phase 2: Analysis System (Next)

**CLI Analysis Implementation:**
1. Create `analyze/` module with loader and executor
2. Implement core analyses (ABC, KPIs, Movements, Orders)
3. Add Python plugin system with `@register_analysis` decorator
4. CLI integration with `--list`, `--name`, `--verbose` options

**GUI Foundation:**
1. Create `gui/` module structure
2. Build main Tkinter window
3. Implement analysis list view
4. Add analysis execution with progress indicators

### Phase 3: GUI Analysis Editor

**Features:**
1. YAML-based analysis creation form
2. SQL query editor with syntax highlighting
3. Output configuration (table/chart/both)
4. Analysis management (edit, delete, duplicate)
5. Custom analyses discovery and loading

### Phase 4: Enhanced Features

**Advanced Capabilities:**
1. Report scheduling
2. Export automation
3. Analysis templates
4. Dashboard views
5. Multi-warehouse support

---

## Technical Decisions

### Decision 1: Hybrid Analysis Approach

**Question:** Should analyses be code-based (Python) or configuration-based (YAML)?

**Decision:** Hybrid approach
- **Core analyses:** Python (full programming capabilities)
- **Custom analyses:** YAML (SQL-based, no programming)

**Rationale:**
- Core analyses require complex business logic (percentiles, CTEs, window functions)
- Custom analyses are typically simple SQL queries
- Non-technical users can create YAML analyses without programming
- Technical users (developers) can extend with Python when needed

### Decision 2: Analysis Discovery Mechanism

**Question:** How does the application discover and load analyses?

**Decision:** Two-tier discovery
1. Load core analyses from executable
2. Scan `analyses/custom/` directory for YAML files

**Rationale:**
- Separation of official vs. user-defined analyses
- No recompilation needed for custom analyses
- Clear ownership (core = app, custom = user)
- Easy to share custom analyses via version control

### Decision 3: Distribution Method

**Question:** How should the application be distributed?

**Decision:** Dual distribution
- **CLI:** pip package (for developers) + standalone exe (for convenience)
- **GUI:** Compiled exe with PyInstaller

**Rationale:**
- CLI users prefer pip (Python workflow)
- GUI users need simple exe (no Python installation)
- Standalone exe works for both use cases
- PyInstaller creates single-file distribution

### Decision 4: Extensibility Model

**Question:** How do users extend the application with new analyses?

**Decision:** Plugin-based with multiple entry points
- **For developers:** Python decorators in `analyses/` directory
- **For users:** YAML files created via GUI

**Rationale:**
- Developers need full power (Python)
- Users need simplicity (forms + YAML)
- Both approaches coexist without conflicts
- Easy to evolve from simple to complex

---

## Architecture Principles

### 1. Separation of Concerns

- **CLI:** Technical operations, automation, development
- **GUI:** User experience, business operations, reporting
- **Core:** Shared analysis engine
- **Plugins:** Extensibility layer

### 2. Progressive Enhancement

- Start with YAML-based analyses (simple)
- Evolve to Python-based when complexity requires it
- No need to redesign architecture when scaling

### 3. User Autonomy

- Users can create analyses without developer intervention
- No recompilation needed for custom analyses
- Analyses travel with the project (version control friendly)

### 4. Backward Compatibility

- New analyses don't break existing ones
- Core analyses can be updated independently
- YAML format is stable and extensible

---

## Future Considerations

### Scalability

**Potential Enhancements:**
- Analysis marketplace (share between organizations)
- Analysis versioning and dependency management
- Cloud-based analysis execution
- Real-time streaming analyses

### Security

**Considerations:**
- SQL injection prevention in YAML analyses
- Sandbox for Python-based analyses (if allowing arbitrary code)
- User permissions for analysis creation/editing
- Audit logging for analysis execution

### Performance

**Optimization Opportunities:**
- Query result caching
- Incremental analysis (only new data)
- Parallel analysis execution
- Materialized views for common queries

---

## Appendix

### Analysis Metadata Schema

```python
# Standard metadata for all analyses

ANALYSIS_SCHEMA = {
    "name": "string",           # Unique identifier
    "display_name": "string",   # Human-readable name
    "description": "string",    # What the analysis does
    "category": "string",       # Inventory, Movements, Orders, etc.
    "version": "string",        # Semantic version
    "author": "string",         # Analysis creator
    "created_at": "datetime",   # Creation timestamp
    "requires": [               # Required tables
        "string"
    ],
    "tags": [                   # For filtering/searching
        "string"
    ],
    "sql_queries": [            # SQL queries to execute
        {
            "name": "string",
            "query": "string"
        }
    ],
    "output": {                 # Output configuration
        "type": "table|chart|both",
        "columns": [...],
        "export_to_excel": "boolean",
        "filename": "string"
    }
}
```

### Example Workflows

#### Developer Workflow

```bash
# 1. Create new project
wareflow init my-warehouse

# 2. Add Excel files
cd my-warehouse
# ... copy Excel files to data/

# 3. Import data
wareflow import

# 4. Run core analyses
wareflow analyze --list
wareflow analyze --abc

# 5. Create custom analysis (Python)
# Create analyses/custom/my_analysis.py with @register_analysis

# 6. Test custom analysis
wareflow analyze --name my_analysis

# 7. Export results
wareflow export
```

#### End User Workflow

```
# 1. Open application
Double-click: wareflow-ui.exe

# 2. Open/create project
File â†’ Open Project â†’ Select my-warehouse folder

# 3. Import data
[Import Data] â†’ Select Excel files â†’ [Import]

# 4. Run analysis
[Analyses] â†’ [ABC Classification] â†’ [Run]

# 5. View results
Results displayed in table/chart

# 6. Export report
[Export to Excel] â†’ Report saved to output/

# 7. Create custom analysis
[Create New Analysis] â†’ Fill form â†’ [Save]
```

---

## Document Control

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0.0 | 2025-01-23 | System Architecture | Initial design document |

---

**This document is living and will be updated as the architecture evolves.**
