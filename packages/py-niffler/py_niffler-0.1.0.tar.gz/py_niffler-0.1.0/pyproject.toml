[project]
name = "py-niffler"
version = "0.1.0"
description = "Agent for Worldquant Brain platform."
readme = "README.md"
authors = [{ name = "ashswing", email = "ashswing@email.cn" }]
requires-python = ">=3.13"
dependencies = [
    "aerich[toml]>=0.9.2",
    "asyncpg>=0.31.0",
    "click>=8.3.1",
    "httpx[socks]>=0.28.1",
    # "kaitian>=0.7.0",
    "numpy>=2.3.5",
    "polars>=1.36.1",
    "pydantic>=2.12.5",
    "pydantic-extra-types>=2.10.6",
    "pydantic-settings>=2.12.0",
    "tortoise-orm>=0.25.1",
]

[build-system]
requires = ["uv_build>=0.9.13,<0.10.0"]
build-backend = "uv_build"

[tool.uv.build-backend]
module-name = "niffler"

[tool.pytest.ini_options]
python_files = "*.py"
testpaths = ["src", "test"]
addopts = "--doctest-modules"
doctest_optionflags = [
    "NORMALIZE_WHITESPACE",
    "IGNORE_EXCEPTION_DETAIL",
    "ELLIPSIS",
]

[tool.aerich]
tortoise_orm = "dev.aerich-config.ProductionDB"
location = "/Users/ashswing/Projects/Niffler/dev/migration/product.pg"
src_folder = "./."

[dependency-groups]
dev = ["ipykernel>=7.1.0", "pandas>=2.3.3", "pytest>=9.0.2"]
