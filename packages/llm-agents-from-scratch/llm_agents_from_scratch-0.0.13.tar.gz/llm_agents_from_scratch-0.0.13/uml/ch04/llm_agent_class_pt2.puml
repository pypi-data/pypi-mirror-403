@startuml llm_agent_uml_class_pt2
!include ../common/book-clean.puml

' External dependencies
package "external_dependencies" <<Folder>> {
    class "asyncio.Future" as Future
    class "pydantic.BaseModel" as BaseModel
}


package "llm_agents_from_scratch.data_structures.agent" <<Folder>> {
  class TaskStep {
    +id_: str
    +task_id: str
    +instruction: str
  }

  class TaskStepResult {
    +task_step_id: str
    +content: str
  }

  class NextStepDecision {
    +kind: "next_step" | "final_result"
    +content: str
  }

}

package "llm_agents_from_scratch.agent" <<Folder>> {
  class "LLMAgent.TaskHandler" as TaskHandler {
    +llm_agent: LLMAgent
    +task: Task
    +rollout: str
    +step_counter: int
    -_background_task: ~asyncio.Task
    --
    +<<constructor>> __init__(\n\tllm_agent: LLMAgent,\n\ttask: Task \n):
    +<<async>> get_next_step(\n\tprevious_step_result: TaskStepResult | None\n): TaskStep | TaskResult
    +<<async>> run_step(step: TaskStep): TaskStepResult
    -_rollout_contribution_from_single_run_step()
  }

}

BaseModel <|.. TaskStep : " inherits"
BaseModel <|.. TaskStepResult : " inherits"
BaseModel <|.. NextStepDecision : " inherits"
Future <|.. TaskHandler : " inherits"

@enduml
