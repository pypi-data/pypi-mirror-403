# =============================================================================
# OCR Vector DB Configuration
# =============================================================================
# Copy this file to .env and fill in your values

# -----------------------------------------------------------------------------
# Database Connection (Required)
# -----------------------------------------------------------------------------
PG_CONN=postgresql+psycopg://langchain:langchain@localhost:5432/vectordb
COLLECTION_NAME=my_documents

# -----------------------------------------------------------------------------
# Embedding Provider (Required - choose one)
# -----------------------------------------------------------------------------
EMBEDDING_PROVIDER=openai

# Option 1: Google Gemini  
# EMBEDDING_PROVIDER=gemini
GOOGLE_API_KEY=your-google-api-key-here # needs for RAG generation model
GEMINI_EMBED_MODEL=text-embedding-004

# Option 2: openAi (recommended)
OPENAI_API_KEY=your-openai-api-key-here
EMBEDDING_MODEL=text-embedding-3-large

# Embedding dimension
EMBEDDING_DIM=768

# -----------------------------------------------------------------------------
# Generation / RAG Settings (Optional)
# -----------------------------------------------------------------------------
GEMINI_LLM_MODEL=gemini-2.0-flash
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2048
ENABLE_QUERY_OPTIMIZATION=true
ENABLE_CONVERSATION=false

# -----------------------------------------------------------------------------
# PDF Parsing Settings (Optional)
# -----------------------------------------------------------------------------
PDF_PARSER=pymupdf
ENABLE_AUTO_OCR=false
FORCE_OCR=false
OCR_LANGS=kor+eng

# Gemini Vision OCR for image blocks in PDFs
ENABLE_IMAGE_OCR=true
GEMINI_OCR_MODEL=gemini-2.0-flash

# -----------------------------------------------------------------------------
# Segmentation Settings (Optional)
# -----------------------------------------------------------------------------
PARENT_MODE=unit
# Options: unit (semantic units), page, section, page_section

# Custom regex patterns (advanced)
# PAGE_REGEX=(?mi)^\s*(?:page|페이지)\s*([0-9]{1,5})\b
# SECTION_REGEX=(?m)^(?:#{1,3}\s+.+|Chapter\s+\d+\b|제\s*\d+\s*장\b|\d+\.\d+\s+.+)

# Parent context limit (max chars for parent document synthesis)
PARENT_CONTEXT_LIMIT=2000

# Text unit threshold (min chars for text-only semantic unit)
TEXT_UNIT_THRESHOLD=500

# -----------------------------------------------------------------------------
# Storage Settings (Optional)
# -----------------------------------------------------------------------------
CUSTOM_SCHEMA_WRITE=true

# Rate limiting (0 = disabled)
RATE_LIMIT_RPM=0
MAX_CHARS_PER_REQUEST=0
MAX_ITEMS_PER_REQUEST=0

# Limit documents to embed (0 = unlimited, useful for testing)
MAX_DOCS_TO_EMBED=0

# -----------------------------------------------------------------------------
# Database Pool Settings (Optional)
# -----------------------------------------------------------------------------
PG_POOL_MIN_SIZE=0
PG_POOL_MAX_SIZE=4

# -----------------------------------------------------------------------------
# Index Tuning (Optional)
# -----------------------------------------------------------------------------
# IVFFLAT_PROBES=10
# HNSW_EF_SEARCH=100
# HNSW_EF_CONSTRUCTION=128
