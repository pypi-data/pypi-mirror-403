<!-- Settings Overlay Modal -->
<!-- These are the settings triggered by the gear icon in the control panel -->

<div id="settingsOverlay" class="modal-overlay">
  <div class="modal-content settings-modal">
    <button id="closeSettingsBtn" class="modal-close" title="Close settings">
      ✖
    </button>

    <div class="settings-header">
      <span id="slideshowSettingsLabel">PhotoMapAI</span>
      <span
        id="settingsVersion"
        style="font-size: 0.9em; color: #888; margin-left: 8px"
      >
        v{{ version }}
      </span>
    </div>

    <div class="settings-main">
      <!-- Left column: Slower/Faster/Interval -->
      <div class="delay-controls">
        <div id="delayLabel">Image Change Interval</div>

        <div class="delay-control-buttons">
          <button id="fasterBtn" title="Faster">&#9664;</button>
          <span id="delayValue">10</span>
          <button id="slowerBtn" title="Slower">&#9654;</button>
        </div>
      </div>

      <!-- Right column: Mode controls -->
      <div id="modeControls">
        <div id="modeLabel">Image Slideshow Mode:</div>

        <div id="modeRadioGroup">
          <label
            ><input
              type="radio"
              id="modeChronological"
              name="mode"
              value="chronological"
              checked
            />
            Sequential</label
          >
          <label
            ><input type="radio" id="modeRandom" name="mode" value="random" />
            Shuffle</label
          >
        </div>
      </div>
    </div>

    <!-- Settings rows -->
    <div class="setting-row">
      <label for="gridThumbSizeFactor">Grid thumbnail size factor:</label>
      <div style="display:flex; align-items:center; gap:6px;">
        <input
          type="number"
          id="gridThumbSizeFactor"
          min="0.5"
          max="2.0"
          step="0.05"
          value="1.0"
          style="width: 70px"
        />
        <button
          id="gridThumbSizeFactorReset"
          class="reset-default-btn"
          title="Reset to default (1.0)"
          aria-label="Reset Grid thumbnail size factor to default"
          style="background:none;border:none;padding:0;cursor:pointer;line-height:1;"
        >
          <span style="color:#FFC107; font-size:16px;">↩</span>
        </button>
      </div>
    </div>

    <div class="setting-row">
      <label for="minSearchScore">Minimum search score:</label>
      <div style="display:flex; align-items:center; gap:6px;">
        <input
          type="number"
          id="minSearchScore"
          min="0.0"
          max="1.0"
          step="0.01"
          value="0.2"
          style="width: 70px"
        />
        <button
          id="minSearchScoreReset"
          class="reset-default-btn"
          title="Reset to default (0.20)"
          aria-label="Reset Minimum search score to default"
          style="background:none;border:none;padding:0;cursor:pointer;line-height:1;"
        >
          <span style="color:#FFC107; font-size:16px;">↩</span>
        </button>
      </div>
    </div>

    <!-- Maximum number of search results -->
    <div class="setting-row">
      <label for="maxSearchResults">Maximum # of search results:</label>
      <div style="display:flex; align-items:center; gap:6px;">
        <input
          type="number"
          id="maxSearchResults"
          min="50"
          max="500"
          step="10"
          value="100"
          style="width: 70px"
        />
        <button
          id="maxSearchResultsReset"
          class="reset-default-btn"
          title="Reset to default (100)"
          aria-label="Reset Maximum # of search results to default"
          style="background:none;border:none;padding:0;cursor:pointer;line-height:1;"
        >
          <span style="color:#FFC107; font-size:16px;">↩</span>
        </button>
      </div>
    </div>

    <!-- Row for control panel text visibility -->
    <div class="setting-row">
      <label for="showControlPanelTextCheckbox">Show Button Labels:</label>
      <input type="checkbox" id="showControlPanelTextCheckbox" />
    </div>

    {% if not album_locked %}
    <div class="setting-row">
      <label for="confirmDeleteCheckbox">Confirm before deleting images:</label>
      <input type="checkbox" id="confirmDeleteCheckbox" />
    </div>
    {% endif %}

    <!-- Input for the LocationIQ API Key -->
    {% if not album_locked %}
    <form>
      <div class="setting-row">
        <label for="locationiqApiKeyInput">LocationIQ Map API Key:</label>
        <input
          type="password"
          id="locationiqApiKeyInput"
          placeholder="Enter your LocationIQ API key (optional)"
          autocomplete="pk-xxxxxxxx"
        />
        <small
          style="
            color: #666;
            font-size: 0.85em;
            display: block;
            margin-top: 4px;
            grid-column: 2 / 3;
          "
        >
          Optional: Enables location names and maps in EXIF data.
          <a
            href="https://locationiq.com"
            target="_blank"
            style="color: #007bff"
            >Get a free key</a
          >
        </small>
      </div>
    </form>
    {% endif %}

    <!-- Album selection row -->
    {% if not album_locked or multiple_locked_albums %}
    <div class="setting-row">
      <label for="albumSelect">Album:</label>
      <div class="album-selector-group">
        <select id="albumSelect">
          <option value="">Loading albums...</option>
        </select>
        {% if not album_locked %}
        <button id="manageAlbumsBtn" class="btn-primary">Manage Albums</button>
        {% endif %}
      </div>
    </div>
    {% endif %}
  </div>
</div>
