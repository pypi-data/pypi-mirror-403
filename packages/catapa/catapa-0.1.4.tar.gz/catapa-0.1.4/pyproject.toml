[build-system]
requires = ["setuptools>=61.0", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "catapa"
version = "0.1.4"
description = "Python client library for Catapa API"
readme = "README.md"
requires-python = ">=3.11"
authors = [{ name = "Catapa Team", email = "dev@catapa.com" }]
keywords = ["catapa", "api", "client", "hr", "payroll"]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
]

dependencies = [
    "urllib3>=1.25.3",
    "python-dateutil",
    "pydantic>=2.0.0",
    "typing-extensions>=4.7.1",
    "requests>=2.32.0",
    "flake8<7.3.0",
]

[project.optional-dependencies]
dev = [
    "pytest>=7.0.0",
    "pytest-cov",
    "coverage>=7.0.0",
    "pre-commit>=4.2.0",
    "ruff>=0.14.0",
    "mypy>=1.0.0",
]

[project.urls]
Homepage = "https://github.com/GDP-ADMIN/CATAPA-API"
Documentation = "https://api-docs.catapa.com/"
Repository = "https://github.com/GDP-ADMIN/CATAPA-API"

[tool.setuptools]
# Define base package directory  
package-dir = {"" = "catapa_python", "openapi_client" = "catapa_python/generated/openapi_client"}

# Auto-discover catapa package and its subpackages
[tool.setuptools.packages.find]
where = ["catapa_python", "catapa_python/generated"]
include = ["catapa*", "openapi_client*"]

[tool.setuptools.package-data]
catapa = ["py.typed"]

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = "test_*.py"
python_classes = "Test*"
python_functions = "test_*"
norecursedirs = ["build", "dist", ".venv", ".pytest_cache", ".ruff_cache"]

[tool.coverage.run]
source = ["catapa_python"]
omit = ["*/tests/*", "*/test_*", "*/__pycache__/*", "**/__init__.py"]

[tool.coverage.report]
exclude_lines = [
    "pragma: no cover",
    "def __repr__",
    "raise AssertionError",
    "raise NotImplementedError",
    "if __name__ == .__main__.:",
    "if TYPE_CHECKING:",
    "@abstractmethod",
]

[tool.ruff]
line-length = 120

[tool.ruff.lint]
ignore = ["C901", "E266"]
select = ["B", "B9", "C", "D", "E", "F", "I", "PL", "W"]

[tool.ruff.lint.per-file-ignores]
"tests/*" = ["D", "PLR"]

[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.mypy]
python_version = "3.11"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = false
