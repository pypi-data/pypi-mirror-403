loaders:
  - type: python
    search_path:
      - .
    packages:
      - synapse_sdk

processors:
  - type: filter
    expression: not name.startswith('_') and default()
  - type: smart
  - type: crossref

renderer:
  type: docusaurus
  docs_base_path: docs/docs
  relative_output_path: api/reference
  sidebar_top_level_module_label: API Reference

hooks:
  pre-render:
    - rm -rf docs/docs/api/reference/synapse_sdk
    - mkdir -p docs/docs/api/reference
  post-render:
    - find docs/docs/api/reference -name '__init__.md' -exec sh -c 'mv "$1" "$(dirname "$1")/index.md"' _ {} \;
    - sed -i '' 's/__init__/index/g' docs/docs/api/reference/sidebar.json
    - python scripts/fix_mdx.py docs/docs/api/reference
