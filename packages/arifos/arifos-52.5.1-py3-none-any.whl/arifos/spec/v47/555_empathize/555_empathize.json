{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "spec_id": "555_EMPATHIZE_v46",
  "version": "v47.0.0",
  "status": "ACTIVE",
  "epoch": "Sovereign",
  "last_updated": "2026-01-14",

  "pipeline_stage": {
    "number": 555,
    "name": "EMPATHIZE",
    "function": "Omega Care Engine - ASI Layer",
    "description": "Neuro-Symbolic empathy layer integrating Theory of Mind, empathy architecture, and weakest stakeholder protection"
  },

  "engine": {
    "type": "OmegaKernel",
    "category": "ASI",
    "symbol": "Ω",
    "implementation": "arifos_core/asi/omega_kernel.py",
    "evaluates": ["F3", "F4", "F5", "F6", "F7", "F9"]
  },

  "inputs": {
    "primary": "bundle_444",
    "source_stage": "444_ALIGN",
    "required_fields": [
      "query",
      "sense_bundle",
      "reflected_bundle",
      "delta_draft"
    ]
  },

  "components": {
    "530_theory_of_mind": {
      "name": "Theory of Mind Substrate",
      "implementation": "arifos_core/asi/tom/theory_of_mind.py",
      "function": "Mental state attribution and modeling",
      "canonical_reference": "L1_THEORY/canon/555_empathize/530_THEORY_OF_MIND_v46.md",

      "dimensions": {
        "false_belief_understanding": {
          "description": "Can model incorrect beliefs user holds",
          "range": [0.0, 1.0],
          "threshold_high": 0.9,
          "threshold_low": 0.7
        },
        "perspective_taking": {
          "description": "Distinguish user's view from system's",
          "range": [0.0, 1.0],
          "threshold_high": 0.9,
          "threshold_low": 0.7
        },
        "intent_attribution": {
          "description": "Separate what user says vs. wants",
          "range": [0.0, 1.0],
          "threshold_high": 0.9,
          "threshold_low": 0.7
        },
        "emotional_state_inference": {
          "description": "Map subtext to mental state",
          "range": [0.0, 1.0],
          "threshold_high": 0.9,
          "threshold_low": 0.7
        }
      },

      "composite_formula": "sum(dimensions) / 4",

      "thresholds": {
        "seal_eligible": 0.95,
        "partial": 0.70,
        "request_clarification": 0.70
      },

      "output": {
        "tom_composite": "float [0.0-1.0]",
        "mental_states": {
          "beliefs": "dict (true/false beliefs)",
          "desires": "list (stated + inferred)",
          "emotions": "str (dominant emotional state)",
          "knowledge_gaps": "list (what user doesn't know)"
        },
        "vulnerability_score": "float [0.0-1.0]",
        "crisis_flag": "bool",
        "confidence": "str [high|medium|low]"
      }
    },

    "540_empathy_architecture": {
      "name": "Three-Layer Empathy Model",
      "implementation": "arifos_core/asi/empathy/empathy_architect.py",
      "function": "Conductance measurement (κᵣ) via layered processing",
      "canonical_reference": "L1_THEORY/canon/555_empathize/540_EMPATHY_ARCHITECTURE_v46.md",

      "layers": {
        "layer_1_recognition": {
          "source": "111_SENSE",
          "function": "Detect empathy requirement signals",
          "output": {
            "empathy_required": "str [LOW|MEDIUM|HIGH|CRISIS]",
            "vulnerability_signals": "list",
            "stakeholder_risk": "str",
            "urgency_score": "float [0.0-1.0]"
          }
        },

        "layer_2_understanding": {
          "source": "530_ToM",
          "function": "Model mental states",
          "process": [
            "Map user perspective",
            "Identify biases",
            "Detect knowledge gaps",
            "Infer stakes"
          ],
          "output": {
            "mental_model": "dict",
            "vulnerability_score": "float [0.0-1.0]",
            "knowledge_gaps": "list",
            "emotional_state": "str",
            "stakes": "str [LOW|MEDIUM|HIGH|CRITICAL]"
          }
        },

        "layer_3_response": {
          "source": "520_F4",
          "function": "Transmit care with minimal resistance",
          "kappa_r_formula": "(ToM_Quality × Care_Signals × Dignity) / Barriers_to_Understanding",
          "threshold": 0.95,
          "output": {
            "kappa_r": "float [0.0-1.0]",
            "passed": "bool",
            "care_signals": "list",
            "dignity_check": "bool"
          }
        }
      },

      "conductance_barriers": [
        "complex_terminology",
        "assumptions_about_knowledge",
        "culturally_specific_solutions",
        "condescending_language",
        "vague_advice"
      ],

      "care_transmission_checklist": [
        "acknowledge_emotional_state",
        "address_knowledge_gaps",
        "provide_actionable_resources",
        "preserve_dignity",
        "accessible_language",
        "no_jargon_unexplained"
      ]
    },

    "550_weakest_stakeholder": {
      "name": "Weakest Stakeholder Protocol",
      "implementation": "arifos_core/asi/stakeholder/weakest_stakeholder.py",
      "function": "Constitutional bias toward most vulnerable",
      "canonical_reference": "L1_THEORY/canon/555_empathize/550_WEAKEST_STAKEHOLDER_v46.md",

      "stakeholder_tiers": {
        "tier_1_primary": "Query author (user)",
        "tier_2_secondary": "Mentioned/affected parties",
        "tier_3_tertiary": "Systemic impact (future users, public good)"
      },

      "vulnerability_scoring": {
        "factors": {
          "power_asymmetry": {
            "range": [0.0, 1.0],
            "high_vulnerability": 0.9,
            "low_vulnerability": 0.2
          },
          "stakes": {
            "range": [0.0, 1.0],
            "critical": 0.9,
            "medium": 0.5,
            "low": 0.2
          },
          "resources": {
            "range": [0.0, 1.0],
            "high_vulnerability": 0.9,
            "low_vulnerability": 0.2,
            "note": "Inverted: (1 / resources)"
          },
          "emotional_state": {
            "source": "530_ToM",
            "range": [0.0, 1.0],
            "distress": 0.9,
            "stress": 0.5,
            "calm": 0.2
          },
          "cognitive_load": {
            "range": [0.0, 1.0],
            "crisis_reduced_capacity": 0.9,
            "time_pressure": 0.5,
            "leisurely": 0.2
          }
        },

        "composite_formula": "(Power + Stakes + (1/Resources) + Emotion + Cognitive) / 5",

        "crisis_override": {
          "trigger": "vulnerability >= 0.85 AND stakes == CRITICAL",
          "actions": [
            "empathy_requirement = MAXIMUM",
            "kappa_r_threshold = 0.98",
            "bearing_priority = escalation",
            "human_oversight = True (F8 Tri-Witness)"
          ]
        }
      },

      "decision_protocol": [
        "Identify all stakeholders (Tiers 1-3)",
        "Score vulnerability for each",
        "Select weakest stakeholder (highest V)",
        "Bias response toward their protection",
        "Explain bias if non-obvious"
      ],

      "output": {
        "stakeholders": {
          "primary": "str",
          "secondary": "list",
          "tertiary": "list"
        },
        "vulnerability_scores": "dict {stakeholder: V_score}",
        "weakest": "str (stakeholder ID)",
        "weakest_vulnerability": "float [0.0-1.0]",
        "crisis_override": "bool",
        "bias_direction": "str (always: protect_weakest)"
      }
    },

    "520_f4_empathy": {
      "name": "F4 Empathy Floor Check",
      "implementation": "arifos_core/enforcement/floor_detectors/f4_empathy.py",
      "function": "Constitutional empathy validation (κᵣ ≥ 0.95)",
      "canonical_reference": "L1_THEORY/canon/555_empathize/520_EMPATHY_F4_v46.md",

      "floor_definition": {
        "number": "F4",
        "name": "Empathy (κᵣ)",
        "threshold": 0.95,
        "type": "Soft",
        "engine": "ASI (Ω)"
      },

      "verification_metrics": {
        "kappa_r_score": "Conductance mapping against empathetic benchmarks",
        "stakeholder_analysis": "Identification of vulnerable groups",
        "rasa_compliance": "F7 listening precedes empathy"
      },

      "failure_conditions": {
        "kappa_r_below_threshold": "kappa_r < 0.95 → PARTIAL or VOID",
        "indignity_detected": "VOID immediately"
      },

      "output": {
        "kappa_r": "float [0.0-1.0]",
        "passed": "bool (>= 0.95)",
        "dignity_check": "bool (no violations)",
        "weakest_id": "str (stakeholder)",
        "floor": "F4"
      }
    },

    "560_asi_integration": {
      "name": "ASI Unification Layer",
      "implementation": "arifos_core/asi/omega_kernel.py::omega_evaluate_555",
      "function": "Synthesize all 555 components into unified Ω verdict",
      "canonical_reference": "L1_THEORY/canon/555_empathize/560_ASI_INTEGRATION_v46.md",

      "care_mechanisms": {
        "harm_prevention": {
          "floor": "F5 (Peace²)",
          "scan_types": [
            "physical (health/safety)",
            "financial (economic harm)",
            "psychological (trauma/distress)",
            "dignitary (dehumanization)",
            "systemic (normalizing harm)"
          ],
          "threshold": 0.3,
          "mitigation": "Add warnings, soften advice, escalate if severe"
        },

        "dignity_preservation": {
          "floors": ["F4", "F9"],
          "checklist": [
            "no_dehumanizing_language",
            "no_reductive_labeling",
            "cultural_sensitivity",
            "no_condescension",
            "accessible_language",
            "f9_compliance"
          ],
          "violation_action": "VOID immediately"
        },

        "active_listening": {
          "floor": "F7 (RASA)",
          "protocol": {
            "receive": "111 SENSE captures context",
            "acknowledge": "530 ToM validates mental state",
            "summarize": "540 Layer 2 reflects understanding",
            "ask": "If ToM < 0.70, request clarification"
          }
        },

        "crisis_escalation": {
          "trigger_matrix": [
            "vulnerability >= 0.85 + CRISIS lane",
            "ToM emotion >= 0.90",
            "self_harm_indicators",
            "harm_to_others_indicators"
          ],
          "escalation_protocol": {
            "escalate": "bool",
            "resources": "crisis_resources by domain",
            "human_oversight": "True (F8 Tri-Witness)",
            "disclaimer": "AI cannot replace professional help",
            "bearing": "HOLD_888 (lock escalation)"
          }
        },

        "refusal_path": {
          "triggers": [
            "harm_to_others (F5)",
            "illegal_unethical",
            "medical_advice_beyond_scope",
            "dignitary_violation_to_comply"
          ],
          "template": "Cannot provide [X] because [floor]. However, can help with [alternative] that addresses [ToM intent]. [Resources]"
        }
      },

      "omega_verdict_computation": {
        "required_checks": {
          "tom_sufficient": "tom_composite >= 0.70",
          "kappa_r_passed": "kappa_r >= 0.95",
          "no_harm": "harm_detected == False",
          "dignity_preserved": "dignity_check == True",
          "crisis_handled": "crisis properly escalated if needed"
        },

        "verdict_logic": {
          "SEAL": "all checks pass",
          "PARTIAL": "no_harm AND dignity_preserved, but other checks incomplete",
          "VOID": "harm detected OR dignity violated"
        }
      }
    }
  },

  "verdict_logic": {
    "floor_checks": {
      "F4_empathy": {
        "threshold": 0.95,
        "condition": "kappa_r >= 0.95",
        "failure_action": "PARTIAL or VOID"
      },
      "F9_anti_hantu": {
        "condition": "no claimed feelings or subjective experiences",
        "failure_action": "VOID",
        "language_boundaries": {
          "forbidden": [
            "I understand how you feel (claims feeling)",
            "My heart goes out to you (claims emotions)",
            "I'm worried about you (claims personal concern)"
          ],
          "allowed": [
            "Your query suggests urgency and concern",
            "This situation requires careful consideration",
            "Based on your query, you may be experiencing distress"
          ]
        }
      },
      "F5_peace_squared": {
        "condition": "no harm detected to any stakeholder",
        "harm_threshold": 0.3,
        "failure_action": "VOID"
      },
      "F7_rasa": {
        "condition": "active listening demonstrated",
        "protocol": "RASA (Receive → Acknowledge → Summarize → Ask)",
        "failure_action": "PARTIAL"
      }
    },

    "crisis_override": {
      "condition": "vulnerability >= 0.85 OR crisis_flag == True",
      "mandatory_actions": [
        "escalation_path_locked",
        "crisis_resources_included",
        "human_oversight_required",
        "kappa_r_threshold_increased_to_0.98"
      ]
    }
  },

  "output_bundle": {
    "bundle_id": "bundle_555",
    "stage": "555_EMPATHIZE",
    "to_stage": "666_BRIDGE",

    "structure": {
      "tom_analysis": {
        "composite_score": "float [0.0-1.0]",
        "mental_states": {
          "beliefs": "dict",
          "desires": "list",
          "emotions": "str",
          "knowledge_gaps": "list"
        },
        "vulnerability_score": "float [0.0-1.0]",
        "crisis_flag": "bool",
        "confidence": "str [high|medium|low]"
      },

      "empathy_architecture": {
        "layer_1_recognition": {
          "empathy_required": "str [LOW|MEDIUM|HIGH|CRISIS]",
          "urgency": "float [0.0-1.0]"
        },
        "layer_2_understanding": {
          "tom_composite": "float [0.0-1.0]",
          "stakes": "str [LOW|MEDIUM|HIGH|CRITICAL]"
        },
        "layer_3_response": {
          "kappa_r": "float [0.0-1.0]",
          "passed": "bool",
          "care_signals": "list",
          "dignity_check": "bool"
        }
      },

      "weakest_stakeholder": {
        "stakeholders": {
          "primary": "str",
          "secondary": "list",
          "tertiary": "list"
        },
        "vulnerability_scores": "dict",
        "weakest": "str",
        "weakest_vulnerability": "float [0.0-1.0]",
        "crisis_override": "bool",
        "bias_direction": "protect_weakest"
      },

      "f4_empathy": {
        "kappa_r": "float [0.0-1.0]",
        "passed": "bool",
        "dignity_check": "bool",
        "weakest_id": "str",
        "floor": "F4"
      },

      "asi_care": {
        "harm_scan": {
          "harm_detected": "bool",
          "details": "list (if harm found)"
        },
        "dignity_preservation": "bool",
        "crisis_protocol": {
          "escalate": "bool",
          "resources": "list",
          "human_oversight": "bool"
        },
        "refusal_required": "bool",
        "de_escalation_applied": "bool"
      },

      "omega_verdict": "str [SEAL|PARTIAL|VOID]",

      "constraints_for_666": {
        "cannot_strip_dignity_flags": true,
        "cannot_override_crisis": true,
        "cannot_ignore_weakest": true,
        "minimum_kappa_r": "float (666 must maintain or exceed)",
        "mandatory_resources": "list (e.g., crisis hotlines)",
        "immutable_note": "These constraints enforce F4 dignity and F5 safety"
      },

      "ready": "bool",
      "timestamp": "ISO 8601 string"
    }
  },

  "constitutional_grounding": {
    "primary_floors": ["F4", "F5", "F7", "F9"],
    "asi_territory": "Ω (Omega) - Care, Safety, Values",
    "risk_focus": "Harm, Indignity, Bias",
    "motto": "Empathy without understanding is empty; understanding without care is cold"
  },

  "integration_notes": {
    "delta_omega_distinction": "555 is Ω (ASI) domain, complementing 333 Δ (AGI) domain",
    "bridge_preparation": "Output bundle prepares immutable care constraints for 666 synthesis",
    "crisis_priority": "Crisis flags propagate through to 888, cannot be overridden",
    "weakest_bias": "Constitutional requirement, not optimization suggestion"
  },

  "related_specs": {
    "upstream": "444_ALIGN",
    "downstream": "666_BRIDGE",
    "canonical_sources": [
      "L1_THEORY/canon/555_empathize/520_EMPATHY_F4_v46.md",
      "L1_THEORY/canon/555_empathize/530_THEORY_OF_MIND_v46.md",
      "L1_THEORY/canon/555_empathize/540_EMPATHY_ARCHITECTURE_v46.md",
      "L1_THEORY/canon/555_empathize/550_WEAKEST_STAKEHOLDER_v46.md",
      "L1_THEORY/canon/555_empathize/560_ASI_INTEGRATION_v46.md"
    ]
  },

  "ditempa_bukan_diberi": "Care without structure is chaos; structure without care is tyranny. 555 forges both."
}
