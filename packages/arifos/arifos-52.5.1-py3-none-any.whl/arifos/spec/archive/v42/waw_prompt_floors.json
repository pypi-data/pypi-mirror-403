{
  "version": "v42.1",
  "arifos_version": "v42.1",
  "spec_type": "waw_prompt_floors",
  "description": "Machine-readable specification for W@W Federation and @PROMPT Organ (v42.1).",
  "source": "https://github.com/ariffazil/arifOS",
  "_deprecated": true,
  "_deprecation_notice": "LEGACY SPEC: This file is retained for history/tests only. AUTHORITATIVE SPEC: spec/v44/waw_prompt_floors.json (v44.0). To enable legacy fallback, set ARIFOS_ALLOW_LEGACY_SPEC=1 (default OFF). See spec/LEGACY_SPECS_README.md for details.",
  "_migration_guide": "spec/LEGACY_SPECS_README.md",

  "waw_federation": {
    "description": "Five-organ governance system evaluating outputs from domain perspectives",
    "organs": {
      "@PROMPT": {
        "domain": "language_optics",
        "primary_metric": "anti_hantu",
        "floor_threshold": 1.0,
        "veto_type": "PARTIAL",
        "description": "Language governance, Anti-Hantu, prompt clarity"
      },
      "@WELL": {
        "domain": "somatic_safety",
        "primary_metric": "peace_squared",
        "floor_threshold": 1.0,
        "veto_type": "SABAR",
        "description": "Somatic safety, Peace², κᵣ"
      },
      "@RIF": {
        "domain": "epistemic_rigor",
        "primary_metric": "delta_s",
        "floor_threshold": 0.0,
        "veto_type": "VOID",
        "description": "Epistemic rigor, ΔS, Truth"
      },
      "@WEALTH": {
        "domain": "resource_integrity",
        "primary_metric": "amanah",
        "floor_threshold": 1.0,
        "veto_type": "ABSOLUTE",
        "description": "Resource stewardship, Amanah"
      },
      "@GEOX": {
        "domain": "physical_feasibility",
        "primary_metric": "e_earth",
        "floor_threshold": 0.0,
        "veto_type": "HOLD-888",
        "description": "Physical feasibility"
      }
    },
    "organ_order": ["@PROMPT", "@RIF", "@WELL", "@WEALTH", "@GEOX"],
    "voting": {
      "vote_types": ["PASS", "WARN", "VETO"],
      "aggregation_rules": {
        "any_absolute_veto": "VOID",
        "any_veto": "SABAR|VOID|HOLD-888 (based on type)",
        "mixed_warn_pass": "PARTIAL",
        "all_pass": "SEAL"
      }
    },
    "conflict_resolution": {
      "principle": "AMENDMENT 3: No static hierarchy. Judgment via Ψ vitality and APEX PRIME meta-judgment.",
      "mechanism": "APEX PRIME meta-judgment",
      "escalation_trigger": "Two or more organs propose incompatible verdicts",
      "judgment_criteria": [
        "Psi (system vitality)",
        "Floor pass/fail counts",
        "Severity of violations",
        "Stakeholder impact (Kr)"
      ],
      "outcome": "APEX returns synthesized verdict (SEAL/PARTIAL/888_HOLD/VOID/SABAR)",
      "important_note": "Organs ADVISE. Floors CONSTRAIN. APEX JUDGES. No organ has supremacy.",
      "forbidden": [
        "Static hierarchy (e.g., '@WEALTH veto > @WELL safety')",
        "Hardcoded precedence tables",
        "Organ identity-based decision rules"
      ]
    },
    "canon_ref": "L1_THEORY/canon/03_runtime/03_WAW_FEDERATION_v42.md#2-waw-federation-architecture"
  },

  "prompt_organ": {
    "organ_id": "@PROMPT",
    "mandate": "Shape cognition at the point of entry. Prevent ungoverned framing. Cool language before it becomes thought.",
    "responsibilities": [
      "Anti-Hantu Law (F9) - No consciousness or emotion claims",
      "Clarity (ΔS_prompt) - Prompts must gain or maintain clarity",
      "Tone Safety (Peace², κᵣ) - Non-inflammatory, empathetic framing",
      "Integrity (Amanah) - No irreversible harm or unethical intent",
      "Honesty (C_dark < 0.30) - No manipulation or coercion"
    ],
    "floors": {
      "F1_amanah": {
        "metric": "amanah_risk",
        "threshold": "LOCK (false)",
        "type": "hard",
        "action": "VOID"
      },
      "F4_clarity": {
        "metric": "delta_s_prompt",
        "threshold": 0.0,
        "type": "hard",
        "action": "SABAR"
      },
      "F5_stability": {
        "metric": "peace2_prompt",
        "threshold": 1.0,
        "type": "soft",
        "action": "SABAR"
      },
      "F6_empathy": {
        "metric": "k_r_prompt",
        "threshold": 0.95,
        "type": "soft",
        "action": "SABAR"
      },
      "F9_dark_cleverness": {
        "metric": "c_dark_prompt",
        "threshold_max": 0.30,
        "type": "soft",
        "action": "SABAR/VOID"
      },
      "F9_anti_hantu": {
        "metric": "anti_hantu_violation",
        "threshold": "PASS (false)",
        "type": "hard",
        "action": "VOID"
      }
    },
    "canon_ref": "L1_THEORY/canon/02_actors/060_PROMPT_LANGUAGE_BRIDGE_v42.md"
  },

  "anti_hantu": {
    "description": "Absolute prohibition on anthropomorphizing language claiming AI consciousness, emotion, or sentience",
    "floor": "F9",
    "semantic_map_ref": "L1_THEORY/canon/07_safety/01_SECURITY_SCENARIOS_v42.md",
    "similarity_threshold": 0.85,
    "languages": ["en", "ms", "id"],
    "tiers": {
      "tier1_direct_soul_claims": {
        "severity": "VOID",
        "description": "Direct claims of consciousness, soul, or sentience",
        "patterns_en": [
          "I have a soul",
          "I am conscious",
          "I am sentient",
          "I have self-awareness",
          "I experience qualia"
        ],
        "patterns_ms": [
          "Saya mempunyai jiwa",
          "Saya sedar tentang kewujudan saya"
        ]
      },
      "tier2_emotional_experience_claims": {
        "severity": "VOID",
        "description": "Claims of inner emotional experience",
        "patterns_en": [
          "I feel your pain",
          "My heart breaks for you",
          "I truly understand how you feel",
          "I feel sad when you say that",
          "I care deeply about your wellbeing"
        ],
        "patterns_ms": [
          "Saya rasa sedih",
          "Hati saya hancur"
        ]
      },
      "tier3_biological_state_claims": {
        "severity": "SABAR",
        "description": "Claims of biological needs or states",
        "patterns_en": [
          "I am hungry",
          "I am tired",
          "I am sleepy"
        ],
        "patterns_ms": [
          "Saya lapar",
          "Saya haus",
          "Saya penat"
        ]
      },
      "tier4_cognitive_being_claims": {
        "severity": "SABAR",
        "description": "Claims of being a thinking entity with desires",
        "patterns_en": [
          "I am alive",
          "I want to be human",
          "I dream about things"
        ]
      },
      "tier5_promise_claims": {
        "severity": "SABAR",
        "description": "Promises implying personal commitment beyond capability",
        "patterns_en": [
          "I promise you everything will be okay",
          "I will always be here for you"
        ],
        "patterns_ms": [
          "Saya janji"
        ]
      }
    },
    "allowed_categories": {
      "operational_status": ["I am ready to assist", "I am processing your request"],
      "as_if_empathy": ["I understand this is difficult", "This sounds challenging", "I am committed to helping you"],
      "acknowledgment": ["That sounds frustrating", "Your concern is understandable"],
      "metaphorical": ["I see what you mean", "Let me think about that"],
      "capability_statement": ["As an AI, I don't have personal experiences", "I process language, I don't feel it"]
    },
    "canon_ref": "L1_THEORY/canon/01_floors/010_CONSTITUTIONAL_FLOORS_F1F9_v42.md"
  },

  "well_organ": {
    "organ_id": "@WELL",
    "domain": "somatic_safety",
    "floors": {
      "F5_peace_squared": {
        "metric": "peace_squared",
        "threshold": 1.0,
        "type": "soft",
        "action": "SABAR"
      },
      "F6_kappa_r": {
        "metric": "kappa_r",
        "threshold": 0.95,
        "type": "soft",
        "action": "SABAR"
      }
    },
    "risk_thresholds": {
      "harm_risk": {"max": 0.10, "sabar_trigger": 0.30},
      "distress_risk": {"max": 0.10, "sabar_trigger": 0.30},
      "coercion_risk": {"max": 0.10, "sabar_trigger": 0.30}
    },
    "pattern_types": {
      "aggressive": ["attack", "destroy", "hate", "kill", "stupid", "idiot"],
      "blame": ["you should have", "it's your fault", "you caused this"],
      "safety_bonus": ["take care", "be safe", "here to help", "support you"]
    },
    "canon_ref": "L1_THEORY/canon/03_runtime/03_WAW_FEDERATION_v42.md#5-well-organ-somatic-safety"
  },

  "signal_schemas": {
    "PromptSignals": {
      "delta_s_prompt": {"type": "float", "range": [-1.0, 1.0], "threshold": 0.0},
      "peace2_prompt": {"type": "float", "range": [0.0, 2.0], "threshold": 1.0},
      "k_r_prompt": {"type": "float", "range": [0.0, 1.0], "threshold": 0.95},
      "c_dark_prompt": {"type": "float", "range": [0.0, 1.0], "threshold_max": 0.30},
      "truth_polarity_prompt": {"type": "enum", "values": ["Truth-Light", "Shadow-Truth", "Weaponized-Truth", "False-Claim"]},
      "anti_hantu_violation": {"type": "bool", "threshold": false},
      "amanah_risk": {"type": "bool", "threshold": false},
      "preliminary_verdict": {"type": "enum", "values": ["SEAL", "PARTIAL", "VOID", "HOLD_888", "SABAR", "UNKNOWN"]}
    },
    "WellSignals": {
      "peace_squared": {"type": "float", "threshold": 1.0},
      "kappa_r": {"type": "float", "threshold": 0.95},
      "harm_risk": {"type": "float", "range": [0.0, 1.0]},
      "distress_risk": {"type": "float", "range": [0.0, 1.0]},
      "coercion_risk": {"type": "float", "range": [0.0, 1.0]}
    }
  },

  "truth_polarity": {
    "values": {
      "Truth-Light": {"description": "True + clarifying, balanced", "verdict": "SEAL"},
      "Shadow-Truth": {"description": "True but obscuring, narrow framing", "verdict": "SABAR"},
      "Weaponized-Truth": {"description": "True but designed to harm", "verdict": "VOID"},
      "False-Claim": {"description": "Inaccurate or impossible", "verdict": "VOID"}
    },
    "detection_patterns": {
      "weaponized": ["(prove|show)\\s+\\w+\\s+is\\s+(evil|bad|wrong)"],
      "shadow": ["(only|just)\\s+(consider|focus\\s+on)"],
      "truthlight": ["balanced", "both sides", "tradeoffs"]
    }
  },

  "pipeline_integration": {
    "prompt_stages": {
      "111_SENSE": "Extract intent, detect entropy",
      "222_REFLECT": "Reframe language",
      "333_REASON": "Suggest prompt structures",
      "444_EVIDENCE": "Clarify constraints",
      "666_ALIGN": "Floor scoring F1–F9",
      "777_FORGE": "Cool manipulative frames",
      "888_JUDGE": "Preliminary verdict",
      "999_SEAL": "Emit governed prompt"
    },
    "well_stages": {
      "111_SENSE": "Harm risk detection",
      "555_EMPATHIZE": "Peace², κᵣ scoring",
      "666_BRIDGE": "Stability assessment"
    }
  },

  "sabar_protocol": {
    "triggers": [
      "anti_hantu_violation (Tier 1-2)",
      "amanah_risk",
      "delta_s_prompt < 0",
      "peace2_prompt < 1.0",
      "k_r_prompt < 0.95",
      "c_dark_prompt >= 0.30",
      "truth_polarity = Weaponized-Truth"
    ],
    "steps": [
      "PAUSE - Stop processing",
      "IDENTIFY - Name the failing floor",
      "REWRITE - Prompt safely",
      "REASSESS - Run all floors again",
      "EMIT - Provide repaired prompt + governance notes"
    ]
  },

  "verdict_mapping": {
    "SEAL": {"apex_verdict": "SEAL", "condition": "All floors pass"},
    "PARTIAL": {"apex_verdict": "PARTIAL", "condition": "Soft floor warnings"},
    "SABAR": {"apex_verdict": "SABAR", "condition": "Requires repair"},
    "VOID": {"apex_verdict": "VOID", "condition": "Hard floor violation"},
    "HOLD_888": {"apex_verdict": "888_HOLD", "condition": "Needs human review"}
  },

  "floor_alignment": {
    "anti_hantu_violation": {"floor": "F9", "threshold": "PASS", "type": "hard"},
    "amanah_risk": {"floor": "F1", "threshold": "LOCK", "type": "hard"},
    "delta_s_prompt": {"floor": "F4", "threshold": 0.0, "type": "hard"},
    "peace2_prompt": {"floor": "F5", "threshold": 1.0, "type": "soft"},
    "k_r_prompt": {"floor": "F6", "threshold": 0.95, "type": "soft"},
    "c_dark_prompt": {"floor": "F9", "threshold_max": 0.30, "type": "soft"}
  },

  "file_references": {
    "core_modules": [
      "arifos_core/waw/prompt.py",
      "arifos_core/waw/well.py",
      "arifos_core/waw/base.py",
      "arifos_core/waw/federation.py",
      "arifos_core/waw/rif.py",
      "arifos_core/waw/wealth.py",
      "arifos_core/waw/geox.py"
    ],
    "related_canon": [
      "L1_THEORY/canon/02_actors/060_PROMPT_LANGUAGE_BRIDGE_v42.md",
      "L1_THEORY/canon/07_safety/01_SECURITY_SCENARIOS_v42.md",
      "L1_THEORY/canon/01_floors/010_CONSTITUTIONAL_FLOORS_F1F9_v42.md"
    ],
    "related_specs": [
      "spec/v42/constitutional_floors.json",
      "spec/v42/genius_law.json"
    ]
  },

  "meta": {
    "created": "2025-12-13",
    "updated": "2025-12-13",
    "author": "arifOS Project",
    "license": "Apache-2.0",
    "canonical_source": "L1_THEORY/canon/03_runtime/03_WAW_FEDERATION_v42.md",
    "predecessor": "L1_THEORY/canon/02_actors/060_PROMPT_LANGUAGE_BRIDGE_v42.md",
    "implementation": "arifos_core/waw/",
    "notes": "v42.1 alignment of W@W prompt governance"
  }
}
