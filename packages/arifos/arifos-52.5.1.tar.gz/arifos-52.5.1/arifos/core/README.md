# arifOS Core â€” The Constitutional Kernel

**Authority:** Track B (Constitutional Law)
**Version:** v51 PRODUCTION
**Motto:** *DITEMPA BUKAN DIBERI* â€” Forged, Not Given

---

## ðŸ§¬ What is `arifos.core`?

The `arifos.core` package is the **Pure Logic Kernel** of arifOS.
It is the thermodynamic engine that converts raw LLM probability into **governed, auditable truth**.

It is **Headless** â€” it does not know about MCP, HTTP, or Discord.
It only speaks Python. The Application Layer (`AAA_MCP`) imports *us*.

---

## ðŸ›ï¸ The Trinity Architecture (Î”Î©Î¨)

The Core is organized around the **Constitutional Trinity** â€” three irreducible engines that must agree for a verdict to SEAL.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         arifOS Core                             â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚   Mind (Î”)  â”‚   â”‚  Heart (Î©)  â”‚   â”‚  Soul (Î¨)   â”‚          â”‚
â”‚   â”‚   AGI       â”‚   â”‚   ASI       â”‚   â”‚   APEX      â”‚          â”‚
â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚          â”‚
â”‚   â”‚ â€¢ Sense     â”‚   â”‚ â€¢ Empathize â”‚   â”‚ â€¢ Judge     â”‚          â”‚
â”‚   â”‚ â€¢ Reason    â”‚   â”‚ â€¢ Align     â”‚   â”‚ â€¢ Proof     â”‚          â”‚
â”‚   â”‚ â€¢ Contrast  â”‚   â”‚ â€¢ Witness   â”‚   â”‚ â€¢ Seal      â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚          â”‚                 â”‚                 â”‚                 â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                           â”‚                                    â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚ Metabolizer â”‚                             â”‚
â”‚                    â”‚ (000 â†’ 999) â”‚                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                           â”‚                                    â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚   Verdict   â”‚                             â”‚
â”‚                    â”‚ SEAL | VOID â”‚                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| Engine | Symbol | Role | Stages |
|--------|--------|------|--------|
| **AGI** | Î” (Delta) | The Mind â€” Cold Logic | 111 SENSE, 222 REFLECT, 333 REASON |
| **ASI** | Î© (Omega) | The Heart â€” Warm Empathy | 444 EVIDENCE, 555 EMPATHIZE, 666 ALIGN |
| **APEX** | Î¨ (Psi) | The Soul â€” Final Judgment | 777 FORGE, 888 JUDGE, 889 PROOF, 999 SEAL |

---

## ðŸ“‚ Folder Map

| Folder | Purpose | Key Files |
|--------|---------|-----------|
| `engines/` | The Trinity Engines | `agi_engine.py`, `asi_engine.py`, `apex_engine.py` |
| `metabolism/` | The Pipeline Stages (000-999) | `000_void/`, `111_sense/`, ... `889_proof/` |
| `system/` | Orchestration & Hypervisor | `apex_prime.py`, `system_coordinator.py`, `hypervisor.py` |
| `enforcement/` | Constitutional Law & Guards | `metrics.py`, `floor_validators.py`, `guards/` |
| `memory/` | State, Ledger, Vault | `ledger/`, `vault/`, `cooling_ledger.py` |
| `spec/` | Schema Validators | `manifest_verifier.py`, `schema_validator.py` |
| `utils/` | Utilities | `telemetry.py`, `entropy.py`, `eye_sentinel.py` |
| `integration/` | API & Server Wiring | `servers/`, `api/`, `waw/` |

---

## ðŸ”¥ The Metabolizer (Pipeline Flow)

The `Metabolizer` class (`metabolizer.py`) is the **State Machine** that drives execution.
It enforces **sequential progression** through 11 stages:

```
000 VOID â”€â”€â–¶ 111 SENSE â”€â”€â–¶ 222 REFLECT â”€â”€â–¶ 333 REASON
    â”‚                                          â”‚
    â”‚ (if high-stakes, Class B)                â–¼
    â”‚                                   444 EVIDENCE
    â”‚                                          â”‚
    â”‚                                          â–¼
    â”‚                                   555 EMPATHIZE
    â”‚                                          â”‚
    â”‚                                          â–¼
    â”‚                                   666 ALIGN
    â”‚                                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼
                                         777 FORGE
                                               â”‚
                                               â–¼
                                         888 JUDGE
                                               â”‚
                                               â–¼
                                         889 PROOF
                                               â”‚
                                               â–¼
                                         999 SEAL â”€â”€â–¶ (Ledger Commit)
```

### Stage Execution

Each stage folder (e.g., `metabolism/111_sense/`) contains a `stage.py` with an `execute_stage(context) -> context` function.
The Metabolizer dynamically imports and executes these:

```python
# metabolizer.py (simplified)
STAGE_MODULES = {
    0:   "arifos.core.metabolism.000_void.stage",
    111: "arifos.core.metabolism.111_sense.stage",
    # ...
    999: "arifos.core.metabolism.999_seal.stage",
}

def _execute_stage(self, stage: int):
    module = importlib.import_module(STAGE_MODULES[stage])
    self.context = module.execute_stage(self.context)
```

---

## âš–ï¸ Constitutional Floors (F1-F13)

Every output must pass **all floors** (AND logic). Failure on any floor -> VOID.

| Floor | Symbol | Threshold | Type |
|-------|--------|-----------|------|
| **F1** | Amanah | Boolean | Hard (Kill-Switch) |
| **F2** | Truth (Î”) | â‰¥ 0.99 | Hard |
| **F3** | Tri-Witness | â‰¥ 0.95 | Hard |
| **F4** | Clarity (Î”S) | â‰¥ 0 | Hard |
| **F5** | PeaceÂ² | â‰¥ 1.0 | Soft |
| **F6** | Empathy (Îºáµ£) | â‰¥ 0.95 | Soft |
| **F7** | Humility (Î©â‚€) | [0.03, 0.05] | Hard |
| **F8** | Genius (G) | â‰¥ 0.80 | Derived |
| **F9** | C_dark | < 0.30 | Derived |
| **F10** | Ontology | Boolean | Hard |
| **F11** | CommandAuth | Boolean | Hard |
| **F12** | InjectionDefense | â‰¥ 0.85 | Hard |
| **F13** | Curiosity | â‰¥ 0.85 | Soft |

### The Î¨ Formula (Life Force Index)

```
Î¨ = (Î”S Ã— PeaceÂ² Ã— Îºáµ£ Ã— RASA Ã— Amanah) / (Entropy + Shadow + Îµ)
```

- **Numerator**: Clarity, Peace, Empathy, Listening, Trust.
- **Denominator**: Confusion, Hidden Intent.
- **Threshold**: Î¨ â‰¥ 1.0 â†’ SEAL.

---

## ðŸ”Œ Usage (For App Developers)

**Rule:** `AAA_MCP` imports `core`. Core does NOT import `AAA_MCP`.

```python
from arifos.core.engines.agi_engine import AGIEngine
from arifos.core.metabolizer import Metabolizer
from arifos.core import apex_review, Metrics

# 1. Direct Engine Call (Low Level)
mind = AGIEngine()
result = mind.sense("What is 2+2?")

# 2. Metabolizer Pipeline (Full Flow)
m = Metabolizer()
m.initialize({"query": "Should I invest in Bitcoin?", "user_id": "u1"})
m.transition_to(111)  # SENSE
m.transition_to(222)  # REFLECT
# ... continue through 999

# 3. APEX Review (High Level)
verdict = apex_review(task="Hello world", context={})
print(verdict.verdict)  # SEAL, VOID, SABAR, PARTIAL
```

---

## ðŸ§ª Verification

```bash
# Smoke check imports
python -c "import arifos.core"
python -c "from arifos.core.metabolizer import Metabolizer"
python -c "from arifos.core.engines import AGIEngine, ASIEngine, APEXEngine"

# Run tests
pytest tests/core/ -v
```

---

## ðŸ“š References

| Document | Location |
|----------|----------|
| **Full Canon** | `000_THEORY/` |
| **Physics Codex** | `docs/PHYSICS_CODEX.md` |
| **Constitutional Floors** | `000_THEORY/canon/00_FLOORS.md` |
| **GENIUS LAW** | `000_THEORY/canon/08_genius/GENIUS_LAW.md` |
| **APEX PRIME** | `arifos/core/system/apex_prime.py` |

---

**DITEMPA BUKAN DIBERI.**
