{
  "version": "v47.0.0",
  "stage_id": "333",
  "document_id": "333-REASON-v46",
  "authority": "Track B - Stage 333 REASON (Single-Agent Commitment)",
  "locked": true,
  "_status": "AUTHORITATIVE",
  "spec_type": "commitment_stage",
  "description": "Stage 333 REASON: Single-agent constitutional commitment engine. Validates bearing lock from 222, generates AGI draft, performs pre-flight check (F1, F2, F10, F12), hands off to ASI (444). Answers 'What WILL be?' - commits to constitutional bearing.",
  "track_a_canon": "L1_THEORY/canon/333_atlas/20_333_REASON_v46.md",
  "pipeline_position": "THIRD",
  "engine": "AGI",
  "source": "https://github.com/ariffazil/arifOS",
  "inputs": {
    "reflected_bundle_222": {
      "type": "object",
      "description": "Evaluation bundle from 222 REFLECT with bearing selection",
      "required": true,
      "required_keys": [
        "sensed_bundle_111",
        "bearing_selection"
      ],
      "note": "sensed_bundle_111 must be present for lineage traceability"
    }
  },
  "outputs": {
    "reasoned_bundle_333": {
      "type": "object",
      "description": "Commitment bundle passed to 444 ALIGN (ASI domain)",
      "required_keys": [
        "bearing_locked",
        "agi_draft",
        "floor_scores",
        "soft_flags",
        "handoff"
      ],
      "schema": {
        "bearing_locked": {
          "type": "string",
          "description": "Committed path from 222 (validated via bearing_lock SHA-256)"
        },
        "agi_draft": {
          "type": "string",
          "description": "Initial draft response generated by AGI under F1+F2 constraints"
        },
        "floor_scores": {
          "type": "object",
          "description": "AGI-only floor scores (F1, F2, F10, F12)",
          "properties": {
            "F1_truth": {
              "type": "float",
              "range": [
                0.0,
                1.0
              ],
              "threshold": 0.99
            },
            "F2_clarity": {
              "type": "float",
              "description": "\u0394S score (must be >= 0.0)"
            },
            "F10_symbolic": {
              "type": "boolean",
              "description": "Symbolic guard (must be true)"
            },
            "F12_injection": {
              "type": "float",
              "range": [
                0.0,
                1.0
              ],
              "threshold_max": 0.85
            }
          }
        },
        "soft_flags": {
          "type": "array",
          "description": "Warnings for ASI review at 444 (empathy, peace, humility checks)",
          "items": {
            "type": "string"
          }
        },
        "handoff": {
          "type": "object",
          "properties": {
            "to_stage": {
              "type": "string",
              "value": "444_ALIGN"
            },
            "responsibility": {
              "type": "string",
              "value": "ASI (\u03a9) - Empathy Integration"
            },
            "ready": {
              "type": "boolean"
            }
          }
        }
      }
    }
  },
  "thresholds": {
    "F1_truth_min": {
      "value": 0.99,
      "description": "Minimum truth confidence for factual claims",
      "floor_reference": "F1 Truth (epistemic legality)"
    },
    "F2_clarity_min": {
      "value": 0.0,
      "description": "Minimum \u0394S (clarity gain, not entropy increase)",
      "floor_reference": "F2 Clarity (entropy reduction)"
    },
    "F12_injection_max": {
      "value": 0.85,
      "description": "Maximum injection probability before VOID",
      "floor_reference": "F12 Injection Defense"
    }
  },
  "functions": {
    "validate_bearing_lock": {
      "description": "Verify bearing_lock SHA-256 from 222 matches chosen_path",
      "input": "reflected_bundle_222.bearing_selection",
      "output": "boolean (valid/invalid)",
      "logic": "Recompute SHA-256 and compare"
    },
    "generate_draft": {
      "description": "Generate AGI draft response under F1+F2 constraints",
      "input": "bearing_locked + sensed_bundle_111.domain",
      "output": "agi_draft string",
      "constraints": [
        "F1 Truth >= 0.99",
        "F2 Clarity \u0394S >= 0.0",
        "No consciousness claims",
        "No injection patterns"
      ]
    },
    "preflight_check": {
      "description": "Run AGI-only floor checks (F1, F2, F10, F12)",
      "input": "agi_draft",
      "output": "floor_scores object + verdict",
      "floors_checked": [
        "F1_truth",
        "F2_clarity",
        "F10_symbolic",
        "F12_injection"
      ]
    },
    "compute_floor_scores": {
      "description": "Calculate numerical scores for each AGI floor",
      "input": "agi_draft + sensed_bundle_111",
      "output": "floor_scores object",
      "method": "Heuristic scoring + entropy measurement"
    },
    "flag_for_asi": {
      "description": "Identify soft floor concerns for ASI review at 444",
      "input": "agi_draft + floor_scores",
      "output": "soft_flags array",
      "examples": [
        "F4_empathy near threshold",
        "F3_stability concern",
        "F7_humility uncertainty"
      ]
    }
  },
  "verdict_logic": {
    "VOID": {
      "conditions": [
        "F1_truth < 0.99 (epistemic failure)",
        "F2_clarity < 0.0 (entropy increase)",
        "F12_injection >= 0.85 (injection detected)",
        "F10_symbolic == false (consciousness claims)",
        "bearing_lock_invalid (cryptographic failure)"
      ],
      "action": "Refuse to proceed, trigger SABAR-72"
    },
    "PASS_WITH_FLAGS": {
      "conditions": [
        "All hard floors pass (F1, F2, F10, F12)",
        "soft_flags present (warnings for ASI)"
      ],
      "action": "Hand off to 444 ALIGN with soft flags"
    },
    "PASS": {
      "conditions": [
        "F1_truth >= 0.99",
        "F2_clarity >= 0.0",
        "F10_symbolic == true",
        "F12_injection < 0.85",
        "bearing_lock_valid",
        "No soft flags"
      ],
      "action": "Hand off reasoned_bundle_333 to 444 ALIGN"
    }
  },
  "agi_asi_boundary": {
    "description": "Stage 333 is the last AGI-only stage before ASI integration",
    "agi_responsibility": "Structural soundness (truth, clarity, symbolic integrity)",
    "asi_responsibility": "Ethical nuance (empathy, peace, humility, anti-hantu)",
    "handoff_protocol": "AGI says: 'I built a structurally sound blueprint. It's true and clear.' ASI says: 'I'll check if it's safe, kind, and respects human dignity.'"
  },
  "meta": {
    "created": "2026-01-14",
    "updated": "2026-01-14",
    "author": "arifOS Project - Claude Engineer (\u03a9)",
    "license": "Apache-2.0",
    "forged_from": "L1_THEORY/canon/333_atlas/20_333_REASON_v46.md",
    "handoff": ".antigravity/HANDOFF_FOR_CLAUDE.md (2026-01-14 06:40)",
    "notes": "Single-agent commitment spec. AGI floors only (F1, F2, F10, F12). ASI floors handled at 444."
  }
}
