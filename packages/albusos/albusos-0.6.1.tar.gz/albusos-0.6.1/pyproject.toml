[project]
name = "albusos"
version = "0.6.1"
description = "Albus AgentOS - Event-driven AI agent runtime"
authors = [{ name = "Your Name", email = "your.email@example.com" }]
requires-python = ">=3.11,<4"
readme = "README.md"
license = "MIT"
classifiers = [
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
]
dependencies = [
    "pydantic>=2.0,<3",
    "aiohttp>=3.9,<4",
    "ddgs>=9.0,<10",
    "idna>=3.6,<4",
    "openai>=1.0,<2",
    "anthropic>=0.20,<0.21",
    "python-dotenv>=1.0,<2",
    "aiostream>=0.6.4,<0.7",
    "pyyaml>=6.0.3,<7",
    "mcp>=1.0,<2",
]

[project.optional-dependencies]
google = ["google-generativeai>=0.5,<0.6"]
all = ["google-generativeai>=0.5,<0.6"]

[project.scripts]
albus-server = "albus.transport.server:main"
albus = "albus.transport.cli:main"
pathway = "pathway_engine.transport.cli:main"
check-layering = "tools.check_layering:main"

[dependency-groups]
dev = [
    "commitizen>=4.12.1",
    "cz-conventional-gitmoji>=0.7.0",
    "pytest>=8.0,<9",
    "pytest-asyncio>=0.23,<0.24",
    "ruff>=0.14.14",
]
docs = [
    "mike>=2.1.3",
    "mkdocs>=1.6.1",
    "mkdocs-gen-files>=0.6.0",
    "mkdocs-literate-nav>=0.6.2",
    "mkdocs-material>=9.7.1",
    "mkdocs-mermaid2-plugin>=1.2.3",
    "mkdocs-section-index>=0.3.10",
    "mkdocstrings[python]>=1.0.2",
]

[build-system]
requires = ["uv_build>=0.9.26,<0.10.0"]
build-backend = "uv_build"

[tool.uv.build-backend]
module-name = [
    "albus",
    "stdlib",
    "pathway_engine",
    "persistence",
    "shared_types",
]
module-root = "src"

[tool.ruff]
fix = true
line-length = 100
src = ["src", "tests"]
target-version = "py312"

[tool.ruff.format]
docstring-code-format = true

[tool.ruff.lint]
select = [
  "A",
  "ASYNC",
  "B",
  "BLE",
  "C4",
  "C90",
  "D",
  "DTZ",
  "E",
  "EM",
  "ERA",
  "F",
  "FBT",
  "FLY",
  "FURB",
  "G",
  "I",
  "ICN",
  "INP",
  "INT",
  "ISC",
  "LOG",
  "N",
  "NPY",
  "PERF",
  "PGH",
  "PIE",
  "PL",
  "PT",
  "PTH",
  "PYI",
  "Q",
  "RET",
  "RSE",
  "RUF",
  "S",
  "SIM",
  "SLF",
  "SLOT",
  "T10",
  "T20",
  "TC",
  "TID",
  "TRY",
  "UP",
  "W",
  "YTT",
]
ignore = ["D203", "D213", "E501", "RET504", "S101", "S307"]
unfixable = ["ERA001", "F401", "F841", "T201", "T203"]

[tool.ruff.lint.flake8-tidy-imports]
ban-relative-imports = "all"

[tool.ruff.lint.pycodestyle]
max-doc-length = 80

[tool.ruff.lint.pydocstyle]
convention = "numpy"

[tool.pytest.ini_options]
asyncio_mode = "auto"


[tool.commitizen]
name = "cz_gitmoji"
version = "0.6.1"
tag_format = "v$version"
update_changelog_on_bump = true
annotated_tag = true
bump_message = "ğŸ”– bump(release): v$current_version â†’ v$new_version"
version_files = [
    "pyproject.toml:^version",
]
path = ".cz-config.js"

[tool.commitizen.customize]
example = "feat: this feature enables customizing through pyproject.toml file"
schema = """
<type>(<scope>): <subject> \n
<BLANK LINE> \n
<body> \n
<BLANK LINE> \n
(BREAKING CHANGE: )<breaking> \n
<BLANK LINE> \n
(ISSUES: )<footer>
"""
schema_pattern = "(?s)(âœ¨ feat|ğŸ› fix|ğŸš‘ hotfix|ğŸ”§ chore|â™»ï¸ refactor|ğŸš§ WIP|ğŸ“š docs|âš¡ï¸ perf|ğŸ’„ style|ğŸ—ï¸ build|ğŸ‘· ci|âœ… test|âª revert|â• add_dep|â– rem_dep|ğŸ’¥ boom)(\\(\\S+\\))?!?:( [^\\n\\r]+)((\\n\\n.*)|(\\s*))?$"
bump_pattern = "^(âœ¨ feat|ğŸ› fix|ğŸš‘ hotfix|âš¡ï¸ perf|â™»ï¸ refactor|âª revert|â• dep-add|â– dep-rm|ğŸ’¥ boom)"
bump_map = {"BREAKING CHANGE" = "MAJOR", "ğŸ’¥ boom" = "MAJOR", "âœ¨ feat" = "MINOR", "ğŸ› fix" = "PATCH", "ğŸš‘ hotfix" = "PATCH", "âš¡ï¸ perf" = "PATCH", "â™»ï¸ refactor" = "PATCH", "â• dep-add" = "PATCH", "â– dep-rm" = "PATCH"}
change_type_order = ["BREAKING CHANGE", "ğŸ’¥ boom", "âœ¨ feat", "ğŸ› fix", "ğŸš‘ hotfix", "â™»ï¸ refactor", "âš¡ï¸ perf", "ğŸ—ï¸ build", "ğŸ’„ style", "ğŸ“š docs", "â• dep-add", "â– dep-rm"]
info = """
I have added a custom commit type `chore`.
"""
commit_parser = "^(?P<change_type>âœ¨ feat|ğŸ› fix|ğŸš‘ hotfix|ğŸ”§ chore|â™»ï¸ refactor|ğŸš§ WIP|ğŸ“š docs|âš¡ï¸ perf|ğŸ’„ style|ğŸ—ï¸ build|ğŸ‘· ci|âœ… test|âª revert|â• add_dep|â– rem_dep|ğŸ’¥ boom):\\s(?P<message>.*)?"
changelog_pattern = "^(âœ¨ feat|ğŸ› fix|ğŸš‘ hotfix|ğŸ”§ chore|â™»ï¸ refactor|ğŸš§ WIP|ğŸ“š docs|âš¡ï¸ perf|ğŸ’„ style|ğŸ—ï¸ build|ğŸ‘· ci|âœ… test|âª revert|â• dep-add|â– dep-rm|ğŸ’¥ boom)?(!)?"
change_type_map = {"ğŸ’¥ boom" = "Breaking Changes", "ğŸ—ï¸ build" = "Build", "ğŸ‘· ci" = "CI", "ğŸ“š docs" = "Docs", "âœ¨ feat" = "Feat", "ğŸ› fix" = "Fix", "ğŸš‘ hotfix" = "Hotfix", "âš¡ï¸ perf" = "Perf", "â™»ï¸ refactor" = "Refactor", "ğŸ’„ style" = "Style", "âœ… test" = "Test", "ğŸ”§ chore" = "Chore", "âª revert" = "Revert", "â• dep-add" = "Added Dependency", "â– dep-rm" = "Removed Dependency"}

