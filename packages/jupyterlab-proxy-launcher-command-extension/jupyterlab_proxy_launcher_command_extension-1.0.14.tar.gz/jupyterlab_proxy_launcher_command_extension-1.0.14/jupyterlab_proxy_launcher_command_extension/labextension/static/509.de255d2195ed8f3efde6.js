"use strict";(self.webpackChunkjupyterlab_proxy_launcher_command_extension=self.webpackChunkjupyterlab_proxy_launcher_command_extension||[]).push([[509],{509(t,e,o){o.r(e),o.d(e,{default:()=>s});var n=o(285),r=o(526),a=o(247);const p="proxy-launcher:open";class i extends a.Widget{constructor(t,e,o){var n;super(),this.addClass("jp-ProxyLauncher-dialog");const r=document.createElement("div");r.style.padding="10px";const a=document.createElement("label");a.textContent="Port:",a.style.display="block",a.style.marginBottom="5px",a.style.fontWeight="bold",this._portInput=document.createElement("input"),this._portInput.type="number",this._portInput.min="1",this._portInput.max="65535",this._portInput.value=null!==(n=null==t?void 0:t.toString())&&void 0!==n?n:"",this._portInput.style.width="100%",this._portInput.style.padding="8px",this._portInput.style.marginBottom="4px",this._portInput.style.boxSizing="border-box",this._portInput.style.border="1px solid var(--jp-border-color1)",this._portInput.style.borderRadius="4px",this._portInput.style.backgroundColor="var(--jp-layout-color1)",this._portInput.style.color="var(--jp-ui-font-color1)";const p=document.createElement("div");p.textContent="e.g., 8501",p.style.fontSize="12px",p.style.color="var(--jp-ui-font-color2)",p.style.marginBottom="15px";const i=document.createElement("label");i.textContent="Path suffix (optional):",i.style.display="block",i.style.marginBottom="5px",i.style.fontWeight="bold",this._pathInput=document.createElement("input"),this._pathInput.type="text",this._pathInput.value=null!=e?e:"",this._pathInput.style.width="100%",this._pathInput.style.padding="8px",this._pathInput.style.marginBottom="4px",this._pathInput.style.boxSizing="border-box",this._pathInput.style.border="1px solid var(--jp-border-color1)",this._pathInput.style.borderRadius="4px",this._pathInput.style.backgroundColor="var(--jp-layout-color1)",this._pathInput.style.color="var(--jp-ui-font-color1)";const l=document.createElement("div");l.textContent="e.g., /api/docs",l.style.fontSize="12px",l.style.color="var(--jp-ui-font-color2)",l.style.marginBottom="15px";const s=document.createElement("div");s.style.display="flex",s.style.alignItems="center",s.style.gap="8px",this._newBrowserTabCheckbox=document.createElement("input"),this._newBrowserTabCheckbox.type="checkbox",this._newBrowserTabCheckbox.id="proxy-launcher-browser-checkbox",this._newBrowserTabCheckbox.checked=null!=o&&o;const d=document.createElement("label");d.htmlFor="proxy-launcher-browser-checkbox",d.textContent="Open in new browser tab",s.appendChild(this._newBrowserTabCheckbox),s.appendChild(d);const c=document.createElement("div");c.textContent="Connect to a service running on the specified port via jupyter-server-proxy.",c.style.fontSize="12px",c.style.color="var(--jp-ui-font-color2)",c.style.marginTop="15px",c.style.paddingTop="10px",c.style.borderTop="1px solid var(--jp-border-color2)",r.appendChild(a),r.appendChild(this._portInput),r.appendChild(p),r.appendChild(i),r.appendChild(this._pathInput),r.appendChild(l),r.appendChild(s),r.appendChild(c),this.node.appendChild(r)}getValue(){const t=parseInt(this._portInput.value,10);let e=this._pathInput.value.trim();return e&&!e.startsWith("/")&&(e="/"+e),{port:isNaN(t)?0:t,path:e,newBrowserTab:this._newBrowserTabCheckbox.checked}}isValid(){const t=parseInt(this._portInput.value,10);return!isNaN(t)&&t>=1&&t<=65535}onAfterAttach(){this._portInput.focus()}}class l extends a.Widget{constructor(t,e){super(),this.addClass("jp-ProxyLauncher-iframe"),this.id=`proxy-iframe-${Date.now()}`,this.title.label=e,this.title.closable=!0,this.title.caption=t;const o=document.createElement("iframe");o.src=t,o.style.width="100%",o.style.height="100%",o.style.border="none",this.node.appendChild(o)}}const s={id:"jupyterlab_proxy_launcher_command_extension:plugin",description:"JupyterLab commands to launch jupyter-server-proxy to a given port via modal window, opening in either a new JupyterLab tab or new browser tab",autoStart:!0,optional:[n.ICommandPalette],activate:(t,e)=>{console.log("JupyterLab extension jupyterlab_proxy_launcher_command_extension is activated!");const{commands:o,shell:a}=t;o.addCommand(p,{label:"Open Proxy Launcher",caption:"Open dialog to launch jupyter-server-proxy connection to a port",describedBy:()=>Promise.resolve({args:{type:"object",properties:{default_port:{type:"number",description:"Default port number to pre-fill in the dialog"},default_path:{type:"string",description:"Default path suffix to pre-fill in the dialog"},default_newBrowserTab:{type:"boolean",description:"Default state of the new browser tab checkbox"},title:{type:"string",description:"Custom title for the JupyterLab tab"}}}}),execute:async t=>{const e=new i(t.default_port,t.default_path,t.default_newBrowserTab);if(!(await(0,n.showDialog)({title:"Proxy Launcher",body:e,buttons:[n.Dialog.cancelButton(),n.Dialog.okButton({label:"Open"})]})).button.accept)return;const o=e.getValue();if(!o.port||o.port<1||o.port>65535)return void await(0,n.showDialog)({title:"Invalid Port",body:"Please enter a valid port number between 1 and 65535.",buttons:[n.Dialog.okButton()]});const p=`${r.PageConfig.getBaseUrl()}proxy/${o.port}/${o.path.replace(/^\//,"")}`;if(o.newBrowserTab)window.open(p,"_blank");else{const e=t.title||`Proxy :${o.port}${o.path||""}`,n=new l(p,e);a.add(n,"main"),a.activateById(n.id)}}}),e&&e.addItem({command:p,category:"Proxy"}),t.commands.addKeyBinding({command:p,keys:["Accel Shift P"],selector:"body"}),console.log(`Command ${p} registered`)}}}}]);