{
    "name": "Phonon Map",
    "subworkflows": [
        {
            "_id": "79f2cb6a-7994-5369-8c85-af07c55ad26f",
            "name": "Preliminary SCF Calculation",
            "application": {
                "name": "espresso",
                "shortName": "qe",
                "summary": "Quantum ESPRESSO",
                "build": "GNU",
                "hasAdvancedComputeOptions": true,
                "isDefault": true,
                "version": "6.3",
                "schemaVersion": "2022.8.16"
            },
            "properties": [
                "atomic_forces",
                "fermi_energy",
                "pressure",
                "stress_tensor",
                "total_energy",
                "total_energy_contributions",
                "total_force"
            ],
            "model": {
                "type": "dft",
                "subtype": "gga",
                "method": {
                    "type": "pseudopotential",
                    "subtype": "us",
                    "data": {}
                },
                "functional": {
                    "slug": "pbe"
                },
                "refiners": [],
                "modifiers": []
            },
            "units": [
                {
                    "type": "execution",
                    "name": "pw_scf",
                    "head": true,
                    "results": [
                        {
                            "name": "atomic_forces"
                        },
                        {
                            "name": "fermi_energy"
                        },
                        {
                            "name": "pressure"
                        },
                        {
                            "name": "stress_tensor"
                        },
                        {
                            "name": "total_energy"
                        },
                        {
                            "name": "total_energy_contributions"
                        },
                        {
                            "name": "total_force"
                        }
                    ],
                    "monitors": [
                        {
                            "name": "standard_output"
                        },
                        {
                            "name": "convergence_electronic"
                        }
                    ],
                    "flowchartId": "9fc7a088-5533-5f70-bb33-f676ec65f565",
                    "preProcessors": [],
                    "postProcessors": [],
                    "application": {
                        "name": "espresso",
                        "shortName": "qe",
                        "summary": "Quantum ESPRESSO",
                        "build": "GNU",
                        "hasAdvancedComputeOptions": true,
                        "isDefault": true,
                        "version": "6.3",
                        "schemaVersion": "2022.8.16"
                    },
                    "executable": {
                        "hasAdvancedComputeOptions": true,
                        "isDefault": true,
                        "monitors": [
                            "standard_output",
                            "convergence_ionic",
                            "convergence_electronic"
                        ],
                        "postProcessors": [
                            "remove_non_zero_weight_kpoints"
                        ],
                        "name": "pw.x",
                        "schemaVersion": "2022.8.16"
                    },
                    "flavor": {
                        "applicationName": "espresso",
                        "executableName": "pw.x",
                        "input": [
                            {
                                "name": "pw_scf.in"
                            }
                        ],
                        "isDefault": true,
                        "monitors": [
                            "standard_output",
                            "convergence_electronic"
                        ],
                        "results": [
                            "atomic_forces",
                            "fermi_energy",
                            "pressure",
                            "stress_tensor",
                            "total_energy",
                            "total_energy_contributions",
                            "total_force"
                        ],
                        "name": "pw_scf",
                        "schemaVersion": "2022.8.16"
                    },
                    "status": "idle",
                    "statusTrack": [],
                    "tags": [],
                    "input": [
                        {
                            "applicationName": "espresso",
                            "content": "{% if subworkflowContext.MATERIAL_INDEX %}\n{%- set input = input.perMaterial[subworkflowContext.MATERIAL_INDEX] -%}\n{% endif -%}\n&CONTROL\n    calculation = 'scf'\n    title = ''\n    verbosity = 'low'\n    restart_mode = '{{ input.RESTART_MODE }}'\n    wf_collect = .true.\n    tstress = .true.\n    tprnfor = .true.\n    outdir = {% raw %}'{{ JOB_WORK_DIR }}/outdir'{% endraw %}\n    wfcdir = {% raw %}'{{ JOB_WORK_DIR }}/outdir'{% endraw %}\n    prefix = '__prefix__'\n    pseudo_dir = {% raw %}'{{ JOB_WORK_DIR }}/pseudo'{% endraw %}\n/\n&SYSTEM\n    ibrav = {{ input.IBRAV }}\n    nat = {{ input.NAT }}\n    ntyp = {{ input.NTYP }}\n    ecutwfc = {{ cutoffs.wavefunction }}\n    ecutrho = {{ cutoffs.density }}\n    occupations = 'smearing'\n    degauss = 0.005\n/\n&ELECTRONS\n    diagonalization = 'david'\n    diago_david_ndim = 4\n    diago_full_acc = .true.\n    mixing_beta = 0.3\n    startingwfc = 'atomic+random'\n/\n&IONS\n/\n&CELL\n/\nATOMIC_SPECIES\n{{ input.ATOMIC_SPECIES }}\nATOMIC_POSITIONS crystal\n{{ input.ATOMIC_POSITIONS }}\nCELL_PARAMETERS angstrom\n{{ input.CELL_PARAMETERS }}\nK_POINTS automatic\n{% for d in kgrid.dimensions %}{{d}} {% endfor %}{% for s in kgrid.shifts %}{{s}} {% endfor %}\n",
                            "contextProviders": [
                                {
                                    "name": "KGridFormDataManager"
                                },
                                {
                                    "name": "QEPWXInputDataManager"
                                },
                                {
                                    "name": "PlanewaveCutoffDataManager"
                                }
                            ],
                            "executableName": "pw.x",
                            "name": "pw_scf.in",
                            "rendered": "&CONTROL\n    calculation = 'scf'\n    title = ''\n    verbosity = 'low'\n    restart_mode = 'from_scratch'\n    wf_collect = .true.\n    tstress = .true.\n    tprnfor = .true.\n    outdir = '{{ JOB_WORK_DIR }}/outdir'\n    wfcdir = '{{ JOB_WORK_DIR }}/outdir'\n    prefix = '__prefix__'\n    pseudo_dir = '{{ JOB_WORK_DIR }}/pseudo'\n/\n&SYSTEM\n    ibrav = 0\n    nat = 2\n    ntyp = 1\n    ecutwfc = 40\n    ecutrho = 200\n    occupations = 'smearing'\n    degauss = 0.005\n/\n&ELECTRONS\n    diagonalization = 'david'\n    diago_david_ndim = 4\n    diago_full_acc = .true.\n    mixing_beta = 0.3\n    startingwfc = 'atomic+random'\n/\n&IONS\n/\n&CELL\n/\nATOMIC_SPECIES\nSi 28.0855 \nATOMIC_POSITIONS crystal\nSi     0.000000000    0.000000000    0.000000000 \nSi     0.250000000    0.250000000    0.250000000 \nCELL_PARAMETERS angstrom\n3.348920236 0.000000000 1.933500000\n1.116306745 3.157392278 1.933500000\n0.000000000 0.000000000 3.867000000\nK_POINTS automatic\n2 2 2 0 0 0 \n",
                            "schemaVersion": "2022.8.16"
                        }
                    ]
                }
            ]
        },
        {
            "_id": "2f017bcb-f4ba-55b8-b939-1f780679a88e",
            "name": "ph-init-qpoints",
            "application": {
                "name": "espresso",
                "shortName": "qe",
                "summary": "Quantum ESPRESSO",
                "build": "GNU",
                "hasAdvancedComputeOptions": true,
                "isDefault": true,
                "version": "6.3",
                "schemaVersion": "2022.8.16"
            },
            "properties": [],
            "model": {
                "type": "dft",
                "subtype": "gga",
                "method": {
                    "type": "pseudopotential",
                    "subtype": "us",
                    "data": {}
                },
                "functional": {
                    "slug": "pbe"
                },
                "refiners": [],
                "modifiers": []
            },
            "units": [
                {
                    "type": "execution",
                    "name": "ph_init_qpoints",
                    "head": true,
                    "results": [],
                    "monitors": [
                        {
                            "name": "standard_output"
                        }
                    ],
                    "flowchartId": "b8ea6a33-38f3-5434-b17e-b5eae8fff9fc",
                    "preProcessors": [],
                    "postProcessors": [],
                    "application": {
                        "name": "espresso",
                        "shortName": "qe",
                        "summary": "Quantum ESPRESSO",
                        "build": "GNU",
                        "hasAdvancedComputeOptions": true,
                        "isDefault": true,
                        "version": "6.3",
                        "schemaVersion": "2022.8.16"
                    },
                    "executable": {
                        "monitors": [
                            "standard_output"
                        ],
                        "name": "ph.x",
                        "schemaVersion": "2022.8.16",
                        "isDefault": false
                    },
                    "flavor": {
                        "applicationName": "espresso",
                        "executableName": "ph.x",
                        "input": [
                            {
                                "name": "ph_init_qpoints.in"
                            }
                        ],
                        "monitors": [
                            "standard_output"
                        ],
                        "results": [],
                        "name": "ph_init_qpoints",
                        "schemaVersion": "2022.8.16",
                        "isDefault": false
                    },
                    "status": "idle",
                    "statusTrack": [],
                    "tags": [],
                    "input": [
                        {
                            "applicationName": "espresso",
                            "content": "&INPUTPH\n    tr2_ph = 1.0d-18,\n    recover = .false.\n    start_irr = 0\n    last_irr = 0\n    ldisp = .true.\n    fildyn = 'dyn0'\n    prefix = '__prefix__'\n    outdir = {% raw %}'{{ JOB_WORK_DIR }}/outdir'{% endraw %}\n    {% for d in qgrid.dimensions -%}\n    nq{{loop.index}} = {{d}}\n    {% endfor %}\n/\n",
                            "contextProviders": [
                                {
                                    "name": "QGridFormDataManager"
                                }
                            ],
                            "executableName": "ph.x",
                            "name": "ph_init_qpoints.in",
                            "rendered": "&INPUTPH\n    tr2_ph = 1.0d-18,\n    recover = .false.\n    start_irr = 0\n    last_irr = 0\n    ldisp = .true.\n    fildyn = 'dyn0'\n    prefix = '__prefix__'\n    outdir = '{{ JOB_WORK_DIR }}/outdir'\n    nq1 = 1\n    nq2 = 1\n    nq3 = 1\n    \n/\n",
                            "schemaVersion": "2022.8.16"
                        }
                    ]
                }
            ]
        },
        {
            "_id": "e4b6b2e7-7d8f-5ae1-b6bd-ee81ecbca11a",
            "name": "espresso-xml-get-qpt-irr",
            "application": {
                "name": "python",
                "shortName": "py",
                "summary": "Python Script",
                "build": "GNU",
                "isDefault": true,
                "version": "3.10.13",
                "schemaVersion": "2022.8.16"
            },
            "properties": [],
            "model": {
                "type": "unknown",
                "subtype": "unknown",
                "method": {
                    "type": "unknown",
                    "subtype": "unknown",
                    "data": {}
                }
            },
            "units": [
                {
                    "type": "execution",
                    "name": "python",
                    "head": true,
                    "results": [],
                    "monitors": [
                        {
                            "name": "standard_output"
                        }
                    ],
                    "flowchartId": "9b8a495e-1ac1-56a7-b2e0-af1b405a1219",
                    "preProcessors": [],
                    "postProcessors": [],
                    "application": {
                        "name": "python",
                        "shortName": "py",
                        "summary": "Python Script",
                        "build": "GNU",
                        "isDefault": true,
                        "version": "3.10.13",
                        "schemaVersion": "2022.8.16"
                    },
                    "executable": {
                        "isDefault": true,
                        "monitors": [
                            "standard_output"
                        ],
                        "name": "python",
                        "schemaVersion": "2022.8.16"
                    },
                    "flavor": {
                        "applicationName": "python",
                        "executableName": "python",
                        "input": [
                            {
                                "name": "espresso_xml_get_qpt_irr.py"
                            }
                        ],
                        "monitors": [
                            "standard_output"
                        ],
                        "name": "espresso_xml_get_qpt_irr",
                        "schemaVersion": "2022.8.16",
                        "isDefault": false
                    },
                    "next": "d0fd8654-2106-546b-8792-7bb46272befc",
                    "status": "idle",
                    "statusTrack": [],
                    "tags": [],
                    "input": [
                        {
                            "applicationName": "python",
                            "content": "# ---------------------------------------------------------- #\n#                                                            #\n#  This script extracts q-points and irreducible             #\n#  representations from Quantum ESPRESSO xml data.           #\n#                                                            #\n#  Expects control_ph.xml and patterns.?.xml files to exist  #\n#                                                            #\n# ---------------------------------------------------------- #\nfrom __future__ import print_function\n\nimport json\nfrom xml.dom import minidom\n\n{#    JOB_WORK_DIR will be initialized at runtime => avoid substituion below    #}\n{% raw %}\nCONTROL_PH_FILENAME = \"{{JOB_WORK_DIR}}/outdir/_ph0/__prefix__.phsave/control_ph.xml\"\nPATTERNS_FILENAME = \"{{JOB_WORK_DIR}}/outdir/_ph0/__prefix__.phsave/patterns.{}.xml\"\n{% endraw %}\n\n# get integer content of an xml tag in a document\ndef get_int_by_tag_name(doc, tag_name):\n    element = doc.getElementsByTagName(tag_name)\n    return int(element[0].firstChild.nodeValue)\n\nvalues = []\n\n# get number of q-points and cycle through them\nxmldoc = minidom.parse(CONTROL_PH_FILENAME)\nnumber_of_qpoints = get_int_by_tag_name(xmldoc, \"NUMBER_OF_Q_POINTS\")\n\nfor i in range(number_of_qpoints):\n    # get number of irreducible representations per qpoint\n    xmldoc = minidom.parse(PATTERNS_FILENAME.format(i+1))\n    number_of_irr_per_qpoint = get_int_by_tag_name(xmldoc, \"NUMBER_IRR_REP\")\n    # add each distinct combination of qpoint and irr as a separate entry\n    for j in range(number_of_irr_per_qpoint):\n      values.append({\n          \"qpoint\": i + 1,\n          \"irr\": j + 1\n      })\n\n# store final values in standard output (STDOUT)\nprint(json.dumps(values, indent=4))\n",
                            "contextProviders": [],
                            "executableName": "python",
                            "name": "espresso_xml_get_qpt_irr.py",
                            "rendered": "# ---------------------------------------------------------- #\n#                                                            #\n#  This script extracts q-points and irreducible             #\n#  representations from Quantum ESPRESSO xml data.           #\n#                                                            #\n#  Expects control_ph.xml and patterns.?.xml files to exist  #\n#                                                            #\n# ---------------------------------------------------------- #\nfrom __future__ import print_function\n\nimport json\nfrom xml.dom import minidom\n\n\n\nCONTROL_PH_FILENAME = \"{{JOB_WORK_DIR}}/outdir/_ph0/__prefix__.phsave/control_ph.xml\"\nPATTERNS_FILENAME = \"{{JOB_WORK_DIR}}/outdir/_ph0/__prefix__.phsave/patterns.{}.xml\"\n\n\n# get integer content of an xml tag in a document\ndef get_int_by_tag_name(doc, tag_name):\n    element = doc.getElementsByTagName(tag_name)\n    return int(element[0].firstChild.nodeValue)\n\nvalues = []\n\n# get number of q-points and cycle through them\nxmldoc = minidom.parse(CONTROL_PH_FILENAME)\nnumber_of_qpoints = get_int_by_tag_name(xmldoc, \"NUMBER_OF_Q_POINTS\")\n\nfor i in range(number_of_qpoints):\n    # get number of irreducible representations per qpoint\n    xmldoc = minidom.parse(PATTERNS_FILENAME.format(i+1))\n    number_of_irr_per_qpoint = get_int_by_tag_name(xmldoc, \"NUMBER_IRR_REP\")\n    # add each distinct combination of qpoint and irr as a separate entry\n    for j in range(number_of_irr_per_qpoint):\n      values.append({\n          \"qpoint\": i + 1,\n          \"irr\": j + 1\n      })\n\n# store final values in standard output (STDOUT)\nprint(json.dumps(values, indent=4))\n",
                            "schemaVersion": "2022.8.16"
                        }
                    ]
                },
                {
                    "name": "assignment",
                    "type": "assignment",
                    "operand": "Q_POINTS",
                    "value": "json.loads(STDOUT)",
                    "input": [
                        {
                            "scope": "9b8a495e-1ac1-56a7-b2e0-af1b405a1219",
                            "name": "STDOUT"
                        }
                    ],
                    "status": "idle",
                    "statusTrack": [],
                    "flowchartId": "d0fd8654-2106-546b-8792-7bb46272befc",
                    "tags": [],
                    "head": false,
                    "application": {
                        "name": "python",
                        "shortName": "py",
                        "summary": "Python Script",
                        "build": "GNU",
                        "isDefault": true,
                        "version": "3.10.13",
                        "schemaVersion": "2022.8.16"
                    }
                }
            ]
        },
        {
            "_id": "545a66e2-dfbe-513e-acaf-d79d0d139b9c",
            "name": "reduce",
            "application": {
                "name": "espresso",
                "shortName": "qe",
                "summary": "Quantum ESPRESSO",
                "build": "GNU",
                "hasAdvancedComputeOptions": true,
                "isDefault": true,
                "version": "6.3",
                "schemaVersion": "2022.8.16"
            },
            "properties": [
                "phonon_dos",
                "phonon_dispersions"
            ],
            "model": {
                "type": "dft",
                "subtype": "gga",
                "method": {
                    "type": "pseudopotential",
                    "subtype": "us",
                    "data": {}
                },
                "functional": {
                    "slug": "pbe"
                },
                "refiners": [],
                "modifiers": []
            },
            "units": [
                {
                    "type": "execution",
                    "name": "ph_grid_restart",
                    "head": true,
                    "results": [],
                    "monitors": [
                        {
                            "name": "standard_output"
                        }
                    ],
                    "flowchartId": "cb206177-a4af-599a-81ba-6c88d24253b6",
                    "preProcessors": [],
                    "postProcessors": [],
                    "application": {
                        "name": "espresso",
                        "shortName": "qe",
                        "summary": "Quantum ESPRESSO",
                        "build": "GNU",
                        "hasAdvancedComputeOptions": true,
                        "isDefault": true,
                        "version": "6.3",
                        "schemaVersion": "2022.8.16"
                    },
                    "executable": {
                        "monitors": [
                            "standard_output"
                        ],
                        "name": "ph.x",
                        "schemaVersion": "2022.8.16",
                        "isDefault": false
                    },
                    "flavor": {
                        "applicationName": "espresso",
                        "executableName": "ph.x",
                        "input": [
                            {
                                "name": "ph_grid_restart.in"
                            }
                        ],
                        "monitors": [
                            "standard_output"
                        ],
                        "results": [],
                        "name": "ph_grid_restart",
                        "schemaVersion": "2022.8.16",
                        "isDefault": false
                    },
                    "status": "idle",
                    "statusTrack": [],
                    "tags": [],
                    "input": [
                        {
                            "applicationName": "espresso",
                            "content": "&INPUTPH\n    tr2_ph = 1.0d-18,\n    recover = .true.\n    ldisp = .true.\n    prefix = '__prefix__'\n    outdir = {% raw %}'{{ JOB_WORK_DIR }}/outdir'{% endraw %}\n    fildyn = 'dyn'\n    {% for d in qgrid.dimensions -%}\n    nq{{loop.index}} = {{d}}\n    {% endfor %}\n/\n",
                            "contextProviders": [
                                {
                                    "name": "QGridFormDataManager"
                                }
                            ],
                            "executableName": "ph.x",
                            "name": "ph_grid_restart.in",
                            "rendered": "&INPUTPH\n    tr2_ph = 1.0d-18,\n    recover = .true.\n    ldisp = .true.\n    prefix = '__prefix__'\n    outdir = '{{ JOB_WORK_DIR }}/outdir'\n    fildyn = 'dyn'\n    nq1 = 1\n    nq2 = 1\n    nq3 = 1\n    \n/\n",
                            "schemaVersion": "2022.8.16"
                        }
                    ],
                    "next": "3b4507a7-9244-540b-abe0-66bceab700f5"
                },
                {
                    "type": "execution",
                    "name": "q2r",
                    "head": false,
                    "results": [],
                    "monitors": [
                        {
                            "name": "standard_output"
                        }
                    ],
                    "flowchartId": "3b4507a7-9244-540b-abe0-66bceab700f5",
                    "preProcessors": [],
                    "postProcessors": [],
                    "application": {
                        "name": "espresso",
                        "shortName": "qe",
                        "summary": "Quantum ESPRESSO",
                        "build": "GNU",
                        "hasAdvancedComputeOptions": true,
                        "isDefault": true,
                        "version": "6.3",
                        "schemaVersion": "2022.8.16"
                    },
                    "executable": {
                        "monitors": [
                            "standard_output"
                        ],
                        "name": "q2r.x",
                        "schemaVersion": "2022.8.16",
                        "isDefault": false
                    },
                    "flavor": {
                        "applicationName": "espresso",
                        "executableName": "q2r.x",
                        "input": [
                            {
                                "name": "q2r.in"
                            }
                        ],
                        "monitors": [
                            "standard_output"
                        ],
                        "results": [],
                        "name": "q2r",
                        "schemaVersion": "2022.8.16",
                        "isDefault": false
                    },
                    "status": "idle",
                    "statusTrack": [],
                    "tags": [],
                    "input": [
                        {
                            "applicationName": "espresso",
                            "content": "&INPUT\n    fildyn = 'dyn'\n    zasr = 'simple'\n    flfrc = 'force_constants.fc'\n/\n",
                            "contextProviders": [],
                            "executableName": "q2r.x",
                            "name": "q2r.in",
                            "rendered": "&INPUT\n    fildyn = 'dyn'\n    zasr = 'simple'\n    flfrc = 'force_constants.fc'\n/\n",
                            "schemaVersion": "2022.8.16"
                        }
                    ],
                    "next": "8fe6a24b-c994-55a2-a448-88657292e8c2"
                },
                {
                    "type": "execution",
                    "name": "matdyn_grid",
                    "head": false,
                    "results": [
                        {
                            "name": "phonon_dos"
                        }
                    ],
                    "monitors": [
                        {
                            "name": "standard_output"
                        }
                    ],
                    "flowchartId": "8fe6a24b-c994-55a2-a448-88657292e8c2",
                    "preProcessors": [],
                    "postProcessors": [],
                    "application": {
                        "name": "espresso",
                        "shortName": "qe",
                        "summary": "Quantum ESPRESSO",
                        "build": "GNU",
                        "hasAdvancedComputeOptions": true,
                        "isDefault": true,
                        "version": "6.3",
                        "schemaVersion": "2022.8.16"
                    },
                    "executable": {
                        "monitors": [
                            "standard_output"
                        ],
                        "name": "matdyn.x",
                        "schemaVersion": "2022.8.16",
                        "isDefault": false
                    },
                    "flavor": {
                        "applicationName": "espresso",
                        "executableName": "matdyn.x",
                        "input": [
                            {
                                "name": "matdyn_grid.in"
                            }
                        ],
                        "monitors": [
                            "standard_output"
                        ],
                        "results": [
                            "phonon_dos"
                        ],
                        "name": "matdyn_grid",
                        "schemaVersion": "2022.8.16",
                        "isDefault": false
                    },
                    "status": "idle",
                    "statusTrack": [],
                    "tags": [],
                    "input": [
                        {
                            "applicationName": "espresso",
                            "content": "&INPUT\n    asr = 'simple'\n    flfrc = 'force_constants.fc'\n    flfrq = 'frequencies.freq'\n    dos = .true.\n    fldos = 'phonon_dos.out'\n    deltaE = 1.d0\n    {% for d in igrid.dimensions -%}\n    nk{{loop.index}} = {{d}}\n    {% endfor %}\n /\n",
                            "contextProviders": [
                                {
                                    "name": "IGridFormDataManager"
                                }
                            ],
                            "executableName": "matdyn.x",
                            "name": "matdyn_grid.in",
                            "rendered": "&INPUT\n    asr = 'simple'\n    flfrc = 'force_constants.fc'\n    flfrq = 'frequencies.freq'\n    dos = .true.\n    fldos = 'phonon_dos.out'\n    deltaE = 1.d0\n    nk1 = 3\n    nk2 = 3\n    nk3 = 3\n    \n /\n",
                            "schemaVersion": "2022.8.16"
                        }
                    ],
                    "next": "a7fded20-889b-54fc-bbb0-456e82689ab1"
                },
                {
                    "type": "execution",
                    "name": "matdyn_path",
                    "head": false,
                    "results": [
                        {
                            "name": "phonon_dispersions"
                        }
                    ],
                    "monitors": [
                        {
                            "name": "standard_output"
                        }
                    ],
                    "flowchartId": "a7fded20-889b-54fc-bbb0-456e82689ab1",
                    "preProcessors": [],
                    "postProcessors": [],
                    "application": {
                        "name": "espresso",
                        "shortName": "qe",
                        "summary": "Quantum ESPRESSO",
                        "build": "GNU",
                        "hasAdvancedComputeOptions": true,
                        "isDefault": true,
                        "version": "6.3",
                        "schemaVersion": "2022.8.16"
                    },
                    "executable": {
                        "monitors": [
                            "standard_output"
                        ],
                        "name": "matdyn.x",
                        "schemaVersion": "2022.8.16",
                        "isDefault": false
                    },
                    "flavor": {
                        "applicationName": "espresso",
                        "executableName": "matdyn.x",
                        "input": [
                            {
                                "name": "matdyn_path.in"
                            }
                        ],
                        "monitors": [
                            "standard_output"
                        ],
                        "results": [
                            "phonon_dispersions"
                        ],
                        "name": "matdyn_path",
                        "schemaVersion": "2022.8.16",
                        "isDefault": false
                    },
                    "status": "idle",
                    "statusTrack": [],
                    "tags": [],
                    "input": [
                        {
                            "applicationName": "espresso",
                            "content": "&INPUT\n    asr = 'simple'\n    flfrc ='force_constants.fc'\n    flfrq ='frequencies.freq'\n    flvec ='normal_modes.out'\n    q_in_band_form = .true.\n /\n{{ipath.length}}\n{% for point in ipath -%}\n{% for d in point.coordinates %}{{d}} {% endfor -%}{{point.steps}}\n{% endfor %}\n",
                            "contextProviders": [
                                {
                                    "name": "IPathFormDataManager"
                                }
                            ],
                            "executableName": "matdyn.x",
                            "name": "matdyn_path.in",
                            "rendered": "&INPUT\n    asr = 'simple'\n    flfrc ='force_constants.fc'\n    flfrq ='frequencies.freq'\n    flvec ='normal_modes.out'\n    q_in_band_form = .true.\n /\n11\n   0.000000000    0.000000000    0.000000000 10\n   0.500000000    0.000000000    0.500000000 10\n   0.500000000    0.250000000    0.750000000 10\n   0.375000000    0.375000000    0.750000000 10\n   0.000000000    0.000000000    0.000000000 10\n   0.500000000    0.500000000    0.500000000 10\n   0.625000000    0.250000000    0.625000000 10\n   0.500000000    0.250000000    0.750000000 10\n   0.500000000    0.500000000    0.500000000 10\n   0.625000000    0.250000000    0.625000000 10\n   0.500000000    0.000000000    0.500000000 10\n\n",
                            "schemaVersion": "2022.8.16"
                        }
                    ]
                }
            ]
        }
    ],
    "units": [
        {
            "name": "Preliminary SCF Calculation",
            "type": "subworkflow",
            "_id": "79f2cb6a-7994-5369-8c85-af07c55ad26f",
            "status": "idle",
            "statusTrack": [],
            "flowchartId": "b6a2b27a-0fec-5e0e-8974-073ee9d2ad83",
            "tags": [],
            "head": true,
            "next": "4bb74dfb-46a6-5bf4-a477-5d374dc2e271"
        },
        {
            "name": "ph-init-qpoints",
            "type": "subworkflow",
            "_id": "2f017bcb-f4ba-55b8-b939-1f780679a88e",
            "status": "idle",
            "statusTrack": [],
            "flowchartId": "4bb74dfb-46a6-5bf4-a477-5d374dc2e271",
            "tags": [],
            "head": false,
            "next": "9894b91f-6e97-5ee6-af02-0bef26bd62c0"
        },
        {
            "name": "espresso-xml-get-qpt-irr",
            "type": "subworkflow",
            "_id": "e4b6b2e7-7d8f-5ae1-b6bd-ee81ecbca11a",
            "status": "idle",
            "statusTrack": [],
            "flowchartId": "9894b91f-6e97-5ee6-af02-0bef26bd62c0",
            "tags": [],
            "head": false,
            "next": "24e3c1f0-8090-512e-9727-8770071d17c8"
        },
        {
            "name": "map",
            "type": "map",
            "workflowId": "731d3397-3278-516a-b28e-53626ef50f0a",
            "input": {
                "target": "MAP_DATA",
                "scope": "global",
                "name": "Q_POINTS",
                "values": [],
                "useValues": false
            },
            "status": "idle",
            "statusTrack": [],
            "flowchartId": "24e3c1f0-8090-512e-9727-8770071d17c8",
            "tags": [],
            "head": false,
            "next": "55a9e9fb-3545-5c4b-a1bb-b64a899b78c6"
        },
        {
            "name": "reduce",
            "type": "subworkflow",
            "_id": "545a66e2-dfbe-513e-acaf-d79d0d139b9c",
            "status": "idle",
            "statusTrack": [],
            "flowchartId": "55a9e9fb-3545-5c4b-a1bb-b64a899b78c6",
            "tags": [],
            "head": false
        }
    ],
    "properties": [
        "atomic_forces",
        "fermi_energy",
        "pressure",
        "stress_tensor",
        "total_energy",
        "total_energy_contributions",
        "total_force"
    ],
    "_id": "23b9058b-884c-52d4-82a8-ee162b9761e0",
    "workflows": [
        {
            "name": "pre-processor",
            "subworkflows": [
                {
                    "_id": "03f3a8a3-1fd0-5007-925f-fba78be63a51",
                    "name": "pre-processor",
                    "application": {
                        "name": "shell",
                        "shortName": "sh",
                        "summary": "Shell Script",
                        "build": "GNU",
                        "isDefault": true,
                        "version": "5.1.8",
                        "schemaVersion": "2022.8.16"
                    },
                    "properties": [],
                    "model": {
                        "type": "unknown",
                        "subtype": "unknown",
                        "method": {
                            "type": "unknown",
                            "subtype": "unknown",
                            "data": {}
                        }
                    },
                    "units": [
                        {
                            "type": "execution",
                            "name": "shell",
                            "head": true,
                            "results": [],
                            "monitors": [
                                {
                                    "name": "standard_output"
                                }
                            ],
                            "flowchartId": "99304304-e873-5c89-ae83-91e61a7f629c",
                            "preProcessors": [],
                            "postProcessors": [],
                            "application": {
                                "name": "shell",
                                "shortName": "sh",
                                "summary": "Shell Script",
                                "build": "GNU",
                                "isDefault": true,
                                "version": "5.1.8",
                                "schemaVersion": "2022.8.16"
                            },
                            "executable": {
                                "isDefault": true,
                                "monitors": [
                                    "standard_output"
                                ],
                                "name": "sh",
                                "schemaVersion": "2022.8.16"
                            },
                            "flavor": {
                                "applicationName": "shell",
                                "executableName": "sh",
                                "input": [
                                    {
                                        "name": "espresso_link_outdir_save.sh"
                                    }
                                ],
                                "monitors": [
                                    "standard_output"
                                ],
                                "name": "espresso_link_outdir_save",
                                "schemaVersion": "2022.8.16",
                                "isDefault": false
                            },
                            "status": "idle",
                            "statusTrack": [],
                            "tags": [],
                            "input": [
                                {
                                    "applicationName": "shell",
                                    "content": "{% raw %}\n#!/bin/bash\n\nmkdir -p {{ JOB_SCRATCH_DIR }}/outdir/_ph0\ncd {{ JOB_SCRATCH_DIR }}/outdir\ncp -r {{ JOB_WORK_DIR }}/../outdir/__prefix__.* .\n{% endraw %}\n",
                                    "contextProviders": [],
                                    "executableName": "sh",
                                    "name": "espresso_link_outdir_save.sh",
                                    "rendered": "\n#!/bin/bash\n\nmkdir -p {{ JOB_SCRATCH_DIR }}/outdir/_ph0\ncd {{ JOB_SCRATCH_DIR }}/outdir\ncp -r {{ JOB_WORK_DIR }}/../outdir/__prefix__.* .\n\n",
                                    "schemaVersion": "2022.8.16"
                                }
                            ]
                        }
                    ]
                },
                {
                    "_id": "e68db280-8636-53e3-81a0-88396ba6147d",
                    "name": "ph-single-irr-qpt",
                    "application": {
                        "name": "espresso",
                        "shortName": "qe",
                        "summary": "Quantum ESPRESSO",
                        "build": "GNU",
                        "hasAdvancedComputeOptions": true,
                        "isDefault": true,
                        "version": "6.3",
                        "schemaVersion": "2022.8.16"
                    },
                    "properties": [],
                    "model": {
                        "type": "dft",
                        "subtype": "gga",
                        "method": {
                            "type": "pseudopotential",
                            "subtype": "us",
                            "data": {}
                        },
                        "functional": {
                            "slug": "pbe"
                        },
                        "refiners": [],
                        "modifiers": []
                    },
                    "units": [
                        {
                            "type": "execution",
                            "name": "ph_single_irr_qpt",
                            "head": true,
                            "results": [],
                            "monitors": [
                                {
                                    "name": "standard_output"
                                }
                            ],
                            "flowchartId": "8db9af08-d935-57a0-a824-e7db6d936de8",
                            "preProcessors": [],
                            "postProcessors": [],
                            "application": {
                                "name": "espresso",
                                "shortName": "qe",
                                "summary": "Quantum ESPRESSO",
                                "build": "GNU",
                                "hasAdvancedComputeOptions": true,
                                "isDefault": true,
                                "version": "6.3",
                                "schemaVersion": "2022.8.16"
                            },
                            "executable": {
                                "monitors": [
                                    "standard_output"
                                ],
                                "name": "ph.x",
                                "schemaVersion": "2022.8.16",
                                "isDefault": false
                            },
                            "flavor": {
                                "applicationName": "espresso",
                                "executableName": "ph.x",
                                "input": [
                                    {
                                        "name": "ph_single_irr_qpt.in"
                                    }
                                ],
                                "monitors": [
                                    "standard_output"
                                ],
                                "results": [],
                                "name": "ph_single_irr_qpt",
                                "schemaVersion": "2022.8.16",
                                "isDefault": false
                            },
                            "status": "idle",
                            "statusTrack": [],
                            "tags": [],
                            "input": [
                                {
                                    "applicationName": "espresso",
                                    "content": "&INPUTPH\n    tr2_ph = 1.0d-18\n    ldisp = .true.\n    {% raw %}\n    start_q = {{MAP_DATA.qpoint}}\n    last_q = {{MAP_DATA.qpoint}}\n    start_irr = {{MAP_DATA.irr}}\n    last_irr= {{MAP_DATA.irr}}\n    {% endraw %}\n    recover = .true.\n    fildyn = 'dyn'\n    prefix = '__prefix__'\n    outdir = {% raw %}'{{ JOB_SCRATCH_DIR }}/outdir'{% endraw %}\n    {% for d in qgrid.dimensions -%}\n    nq{{loop.index}} = {{d}}\n    {% endfor %}\n/\n",
                                    "contextProviders": [
                                        {
                                            "name": "QGridFormDataManager"
                                        }
                                    ],
                                    "executableName": "ph.x",
                                    "name": "ph_single_irr_qpt.in",
                                    "rendered": "&INPUTPH\n    tr2_ph = 1.0d-18\n    ldisp = .true.\n    \n    start_q = {{MAP_DATA.qpoint}}\n    last_q = {{MAP_DATA.qpoint}}\n    start_irr = {{MAP_DATA.irr}}\n    last_irr= {{MAP_DATA.irr}}\n    \n    recover = .true.\n    fildyn = 'dyn'\n    prefix = '__prefix__'\n    outdir = '{{ JOB_SCRATCH_DIR }}/outdir'\n    nq1 = 1\n    nq2 = 1\n    nq3 = 1\n    \n/\n",
                                    "schemaVersion": "2022.8.16"
                                }
                            ]
                        }
                    ]
                },
                {
                    "_id": "7239fc3a-b343-513f-af35-e8687e1829da",
                    "name": "post-processor",
                    "application": {
                        "name": "shell",
                        "shortName": "sh",
                        "summary": "Shell Script",
                        "build": "GNU",
                        "isDefault": true,
                        "version": "5.1.8",
                        "schemaVersion": "2022.8.16"
                    },
                    "properties": [],
                    "model": {
                        "type": "unknown",
                        "subtype": "unknown",
                        "method": {
                            "type": "unknown",
                            "subtype": "unknown",
                            "data": {}
                        }
                    },
                    "units": [
                        {
                            "type": "execution",
                            "name": "shell",
                            "head": true,
                            "results": [],
                            "monitors": [
                                {
                                    "name": "standard_output"
                                }
                            ],
                            "flowchartId": "99304304-e873-5c89-ae83-91e61a7f629c",
                            "preProcessors": [],
                            "postProcessors": [],
                            "application": {
                                "name": "shell",
                                "shortName": "sh",
                                "summary": "Shell Script",
                                "build": "GNU",
                                "isDefault": true,
                                "version": "5.1.8",
                                "schemaVersion": "2022.8.16"
                            },
                            "executable": {
                                "isDefault": true,
                                "monitors": [
                                    "standard_output"
                                ],
                                "name": "sh",
                                "schemaVersion": "2022.8.16"
                            },
                            "flavor": {
                                "applicationName": "shell",
                                "executableName": "sh",
                                "input": [
                                    {
                                        "name": "espresso_collect_dynmat.sh"
                                    }
                                ],
                                "monitors": [
                                    "standard_output"
                                ],
                                "name": "espresso_collect_dynmat",
                                "schemaVersion": "2022.8.16",
                                "isDefault": false
                            },
                            "status": "idle",
                            "statusTrack": [],
                            "tags": [],
                            "input": [
                                {
                                    "applicationName": "shell",
                                    "content": "{% raw %}\n#!/bin/bash\n\ncp {{ JOB_SCRATCH_DIR }}/outdir/_ph0/__prefix__.phsave/dynmat* {{ JOB_WORK_DIR }}/../outdir/_ph0/__prefix__.phsave\n{% endraw %}\n",
                                    "contextProviders": [],
                                    "executableName": "sh",
                                    "name": "espresso_collect_dynmat.sh",
                                    "rendered": "\n#!/bin/bash\n\ncp {{ JOB_SCRATCH_DIR }}/outdir/_ph0/__prefix__.phsave/dynmat* {{ JOB_WORK_DIR }}/../outdir/_ph0/__prefix__.phsave\n\n",
                                    "schemaVersion": "2022.8.16"
                                }
                            ]
                        }
                    ]
                }
            ],
            "units": [
                {
                    "name": "pre-processor",
                    "type": "subworkflow",
                    "_id": "03f3a8a3-1fd0-5007-925f-fba78be63a51",
                    "status": "idle",
                    "statusTrack": [],
                    "flowchartId": "e9a790f4-dec6-52c1-b951-014f0ff01cb4",
                    "tags": [],
                    "head": true,
                    "next": "c2195045-7a5c-54d3-ab88-211c82de09f1"
                },
                {
                    "name": "ph-single-irr-qpt",
                    "type": "subworkflow",
                    "_id": "e68db280-8636-53e3-81a0-88396ba6147d",
                    "status": "idle",
                    "statusTrack": [],
                    "flowchartId": "c2195045-7a5c-54d3-ab88-211c82de09f1",
                    "tags": [],
                    "head": false,
                    "next": "e483c7fb-2a29-5e91-819a-7465ead70134"
                },
                {
                    "name": "post-processor",
                    "type": "subworkflow",
                    "_id": "7239fc3a-b343-513f-af35-e8687e1829da",
                    "status": "idle",
                    "statusTrack": [],
                    "flowchartId": "e483c7fb-2a29-5e91-819a-7465ead70134",
                    "tags": [],
                    "head": false
                }
            ],
            "properties": [],
            "_id": "731d3397-3278-516a-b28e-53626ef50f0a",
            "workflows": [],
            "schemaVersion": "2022.8.16",
            "isDefault": false,
            "compute": {
                "ppn": 1,
                "nodes": 1,
                "queue": "D",
                "timeLimit": "01:00:00",
                "notify": "n",
                "cluster": {
                    "fqdn": ""
                }
            }
        }
    ],
    "schemaVersion": "2022.8.16",
    "isDefault": false,
    "application": {
        "name": "espresso"
    }
}
