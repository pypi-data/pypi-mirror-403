{
    "_id": "f0775c7b-214a-5245-b921-5b4eb53d15a9",
    "name": "Shell Batch Job (Espresso PWSCF)",
    "application": {
        "name": "shell"
    },
    "properties": [],
    "model": {
        "type": "unknown",
        "subtype": "unknown",
        "method": {
            "type": "unknown",
            "subtype": "unknown",
            "data": {}
        }
    },
    "units": [
        {
            "type": "execution",
            "name": "shell",
            "head": true,
            "results": [],
            "monitors": [
                {
                    "name": "standard_output"
                }
            ],
            "flowchartId": "99304304-e873-5c89-ae83-91e61a7f629c",
            "preProcessors": [],
            "postProcessors": [],
            "application": {
                "name": "shell",
                "shortName": "sh",
                "summary": "Shell Script",
                "build": "GNU",
                "isDefault": true,
                "version": "5.1.8",
                "schemaVersion": "2022.8.16"
            },
            "executable": {
                "isDefault": true,
                "monitors": [
                    "standard_output"
                ],
                "name": "sh",
                "schemaVersion": "2022.8.16"
            },
            "flavor": {
                "applicationName": "shell",
                "executableName": "sh",
                "input": [
                    {
                        "name": "job_espresso_pw_scf.sh"
                    }
                ],
                "monitors": [
                    "standard_output"
                ],
                "name": "job_espresso_pw_scf",
                "schemaVersion": "2022.8.16",
                "isDefault": false
            },
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "input": [
                {
                    "applicationName": "shell",
                    "content": "#!/bin/bash\n\n# ---------------------------------------------------------------- #\n#                                                                  #\n#  Example job submission script for Exabyte.io platform           #\n#                                                                  #\n#  Shows resource manager directives for:                          #\n#                                                                  #\n#    1. the name of the job                (-N)                    #\n#    2. the number of nodes to be used     (-l nodes=)             #\n#    3. the number of processors per node  (-l ppn=)               #\n#    4. the walltime in dd:hh:mm:ss format (-l walltime=)          #\n#    5. queue                              (-q) D, OR, OF, SR, SF  #\n#    6. merging standard output and error  (-j oe)                 #\n#    7. email about job abort, begin, end  (-m abe)                #\n#    8. email address to use               (-M)                    #\n#                                                                  #\n#  For more information visit https://docs.mat3ra.com/cli/jobs     #\n# ---------------------------------------------------------------- #\n\n#PBS -N ESPRESSO-TEST\n#PBS -j oe\n#PBS -l nodes=1\n#PBS -l ppn=1\n#PBS -l walltime=00:00:10:00\n#PBS -q D\n#PBS -m abe\n#PBS -M info@mat3ra.com\n\n# load module\nmodule add espresso\n\n# go to the job working directory\ncd $PBS_O_WORKDIR\n\n# create input file\ncat > pw.in <<EOF\n&CONTROL\n    calculation= 'scf'\n    title= ''\n    verbosity= 'low'\n    restart_mode= 'from_scratch'\n    wf_collect= .true.\n    tstress= .true.\n    tprnfor= .true.\n    outdir= './'\n    wfcdir= './'\n    prefix= '__prefix__'\n    pseudo_dir= '/export/share/pseudo/si/gga/pbe/gbrv/1.0/us/'\n/\n&SYSTEM\n    ibrav=0\n    nat=2\n    ntyp=1\n    ecutwfc= 40\n    ecutrho= 200\n    occupations= 'smearing'\n    degauss= 0.005\n/\n&ELECTRONS\n    diagonalization= 'david'\n    diago_david_ndim= 4\n    diago_full_acc= .true.\n    mixing_beta= 0.3\n    startingwfc='atomic+random'\n/\n&IONS\n/\n&CELL\n/\nATOMIC_SPECIES\nSi 28.0855 si_pbe_gbrv_1.0.upf\nCELL_PARAMETERS angstrom\n3.867000000 0.000000000 0.000000000\n1.933500000 3.348920236 0.000000000\n1.933500000 1.116306745 3.157392278\nATOMIC_POSITIONS crystal\nSi 0.000000000 0.000000000 0.000000000\nSi 0.250000000 0.250000000 0.250000000\nK_POINTS automatic\n10 10 10 0 0 0\nEOF\n\n# run the calculation\n# EXEC_CMD envvar is (conditionally) set by the module\nmpirun -np $PBS_NP $EXEC_CMD pw.x -in pw.in > pw.out\n",
                    "contextProviders": [],
                    "executableName": "sh",
                    "name": "job_espresso_pw_scf.sh",
                    "rendered": "#!/bin/bash\n\n# ---------------------------------------------------------------- #\n#                                                                  #\n#  Example job submission script for Exabyte.io platform           #\n#                                                                  #\n#  Shows resource manager directives for:                          #\n#                                                                  #\n#    1. the name of the job                (-N)                    #\n#    2. the number of nodes to be used     (-l nodes=)             #\n#    3. the number of processors per node  (-l ppn=)               #\n#    4. the walltime in dd:hh:mm:ss format (-l walltime=)          #\n#    5. queue                              (-q) D, OR, OF, SR, SF  #\n#    6. merging standard output and error  (-j oe)                 #\n#    7. email about job abort, begin, end  (-m abe)                #\n#    8. email address to use               (-M)                    #\n#                                                                  #\n#  For more information visit https://docs.mat3ra.com/cli/jobs     #\n# ---------------------------------------------------------------- #\n\n#PBS -N ESPRESSO-TEST\n#PBS -j oe\n#PBS -l nodes=1\n#PBS -l ppn=1\n#PBS -l walltime=00:00:10:00\n#PBS -q D\n#PBS -m abe\n#PBS -M info@mat3ra.com\n\n# load module\nmodule add espresso\n\n# go to the job working directory\ncd $PBS_O_WORKDIR\n\n# create input file\ncat > pw.in <<EOF\n&CONTROL\n    calculation= 'scf'\n    title= ''\n    verbosity= 'low'\n    restart_mode= 'from_scratch'\n    wf_collect= .true.\n    tstress= .true.\n    tprnfor= .true.\n    outdir= './'\n    wfcdir= './'\n    prefix= '__prefix__'\n    pseudo_dir= '/export/share/pseudo/si/gga/pbe/gbrv/1.0/us/'\n/\n&SYSTEM\n    ibrav=0\n    nat=2\n    ntyp=1\n    ecutwfc= 40\n    ecutrho= 200\n    occupations= 'smearing'\n    degauss= 0.005\n/\n&ELECTRONS\n    diagonalization= 'david'\n    diago_david_ndim= 4\n    diago_full_acc= .true.\n    mixing_beta= 0.3\n    startingwfc='atomic+random'\n/\n&IONS\n/\n&CELL\n/\nATOMIC_SPECIES\nSi 28.0855 si_pbe_gbrv_1.0.upf\nCELL_PARAMETERS angstrom\n3.867000000 0.000000000 0.000000000\n1.933500000 3.348920236 0.000000000\n1.933500000 1.116306745 3.157392278\nATOMIC_POSITIONS crystal\nSi 0.000000000 0.000000000 0.000000000\nSi 0.250000000 0.250000000 0.250000000\nK_POINTS automatic\n10 10 10 0 0 0\nEOF\n\n# run the calculation\n# EXEC_CMD envvar is (conditionally) set by the module\nmpirun -np $PBS_NP $EXEC_CMD pw.x -in pw.in > pw.out\n",
                    "schemaVersion": "2022.8.16"
                }
            ]
        }
    ]
}
