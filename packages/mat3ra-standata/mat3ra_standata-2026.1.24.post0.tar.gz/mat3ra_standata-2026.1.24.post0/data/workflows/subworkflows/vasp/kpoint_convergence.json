{
    "_id": "5d736d84-d616-538f-a09b-81a32ac0777c",
    "name": "K-point Convergence",
    "application": {
        "name": "vasp"
    },
    "properties": [
        "total_energy",
        "total_energy_contributions",
        "pressure",
        "fermi_energy",
        "atomic_forces",
        "total_force",
        "stress_tensor"
    ],
    "model": {
        "type": "dft",
        "subtype": "gga",
        "method": {
            "type": "pseudopotential",
            "subtype": "paw",
            "data": {}
        },
        "functional": {
            "slug": "pbe"
        },
        "refiners": [],
        "modifiers": []
    },
    "units": [
        {
            "name": "Init tolerance",
            "type": "assignment",
            "operand": "TOL",
            "value": 0.00001,
            "input": [],
            "flowchartId": "init-tolerance",
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "head": true,
            "next": "init-increment",
            "application": {
                "isLicensed": true,
                "name": "vasp",
                "shortName": "vasp",
                "summary": "Vienna Ab-initio Simulation Package",
                "build": "GNU",
                "isDefault": true,
                "version": "5.4.4",
                "schemaVersion": "2022.8.16"
            }
        },
        {
            "name": "Init increment",
            "type": "assignment",
            "operand": "INC",
            "value": 1,
            "input": [],
            "flowchartId": "init-increment",
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "head": false,
            "next": "init-result",
            "application": {
                "isLicensed": true,
                "name": "vasp",
                "shortName": "vasp",
                "summary": "Vienna Ab-initio Simulation Package",
                "build": "GNU",
                "isDefault": true,
                "version": "5.4.4",
                "schemaVersion": "2022.8.16"
            }
        },
        {
            "name": "Init result",
            "type": "assignment",
            "operand": "PREV_RESULT",
            "value": 0,
            "input": [],
            "flowchartId": "init-result",
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "head": false,
            "next": "init-parameter",
            "application": {
                "isLicensed": true,
                "name": "vasp",
                "shortName": "vasp",
                "summary": "Vienna Ab-initio Simulation Package",
                "build": "GNU",
                "isDefault": true,
                "version": "5.4.4",
                "schemaVersion": "2022.8.16"
            }
        },
        {
            "name": "Init parameter",
            "type": "assignment",
            "operand": "PARAMETER",
            "value": 1,
            "input": [],
            "flowchartId": "init-parameter",
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "head": false,
            "next": "vasp-kpoint-convergence",
            "application": {
                "isLicensed": true,
                "name": "vasp",
                "shortName": "vasp",
                "summary": "Vienna Ab-initio Simulation Package",
                "build": "GNU",
                "isDefault": true,
                "version": "5.4.4",
                "schemaVersion": "2022.8.16"
            }
        },
        {
            "type": "execution",
            "name": "vasp_kpt_conv",
            "head": false,
            "results": [
                {
                    "name": "total_energy"
                },
                {
                    "name": "total_energy_contributions"
                },
                {
                    "name": "pressure"
                },
                {
                    "name": "fermi_energy"
                },
                {
                    "name": "atomic_forces"
                },
                {
                    "name": "total_force"
                },
                {
                    "name": "stress_tensor"
                }
            ],
            "monitors": [
                {
                    "name": "standard_output"
                },
                {
                    "name": "convergence_electronic"
                }
            ],
            "flowchartId": "vasp-kpoint-convergence",
            "preProcessors": [],
            "postProcessors": [],
            "application": {
                "isLicensed": true,
                "name": "vasp",
                "shortName": "vasp",
                "summary": "Vienna Ab-initio Simulation Package",
                "build": "GNU",
                "isDefault": true,
                "version": "5.4.4",
                "schemaVersion": "2022.8.16"
            },
            "executable": {
                "isDefault": true,
                "monitors": [
                    "standard_output",
                    "convergence_ionic",
                    "convergence_electronic"
                ],
                "postProcessors": [
                    "error_handler",
                    "prepare_restart",
                    "remove_non_zero_weight_kpoints"
                ],
                "name": "vasp",
                "schemaVersion": "2022.8.16"
            },
            "flavor": {
                "applicationName": "vasp",
                "executableName": "vasp",
                "input": [
                    {
                        "name": "INCAR",
                        "templateName": "INCAR"
                    },
                    {
                        "name": "KPOINTS",
                        "templateName": "KPOINTS_CONV"
                    },
                    {
                        "name": "POSCAR",
                        "templateName": "POSCAR"
                    }
                ],
                "monitors": [
                    "standard_output",
                    "convergence_electronic"
                ],
                "results": [
                    "total_energy",
                    "total_energy_contributions",
                    "pressure",
                    "fermi_energy",
                    "atomic_forces",
                    "total_force",
                    "stress_tensor"
                ],
                "name": "vasp_kpt_conv",
                "schemaVersion": "2022.8.16",
                "isDefault": false
            },
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "input": [
                {
                    "applicationName": "vasp",
                    "content": "ISMEAR = 0\nSIGMA  = 0.05\nLORBIT = 11\n",
                    "contextProviders": [
                        {
                            "name": "VASPInputDataManager"
                        }
                    ],
                    "executableName": "vasp",
                    "name": "INCAR",
                    "rendered": "ISMEAR = 0\nSIGMA  = 0.05\nLORBIT = 11\n",
                    "schemaVersion": "2022.8.16"
                },
                {
                    "applicationName": "vasp",
                    "content": "Automatic Mesh\n0\nGamma\n{% raw %}{{PARAMETER | default('1')}} {{PARAMETER | default('1')}} {{PARAMETER | default('1')}}{% endraw %}\n0 0 0\n",
                    "contextProviders": [
                        {
                            "name": "KGridFormDataManager"
                        },
                        {
                            "name": "VASPInputDataManager"
                        }
                    ],
                    "executableName": "vasp",
                    "name": "KPOINTS",
                    "rendered": "Automatic Mesh\n0\nGamma\n{{PARAMETER | default('1')}} {{PARAMETER | default('1')}} {{PARAMETER | default('1')}}\n0 0 0\n",
                    "schemaVersion": "2022.8.16"
                },
                {
                    "applicationName": "vasp",
                    "content": "{{ input.POSCAR }}\n",
                    "contextProviders": [
                        {
                            "name": "VASPInputDataManager"
                        }
                    ],
                    "executableName": "vasp",
                    "name": "POSCAR",
                    "rendered": "Silicon FCC\n1.0\n   3.348920000\t   0.000000000\t   1.933500000\n   1.116307000\t   3.157392000\t   1.933500000\n   0.000000000\t   0.000000000\t   3.867000000\nSi\n2\ndirect\n   0.000000000    0.000000000    0.000000000  Si\n   0.250000000    0.250000000    0.250000000  Si\n",
                    "schemaVersion": "2022.8.16"
                }
            ],
            "next": "store-result"
        },
        {
            "name": "store result",
            "type": "assignment",
            "operand": "RESULT",
            "value": "total_energy",
            "input": [
                {
                    "name": "total_energy",
                    "scope": "vasp-kpoint-convergence"
                }
            ],
            "flowchartId": "store-result",
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "head": false,
            "next": "check-convergence",
            "application": {
                "isLicensed": true,
                "name": "vasp",
                "shortName": "vasp",
                "summary": "Vienna Ab-initio Simulation Package",
                "build": "GNU",
                "isDefault": true,
                "version": "5.4.4",
                "schemaVersion": "2022.8.16"
            }
        },
        {
            "name": "check convergence",
            "type": "condition",
            "input": [],
            "results": [],
            "preProcessors": [],
            "postProcessors": [],
            "then": "convergence-is-reached",
            "else": "update-result",
            "statement": "abs((PREV_RESULT-RESULT)/RESULT) < TOL",
            "maxOccurrences": 50,
            "flowchartId": "check-convergence",
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "head": false,
            "next": "update-result",
            "application": {
                "isLicensed": true,
                "name": "vasp",
                "shortName": "vasp",
                "summary": "Vienna Ab-initio Simulation Package",
                "build": "GNU",
                "isDefault": true,
                "version": "5.4.4",
                "schemaVersion": "2022.8.16"
            }
        },
        {
            "name": "update result",
            "type": "assignment",
            "operand": "PREV_RESULT",
            "value": "RESULT",
            "input": [
                {
                    "name": "RESULT",
                    "scope": "global"
                }
            ],
            "flowchartId": "update-result",
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "head": false,
            "next": "increment-parameter",
            "application": {
                "isLicensed": true,
                "name": "vasp",
                "shortName": "vasp",
                "summary": "Vienna Ab-initio Simulation Package",
                "build": "GNU",
                "isDefault": true,
                "version": "5.4.4",
                "schemaVersion": "2022.8.16"
            }
        },
        {
            "name": "increment parameter",
            "type": "assignment",
            "operand": "PREV_RESULT",
            "value": "PARAMETER+INC",
            "input": [
                {
                    "name": "INC",
                    "scope": "global"
                },
                {
                    "name": "PARAMETER",
                    "scope": "global"
                }
            ],
            "flowchartId": "increment-parameter",
            "next": "vasp-kpoint-convergence",
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "head": false,
            "application": {
                "isLicensed": true,
                "name": "vasp",
                "shortName": "vasp",
                "summary": "Vienna Ab-initio Simulation Package",
                "build": "GNU",
                "isDefault": true,
                "version": "5.4.4",
                "schemaVersion": "2022.8.16"
            }
        },
        {
            "name": "exit",
            "type": "assignment",
            "operand": "PARAMETER",
            "value": "PARAMETER",
            "input": [
                {
                    "name": "PARAMETER",
                    "scope": "global"
                }
            ],
            "flowchartId": "convergence-is-reached",
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "head": false,
            "application": {
                "isLicensed": true,
                "name": "vasp",
                "shortName": "vasp",
                "summary": "Vienna Ab-initio Simulation Package",
                "build": "GNU",
                "isDefault": true,
                "version": "5.4.4",
                "schemaVersion": "2022.8.16"
            }
        }
    ]
}
