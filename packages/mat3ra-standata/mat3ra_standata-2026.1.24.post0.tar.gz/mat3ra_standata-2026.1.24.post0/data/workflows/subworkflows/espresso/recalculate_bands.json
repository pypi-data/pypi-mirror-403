{
    "_id": "64551dfb-e529-5d8d-9092-ff268f4da134",
    "name": "Recalculate Bands",
    "application": {
        "name": "espresso"
    },
    "properties": [
        "band_structure"
    ],
    "model": {
        "type": "dft",
        "subtype": "gga",
        "method": {
            "type": "pseudopotential",
            "subtype": "us",
            "data": {}
        },
        "functional": {
            "slug": "pbe"
        },
        "refiners": [],
        "modifiers": []
    },
    "units": [
        {
            "type": "execution",
            "name": "pw_bands",
            "head": true,
            "results": [
                {
                    "name": "band_structure"
                }
            ],
            "monitors": [
                {
                    "name": "standard_output"
                }
            ],
            "flowchartId": "d618df45-5af3-5da5-8882-d74a27e00b04",
            "preProcessors": [],
            "postProcessors": [],
            "application": {
                "name": "espresso",
                "shortName": "qe",
                "summary": "Quantum ESPRESSO",
                "build": "GNU",
                "hasAdvancedComputeOptions": true,
                "isDefault": true,
                "version": "6.3",
                "schemaVersion": "2022.8.16"
            },
            "executable": {
                "hasAdvancedComputeOptions": true,
                "isDefault": true,
                "monitors": [
                    "standard_output",
                    "convergence_ionic",
                    "convergence_electronic"
                ],
                "postProcessors": [
                    "remove_non_zero_weight_kpoints"
                ],
                "name": "pw.x",
                "schemaVersion": "2022.8.16"
            },
            "flavor": {
                "applicationName": "espresso",
                "executableName": "pw.x",
                "input": [
                    {
                        "name": "pw_bands.in"
                    }
                ],
                "monitors": [
                    "standard_output"
                ],
                "results": [
                    "band_structure"
                ],
                "name": "pw_bands",
                "schemaVersion": "2022.8.16",
                "isDefault": false
            },
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "input": [
                {
                    "applicationName": "espresso",
                    "content": "{% if subworkflowContext.MATERIAL_INDEX %}\n{%- set input = input.perMaterial[subworkflowContext.MATERIAL_INDEX] -%}\n{% endif -%}\n&CONTROL\n    calculation = 'bands'\n    title = ''\n    verbosity = 'low'\n    restart_mode = '{{input.RESTART_MODE}}'\n    wf_collect = .true.\n    tstress = .true.\n    tprnfor = .true.\n    outdir = {% raw %}'{{ JOB_WORK_DIR }}/outdir'{% endraw %}\n    wfcdir = {% raw %}'{{ JOB_WORK_DIR }}/outdir'{% endraw %}\n    prefix = '__prefix__'\n    pseudo_dir = {% raw %}'{{ JOB_WORK_DIR }}/pseudo'{% endraw %}\n/\n&SYSTEM\n    ibrav = {{ input.IBRAV }}\n    nat = {{ input.NAT }}\n    ntyp = {{ input.NTYP }}\n    ecutwfc = {{ cutoffs.wavefunction }}\n    ecutrho = {{ cutoffs.density }}\n    occupations = 'smearing'\n    degauss = 0.005\n/\n&ELECTRONS\n    diagonalization = 'david'\n    diago_david_ndim = 4\n    diago_full_acc = .true.\n    mixing_beta = 0.3\n/\n&IONS\n/\n&CELL\n/\nATOMIC_SPECIES\n{{ input.ATOMIC_SPECIES }}\nATOMIC_POSITIONS crystal\n{{ input.ATOMIC_POSITIONS }}\nCELL_PARAMETERS angstrom\n{{ input.CELL_PARAMETERS }}\nK_POINTS crystal_b\n{{kpath.length}}\n{% for point in kpath -%}\n{% for d in point.coordinates %}{{d}} {% endfor -%}{{point.steps}}\n{% endfor %}\n",
                    "contextProviders": [
                        {
                            "name": "KPathFormDataManager"
                        },
                        {
                            "name": "QEPWXInputDataManager"
                        },
                        {
                            "name": "PlanewaveCutoffDataManager"
                        }
                    ],
                    "executableName": "pw.x",
                    "name": "pw_bands.in",
                    "rendered": "&CONTROL\n    calculation = 'bands'\n    title = ''\n    verbosity = 'low'\n    restart_mode = 'from_scratch'\n    wf_collect = .true.\n    tstress = .true.\n    tprnfor = .true.\n    outdir = '{{ JOB_WORK_DIR }}/outdir'\n    wfcdir = '{{ JOB_WORK_DIR }}/outdir'\n    prefix = '__prefix__'\n    pseudo_dir = '{{ JOB_WORK_DIR }}/pseudo'\n/\n&SYSTEM\n    ibrav = 0\n    nat = 2\n    ntyp = 1\n    ecutwfc = 40\n    ecutrho = 200\n    occupations = 'smearing'\n    degauss = 0.005\n/\n&ELECTRONS\n    diagonalization = 'david'\n    diago_david_ndim = 4\n    diago_full_acc = .true.\n    mixing_beta = 0.3\n/\n&IONS\n/\n&CELL\n/\nATOMIC_SPECIES\nSi 28.0855 \nATOMIC_POSITIONS crystal\nSi     0.000000000    0.000000000    0.000000000 \nSi     0.250000000    0.250000000    0.250000000 \nCELL_PARAMETERS angstrom\n3.348920236 0.000000000 1.933500000\n1.116306745 3.157392278 1.933500000\n0.000000000 0.000000000 3.867000000\nK_POINTS crystal_b\n11\n   0.000000000    0.000000000    0.000000000 10\n   0.500000000    0.000000000    0.500000000 10\n   0.500000000    0.250000000    0.750000000 10\n   0.375000000    0.375000000    0.750000000 10\n   0.000000000    0.000000000    0.000000000 10\n   0.500000000    0.500000000    0.500000000 10\n   0.625000000    0.250000000    0.625000000 10\n   0.500000000    0.250000000    0.750000000 10\n   0.500000000    0.500000000    0.500000000 10\n   0.625000000    0.250000000    0.625000000 10\n   0.500000000    0.000000000    0.500000000 10\n\n",
                    "schemaVersion": "2022.8.16"
                }
            ],
            "next": "771fbb40-ea80-5ba4-ae3f-6cd9a56c26e2"
        },
        {
            "type": "execution",
            "name": "bands",
            "head": false,
            "results": [],
            "monitors": [
                {
                    "name": "standard_output"
                }
            ],
            "flowchartId": "771fbb40-ea80-5ba4-ae3f-6cd9a56c26e2",
            "preProcessors": [],
            "postProcessors": [],
            "application": {
                "name": "espresso",
                "shortName": "qe",
                "summary": "Quantum ESPRESSO",
                "build": "GNU",
                "hasAdvancedComputeOptions": true,
                "isDefault": true,
                "version": "6.3",
                "schemaVersion": "2022.8.16"
            },
            "executable": {
                "monitors": [
                    "standard_output"
                ],
                "name": "bands.x",
                "schemaVersion": "2022.8.16",
                "isDefault": false
            },
            "flavor": {
                "applicationName": "espresso",
                "executableName": "bands.x",
                "input": [
                    {
                        "name": "bands.in"
                    }
                ],
                "monitors": [
                    "standard_output"
                ],
                "name": "bands",
                "schemaVersion": "2022.8.16",
                "isDefault": false
            },
            "status": "idle",
            "statusTrack": [],
            "tags": [],
            "input": [
                {
                    "applicationName": "espresso",
                    "content": "&BANDS\n    prefix = '__prefix__'\n    outdir = {% raw %}'{{ JOB_WORK_DIR }}/outdir'{% endraw %}\n    filband = {% raw %}'{{ JOB_WORK_DIR }}/bands.dat'{% endraw %}\n    no_overlap = .true.\n/\n",
                    "contextProviders": [],
                    "executableName": "bands.x",
                    "name": "bands.in",
                    "rendered": "&BANDS\n    prefix = '__prefix__'\n    outdir = '{{ JOB_WORK_DIR }}/outdir'\n    filband = '{{ JOB_WORK_DIR }}/bands.dat'\n    no_overlap = .true.\n/\n",
                    "schemaVersion": "2022.8.16"
                }
            ]
        }
    ]
}
