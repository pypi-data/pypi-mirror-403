// Copyright (C) 2023 - 2026 ANSYS, Inc. and/or its affiliates.
// SPDX-License-Identifier: MIT
//
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in all
// copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
// SOFTWARE.

syntax = "proto3";

package grpcRemoting;
service Events {
  rpc BeginStreaming(BeginStreamingRequest) returns (stream BeginStreamingResponse) {}
}

message BeginStreamingRequest {
}

/**
 * Event at end of the time step.
 */
message TimestepEndedEvent {
  sint64 index = 1;  // Time step index.
  double size = 2;   // Time step size.
}

/**
 * Event at end of the iteration.
 */
message IterationEndedEvent {
  sint64 index = 1;  // Iteration index
}

/**
 * Event at start of calculation.
 */
message CalculationsStartedEvent {
}

/**
 * Event at end of calculation.
 */
message CalculationsEndedEvent {
}

/**
 * Event at start of def read.
 */
message AboutToReadDefEvent {
  string deffilepath = 1;  // Def file path.
}

/**
 * Event after def is read.
 */
message DefReadEvent {
  string deffilepath = 1;  // Def file path.
}

/**
 * Event at res read.
 */
message ResReadEvent {
  string resfilepath = 1;  // Res file path.
}

/**
 * Event at solution initialization.
 */
message InitializedEvent {
}

/**
 * Event during solution progress.
 */
message ProgressEvent {
  string message = 1;          // Progress Message.
  sint32 percentComplete = 2;  // Percent completed.
}

/*
 * Event when fatal error encountered
 */
message ErrorEvent {
  string message = 1;
  sint32 errorCode = 2;
}

message BeginStreamingResponse {
  oneof as {
    AboutToReadDefEvent abouttoreaddefevent = 1;
    DefReadEvent defreadevent = 2;
    InitializedEvent initializedevent = 4;
    ResReadEvent resreadevent = 6;
    IterationEndedEvent iterationendedevent = 8;
    TimestepEndedEvent timestependedevent = 10;
    CalculationsStartedEvent calculationsstartedevent = 11;
    CalculationsEndedEvent calculationsendedevent = 12;
    ProgressEvent progressevent = 20;
    ErrorEvent errorevent = 21;
  }
}
