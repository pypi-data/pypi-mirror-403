map "http://hl7.org/fhir/StructureMap/tutorial-step12" = "Tutorial"

uses "http://hl7.org/fhir/StructureDefinition/tutorial-left-12" alias TLeft as source
uses "http://hl7.org/fhir/StructureDefinition/tutorial-right-12" alias TRight as target

group tutorial(source src : TLeft, target tgt : TRight) {

// setting up a variable for the parent
src.az1 as saz1 then {

  // one tgt.az1 for each az3
  saz1.az3 as saz3 -> tgt.az1 as taz1 then {
    // value for az2. Note that this refers to a previous context in the source
    saz1.az2 as az2 -> taz1.az2 = az2 "rule-az2";

    // value for az3
    saz3 -> taz1.az3 = saz3 "rule-az3";
  } "rule-taz1";
} "rule-saz1";

}