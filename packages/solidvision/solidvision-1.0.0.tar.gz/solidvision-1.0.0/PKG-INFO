Metadata-Version: 2.4
Name: solidvision
Version: 1.0.0
Summary: å›¾åƒè¯†åˆ«ä¸æ–‡å­—è¯†åˆ«æ¨¡å— - è½»é‡çº§ç‹¬ç«‹ OCR/CV æ¨¡å—
Project-URL: Homepage, https://github.com/SolidQA/supervision
Project-URL: Repository, https://github.com/SolidQA/supervision
Project-URL: Bug Tracker, https://github.com/SolidQA/supervision/issues
Author-email: caishilong <1103837067@qq.com>
License: MIT
License-File: LICENSE
Keywords: computer-vision,image-recognition,ocr,opencv,paddleocr,template-matching,text-recognition
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Scientific/Engineering :: Image Recognition
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: <3.13,>=3.12
Requires-Dist: colorlog>=6.10.1
Requires-Dist: logzero>=1.7.0
Requires-Dist: matplotlib>=3.10.8
Requires-Dist: numpy>=2.4.1
Requires-Dist: opencv-contrib-python>=4.13.0.90
Requires-Dist: packaging>=26.0
Requires-Dist: paddleocr>=2.10.0
Requires-Dist: paddlepaddle==2.6.2
Requires-Dist: pillow>=12.1.0
Requires-Dist: requests>=2.32.5
Requires-Dist: setuptools>=80.10.2
Description-Content-Type: text/markdown

# Supervision - å›¾åƒè¯†åˆ«ä¸æ–‡å­—è¯†åˆ«æ¨¡å—

[![PyPI version](https://badge.fury.io/py/solidvision.svg)](https://badge.fury.io/py/solidvision)

ä¸€ä¸ªè½»é‡çº§ã€é«˜æ•ˆçš„å›¾åƒè¯†åˆ«ä¸æ–‡å­—è¯†åˆ«æ¨¡å—ã€‚å®Œå…¨ç‹¬ç«‹ï¼Œæ— éœ€ä»»ä½•è®¾å¤‡è¿æ¥ï¼Œå¯è½»æ¾é›†æˆåˆ°ä»»ä½•é¡¹ç›®ä¸­ï¼ˆæ¡Œé¢ç«¯ã€Webã€ç§»åŠ¨ç«¯ç­‰ï¼‰ã€‚

## æ ¸å¿ƒæ¨¡å—

- **options** - å…¨å±€é…ç½®ç®¡ç†
- **aircv** - å›¾åƒè¯†åˆ«ï¼ˆæ¨¡æ¿åŒ¹é…ã€ç‰¹å¾ç‚¹åŒ¹é…ï¼‰
- **orc** - æ–‡å­—è¯†åˆ«ï¼ˆOCRï¼‰

## ç‰¹æ€§

- âœ… **å¤šç§åŒ¹é…ç®—æ³•** - æ”¯æŒæ¨¡æ¿åŒ¹é…ã€å¤šå°ºåº¦æ¨¡æ¿åŒ¹é…ã€KAZEã€BRISKã€AKAZEã€ORBã€SIFTã€SURFã€BRIEFç­‰
- âœ… **å®Œå…¨ç‹¬ç«‹** - æ— éœ€è®¾å¤‡è¿æ¥ï¼Œçº¯å›¾åƒ/æ–‡å­—è¯†åˆ«
- âœ… **æ˜“äºé›†æˆ** - ç®€æ´çš„APIæ¥å£ï¼Œæ”¯æŒå¤šç§åº”ç”¨åœºæ™¯
- âœ… **é«˜æ€§èƒ½** - ä¼˜åŒ–çš„åŒ¹é…ç­–ç•¥å’Œç®—æ³•é€‰æ‹©
- âœ… **çµæ´»é…ç½®** - å¯é…ç½®çš„é˜ˆå€¼ã€è¶…æ—¶ã€ç®—æ³•ç­‰å‚æ•°
- âœ… **æ”¯æŒOCR** - é›†æˆPaddleOCRå®ç°ä¸­æ–‡/è‹±æ–‡æ–‡å­—è¯†åˆ«

## å®‰è£…

### ä» PyPI å®‰è£…ï¼ˆæ¨èï¼‰

```bash
pip install solidvision
```

### ä»æºç å®‰è£…ï¼ˆå¼€å‘æ¨¡å¼ï¼‰

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/SolidQA/solidvision.git
cd solidvision

# ä½¿ç”¨ uv å®‰è£…ï¼ˆæ¨èï¼‰
uv sync --dev

# æˆ–ä½¿ç”¨ pip
pip install -e .
```

## å¿«é€Ÿå¼€å§‹

### å›¾åƒè¯†åˆ«

```python
from solidvision import find_location, Template
import cv2

# è¯»å–æˆªå›¾
screenshot = cv2.imread('screenshot.png')

# æ–¹å¼1: å¿«é€ŸæŸ¥æ‰¾
position = find_location(screenshot, 'button.png', threshold=0.8)
print(position)  # (100, 200)

# æ–¹å¼2: ä½¿ç”¨Template
from solidvision.aircv.cv import match_loop
template = Template('button.png')
position = match_loop(lambda: screenshot, template.filepath, threshold=0.8)
```

### æ–‡å­—è¯†åˆ«

```python
from solidvision import recognize_text, find_text_position
import cv2

# è¯»å–å›¾åƒ
image = cv2.imread('image.png')

# è¯†åˆ«æ‰€æœ‰æ–‡å­—
texts = recognize_text(image)
for item in texts:
    print(f"æ–‡å­—: {item['text']}, ä½ç½®: {item['position']}")

# æŸ¥æ‰¾ç‰¹å®šæ–‡å­—ä½ç½®
position = find_text_position(image, 'ç¡®å®š')
print(position)  # (150, 250)
```

## æ¨¡å—è¯´æ˜

### options æ¨¡å—

å…¨å±€é…ç½®ç®¡ç†ï¼š

```python
from solidvision.options import Options, Config

# è®¾ç½®è¯†åˆ«é˜ˆå€¼
Options.CV_THRESHOLD = 0.85

# è®¾ç½®è¶…æ—¶æ—¶é—´
Options.FIND_TIMEOUT = 15

# é…ç½®OCRè¯­è¨€
Options.OCR_LANGUAGE = 'ch'  # ä¸­æ–‡

# è·å–å½“å‰é…ç½®
config_dict = Options.get_config_dict()
```

### aircv æ¨¡å—

å›¾åƒè¯†åˆ«åŠŸèƒ½ï¼š

```python
from solidvision.aircv.cv import Template, match_loop, multi_find_location
from solidvision.aircv.settings import Settings

# é…ç½®åŒ¹é…ç­–ç•¥
Settings.CVSTRATEGY = ('tpl', 'kaze', 'brisk')

# åˆ›å»ºæ¨¡æ¿
template = Template('button.png', threshold=0.8)

# å•æ¬¡åŒ¹é…
position = match_loop(screenshot_func, template.filepath, timeout=10, threshold=0.8)

# æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…
positions = multi_find_location(screenshot_func, 'button.png', threshold=0.8)
```

### orc æ¨¡å—

æ–‡å­—è¯†åˆ«åŠŸèƒ½ï¼š

```python
from solidvision.orc import TextRecognizer, recognize_text
import cv2

# åˆ›å»ºè¯†åˆ«å™¨
recognizer = TextRecognizer(lang='ch')

# è¯†åˆ«å›¾åƒä¸­çš„æ–‡å­—
image = cv2.imread('image.png')
results = recognizer.recognize_image(image)

# æŸ¥æ‰¾ç‰¹å®šæ–‡å­—
position = recognizer.find_text_position(image, 'ç¡®å®š')

# è·å–æ‰€æœ‰æ–‡å­—
text = recognizer.get_page_text(image)
```

## é›†æˆç¤ºä¾‹

### é›†æˆåˆ°æ¡Œé¢åº”ç”¨

```python
import cv2
from solidvision import find_location

def find_button_on_desktop(button_template):
    import pyautogui
    import numpy as np

    # è·å–æ¡Œé¢æˆªå›¾
    screenshot = pyautogui.screenshot()
    frame = cv2.cvtColor(np.array(screenshot), cv2.COLOR_RGB2BGR)

    # è¯†åˆ«æŒ‰é’®
    position = find_location(frame, button_template, threshold=0.8)

    if position:
        # ç‚¹å‡»æŒ‰é’®
        pyautogui.click(position)
        return True

    return False

# ä½¿ç”¨
find_button_on_desktop('button.png')
```

### é›†æˆåˆ°Webåº”ç”¨ (Flask)

```python
from flask import Flask, request, jsonify
from solidvision import find_location
import cv2
import numpy as np

app = Flask(__name__)

@app.route('/recognize', methods=['POST'])
def recognize():
    file = request.files['image']
    template_path = request.form.get('template')

    # è¯»å–å›¾åƒ
    image_bytes = np.frombuffer(file.read(), np.uint8)
    image = cv2.imdecode(image_bytes, cv2.IMREAD_COLOR)

    # è¯†åˆ«
    position = find_location(image, template_path)

    return jsonify({
        'success': position is not None,
        'position': position
    })
```

### é›†æˆåˆ°ç§»åŠ¨åº”ç”¨è‡ªåŠ¨åŒ–

```python
from solidvision import find_location, find_text_position
import cv2

class MobileAutomation:
    @staticmethod
    def click(screenshot, template_path):
        """ç‚¹å‡»UIå…ƒç´ """
        position = find_location(screenshot, template_path)
        return position

    @staticmethod
    def click_text(screenshot, text):
        """ç‚¹å‡»æ–‡å­—"""
        position = find_text_position(screenshot, text)
        return position
```

## æ€§èƒ½ä¼˜åŒ–

### 1. é€‰æ‹©åˆé€‚çš„ç®—æ³•

```python
from solidvision.aircv.settings import Settings

# å¿«é€ŸåŒ¹é…ï¼ˆç®€å•åœºæ™¯ï¼‰
Settings.CVSTRATEGY = ('tpl',)

# é«˜ç²¾åº¦åŒ¹é…ï¼ˆå¤æ‚åœºæ™¯ï¼‰
Settings.CVSTRATEGY = ('gmstpl', 'sift')

# å¹³è¡¡æ–¹æ¡ˆ
Settings.CVSTRATEGY = ('tpl', 'kaze', 'brisk')
```

### 2. è°ƒæ•´é˜ˆå€¼

```python
# é«˜é˜ˆå€¼ï¼šå‡å°‘è¯¯è¯†åˆ«ï¼Œä½†å¯èƒ½æ¼æ£€
position = find_location(screenshot, 'template.png', threshold=0.95)

# ä½é˜ˆå€¼ï¼šå®¹æ˜“åŒ¹é…ï¼Œä½†å¯èƒ½è¯¯è¯†åˆ«
position = find_location(screenshot, 'template.png', threshold=0.6)

# æ¨èå€¼
position = find_location(screenshot, 'template.png', threshold=0.8)
```

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æé«˜è¯†åˆ«å‡†ç¡®ç‡ï¼Ÿ

A:
1. è°ƒæ•´ `threshold` å‚æ•°
2. å°è¯•ä¸åŒçš„åŒ¹é…ç®—æ³•
3. ç¡®ä¿æ¨¡æ¿æ¸…æ™°ï¼Œä¸å®é™…åœºæ™¯ç›¸ç¬¦
4. ä½¿ç”¨é«˜è´¨é‡çš„æˆªå›¾

### Q: è¯†åˆ«é€Ÿåº¦å¤ªæ…¢ï¼Ÿ

A:
1. ä½¿ç”¨æ›´å¿«çš„ç®—æ³• (`tpl` è€Œä¸æ˜¯ `sift`)
2. ç¼©å°æœç´¢åŒºåŸŸ
3. æé«˜é˜ˆå€¼
4. ä½¿ç”¨æ›´å°çš„æ¨¡æ¿å›¾åƒ

### Q: å¦‚ä½•å¤„ç†æ—‹è½¬æˆ–ç¼©æ”¾çš„å›¾åƒï¼Ÿ

A:
```python
from solidvision.aircv.settings import Settings

# ä½¿ç”¨å¤šå°ºåº¦æ¨¡æ¿åŒ¹é…
Settings.CVSTRATEGY = ('gmstpl', 'sift')
```

### Q: OCR è¯†åˆ«ä¸å‡†æ€ä¹ˆåŠï¼Ÿ

A:
1. ç¡®ä¿å›¾åƒè´¨é‡è‰¯å¥½
2. è°ƒæ•´è¯­è¨€è®¾ç½® (`Options.OCR_LANGUAGE`)
3. ä½¿ç”¨é«˜åˆ†è¾¨ç‡çš„å›¾åƒ
4. å°è¯•å›¾åƒé¢„å¤„ç†ï¼ˆå¯¹æ¯”åº¦è°ƒæ•´ç­‰ï¼‰

## é¡¹ç›®ç»“æ„

```
solidvision/
â”œâ”€â”€ options/              # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â””â”€â”€ __init__.py
â”œâ”€â”€ aircv/               # å›¾åƒè¯†åˆ«æ¨¡å—
â”‚   â”œâ”€â”€ cv.py           # æ ¸å¿ƒåŒ¹é…æ¥å£
â”‚   â”œâ”€â”€ template_matching.py
â”‚   â”œâ”€â”€ keypoint_matching.py
â”‚   â””â”€â”€ ...
â”œâ”€â”€ orc/                # æ–‡å­—è¯†åˆ«æ¨¡å—
â”‚   â””â”€â”€ __init__.py
â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
```

## è®¸å¯è¯

Apache License 2.0

## åé¦ˆ

- é—®é¢˜åé¦ˆï¼šæäº¤ Issue
- å»ºè®®åé¦ˆï¼šæäº¤ Discussion
- Email: caishilong@exuils.com

## è‡´è°¢

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š
- [airtest](https://github.com/NetEase/airtest)
- [PaddleOCR](https://github.com/PaddlePaddle/PaddleOCR)
- [OpenCV](https://opencv.org/)

---

**ç«‹å³å¼€å§‹ä½¿ç”¨ Supervisionï¼** ğŸš€
