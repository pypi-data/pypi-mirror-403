# This file is auto-generated by the CDP protocol generator.
# Do not edit this file manually as your changes will be overwritten.
# Generated from Chrome DevTools Protocol specifications.

from __future__ import annotations

from typing import TYPE_CHECKING, Any, Literal

if TYPE_CHECKING:
    from cdpify.client import CDPClient

from cdpify.shared.decorators import deprecated

from .commands import (
    PageCommand,
    AddCompilationCacheParams,
    AddScriptToEvaluateOnLoadParams,
    AddScriptToEvaluateOnLoadResult,
    AddScriptToEvaluateOnNewDocumentParams,
    AddScriptToEvaluateOnNewDocumentResult,
    CaptureScreenshotParams,
    CaptureScreenshotResult,
    CaptureSnapshotParams,
    CaptureSnapshotResult,
    CreateIsolatedWorldParams,
    CreateIsolatedWorldResult,
    DeleteCookieParams,
    EnableParams,
    GenerateTestReportParams,
    GetAdScriptAncestryParams,
    GetAdScriptAncestryResult,
    GetAnnotatedPageContentParams,
    GetAnnotatedPageContentResult,
    GetAppIdResult,
    GetAppManifestParams,
    GetAppManifestResult,
    GetFrameTreeResult,
    GetInstallabilityErrorsResult,
    GetLayoutMetricsResult,
    GetManifestIconsResult,
    GetNavigationHistoryResult,
    GetOriginTrialsParams,
    GetOriginTrialsResult,
    GetPermissionsPolicyStateParams,
    GetPermissionsPolicyStateResult,
    GetResourceContentParams,
    GetResourceContentResult,
    GetResourceTreeResult,
    HandleJavaScriptDialogParams,
    NavigateParams,
    NavigateResult,
    NavigateToHistoryEntryParams,
    PrintToPDFParams,
    PrintToPDFResult,
    ProduceCompilationCacheParams,
    ReloadParams,
    RemoveScriptToEvaluateOnLoadParams,
    RemoveScriptToEvaluateOnNewDocumentParams,
    ScreencastFrameAckParams,
    SearchInResourceParams,
    SearchInResourceResult,
    SetAdBlockingEnabledParams,
    SetBypassCSPParams,
    SetDeviceMetricsOverrideParams,
    SetDeviceOrientationOverrideParams,
    SetDocumentContentParams,
    SetDownloadBehaviorParams,
    SetFontFamiliesParams,
    SetFontSizesParams,
    SetGeolocationOverrideParams,
    SetInterceptFileChooserDialogParams,
    SetLifecycleEventsEnabledParams,
    SetPrerenderingAllowedParams,
    SetRPHRegistrationModeParams,
    SetSPCTransactionModeParams,
    SetTouchEmulationEnabledParams,
    SetWebLifecycleStateParams,
    StartScreencastParams,
)

from .types import (
    CompilationCacheParams,
    FontFamilies,
    FontSizes,
    FrameId,
    ReferrerPolicy,
    ScriptFontFamilies,
    ScriptIdentifier,
    TransitionType,
    Viewport,
)

if TYPE_CHECKING:
    from cdpify.domains import emulation, network


class PageClient:
    def __init__(self, client: CDPClient) -> None:
        self._client = client

    @deprecated()
    async def add_script_to_evaluate_on_load(
        self,
        *,
        script_source: str,
        session_id: str | None = None,
    ) -> AddScriptToEvaluateOnLoadResult:
        """
        Deprecated, please use addScriptToEvaluateOnNewDocument instead.
        """
        params = AddScriptToEvaluateOnLoadParams(script_source=script_source)

        result = await self._client.send_raw(
            method=PageCommand.ADD_SCRIPT_TO_EVALUATE_ON_LOAD,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return AddScriptToEvaluateOnLoadResult.from_cdp(result)

    async def add_script_to_evaluate_on_new_document(
        self,
        *,
        source: str,
        world_name: str | None = None,
        include_command_line_api: bool | None = None,
        run_immediately: bool | None = None,
        session_id: str | None = None,
    ) -> AddScriptToEvaluateOnNewDocumentResult:
        """
        Evaluates given script in every frame upon creation (before loading frame's
        scripts).
        """
        params = AddScriptToEvaluateOnNewDocumentParams(
            source=source,
            world_name=world_name,
            include_command_line_api=include_command_line_api,
            run_immediately=run_immediately,
        )

        result = await self._client.send_raw(
            method=PageCommand.ADD_SCRIPT_TO_EVALUATE_ON_NEW_DOCUMENT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return AddScriptToEvaluateOnNewDocumentResult.from_cdp(result)

    async def bring_to_front(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Brings page to front (activates tab).
        """
        result = await self._client.send_raw(
            method=PageCommand.BRING_TO_FRONT,
            params=None,
            session_id=session_id,
        )
        return result

    async def capture_screenshot(
        self,
        *,
        format: Literal["jpeg", "png", "webp"] | None = None,
        quality: int | None = None,
        clip: Viewport | None = None,
        from_surface: bool | None = None,
        capture_beyond_viewport: bool | None = None,
        optimize_for_speed: bool | None = None,
        session_id: str | None = None,
    ) -> CaptureScreenshotResult:
        """
        Capture page screenshot.
        """
        params = CaptureScreenshotParams(
            format=format,
            quality=quality,
            clip=clip,
            from_surface=from_surface,
            capture_beyond_viewport=capture_beyond_viewport,
            optimize_for_speed=optimize_for_speed,
        )

        result = await self._client.send_raw(
            method=PageCommand.CAPTURE_SCREENSHOT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return CaptureScreenshotResult.from_cdp(result)

    async def capture_snapshot(
        self,
        *,
        format: Literal["mhtml"] | None = None,
        session_id: str | None = None,
    ) -> CaptureSnapshotResult:
        """
        Returns a snapshot of the page as a string. For MHTML format, the serialization
        includes iframes, shadow DOM, external resources, and element-inline styles.
        """
        params = CaptureSnapshotParams(format=format)

        result = await self._client.send_raw(
            method=PageCommand.CAPTURE_SNAPSHOT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return CaptureSnapshotResult.from_cdp(result)

    @deprecated()
    async def clear_device_metrics_override(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Clears the overridden device metrics.
        """
        result = await self._client.send_raw(
            method=PageCommand.CLEAR_DEVICE_METRICS_OVERRIDE,
            params=None,
            session_id=session_id,
        )
        return result

    @deprecated()
    async def clear_device_orientation_override(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Clears the overridden Device Orientation.
        """
        result = await self._client.send_raw(
            method=PageCommand.CLEAR_DEVICE_ORIENTATION_OVERRIDE,
            params=None,
            session_id=session_id,
        )
        return result

    @deprecated()
    async def clear_geolocation_override(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Clears the overridden Geolocation Position and Error.
        """
        result = await self._client.send_raw(
            method=PageCommand.CLEAR_GEOLOCATION_OVERRIDE,
            params=None,
            session_id=session_id,
        )
        return result

    async def create_isolated_world(
        self,
        *,
        frame_id: FrameId,
        world_name: str | None = None,
        grant_univeral_access: bool | None = None,
        session_id: str | None = None,
    ) -> CreateIsolatedWorldResult:
        """
        Creates an isolated world for the given frame.
        """
        params = CreateIsolatedWorldParams(
            frame_id=frame_id,
            world_name=world_name,
            grant_univeral_access=grant_univeral_access,
        )

        result = await self._client.send_raw(
            method=PageCommand.CREATE_ISOLATED_WORLD,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return CreateIsolatedWorldResult.from_cdp(result)

    @deprecated()
    async def delete_cookie(
        self,
        *,
        cookie_name: str,
        url: str,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Deletes browser cookie with given name, domain and path.
        """
        params = DeleteCookieParams(cookie_name=cookie_name, url=url)

        result = await self._client.send_raw(
            method=PageCommand.DELETE_COOKIE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def disable(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Disables page domain notifications.
        """
        result = await self._client.send_raw(
            method=PageCommand.DISABLE,
            params=None,
            session_id=session_id,
        )
        return result

    async def enable(
        self,
        *,
        enable_file_chooser_opened_event: bool | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Enables page domain notifications.
        """
        params = EnableParams(
            enable_file_chooser_opened_event=enable_file_chooser_opened_event
        )

        result = await self._client.send_raw(
            method=PageCommand.ENABLE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def get_app_manifest(
        self,
        *,
        manifest_id: str | None = None,
        session_id: str | None = None,
    ) -> GetAppManifestResult:
        """
        Gets the processed manifest for this current document. This API always waits
        for the manifest to be loaded. If manifestId is provided, and it does not match
        the manifest of the current document, this API errors out. If there is not a
        loaded page, this API errors out immediately.
        """
        params = GetAppManifestParams(manifest_id=manifest_id)

        result = await self._client.send_raw(
            method=PageCommand.GET_APP_MANIFEST,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetAppManifestResult.from_cdp(result)

    async def get_installability_errors(
        self,
        session_id: str | None = None,
    ) -> GetInstallabilityErrorsResult:
        result = await self._client.send_raw(
            method=PageCommand.GET_INSTALLABILITY_ERRORS,
            params=None,
            session_id=session_id,
        )
        return GetInstallabilityErrorsResult.from_cdp(result)

    @deprecated()
    async def get_manifest_icons(
        self,
        session_id: str | None = None,
    ) -> GetManifestIconsResult:
        """
        Deprecated because it's not guaranteed that the returned icon is in fact the
        one used for PWA installation.
        """
        result = await self._client.send_raw(
            method=PageCommand.GET_MANIFEST_ICONS,
            params=None,
            session_id=session_id,
        )
        return GetManifestIconsResult.from_cdp(result)

    async def get_app_id(
        self,
        session_id: str | None = None,
    ) -> GetAppIdResult:
        """
        Returns the unique (PWA) app id. Only returns values if the feature flag
        'WebAppEnableManifestId' is enabled
        """
        result = await self._client.send_raw(
            method=PageCommand.GET_APP_ID,
            params=None,
            session_id=session_id,
        )
        return GetAppIdResult.from_cdp(result)

    async def get_ad_script_ancestry(
        self,
        *,
        frame_id: FrameId,
        session_id: str | None = None,
    ) -> GetAdScriptAncestryResult:
        params = GetAdScriptAncestryParams(frame_id=frame_id)

        result = await self._client.send_raw(
            method=PageCommand.GET_AD_SCRIPT_ANCESTRY,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetAdScriptAncestryResult.from_cdp(result)

    async def get_frame_tree(
        self,
        session_id: str | None = None,
    ) -> GetFrameTreeResult:
        """
        Returns present frame tree structure.
        """
        result = await self._client.send_raw(
            method=PageCommand.GET_FRAME_TREE,
            params=None,
            session_id=session_id,
        )
        return GetFrameTreeResult.from_cdp(result)

    async def get_layout_metrics(
        self,
        session_id: str | None = None,
    ) -> GetLayoutMetricsResult:
        """
        Returns metrics relating to the layouting of the page, such as viewport
        bounds/scale.
        """
        result = await self._client.send_raw(
            method=PageCommand.GET_LAYOUT_METRICS,
            params=None,
            session_id=session_id,
        )
        return GetLayoutMetricsResult.from_cdp(result)

    async def get_navigation_history(
        self,
        session_id: str | None = None,
    ) -> GetNavigationHistoryResult:
        """
        Returns navigation history for the current page.
        """
        result = await self._client.send_raw(
            method=PageCommand.GET_NAVIGATION_HISTORY,
            params=None,
            session_id=session_id,
        )
        return GetNavigationHistoryResult.from_cdp(result)

    async def reset_navigation_history(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Resets navigation history for the current page.
        """
        result = await self._client.send_raw(
            method=PageCommand.RESET_NAVIGATION_HISTORY,
            params=None,
            session_id=session_id,
        )
        return result

    async def get_resource_content(
        self,
        *,
        frame_id: FrameId,
        url: str,
        session_id: str | None = None,
    ) -> GetResourceContentResult:
        """
        Returns content of the given resource.
        """
        params = GetResourceContentParams(frame_id=frame_id, url=url)

        result = await self._client.send_raw(
            method=PageCommand.GET_RESOURCE_CONTENT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetResourceContentResult.from_cdp(result)

    async def get_resource_tree(
        self,
        session_id: str | None = None,
    ) -> GetResourceTreeResult:
        """
        Returns present frame / resource tree structure.
        """
        result = await self._client.send_raw(
            method=PageCommand.GET_RESOURCE_TREE,
            params=None,
            session_id=session_id,
        )
        return GetResourceTreeResult.from_cdp(result)

    async def handle_java_script_dialog(
        self,
        *,
        accept: bool,
        prompt_text: str | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Accepts or dismisses a JavaScript initiated dialog (alert, confirm, prompt, or
        onbeforeunload).
        """
        params = HandleJavaScriptDialogParams(accept=accept, prompt_text=prompt_text)

        result = await self._client.send_raw(
            method=PageCommand.HANDLE_JAVA_SCRIPT_DIALOG,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def navigate(
        self,
        *,
        url: str,
        referrer: str | None = None,
        transition_type: TransitionType | None = None,
        frame_id: FrameId | None = None,
        referrer_policy: ReferrerPolicy | None = None,
        session_id: str | None = None,
    ) -> NavigateResult:
        """
        Navigates current page to the given URL.
        """
        params = NavigateParams(
            url=url,
            referrer=referrer,
            transition_type=transition_type,
            frame_id=frame_id,
            referrer_policy=referrer_policy,
        )

        result = await self._client.send_raw(
            method=PageCommand.NAVIGATE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return NavigateResult.from_cdp(result)

    async def navigate_to_history_entry(
        self,
        *,
        entry_id: int,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Navigates current page to the given history entry.
        """
        params = NavigateToHistoryEntryParams(entry_id=entry_id)

        result = await self._client.send_raw(
            method=PageCommand.NAVIGATE_TO_HISTORY_ENTRY,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def print_to_pdf(
        self,
        *,
        landscape: bool | None = None,
        display_header_footer: bool | None = None,
        print_background: bool | None = None,
        scale: float | None = None,
        paper_width: float | None = None,
        paper_height: float | None = None,
        margin_top: float | None = None,
        margin_bottom: float | None = None,
        margin_left: float | None = None,
        margin_right: float | None = None,
        page_ranges: str | None = None,
        header_template: str | None = None,
        footer_template: str | None = None,
        prefer_css_page_size: bool | None = None,
        transfer_mode: Literal["ReturnAsBase64", "ReturnAsStream"] | None = None,
        generate_tagged_pdf: bool | None = None,
        generate_document_outline: bool | None = None,
        session_id: str | None = None,
    ) -> PrintToPDFResult:
        """
        Print page as PDF.
        """
        params = PrintToPDFParams(
            landscape=landscape,
            display_header_footer=display_header_footer,
            print_background=print_background,
            scale=scale,
            paper_width=paper_width,
            paper_height=paper_height,
            margin_top=margin_top,
            margin_bottom=margin_bottom,
            margin_left=margin_left,
            margin_right=margin_right,
            page_ranges=page_ranges,
            header_template=header_template,
            footer_template=footer_template,
            prefer_css_page_size=prefer_css_page_size,
            transfer_mode=transfer_mode,
            generate_tagged_pdf=generate_tagged_pdf,
            generate_document_outline=generate_document_outline,
        )

        result = await self._client.send_raw(
            method=PageCommand.PRINT_TO_PDF,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return PrintToPDFResult.from_cdp(result)

    async def reload(
        self,
        *,
        ignore_cache: bool | None = None,
        script_to_evaluate_on_load: str | None = None,
        loader_id: network.LoaderId | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Reloads given page optionally ignoring the cache.
        """
        params = ReloadParams(
            ignore_cache=ignore_cache,
            script_to_evaluate_on_load=script_to_evaluate_on_load,
            loader_id=loader_id,
        )

        result = await self._client.send_raw(
            method=PageCommand.RELOAD,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    @deprecated()
    async def remove_script_to_evaluate_on_load(
        self,
        *,
        identifier: ScriptIdentifier,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Deprecated, please use removeScriptToEvaluateOnNewDocument instead.
        """
        params = RemoveScriptToEvaluateOnLoadParams(identifier=identifier)

        result = await self._client.send_raw(
            method=PageCommand.REMOVE_SCRIPT_TO_EVALUATE_ON_LOAD,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def remove_script_to_evaluate_on_new_document(
        self,
        *,
        identifier: ScriptIdentifier,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Removes given script from the list.
        """
        params = RemoveScriptToEvaluateOnNewDocumentParams(identifier=identifier)

        result = await self._client.send_raw(
            method=PageCommand.REMOVE_SCRIPT_TO_EVALUATE_ON_NEW_DOCUMENT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def screencast_frame_ack(
        self,
        *,
        screencast_frame_ack_session_id: int,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Acknowledges that a screencast frame has been received by the frontend.
        """
        params = ScreencastFrameAckParams(session_id=screencast_frame_ack_session_id)

        result = await self._client.send_raw(
            method=PageCommand.SCREENCAST_FRAME_ACK,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def search_in_resource(
        self,
        *,
        frame_id: FrameId,
        url: str,
        query: str,
        case_sensitive: bool | None = None,
        is_regex: bool | None = None,
        session_id: str | None = None,
    ) -> SearchInResourceResult:
        """
        Searches for given string in resource content.
        """
        params = SearchInResourceParams(
            frame_id=frame_id,
            url=url,
            query=query,
            case_sensitive=case_sensitive,
            is_regex=is_regex,
        )

        result = await self._client.send_raw(
            method=PageCommand.SEARCH_IN_RESOURCE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return SearchInResourceResult.from_cdp(result)

    async def set_ad_blocking_enabled(
        self,
        *,
        enabled: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Enable Chrome's experimental ad filter on all sites.
        """
        params = SetAdBlockingEnabledParams(enabled=enabled)

        result = await self._client.send_raw(
            method=PageCommand.SET_AD_BLOCKING_ENABLED,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_bypass_csp(
        self,
        *,
        enabled: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Enable page Content Security Policy by-passing.
        """
        params = SetBypassCSPParams(enabled=enabled)

        result = await self._client.send_raw(
            method=PageCommand.SET_BYPASS_CSP,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def get_permissions_policy_state(
        self,
        *,
        frame_id: FrameId,
        session_id: str | None = None,
    ) -> GetPermissionsPolicyStateResult:
        """
        Get Permissions Policy state on given frame.
        """
        params = GetPermissionsPolicyStateParams(frame_id=frame_id)

        result = await self._client.send_raw(
            method=PageCommand.GET_PERMISSIONS_POLICY_STATE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetPermissionsPolicyStateResult.from_cdp(result)

    async def get_origin_trials(
        self,
        *,
        frame_id: FrameId,
        session_id: str | None = None,
    ) -> GetOriginTrialsResult:
        """
        Get Origin Trials on given frame.
        """
        params = GetOriginTrialsParams(frame_id=frame_id)

        result = await self._client.send_raw(
            method=PageCommand.GET_ORIGIN_TRIALS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetOriginTrialsResult.from_cdp(result)

    @deprecated()
    async def set_device_metrics_override(
        self,
        *,
        width: int,
        height: int,
        device_scale_factor: float,
        mobile: bool,
        scale: float | None = None,
        screen_width: int | None = None,
        screen_height: int | None = None,
        position_x: int | None = None,
        position_y: int | None = None,
        dont_set_visible_size: bool | None = None,
        screen_orientation: emulation.ScreenOrientation | None = None,
        viewport: Viewport | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides the values of device screen dimensions (window.screen.width,
        window.screen.height, window.innerWidth, window.innerHeight, and
        "device-width"/"device-height"-related CSS media query results).
        """
        params = SetDeviceMetricsOverrideParams(
            width=width,
            height=height,
            device_scale_factor=device_scale_factor,
            mobile=mobile,
            scale=scale,
            screen_width=screen_width,
            screen_height=screen_height,
            position_x=position_x,
            position_y=position_y,
            dont_set_visible_size=dont_set_visible_size,
            screen_orientation=screen_orientation,
            viewport=viewport,
        )

        result = await self._client.send_raw(
            method=PageCommand.SET_DEVICE_METRICS_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    @deprecated()
    async def set_device_orientation_override(
        self,
        *,
        alpha: float,
        beta: float,
        gamma: float,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides the Device Orientation.
        """
        params = SetDeviceOrientationOverrideParams(alpha=alpha, beta=beta, gamma=gamma)

        result = await self._client.send_raw(
            method=PageCommand.SET_DEVICE_ORIENTATION_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_font_families(
        self,
        *,
        font_families: FontFamilies,
        for_scripts: list[ScriptFontFamilies] | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Set generic font families.
        """
        params = SetFontFamiliesParams(
            font_families=font_families, for_scripts=for_scripts
        )

        result = await self._client.send_raw(
            method=PageCommand.SET_FONT_FAMILIES,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_font_sizes(
        self,
        *,
        font_sizes: FontSizes,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Set default font sizes.
        """
        params = SetFontSizesParams(font_sizes=font_sizes)

        result = await self._client.send_raw(
            method=PageCommand.SET_FONT_SIZES,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_document_content(
        self,
        *,
        frame_id: FrameId,
        html: str,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Sets given markup as the document's HTML.
        """
        params = SetDocumentContentParams(frame_id=frame_id, html=html)

        result = await self._client.send_raw(
            method=PageCommand.SET_DOCUMENT_CONTENT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    @deprecated()
    async def set_download_behavior(
        self,
        *,
        behavior: Literal["deny", "allow", "default"],
        download_path: str | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Set the behavior when downloading a file.
        """
        params = SetDownloadBehaviorParams(
            behavior=behavior, download_path=download_path
        )

        result = await self._client.send_raw(
            method=PageCommand.SET_DOWNLOAD_BEHAVIOR,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    @deprecated()
    async def set_geolocation_override(
        self,
        *,
        latitude: float | None = None,
        longitude: float | None = None,
        accuracy: float | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides the Geolocation Position or Error. Omitting any of the parameters
        emulates position unavailable.
        """
        params = SetGeolocationOverrideParams(
            latitude=latitude, longitude=longitude, accuracy=accuracy
        )

        result = await self._client.send_raw(
            method=PageCommand.SET_GEOLOCATION_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_lifecycle_events_enabled(
        self,
        *,
        enabled: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Controls whether page will emit lifecycle events.
        """
        params = SetLifecycleEventsEnabledParams(enabled=enabled)

        result = await self._client.send_raw(
            method=PageCommand.SET_LIFECYCLE_EVENTS_ENABLED,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    @deprecated()
    async def set_touch_emulation_enabled(
        self,
        *,
        enabled: bool,
        configuration: Literal["mobile", "desktop"] | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Toggles mouse event-based touch event emulation.
        """
        params = SetTouchEmulationEnabledParams(
            enabled=enabled, configuration=configuration
        )

        result = await self._client.send_raw(
            method=PageCommand.SET_TOUCH_EMULATION_ENABLED,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def start_screencast(
        self,
        *,
        format: Literal["jpeg", "png"] | None = None,
        quality: int | None = None,
        max_width: int | None = None,
        max_height: int | None = None,
        every_nth_frame: int | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Starts sending each frame using the `screencastFrame` event.
        """
        params = StartScreencastParams(
            format=format,
            quality=quality,
            max_width=max_width,
            max_height=max_height,
            every_nth_frame=every_nth_frame,
        )

        result = await self._client.send_raw(
            method=PageCommand.START_SCREENCAST,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def stop_loading(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Force the page stop all navigations and pending resource fetches.
        """
        result = await self._client.send_raw(
            method=PageCommand.STOP_LOADING,
            params=None,
            session_id=session_id,
        )
        return result

    async def crash(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Crashes renderer on the IO thread, generates minidumps.
        """
        result = await self._client.send_raw(
            method=PageCommand.CRASH,
            params=None,
            session_id=session_id,
        )
        return result

    async def close(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Tries to close page, running its beforeunload hooks, if any.
        """
        result = await self._client.send_raw(
            method=PageCommand.CLOSE,
            params=None,
            session_id=session_id,
        )
        return result

    async def set_web_lifecycle_state(
        self,
        *,
        state: Literal["frozen", "active"],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Tries to update the web lifecycle state of the page. It will transition the
        page to the given state according to: https://github.com/WICG/web-lifecycle/
        """
        params = SetWebLifecycleStateParams(state=state)

        result = await self._client.send_raw(
            method=PageCommand.SET_WEB_LIFECYCLE_STATE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def stop_screencast(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Stops sending each frame in the `screencastFrame`.
        """
        result = await self._client.send_raw(
            method=PageCommand.STOP_SCREENCAST,
            params=None,
            session_id=session_id,
        )
        return result

    async def produce_compilation_cache(
        self,
        *,
        scripts: list[CompilationCacheParams],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Requests backend to produce compilation cache for the specified scripts.
        `scripts` are appended to the list of scripts for which the cache would be
        produced. The list may be reset during page navigation. When script with a
        matching URL is encountered, the cache is optionally produced upon backend
        discretion, based on internal heuristics. See also:
        `Page.compilationCacheProduced`.
        """
        params = ProduceCompilationCacheParams(scripts=scripts)

        result = await self._client.send_raw(
            method=PageCommand.PRODUCE_COMPILATION_CACHE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def add_compilation_cache(
        self,
        *,
        url: str,
        data: str,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Seeds compilation cache for given url. Compilation cache does not survive
        cross-process navigation.
        """
        params = AddCompilationCacheParams(url=url, data=data)

        result = await self._client.send_raw(
            method=PageCommand.ADD_COMPILATION_CACHE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def clear_compilation_cache(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Clears seeded compilation cache.
        """
        result = await self._client.send_raw(
            method=PageCommand.CLEAR_COMPILATION_CACHE,
            params=None,
            session_id=session_id,
        )
        return result

    async def set_spc_transaction_mode(
        self,
        *,
        mode: Literal[
            "none",
            "autoAccept",
            "autoChooseToAuthAnotherWay",
            "autoReject",
            "autoOptOut",
        ],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Sets the Secure Payment Confirmation transaction mode.
        https://w3c.github.io/secure-payment-confirmation/#sctn-automation-set-spc-transaction-mode
        """
        params = SetSPCTransactionModeParams(mode=mode)

        result = await self._client.send_raw(
            method=PageCommand.SET_SPC_TRANSACTION_MODE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_rph_registration_mode(
        self,
        *,
        mode: Literal["none", "autoAccept", "autoReject"],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Extensions for Custom Handlers API:
        https://html.spec.whatwg.org/multipage/system-state.html#rph-automation
        """
        params = SetRPHRegistrationModeParams(mode=mode)

        result = await self._client.send_raw(
            method=PageCommand.SET_RPH_REGISTRATION_MODE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def generate_test_report(
        self,
        *,
        message: str,
        group: str | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Generates a report for testing.
        """
        params = GenerateTestReportParams(message=message, group=group)

        result = await self._client.send_raw(
            method=PageCommand.GENERATE_TEST_REPORT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def wait_for_debugger(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Pauses page execution. Can be resumed using generic
        Runtime.runIfWaitingForDebugger.
        """
        result = await self._client.send_raw(
            method=PageCommand.WAIT_FOR_DEBUGGER,
            params=None,
            session_id=session_id,
        )
        return result

    async def set_intercept_file_chooser_dialog(
        self,
        *,
        enabled: bool,
        cancel: bool | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Intercept file chooser requests and transfer control to protocol clients. When
        file chooser interception is enabled, native file chooser dialog is not shown.
        Instead, a protocol event `Page.fileChooserOpened` is emitted.
        """
        params = SetInterceptFileChooserDialogParams(enabled=enabled, cancel=cancel)

        result = await self._client.send_raw(
            method=PageCommand.SET_INTERCEPT_FILE_CHOOSER_DIALOG,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_prerendering_allowed(
        self,
        *,
        is_allowed: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Enable/disable prerendering manually. This command is a short-term solution for
        https://crbug.com/1440085. See
        https://docs.google.com/document/d/12HVmFxYj5Jc-eJr5OmWsa2bqTJsbgGLKI6ZIyx0_wpA
        for more details. TODO(https://crbug.com/1440085): Remove this once Puppeteer
        supports tab targets.
        """
        params = SetPrerenderingAllowedParams(is_allowed=is_allowed)

        result = await self._client.send_raw(
            method=PageCommand.SET_PRERENDERING_ALLOWED,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def get_annotated_page_content(
        self,
        *,
        include_actionable_information: bool | None = None,
        session_id: str | None = None,
    ) -> GetAnnotatedPageContentResult:
        """
        Get the annotated page content for the main frame. This is an experimental
        command that is subject to change.
        """
        params = GetAnnotatedPageContentParams(
            include_actionable_information=include_actionable_information
        )

        result = await self._client.send_raw(
            method=PageCommand.GET_ANNOTATED_PAGE_CONTENT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetAnnotatedPageContentResult.from_cdp(result)
