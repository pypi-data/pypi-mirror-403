# This file is auto-generated by the CDP protocol generator.
# Do not edit this file manually as your changes will be overwritten.
# Generated from Chrome DevTools Protocol specifications.

from __future__ import annotations

from typing import Literal, TYPE_CHECKING
from dataclasses import dataclass
from enum import StrEnum
from cdpify.shared.models import CDPModel

from .types import (
    BackForwardCacheNotRestoredExplanation,
    BackForwardCacheNotRestoredExplanationTree,
    ClientNavigationDisposition,
    ClientNavigationReason,
    DialogType,
    Frame,
    FrameId,
    NavigationType,
    ScreencastFrameMetadata,
)

if TYPE_CHECKING:
    from cdpify.domains import dom, network, runtime


class PageEvent(StrEnum):
    DOM_CONTENT_EVENT_FIRED = "Page.domContentEventFired"
    FILE_CHOOSER_OPENED = "Page.fileChooserOpened"
    FRAME_ATTACHED = "Page.frameAttached"
    FRAME_CLEARED_SCHEDULED_NAVIGATION = "Page.frameClearedScheduledNavigation"
    FRAME_DETACHED = "Page.frameDetached"
    FRAME_SUBTREE_WILL_BE_DETACHED = "Page.frameSubtreeWillBeDetached"
    FRAME_NAVIGATED = "Page.frameNavigated"
    DOCUMENT_OPENED = "Page.documentOpened"
    FRAME_RESIZED = "Page.frameResized"
    FRAME_STARTED_NAVIGATING = "Page.frameStartedNavigating"
    FRAME_REQUESTED_NAVIGATION = "Page.frameRequestedNavigation"
    FRAME_SCHEDULED_NAVIGATION = "Page.frameScheduledNavigation"
    FRAME_STARTED_LOADING = "Page.frameStartedLoading"
    FRAME_STOPPED_LOADING = "Page.frameStoppedLoading"
    DOWNLOAD_WILL_BEGIN = "Page.downloadWillBegin"
    DOWNLOAD_PROGRESS = "Page.downloadProgress"
    INTERSTITIAL_HIDDEN = "Page.interstitialHidden"
    INTERSTITIAL_SHOWN = "Page.interstitialShown"
    JAVASCRIPT_DIALOG_CLOSED = "Page.javascriptDialogClosed"
    JAVASCRIPT_DIALOG_OPENING = "Page.javascriptDialogOpening"
    LIFECYCLE_EVENT = "Page.lifecycleEvent"
    BACK_FORWARD_CACHE_NOT_USED = "Page.backForwardCacheNotUsed"
    LOAD_EVENT_FIRED = "Page.loadEventFired"
    NAVIGATED_WITHIN_DOCUMENT = "Page.navigatedWithinDocument"
    SCREENCAST_FRAME = "Page.screencastFrame"
    SCREENCAST_VISIBILITY_CHANGED = "Page.screencastVisibilityChanged"
    WINDOW_OPEN = "Page.windowOpen"
    COMPILATION_CACHE_PRODUCED = "Page.compilationCacheProduced"


@dataclass(kw_only=True)
class DomContentEventFiredEvent(CDPModel):
    timestamp: network.MonotonicTime


@dataclass(kw_only=True)
class FileChooserOpenedEvent(CDPModel):
    """
    Emitted only when `page.interceptFileChooser` is enabled.
    """

    frame_id: FrameId
    mode: Literal["selectSingle", "selectMultiple"]
    backend_node_id: dom.BackendNodeId | None = None


@dataclass(kw_only=True)
class FrameAttachedEvent(CDPModel):
    """
    Fired when frame has been attached to its parent.
    """

    frame_id: FrameId
    parent_frame_id: FrameId
    stack: runtime.StackTrace | None = None


@dataclass(kw_only=True)
class FrameClearedScheduledNavigationEvent(CDPModel):
    """
    Fired when frame no longer has a scheduled navigation.
    """

    frame_id: FrameId


@dataclass(kw_only=True)
class FrameDetachedEvent(CDPModel):
    """
    Fired when frame has been detached from its parent.
    """

    frame_id: FrameId
    reason: Literal["remove", "swap"]


@dataclass(kw_only=True)
class FrameSubtreeWillBeDetachedEvent(CDPModel):
    """
    Fired before frame subtree is detached. Emitted before any frame of the subtree is
    actually detached.
    """

    frame_id: FrameId


@dataclass(kw_only=True)
class FrameNavigatedEvent(CDPModel):
    """
    Fired once navigation of the frame has completed. Frame is now associated with the
    new loader.
    """

    frame: Frame
    type: NavigationType


@dataclass(kw_only=True)
class DocumentOpenedEvent(CDPModel):
    """
    Fired when opening document to write to.
    """

    frame: Frame


@dataclass(kw_only=True)
class FrameResizedEvent(CDPModel):
    pass


@dataclass(kw_only=True)
class FrameStartedNavigatingEvent(CDPModel):
    """
    Fired when a navigation starts. This event is fired for both renderer-initiated and
    browser-initiated navigations. For renderer-initiated navigations, the event is
    fired after `frameRequestedNavigation`. Navigation may still be cancelled after the
    event is issued. Multiple events can be fired for a single navigation, for example,
    when a same-document navigation becomes a cross-document navigation (such as in the
    case of a frameset).
    """

    frame_id: FrameId
    url: str
    loader_id: network.LoaderId
    navigation_type: Literal[
        "reload",
        "reloadBypassingCache",
        "restore",
        "restoreWithPost",
        "historySameDocument",
        "historyDifferentDocument",
        "sameDocument",
        "differentDocument",
    ]


@dataclass(kw_only=True)
class FrameRequestedNavigationEvent(CDPModel):
    """
    Fired when a renderer-initiated navigation is requested. Navigation may still be
    cancelled after the event is issued.
    """

    frame_id: FrameId
    reason: ClientNavigationReason
    url: str
    disposition: ClientNavigationDisposition


@dataclass(kw_only=True)
class FrameScheduledNavigationEvent(CDPModel):
    """
    Fired when frame schedules a potential navigation.
    """

    frame_id: FrameId
    delay: float
    reason: ClientNavigationReason
    url: str


@dataclass(kw_only=True)
class FrameStartedLoadingEvent(CDPModel):
    """
    Fired when frame has started loading.
    """

    frame_id: FrameId


@dataclass(kw_only=True)
class FrameStoppedLoadingEvent(CDPModel):
    """
    Fired when frame has stopped loading.
    """

    frame_id: FrameId


@dataclass(kw_only=True)
class DownloadWillBeginEvent(CDPModel):
    """
    Fired when page is about to start a download. Deprecated. Use
    Browser.downloadWillBegin instead.
    """

    frame_id: FrameId
    guid: str
    url: str
    suggested_filename: str


@dataclass(kw_only=True)
class DownloadProgressEvent(CDPModel):
    """
    Fired when download makes progress. Last call has |done| == true. Deprecated. Use
    Browser.downloadProgress instead.
    """

    guid: str
    total_bytes: float
    received_bytes: float
    state: Literal["inProgress", "completed", "canceled"]


@dataclass(kw_only=True)
class InterstitialHiddenEvent(CDPModel):
    """
    Fired when interstitial page was hidden
    """

    pass


@dataclass(kw_only=True)
class InterstitialShownEvent(CDPModel):
    """
    Fired when interstitial page was shown
    """

    pass


@dataclass(kw_only=True)
class JavascriptDialogClosedEvent(CDPModel):
    """
    Fired when a JavaScript initiated dialog (alert, confirm, prompt, or
    onbeforeunload) has been closed.
    """

    frame_id: FrameId
    result: bool
    user_input: str


@dataclass(kw_only=True)
class JavascriptDialogOpeningEvent(CDPModel):
    """
    Fired when a JavaScript initiated dialog (alert, confirm, prompt, or
    onbeforeunload) is about to open.
    """

    url: str
    frame_id: FrameId
    message: str
    type: DialogType
    has_browser_handler: bool
    default_prompt: str | None | None = None


@dataclass(kw_only=True)
class LifecycleEventEvent(CDPModel):
    """
    Fired for lifecycle events (navigation, load, paint, etc) in the current target
    (including local frames).
    """

    frame_id: FrameId
    loader_id: network.LoaderId
    name: str
    timestamp: network.MonotonicTime


@dataclass(kw_only=True)
class BackForwardCacheNotUsedEvent(CDPModel):
    """
    Fired for failed bfcache history navigations if BackForwardCache feature is
    enabled. Do not assume any ordering with the Page.frameNavigated event. This event
    is fired only for main-frame history navigation where the document changes
    (non-same-document navigations), when bfcache navigation fails.
    """

    loader_id: network.LoaderId
    frame_id: FrameId
    not_restored_explanations: list[BackForwardCacheNotRestoredExplanation]
    not_restored_explanations_tree: (
        BackForwardCacheNotRestoredExplanationTree | None | None
    ) = None


@dataclass(kw_only=True)
class LoadEventFiredEvent(CDPModel):
    timestamp: network.MonotonicTime


@dataclass(kw_only=True)
class NavigatedWithinDocumentEvent(CDPModel):
    """
    Fired when same-document navigation happens, e.g. due to history API usage or
    anchor navigation.
    """

    frame_id: FrameId
    url: str
    navigation_type: Literal["fragment", "historyApi", "other"]


@dataclass(kw_only=True)
class ScreencastFrameEvent(CDPModel):
    """
    Compressed image data requested by the `startScreencast`.
    """

    data: str
    metadata: ScreencastFrameMetadata
    session_id: int


@dataclass(kw_only=True)
class ScreencastVisibilityChangedEvent(CDPModel):
    """
    Fired when the page with currently enabled screencast was shown or hidden `.
    """

    visible: bool


@dataclass(kw_only=True)
class WindowOpenEvent(CDPModel):
    """
    Fired when a new window is going to be opened, via window.open(), link click, form
    submission, etc.
    """

    url: str
    window_name: str
    window_features: list[str]
    user_gesture: bool


@dataclass(kw_only=True)
class CompilationCacheProducedEvent(CDPModel):
    """
    Issued for every compilation cache generated.
    """

    url: str
    data: str
