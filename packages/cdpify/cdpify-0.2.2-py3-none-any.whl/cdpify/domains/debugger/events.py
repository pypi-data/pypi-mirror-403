# This file is auto-generated by the CDP protocol generator.
# Do not edit this file manually as your changes will be overwritten.
# Generated from Chrome DevTools Protocol specifications.

from __future__ import annotations

from typing import Any, Literal, TYPE_CHECKING
from dataclasses import dataclass
from enum import StrEnum
from cdpify.shared.models import CDPModel

from .types import (
    BreakpointId,
    CallFrame,
    Location,
    ResolvedBreakpoint,
)

if TYPE_CHECKING:
    from cdpify.domains import debugger, runtime


class DebuggerEvent(StrEnum):
    BREAKPOINT_RESOLVED = "Debugger.breakpointResolved"
    PAUSED = "Debugger.paused"
    RESUMED = "Debugger.resumed"
    SCRIPT_FAILED_TO_PARSE = "Debugger.scriptFailedToParse"
    SCRIPT_PARSED = "Debugger.scriptParsed"


@dataclass(kw_only=True)
class BreakpointResolvedEvent(CDPModel):
    """
    Fired when breakpoint is resolved to an actual script and location. Deprecated in
    favor of `resolvedBreakpoints` in the `scriptParsed` event.
    """

    breakpoint_id: BreakpointId
    location: Location


@dataclass(kw_only=True)
class PausedEvent(CDPModel):
    """
    Fired when the virtual machine stopped on breakpoint or exception or any other stop
    criteria.
    """

    call_frames: list[CallFrame]
    reason: Literal[
        "ambiguous",
        "assert",
        "CSPViolation",
        "debugCommand",
        "DOM",
        "EventListener",
        "exception",
        "instrumentation",
        "OOM",
        "other",
        "promiseRejection",
        "XHR",
        "step",
    ]
    data: dict[str, Any] | None | None = None
    hit_breakpoints: list[str] | None | None = None
    async_stack_trace: runtime.StackTrace | None = None
    async_stack_trace_id: runtime.StackTraceId | None = None
    async_call_stack_trace_id: runtime.StackTraceId | None = None


@dataclass(kw_only=True)
class ResumedEvent(CDPModel):
    """
    Fired when the virtual machine resumed execution.
    """

    pass


@dataclass(kw_only=True)
class ScriptFailedToParseEvent(CDPModel):
    """
    Fired when virtual machine fails to parse the script.
    """

    script_id: runtime.ScriptId
    url: str
    start_line: int
    start_column: int
    end_line: int
    end_column: int
    execution_context_id: runtime.ExecutionContextId
    hash: str
    build_id: str
    execution_context_aux_data: dict[str, Any] | None | None = None
    source_map_url: str | None | None = None
    has_source_url: bool | None | None = None
    is_module: bool | None | None = None
    length: int | None | None = None
    stack_trace: runtime.StackTrace | None = None
    code_offset: int | None | None = None
    script_language: debugger.ScriptLanguage | None = None
    embedder_name: str | None | None = None


@dataclass(kw_only=True)
class ScriptParsedEvent(CDPModel):
    """
    Fired when virtual machine parses script. This event is also fired for all known
    and uncollected scripts upon enabling debugger.
    """

    script_id: runtime.ScriptId
    url: str
    start_line: int
    start_column: int
    end_line: int
    end_column: int
    execution_context_id: runtime.ExecutionContextId
    hash: str
    build_id: str
    execution_context_aux_data: dict[str, Any] | None | None = None
    is_live_edit: bool | None | None = None
    source_map_url: str | None | None = None
    has_source_url: bool | None | None = None
    is_module: bool | None | None = None
    length: int | None | None = None
    stack_trace: runtime.StackTrace | None = None
    code_offset: int | None | None = None
    script_language: debugger.ScriptLanguage | None = None
    debug_symbols: list[debugger.DebugSymbols] | None | None = None
    embedder_name: str | None | None = None
    resolved_breakpoints: list[ResolvedBreakpoint] | None | None = None
