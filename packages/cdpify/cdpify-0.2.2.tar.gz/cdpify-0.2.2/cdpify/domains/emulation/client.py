# This file is auto-generated by the CDP protocol generator.
# Do not edit this file manually as your changes will be overwritten.
# Generated from Chrome DevTools Protocol specifications.

from __future__ import annotations

from typing import TYPE_CHECKING, Any, Literal

if TYPE_CHECKING:
    from cdpify.client import CDPClient

from cdpify.shared.decorators import deprecated

from .commands import (
    EmulationCommand,
    AddScreenParams,
    AddScreenResult,
    CanEmulateResult,
    GetOverriddenSensorInformationParams,
    GetOverriddenSensorInformationResult,
    GetScreenInfosResult,
    RemoveScreenParams,
    SetAutoDarkModeOverrideParams,
    SetAutomationOverrideParams,
    SetCPUThrottlingRateParams,
    SetDataSaverOverrideParams,
    SetDefaultBackgroundColorOverrideParams,
    SetDeviceMetricsOverrideParams,
    SetDevicePostureOverrideParams,
    SetDisabledImageTypesParams,
    SetDisplayFeaturesOverrideParams,
    SetDocumentCookieDisabledParams,
    SetEmitTouchEventsForMouseParams,
    SetEmulatedMediaParams,
    SetEmulatedOSTextScaleParams,
    SetEmulatedVisionDeficiencyParams,
    SetFocusEmulationEnabledParams,
    SetGeolocationOverrideParams,
    SetHardwareConcurrencyOverrideParams,
    SetIdleOverrideParams,
    SetLocaleOverrideParams,
    SetNavigatorOverridesParams,
    SetPageScaleFactorParams,
    SetPressureDataOverrideParams,
    SetPressureSourceOverrideEnabledParams,
    SetPressureStateOverrideParams,
    SetSafeAreaInsetsOverrideParams,
    SetScriptExecutionDisabledParams,
    SetScrollbarsHiddenParams,
    SetSensorOverrideEnabledParams,
    SetSensorOverrideReadingsParams,
    SetSmallViewportHeightDifferenceOverrideParams,
    SetTimezoneOverrideParams,
    SetTouchEmulationEnabledParams,
    SetUserAgentOverrideParams,
    SetVirtualTimePolicyParams,
    SetVirtualTimePolicyResult,
    SetVisibleSizeParams,
)

from .types import (
    DevicePosture,
    DisabledImageType,
    DisplayFeature,
    MediaFeature,
    PressureMetadata,
    PressureSource,
    PressureState,
    SafeAreaInsets,
    ScreenId,
    ScreenOrientation,
    SensorMetadata,
    SensorReading,
    SensorType,
    UserAgentMetadata,
    VirtualTimePolicy,
    WorkAreaInsets,
)

if TYPE_CHECKING:
    from cdpify.domains import dom, network, page


class EmulationClient:
    def __init__(self, client: CDPClient) -> None:
        self._client = client

    @deprecated()
    async def can_emulate(
        self,
        session_id: str | None = None,
    ) -> CanEmulateResult:
        """
        Tells whether emulation is supported.
        """
        result = await self._client.send_raw(
            method=EmulationCommand.CAN_EMULATE,
            params=None,
            session_id=session_id,
        )
        return CanEmulateResult.from_cdp(result)

    async def clear_device_metrics_override(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Clears the overridden device metrics.
        """
        result = await self._client.send_raw(
            method=EmulationCommand.CLEAR_DEVICE_METRICS_OVERRIDE,
            params=None,
            session_id=session_id,
        )
        return result

    async def clear_geolocation_override(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Clears the overridden Geolocation Position and Error.
        """
        result = await self._client.send_raw(
            method=EmulationCommand.CLEAR_GEOLOCATION_OVERRIDE,
            params=None,
            session_id=session_id,
        )
        return result

    async def reset_page_scale_factor(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Requests that page scale factor is reset to initial values.
        """
        result = await self._client.send_raw(
            method=EmulationCommand.RESET_PAGE_SCALE_FACTOR,
            params=None,
            session_id=session_id,
        )
        return result

    async def set_focus_emulation_enabled(
        self,
        *,
        enabled: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Enables or disables simulating a focused and active page.
        """
        params = SetFocusEmulationEnabledParams(enabled=enabled)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_FOCUS_EMULATION_ENABLED,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_auto_dark_mode_override(
        self,
        *,
        enabled: bool | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Automatically render all web contents using a dark theme.
        """
        params = SetAutoDarkModeOverrideParams(enabled=enabled)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_AUTO_DARK_MODE_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_cpu_throttling_rate(
        self,
        *,
        rate: float,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Enables CPU throttling to emulate slow CPUs.
        """
        params = SetCPUThrottlingRateParams(rate=rate)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_CPU_THROTTLING_RATE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_default_background_color_override(
        self,
        *,
        color: dom.RGBA | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Sets or clears an override of the default background color of the frame. This
        override is used if the content does not specify one.
        """
        params = SetDefaultBackgroundColorOverrideParams(color=color)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_DEFAULT_BACKGROUND_COLOR_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_safe_area_insets_override(
        self,
        *,
        insets: SafeAreaInsets,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides the values for env(safe-area-inset-*) and env(safe-area-max-inset-*).
        Unset values will cause the respective variables to be undefined, even if
        previously overridden.
        """
        params = SetSafeAreaInsetsOverrideParams(insets=insets)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_SAFE_AREA_INSETS_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_device_metrics_override(
        self,
        *,
        width: int,
        height: int,
        device_scale_factor: float,
        mobile: bool,
        scale: float | None = None,
        screen_width: int | None = None,
        screen_height: int | None = None,
        position_x: int | None = None,
        position_y: int | None = None,
        dont_set_visible_size: bool | None = None,
        screen_orientation: ScreenOrientation | None = None,
        viewport: page.Viewport | None = None,
        display_feature: DisplayFeature | None = None,
        device_posture: DevicePosture | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides the values of device screen dimensions (window.screen.width,
        window.screen.height, window.innerWidth, window.innerHeight, and
        "device-width"/"device-height"-related CSS media query results).
        """
        params = SetDeviceMetricsOverrideParams(
            width=width,
            height=height,
            device_scale_factor=device_scale_factor,
            mobile=mobile,
            scale=scale,
            screen_width=screen_width,
            screen_height=screen_height,
            position_x=position_x,
            position_y=position_y,
            dont_set_visible_size=dont_set_visible_size,
            screen_orientation=screen_orientation,
            viewport=viewport,
            display_feature=display_feature,
            device_posture=device_posture,
        )

        result = await self._client.send_raw(
            method=EmulationCommand.SET_DEVICE_METRICS_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_device_posture_override(
        self,
        *,
        posture: DevicePosture,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Start reporting the given posture value to the Device Posture API. This
        override can also be set in setDeviceMetricsOverride().
        """
        params = SetDevicePostureOverrideParams(posture=posture)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_DEVICE_POSTURE_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def clear_device_posture_override(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Clears a device posture override set with either setDeviceMetricsOverride() or
        setDevicePostureOverride() and starts using posture information from the
        platform again. Does nothing if no override is set.
        """
        result = await self._client.send_raw(
            method=EmulationCommand.CLEAR_DEVICE_POSTURE_OVERRIDE,
            params=None,
            session_id=session_id,
        )
        return result

    async def set_display_features_override(
        self,
        *,
        features: list[DisplayFeature],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Start using the given display features to pupulate the Viewport Segments API.
        This override can also be set in setDeviceMetricsOverride().
        """
        params = SetDisplayFeaturesOverrideParams(features=features)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_DISPLAY_FEATURES_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def clear_display_features_override(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Clears the display features override set with either setDeviceMetricsOverride()
        or setDisplayFeaturesOverride() and starts using display features from the
        platform again. Does nothing if no override is set.
        """
        result = await self._client.send_raw(
            method=EmulationCommand.CLEAR_DISPLAY_FEATURES_OVERRIDE,
            params=None,
            session_id=session_id,
        )
        return result

    async def set_scrollbars_hidden(
        self,
        *,
        hidden: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetScrollbarsHiddenParams(hidden=hidden)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_SCROLLBARS_HIDDEN,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_document_cookie_disabled(
        self,
        *,
        disabled: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetDocumentCookieDisabledParams(disabled=disabled)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_DOCUMENT_COOKIE_DISABLED,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_emit_touch_events_for_mouse(
        self,
        *,
        enabled: bool,
        configuration: Literal["mobile", "desktop"] | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetEmitTouchEventsForMouseParams(
            enabled=enabled, configuration=configuration
        )

        result = await self._client.send_raw(
            method=EmulationCommand.SET_EMIT_TOUCH_EVENTS_FOR_MOUSE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_emulated_media(
        self,
        *,
        media: str | None = None,
        features: list[MediaFeature] | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Emulates the given media type or media feature for CSS media queries.
        """
        params = SetEmulatedMediaParams(media=media, features=features)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_EMULATED_MEDIA,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_emulated_vision_deficiency(
        self,
        *,
        type: Literal[
            "none",
            "blurredVision",
            "reducedContrast",
            "achromatopsia",
            "deuteranopia",
            "protanopia",
            "tritanopia",
        ],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Emulates the given vision deficiency.
        """
        params = SetEmulatedVisionDeficiencyParams(type=type)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_EMULATED_VISION_DEFICIENCY,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_emulated_os_text_scale(
        self,
        *,
        scale: float | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Emulates the given OS text scale.
        """
        params = SetEmulatedOSTextScaleParams(scale=scale)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_EMULATED_OS_TEXT_SCALE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_geolocation_override(
        self,
        *,
        latitude: float | None = None,
        longitude: float | None = None,
        accuracy: float | None = None,
        altitude: float | None = None,
        altitude_accuracy: float | None = None,
        heading: float | None = None,
        speed: float | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides the Geolocation Position or Error. Omitting latitude, longitude or
        accuracy emulates position unavailable.
        """
        params = SetGeolocationOverrideParams(
            latitude=latitude,
            longitude=longitude,
            accuracy=accuracy,
            altitude=altitude,
            altitude_accuracy=altitude_accuracy,
            heading=heading,
            speed=speed,
        )

        result = await self._client.send_raw(
            method=EmulationCommand.SET_GEOLOCATION_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def get_overridden_sensor_information(
        self,
        *,
        type: SensorType,
        session_id: str | None = None,
    ) -> GetOverriddenSensorInformationResult:
        params = GetOverriddenSensorInformationParams(type=type)

        result = await self._client.send_raw(
            method=EmulationCommand.GET_OVERRIDDEN_SENSOR_INFORMATION,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetOverriddenSensorInformationResult.from_cdp(result)

    async def set_sensor_override_enabled(
        self,
        *,
        enabled: bool,
        type: SensorType,
        metadata: SensorMetadata | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides a platform sensor of a given type. If |enabled| is true, calls to
        Sensor.start() will use a virtual sensor as backend rather than fetching data
        from a real hardware sensor. Otherwise, existing virtual sensor-backend Sensor
        objects will fire an error event and new calls to Sensor.start() will attempt to
        use a real sensor instead.
        """
        params = SetSensorOverrideEnabledParams(
            enabled=enabled, type=type, metadata=metadata
        )

        result = await self._client.send_raw(
            method=EmulationCommand.SET_SENSOR_OVERRIDE_ENABLED,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_sensor_override_readings(
        self,
        *,
        type: SensorType,
        reading: SensorReading,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Updates the sensor readings reported by a sensor type previously overridden by
        setSensorOverrideEnabled.
        """
        params = SetSensorOverrideReadingsParams(type=type, reading=reading)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_SENSOR_OVERRIDE_READINGS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_pressure_source_override_enabled(
        self,
        *,
        enabled: bool,
        source: PressureSource,
        metadata: PressureMetadata | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides a pressure source of a given type, as used by the Compute Pressure
        API, so that updates to PressureObserver.observe() are provided via
        setPressureStateOverride instead of being retrieved from platform-provided
        telemetry data.
        """
        params = SetPressureSourceOverrideEnabledParams(
            enabled=enabled, source=source, metadata=metadata
        )

        result = await self._client.send_raw(
            method=EmulationCommand.SET_PRESSURE_SOURCE_OVERRIDE_ENABLED,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_pressure_state_override(
        self,
        *,
        source: PressureSource,
        state: PressureState,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        TODO: OBSOLETE: To remove when setPressureDataOverride is merged. Provides a
        given pressure state that will be processed and eventually be delivered to
        PressureObserver users. |source| must have been previously overridden by
        setPressureSourceOverrideEnabled.
        """
        params = SetPressureStateOverrideParams(source=source, state=state)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_PRESSURE_STATE_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_pressure_data_override(
        self,
        *,
        source: PressureSource,
        state: PressureState,
        own_contribution_estimate: float | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Provides a given pressure data set that will be processed and eventually be
        delivered to PressureObserver users. |source| must have been previously
        overridden by setPressureSourceOverrideEnabled.
        """
        params = SetPressureDataOverrideParams(
            source=source,
            state=state,
            own_contribution_estimate=own_contribution_estimate,
        )

        result = await self._client.send_raw(
            method=EmulationCommand.SET_PRESSURE_DATA_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_idle_override(
        self,
        *,
        is_user_active: bool,
        is_screen_unlocked: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides the Idle state.
        """
        params = SetIdleOverrideParams(
            is_user_active=is_user_active, is_screen_unlocked=is_screen_unlocked
        )

        result = await self._client.send_raw(
            method=EmulationCommand.SET_IDLE_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def clear_idle_override(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Clears Idle state overrides.
        """
        result = await self._client.send_raw(
            method=EmulationCommand.CLEAR_IDLE_OVERRIDE,
            params=None,
            session_id=session_id,
        )
        return result

    @deprecated()
    async def set_navigator_overrides(
        self,
        *,
        platform: str,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides value returned by the javascript navigator object.
        """
        params = SetNavigatorOverridesParams(platform=platform)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_NAVIGATOR_OVERRIDES,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_page_scale_factor(
        self,
        *,
        page_scale_factor: float,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Sets a specified page scale factor.
        """
        params = SetPageScaleFactorParams(page_scale_factor=page_scale_factor)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_PAGE_SCALE_FACTOR,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_script_execution_disabled(
        self,
        *,
        value: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Switches script execution in the page.
        """
        params = SetScriptExecutionDisabledParams(value=value)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_SCRIPT_EXECUTION_DISABLED,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_touch_emulation_enabled(
        self,
        *,
        enabled: bool,
        max_touch_points: int | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Enables touch on platforms which do not support them.
        """
        params = SetTouchEmulationEnabledParams(
            enabled=enabled, max_touch_points=max_touch_points
        )

        result = await self._client.send_raw(
            method=EmulationCommand.SET_TOUCH_EMULATION_ENABLED,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_virtual_time_policy(
        self,
        *,
        policy: VirtualTimePolicy,
        budget: float | None = None,
        max_virtual_time_task_starvation_count: int | None = None,
        initial_virtual_time: network.TimeSinceEpoch | None = None,
        session_id: str | None = None,
    ) -> SetVirtualTimePolicyResult:
        """
        Turns on virtual time for all frames (replacing real-time with a synthetic time
        source) and sets the current virtual time policy. Note this supersedes any
        previous time budget.
        """
        params = SetVirtualTimePolicyParams(
            policy=policy,
            budget=budget,
            max_virtual_time_task_starvation_count=max_virtual_time_task_starvation_count,
            initial_virtual_time=initial_virtual_time,
        )

        result = await self._client.send_raw(
            method=EmulationCommand.SET_VIRTUAL_TIME_POLICY,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return SetVirtualTimePolicyResult.from_cdp(result)

    async def set_locale_override(
        self,
        *,
        locale: str | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides default host system locale with the specified one.
        """
        params = SetLocaleOverrideParams(locale=locale)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_LOCALE_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_timezone_override(
        self,
        *,
        timezone_id: str,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Overrides default host system timezone with the specified one.
        """
        params = SetTimezoneOverrideParams(timezone_id=timezone_id)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_TIMEZONE_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    @deprecated()
    async def set_visible_size(
        self,
        *,
        width: int,
        height: int,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Resizes the frame/viewport of the page. Note that this does not affect the
        frame's container (e.g. browser window). Can be used to produce screenshots of
        the specified size. Not supported on Android.
        """
        params = SetVisibleSizeParams(width=width, height=height)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_VISIBLE_SIZE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_disabled_image_types(
        self,
        *,
        image_types: list[DisabledImageType],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetDisabledImageTypesParams(image_types=image_types)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_DISABLED_IMAGE_TYPES,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_data_saver_override(
        self,
        *,
        data_saver_enabled: bool | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Override the value of navigator.connection.saveData
        """
        params = SetDataSaverOverrideParams(data_saver_enabled=data_saver_enabled)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_DATA_SAVER_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_hardware_concurrency_override(
        self,
        *,
        hardware_concurrency: int,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetHardwareConcurrencyOverrideParams(
            hardware_concurrency=hardware_concurrency
        )

        result = await self._client.send_raw(
            method=EmulationCommand.SET_HARDWARE_CONCURRENCY_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_user_agent_override(
        self,
        *,
        user_agent: str,
        accept_language: str | None = None,
        platform: str | None = None,
        user_agent_metadata: UserAgentMetadata | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Allows overriding user agent with the given string. `userAgentMetadata` must be
        set for Client Hint headers to be sent.
        """
        params = SetUserAgentOverrideParams(
            user_agent=user_agent,
            accept_language=accept_language,
            platform=platform,
            user_agent_metadata=user_agent_metadata,
        )

        result = await self._client.send_raw(
            method=EmulationCommand.SET_USER_AGENT_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_automation_override(
        self,
        *,
        enabled: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Allows overriding the automation flag.
        """
        params = SetAutomationOverrideParams(enabled=enabled)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_AUTOMATION_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_small_viewport_height_difference_override(
        self,
        *,
        difference: int,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Allows overriding the difference between the small and large viewport sizes,
        which determine the value of the `svh` and `lvh` unit, respectively. Only
        supported for top-level frames.
        """
        params = SetSmallViewportHeightDifferenceOverrideParams(difference=difference)

        result = await self._client.send_raw(
            method=EmulationCommand.SET_SMALL_VIEWPORT_HEIGHT_DIFFERENCE_OVERRIDE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def get_screen_infos(
        self,
        session_id: str | None = None,
    ) -> GetScreenInfosResult:
        """
        Returns device's screen configuration.
        """
        result = await self._client.send_raw(
            method=EmulationCommand.GET_SCREEN_INFOS,
            params=None,
            session_id=session_id,
        )
        return GetScreenInfosResult.from_cdp(result)

    async def add_screen(
        self,
        *,
        left: int,
        top: int,
        width: int,
        height: int,
        work_area_insets: WorkAreaInsets | None = None,
        device_pixel_ratio: float | None = None,
        rotation: int | None = None,
        color_depth: int | None = None,
        label: str | None = None,
        is_internal: bool | None = None,
        session_id: str | None = None,
    ) -> AddScreenResult:
        """
        Add a new screen to the device. Only supported in headless mode.
        """
        params = AddScreenParams(
            left=left,
            top=top,
            width=width,
            height=height,
            work_area_insets=work_area_insets,
            device_pixel_ratio=device_pixel_ratio,
            rotation=rotation,
            color_depth=color_depth,
            label=label,
            is_internal=is_internal,
        )

        result = await self._client.send_raw(
            method=EmulationCommand.ADD_SCREEN,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return AddScreenResult.from_cdp(result)

    async def remove_screen(
        self,
        *,
        screen_id: ScreenId,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Remove screen from the device. Only supported in headless mode.
        """
        params = RemoveScreenParams(screen_id=screen_id)

        result = await self._client.send_raw(
            method=EmulationCommand.REMOVE_SCREEN,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result
