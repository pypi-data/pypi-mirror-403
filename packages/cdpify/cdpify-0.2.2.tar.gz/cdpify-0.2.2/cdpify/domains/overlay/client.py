# This file is auto-generated by the CDP protocol generator.
# Do not edit this file manually as your changes will be overwritten.
# Generated from Chrome DevTools Protocol specifications.

from __future__ import annotations

from typing import TYPE_CHECKING, Any

if TYPE_CHECKING:
    from cdpify.client import CDPClient

from cdpify.shared.decorators import deprecated

from .commands import (
    OverlayCommand,
    GetGridHighlightObjectsForTestParams,
    GetGridHighlightObjectsForTestResult,
    GetHighlightObjectForTestParams,
    GetHighlightObjectForTestResult,
    GetSourceOrderHighlightObjectForTestParams,
    GetSourceOrderHighlightObjectForTestResult,
    HighlightFrameParams,
    HighlightNodeParams,
    HighlightQuadParams,
    HighlightRectParams,
    HighlightSourceOrderParams,
    SetInspectModeParams,
    SetPausedInDebuggerMessageParams,
    SetShowAdHighlightsParams,
    SetShowContainerQueryOverlaysParams,
    SetShowDebugBordersParams,
    SetShowFPSCounterParams,
    SetShowFlexOverlaysParams,
    SetShowGridOverlaysParams,
    SetShowHingeParams,
    SetShowHitTestBordersParams,
    SetShowIsolatedElementsParams,
    SetShowLayoutShiftRegionsParams,
    SetShowPaintRectsParams,
    SetShowScrollBottleneckRectsParams,
    SetShowScrollSnapOverlaysParams,
    SetShowViewportSizeOnResizeParams,
    SetShowWebVitalsParams,
    SetShowWindowControlsOverlayParams,
)

from .types import (
    ColorFormat,
    ContainerQueryHighlightConfig,
    FlexNodeHighlightConfig,
    GridNodeHighlightConfig,
    HighlightConfig,
    HingeConfig,
    InspectMode,
    IsolatedElementHighlightConfig,
    ScrollSnapHighlightConfig,
    SourceOrderConfig,
    WindowControlsOverlayConfig,
)

if TYPE_CHECKING:
    from cdpify.domains import dom, page, runtime


class OverlayClient:
    def __init__(self, client: CDPClient) -> None:
        self._client = client

    async def disable(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Disables domain notifications.
        """
        result = await self._client.send_raw(
            method=OverlayCommand.DISABLE,
            params=None,
            session_id=session_id,
        )
        return result

    async def enable(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Enables domain notifications.
        """
        result = await self._client.send_raw(
            method=OverlayCommand.ENABLE,
            params=None,
            session_id=session_id,
        )
        return result

    async def get_highlight_object_for_test(
        self,
        *,
        node_id: dom.NodeId,
        include_distance: bool | None = None,
        include_style: bool | None = None,
        color_format: ColorFormat | None = None,
        show_accessibility_info: bool | None = None,
        session_id: str | None = None,
    ) -> GetHighlightObjectForTestResult:
        """
        For testing.
        """
        params = GetHighlightObjectForTestParams(
            node_id=node_id,
            include_distance=include_distance,
            include_style=include_style,
            color_format=color_format,
            show_accessibility_info=show_accessibility_info,
        )

        result = await self._client.send_raw(
            method=OverlayCommand.GET_HIGHLIGHT_OBJECT_FOR_TEST,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetHighlightObjectForTestResult.from_cdp(result)

    async def get_grid_highlight_objects_for_test(
        self,
        *,
        node_ids: list[dom.NodeId],
        session_id: str | None = None,
    ) -> GetGridHighlightObjectsForTestResult:
        """
        For Persistent Grid testing.
        """
        params = GetGridHighlightObjectsForTestParams(node_ids=node_ids)

        result = await self._client.send_raw(
            method=OverlayCommand.GET_GRID_HIGHLIGHT_OBJECTS_FOR_TEST,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetGridHighlightObjectsForTestResult.from_cdp(result)

    async def get_source_order_highlight_object_for_test(
        self,
        *,
        node_id: dom.NodeId,
        session_id: str | None = None,
    ) -> GetSourceOrderHighlightObjectForTestResult:
        """
        For Source Order Viewer testing.
        """
        params = GetSourceOrderHighlightObjectForTestParams(node_id=node_id)

        result = await self._client.send_raw(
            method=OverlayCommand.GET_SOURCE_ORDER_HIGHLIGHT_OBJECT_FOR_TEST,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return GetSourceOrderHighlightObjectForTestResult.from_cdp(result)

    async def hide_highlight(
        self,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Hides any highlight.
        """
        result = await self._client.send_raw(
            method=OverlayCommand.HIDE_HIGHLIGHT,
            params=None,
            session_id=session_id,
        )
        return result

    @deprecated()
    async def highlight_frame(
        self,
        *,
        frame_id: page.FrameId,
        content_color: dom.RGBA | None = None,
        content_outline_color: dom.RGBA | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Highlights owner element of the frame with given id. Deprecated: Doesn't work
        reliably and cannot be fixed due to process separation (the owner node might be
        in a different process). Determine the owner node in the client and use
        highlightNode.
        """
        params = HighlightFrameParams(
            frame_id=frame_id,
            content_color=content_color,
            content_outline_color=content_outline_color,
        )

        result = await self._client.send_raw(
            method=OverlayCommand.HIGHLIGHT_FRAME,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def highlight_node(
        self,
        *,
        highlight_config: HighlightConfig,
        node_id: dom.NodeId | None = None,
        backend_node_id: dom.BackendNodeId | None = None,
        object_id: runtime.RemoteObjectId | None = None,
        selector: str | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Highlights DOM node with given id or with the given JavaScript object wrapper.
        Either nodeId or objectId must be specified.
        """
        params = HighlightNodeParams(
            highlight_config=highlight_config,
            node_id=node_id,
            backend_node_id=backend_node_id,
            object_id=object_id,
            selector=selector,
        )

        result = await self._client.send_raw(
            method=OverlayCommand.HIGHLIGHT_NODE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def highlight_quad(
        self,
        *,
        quad: dom.Quad,
        color: dom.RGBA | None = None,
        outline_color: dom.RGBA | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Highlights given quad. Coordinates are absolute with respect to the main frame
        viewport.
        """
        params = HighlightQuadParams(
            quad=quad, color=color, outline_color=outline_color
        )

        result = await self._client.send_raw(
            method=OverlayCommand.HIGHLIGHT_QUAD,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def highlight_rect(
        self,
        *,
        x: int,
        y: int,
        width: int,
        height: int,
        color: dom.RGBA | None = None,
        outline_color: dom.RGBA | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Highlights given rectangle. Coordinates are absolute with respect to the main
        frame viewport. Issue: the method does not handle device pixel ratio (DPR)
        correctly. The coordinates currently have to be adjusted by the client if DPR is
        not 1 (see crbug.com/437807128).
        """
        params = HighlightRectParams(
            x=x,
            y=y,
            width=width,
            height=height,
            color=color,
            outline_color=outline_color,
        )

        result = await self._client.send_raw(
            method=OverlayCommand.HIGHLIGHT_RECT,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def highlight_source_order(
        self,
        *,
        source_order_config: SourceOrderConfig,
        node_id: dom.NodeId | None = None,
        backend_node_id: dom.BackendNodeId | None = None,
        object_id: runtime.RemoteObjectId | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Highlights the source order of the children of the DOM node with given id or
        with the given JavaScript object wrapper. Either nodeId or objectId must be
        specified.
        """
        params = HighlightSourceOrderParams(
            source_order_config=source_order_config,
            node_id=node_id,
            backend_node_id=backend_node_id,
            object_id=object_id,
        )

        result = await self._client.send_raw(
            method=OverlayCommand.HIGHLIGHT_SOURCE_ORDER,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_inspect_mode(
        self,
        *,
        mode: InspectMode,
        highlight_config: HighlightConfig | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Enters the 'inspect' mode. In this mode, elements that user is hovering over
        are highlighted. Backend then generates 'inspectNodeRequested' event upon
        element selection.
        """
        params = SetInspectModeParams(mode=mode, highlight_config=highlight_config)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_INSPECT_MODE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_ad_highlights(
        self,
        *,
        show: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Highlights owner element of all frames detected to be ads.
        """
        params = SetShowAdHighlightsParams(show=show)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_AD_HIGHLIGHTS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_paused_in_debugger_message(
        self,
        *,
        message: str | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetPausedInDebuggerMessageParams(message=message)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_PAUSED_IN_DEBUGGER_MESSAGE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_debug_borders(
        self,
        *,
        show: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Requests that backend shows debug borders on layers
        """
        params = SetShowDebugBordersParams(show=show)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_DEBUG_BORDERS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_fps_counter(
        self,
        *,
        show: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Requests that backend shows the FPS counter
        """
        params = SetShowFPSCounterParams(show=show)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_FPS_COUNTER,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_grid_overlays(
        self,
        *,
        grid_node_highlight_configs: list[GridNodeHighlightConfig],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Highlight multiple elements with the CSS Grid overlay.
        """
        params = SetShowGridOverlaysParams(
            grid_node_highlight_configs=grid_node_highlight_configs
        )

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_GRID_OVERLAYS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_flex_overlays(
        self,
        *,
        flex_node_highlight_configs: list[FlexNodeHighlightConfig],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetShowFlexOverlaysParams(
            flex_node_highlight_configs=flex_node_highlight_configs
        )

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_FLEX_OVERLAYS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_scroll_snap_overlays(
        self,
        *,
        scroll_snap_highlight_configs: list[ScrollSnapHighlightConfig],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetShowScrollSnapOverlaysParams(
            scroll_snap_highlight_configs=scroll_snap_highlight_configs
        )

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_SCROLL_SNAP_OVERLAYS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_container_query_overlays(
        self,
        *,
        container_query_highlight_configs: list[ContainerQueryHighlightConfig],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        params = SetShowContainerQueryOverlaysParams(
            container_query_highlight_configs=container_query_highlight_configs
        )

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_CONTAINER_QUERY_OVERLAYS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_paint_rects(
        self,
        *,
        result: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Requests that backend shows paint rectangles
        """
        params = SetShowPaintRectsParams(result=result)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_PAINT_RECTS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_layout_shift_regions(
        self,
        *,
        result: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Requests that backend shows layout shift regions
        """
        params = SetShowLayoutShiftRegionsParams(result=result)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_LAYOUT_SHIFT_REGIONS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_scroll_bottleneck_rects(
        self,
        *,
        show: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Requests that backend shows scroll bottleneck rects
        """
        params = SetShowScrollBottleneckRectsParams(show=show)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_SCROLL_BOTTLENECK_RECTS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    @deprecated()
    async def set_show_hit_test_borders(
        self,
        *,
        show: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Deprecated, no longer has any effect.
        """
        params = SetShowHitTestBordersParams(show=show)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_HIT_TEST_BORDERS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    @deprecated()
    async def set_show_web_vitals(
        self,
        *,
        show: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Deprecated, no longer has any effect.
        """
        params = SetShowWebVitalsParams(show=show)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_WEB_VITALS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_viewport_size_on_resize(
        self,
        *,
        show: bool,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Paints viewport size upon main frame resize.
        """
        params = SetShowViewportSizeOnResizeParams(show=show)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_VIEWPORT_SIZE_ON_RESIZE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_hinge(
        self,
        *,
        hinge_config: HingeConfig | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Add a dual screen device hinge
        """
        params = SetShowHingeParams(hinge_config=hinge_config)

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_HINGE,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_isolated_elements(
        self,
        *,
        isolated_element_highlight_configs: list[IsolatedElementHighlightConfig],
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Show elements in isolation mode with overlays.
        """
        params = SetShowIsolatedElementsParams(
            isolated_element_highlight_configs=isolated_element_highlight_configs
        )

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_ISOLATED_ELEMENTS,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result

    async def set_show_window_controls_overlay(
        self,
        *,
        window_controls_overlay_config: WindowControlsOverlayConfig | None = None,
        session_id: str | None = None,
    ) -> dict[str, Any]:
        """
        Show Window Controls Overlay for PWA
        """
        params = SetShowWindowControlsOverlayParams(
            window_controls_overlay_config=window_controls_overlay_config
        )

        result = await self._client.send_raw(
            method=OverlayCommand.SET_SHOW_WINDOW_CONTROLS_OVERLAY,
            params=params.to_cdp_params(),
            session_id=session_id,
        )
        return result
