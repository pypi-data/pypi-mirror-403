Metadata-Version: 2.4
Name: ytdlp-simple
Version: 0.0.6
Summary: Download videos and audio from YouTube and other platforms
Project-URL: Homepage, https://github.com/imbecility/ytdlp-simple
License-Expression: MIT
License-File: LICENSE
Classifier: Operating System :: Microsoft :: Windows
Classifier: Operating System :: POSIX :: Linux
Classifier: Programming Language :: Python :: 3
Classifier: Topic :: Multimedia
Requires-Python: >=3.10
Description-Content-Type: text/markdown

# ytdlp-simple

–í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ `yt-dlp`, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ Python, –∫–æ—Ç–æ—Ä–∞—è —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–µ ¬´–≤—Å—ë –≤–∫–ª—é—á–µ–Ω–æ¬ª –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏. –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –∏–∑–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, —Å–∫–∞—á–∏–≤–∞—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–ª–∏ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤.

### –¢–∞–∫ –∂–µ: [ytdlp-simple-api](https://github.com/imbecility/ytdlp-simple-api) –∏ [ytdlp-simple-gui](https://github.com/imbecility/ytdlp-simple-gui)

-   **Dependency Free:** –Ω–∏–∫–∞–∫–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ pyhon-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è, —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Python 3.13+
-   **Zero Configuration:** –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–∞–º–∞ —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã (`yt-dlp`, `ffmpeg`, `bun`) –ø–æ–¥ Windows/Linux. –§–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ `BackgroundUpdater`. –ï—Å–ª–∏ –ø–∞–ø–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞—â–∏—â–µ–Ω–∞ –æ—Ç –∑–∞–ø–∏—Å–∏, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ—Ç –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –≤ `Local AppData` –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.
-   **Smart Formatting:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤ (Telegram/Discord).
-   **Vertical Video Support:** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –¥–ª—è Shorts, Reels –∏ TikTok.
-   **Invidious Fallback:** –µ—Å–ª–∏ YouTube –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–π–¥–µ—Ç —á–µ—Ä–µ–∑ –∑–µ—Ä–∫–∞–ª–∞ Invidious.
-   **AI Ready:** —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∞—É–¥–∏–æ –∫ ASR-—Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ (Whisper, Faster-Whisper, Speech-to-Text).
-   **SponsorBlock:** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–µ–∑–∞–Ω–∏–µ —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏–∑ –≤–∏–¥–µ–æ.
-   **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ cookies**: —Å–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ Netscape-—Ñ–æ—Ä–º–∞—Ç–∞ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–∞–ø–∫–µ.
-   **Performance:** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–∞–Ω—Ç–∞–π–º `Bun` –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ JavaScript-—Å–∏–≥–Ω–∞—Ç—É—Ä YouTube.
-   **Auto-Repair:** –≤—Å–µ —Å–∫–∞—á–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Å—Ç–∞–¥–∏—é —Ä–µ–º—É–∫—Å–∏–Ω–≥–∞. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å—Ç—Ä–∏–º–∏–Ω–≥–∞ (FastStart) –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö –∏ –ø–ª–µ–µ—Ä–∞—Ö.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
uv add ytdlp-simple
```

–∏–ª–∏:

```bash
pip install ytdlp-simple
```
---

## üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—É–±–ª–∏—á–Ω—ã–π API (—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)

1. **`download_best_audio`** - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ (opus ~130kbps)
2. **`download_audio_for_transcription`** - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∞—É–¥–∏–æ –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è, –º–æ–Ω–æ, —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥)
3. **`download_video_for_chat`** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤–∏–¥–µ–æ –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤ (480p/360p, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∏—Ç—Ä–µ–π—Ç)
4. **`download_best_quality`** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ (vp9 + opus)
5. **`download_manual`** - —Ä—É—á–Ω–æ–π –≤—ã–±–æ—Ä –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
6. **`update_binaries_sync/async`** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤
7. **`get_binaries_sync/async`** - –∑–∞–≥—Ä—É–∑–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ `ytdlp-simple` —è–≤–ª—è—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–±—ä–µ–∫—Ç `DownloadResult`. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–æ–±–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∞–∂–µ –≤ —Å–ª—É—á–∞–µ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ —É—Å–ø–µ—Ö–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –≤–∏–¥–µ–æ —Å–∫–∞—á–∞–ª–æ—Å—å, –Ω–æ –≤ –±–æ–ª–µ–µ –Ω–∏–∑–∫–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏).

#### –ü–æ–ª—è –æ–±—ä–µ–∫—Ç–∞ `DownloadResult`:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `success` | `bool` | `True`, –µ—Å–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ. |
| `path` | `Path \| None` | –û–±—ä–µ–∫—Ç `pathlib.Path` –∫ —Å–∫–∞—á–∞–Ω–Ω–æ–º—É —Ñ–∞–π–ª—É. `None`, –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. |
| `error` | `str \| None` | –¢–µ–∫—Å—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏, –∏–∑-–∑–∞ –∫–æ—Ç–æ—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ—Ä–≤–∞–ª–∞—Å—å. |
| `warnings` | `list[str]` | –°–ø–∏—Å–æ–∫ –Ω–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π. |

#### –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:

```python
result = await download_best_audio("https://...")

if result.success:
    print(f"‚úÖ –£—Å–ø–µ—à–Ω–æ: {result.path.name}")
    if result.warnings:
        print(f"‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: {', '.join(result.warnings)}")
else:
    print(f"‚ùå –û—à–∏–±–∫–∞: {result.error}")
```

#### –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON:
–û–±—ä–µ–∫—Ç –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ `.to_json()`, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—â–∏–º –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –≤–µ–±-API –∏–ª–∏ –ª–æ–≥–∞—Ö:

```python
print(result.to_json())
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ JSON:**
```json
{
  "success": true,
  "path": "/home/user/downloads/ytdlp_downloads/video_id.mp4",
  "error": null,
  "warnings": [
    "480p unavailable, using 360p",
    "original YouTube failed: HTTP Error 403",
    "used Invidious: yewtu.be"
  ]
}
```


## üìö API Reference

### download_best_audio

–°–∫–∞—á–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ –≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º –∫–∞—á–µ—Å—Ç–≤–µ (Opus ~130 kbps).

```python
async def download_best_audio(
    url: str,
    output_dir: Path | str = None,      # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    prefer_lang: list[str] = None,       # –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–µ —è–∑—ã–∫–∏ ['ru', 'en']
    sponsorblock: bool = True,           # –í—ã—Ä–µ–∑–∞—Ç—å —Ä–µ–∫–ª–∞–º—É —á–µ—Ä–µ–∑ SponsorBlock
    cookies_folder: Path | str = None,   # –ü–∞–ø–∫–∞ —Å cookies –≤ Netscape-—Ñ–æ—Ä–º–∞—Ç–µ
) -> DownloadResult
```

**–ü—Ä–∏–º–µ—Ä:**
```python
result = await download_best_audio(
    "https://youtube.com/watch?v=...",
    output_dir="~/Music",
    prefer_lang=["ru", "en"],
    sponsorblock=True
)
```

---

### download_audio_for_transcription

–ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ –¥–ª—è —Å–∏—Å—Ç–µ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏ (ASR): –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–æ–º–∫–æ—Å—Ç–∏, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –º–æ–Ω–æ, —Ä–µ—Å–µ–º–ø–ª–∏–Ω–≥.

```python
async def download_audio_for_transcription(
    url: str,
    output_dir: Path | str = None,
    cookies_folder: Path | str = None,
    sample_rate: Literal[16000, 24000] = 16000,  # Whisper –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 16kHz
    output_format: Literal['opus', 'flac', 'pcm'] = 'opus',
    prefer_lang: list[str] = None,
) -> DownloadResult
```

**–ü—Ä–∏–º–µ—Ä –¥–ª—è Whisper:**
```python
result = await download_audio_for_transcription(
    "https://youtube.com/watch?v=...",
    sample_rate=16000,
    output_format='flac'  # Lossless –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å Whisper
import whisper
model = whisper.load_model("base")
result = model.transcribe(str(result.path))
```

---

### download_video_for_chat

–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤–∏–¥–µ–æ –¥–ª—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤ –∏ Telegram: 480p/360p, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∏—Ç—Ä–µ–π—Ç –∞—É–¥–∏–æ, fps ‚â§ 30.

```python
async def download_video_for_chat(
    url: str,
    output_dir: Path | str = None,
    prefer_lang: list[str] = None,
    sponsorblock: bool = True,
    cookies_folder: Path | str = None,
) -> DownloadResult
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ/–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ)
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç YouTube Shorts, Instagram Reels, TikTok
- Remux –≤ MP4 –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Telegram

**–ü—Ä–∏–º–µ—Ä:**
```python
# –°–∫–∞—á–∞—Ç—å Shorts –¥–ª—è –ø–µ—Ä–µ—Å—ã–ª–∫–∏ –≤ Telegram
result = await download_video_for_chat(
    "https://youtube.com/shorts/abc123"
)
# –í–∏–¥–µ–æ –±—É–¥–µ—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
```

---

### download_best_quality

–°–∫–∞—á–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ –≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º –∫–∞—á–µ—Å—Ç–≤–µ: –ª—É—á—à–µ–µ –≤–∏–¥–µ–æ (VP9/AV1) + –ª—É—á—à–µ–µ –∞—É–¥–∏–æ (Opus).

```python
async def download_best_quality(
    url: str,
    output_dir: Path | str = None,
    prefer_lang: list[str] = None,
    sponsorblock: bool = True,
    cookies_folder: Path | str = None,
    container: Literal['mp4', 'mkv', 'webm', 'mov'] = 'mp4',
) -> DownloadResult
```

**–ü—Ä–∏–º–µ—Ä:**
```python
result = await download_best_quality(
    "https://youtube.com/watch?v=...",
    container='mkv'  # MKV –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –∫–æ–¥–µ–∫–∏
)
```

---

### download_manual

–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∑–∞–≥—Ä—É–∑–∫–∏.

```python
async def download_manual(
    url: str,
    output_dir: Path | str = None,
    max_resolution: Literal['8k', '4k', '2k', '1080p', '720p', '480p', '360p', '240p', '144p'] = '4k',
    audio_bitrate: Literal['best', 'medium', 'low'] = 'best',
    vcodec: Literal['av1', 'vp9', 'avc', 'hevc'] = 'avc',
    acodec: Literal['opus', 'aac'] = 'opus',
    speech_lang: Literal['orig', 'ru', 'en'] = 'ru',
    limit_fps: bool = False,
    container: Literal['mp4', 'mkv', 'webm', 'mov'] = 'mp4',
    sponsorblock: bool = True,
    cookies_folder: Path | str = None,
) -> DownloadResult
```

**–ü—Ä–∏–º–µ—Ä ‚Äî –≤–∏–¥–µ–æ –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:**
```python
result = await download_manual(
    "https://youtube.com/watch?v=...",
    max_resolution='720p',
    vcodec='avc',        # H.264 ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
    acodec='aac',        # AAC ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–µ–∑–¥–µ
    limit_fps=True,      # –ù–µ –±–æ–ª–µ–µ 30fps
    container='mp4'
)
```

**–ü—Ä–∏–º–µ—Ä ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –¥–ª—è –∞—Ä—Ö–∏–≤–∞:**
```python
result = await download_manual(
    "https://youtube.com/watch?v=...",
    max_resolution='4k',
    vcodec='av1',        # –õ—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ
    acodec='opus',       # –õ—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∞—É–¥–∏–æ
    container='mkv',     # –í—Å–µ –∫–æ–¥–µ–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
    sponsorblock=False   # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª
)
```

---

## üç™ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ cookies

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º –∏–ª–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –≤–∏–¥–µ–æ –∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –±–æ—Ç–∞:

```python
result = await download_best_audio(
    "https://youtube.com/watch?v=...",
    cookies_folder="./cookies"  # –ü–∞–ø–∫–∞ —Å .txt —Ñ–∞–π–ª–∞–º–∏ –≤ Netscape-—Ñ–æ—Ä–º–∞—Ç–µ
)
```

**–≠–∫—Å–ø–æ—Ä—Ç cookies –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ [Cookie-Editor](https://cookie-editor.com/#download)
2. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ youtube.com –ø–æ–¥ —Å–≤–æ–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Cookie-Editor
4. –í—ã–±–µ—Ä–∏—Ç–µ "Export", –∑–∞—Ç–µ–º: "Export as" -> "Netscape"
5. –í—Å—Ç–∞–≤—å—Ç–µ –∏–∑ –±—É—Ñ–µ—Ä–∞ –æ–±–º–µ–Ω–∞ —Ç–µ–∫—Å—Ç –≤ —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤: `./cookies/youtube.txt` –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ
6. –¢–æ –∂–µ —Å–∞–º–æ–µ –º–æ–∂–Ω–æ –ø—Ä–æ–¥–µ–ª–∞—Ç—å –∏ –¥–ª—è x.com –∏ —Ç.–ø. –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –æ–±—ä–µ–¥–∏–Ω—è—è cookies —Å —Ä–∞–∑–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª.
7. –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ –ø–∞–ø–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ —Å cookies –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ - –æ–Ω–∏ –±—É–¥—É—Ç —Ä–æ—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.

---

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞–º–∏

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏.

### –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```python
from ytdlp_simple import update_binaries_sync, update_binaries_async

# –°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
update_binaries_sync(force=True)  # force=True ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–∂–µ –µ—Å–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã

# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
await update_binaries_async(parallel=True)
```

### –§–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞.

```python
from ytdlp_simple.bins import binaries_bg_updater

# –£–∂–µ –∑–∞–ø—É—â–µ–Ω, –Ω–æ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
binaries_bg_updater.stop()

# –ò –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
binaries_bg_updater.start()
```

### –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –±–∏–Ω–∞—Ä–Ω–∏–∫–∏?

1. `ytdlp_simple/bin/` ‚Äî –µ—Å–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏
2. `~/.local/share/ytdlp_simple/bin/` (Linux) –∏–ª–∏ `%LOCALAPPDATA%\ytdlp_simple\bin\` (Windows)
3. –°–∏—Å—Ç–µ–º–Ω–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (fallback)

## ‚öôÔ∏è –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã

### Batch-–∑–∞–≥—Ä—É–∑–∫–∞ –ø–ª–µ–π–ª–∏—Å—Ç–∞

```python
import asyncio
from ytdlp_simple import download_best_audio

async def download_playlist(urls: list[str]):
    tasks = [download_best_audio(url) for url in urls]
    results = await asyncio.gather(*tasks, return_exceptions=True)
    
    for url, result in zip(urls, results):
        if isinstance(result, Exception):
            print(f"‚ùå {url}: {result}")
        elif result.success:
            print(f"‚úÖ {url}: {result.path.name}")
        else:
            print(f"‚ùå {url}: {result.error}")

urls = [
    "https://youtube.com/watch?v=...",
    "https://youtube.com/watch?v=...",
]
asyncio.run(download_playlist(urls))
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Bot

```python
from telegram import Update
from telegram.ext import Application, CommandHandler, ContextTypes
from ytdlp_simple import download_video_for_chat

async def download_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    url = context.args[0] if context.args else None
    if not url:
        await update.message.reply_text("–£–∫–∞–∂–∏—Ç–µ URL: /download <url>")
        return
    
    await update.message.reply_text("‚è≥ –ó–∞–≥—Ä—É–∂–∞—é...")
    
    result = await download_video_for_chat(url)
    
    if result.success:
        await update.message.reply_video(
            video=open(result.path, 'rb'),
            caption=result.path.stem
        )
        result.path.unlink()  # –£–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
    else:
        await update.message.reply_text(f"‚ùå {result.error}")
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–æ—Ä–º–∞—Ç–∞—Ö (–¥–ª—è API)

```python
from ytdlp_simple.ytdlp import get_video_formats, analyze_available_formats

async def get_available_options(url: str):
    formats = await get_video_formats(url)
    if formats:
        analysis = analyze_available_formats(formats)
        return {
            "resolutions": analysis['resolutions'],  # [360, 480, 720, 1080]
            "orientation": analysis['orientation'],  # 'horizontal' | 'vertical'
            "codecs": list(analysis['vcodecs']),     # ['vp9', 'avc1']
            "languages": list(analysis['languages']) # ['ru', 'en']
        }
    return None
```
