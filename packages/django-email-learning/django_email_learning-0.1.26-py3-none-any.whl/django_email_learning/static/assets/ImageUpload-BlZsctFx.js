import{g as f,a as h,r as i,u as x,j as t,s as u,c as y,b,e as j}from"./render-CcJq83Ld.js";import{g as v}from"./utils-w7mD0LnI.js";import{B as d}from"./Button-CN6ewz-p.js";function I(o){return f("MuiDialogActions",o)}h("MuiDialogActions",["root","spacing"]);const C=o=>{const{classes:a,disableSpacing:s}=o;return b({root:["root",!s&&"spacing"]},I,a)},D=u("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(o,a)=>{const{ownerState:s}=o;return[a.root,!s.disableSpacing&&a.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:o})=>!o.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),F=i.forwardRef(function(a,s){const n=x({props:a,name:"MuiDialogActions"}),{className:r,disableSpacing:c=!1,...l}=n,g={...n,disableSpacing:c},p=C(g);return t.jsx(D,{className:y(p.root,r),ownerState:g,ref:s,...l})}),S=j(t.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),U=({onUploadSuccess:o,onUploadError:a,initialUrl:s})=>{console.log("Rendering ImageUpload component with initialUrl:",s);const[n,r]=i.useState(null),[c,l]=i.useState(s),g=localStorage.getItem("apiBaseUrl");i.useEffect(()=>{l(s)},[s]);const p=()=>{l(null),r(null),o({file_url:null,file_path:null})};i.useEffect(()=>{n&&fetch(`${g}/organizations/1/file/`,{method:"POST",headers:{"X-CSRFToken":v("csrftoken")},body:(()=>{const e=new FormData;return e.append("file",n),e})()}).then(e=>{if(!e.ok)throw new Error("File upload failed");return e.json()}).then(e=>{console.log("File uploaded successfully:",e),o(e),l(e.file_url)}).catch(e=>{console.error("Error uploading file:",e),a(e)})},[n]);const m=u("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});return t.jsx(t.Fragment,{children:c?t.jsxs(t.Fragment,{children:[t.jsx("img",{src:c,alt:localeMessages.uploaded_image_alt,style:{marginTop:"10px",maxHeight:"100px"}}),t.jsx("br",{}),t.jsx(d,{variant:"text",color:"secondary",onClick:p,children:localeMessages.remove_image})]}):t.jsxs(d,{component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:t.jsx(S,{sx:{marginLeft:direction==="rtl"?1:0}}),sx:{textAlign:direction==="rtl"?"right":"left",mt:2,mb:2},dir:direction,children:[localeMessages.upload_button_label,t.jsx(m,{type:"file",onChange:e=>r(e.target.files[0])})]})})};export{F as D,U as I};
//# sourceMappingURL=ImageUpload-BlZsctFx.js.map
