import{e as C,j as e,a as q,g as O,r as a,u as T,f as $,c as F,s as E,h as P,b as V,d as W,m as D,i as B,n as H,B as r,T as i}from"./render-CcJq83Ld.js";import{L}from"./Layout-D7vcbkk2.js";import{F as Q}from"./FormControlLabel-Chfgirvo.js";import{S as U}from"./SwitchBase-BsWn8bTb.js";import{m as N,b as J}from"./Dialog-CNsJRRbd.js";import{B as R}from"./Button-CN6ewz-p.js";import{A as M}from"./Alert-rWDWC83z.js";import"./Container-DAQjPzX-.js";const X=C(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),G=C(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),K=C(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function Y(s){return O("MuiCheckbox",s)}const _=q("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Z=s=>{const{classes:o,indeterminate:n,color:l,size:u}=s,h={root:["root",n&&"indeterminate",`color${P(l)}`,`size${P(u)}`]},g=V(h,Y,o);return{...o,...g}},ee=E(U,{shouldForwardProp:s=>W(s)||s==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(s,o)=>{const{ownerState:n}=s;return[o.root,n.indeterminate&&o.indeterminate,o[`size${P(n.size)}`],n.color!=="default"&&o[`color${P(n.color)}`]]}})(D(({theme:s})=>({color:(s.vars||s).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:s.alpha((s.vars||s).palette.action.active,(s.vars||s).palette.action.hoverOpacity)}}},...Object.entries(s.palette).filter(B()).map(([o])=>({props:{color:o,disableRipple:!1},style:{"&:hover":{backgroundColor:s.alpha((s.vars||s).palette[o].main,(s.vars||s).palette.action.hoverOpacity)}}})),...Object.entries(s.palette).filter(B()).map(([o])=>({props:{color:o},style:{[`&.${_.checked}, &.${_.indeterminate}`]:{color:(s.vars||s).palette[o].main},[`&.${_.disabled}`]:{color:(s.vars||s).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),se=e.jsx(G,{}),oe=e.jsx(X,{}),te=e.jsx(K,{}),ne=a.forwardRef(function(o,n){const l=T({props:o,name:"MuiCheckbox"}),{checkedIcon:u=se,color:h="primary",icon:g=oe,indeterminate:m=!1,indeterminateIcon:f=te,inputProps:I,size:x="medium",disableRipple:S=!1,className:k,slots:y={},slotProps:w={},...A}=l,t=m?f:g,c=m?f:u,d={...l,disableRipple:S,color:h,indeterminate:m,size:x},z=Z(d),j=w.input??I,[p,b]=$("root",{ref:n,elementType:ee,className:F(z.root,k),shouldForwardComponentProp:!0,externalForwardedProps:{slots:y,slotProps:w,...A},ownerState:d,additionalProps:{type:"checkbox",icon:a.cloneElement(t,{fontSize:t.props.fontSize??x}),checkedIcon:a.cloneElement(c,{fontSize:c.props.fontSize??x}),disableRipple:S,slots:y,slotProps:{input:N(typeof j=="function"?j(d):j,{"data-indeterminate":m})}}});return e.jsx(p,{...b,classes:z})}),re=C(e.jsx("path",{d:"m2 22 14-5-9-9zm12.53-9.47 5.59-5.59c.49-.49 1.28-.49 1.77 0l.59.59 1.06-1.06-.59-.59c-1.07-1.07-2.82-1.07-3.89 0l-5.59 5.59zm-4.47-5.65-.59.59 1.06 1.06.59-.59c1.07-1.07 1.07-2.82 0-3.89l-.59-.59-1.06 1.07.59.59c.48.48.48 1.28 0 1.76m7 5-1.59 1.59 1.06 1.06 1.59-1.59c.49-.49 1.28-.49 1.77 0l1.61 1.61 1.06-1.06-1.61-1.61c-1.08-1.07-2.82-1.07-3.89 0m-2-6-3.59 3.59 1.06 1.06 3.59-3.59c1.07-1.07 1.07-2.82 0-3.89l-1.59-1.59-1.06 1.06 1.59 1.59c.48.49.48 1.29 0 1.77"})),ae=C([e.jsx("circle",{cx:"15.5",cy:"9.5",r:"1.5"},"0"),e.jsx("circle",{cx:"8.5",cy:"9.5",r:"1.5"},"1"),e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-6c-2.33 0-4.32 1.45-5.12 3.5h1.67c.69-1.19 1.97-2 3.45-2s2.75.81 3.45 2h1.67c-.8-2.05-2.79-3.5-5.12-3.5"},"2")]),ie=()=>{const[s,o]=a.useState(!1),[n,l]=a.useState(quiz?quiz.questions.map(t=>({id:t.id,answers:[]})):[]),[u,h]=a.useState(""),[g,m]=a.useState(!0),[f,I]=a.useState(null),[x,S]=a.useState(""),[k,y]=a.useState(null),w=()=>{o(!0);let t=0;for(let c=0;c<n.length;c++)t+=n[c].answers.length;h(t===0?localeMessages.no_answer_warning:"")},A=()=>{fetch(`${apiEndpoint}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":csrfToken},body:JSON.stringify({token,answers:n})}).then(t=>t.json()).then(t=>{o(!1),m(!1),I(t.passed),y(t.score),S(t.message)}).catch(()=>{console.error("Error submitting quiz")})};return e.jsxs(L,{children:[e.jsx(r,{textAlign:"left",sx:{maxWidth:800,margin:"0 auto",backgroundColor:"background.light",height:80}}),e.jsxs(r,{sx:{maxWidth:800,margin:"0 auto",padding:4,border:"1px solid #ccc",borderRadius:2,backgroundColor:"background.paper"},component:"form",method:"POST",action:"",children:[error_message?e.jsx(M,{severity:"error",children:e.jsxs(i,{variant:"h6",children:[localeMessages.error_loading_quiz,": ",error_message," ",ref&&`(Ref: ${ref})`]})}):e.jsxs(r,{children:[e.jsx(r,{mb:4,children:e.jsx(i,{variant:"h4",mb:1,children:quiz.title})}),g?e.jsxs(r,{children:[e.jsx(i,{children:localeMessages.quiz_intro}),quiz.questions.map((t,c)=>e.jsxs(r,{sx:{marginBottom:2,paddingTop:1,borderBottom:"bacground.nav"},children:[e.jsx(r,{mb:1,children:e.jsx(i,{sx:{fontWeight:"bold"},children:t.text})}),t.answers.map((d,z)=>e.jsx(Q,{control:e.jsx(ne,{onChange:j=>{if(j.target.checked){const p=[...n];p.find(v=>v.id===t.id).answers.push(d.id),l(p)}else{const p=[...n],b=p.find(v=>v.id===t.id);b.answers=b.answers.filter(v=>v!==d.id),l(p)}}}),label:d.text,sx:{display:"block",fontSize:"small"}},z))]},c)),e.jsx(r,{mt:4,textAlign:"center",children:e.jsx(R,{variant:"contained",onClick:w,children:localeMessages.submit})})]}):e.jsx(r,{textAlign:"center",children:f!==null&&(f?e.jsx(M,{severity:"success",children:e.jsxs(i,{variant:"h6",children:[e.jsx(re,{})," ",x," ",localeMessages.your_score,": ",k,"%."]})}):e.jsx(M,{severity:"error",children:e.jsxs(i,{variant:"h6",children:[e.jsx(ae,{})," ",x," ",localeMessages.your_score,": ",k,"%."]})}))})]}),e.jsx(J,{open:s,onClose:()=>o(!1),fullWidth:!0,maxWidth:"sm",children:e.jsxs(r,{p:4,children:[e.jsx(i,{variant:"h6",mb:2,children:localeMessages.ready_to_submit}),u?e.jsx(M,{severity:"warning",mb:2,children:e.jsx(i,{children:u})}):e.jsx(i,{children:localeMessages.submit_quiz_note}),e.jsxs(r,{mt:4,textAlign:"right",children:[e.jsx(R,{variant:"text",onClick:()=>o(!1),sx:{mr:2},children:localeMessages.cancel}),e.jsx(R,{variant:"contained",onClick:A,children:localeMessages.submit})]})]})})]})]})};H({children:e.jsx(ie,{})});
//# sourceMappingURL=quiz_public-DNKEB6Zb.js.map
