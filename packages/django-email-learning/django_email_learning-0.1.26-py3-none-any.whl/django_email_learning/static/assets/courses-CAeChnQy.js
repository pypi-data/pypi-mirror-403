import{g as N,a as $,r as a,u as V,j as e,s as D,c as A,b as O,m as K,T as z,d as ee,e as oe,f as Ce,h as J,i as te,k as je,l as Se,B as _,I as Z,n as be,P as ve,L as Me}from"./render-CcJq83Ld.js";import{M as re,S as ce,T as we,W as Te,B as ye,a as Ie,b as Re,c as ke,d as _e,e as ne,f as P,g as Ee}from"./Base-DG8RQuPN.js";import{R as U,F as Fe,I as Pe}from"./RequiredTextField-Bb6HLLm_.js";import{A as De,a as Ue,E as Be,b as ze}from"./ExpandMore-DhsTfTVn.js";import{A as Ne}from"./Add-DF_nYmDf.js";import{g as B,S as $e,G as Q}from"./utils-w7mD0LnI.js";import{A as se}from"./Alert-rWDWC83z.js";import{B as E}from"./Button-CN6ewz-p.js";import{I as Ae,D as de}from"./ImageUpload-BlZsctFx.js";import{F as X}from"./FormControlLabel-Chfgirvo.js";import{F as Oe}from"./FilterList-BlXUw7z3.js";import{D as Ge}from"./Delete-DsQQzLdF.js";import{E as He}from"./Edit-BGn1m_qW.js";import{D as Ve,u as ue,f as We,c as qe,a as Le,b as Xe}from"./Dialog-CNsJRRbd.js";import{S as Je}from"./SwitchBase-BsWn8bTb.js";function Qe(o){return N("MuiDialogContent",o)}$("MuiDialogContent",["root","dividers"]);function Ye(o){return N("MuiDialogTitle",o)}const Ze=$("MuiDialogTitle",["root"]),Ke=o=>{const{classes:s,dividers:t}=o;return O({root:["root",t&&"dividers"]},Qe,s)},eo=D("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:t}=o;return[s.root,t.dividers&&s.dividers]}})(K(({theme:o})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:s})=>s.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(o.vars||o).palette.divider}`,borderBottom:`1px solid ${(o.vars||o).palette.divider}`}},{props:({ownerState:s})=>!s.dividers,style:{[`.${Ze.root} + &`]:{paddingTop:0}}}]}))),pe=a.forwardRef(function(s,t){const r=V({props:s,name:"MuiDialogContent"}),{className:l,dividers:c=!1,...d}=r,g={...r,dividers:c},u=Ke(g);return e.jsx(eo,{className:A(u.root,l),ownerState:g,ref:t,...d})});function oo(o){return N("MuiDialogContentText",o)}$("MuiDialogContentText",["root"]);const so=o=>{const{classes:s}=o,r=O({root:["root"]},oo,s);return{...s,...r}},to=D(z,{shouldForwardProp:o=>ee(o)||o==="classes",name:"MuiDialogContentText",slot:"Root"})({}),ge=a.forwardRef(function(s,t){const r=V({props:s,name:"MuiDialogContentText"}),{children:l,className:c,...d}=r,g=so(d);return e.jsx(to,{component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:d,className:A(g.root,c),...r,classes:g})}),ro=o=>{const{classes:s}=o;return O({root:["root"]},Ye,s)},no=D(z,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),he=a.forwardRef(function(s,t){const r=V({props:s,name:"MuiDialogTitle"}),{className:l,id:c,...d}=r,g=r,u=ro(g),{titleId:f=c}=a.useContext(Ve);return e.jsx(no,{component:"h2",className:A(u.root,l),ownerState:g,ref:t,variant:"h6",id:c??f,...d})});function ao(o){return N("MuiFormGroup",o)}$("MuiFormGroup",["root","row","error"]);const lo=o=>{const{classes:s,row:t,error:r}=o;return O({root:["root",t&&"row",r&&"error"]},ao,s)},io=D("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:t}=o;return[s.root,t.row&&s.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),co=a.forwardRef(function(s,t){const r=V({props:s,name:"MuiFormGroup"}),{className:l,row:c=!1,...d}=r,g=ue(),u=We({props:r,muiFormControl:g,states:["error"]}),f={...r,row:c,error:u.error},h=lo(f);return e.jsx(io,{className:A(h.root,l),ownerState:f,ref:t,...d})}),uo=oe(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),po=oe(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),go=D("span",{name:"MuiRadioButtonIcon",shouldForwardProp:ee})({position:"relative",display:"flex"}),ho=D(uo,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),mo=D(po,{name:"MuiRadioButtonIcon"})(K(({theme:o})=>({left:0,position:"absolute",transform:"scale(0)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeIn,duration:o.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.shortest})}}]})));function me(o){const{checked:s=!1,classes:t={},fontSize:r}=o,l={...o,checked:s};return e.jsxs(go,{className:t.root,ownerState:l,children:[e.jsx(ho,{fontSize:r,className:t.background,ownerState:l}),e.jsx(mo,{fontSize:r,className:t.dot,ownerState:l})]})}const xe=a.createContext(void 0);function xo(){return a.useContext(xe)}function fo(o){return N("MuiRadio",o)}const ae=$("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Co=o=>{const{classes:s,color:t,size:r}=o,l={root:["root",`color${J(t)}`,r!=="medium"&&`size${J(r)}`]};return{...s,...O(l,fo,s)}},jo=D(Je,{shouldForwardProp:o=>ee(o)||o==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:t}=o;return[s.root,t.size!=="medium"&&s[`size${J(t.size)}`],s[`color${J(t.color)}`]]}})(K(({theme:o})=>({color:(o.vars||o).palette.text.secondary,[`&.${ae.disabled}`]:{color:(o.vars||o).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:o.alpha((o.vars||o).palette.action.active,(o.vars||o).palette.action.hoverOpacity)}}},...Object.entries(o.palette).filter(te()).map(([s])=>({props:{color:s,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:o.alpha((o.vars||o).palette[s].main,(o.vars||o).palette.action.hoverOpacity)}}})),...Object.entries(o.palette).filter(te()).map(([s])=>({props:{color:s,disabled:!1},style:{[`&.${ae.checked}`]:{color:(o.vars||o).palette[s].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function So(o,s){return typeof s=="object"&&s!==null?o===s:String(o)===String(s)}const bo=e.jsx(me,{checked:!0}),vo=e.jsx(me,{}),Y=a.forwardRef(function(s,t){const r=V({props:s,name:"MuiRadio"}),{checked:l,checkedIcon:c=bo,color:d="primary",icon:g=vo,name:u,onChange:f,size:h="medium",className:m,disabled:w,disableRipple:i=!1,slots:j={},slotProps:y={},inputProps:R,...I}=r,b=ue();let n=w;b&&typeof n>"u"&&(n=b.disabled),n??=!1;const S={...r,disabled:n,disableRipple:i,color:d,size:h},v=Co(S),M=xo();let k=l;const C=qe(f,M&&M.onChange);let T=u;M&&(typeof k>"u"&&(k=So(M.value,r.value)),typeof T>"u"&&(T=M.name));const F=y.input??R,[W,G]=Ce("root",{ref:t,elementType:jo,className:A(v.root,m),shouldForwardComponentProp:!0,externalForwardedProps:{slots:j,slotProps:y,...I},getSlotProps:q=>({...q,onChange:(H,...L)=>{q.onChange?.(H,...L),C(H,...L)}}),ownerState:S,additionalProps:{type:"radio",icon:a.cloneElement(g,{fontSize:g.props.fontSize??h}),checkedIcon:a.cloneElement(c,{fontSize:c.props.fontSize??h}),disabled:n,name:T,checked:k,slots:j,slotProps:{input:typeof F=="function"?F(S):F}}});return e.jsx(W,{...G,classes:v})});function Mo(o){return N("MuiRadioGroup",o)}$("MuiRadioGroup",["root","row","error"]);const wo=o=>{const{classes:s,row:t,error:r}=o;return O({root:["root",t&&"row",r&&"error"]},Mo,s)},To=a.forwardRef(function(s,t){const{actions:r,children:l,className:c,defaultValue:d,name:g,onChange:u,value:f,...h}=s,m=a.useRef(null),w=wo(s),[i,j]=Le({controlled:f,default:d,name:"RadioGroup"});a.useImperativeHandle(r,()=>({focus:()=>{let b=m.current.querySelector("input:not(:disabled):checked");b||(b=m.current.querySelector("input:not(:disabled)")),b&&b.focus()}}),[]);const y=je(t,m),R=Se(g),I=a.useMemo(()=>({name:R,onChange(b){j(b.target.value),u&&u(b,b.target.value)},value:i}),[R,u,j,i]);return e.jsx(xe.Provider,{value:I,children:e.jsx(co,{role:"radiogroup",ref:y,className:A(w.root,c),...h,children:l})})}),yo=oe(e.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),Io=({onSuccess:o,activeOrganizationId:s})=>{const[t,r]=a.useState(""),[l,c]=a.useState(""),[d,g]=a.useState(""),[u,f]=a.useState(""),[h,m]=a.useState(""),[w,i]=a.useState(""),[j,y]=a.useState(""),[R,I]=a.useState(""),[b,n]=a.useState(""),S=localStorage.getItem("apiBaseUrl"),v=()=>{k()&&fetch(S+"/organizations/"+s+"/imap-connections/",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")},body:JSON.stringify({email:t,password:j,server:d,port:h})}).then(T=>{if(!T.ok)throw new Error("Network response was not ok");return T.json()}).then(T=>{o&&o(T),r(""),n(""),y(""),g(""),I(""),f(""),c("")}).catch(T=>{console.error("Error creating IMAP connection:",T),n("Failed to create IMAP connection. Please try again.")})},M=C=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C),k=()=>{let C=!0;return t?M(t)===!1?(c(localeMessages.invalid_email_helper_text),C=!1):c(""):(c(localeMessages.email_required_helper_text),C=!1),j?I(""):(I(localeMessages.password_required_helper_text),C=!1),d?f(""):(f(localeMessages.server_required_helper_text),C=!1),h?isNaN(h)||parseInt(h)<=0?(i(localeMessages.invalid_port_helper_text),C=!1):i(""):(i(localeMessages.port_required_helper_text),C=!1),C};return e.jsxs(e.Fragment,{children:[b&&e.jsx(se,{severity:"error",sx:{marginBottom:2},children:b}),e.jsx(U,{label:localeMessages.email,helperText:l,fullWidth:!0,value:t,onChange:C=>r(C.target.value)}),e.jsx(U,{label:localeMessages.password,helperText:R,type:"password",fullWidth:!0,sx:{marginTop:2},value:j,onChange:C=>y(C.target.value)}),e.jsx(U,{label:localeMessages.server,helperText:u,fullWidth:!0,sx:{marginTop:2},value:d,onChange:C=>g(C.target.value)}),e.jsx(U,{label:localeMessages.port,helperText:w,fullWidth:!0,sx:{marginTop:2},value:h,onChange:C=>m(C.target.value)}),e.jsx(_,{mt:2,textAlign:"right",children:e.jsx(E,{variant:"contained",onClick:()=>v(),sx:{boxShadow:"none"},children:localeMessages.add})})]})};function Ro({onChangeCallback:o,activeOrganizationId:s,initialImapConnectionId:t=null}){const[r,l]=a.useState([]),[c,d]=a.useState(!1),[g,u]=a.useState(t),f=()=>{m&&d(!c)},h=localStorage.getItem("apiBaseUrl"),m=a.useMemo(()=>r.length>0,[r]),w=i=>{u(i),o&&o(i)};return a.useEffect(()=>{fetch(h+"/organizations/"+s+"/imap-connections/",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{l(i.imap_connections),i.imap_connections.length==0&&d(!0)}).catch(i=>{console.error("Error fetching IMAP connections:",i)})},[]),e.jsxs("div",{children:[m&&e.jsxs(Fe,{sx:{marginBottom:"16px",minWidth:"100%"},children:[e.jsx(Pe,{id:"imap-connection-select-label",children:localeMessages.imap_connection}),e.jsxs($e,{labelId:"imap-connection-select-label",id:"imap-connection-select",label:localeMessages.imap_connection,value:g||"",onChange:i=>w(i.target.value),children:[e.jsx(re,{value:null,children:"None"}),r.map(i=>e.jsx(re,{value:i.id,style:{fontWeight:i.id===g?"bold":"normal"},children:i.email},i.id))]})]}),e.jsxs(De,{expanded:c,onChange:f,children:[e.jsx(Ue,{expandIcon:m?e.jsx(Be,{}):null,"aria-controls":"panel1-content",id:"panel1-header",children:e.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ne,{}),e.jsx(z,{component:"span",children:localeMessages.new_imap_connection})]})}),e.jsx(ze,{children:e.jsx(Io,{onSuccess:i=>{const j=[...r,i];l(j),u(i.id),o&&o(i.id),d(!1)},activeOrganizationId:s})})]})]})}function le({successCallback:o,failureCallback:s,cancelCallback:t,activeOrganizationId:r,createMode:l,courseId:c}){const[d,g]=a.useState(""),[u,f]=a.useState(""),[h,m]=a.useState(""),[w,i]=a.useState(!1),[j,y]=a.useState(null),[R,I]=a.useState(""),[b,n]=a.useState(""),[S,v]=a.useState(""),[M,k]=a.useState(""),[C,T]=a.useState(null),[F,W]=a.useState(null),G=localStorage.getItem("apiBaseUrl"),q=()=>{i(!w)};a.useEffect(()=>{!l&&c&&fetch(G+"/organizations/"+r+"/courses/"+c+"/",{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")},credentials:"include"}).then(p=>{if(!p.ok)throw new Error("Network response was not ok");return p.json()}).then(p=>{g(p.title),f(p.slug),m(p.description),T(p.image),W(p.image_path),p.imap_connection_id&&(y(p.imap_connection_id),i(!0))}).catch(p=>{console.error("Error:",p),p&&s(p)})},[l,c]);const H=()=>{let p=!0;return d?I(""):(I(localeMessages.title_required_helper_text),p=!1),u?n(""):(n(localeMessages.slug_required_helper_text),p=!1),h?v(""):(v(localeMessages.description_required_helper_text),p=!1),p},L=()=>{H()&&fetch(G+"/organizations/"+r+"/courses/"+c+"/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")},credentials:"include",body:JSON.stringify({title:d,description:h,imap_connection_id:j&&w?parseInt(j):null,reset_imap_connection:!w||j==null,image:F||null})}).then(x=>{if(!x.ok&&x.status!=409)throw x.status>=500&&k("Server error occurred. Please try again later."),new Error("Network response was not ok");return x.json()}).then(x=>{x.error?(k(x.error),s(x)):(console.log("Success:",x),o(x))}).catch(x=>{console.error("Error:",x),s(x)})},fe=()=>{H()&&fetch(G+"/organizations/"+r+"/courses/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")},credentials:"include",body:JSON.stringify({title:d,slug:u,description:h,imap_connection_id:j?parseInt(j):null,image:F||null})}).then(x=>{if(!x.ok&&x.status!=409)throw x.status>=500&&k("Server error occurred. Please try again later."),new Error("Network response was not ok");return x.json()}).then(x=>{x.error?(k(x.error),s(x)):(console.log("Success:",x),g(""),f(""),m(""),o(x))}).catch(x=>{console.error("Error:",x),s(x)})};return e.jsxs(_,{p:2,children:[M&&e.jsx(se,{severity:"error",sx:{marginBottom:"10px"},children:M}),e.jsx(U,{label:localeMessages.course_title,helperText:R,fullWidth:!0,margin:"normal",value:d,onChange:p=>g(p.target.value)}),e.jsx(U,{label:localeMessages.course_slug,helperText:b,fullWidth:!0,margin:"normal",value:u,onChange:p=>f(p.target.value),...l?{}:{disabled:!0}}),e.jsx(U,{label:localeMessages.course_description,helperText:S,fullWidth:!0,margin:"normal",multiline:!0,rows:4,value:h,onChange:p=>m(p.target.value)}),e.jsx(X,{control:e.jsx(ce,{onChange:()=>q(),checked:w,dir:direction}),label:localeMessages.add_imap_connection,sx:{m:0}}),e.jsx(we,{title:localeMessages.imap_connection_tooltip,children:e.jsx(Z,{size:"small",children:e.jsx(yo,{fontSize:"small"})})}),w&&e.jsx(_,{py:2,children:e.jsx(Ro,{onChangeCallback:p=>y(p),activeOrganizationId:r,initialImapConnectionId:j})}),e.jsx(_,{children:e.jsx(Ae,{initialUrl:C,onUploadSuccess:p=>{T(p.file_url),W(p.file_path)}})}),e.jsxs(_,{mt:2,textAlign:"right",children:[e.jsx(E,{onClick:t,sx:{mr:1},children:"Cancel"}),l&&e.jsx(E,{variant:"contained",onClick:()=>fe(),sx:{boxShadow:"none"},children:localeMessages.create}),!l&&e.jsx(E,{variant:"contained",onClick:()=>L(),sx:{boxShadow:"none"},children:localeMessages.update})]})]})}const ko=({courseId:o,action:s,courseTitle:t,handleClose:r,handleSuccess:l})=>{const c=localStorage.getItem("apiBaseUrl"),d=localStorage.getItem("activeOrganizationId"),g=()=>{fetch(`${c}/organizations/${d}/courses/${o}/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")},body:JSON.stringify({enabled:s==="enable"})}).then(u=>u.json()).then(u=>{console.log("Course state updated successfully:",u),l(u),r()}).catch(u=>{console.error("Error updating course state:",u)})};return e.jsxs(e.Fragment,{children:[e.jsx(he,{id:"alert-dialog-title",children:localeMessages[`${s}_course`].replace("COURSE_NAME",t)}),e.jsx(pe,{children:e.jsx(ge,{id:"alert-dialog-description",children:localeMessages[`course_${s}_confirmation`].replace("COURSE_NAME",t)})}),e.jsxs(de,{children:[e.jsx(E,{onClick:r,children:localeMessages.cancel}),e.jsx(E,{onClick:g,autoFocus:!0,variant:"contained",children:localeMessages.continue})]})]})},_o=({courseId:o,courseTitle:s,handleClose:t,handleSuccess:r})=>{const l=localStorage.getItem("apiBaseUrl"),c=localStorage.getItem("activeOrganizationId"),[d,g]=a.useState(!1),[u,f]=a.useState(""),h=()=>{fetch(`${l}/organizations/${c}/courses/${o}/`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")}}).then(m=>{if(m.status!=200&&m.status!=409)throw new Error("Unhandled network Error! course is not deleted");return m.json()}).then(m=>{if(m.error)throw new Error(m.error);console.log("Course state deleted successfully:",m),r(),t()}).catch(m=>{f(m.message),g(!0)})};return e.jsxs(e.Fragment,{children:[e.jsxs(he,{id:"alert-dialog-title",children:[d&&e.jsx(se,{severity:"error",children:u}),e.jsxs(z,{variant:"h6",component:"span",children:[e.jsx(_,{sx:{display:"inline-block",alignItems:"center",mr:1,mt:1,pt:1},children:e.jsx(Te,{color:"warning"})}),e.jsx(_,{sx:{display:"inline-block"},children:localeMessages.delete_course.replace("COURSE_NAME",s)})]})]}),e.jsx(pe,{children:e.jsx(ge,{id:"alert-dialog-description",children:localeMessages.course_delete_confirmation.replace("COURSE_NAME",s)})}),e.jsxs(de,{children:[e.jsx(E,{onClick:t,children:localeMessages.cancel}),e.jsx(E,{onClick:h,autoFocus:!0,variant:"contained",children:e.jsx(z,{children:localeMessages.delete})})]})]})},ie=({onStatusChange:o})=>e.jsxs(e.Fragment,{children:[e.jsx(z,{variant:"body2",component:"div",sx:{mb:2,fontWeight:"bold"},children:localeMessages.filter}),e.jsxs(z,{variant:"subtitle2",component:"div",sx:{mb:1,fontWeight:"bold"},children:[localeMessages.course_status,":"]}),e.jsxs(To,{defaultValue:"all",name:"course-status-radio-group",onChange:s=>{const t=s.target.value;t==="all"?o(""):t==="enabled"?o("?enabled=true"):t==="disabled"&&o("?enabled=false")},children:[e.jsx(X,{value:"all",control:e.jsx(Y,{}),label:localeMessages.all}),e.jsx(X,{value:"enabled",control:e.jsx(Y,{}),label:localeMessages.enabled}),e.jsx(X,{value:"disabled",control:e.jsx(Y,{}),label:localeMessages.disabled})]})]});function Eo(){const[o,s]=a.useState(!1),[t,r]=a.useState(null),[l,c]=a.useState([]),[d,g]=a.useState(null),[u,f]=a.useState(""),h=localStorage.getItem("userRole"),m=localStorage.getItem("apiBaseUrl"),w=localStorage.getItem("platformBaseUrl"),i=()=>{d&&fetch(`${m}/organizations/${d}/courses${u}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")}}).then(n=>n.json()).then(n=>c(n.courses)).catch(n=>console.error("Error fetching courses:",n))};a.useEffect(()=>{i()},[u]),a.useEffect(()=>{f(""),i()},[d]);const j=n=>{let S=l.find(v=>v.id===n.id);S&&(S.enabled=n.enabled,c([...l]))},y=(n,S,v)=>M=>{console.log(`${S} course with ID:`,n),console.log("Event:",M.target.checked),r(e.jsx(Q,{sx:{p:2},children:e.jsx(ko,{courseId:n,action:S,courseTitle:v,handleClose:()=>s(!1),handleSuccess:j})})),s(!0)},R=n=>{console.log("Course created successfully:",n),c([...l,n]),s(!1)},I=n=>{console.error("Course creation failed:",n)},b=n=>{r(e.jsx(le,{successCallback:S=>{const v=l.findIndex(M=>M.id===n.id);l[v]=S,c([...l]),s(!1)},failureCallback:S=>{console.error("Course update failed:",S)},cancelCallback:()=>s(!1),activeOrganizationId:d,createMode:!1,courseId:n.id})),s(!0)};return e.jsxs(ye,{breadCrumbList:[{label:localeMessages.course_management,href:"#"}],bottomDrawerParams:{icon:e.jsx(Oe,{}),children:e.jsx(ie,{onStatusChange:n=>f(n)})},organizationIdRefreshCallback:g,children:[e.jsx(Q,{size:{xs:12,md:9},py:2,pl:2,children:e.jsxs(_,{p:2,sx:{border:"1px solid",borderColor:"border.main",backgroundColor:"background.main",borderRadius:1,minHeight:300},children:[h!=="viewer"&&e.jsx(E,{variant:"contained",startIcon:e.jsx(Ie,{sx:{marginLeft:direction==="rtl"?1:0}}),sx:{marginBottom:2},onClick:()=>{r(e.jsx(le,{successCallback:R,failureCallback:I,cancelCallback:()=>s(!1),activeOrganizationId:d,createMode:!0})),s(!0)},children:localeMessages.add_course}),e.jsx(Re,{component:ve,children:e.jsxs(ke,{sx:{width:"100%"},"aria-label":localeMessages.courses,children:[e.jsx(_e,{children:e.jsxs(ne,{children:[e.jsx(P,{sx:{textAlign:direction==="rtl"?"right":"left"},children:localeMessages.title}),e.jsx(P,{sx:{textAlign:direction==="rtl"?"right":"left"},children:localeMessages.total_enrollments}),e.jsx(P,{sx:{textAlign:direction==="rtl"?"right":"left"},children:localeMessages.enabled}),h!=="viewer"&&e.jsx(P,{align:direction==="rtl"?"left":"right",children:localeMessages.actions})]})}),e.jsx(Ee,{children:l.length>0&&l.map(n=>e.jsxs(ne,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(P,{component:"th",scope:"row",sx:{textAlign:direction==="rtl"?"right":"left"},children:e.jsx(Me,{href:`${w}/courses/${n.id}`,color:"primary.dark",children:n.title})}),e.jsx(P,{sx:{textAlign:direction==="rtl"?"right":"left"},children:n.enrollments_count.total}),e.jsx(P,{sx:{textAlign:direction==="rtl"?"right":"left"},children:e.jsx(ce,{checked:n.enabled,onChange:y(n.id,n.enabled?"disable":"enable",n.title),slotProps:{input:{"aria-label":n.enabled?"Disable Course":"Enable Course"}},disabled:h==="viewer"})}),h!=="viewer"&&e.jsxs(P,{align:direction==="rtl"?"left":"right",children:[e.jsx(Z,{onClick:()=>{b(n)},children:e.jsx(He,{fontSize:"small"})}),e.jsx(Z,{"aria-label":`Delete ${n.title}`,onClick:()=>{r(e.jsx(_o,{courseId:n.id,courseTitle:n.title,handleClose:()=>s(!1),handleSuccess:()=>{const S=l.findIndex(v=>v.id===n.id);c(l.filter((v,M)=>M!==S))}})),s(!0)},children:e.jsx(Ge,{fontSize:"small"})})]})]},n.id))})]})})]})}),e.jsx(Q,{display:{xs:"none",md:"block"},size:{md:3},p:2,children:e.jsx(_,{p:2,sx:{border:"1px solid",borderColor:"border.main",borderRadius:1,minHeight:300,position:"sticky",top:80,backgroundColor:"background.main"},children:e.jsx(ie,{onStatusChange:n=>f(n)})})}),e.jsx(Xe,{open:o,onClose:()=>s(!1),fullWidth:!0,maxWidth:"sm",children:t})]})}be({children:e.jsx(Eo,{})});
//# sourceMappingURL=courses-CAeChnQy.js.map
