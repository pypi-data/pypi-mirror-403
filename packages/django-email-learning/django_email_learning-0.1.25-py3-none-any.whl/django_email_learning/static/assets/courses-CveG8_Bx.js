import{g as N,a as $,r as a,u as G,j as e,s as D,c as A,b as O,m as Q,T as z,d as Y,e as Z,f as xe,h as V,i as oe,k as fe,l as me,B as _,I as J,n as Ce,P as je,L as Se}from"./render-CcJq83Ld.js";import{M as te,S as le,T as be,W as ve,B as Me,a as we,b as ye,c as Te,d as ke,e as se,f as F,g as Ie}from"./Base-DG8RQuPN.js";import{R as P,F as Re,I as _e}from"./RequiredTextField-Bb6HLLm_.js";import{A as Ee,a as Fe,E as De,b as Pe}from"./ExpandMore-DhsTfTVn.js";import{A as Be}from"./Add-DF_nYmDf.js";import{g as B,S as ze,G as L}from"./utils-w7mD0LnI.js";import{A as K}from"./Alert-rWDWC83z.js";import{B as E}from"./Button-CN6ewz-p.js";import{F as H}from"./FormControlLabel-Chfgirvo.js";import{F as Ue}from"./FilterList-BlXUw7z3.js";import{D as Ne}from"./Delete-DsQQzLdF.js";import{E as $e}from"./Edit-BGn1m_qW.js";import{D as Ae,u as ie,f as Oe,c as Ge,a as He,b as Ve}from"./Dialog-CNsJRRbd.js";import{D as ce}from"./DialogActions-Cye4fTOA.js";import{S as We}from"./SwitchBase-BsWn8bTb.js";function qe(o){return N("MuiDialogContent",o)}$("MuiDialogContent",["root","dividers"]);function Le(o){return N("MuiDialogTitle",o)}const Xe=$("MuiDialogTitle",["root"]),Je=o=>{const{classes:t,dividers:s}=o;return O({root:["root",s&&"dividers"]},qe,t)},Qe=D("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:s}=o;return[t.root,s.dividers&&t.dividers]}})(Q(({theme:o})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:t})=>t.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(o.vars||o).palette.divider}`,borderBottom:`1px solid ${(o.vars||o).palette.divider}`}},{props:({ownerState:t})=>!t.dividers,style:{[`.${Xe.root} + &`]:{paddingTop:0}}}]}))),de=a.forwardRef(function(t,s){const r=G({props:t,name:"MuiDialogContent"}),{className:l,dividers:c=!1,...d}=r,p={...r,dividers:c},u=Je(p);return e.jsx(Qe,{className:A(u.root,l),ownerState:p,ref:s,...d})});function Ye(o){return N("MuiDialogContentText",o)}$("MuiDialogContentText",["root"]);const Ze=o=>{const{classes:t}=o,r=O({root:["root"]},Ye,t);return{...t,...r}},Ke=D(z,{shouldForwardProp:o=>Y(o)||o==="classes",name:"MuiDialogContentText",slot:"Root"})({}),ue=a.forwardRef(function(t,s){const r=G({props:t,name:"MuiDialogContentText"}),{children:l,className:c,...d}=r,p=Ze(d);return e.jsx(Ke,{component:"p",variant:"body1",color:"textSecondary",ref:s,ownerState:d,className:A(p.root,c),...r,classes:p})}),eo=o=>{const{classes:t}=o;return O({root:["root"]},Le,t)},oo=D(z,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),pe=a.forwardRef(function(t,s){const r=G({props:t,name:"MuiDialogTitle"}),{className:l,id:c,...d}=r,p=r,u=eo(p),{titleId:m=c}=a.useContext(Ae);return e.jsx(oo,{component:"h2",className:A(u.root,l),ownerState:p,ref:s,variant:"h6",id:c??m,...d})});function to(o){return N("MuiFormGroup",o)}$("MuiFormGroup",["root","row","error"]);const so=o=>{const{classes:t,row:s,error:r}=o;return O({root:["root",s&&"row",r&&"error"]},to,t)},ro=D("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:s}=o;return[t.root,s.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),no=a.forwardRef(function(t,s){const r=G({props:t,name:"MuiFormGroup"}),{className:l,row:c=!1,...d}=r,p=ie(),u=Oe({props:r,muiFormControl:p,states:["error"]}),m={...r,row:c,error:u.error},h=so(m);return e.jsx(ro,{className:A(h.root,l),ownerState:m,ref:s,...d})}),ao=Z(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),lo=Z(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),io=D("span",{name:"MuiRadioButtonIcon",shouldForwardProp:Y})({position:"relative",display:"flex"}),co=D(ao,{name:"MuiRadioButtonIcon"})({transform:"scale(1)"}),uo=D(lo,{name:"MuiRadioButtonIcon"})(Q(({theme:o})=>({left:0,position:"absolute",transform:"scale(0)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeIn,duration:o.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.shortest})}}]})));function ge(o){const{checked:t=!1,classes:s={},fontSize:r}=o,l={...o,checked:t};return e.jsxs(io,{className:s.root,ownerState:l,children:[e.jsx(co,{fontSize:r,className:s.background,ownerState:l}),e.jsx(uo,{fontSize:r,className:s.dot,ownerState:l})]})}const he=a.createContext(void 0);function po(){return a.useContext(he)}function go(o){return N("MuiRadio",o)}const re=$("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),ho=o=>{const{classes:t,color:s,size:r}=o,l={root:["root",`color${V(s)}`,r!=="medium"&&`size${V(r)}`]};return{...t,...O(l,go,t)}},xo=D(We,{shouldForwardProp:o=>Y(o)||o==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(o,t)=>{const{ownerState:s}=o;return[t.root,s.size!=="medium"&&t[`size${V(s.size)}`],t[`color${V(s.color)}`]]}})(Q(({theme:o})=>({color:(o.vars||o).palette.text.secondary,[`&.${re.disabled}`]:{color:(o.vars||o).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:o.alpha((o.vars||o).palette.action.active,(o.vars||o).palette.action.hoverOpacity)}}},...Object.entries(o.palette).filter(oe()).map(([t])=>({props:{color:t,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:o.alpha((o.vars||o).palette[t].main,(o.vars||o).palette.action.hoverOpacity)}}})),...Object.entries(o.palette).filter(oe()).map(([t])=>({props:{color:t,disabled:!1},style:{[`&.${re.checked}`]:{color:(o.vars||o).palette[t].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function fo(o,t){return typeof t=="object"&&t!==null?o===t:String(o)===String(t)}const mo=e.jsx(ge,{checked:!0}),Co=e.jsx(ge,{}),X=a.forwardRef(function(t,s){const r=G({props:t,name:"MuiRadio"}),{checked:l,checkedIcon:c=mo,color:d="primary",icon:p=Co,name:u,onChange:m,size:h="medium",className:x,disabled:w,disableRipple:i=!1,slots:j={},slotProps:T={},inputProps:I,...k}=r,b=ie();let n=w;b&&typeof n>"u"&&(n=b.disabled),n??=!1;const S={...r,disabled:n,disableRipple:i,color:d,size:h},v=ho(S),M=po();let R=l;const C=Ge(m,M&&M.onChange);let y=u;M&&(typeof R>"u"&&(R=fo(M.value,r.value)),typeof y>"u"&&(y=M.name));const U=T.input??I,[W,q]=xe("root",{ref:s,elementType:xo,className:A(v.root,x),shouldForwardComponentProp:!0,externalForwardedProps:{slots:j,slotProps:T,...k},getSlotProps:g=>({...g,onChange:(f,...ee)=>{g.onChange?.(f,...ee),C(f,...ee)}}),ownerState:S,additionalProps:{type:"radio",icon:a.cloneElement(p,{fontSize:p.props.fontSize??h}),checkedIcon:a.cloneElement(c,{fontSize:c.props.fontSize??h}),disabled:n,name:y,checked:R,slots:j,slotProps:{input:typeof U=="function"?U(S):U}}});return e.jsx(W,{...q,classes:v})});function jo(o){return N("MuiRadioGroup",o)}$("MuiRadioGroup",["root","row","error"]);const So=o=>{const{classes:t,row:s,error:r}=o;return O({root:["root",s&&"row",r&&"error"]},jo,t)},bo=a.forwardRef(function(t,s){const{actions:r,children:l,className:c,defaultValue:d,name:p,onChange:u,value:m,...h}=t,x=a.useRef(null),w=So(t),[i,j]=He({controlled:m,default:d,name:"RadioGroup"});a.useImperativeHandle(r,()=>({focus:()=>{let b=x.current.querySelector("input:not(:disabled):checked");b||(b=x.current.querySelector("input:not(:disabled)")),b&&b.focus()}}),[]);const T=fe(s,x),I=me(p),k=a.useMemo(()=>({name:I,onChange(b){j(b.target.value),u&&u(b,b.target.value)},value:i}),[I,u,j,i]);return e.jsx(he.Provider,{value:k,children:e.jsx(no,{role:"radiogroup",ref:T,className:A(w.root,c),...h,children:l})})}),vo=Z(e.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),Mo=({onSuccess:o,activeOrganizationId:t})=>{const[s,r]=a.useState(""),[l,c]=a.useState(""),[d,p]=a.useState(""),[u,m]=a.useState(""),[h,x]=a.useState(""),[w,i]=a.useState(""),[j,T]=a.useState(""),[I,k]=a.useState(""),[b,n]=a.useState(""),S=localStorage.getItem("apiBaseUrl"),v=()=>{R()&&fetch(S+"/organizations/"+t+"/imap-connections/",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")},body:JSON.stringify({email:s,password:j,server:d,port:h})}).then(y=>{if(!y.ok)throw new Error("Network response was not ok");return y.json()}).then(y=>{o&&o(y),r(""),n(""),T(""),p(""),k(""),m(""),c("")}).catch(y=>{console.error("Error creating IMAP connection:",y),n("Failed to create IMAP connection. Please try again.")})},M=C=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C),R=()=>{let C=!0;return s?M(s)===!1?(c(localeMessages.invalid_email_helper_text),C=!1):c(""):(c(localeMessages.email_required_helper_text),C=!1),j?k(""):(k(localeMessages.password_required_helper_text),C=!1),d?m(""):(m(localeMessages.server_required_helper_text),C=!1),h?isNaN(h)||parseInt(h)<=0?(i(localeMessages.invalid_port_helper_text),C=!1):i(""):(i(localeMessages.port_required_helper_text),C=!1),C};return e.jsxs(e.Fragment,{children:[b&&e.jsx(K,{severity:"error",sx:{marginBottom:2},children:b}),e.jsx(P,{label:localeMessages.email,helperText:l,fullWidth:!0,value:s,onChange:C=>r(C.target.value)}),e.jsx(P,{label:localeMessages.password,helperText:I,type:"password",fullWidth:!0,sx:{marginTop:2},value:j,onChange:C=>T(C.target.value)}),e.jsx(P,{label:localeMessages.server,helperText:u,fullWidth:!0,sx:{marginTop:2},value:d,onChange:C=>p(C.target.value)}),e.jsx(P,{label:localeMessages.port,helperText:w,fullWidth:!0,sx:{marginTop:2},value:h,onChange:C=>x(C.target.value)}),e.jsx(_,{mt:2,textAlign:"right",children:e.jsx(E,{variant:"contained",onClick:()=>v(),sx:{boxShadow:"none"},children:localeMessages.add})})]})};function wo({onChangeCallback:o,activeOrganizationId:t,initialImapConnectionId:s=null}){const[r,l]=a.useState([]),[c,d]=a.useState(!1),[p,u]=a.useState(s),m=()=>{x&&d(!c)},h=localStorage.getItem("apiBaseUrl"),x=a.useMemo(()=>r.length>0,[r]),w=i=>{u(i),o&&o(i)};return a.useEffect(()=>{fetch(h+"/organizations/"+t+"/imap-connections/",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{l(i.imap_connections),i.imap_connections.length==0&&d(!0)}).catch(i=>{console.error("Error fetching IMAP connections:",i)})},[]),e.jsxs("div",{children:[x&&e.jsxs(Re,{sx:{marginBottom:"16px",minWidth:"100%"},children:[e.jsx(_e,{id:"imap-connection-select-label",children:localeMessages.imap_connection}),e.jsxs(ze,{labelId:"imap-connection-select-label",id:"imap-connection-select",label:localeMessages.imap_connection,value:p||"",onChange:i=>w(i.target.value),children:[e.jsx(te,{value:null,children:"None"}),r.map(i=>e.jsx(te,{value:i.id,style:{fontWeight:i.id===p?"bold":"normal"},children:i.email},i.id))]})]}),e.jsxs(Ee,{expanded:c,onChange:m,children:[e.jsx(Fe,{expandIcon:x?e.jsx(De,{}):null,"aria-controls":"panel1-content",id:"panel1-header",children:e.jsxs(_,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Be,{}),e.jsx(z,{component:"span",children:localeMessages.new_imap_connection})]})}),e.jsx(Pe,{children:e.jsx(Mo,{onSuccess:i=>{const j=[...r,i];l(j),u(i.id),o&&o(i.id),d(!1)},activeOrganizationId:t})})]})]})}function ne({successCallback:o,failureCallback:t,cancelCallback:s,activeOrganizationId:r,createMode:l,courseId:c}){const[d,p]=a.useState(""),[u,m]=a.useState(""),[h,x]=a.useState(""),[w,i]=a.useState(!1),[j,T]=a.useState(null),[I,k]=a.useState(""),[b,n]=a.useState(""),[S,v]=a.useState(""),[M,R]=a.useState(""),C=localStorage.getItem("apiBaseUrl"),y=()=>{i(!w)};a.useEffect(()=>{!l&&c&&fetch(C+"/organizations/"+r+"/courses/"+c+"/",{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")},credentials:"include"}).then(g=>{if(!g.ok)throw new Error("Network response was not ok");return g.json()}).then(g=>{p(g.title),m(g.slug),x(g.description),g.imap_connection_id&&(T(g.imap_connection_id),i(!0))}).catch(g=>{console.error("Error:",g),g&&t(g)})},[l,c]);const U=()=>{let g=!0;return d?k(""):(k(localeMessages.title_required_helper_text),g=!1),u?n(""):(n(localeMessages.slug_required_helper_text),g=!1),h?v(""):(v(localeMessages.description_required_helper_text),g=!1),g},W=()=>{U()&&fetch(C+"/organizations/"+r+"/courses/"+c+"/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")},credentials:"include",body:JSON.stringify({title:d,description:h,imap_connection_id:j&&w?parseInt(j):null,reset_imap_connection:!w||j==null})}).then(f=>{if(!f.ok)throw f.status>=500&&R("Server error occurred. Please try again later."),new Error("Network response was not ok");return f.json()}).then(f=>{console.log("Success:",f),o(f)}).catch(f=>{console.error("Error:",f),f&&t(f)})},q=()=>{U()&&fetch(C+"/organizations/"+r+"/courses/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")},credentials:"include",body:JSON.stringify({title:d,slug:u,description:h,imap_connection_id:j?parseInt(j):null})}).then(f=>{if(!f.ok)throw f.status===409?R("A course with this title or slug already exists."):f.status>=500&&R("Server error occurred. Please try again later."),new Error("Network response was not ok");return f.json()}).then(f=>{console.log("Success:",f),p(""),m(""),x(""),o(f)}).catch(f=>{console.error("Error:",f),f&&t(f)})};return e.jsxs(_,{p:2,children:[M&&e.jsx(K,{severity:"error",sx:{marginBottom:"10px"},children:M}),e.jsx(P,{label:localeMessages.course_title,helperText:I,fullWidth:!0,margin:"normal",value:d,onChange:g=>p(g.target.value)}),e.jsx(P,{label:localeMessages.course_slug,helperText:b,fullWidth:!0,margin:"normal",value:u,onChange:g=>m(g.target.value),...l?{}:{disabled:!0}}),e.jsx(P,{label:localeMessages.course_description,helperText:S,fullWidth:!0,margin:"normal",multiline:!0,rows:4,value:h,onChange:g=>x(g.target.value)}),e.jsx(H,{control:e.jsx(le,{onChange:()=>y(),checked:w,dir:direction}),label:localeMessages.add_imap_connection,sx:{m:0}}),e.jsx(be,{title:localeMessages.imap_connection_tooltip,children:e.jsx(J,{size:"small",children:e.jsx(vo,{fontSize:"small"})})}),w&&e.jsx(_,{py:2,children:e.jsx(wo,{onChangeCallback:g=>T(g),activeOrganizationId:r,initialImapConnectionId:j})}),e.jsxs(_,{mt:2,textAlign:"right",children:[e.jsx(E,{onClick:s,sx:{mr:1},children:"Cancel"}),l&&e.jsx(E,{variant:"contained",onClick:()=>q(),sx:{boxShadow:"none"},children:localeMessages.create}),!l&&e.jsx(E,{variant:"contained",onClick:()=>W(),sx:{boxShadow:"none"},children:localeMessages.update})]})]})}const yo=({courseId:o,action:t,courseTitle:s,handleClose:r,handleSuccess:l})=>{const c=localStorage.getItem("apiBaseUrl"),d=localStorage.getItem("activeOrganizationId"),p=()=>{fetch(`${c}/organizations/${d}/courses/${o}/`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")},body:JSON.stringify({enabled:t==="enable"})}).then(u=>u.json()).then(u=>{console.log("Course state updated successfully:",u),l(u),r()}).catch(u=>{console.error("Error updating course state:",u)})};return e.jsxs(e.Fragment,{children:[e.jsx(pe,{id:"alert-dialog-title",children:localeMessages[`${t}_course`].replace("COURSE_NAME",s)}),e.jsx(de,{children:e.jsx(ue,{id:"alert-dialog-description",children:localeMessages[`course_${t}_confirmation`].replace("COURSE_NAME",s)})}),e.jsxs(ce,{children:[e.jsx(E,{onClick:r,children:localeMessages.cancel}),e.jsx(E,{onClick:p,autoFocus:!0,variant:"contained",children:localeMessages.continue})]})]})},To=({courseId:o,courseTitle:t,handleClose:s,handleSuccess:r})=>{const l=localStorage.getItem("apiBaseUrl"),c=localStorage.getItem("activeOrganizationId"),[d,p]=a.useState(!1),[u,m]=a.useState(""),h=()=>{fetch(`${l}/organizations/${c}/courses/${o}/`,{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")}}).then(x=>{if(x.status!=200&&x.status!=409)throw new Error("Unhandled network Error! course is not deleted");return x.json()}).then(x=>{if(x.error)throw new Error(x.error);console.log("Course state deleted successfully:",x),r(),s()}).catch(x=>{m(x.message),p(!0)})};return e.jsxs(e.Fragment,{children:[e.jsxs(pe,{id:"alert-dialog-title",children:[d&&e.jsx(K,{severity:"error",children:u}),e.jsxs(z,{variant:"h6",component:"span",children:[e.jsx(_,{sx:{display:"inline-block",alignItems:"center",mr:1,mt:1,pt:1},children:e.jsx(ve,{color:"warning"})}),e.jsx(_,{sx:{display:"inline-block"},children:localeMessages.delete_course.replace("COURSE_NAME",t)})]})]}),e.jsx(de,{children:e.jsx(ue,{id:"alert-dialog-description",children:localeMessages.course_delete_confirmation.replace("COURSE_NAME",t)})}),e.jsxs(ce,{children:[e.jsx(E,{onClick:s,children:localeMessages.cancel}),e.jsx(E,{onClick:h,autoFocus:!0,variant:"contained",children:e.jsx(z,{children:localeMessages.delete})})]})]})},ae=({onStatusChange:o})=>e.jsxs(e.Fragment,{children:[e.jsx(z,{variant:"body2",component:"div",sx:{mb:2,fontWeight:"bold"},children:localeMessages.filter}),e.jsxs(z,{variant:"subtitle2",component:"div",sx:{mb:1,fontWeight:"bold"},children:[localeMessages.course_status,":"]}),e.jsxs(bo,{defaultValue:"all",name:"course-status-radio-group",onChange:t=>{const s=t.target.value;s==="all"?o(""):s==="enabled"?o("?enabled=true"):s==="disabled"&&o("?enabled=false")},children:[e.jsx(H,{value:"all",control:e.jsx(X,{}),label:localeMessages.all}),e.jsx(H,{value:"enabled",control:e.jsx(X,{}),label:localeMessages.enabled}),e.jsx(H,{value:"disabled",control:e.jsx(X,{}),label:localeMessages.disabled})]})]});function ko(){const[o,t]=a.useState(!1),[s,r]=a.useState(null),[l,c]=a.useState([]),[d,p]=a.useState(null),[u,m]=a.useState(""),h=localStorage.getItem("userRole"),x=localStorage.getItem("apiBaseUrl"),w=localStorage.getItem("platformBaseUrl"),i=()=>{d&&fetch(`${x}/organizations/${d}/courses${u}`,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":B("csrftoken")}}).then(n=>n.json()).then(n=>c(n.courses)).catch(n=>console.error("Error fetching courses:",n))};a.useEffect(()=>{i()},[u]),a.useEffect(()=>{m(""),i()},[d]);const j=n=>{let S=l.find(v=>v.id===n.id);S&&(S.enabled=n.enabled,c([...l]))},T=(n,S,v)=>M=>{console.log(`${S} course with ID:`,n),console.log("Event:",M.target.checked),r(e.jsx(L,{sx:{p:2},children:e.jsx(yo,{courseId:n,action:S,courseTitle:v,handleClose:()=>t(!1),handleSuccess:j})})),t(!0)},I=n=>{console.log("Course created successfully:",n),c([...l,n]),t(!1)},k=n=>{console.error("Course creation failed:",n)},b=n=>{r(e.jsx(ne,{successCallback:S=>{const v=l.findIndex(M=>M.id===n.id);l[v]=S,c([...l]),t(!1)},failureCallback:S=>{console.error("Course update failed:",S)},cancelCallback:()=>t(!1),activeOrganizationId:d,createMode:!1,courseId:n.id})),t(!0)};return e.jsxs(Me,{breadCrumbList:[{label:localeMessages.course_management,href:"#"}],bottomDrawerParams:{icon:e.jsx(Ue,{}),children:e.jsx(ae,{onStatusChange:n=>m(n)})},organizationIdRefreshCallback:p,children:[e.jsx(L,{size:{xs:12,md:9},py:2,pl:2,children:e.jsxs(_,{p:2,sx:{border:"1px solid",borderColor:"border.main",backgroundColor:"background.main",borderRadius:1,minHeight:300},children:[h!=="viewer"&&e.jsx(E,{variant:"contained",startIcon:e.jsx(we,{sx:{marginLeft:direction==="rtl"?1:0}}),sx:{marginBottom:2},onClick:()=>{r(e.jsx(ne,{successCallback:I,failureCallback:k,cancelCallback:()=>t(!1),activeOrganizationId:d,createMode:!0})),t(!0)},children:localeMessages.add_course}),e.jsx(ye,{component:je,children:e.jsxs(Te,{sx:{width:"100%"},"aria-label":localeMessages.courses,children:[e.jsx(ke,{children:e.jsxs(se,{children:[e.jsx(F,{sx:{textAlign:direction==="rtl"?"right":"left"},children:localeMessages.title}),e.jsx(F,{sx:{textAlign:direction==="rtl"?"right":"left"},children:localeMessages.total_enrollments}),e.jsx(F,{sx:{textAlign:direction==="rtl"?"right":"left"},children:localeMessages.enabled}),h!=="viewer"&&e.jsx(F,{align:direction==="rtl"?"left":"right",children:localeMessages.actions})]})}),e.jsx(Ie,{children:l.length>0&&l.map(n=>e.jsxs(se,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(F,{component:"th",scope:"row",sx:{textAlign:direction==="rtl"?"right":"left"},children:e.jsx(Se,{href:`${w}/courses/${n.id}`,color:"primary.dark",children:n.title})}),e.jsx(F,{sx:{textAlign:direction==="rtl"?"right":"left"},children:n.enrollments_count.total}),e.jsx(F,{sx:{textAlign:direction==="rtl"?"right":"left"},children:e.jsx(le,{checked:n.enabled,onChange:T(n.id,n.enabled?"disable":"enable",n.title),slotProps:{input:{"aria-label":n.enabled?"Disable Course":"Enable Course"}},disabled:h==="viewer"})}),h!=="viewer"&&e.jsxs(F,{align:direction==="rtl"?"left":"right",children:[e.jsx(J,{onClick:()=>{b(n)},children:e.jsx($e,{fontSize:"small"})}),e.jsx(J,{"aria-label":`Delete ${n.title}`,onClick:()=>{r(e.jsx(To,{courseId:n.id,courseTitle:n.title,handleClose:()=>t(!1),handleSuccess:()=>{const S=l.findIndex(v=>v.id===n.id);c(l.filter((v,M)=>M!==S))}})),t(!0)},children:e.jsx(Ne,{fontSize:"small"})})]})]},n.id))})]})})]})}),e.jsx(L,{display:{xs:"none",md:"block"},size:{md:3},p:2,children:e.jsx(_,{p:2,sx:{border:"1px solid",borderColor:"border.main",borderRadius:1,minHeight:300,position:"sticky",top:80,backgroundColor:"background.main"},children:e.jsx(ae,{onStatusChange:n=>m(n)})})}),e.jsx(Ve,{open:o,onClose:()=>t(!1),fullWidth:!0,maxWidth:"sm",children:s})]})}Ce({children:e.jsx(ko,{})});
//# sourceMappingURL=courses-CveG8_Bx.js.map
