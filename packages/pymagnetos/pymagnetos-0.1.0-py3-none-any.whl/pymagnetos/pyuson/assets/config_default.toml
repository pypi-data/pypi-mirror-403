# This configuration file specifies the default values if they are not filled in the
# per-experiment config.toml file.

expid = ""
data_directory = "."  # path or "."

[files]
[files.pickup]
# Pickup coil binary file
ext = "-pickup.bin"
header = 0
precision = 8       # number of bytes/element
endian = "<"        # endian, ">" for big-endian, "<" for little-endian
order = "F"         # order style in the binary file, "F" for Fortran, "C" for C
[files.oscillo]
# Oscilloscope binary file
ext = ".bin"
header = 0
precision = 4 # number of bytes/element
endian = ">"  # endian, ">" for big-endian, "<" for little-endian
order = "F"   # order style in the binary file, "F" for Fortran, "C" for C
[files.reference_time]
# Reference time text file
ext = ".txt"
header = 8  # number of lines composing the header (data should start at header + 1)
delimiter = "\t"

[measurements]
# Measurements settings
# Link a physical measurement to a channel of the oscilloscope
# For oscillo data saved with LabVIEW, they correspond to the columns in the file (0-based)
# For WFM files they correspond to the file number (..._chX.wfm)
amplitude = 0
in_phase = 1
out_phase = 2

# Parameters are values that should be fixed once and for all for a given experiment
[parameters]
pickup_surface = 1  # surface of the pickup coil (mÂ²)
pickup_samplerate = 1  # pickup coil acquisition rate (Hz)
sample_length = 1  # length of the sample (m)
sample_speed = 1 # (estimated) speed in the measured mode (m/s)
detection_mode = "reflection"  # "reflection" or "transmission"

pickup_number = 1  # number of pickup(s) used and save in the pickup bin file
pickup_index = 0  # index of the pickup to use for analysis, 0-based
logamp_slope = 24.75e-3  # logarithmic amplificator slope

# Settings are analysis-specific and can be changed afterwards
[settings]
echo_index = 1  # number of the analyzed echo (1-based)
frame_indices = [0, 1]  # frame index to plot
rolling_mean_wlen = 3  # rolling-average time window size (in indices)
rolling_mean_subsample = false  # sub-sample resulting time trace
range_baseline = [0.01, 0.02]  # range in which the baseline of amplitude and phase are estimated in seconds
analysis_window = []  # frame time-range in which to perform attenuation and phase-shift computation
max_phase_jump = 0.5  # maximum allowed phase-jump (multiplied by pi)

[metadata]
# Parameters on how to handle time reference text file (only for bin files)
[metadata.index_map]
# map a metadata to its line index in the header (0-based)
timestamp = 0
sample_name = 1
sample_angle = 2
polarisation = 3
rf_frequency = 4
dt_acq = 5
temperature = 6
[metadata.conversion_map]
# determine whether conversion to numeric is required
timestamp = false
sample_name = false
sample_angle = false
polarisation = false
rf_frequency = true
dt_acq = true
temperature = true

[nx]
# NeXus file consolidation

[nexus]
[nexus.groups]
# NeXus groups attributes
root = {name = ""}
# processed/analysis
analysis = {}
# data
data = {}
[nexus.datasets]
# NeXus datasets attributes
