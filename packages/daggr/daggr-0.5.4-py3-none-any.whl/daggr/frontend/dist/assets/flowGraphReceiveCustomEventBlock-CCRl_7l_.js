import{c as v,d as i}from"./KHR_interactivity-0REspvdU.js";import{p as c,f as l}from"./index-C7ioxznG.js";import"./index-BmJkaHuF.js";import"./declarationMapper-4emcUw2B.js";import"./objectModelMapping-CY2JGqxk.js";class u extends v{constructor(e){super(e),this.config=e,this.initPriority=1;for(const t in this.config.eventData)this.registerDataOutput(t,this.config.eventData[t].type)}_preparePendingTasks(e){const t=e.configuration.coordinator.getCustomEventObservable(this.config.eventId);if(t&&t.hasObservers()&&t.observers.length>i.MaxEventsPerType){this._reportError(e,`FlowGraphReceiveCustomEventBlock: Too many observers for event ${this.config.eventId}. Max is ${i.MaxEventsPerType}.`);return}const r=t.add(s=>{var o;const a=Object.keys(s);for(const n of a)(o=this.getDataOutput(n))==null||o.setValue(s[n],e);this._execute(e)});e._setExecutionVariable(this,"_eventObserver",r)}_cancelPendingTasks(e){const t=e.configuration.coordinator.getCustomEventObservable(this.config.eventId);if(t){const r=e._getExecutionVariable(this,"_eventObserver",null);t.remove(r)}else c.Warn(`FlowGraphReceiveCustomEventBlock: Missing observable for event ${this.config.eventId}`)}_executeEvent(e,t){return!0}getClassName(){return"FlowGraphReceiveCustomEventBlock"}}l("FlowGraphReceiveCustomEventBlock",u);export{u as FlowGraphReceiveCustomEventBlock};
