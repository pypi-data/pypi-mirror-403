import{bR as k,bQ as B}from"./index-C7ioxznG.js";import{e as b}from"./declarationMapper-4emcUw2B.js";import{A as y}from"./objectModelMapping-CY2JGqxk.js";import"./index-BmJkaHuF.js";const d="KHR_node_hoverability",I="targetMeshPointerOver_";b("event/onHoverIn",d,{blocks:["FlowGraphPointerOverEventBlock","FlowGraphGetVariableBlock","FlowGraphIndexOfBlock","KHR_interactivity/FlowGraphGLTFDataProvider"],configuration:{stopPropagation:{name:"stopPropagation"},nodeIndex:{name:"variable",toBlock:"FlowGraphGetVariableBlock",dataTransformer(n){return I+n}}},outputs:{values:{hoverNodeIndex:{name:"index",toBlock:"FlowGraphIndexOfBlock"},controllerIndex:{name:"pointerId"}},flows:{out:{name:"done"}}},interBlockConnectors:[{input:"targetMesh",output:"value",inputBlockIndex:0,outputBlockIndex:1,isVariable:!0},{input:"array",output:"nodes",inputBlockIndex:2,outputBlockIndex:3,isVariable:!0},{input:"object",output:"meshUnderPointer",inputBlockIndex:2,outputBlockIndex:0,isVariable:!0}],extraProcessor(n,o,i,s,t,u,e){var p,l,h,f,v,x,m;const a=t[t.length-1];a.config=a.config||{},a.config.glTF=e;const r=(h=(l=(p=n.configuration)==null?void 0:p.nodeIndex)==null?void 0:l.value)==null?void 0:h[0];if(r===void 0||typeof r!="number")throw new Error("nodeIndex not found in configuration");const c=I+r;return t[1].config.variable=c,u._userVariables[c]={className:"Mesh",id:(v=(f=e==null?void 0:e.nodes)==null?void 0:f[r]._babylonTransformNode)==null?void 0:v.id,uniqueId:(m=(x=e==null?void 0:e.nodes)==null?void 0:x[r]._babylonTransformNode)==null?void 0:m.uniqueId},t}});const _="targetMeshPointerOut_";b("event/onHoverOut",d,{blocks:["FlowGraphPointerOutEventBlock","FlowGraphGetVariableBlock","FlowGraphIndexOfBlock","KHR_interactivity/FlowGraphGLTFDataProvider"],configuration:{stopPropagation:{name:"stopPropagation"},nodeIndex:{name:"variable",toBlock:"FlowGraphGetVariableBlock",dataTransformer(n){return _+n}}},outputs:{values:{hoverNodeIndex:{name:"index",toBlock:"FlowGraphIndexOfBlock"},controllerIndex:{name:"pointerId"}},flows:{out:{name:"done"}}},interBlockConnectors:[{input:"targetMesh",output:"value",inputBlockIndex:0,outputBlockIndex:1,isVariable:!0},{input:"array",output:"nodes",inputBlockIndex:2,outputBlockIndex:3,isVariable:!0},{input:"object",output:"meshOutOfPointer",inputBlockIndex:2,outputBlockIndex:0,isVariable:!0}],extraProcessor(n,o,i,s,t,u,e){var p,l,h,f,v,x,m;const a=t[t.length-1];a.config=a.config||{},a.config.glTF=e;const r=(h=(l=(p=n.configuration)==null?void 0:p.nodeIndex)==null?void 0:l.value)==null?void 0:h[0];if(r===void 0||typeof r!="number")throw new Error("nodeIndex not found in configuration");const c=_+r;return t[1].config.variable=c,u._userVariables[c]={className:"Mesh",id:(v=(f=e==null?void 0:e.nodes)==null?void 0:f[r]._babylonTransformNode)==null?void 0:v.id,uniqueId:(m=(x=e==null?void 0:e.nodes)==null?void 0:x[r]._babylonTransformNode)==null?void 0:m.uniqueId},t}});y("/nodes/{}/extensions/KHR_node_hoverability/hoverable",{get:n=>{const o=n._babylonTransformNode;return o&&o.pointerOverDisableMeshTesting!==void 0?o.pointerOverDisableMeshTesting:!0},set:(n,o)=>{var i;(i=o._primitiveBabylonMeshes)==null||i.forEach(s=>{s.pointerOverDisableMeshTesting=!n})},getTarget:n=>n._babylonTransformNode,getPropertyName:[()=>"pointerOverDisableMeshTesting"],type:"boolean"});class g{constructor(o){this.name=d,this._loader=o,this.enabled=o.isExtensionUsed(d)}async onReady(){var o;(o=this._loader.gltf.nodes)==null||o.forEach(i=>{var s,t,u;(s=i.extensions)!=null&&s.KHR_node_hoverability&&((t=i.extensions)==null?void 0:t.KHR_node_hoverability.hoverable)===!1&&((u=i._babylonTransformNode)==null||u.getChildMeshes().forEach(e=>{e.pointerOverDisableMeshTesting=!0}))})}dispose(){this._loader=null}}k(d);B(d,!0,n=>new g(n));export{g as KHR_node_hoverability};
