import{GLTFLoader as m}from"./glTFLoader-dcV3nFjy.js";import{bR as d,bQ as c}from"./index-C7ioxznG.js";import"./index-BmJkaHuF.js";import"./bone-D3wPsQsS.js";import"./skeleton-Dp5NNatR.js";import"./rawTexture-B_Rn1rXF.js";import"./assetContainer-WmWzRef8.js";import"./objectModelMapping-CY2JGqxk.js";const i="KHR_materials_anisotropy";class _{constructor(t){this.name=i,this.order=195,this._loader=t,this.enabled=this._loader.isExtensionUsed(i)}dispose(){this._loader=null}loadMaterialPropertiesAsync(t,o,r){return m.LoadExtensionAsync(t,o,this.name,async(s,n)=>{const e=new Array;e.push(this._loader.loadMaterialPropertiesAsync(t,o,r)),e.push(this._loadAnisotropyPropertiesAsync(s,n,r)),await Promise.all(e)})}async _loadAnisotropyPropertiesAsync(t,o,r){const s=this._loader._getOrCreateMaterialAdapter(r),n=new Array,e=o.anisotropyStrength??0,l=o.anisotropyRotation??0;s.specularRoughnessAnisotropy=e,s.geometryTangentAngle=l;const p=o.extensions??{};(!p.EXT_materials_anisotropy_openpbr||!p.EXT_materials_anisotropy_openpbr.openPbrAnisotropyEnabled)&&s.configureGltfStyleAnisotropy(!0),o.anisotropyTexture&&(o.anisotropyTexture.nonColorData=!0,n.push(this._loader.loadTextureInfoAsync(`${t}/anisotropyTexture`,o.anisotropyTexture,y=>{y.name=`${r.name} (Anisotropy Intensity)`,s.geometryTangentTexture=y}))),await Promise.all(n)}}d(i);c(i,!0,a=>new _(a));export{_ as KHR_materials_anisotropy};
