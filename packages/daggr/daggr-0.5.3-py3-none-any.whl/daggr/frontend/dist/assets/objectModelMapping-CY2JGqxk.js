import{b$ as P,o as _,V as h,ab as j,T as N,bC as C,_ as p,s as m,bs as R,f as M,a as T,Q as L,g as D,c0 as S}from"./index-C7ioxznG.js";C.AddNodeConstructor("Light_Type_2",(t,e)=>()=>new a(t,h.Zero(),h.Zero(),0,0,e));class a extends P{get iesProfileTexture(){return this._iesProfileTexture}set iesProfileTexture(e){this._iesProfileTexture!==e&&(this._iesProfileTexture=e,this._iesProfileTexture&&a._IsTexture(this._iesProfileTexture)&&this._iesProfileTexture.onLoadObservable.addOnce(()=>{this._markMeshesAsLightDirty()}))}get angle(){return this._angle}set angle(e){this._angle=e,this._cosHalfAngle=Math.cos(e*.5),this._projectionTextureProjectionLightDirty=!0,this.forceProjectionMatrixCompute(),this._computeAngleValues()}get innerAngle(){return this._innerAngle}set innerAngle(e){this._innerAngle=e,this._computeAngleValues()}get shadowAngleScale(){return this._shadowAngleScale}set shadowAngleScale(e){this._shadowAngleScale=e,this.forceProjectionMatrixCompute()}get projectionTextureMatrix(){return this._projectionTextureMatrix}get projectionTextureLightNear(){return this._projectionTextureLightNear}set projectionTextureLightNear(e){this._projectionTextureLightNear=e,this._projectionTextureProjectionLightDirty=!0}get projectionTextureLightFar(){return this._projectionTextureLightFar}set projectionTextureLightFar(e){this._projectionTextureLightFar=e,this._projectionTextureProjectionLightDirty=!0}get projectionTextureUpDirection(){return this._projectionTextureUpDirection}set projectionTextureUpDirection(e){this._projectionTextureUpDirection=e,this._projectionTextureProjectionLightDirty=!0}get projectionTexture(){return this._projectionTexture}set projectionTexture(e){this._projectionTexture!==e&&(this._projectionTexture=e,this._projectionTextureDirty=!0,this._projectionTexture&&!this._projectionTexture.isReady()&&(a._IsProceduralTexture(this._projectionTexture)?this._projectionTexture.getEffect().executeWhenCompiled(()=>{this._markMeshesAsLightDirty()}):a._IsTexture(this._projectionTexture)&&this._projectionTexture.onLoadObservable.addOnce(()=>{this._markMeshesAsLightDirty()})))}static _IsProceduralTexture(e){return e.onGeneratedObservable!==void 0}static _IsTexture(e){return e.onLoadObservable!==void 0}get projectionTextureProjectionLightMatrix(){return this._projectionTextureProjectionLightMatrix}set projectionTextureProjectionLightMatrix(e){this._projectionTextureProjectionLightMatrix=e,this._projectionTextureProjectionLightDirty=!1,this._projectionTextureDirty=!0}constructor(e,r,i,n,s,u,c){super(e,u,c),this._innerAngle=0,this._iesProfileTexture=null,this._projectionTextureMatrix=_.Zero(),this._projectionTextureLightNear=1e-6,this._projectionTextureLightFar=1e3,this._projectionTextureUpDirection=h.Up(),this._projectionTextureViewLightDirty=!0,this._projectionTextureProjectionLightDirty=!0,this._projectionTextureDirty=!0,this._projectionTextureViewTargetVector=h.Zero(),this._projectionTextureViewLightMatrix=_.Zero(),this._projectionTextureProjectionLightMatrix=_.Zero(),this._projectionTextureScalingMatrix=_.FromValues(.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1),this.position=r,this.direction=i,this.angle=n,this.exponent=s}getClassName(){return"SpotLight"}getTypeID(){return j.LIGHTTYPEID_SPOTLIGHT}_setDirection(e){super._setDirection(e),this._projectionTextureViewLightDirty=!0}_setPosition(e){super._setPosition(e),this._projectionTextureViewLightDirty=!0}_setDefaultShadowProjectionMatrix(e,r,i){const n=this.getScene().activeCamera;if(!n)return;this._shadowAngleScale=this._shadowAngleScale||1;const s=this._shadowAngleScale*this._angle,u=this.shadowMinZ!==void 0?this.shadowMinZ:n.minZ,c=this.shadowMaxZ!==void 0?this.shadowMaxZ:n.maxZ,l=this.getScene().getEngine().useReverseDepthBuffer;_.PerspectiveFovLHToRef(s,1,l?c:u,l?u:c,e,!0,this._scene.getEngine().isNDCHalfZRange,void 0,l)}_computeProjectionTextureViewLightMatrix(){this._projectionTextureViewLightDirty=!1,this._projectionTextureDirty=!0,this.getAbsolutePosition().addToRef(this.getShadowDirection(),this._projectionTextureViewTargetVector),_.LookAtLHToRef(this.getAbsolutePosition(),this._projectionTextureViewTargetVector,this._projectionTextureUpDirection,this._projectionTextureViewLightMatrix)}_computeProjectionTextureProjectionLightMatrix(){this._projectionTextureProjectionLightDirty=!1,this._projectionTextureDirty=!0;const e=this.projectionTextureLightFar,r=this.projectionTextureLightNear,i=e/(e-r),n=-i*r,s=1/Math.tan(this._angle/2);_.FromValuesToRef(s/1,0,0,0,0,s,0,0,0,0,i,1,0,0,n,0,this._projectionTextureProjectionLightMatrix)}_computeProjectionTextureMatrix(){if(this._projectionTextureDirty=!1,this._projectionTextureViewLightMatrix.multiplyToRef(this._projectionTextureProjectionLightMatrix,this._projectionTextureMatrix),this._projectionTexture instanceof N){const e=this._projectionTexture.uScale/2,r=this._projectionTexture.vScale/2;_.FromValuesToRef(e,0,0,0,0,r,0,0,0,0,.5,0,.5,.5,.5,1,this._projectionTextureScalingMatrix)}this._projectionTextureMatrix.multiplyToRef(this._projectionTextureScalingMatrix,this._projectionTextureMatrix)}_buildUniformLayout(){this._uniformBuffer.addUniform("vLightData",4),this._uniformBuffer.addUniform("vLightDiffuse",4),this._uniformBuffer.addUniform("vLightSpecular",4),this._uniformBuffer.addUniform("vLightDirection",3),this._uniformBuffer.addUniform("vLightFalloff",4),this._uniformBuffer.addUniform("shadowsInfo",3),this._uniformBuffer.addUniform("depthValues",2),this._uniformBuffer.create()}_computeAngleValues(){this._lightAngleScale=1/Math.max(.001,Math.cos(this._innerAngle*.5)-this._cosHalfAngle),this._lightAngleOffset=-this._cosHalfAngle*this._lightAngleScale}transferTexturesToEffect(e,r){return this.projectionTexture&&this.projectionTexture.isReady()&&(this._projectionTextureViewLightDirty&&this._computeProjectionTextureViewLightMatrix(),this._projectionTextureProjectionLightDirty&&this._computeProjectionTextureProjectionLightMatrix(),this._projectionTextureDirty&&this._computeProjectionTextureMatrix(),e.setMatrix("textureProjectionMatrix"+r,this._projectionTextureMatrix),e.setTexture("projectionLightTexture"+r,this.projectionTexture)),this._iesProfileTexture&&this._iesProfileTexture.isReady()&&e.setTexture("iesLightTexture"+r,this._iesProfileTexture),this}transferToEffect(e,r){let i;const n=this._scene.floatingOriginOffset;return this.computeTransformedInformation()?(this._uniformBuffer.updateFloat4("vLightData",this.transformedPosition.x-n.x,this.transformedPosition.y-n.y,this.transformedPosition.z-n.z,this.exponent,r),i=h.Normalize(this.transformedDirection)):(this._uniformBuffer.updateFloat4("vLightData",this.position.x-n.x,this.position.y-n.y,this.position.z-n.z,this.exponent,r),i=h.Normalize(this.direction)),this._uniformBuffer.updateFloat4("vLightDirection",i.x,i.y,i.z,this._cosHalfAngle,r),this._uniformBuffer.updateFloat4("vLightFalloff",this.range,this._inverseSquaredRange,this._lightAngleScale,this._lightAngleOffset,r),this}transferToNodeMaterialEffect(e,r){let i;return this.computeTransformedInformation()?i=h.Normalize(this.transformedDirection):i=h.Normalize(this.direction),this.getScene().useRightHandedSystem?e.setFloat3(r,-i.x,-i.y,-i.z):e.setFloat3(r,i.x,i.y,i.z),this}dispose(){super.dispose(),this._projectionTexture&&this._projectionTexture.dispose(),this._iesProfileTexture&&(this._iesProfileTexture.dispose(),this._iesProfileTexture=null)}getDepthMinZ(e){const r=this._scene.getEngine(),i=this.shadowMinZ!==void 0?this.shadowMinZ:(e==null?void 0:e.minZ)??0;return r.useReverseDepthBuffer&&r.isNDCHalfZRange?i:this._scene.getEngine().isNDCHalfZRange?0:i}getDepthMaxZ(e){const r=this._scene.getEngine(),i=this.shadowMaxZ!==void 0?this.shadowMaxZ:(e==null?void 0:e.maxZ)??1e4;return r.useReverseDepthBuffer&&r.isNDCHalfZRange?0:i}prepareLightSpecificDefines(e,r){e["SPOTLIGHT"+r]=!0,e["PROJECTEDLIGHTTEXTURE"+r]=!!(this.projectionTexture&&this.projectionTexture.isReady()),e["IESLIGHTTEXTURE"+r]=!!(this._iesProfileTexture&&this._iesProfileTexture.isReady())}}p([m()],a.prototype,"angle",null);p([m()],a.prototype,"innerAngle",null);p([m()],a.prototype,"shadowAngleScale",null);p([m()],a.prototype,"exponent",void 0);p([m()],a.prototype,"projectionTextureLightNear",null);p([m()],a.prototype,"projectionTextureLightFar",null);p([m()],a.prototype,"projectionTextureUpDirection",null);p([R("projectedLightTexture")],a.prototype,"_projectionTexture",void 0);M("BABYLON.SpotLight",a);const F=[{regex:new RegExp("^/nodes/\\d+/extensions/")}];class w{constructor(e,r){this._gltf=e,this._infoTree=r}convert(e){let r=this._gltf,i=this._infoTree,n;if(!e.startsWith("/"))throw new Error("Path must start with a /");const s=e.split("/");if(s.shift(),s[s.length-1].includes(".length")){const l=s[s.length-1].split(".");s.pop(),s.push(...l)}let u=!1;for(const c of s){const l=c==="length";if(l&&!i.__array__)throw new Error(`Path ${e} is invalid`);if(i.__ignoreObjectTree__&&(u=!0),i.__array__&&!l)i=i.__array__;else if(i=i[c],!i)throw new Error(`Path ${e} is invalid`);if(!u)if(r===void 0){if(!F.find(y=>y.regex.test(e)))throw new Error(`Path ${e} is invalid`)}else l||(r=r==null?void 0:r[c]);(i.__target__||l)&&(n=r)}return{object:n,info:i}}}const A={length:{type:"number",get:t=>t.length,getTarget:t=>t.map(e=>e._babylonTransformNode),getPropertyName:[()=>"length"]},__array__:{__target__:!0,translation:{type:"Vector3",get:t=>{var e;return(e=t._babylonTransformNode)==null?void 0:e.position},set:(t,e)=>{var r;return(r=e._babylonTransformNode)==null?void 0:r.position.copyFrom(t)},getTarget:t=>t._babylonTransformNode,getPropertyName:[()=>"position"]},rotation:{type:"Quaternion",get:t=>{var e;return(e=t._babylonTransformNode)==null?void 0:e.rotationQuaternion},set:(t,e)=>{var r,i;return(i=(r=e._babylonTransformNode)==null?void 0:r.rotationQuaternion)==null?void 0:i.copyFrom(t)},getTarget:t=>t._babylonTransformNode,getPropertyName:[()=>"rotationQuaternion"]},scale:{type:"Vector3",get:t=>{var e;return(e=t._babylonTransformNode)==null?void 0:e.scaling},set:(t,e)=>{var r;return(r=e._babylonTransformNode)==null?void 0:r.scaling.copyFrom(t)},getTarget:t=>t._babylonTransformNode,getPropertyName:[()=>"scaling"]},weights:{length:{type:"number",get:t=>t._numMorphTargets,getTarget:t=>t._babylonTransformNode,getPropertyName:[()=>"influence"]},__array__:{__target__:!0,type:"number",get:(t,e)=>{var r,i;return e!==void 0?(i=(r=t._primitiveBabylonMeshes)==null?void 0:r[0].morphTargetManager)==null?void 0:i.getTarget(e).influence:void 0},getTarget:t=>t._babylonTransformNode,getPropertyName:[()=>"influence"]},type:"number[]",get:(t,e)=>[0],getTarget:t=>t._babylonTransformNode,getPropertyName:[()=>"influence"]},matrix:{type:"Matrix",get:t=>{var e,r,i;return _.Compose((e=t._babylonTransformNode)==null?void 0:e.scaling,(r=t._babylonTransformNode)==null?void 0:r.rotationQuaternion,(i=t._babylonTransformNode)==null?void 0:i.position)},getTarget:t=>t._babylonTransformNode,isReadOnly:!0},globalMatrix:{type:"Matrix",get:t=>{var n,s,u,c,l,x,y;const e=_.Identity();let r=t.parent;for(;r&&r.parent;)r=r.parent;const i=((n=t._babylonTransformNode)==null?void 0:n.position._isDirty)||((u=(s=t._babylonTransformNode)==null?void 0:s.rotationQuaternion)==null?void 0:u._isDirty)||((c=t._babylonTransformNode)==null?void 0:c.scaling._isDirty);if(r){const d=(l=r._babylonTransformNode)==null?void 0:l.computeWorldMatrix(!0).invert();d&&((y=(x=t._babylonTransformNode)==null?void 0:x.computeWorldMatrix(i))==null||y.multiplyToRef(d,e))}else t._babylonTransformNode&&e.copyFrom(t._babylonTransformNode.computeWorldMatrix(i));return e},getTarget:t=>t._babylonTransformNode,isReadOnly:!0},extensions:{EXT_lights_ies:{multiplier:{type:"number",get:t=>{var e,r;return(r=(e=t._babylonTransformNode)==null?void 0:e.getChildren(i=>i instanceof a,!0)[0])==null?void 0:r.intensity},getTarget:t=>{var e;return(e=t._babylonTransformNode)==null?void 0:e.getChildren(r=>r instanceof a,!0)[0]},set:(t,e)=>{if(e._babylonTransformNode){const r=e._babylonTransformNode.getChildren(i=>i instanceof a,!0)[0];r&&(r.intensity=t)}}},color:{type:"Color3",get:t=>{var e,r;return(r=(e=t._babylonTransformNode)==null?void 0:e.getChildren(i=>i instanceof a,!0)[0])==null?void 0:r.diffuse},getTarget:t=>{var e;return(e=t._babylonTransformNode)==null?void 0:e.getChildren(r=>r instanceof a,!0)[0]},set:(t,e)=>{if(e._babylonTransformNode){const r=e._babylonTransformNode.getChildren(i=>i instanceof a,!0)[0];r&&(r.diffuse=t)}}}},KHR_node_visibility:{visible:{type:"boolean",get:t=>t._primitiveBabylonMeshes?t._primitiveBabylonMeshes[0].isVisible:!1,getTarget:()=>{},set:(t,e)=>{e._primitiveBabylonMeshes&&e._primitiveBabylonMeshes.forEach(r=>r.isVisible=t)}}}}}},v={length:{type:"number",get:t=>t.length,getTarget:t=>t.map(e=>e._babylonAnimationGroup),getPropertyName:[()=>"length"]},__array__:{}},H={length:{type:"number",get:t=>t.length,getTarget:t=>t.map(e=>{var r;return(r=e.primitives[0]._instanceData)==null?void 0:r.babylonSourceMesh}),getPropertyName:[()=>"length"]},__array__:{}},Z={__array__:{__target__:!0,orthographic:{xmag:{componentsCount:2,type:"Vector2",get:t=>{var e,r;return new T(((e=t._babylonCamera)==null?void 0:e.orthoLeft)??0,((r=t._babylonCamera)==null?void 0:r.orthoRight)??0)},set:(t,e)=>{e._babylonCamera&&(e._babylonCamera.orthoLeft=t.x,e._babylonCamera.orthoRight=t.y)},getTarget:t=>t,getPropertyName:[()=>"orthoLeft",()=>"orthoRight"]},ymag:{componentsCount:2,type:"Vector2",get:t=>{var e,r;return new T(((e=t._babylonCamera)==null?void 0:e.orthoBottom)??0,((r=t._babylonCamera)==null?void 0:r.orthoTop)??0)},set:(t,e)=>{e._babylonCamera&&(e._babylonCamera.orthoBottom=t.x,e._babylonCamera.orthoTop=t.y)},getTarget:t=>t,getPropertyName:[()=>"orthoBottom",()=>"orthoTop"]},zfar:{type:"number",get:t=>{var e;return(e=t._babylonCamera)==null?void 0:e.maxZ},set:(t,e)=>{e._babylonCamera&&(e._babylonCamera.maxZ=t)},getTarget:t=>t,getPropertyName:[()=>"maxZ"]},znear:{type:"number",get:t=>{var e;return(e=t._babylonCamera)==null?void 0:e.minZ},set:(t,e)=>{e._babylonCamera&&(e._babylonCamera.minZ=t)},getTarget:t=>t,getPropertyName:[()=>"minZ"]}},perspective:{aspectRatio:{type:"number",get:t=>{var e;return(e=t._babylonCamera)==null?void 0:e.getEngine().getAspectRatio(t._babylonCamera)},getTarget:t=>t,getPropertyName:[()=>"aspectRatio"],isReadOnly:!0},yfov:{type:"number",get:t=>{var e;return(e=t._babylonCamera)==null?void 0:e.fov},set:(t,e)=>{e._babylonCamera&&(e._babylonCamera.fov=t)},getTarget:t=>t,getPropertyName:[()=>"fov"]},zfar:{type:"number",get:t=>{var e;return(e=t._babylonCamera)==null?void 0:e.maxZ},set:(t,e)=>{e._babylonCamera&&(e._babylonCamera.maxZ=t)},getTarget:t=>t,getPropertyName:[()=>"maxZ"]},znear:{type:"number",get:t=>{var e;return(e=t._babylonCamera)==null?void 0:e.minZ},set:(t,e)=>{e._babylonCamera&&(e._babylonCamera.minZ=t)},getTarget:t=>t,getPropertyName:[()=>"minZ"]}}}},K={__array__:{__target__:!0,emissiveFactor:{type:"Color3",get:(t,e,r)=>o(t,e,r).emissiveColor,set:(t,e,r,i)=>o(e,r,i).emissiveColor.copyFrom(t),getTarget:(t,e,r)=>o(t,e,r),getPropertyName:[()=>"emissiveColor"]},emissiveTexture:{extensions:{KHR_texture_transform:g("emissiveTexture")}},normalTexture:{scale:{type:"number",get:(t,e,r)=>{var i;return(i=f(t,r,"bumpTexture"))==null?void 0:i.level},set:(t,e,r,i)=>{const n=f(e,i,"bumpTexture");n&&(n.level=t)},getTarget:(t,e,r)=>o(t,e,r),getPropertyName:[()=>"level"]},extensions:{KHR_texture_transform:g("bumpTexture")}},occlusionTexture:{strength:{type:"number",get:(t,e,r)=>o(t,e,r).ambientTextureStrength,set:(t,e,r,i)=>{const n=o(e,r,i);n&&(n.ambientTextureStrength=t)},getTarget:(t,e,r)=>o(t,e,r),getPropertyName:[()=>"ambientTextureStrength"]},extensions:{KHR_texture_transform:g("ambientTexture")}},pbrMetallicRoughness:{baseColorFactor:{type:"Color4",get:(t,e,r)=>{const i=o(t,e,r);return D.FromColor3(i.albedoColor,i.alpha)},set:(t,e,r,i)=>{const n=o(e,r,i);n.albedoColor.set(t.r,t.g,t.b),n.alpha=t.a},getTarget:(t,e,r)=>o(t,e,r),getPropertyName:[()=>"albedoColor",()=>"alpha"]},baseColorTexture:{extensions:{KHR_texture_transform:g("albedoTexture")}},metallicFactor:{type:"number",get:(t,e,r)=>o(t,e,r).metallic,set:(t,e,r,i)=>{const n=o(e,r,i);n&&(n.metallic=t)},getTarget:(t,e,r)=>o(t,e,r),getPropertyName:[()=>"metallic"]},roughnessFactor:{type:"number",get:(t,e,r)=>o(t,e,r).roughness,set:(t,e,r,i)=>{const n=o(e,r,i);n&&(n.roughness=t)},getTarget:(t,e,r)=>o(t,e,r),getPropertyName:[()=>"roughness"]},metallicRoughnessTexture:{extensions:{KHR_texture_transform:g("metallicTexture")}}},extensions:{KHR_materials_anisotropy:{anisotropyStrength:{type:"number",get:(t,e,r)=>o(t,e,r).anisotropy.intensity,set:(t,e,r,i)=>{o(e,r,i).anisotropy.intensity=t},getTarget:(t,e,r)=>o(t,e,r),getPropertyName:[()=>"anisotropy.intensity"]},anisotropyRotation:{type:"number",get:(t,e,r)=>o(t,e,r).anisotropy.angle,set:(t,e,r,i)=>{o(e,r,i).anisotropy.angle=t},getTarget:(t,e,r)=>o(t,e,r),getPropertyName:[()=>"anisotropy.angle"]},anisotropyTexture:{extensions:{KHR_texture_transform:g("anisotropy","texture")}}},KHR_materials_clearcoat:{clearcoatFactor:{type:"number",get:(t,e,r)=>o(t,e,r).clearCoat.intensity,set:(t,e,r,i)=>{o(e,r,i).clearCoat.intensity=t},getTarget:(t,e,r)=>o(t,e,r),getPropertyName:[()=>"clearCoat.intensity"]},clearcoatRoughnessFactor:{type:"number",get:(t,e,r)=>o(t,e,r).clearCoat.roughness,set:(t,e,r,i)=>{o(e,r,i).clearCoat.roughness=t},getTarget:(t,e,r)=>o(t,e,r),getPropertyName:[()=>"clearCoat.roughness"]},clearcoatTexture:{extensions:{KHR_texture_transform:g("clearCoat","texture")}},clearcoatNormalTexture:{scale:{type:"number",get:(t,e,r)=>{var i;return(i=o(t,e,r).clearCoat.bumpTexture)==null?void 0:i.level},getTarget:o,set:(t,e,r,i)=>o(e,r,i).clearCoat.bumpTexture.level=t},extensions:{KHR_texture_transform:g("clearCoat","bumpTexture")}},clearcoatRoughnessTexture:{extensions:{KHR_texture_transform:g("clearCoat","textureRoughness")}}},KHR_materials_dispersion:{dispersion:{type:"number",get:(t,e,r)=>o(t,e,r).subSurface.dispersion,getTarget:o,set:(t,e,r,i)=>o(e,r,i).subSurface.dispersion=t}},KHR_materials_emissive_strength:{emissiveStrength:{type:"number",get:(t,e,r)=>o(t,e,r).emissiveIntensity,getTarget:o,set:(t,e,r,i)=>o(e,r,i).emissiveIntensity=t}},KHR_materials_ior:{ior:{type:"number",get:(t,e,r)=>o(t,e,r).indexOfRefraction,getTarget:o,set:(t,e,r,i)=>o(e,r,i).indexOfRefraction=t}},KHR_materials_iridescence:{iridescenceFactor:{type:"number",get:(t,e,r)=>o(t,e,r).iridescence.intensity,getTarget:o,set:(t,e,r,i)=>o(e,r,i).iridescence.intensity=t},iridescenceIor:{type:"number",get:(t,e,r)=>o(t,e,r).iridescence.indexOfRefraction,getTarget:o,set:(t,e,r,i)=>o(e,r,i).iridescence.indexOfRefraction=t},iridescenceTexture:{extensions:{KHR_texture_transform:g("iridescence","texture")}},iridescenceThicknessMaximum:{type:"number",get:(t,e,r)=>o(t,e,r).iridescence.maximumThickness,getTarget:o,set:(t,e,r,i)=>o(e,r,i).iridescence.maximumThickness=t},iridescenceThicknessMinimum:{type:"number",get:(t,e,r)=>o(t,e,r).iridescence.minimumThickness,getTarget:o,set:(t,e,r,i)=>o(e,r,i).iridescence.minimumThickness=t},iridescenceThicknessTexture:{extensions:{KHR_texture_transform:g("iridescence","thicknessTexture")}}},KHR_materials_sheen:{sheenColorFactor:{type:"Color3",get:(t,e,r)=>o(t,e,r).sheen.color,getTarget:o,set:(t,e,r,i)=>o(e,r,i).sheen.color.copyFrom(t)},sheenColorTexture:{extensions:{KHR_texture_transform:g("sheen","texture")}},sheenRoughnessFactor:{type:"number",get:(t,e,r)=>o(t,e,r).sheen.intensity,getTarget:o,set:(t,e,r,i)=>o(e,r,i).sheen.intensity=t},sheenRoughnessTexture:{extensions:{KHR_texture_transform:g("sheen","thicknessTexture")}}},KHR_materials_specular:{specularFactor:{type:"number",get:(t,e,r)=>o(t,e,r).metallicF0Factor,getTarget:o,set:(t,e,r,i)=>o(e,r,i).metallicF0Factor=t,getPropertyName:[()=>"metallicF0Factor"]},specularColorFactor:{type:"Color3",get:(t,e,r)=>o(t,e,r).metallicReflectanceColor,getTarget:o,set:(t,e,r,i)=>o(e,r,i).metallicReflectanceColor.copyFrom(t),getPropertyName:[()=>"metallicReflectanceColor"]},specularTexture:{extensions:{KHR_texture_transform:g("metallicReflectanceTexture")}},specularColorTexture:{extensions:{KHR_texture_transform:g("reflectanceTexture")}}},KHR_materials_transmission:{transmissionFactor:{type:"number",get:(t,e,r)=>o(t,e,r).subSurface.refractionIntensity,getTarget:o,set:(t,e,r,i)=>o(e,r,i).subSurface.refractionIntensity=t,getPropertyName:[()=>"subSurface.refractionIntensity"]},transmissionTexture:{extensions:{KHR_texture_transform:g("subSurface","refractionIntensityTexture")}}},KHR_materials_diffuse_transmission:{diffuseTransmissionFactor:{type:"number",get:(t,e,r)=>o(t,e,r).subSurface.translucencyIntensity,getTarget:o,set:(t,e,r,i)=>o(e,r,i).subSurface.translucencyIntensity=t},diffuseTransmissionTexture:{extensions:{KHR_texture_transform:g("subSurface","translucencyIntensityTexture")}},diffuseTransmissionColorFactor:{type:"Color3",get:(t,e,r)=>o(t,e,r).subSurface.translucencyColor,getTarget:o,set:(t,e,r,i)=>{var n;return t&&((n=o(e,r,i).subSurface.translucencyColor)==null?void 0:n.copyFrom(t))}},diffuseTransmissionColorTexture:{extensions:{KHR_texture_transform:g("subSurface","translucencyColorTexture")}}},KHR_materials_volume:{attenuationColor:{type:"Color3",get:(t,e,r)=>o(t,e,r).subSurface.tintColor,getTarget:o,set:(t,e,r,i)=>o(e,r,i).subSurface.tintColor.copyFrom(t)},attenuationDistance:{type:"number",get:(t,e,r)=>o(t,e,r).subSurface.tintColorAtDistance,getTarget:o,set:(t,e,r,i)=>o(e,r,i).subSurface.tintColorAtDistance=t},thicknessFactor:{type:"number",get:(t,e,r)=>o(t,e,r).subSurface.maximumThickness,getTarget:o,set:(t,e,r,i)=>o(e,r,i).subSurface.maximumThickness=t},thicknessTexture:{extensions:{KHR_texture_transform:g("subSurface","thicknessTexture")}}}}}},V={KHR_lights_punctual:{lights:{length:{type:"number",get:t=>t.length,getTarget:t=>t.map(e=>e._babylonLight),getPropertyName:[t=>"length"]},__array__:{__target__:!0,color:{type:"Color3",get:t=>{var e;return(e=t._babylonLight)==null?void 0:e.diffuse},set:(t,e)=>{var r;return(r=e._babylonLight)==null?void 0:r.diffuse.copyFrom(t)},getTarget:t=>t._babylonLight,getPropertyName:[t=>"diffuse"]},intensity:{type:"number",get:t=>{var e;return(e=t._babylonLight)==null?void 0:e.intensity},set:(t,e)=>e._babylonLight?e._babylonLight.intensity=t:void 0,getTarget:t=>t._babylonLight,getPropertyName:[t=>"intensity"]},range:{type:"number",get:t=>{var e;return(e=t._babylonLight)==null?void 0:e.range},set:(t,e)=>e._babylonLight?e._babylonLight.range=t:void 0,getTarget:t=>t._babylonLight,getPropertyName:[t=>"range"]},spot:{innerConeAngle:{type:"number",get:t=>{var e;return(e=t._babylonLight)==null?void 0:e.innerAngle},set:(t,e)=>e._babylonLight?e._babylonLight.innerAngle=t:void 0,getTarget:t=>t._babylonLight,getPropertyName:[t=>"innerConeAngle"]},outerConeAngle:{type:"number",get:t=>{var e;return(e=t._babylonLight)==null?void 0:e.angle},set:(t,e)=>e._babylonLight?e._babylonLight.angle=t:void 0,getTarget:t=>t._babylonLight,getPropertyName:[t=>"outerConeAngle"]}}}}},EXT_lights_area:{lights:{length:{type:"number",get:t=>t.length,getTarget:t=>t.map(e=>e._babylonLight),getPropertyName:[t=>"length"]},__array__:{__target__:!0,color:{type:"Color3",get:t=>{var e;return(e=t._babylonLight)==null?void 0:e.diffuse},set:(t,e)=>{var r;return(r=e._babylonLight)==null?void 0:r.diffuse.copyFrom(t)},getTarget:t=>t._babylonLight,getPropertyName:[t=>"diffuse"]},intensity:{type:"number",get:t=>{var e;return(e=t._babylonLight)==null?void 0:e.intensity},set:(t,e)=>e._babylonLight?e._babylonLight.intensity=t:void 0,getTarget:t=>t._babylonLight,getPropertyName:[t=>"intensity"]},size:{type:"number",get:t=>{var e;return(e=t._babylonLight)==null?void 0:e.height},set:(t,e)=>e._babylonLight?e._babylonLight.height=t:void 0,getTarget:t=>t._babylonLight,getPropertyName:[t=>"size"]},rect:{aspect:{type:"number",get:t=>{var e,r;return((e=t._babylonLight)==null?void 0:e.width)/((r=t._babylonLight)==null?void 0:r.height)},set:(t,e)=>e._babylonLight?e._babylonLight.width=t*e._babylonLight.height:void 0,getTarget:t=>t._babylonLight,getPropertyName:[t=>"aspect"]}}}}},EXT_lights_ies:{lights:{length:{type:"number",get:t=>t.length,getTarget:t=>t.map(e=>e._babylonLight),getPropertyName:[t=>"length"]}}},EXT_lights_image_based:{lights:{length:{type:"number",get:t=>t.length,getTarget:t=>t.map(e=>e._babylonTexture),getPropertyName:[t=>"length"]},__array__:{__target__:!0,intensity:{type:"number",get:t=>{var e;return(e=t._babylonTexture)==null?void 0:e.level},set:(t,e)=>{e._babylonTexture&&(e._babylonTexture.level=t)},getTarget:t=>t._babylonTexture},rotation:{type:"Quaternion",get:t=>{var e;return t._babylonTexture&&L.FromRotationMatrix((e=t._babylonTexture)==null?void 0:e.getReflectionTextureMatrix())},set:(t,e)=>{var r;e._babylonTexture&&((r=e._babylonTexture.getScene())!=null&&r.useRightHandedSystem||(t=L.Inverse(t)),_.FromQuaternionToRef(t,e._babylonTexture.getReflectionTextureMatrix()))},getTarget:t=>t._babylonTexture}}}}};function f(t,e,r,i){const n=o(t);return i?n[r][i]:n[r]}function o(t,e,r){var i,n;return(n=(i=t._data)==null?void 0:i[(r==null?void 0:r.fillMode)??S.MATERIAL_TriangleFillMode])==null?void 0:n.babylonMaterial}function g(t,e){return{offset:{componentsCount:2,type:"Vector2",get:(r,i,n)=>{const s=f(r,n,t,e);return new T(s==null?void 0:s.uOffset,s==null?void 0:s.vOffset)},getTarget:o,set:(r,i,n,s)=>{const u=f(i,s,t,e);u.uOffset=r.x,u.vOffset=r.y},getPropertyName:[()=>`${t}${e?"."+e:""}.uOffset`,()=>`${t}${e?"."+e:""}.vOffset`]},rotation:{type:"number",get:(r,i,n)=>{var s;return(s=f(r,n,t,e))==null?void 0:s.wAng},getTarget:o,set:(r,i,n,s)=>f(i,s,t,e).wAng=r,getPropertyName:[()=>`${t}${e?"."+e:""}.wAng`]},scale:{componentsCount:2,type:"Vector2",get:(r,i,n)=>{const s=f(r,n,t,e);return new T(s==null?void 0:s.uScale,s==null?void 0:s.vScale)},getTarget:o,set:(r,i,n,s)=>{const u=f(i,s,t,e);u.uScale=r.x,u.vScale=r.y},getPropertyName:[()=>`${t}${e?"."+e:""}.uScale`,()=>`${t}${e?"."+e:""}.vScale`]}}}const b={cameras:Z,nodes:A,materials:K,extensions:V,animations:v,meshes:H};function B(t){return new w(t,b)}function k(t){const e=t.split("/").map(i=>i.replace(/{}/g,"__array__"));let r=b;for(const i of e)i&&(r=r[i]);if(r&&r.type&&r.get)return r}function z(t,e){const r=t.split("/").map(n=>n.replace(/{}/g,"__array__"));let i=b;for(const n of r)n&&(i=i[n]);i&&i.type&&i.get&&(i.interpolation=e)}function O(t,e){const r=t.split("/").map(n=>n.replace(/{}/g,"__array__"));let i=b;for(const n of r)if(n){if(!i[n]){if(n==="?"){i.__ignoreObjectTree__=!0;continue}i[n]={},n==="__array__"&&(i[n].__target__=!0)}i=i[n]}Object.assign(i,e)}export{O as A,k as G,z as S,B as a,a as b};
