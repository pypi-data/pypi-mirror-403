import{F as f,e as p}from"./KHR_interactivity-0REspvdU.js";import{j as a,l,f as i,h as y,m as A,g as m,n as G,R as h}from"./declarationMapper-4emcUw2B.js";import{Q as w,cc as k,V as F,y as C,f as s}from"./index-C7ioxznG.js";import{F as n}from"./flowGraphBinaryOperationBlock-CEhPOSUh.js";import{F as B}from"./flowGraphUnaryOperationBlock-CSUKFSd0.js";import"./index-BmJkaHuF.js";import"./objectModelMapping-CY2JGqxk.js";import"./flowGraphCachedOperationBlock-DshMczcK.js";function D(e,o){return e.x*o.x+e.y*o.y+e.z*o.z}function T(e,o){return e.x*o.x+e.y*o.y+e.z*o.z+e.w*o.w}function N(e,o){return Math.acos(k(T(e,o),-1,1))*2}function R(e,o){const r=new w;return Q(e,o,r),r}function Q(e,o,r){const t=F.Cross(e,o),c=Math.acos(k(D(e,o),-1,1));return w.RotationAxisToRef(t,c,r),r}const g="cachedOperationAxis",V="cachedOperationAngle",x="cachedExecutionId";class z extends B{constructor(o){super(h,i,r=>this._polymorphicLength(r),"FlowGraphLengthBlock",o)}_polymorphicLength(o){switch(p(o)){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return o.length();default:throw new Error(`Cannot compute length of value ${o}`)}}}s("FlowGraphLengthBlock",z);class _ extends B{constructor(o){super(h,h,r=>this._polymorphicNormalize(r),"FlowGraphNormalizeBlock",o)}_polymorphicNormalize(o){var c;const r=p(o);let t;switch(r){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return t=o.normalizeToNew(),(c=this.config)!=null&&c.nanOnZeroLength&&o.length()===0&&t.setAll(NaN),t;default:throw new Error(`Cannot normalize value ${o}`)}}}s("FlowGraphNormalizeBlock",_);class E extends n{constructor(o){super(h,h,i,(r,t)=>this._polymorphicDot(r,t),"FlowGraphDotBlock",o)}_polymorphicDot(o,r){switch(p(o)){case"Vector2":case"Vector3":case"Vector4":case"Quaternion":return o.dot(r);default:throw new Error(`Cannot get dot product of ${o} and ${r}`)}}}s("FlowGraphDotBlock",E);class O extends n{constructor(o){super(a,a,a,(r,t)=>F.Cross(r,t),"FlowGraphCrossBlock",o)}}s("FlowGraphCrossBlock",O);class I extends n{constructor(o){super(G,i,G,(r,t)=>r.rotate(t),"FlowGraphRotate2DBlock",o)}}s("FlowGraphRotate2DBlock",I);class L extends n{constructor(o){super(a,l,a,(r,t)=>r.applyRotationQuaternion(t),"FlowGraphRotate3DBlock",o)}}s("FlowGraphRotate3DBlock",L);function M(e,o){switch(p(e)){case"Vector2":return o.transformVector(e);case"Vector3":return o.transformVector(e);case"Vector4":return e=e,new C(e.x*o.m[0]+e.y*o.m[1]+e.z*o.m[2]+e.w*o.m[3],e.x*o.m[4]+e.y*o.m[5]+e.z*o.m[6]+e.w*o.m[7],e.x*o.m[8]+e.y*o.m[9]+e.z*o.m[10]+e.w*o.m[11],e.x*o.m[12]+e.y*o.m[13]+e.z*o.m[14]+e.w*o.m[15]);default:throw new Error(`Cannot transform value ${e}`)}}class j extends n{constructor(o){const r=(o==null?void 0:o.vectorType)||"Vector3",t=r==="Vector2"?"Matrix2D":r==="Vector3"?"Matrix3D":"Matrix";super(m(r),m(t),m(r),M,"FlowGraphTransformVectorBlock",o)}}s("FlowGraphTransformVectorBlock",j);class v extends n{constructor(o){super(a,A,a,(r,t)=>F.TransformCoordinates(r,t),"FlowGraphTransformCoordinatesBlock",o)}}s("FlowGraphTransformCoordinatesBlock",v);class $ extends B{constructor(o){super(l,l,r=>r.conjugate(),"FlowGraphConjugateBlock",o)}}s("FlowGraphConjugateBlock",$);class U extends n{constructor(o){super(l,l,i,(r,t)=>N(r,t),"FlowGraphAngleBetweenBlock",o)}}s("FlowGraphAngleBetweenBlock",U);class Z extends n{constructor(o){super(a,i,l,(r,t)=>w.RotationAxis(r,t),"FlowGraphQuaternionFromAxisAngleBlock",o)}}s("FlowGraphQuaternionFromAxisAngleBlock",Z);class q extends f{constructor(o){super(o),this.a=this.registerDataInput("a",l),this.axis=this.registerDataOutput("axis",a),this.angle=this.registerDataOutput("angle",i),this.isValid=this.registerDataOutput("isValid",y)}_updateOutputs(o){const r=o._getExecutionVariable(this,x,-1),t=o._getExecutionVariable(this,g,null),c=o._getExecutionVariable(this,V,null);if(t!=null&&c!==void 0&&c!==null&&r===o.executionId)this.axis.setValue(t,o),this.angle.setValue(c,o);else try{const{axis:u,angle:d}=this.a.getValue(o).toAxisAngle();o._setExecutionVariable(this,g,u),o._setExecutionVariable(this,V,d),o._setExecutionVariable(this,x,o.executionId),this.axis.setValue(u,o),this.angle.setValue(d,o),this.isValid.setValue(!0,o)}catch{this.isValid.setValue(!1,o)}}getClassName(){return"FlowGraphAxisAngleFromQuaternionBlock"}}s("FlowGraphAxisAngleFromQuaternionBlock",q);class b extends n{constructor(o){super(a,a,l,(r,t)=>R(r,t),"FlowGraphQuaternionFromDirectionsBlock",o)}}export{U as FlowGraphAngleBetweenBlock,q as FlowGraphAxisAngleFromQuaternionBlock,$ as FlowGraphConjugateBlock,O as FlowGraphCrossBlock,E as FlowGraphDotBlock,z as FlowGraphLengthBlock,_ as FlowGraphNormalizeBlock,Z as FlowGraphQuaternionFromAxisAngleBlock,b as FlowGraphQuaternionFromDirectionsBlock,I as FlowGraphRotate2DBlock,L as FlowGraphRotate3DBlock,j as FlowGraphTransformBlock,v as FlowGraphTransformCoordinatesBlock};
