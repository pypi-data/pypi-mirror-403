import{GLTFLoader as m}from"./glTFLoader-dcV3nFjy.js";import{b0 as f,bR as d,bQ as T}from"./index-C7ioxznG.js";import"./index-BmJkaHuF.js";import"./bone-D3wPsQsS.js";import"./skeleton-Dp5NNatR.js";import"./rawTexture-B_Rn1rXF.js";import"./assetContainer-WmWzRef8.js";import"./objectModelMapping-CY2JGqxk.js";const t="KHR_materials_diffuse_transmission";class l{constructor(r){this.name=t,this.order=174,this._loader=r,this.enabled=this._loader.isExtensionUsed(t),this.enabled&&(r.parent.transparencyAsCoverage=!0)}dispose(){this._loader=null}loadMaterialPropertiesAsync(r,a,o){return m.LoadExtensionAsync(r,a,this.name,async(s,e)=>{const i=new Array;return i.push(this._loader.loadMaterialPropertiesAsync(r,a,o)),i.push(this._loadTranslucentPropertiesAsync(s,a,o,e)),await Promise.all(i).then(()=>{})})}_loadTranslucentPropertiesAsync(r,a,o,s){const e=this._loader._getOrCreateMaterialAdapter(o);e.configureSubsurface(),e.subsurfaceWeight=s.diffuseTransmissionFactor??0,e.subsurfaceConstantTint=s.diffuseTransmissionColorFactor!==void 0?f.FromArray(s.diffuseTransmissionColorFactor):f.White();const i=new Array;return s.diffuseTransmissionTexture&&(s.diffuseTransmissionTexture.nonColorData=!0,i.push(this._loader.loadTextureInfoAsync(`${r}/diffuseTransmissionTexture`,s.diffuseTransmissionTexture).then(n=>{n.name=`${o.name} (Diffuse Transmission)`,e.subsurfaceWeightTexture=n}))),s.diffuseTransmissionColorTexture&&i.push(this._loader.loadTextureInfoAsync(`${r}/diffuseTransmissionColorTexture`,s.diffuseTransmissionColorTexture).then(n=>{n.name=`${o.name} (Diffuse Transmission Color)`,e.subsurfaceConstantTintTexture=n})),Promise.all(i).then(()=>{})}}d(t);T(t,!0,u=>new l(u));export{l as KHR_materials_diffuse_transmission};
