# Skills with Previous Session Skills Discovery
# This example demonstrates loading skills from previous MassGen sessions
#
# Features enabled:
# - Skills system (openskills)
# - Previous session skills discovery (scans massgen_logs for SKILL.md files)
# - Task planning with filesystem mode (tasks/ directory)
# - Memory with filesystem mode (memory/ directory)
#
# Run with:
#   uv run massgen --config massgen/configs/skills/skills_with_previous_sessions.yaml "Your task here"

agents:
  - id: "agent_a"
    backend:
      type: "openai"
      model: "gpt-5"
      cwd: "workspace1"
      enable_mcp_command_line: true
      command_line_execution_mode: "docker"  # or "local"
      auto_discover_custom_tools: true  # Enable code mode (evolving skills)

  - id: "agent_b"
    backend:
      type: "claude_code"
      model: "claude-opus-4-5-20251101"
      cwd: "workspace2"
      enable_mcp_command_line: true
      command_line_execution_mode: "docker"
      auto_discover_custom_tools: true  # Enable code mode (evolving skills)

orchestrator:
  snapshot_storage: "snapshots"
  agent_temporary_workspace: "temp_workspaces"

  coordination:
    # Skills System
    # -------------
    # Provides domain-specific knowledge and workflows
    use_skills: true

    # Skills are discovered from this directory (default: .agent/skills)
    # Docker: Anthropic skills pre-installed
    # Local: Run 'npm i -g openskills' then 'openskills install anthropics/skills --universal -y'
    skills_directory: ".agent/skills"

    # Previous Session Skills
    # -----------------------
    # When enabled, scans .massgen/massgen_logs/ for SKILL.md files from previous sessions
    # These are evolving skills created by agents during task execution
    load_previous_session_skills: true

    # Task Planning (Filesystem Mode)
    # --------------------------------
    # Enables task planning MCP tools for breaking down complex work
    # Tasks automatically saved to workspace/tasks/plan.json
    enable_agent_task_planning: true
    task_planning_filesystem_mode: true
    max_tasks_per_plan: 10

    # Memory (Filesystem Mode)
    # -------------------------
    # Enables two-tier memory system for storing context
    # - Short-term: Auto-injected into system prompts (workspace/memory/short_term/)
    # - Long-term: Load on-demand via load_memory() (workspace/memory/long_term/)
    # Inspired by Letta's context hierarchy: https://docs.letta.com/guides/agents/context-hierarchy
    enable_memory_filesystem_mode: true
