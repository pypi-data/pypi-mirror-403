# Test config for subagent orchestrator feature
# Run with: uv run massgen --config massgen/configs/features/test_subagent_orchestrator.yaml "Spawn a subagent to research Python async best practices"

agents:
  - id: "agent_a"
    backend:
      # type: "chatcompletion"
      # base_url: "https://openrouter.ai/api/v1"
      # model: "x-ai/grok-4.1-fast"
      type: "gemini"
      model: "gemini-3-flash-preview"
      # type: "openai"
      # model: "gpt-5"
      # reasoning:
      #   effort: medium
      cwd: "workspace1"
      enable_mcp_command_line: true
      command_line_execution_mode: "docker"

orchestrator:
  snapshot_storage: "snapshots"
  agent_temporary_workspace: "temp_workspaces"

  coordination:
    enable_agent_task_planning: true
    task_planning_filesystem_mode: true
    enable_memory_filesystem_mode: true

    # Enable subagents
    enable_subagents: true
    subagent_default_timeout: 300
    subagent_max_concurrent: 3

    # Subagent orchestrator configuration
    subagent_orchestrator:
      enabled: true
      # agents: Define subagent agents (if empty, inherits 1 agent from parent config)
      # Each agent can have: id (optional, auto-generated), backend (type, model, base_url)
      # Example with 2 different agents:
      agents:
        # - backend:
        #     type: "openai"
        #     model: "gpt-5-mini"
        - backend:
            type: "chatcompletion"
            base_url: "https://openrouter.ai/api/v1"
            model: "x-ai/grok-4.1-fast"
      # blocking: true  # Set to false for background execution (use check_subagent_status to monitor)
