/* =============================================================================
 * MassGen TUI - Midnight Theme
 * =============================================================================
 * A deep blue-black theme with subtle glow accents.
 * Inspired by late-night coding sessions and minimal distraction.
 *
 * Characteristics:
 * - Deep blue-black backgrounds instead of pure black
 * - Cooler, more muted accent colors
 * - Subtle blue undertones throughout
 * - Designed for extended use in low-light environments
 */

/* Background Colors - Deep blue-black palette */
$bg-base: #0a0e14;           /* Very dark blue-black */
$bg-surface: #0f1419;        /* Slightly elevated surface */
$bg-surface-2: #151a21;      /* Cards, modals */
$bg-surface-3: #1c232d;      /* Hover states */

/* Foreground/Text Colors - Cooler tones */
$fg-primary: #d5dce5;        /* Primary text - slightly cooler */
$fg-muted: #6b7d8f;          /* Secondary text */
$fg-subtle: #4d5b6a;         /* Tertiary text */
$fg-on-accent: #0a0e14;      /* Text on accent backgrounds */

/* Border Colors - Subtle blue undertones */
$border-default: #1e2833;    /* Standard borders */
$border-highlight: #2d3a48;  /* Highlighted/focused borders */
$border-muted: #151a21;      /* Subtle borders */

/* Semantic Accent Colors - Cooler, more muted */
$accent-primary: #4a9eff;    /* Brighter blue for visibility */
$accent-success: #34d399;    /* Teal-green success */
$accent-warning: #fbbf24;    /* Warm amber warning */
$accent-error: #ef4444;      /* Red error */
$accent-info: #38bdf8;       /* Sky blue info */
$accent-special: #a78bfa;    /* Violet special */

/* Agent Colors - Midnight palette */
$agent-1: #4a9eff;           /* Blue - Agent A */
$agent-1-bg: #0d1520;
$agent-2: #34d399;           /* Teal - Agent B */
$agent-2-bg: #0d1a17;
$agent-3: #a78bfa;           /* Violet - Agent C */
$agent-3-bg: #140d20;
$agent-4: #fb923c;           /* Orange - Agent D */
$agent-4-bg: #1a130d;
$agent-5: #38bdf8;           /* Sky - Agent E */
$agent-5-bg: #0d1620;
$agent-6: #f472b6;           /* Pink - Agent F */
$agent-6-bg: #1a0d15;
$agent-7: #fbbf24;           /* Amber - Agent G */
$agent-7-bg: #1a180d;
$agent-8: #ef4444;           /* Red - Agent H */
$agent-8-bg: #1a0d0d;

/* Status Badge Colors - 35% opacity for better visibility */
$status-running-bg: rgba(74, 158, 255, 0.35);
$status-running-fg: $accent-primary;
$status-success-bg: rgba(52, 211, 153, 0.35);
$status-success-fg: $accent-success;
$status-warning-bg: rgba(251, 191, 36, 0.35);
$status-warning-fg: $accent-warning;
$status-error-bg: rgba(239, 68, 68, 0.35);
$status-error-fg: $accent-error;

/* Tool Categories */
$tool-read: #4a9eff;         /* Read operations */
$tool-write: #fbbf24;        /* Write operations */
$tool-execute: #34d399;      /* Execution/run */
$tool-search: #a78bfa;       /* Search operations */
$tool-web: #38bdf8;          /* Web/network */
$tool-default: #6b7d8f;      /* Default/other */

/* =============================================================================
 * Import component styles from dark theme
 * The variables above will override the defaults
 * =============================================================================
 */

Screen {
    background: initial;  /* Use terminal's native background */
    color: $fg-primary;
    layers: base overlay;
}

.hidden {
    display: none;
}

/* === Welcome Screen === */
#welcome_screen {
    width: 100%;
    height: 1fr;
    align: center middle;
    background: initial;  /* Use terminal's native background */
}

#welcome_screen Label, #welcome_screen Static {
    width: auto;
    text-align: center;
}

#welcome_logo {
    color: $accent-primary;
    text-style: bold;
}

#welcome_tagline {
    color: $accent-success;
    text-style: bold;
    margin-top: 2;
}

#welcome_workflow {
    color: $fg-muted;
    margin-top: 1;
}

#welcome_hint {
    color: $fg-subtle;
    text-style: italic;
    margin-top: 2;
}

/* === Status Bar === */
#status_bar {
    dock: bottom;
    height: 1;
    background: $bg-surface;
    color: $fg-muted;
    padding: 0 1;
}

#status_bar #execution_status {
    width: auto;
    color: $accent-primary;
}

#status_bar #cost_label {
    width: auto;
    margin: 0 2;
}

/* === Main Container === */
#main_container {
    width: 100%;
    height: 1fr;
    background: $bg-base;
}

/* === Agent Panel === */
.agent-panel {
    border: solid $border-default;
    background: $bg-surface;
    padding: 0 1;
    margin: 0 1 1 0;
    height: 100%;
    min-width: 30;
}

.agent-panel.focused {
    border: solid $accent-primary;
}

/* Agent header with model info */
.agent-header {
    height: auto;
    padding: 1 0;
    border-bottom: solid $border-muted;
}

.agent-name {
    text-style: bold;
    color: $fg-primary;
}

.agent-model {
    color: $fg-muted;
}

.agent-status {
    color: $fg-subtle;
}

/* Activity indicator */
.activity-indicator {
    color: $accent-primary;
    text-style: bold;
}

.activity-indicator.thinking {
    color: $accent-info;
}

.activity-indicator.tool {
    color: $accent-warning;
}

.activity-indicator.streaming {
    color: $accent-success;
}

.activity-indicator.idle {
    color: $fg-subtle;
}

/* === Tool Cards === */
.tool-card {
    border: solid $border-default;
    background: $bg-surface-2;
    padding: 1;
    margin: 1 0;
    height: auto;
}

.tool-card.running {
    border-left: thick $accent-primary;
}

.tool-card.success {
    border-left: thick $accent-success;
}

.tool-card.error {
    border-left: thick $accent-error;
}

.tool-card .tool-name {
    text-style: bold;
    color: $fg-primary;
}

.tool-card .tool-status {
    color: $fg-muted;
}

.tool-card .tool-elapsed {
    color: $fg-subtle;
}

/* === Input Area === */
#question_input {
    border: solid $border-default;
    background: $bg-surface;
    padding: 1;
    height: auto;
    min-height: 3;
}

#question_input:focus {
    border: solid $accent-primary;
}

/* === Modals === */
ModalScreen {
    background: rgba(10, 14, 20, 0.85);
}

.modal-container {
    background: $bg-surface-2;
    border: solid $accent-primary;
    padding: 1 2;
    width: 80%;
    max-width: 100;
    height: auto;
    max-height: 80%;
}

.modal-header {
    text-style: bold;
    color: $accent-primary;
    padding-bottom: 1;
    border-bottom: solid $border-muted;
}

.modal-content {
    padding: 1 0;
    height: auto;
    max-height: 60vh;
}

.modal-footer {
    padding-top: 1;
    border-top: solid $border-muted;
}

/* === Buttons === */
Button {
    background: $bg-surface-2;
    color: $fg-primary;
    border: solid $border-default;
    padding: 0 2;
}

Button:hover {
    background: $bg-surface-3;
}

Button:focus {
    border: solid $accent-primary;
}

Button.-primary {
    background: $accent-primary;
    color: $fg-on-accent;
}

Button.-primary:hover {
    background: #5ab0ff;
}

Button.-success {
    background: $accent-success;
    color: $fg-on-accent;
}

Button.-warning {
    background: $accent-warning;
    color: $fg-on-accent;
}

Button.-error {
    background: $accent-error;
    color: $fg-on-accent;
}

/* === Data Tables === */
DataTable {
    background: $bg-surface;
    color: $fg-primary;
}

DataTable > .datatable--header {
    background: $bg-surface-2;
    color: $accent-primary;
    text-style: bold;
}

DataTable > .datatable--cursor {
    background: $bg-surface-3;
}

DataTable > .datatable--hover {
    background: $bg-surface-2;
}

/* === Scrollbars === */
ScrollBar {
    background: $bg-surface;
}

ScrollBar > .scrollbar--bar {
    background: $border-default;
}

ScrollBar > .scrollbar--bar:hover {
    background: $border-highlight;
}

/* === Rich Log === */
RichLog {
    background: $bg-base;
    color: $fg-primary;
    padding: 1;
}

/* === Input === */
Input {
    background: $bg-surface;
    color: $fg-primary;
    border: solid $border-default;
}

Input:focus {
    border: solid $accent-primary;
}

Input > .input--placeholder {
    color: $fg-subtle;
}

/* === Checkbox and Switch === */
Checkbox {
    color: $fg-primary;
}

Checkbox > .toggle--button {
    background: $bg-surface-2;
}

Checkbox.-on > .toggle--button {
    background: $accent-primary;
}

Switch {
    color: $fg-primary;
}

Switch > .switch--slider {
    background: $bg-surface-2;
}

Switch.-on > .switch--slider {
    background: $accent-primary;
}

/* === Tab Bar === */
.tab-bar {
    background: $bg-surface;
    height: 3;
}

.tab-item {
    padding: 0 2;
    color: $fg-muted;
}

.tab-item:hover {
    color: $fg-primary;
    background: $bg-surface-2;
}

.tab-item.active {
    color: $accent-primary;
    border-bottom: thick $accent-primary;
}

/* === Progress Bar === */
ProgressBar {
    padding: 0 1;
}

ProgressBar > .bar--bar {
    background: $bg-surface-2;
}

ProgressBar > .bar--complete {
    background: $accent-primary;
}

/* === Labels and Static text === */
Label {
    color: $fg-primary;
}

Static {
    color: $fg-primary;
}

/* === Notifications === */
ToastRack {
    margin-bottom: 5;  /* Push up above mode bar and input */
}

Toast {
    background: $bg-surface-2;
    color: $fg-primary;
    border: solid $border-default;
}

Toast.-information {
    border-left: thick $accent-info;
}

Toast.-warning {
    border-left: thick $accent-warning;
}

Toast.-error {
    border-left: thick $accent-error;
}

/* =============================================================================
 * Midnight Theme - Enhanced Component Styles
 * =============================================================================
 */

/* Elevated surface colors for glassmorphism effect */
$bg-elevated-1: #141922;     /* Slight elevation */
$bg-elevated-2: #1a212c;     /* Medium elevation - modals */
$bg-elevated-3: #212937;     /* High elevation */

/* --- Status Badge Enhancements --- */
StatusBadge.status-connected {
    color: $accent-success;
    background: rgba(52, 211, 153, 0.35);
    border-left: thick $accent-success;
}

StatusBadge.status-working {
    color: $accent-warning;
    background: rgba(251, 191, 36, 0.35);
    border-left: thick $accent-warning;
}

StatusBadge.status-streaming {
    color: $accent-primary;
    background: rgba(74, 158, 255, 0.35);
    border-left: thick $accent-primary;
}

StatusBadge.status-completed {
    color: $accent-success;
    background: rgba(52, 211, 153, 0.35);
    border-left: thick $accent-success;
}

StatusBadge.status-error {
    color: $accent-error;
    background: rgba(239, 68, 68, 0.35);
    border-left: thick $accent-error;
}

StatusBadge.status-waiting {
    color: $fg-muted;
    background: rgba(107, 125, 143, 0.15);
    border-left: thick $border-default;
}

/* --- Queued Input Banner --- */
QueuedInputBanner {
    background: $bg-surface-2;
    border: solid $border-default;
    border-left: thick $accent-primary;
}

QueuedInputBanner:hover {
    background: $bg-elevated;
}

/* --- Tool Call Card Focus --- */
ToolCallCard:focus {
    background: $bg-elevated-1;
    border-left: double $accent-primary;
    outline: none;
}

/* --- Agent Panel Focus --- */
AgentPanel:focus,
AgentPanel:focus-within {
    border-left: double $accent-primary;
    background: $bg-elevated-1;
    outline: none;
}

/* --- Modal Elevation --- */
ToolDetailModal > Container {
    background: $bg-elevated-2;
    border: double $accent-primary;
    border-left: thick $accent-primary;
}

TaskPlanModal > Container {
    background: $bg-elevated-2;
    border: double $accent-special;
    border-left: thick $accent-special;
}

/* --- Agent Tab Active States --- */
AgentTab.active {
    background: $bg-surface-2;
    border: solid $accent-primary;
    border-bottom: tall $accent-primary;
}

AgentTab:focus {
    border: thick $accent-primary;
    outline: none;
}

/* --- Button Focus --- */
Button:focus {
    text-style: bold;
    border: thick $accent-primary;
    outline: none;
}

/* --- TextArea Focus --- */
TextArea:focus {
    border: thick $accent-primary;
    outline: none;
}
