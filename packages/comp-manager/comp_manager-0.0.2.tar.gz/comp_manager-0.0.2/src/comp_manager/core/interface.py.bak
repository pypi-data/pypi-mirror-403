from abc import abstractmethod, ABC
from typing import Any

from mongoengine.base import TopLevelDocumentMetaclass


class StorageInterface(ABC):
    """
    Abstract base class for object storage interface.
    """
    @abstractmethod
    def get_items(self, *args: Any, **kwargs: Any) -> Any:
        """
        Get items from storage.
        """
        pass

    @abstractmethod
    def insert_item(self, data: Any) -> Any:
        """
        Insert item into storage.
        """
        pass

    @abstractmethod
    def get_item_by_key(self, key: str) -> Any:
        """
        Get item by key.
        """
        pass

    @abstractmethod
    def delete_item_by_key(self, key: str) -> Any:
        """
        Delete item from storage.
        """
        pass


class MongoInterface(StorageInterface):

    def __init__(self, document_model: TopLevelDocumentMetaclass) -> None:
        """
        Initialize MongoInterface.
        """
        self.model = document_model
        self.collection = self.model._get_collection()

    @abstractmethod
    def get_item_by_key(self, key: str) -> Any:
        """
        Get item by key.
        """
