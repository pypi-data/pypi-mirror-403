(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},41947,e=>{"use strict";let t=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["default",()=>t])},37727,e=>{"use strict";var t=e.i(41947);e.s(["X",()=>t.default])},54858,e=>{"use strict";var t=e.i(47167);let a="localhost"===window.location.hostname?"":t.default.env.NEXT_PUBLIC_API_URL||"https://api.nomadkaraoke.com";function r(e){localStorage.setItem("karaoke_access_token",e)}function n(){return localStorage.getItem("karaoke_access_token")}function i(){localStorage.removeItem("karaoke_access_token")}function s(){let e={},t=n();return t&&(e.Authorization=`Bearer ${t}`),e}class o extends Error{status;data;constructor(e,t,a){super(e),this.name="ApiError",this.status=t,this.data=a}}async function l(e){if(!e.ok){let t;try{t=await e.json()}catch{t={detail:e.statusText}}throw new o(function(e,t){if("string"==typeof e?.detail)return e.detail;if("string"==typeof e?.message)return e.message;if("string"==typeof e?.error)return e.error;if(e?.detail?.message)return String(e.detail.message);if(e?.detail?.error)return String(e.detail.error);if(e?.detail&&"object"==typeof e.detail)try{return JSON.stringify(e.detail)}catch{}return t}(t,`Request failed with status ${e.status}`),e.status,t)}return e.json()}function c(e){return{async submitCorrections(t){let r={corrections:{...t,lines:t.corrected_segments}},n=await fetch(`${a}/api/jobs/${e}/corrections`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify(r)});await l(n)},async submitAnnotations(t){let r=await fetch(`${a}/api/jobs/${e}/annotations`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({annotations:t})});await l(r)},updateHandlers:async t=>l(await fetch(`${a}/api/review/${e}/handlers`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({enabled_handlers:t})})),async addLyrics(t,r){let n=await fetch(`${a}/api/review/${e}/add-lyrics`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({source:t,lyrics:r})});return(await l(n)).data},getAudioUrl(t){let r=n(),i=`${a}/api/review/${e}/audio/${t}`;return r?`${i}?token=${encodeURIComponent(r)}`:i},generatePreviewVideo:async t=>l(await fetch(`${a}/api/review/${e}/preview-video`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify(t)})),getPreviewVideoUrl(t){let r=n(),i=`${a}/api/review/${e}/preview-video/${t}`;return r?`${i}?token=${encodeURIComponent(r)}`:i},completeReview:async t=>l(await fetch(`${a}/api/jobs/${e}/complete-review`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({instrumental_selection:t})}))}}e.s(["API_BASE_URL",0,a,"ApiError",()=>o,"adminApi",0,{async getStats(e){let t=new URLSearchParams;e?.exclude_test!==void 0&&t.set("exclude_test",String(e.exclude_test));let r=`${a}/api/admin/stats/overview${t.toString()?"?"+t.toString():""}`;return l(await fetch(r,{headers:s()}))},async listUsers(e){let t=new URLSearchParams;e?.limit&&t.set("limit",String(e.limit)),e?.offset&&t.set("offset",String(e.offset)),e?.search&&t.set("search",e.search),e?.sort_by&&t.set("sort_by",e.sort_by),e?.sort_order&&t.set("sort_order",e.sort_order),e?.include_inactive&&t.set("include_inactive","true"),e?.exclude_test!==void 0&&t.set("exclude_test",String(e.exclude_test));let r=`${a}/api/users/admin/users${t.toString()?"?"+t.toString():""}`;return l(await fetch(r,{headers:s()}))},getUserDetail:async e=>l(await fetch(`${a}/api/users/admin/users/${encodeURIComponent(e)}/detail`,{headers:s()})),addCredits:async(e,t,r)=>l(await fetch(`${a}/api/users/admin/credits`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({email:e,amount:t,reason:r})})),impersonateUser:async e=>l(await fetch(`${a}/api/admin/users/${encodeURIComponent(e)}/impersonate`,{method:"POST",headers:s()})),enableUser:async e=>l(await fetch(`${a}/api/users/admin/users/${encodeURIComponent(e)}/enable`,{method:"POST",headers:s()})),disableUser:async e=>l(await fetch(`${a}/api/users/admin/users/${encodeURIComponent(e)}/disable`,{method:"POST",headers:s()})),async listAllJobs(e){let t=new URLSearchParams;e?.status&&t.set("status",e.status),e?.user_email&&t.set("user_email",e.user_email),e?.environment&&t.set("environment",e.environment),e?.created_after&&t.set("created_after",e.created_after),e?.created_before&&t.set("created_before",e.created_before),e?.limit&&t.set("limit",String(e.limit)),e?.exclude_test!==void 0&&t.set("exclude_test",String(e.exclude_test));let r=`${a}/api/jobs${t.toString()?"?"+t.toString():""}`;return l(await fetch(r,{headers:s()}))},async getBetaStats(e){let t=new URLSearchParams;e?.exclude_test!==void 0&&t.set("exclude_test",String(e.exclude_test));let r=`${a}/api/users/admin/beta/stats${t.toString()?"?"+t.toString():""}`;return l(await fetch(r,{headers:s()}))},getBetaFeedback:async(e=50)=>l(await fetch(`${a}/api/users/admin/beta/feedback?limit=${e}`,{headers:s()})),deleteJob:async(e,t=!0)=>l(await fetch(`${a}/api/jobs/${e}?delete_files=${t}`,{method:"DELETE",headers:s()})),async listAudioSearches(e){let t=new URLSearchParams;e?.limit&&t.set("limit",String(e.limit)),e?.status_filter&&t.set("status_filter",e.status_filter),e?.exclude_test!==void 0&&t.set("exclude_test",String(e.exclude_test));let r=`${a}/api/admin/audio-searches${t.toString()?"?"+t.toString():""}`;return l(await fetch(r,{headers:s()}))},clearAudioSearchCache:async e=>l(await fetch(`${a}/api/admin/audio-searches/${e}/clear-cache`,{method:"POST",headers:s()})),clearAllCache:async()=>l(await fetch(`${a}/api/admin/cache`,{method:"DELETE",headers:s()})),getCacheStats:async()=>l(await fetch(`${a}/api/admin/cache/stats`,{headers:s()})),getCompletionMessage:async e=>l(await fetch(`${a}/api/admin/jobs/${e}/completion-message`,{headers:s()})),sendCompletionEmail:async(e,t,r=!0)=>l(await fetch(`${a}/api/admin/jobs/${e}/send-completion-email`,{method:"POST",headers:{...s(),"Content-Type":"application/json"},body:JSON.stringify({to_email:t,cc_admin:r})})),getJobFiles:async e=>l(await fetch(`${a}/api/admin/jobs/${e}/files`,{headers:s()})),updateJob:async(e,t)=>l(await fetch(`${a}/api/admin/jobs/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify(t)})),resetJob:async(e,t)=>l(await fetch(`${a}/api/admin/jobs/${e}/reset`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({target_state:t})})),deleteJobOutputs:async e=>l(await fetch(`${a}/api/admin/jobs/${e}/delete-outputs`,{method:"POST",headers:s()})),clearWorkers:async e=>l(await fetch(`${a}/api/admin/jobs/${e}/clear-workers`,{method:"POST",headers:s()})),triggerWorker:async(e,t="video")=>l(await fetch(`${a}/api/admin/jobs/${e}/trigger-worker`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({worker_type:t})})),getRateLimitStats:async()=>l(await fetch(`${a}/api/admin/rate-limits/stats`,{headers:s()})),getUserRateLimitStatus:async e=>l(await fetch(`${a}/api/admin/rate-limits/users/${encodeURIComponent(e)}`,{headers:s()})),getBlocklists:async()=>l(await fetch(`${a}/api/admin/rate-limits/blocklists`,{headers:s()})),addDisposableDomain:async e=>l(await fetch(`${a}/api/admin/rate-limits/blocklists/disposable-domains`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({domain:e})})),removeDisposableDomain:async e=>l(await fetch(`${a}/api/admin/rate-limits/blocklists/disposable-domains/${encodeURIComponent(e)}`,{method:"DELETE",headers:s()})),addBlockedEmail:async e=>l(await fetch(`${a}/api/admin/rate-limits/blocklists/blocked-emails`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({email:e})})),removeBlockedEmail:async e=>l(await fetch(`${a}/api/admin/rate-limits/blocklists/blocked-emails/${encodeURIComponent(e)}`,{method:"DELETE",headers:s()})),addBlockedIP:async e=>l(await fetch(`${a}/api/admin/rate-limits/blocklists/blocked-ips`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({ip_address:e})})),removeBlockedIP:async e=>l(await fetch(`${a}/api/admin/rate-limits/blocklists/blocked-ips/${encodeURIComponent(e)}`,{method:"DELETE",headers:s()})),getUserOverrides:async()=>l(await fetch(`${a}/api/admin/rate-limits/overrides`,{headers:s()})),setUserOverride:async(e,t)=>l(await fetch(`${a}/api/admin/rate-limits/overrides/${encodeURIComponent(e)}`,{method:"PUT",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify(t)})),removeUserOverride:async e=>l(await fetch(`${a}/api/admin/rate-limits/overrides/${encodeURIComponent(e)}`,{method:"DELETE",headers:s()}))},"api",0,{async listJobs(e){let t=new URLSearchParams;e?.status&&t.set("status",e.status),e?.limit&&t.set("limit",String(e.limit)),e?.exclude_test!==void 0&&t.set("exclude_test",String(e.exclude_test));let r=`${a}/api/jobs${t.toString()?"?"+t.toString():""}`;return l(await fetch(r,{headers:s()}))},getJob:async e=>l(await fetch(`${a}/api/jobs/${e}`,{headers:s()})),async uploadJob(e,t,r,n){let i=new FormData;return i.append("file",e),i.append("artist",t),i.append("title",r),n?.enable_cdg!==void 0&&i.append("enable_cdg",String(n.enable_cdg)),n?.enable_txt!==void 0&&i.append("enable_txt",String(n.enable_txt)),n?.brand_prefix&&i.append("brand_prefix",n.brand_prefix),n?.enable_youtube_upload!==void 0&&i.append("enable_youtube_upload",String(n.enable_youtube_upload)),n?.theme_id&&i.append("theme_id",n.theme_id),n?.color_overrides&&i.append("color_overrides",JSON.stringify(n.color_overrides)),n?.non_interactive!==void 0&&i.append("non_interactive",String(n.non_interactive)),l(await fetch(`${a}/api/jobs/upload`,{method:"POST",headers:s(),body:i}))},async createJobFromUrl(e,t,r,n){let i={url:e};return t&&(i.artist=t),r&&(i.title=r),n?.enable_cdg!==void 0&&(i.enable_cdg=n.enable_cdg),n?.enable_txt!==void 0&&(i.enable_txt=n.enable_txt),n?.brand_prefix&&(i.brand_prefix=n.brand_prefix),n?.enable_youtube_upload!==void 0&&(i.enable_youtube_upload=n.enable_youtube_upload),n?.theme_id&&(i.theme_id=n.theme_id),n?.color_overrides&&(i.color_overrides=n.color_overrides),n?.non_interactive!==void 0&&(i.non_interactive=n.non_interactive),l(await fetch(`${a}/api/jobs/create-from-url`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify(i)}))},getReviewData:async e=>l(await fetch(`${a}/api/jobs/${e}/review-data`,{headers:s()})),completeReview:async(e,t)=>l(await fetch(`${a}/api/jobs/${e}/complete-review`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({instrumental_selection:t})})),selectInstrumental:async(e,t)=>l(await fetch(`${a}/api/jobs/${e}/select-instrumental`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({selection:t})})),getDownloadUrls:async e=>l(await fetch(`${a}/api/jobs/${e}/download-urls`,{headers:s()})),cancelJob:async(e,t)=>l(await fetch(`${a}/api/jobs/${e}/cancel`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({reason:t||"Cancelled by user"})})),deleteJob:async(e,t=!0)=>l(await fetch(`${a}/api/jobs/${e}?delete_files=${t}`,{method:"DELETE",headers:s()})),getDownloadUrl(e,t,r){let i=`${a}/api/jobs/${e}/download/${t}/${r}`,s=n();return s?`${i}?token=${encodeURIComponent(s)}`:i},async searchAudio(e,t,r=!1,n){let i={artist:e,title:t,auto_download:r};return n?.enable_cdg!==void 0&&(i.enable_cdg=n.enable_cdg),n?.enable_txt!==void 0&&(i.enable_txt=n.enable_txt),n?.brand_prefix&&(i.brand_prefix=n.brand_prefix),n?.enable_youtube_upload!==void 0&&(i.enable_youtube_upload=n.enable_youtube_upload),n?.theme_id&&(i.theme_id=n.theme_id),n?.color_overrides&&(i.color_overrides=n.color_overrides),n?.non_interactive!==void 0&&(i.non_interactive=n.non_interactive),n?.display_artist&&(i.display_artist=n.display_artist),n?.display_title&&(i.display_title=n.display_title),l(await fetch(`${a}/api/audio-search/search`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify(i)}))},getAudioSearchResults:async e=>l(await fetch(`${a}/api/audio-search/${e}/results`,{headers:s()})),selectAudioResult:async(e,t)=>l(await fetch(`${a}/api/audio-search/${e}/select`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({selection_index:t})})),async getJobLogs(e,t=100){let r=await fetch(`${a}/api/jobs/${e}/logs?limit=${t}`,{headers:s()});return(await l(r)).logs||[]},retryJob:async e=>l(await fetch(`${a}/api/jobs/${e}/retry`,{method:"POST",headers:s()})),async listThemes(){let e=await fetch(`${a}/api/themes`,{headers:s()});return(await l(e)).themes},async getTheme(e){let t=await fetch(`${a}/api/themes/${e}`,{headers:s()});return(await l(t)).theme},async getThemePreview(e){let t=await fetch(`${a}/api/themes/${e}/preview`,{headers:s()});return(await l(t)).preview_url},async getThemeYoutubeDescription(e){let t=await fetch(`${a}/api/themes/${e}/youtube-description`,{headers:s()});return(await l(t)).description},sendMagicLink:async e=>l(await fetch(`${a}/api/users/auth/magic-link`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})})),verifyMagicLink:async e=>l(await fetch(`${a}/api/users/auth/verify?token=${encodeURIComponent(e)}`,{method:"GET"})),getCurrentUser:async()=>l(await fetch(`${a}/api/users/me`,{headers:s()})),logout:async()=>l(await fetch(`${a}/api/users/auth/logout`,{method:"POST",headers:s()})),async getBackendInfo(){let e=a?`${a}/`:"/backend-info";return l(await fetch(e,{headers:s()}))},getEncodingWorkerHealth:async()=>l(await fetch(`${a}/api/health/encoding-worker`)),async getCreditPackages(){let e=await fetch(`${a}/api/users/credits/packages`);return(await l(e)).packages},async createCheckout(e,t){let r=await fetch(`${a}/api/users/credits/checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({package_id:e,email:t.toLowerCase()})});return(await l(r)).checkout_url},async createMadeForYouCheckout(e){let t=await fetch(`${a}/api/users/made-for-you/checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email.toLowerCase(),artist:e.artist,title:e.title,source_type:e.source_type,youtube_url:e.youtube_url,notes:e.notes})}),r=await l(t);if(!r.checkout_url)throw Error("No checkout URL received");return r.checkout_url},enrollBetaTester:async(e,t,r)=>l(await fetch(`${a}/api/users/beta/enroll`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.toLowerCase(),promise_text:t,accept_corrections_work:r})})),getVapidPublicKey:async()=>l(await fetch(`${a}/api/push/vapid-public-key`)),subscribePush:async(e,t,r)=>l(await fetch(`${a}/api/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({endpoint:e,keys:t,device_name:r})})),unsubscribePush:async e=>l(await fetch(`${a}/api/push/unsubscribe`,{method:"POST",headers:{"Content-Type":"application/json",...s()},body:JSON.stringify({endpoint:e})})),listPushSubscriptions:async()=>l(await fetch(`${a}/api/push/subscriptions`,{headers:s()}))},"clearAccessToken",()=>i,"createLyricsReviewApiClient",()=>c,"getAccessToken",()=>n,"lyricsReviewApi",0,{getCorrectionData:async e=>l(await fetch(`${a}/api/review/${e}/correction-data`,{headers:s()})),getAudioUrl(e,t){let r=n(),i=`${a}/api/review/${e}/audio/${t}`;return r?`${i}?token=${encodeURIComponent(r)}`:i}},"setAccessToken",()=>r])},68834,e=>{"use strict";var t=e.i(71645);let a=e=>{let t,a=new Set,r=(e,r)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),a.forEach(a=>a(t,e))}},n=()=>t,i={setState:r,getState:n,getInitialState:()=>s,subscribe:e=>(a.add(e),()=>a.delete(e))},s=t=e(r,n,i);return i},r=e=>{let r=e?a(e):a,n=e=>(function(e,a=e=>e){let r=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>a(e.getState()),[e,a]),t.default.useCallback(()=>a(e.getInitialState()),[e,a]));return t.default.useDebugValue(r),r})(r,e);return Object.assign(n,r),n},n=e=>e?r(e):r;e.s(["create",()=>n],68834)},79473,e=>{"use strict";let t=e=>a=>{try{let r=e(a);if(r instanceof Promise)return r;return{then:e=>t(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:a=>t(a)(e)}}},a=(e,a)=>(r,n,i)=>{let s,o={storage:function(e,t){let a;try{a=e()}catch(e){return}return{getItem:e=>{var t;let r=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=a.getItem(e))?t:null;return n instanceof Promise?n.then(r):r(n)},setItem:(e,t)=>a.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>a.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...a},l=!1,c=new Set,d=new Set,u=o.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...e)},n,i);let p=()=>{let e=o.partialize({...n()});return u.setItem(o.name,{state:e,version:o.version})},m=i.setState;i.setState=(e,t)=>(m(e,t),p());let h=e((...e)=>(r(...e),p()),n,i);i.getInitialState=()=>h;let f=()=>{var e,a;if(!u)return;l=!1,c.forEach(e=>{var t;return e(null!=(t=n())?t:h)});let i=(null==(a=o.onRehydrateStorage)?void 0:a.call(o,null!=(e=n())?e:h))||void 0;return t(u.getItem.bind(u))(o.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];else{if(o.migrate){let t=o.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[a,i]=e;if(r(s=o.merge(i,null!=(t=n())?t:h),!0),a)return p()}).then(()=>{null==i||i(s,void 0),s=n(),l=!0,d.forEach(e=>e(s))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{o={...o,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>f(),hasHydrated:()=>l,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},o.skipHydration||f(),s||h};e.s(["persist",()=>a])},38036,e=>{"use strict";var t=e.i(68834),a=e.i(79473),r=e.i(54858);let n=(0,t.create)()((0,a.persist)((e,t)=>({user:null,isLoading:!1,error:null,hasHydrated:!1,isImpersonating:!1,originalAdminToken:null,impersonatedUserEmail:null,setHasHydrated:t=>e({hasHydrated:t}),sendMagicLink:async t=>{e({isLoading:!0,error:null});try{return await r.api.sendMagicLink(t),e({isLoading:!1}),!0}catch(t){return e({isLoading:!1,error:t instanceof Error?t.message:"Failed to send magic link"}),!1}},verifyMagicLink:async t=>{e({isLoading:!0,error:null});try{let a=await r.api.verifyMagicLink(t);(0,r.setAccessToken)(a.session_token);let n={token:a.session_token,email:a.user.email,role:a.user.role,credits:a.user.credits,display_name:a.user.display_name,total_jobs_created:a.user.total_jobs_created,total_jobs_completed:a.user.total_jobs_completed};return e({user:n,isLoading:!1}),!0}catch(t){return e({isLoading:!1,error:t instanceof Error?t.message:"Invalid or expired link"}),!1}},fetchUser:async()=>{let t=(0,r.getAccessToken)();if(!t)return e({user:null}),!1;e({isLoading:!0});try{let a=await r.api.getCurrentUser(),n={token:t,email:a.user.email,role:a.user.role,credits:a.user.credits,display_name:a.user.display_name,total_jobs_created:a.user.total_jobs_created,total_jobs_completed:a.user.total_jobs_completed};return e({user:n,isLoading:!1}),!0}catch{return(0,r.clearAccessToken)(),e({user:null,isLoading:!1}),!1}},logout:async()=>{try{await r.api.logout()}catch{}(0,r.clearAccessToken)(),e({user:null,error:null})},updateCredits:t=>e(e=>({user:e.user?{...e.user,credits:t}:null})),clearError:()=>e({error:null}),loginWithToken:async t=>{e({isLoading:!0,error:null});try{(0,r.setAccessToken)(t);let a=await r.api.getCurrentUser(),n={token:t,email:a.user.email,role:a.user.role,credits:a.user.credits,display_name:a.user.display_name,total_jobs_created:a.user.total_jobs_created,total_jobs_completed:a.user.total_jobs_completed};return e({user:n,isLoading:!1}),!0}catch{return(0,r.clearAccessToken)(),e({user:null,isLoading:!1,error:"Invalid token or server unavailable"}),!1}},startImpersonation:async a=>{if(t().isImpersonating)return e({error:"Already impersonating a user. End current impersonation first."}),!1;e({isLoading:!0,error:null});let n=(0,r.getAccessToken)();try{let t;if(!n)throw Error("No active session to preserve");let i=await r.adminApi.impersonateUser(a);(0,r.setAccessToken)(i.session_token);try{t=await r.api.getCurrentUser()}catch(e){throw(0,r.setAccessToken)(n),e}let s={token:i.session_token,email:t.user.email,role:t.user.role,credits:t.user.credits,display_name:t.user.display_name,total_jobs_created:t.user.total_jobs_created,total_jobs_completed:t.user.total_jobs_completed};return e({user:s,isLoading:!1,isImpersonating:!0,originalAdminToken:n,impersonatedUserEmail:a}),!0}catch(t){return e({isLoading:!1,error:t instanceof Error?t.message:"Failed to impersonate user"}),!1}},endImpersonation:()=>{let{originalAdminToken:a}=t();a&&((0,r.setAccessToken)(a),e({isImpersonating:!1,originalAdminToken:null,impersonatedUserEmail:null}),t().fetchUser())}}),{name:"nomad-karaoke-auth",partialize:e=>({user:e.user}),onRehydrateStorage:()=>e=>{e?.setHasHydrated(!0)}}));(0,r.getAccessToken)()&&n.getState().fetchUser(),e.s(["useAuth",0,n])},86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},24672,e=>{"use strict";var t=e.i(68834),a=e.i(54858);let r={logo_url:null,logo_height:40,primary_color:"#ff5bb8",secondary_color:"#8b5cf6",accent_color:"#ffdf6b",background_color:null,favicon_url:null,site_title:"Nomad Karaoke Generator",tagline:null},n={audio_search:!0,file_upload:!0,youtube_url:!0,youtube_upload:!0,dropbox_upload:!0,gdrive_upload:!0,theme_selection:!0,color_overrides:!0,enable_cdg:!0,enable_4k:!0,admin_access:!0},i={theme_id:null,locked_theme:null,distribution_mode:"all"},s=(0,t.create)()((e,t)=>({tenant:null,isDefault:!0,isLoading:!1,error:null,isInitialized:!1,get branding(){let{tenant:e}=t();return e?.branding??r},get features(){let{tenant:e}=t();return e?.features??n},get defaults(){let{tenant:e}=t();return e?.defaults??i},get tenantId(){let{tenant:e}=t();return e?.id??null},fetchTenantConfig:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{let t=function(){let e=window.location.hostname.toLowerCase();if("localhost"===e||"127.0.0.1"===e)return new URLSearchParams(window.location.search).get("tenant");if(e.includes("nomadkaraoke.com")){let t=e.split(".");if((3===t.length||4===t.length&&"gen"===t[1])&&!["gen","api","www","buy","admin","app","beta"].includes(t[0]))return t[0]}return null}(),r=`${a.API_BASE_URL}/api/tenant/config`;t&&(r+=`?tenant=${encodeURIComponent(t)}`);let n=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json",...t?{"X-Tenant-ID":t}:{}}});if(!n.ok)throw Error("Failed to fetch tenant configuration");let i=await n.json();e({tenant:i.tenant,isDefault:i.is_default,isLoading:!1,isInitialized:!0}),i.tenant&&o(i.tenant.branding)}catch(t){console.error("Failed to fetch tenant config:",t),e({tenant:null,isDefault:!0,isLoading:!1,error:t instanceof Error?t.message:"Failed to load tenant configuration",isInitialized:!0})}}},setTenant:(t,a)=>{e({tenant:t,isDefault:a,isInitialized:!0}),t&&o(t.branding)},clearError:()=>e({error:null})}));function o(e){if("undefined"==typeof document)return;let t=document.documentElement;if(t.style.setProperty("--tenant-primary",e.primary_color),t.style.setProperty("--tenant-secondary",e.secondary_color),e.accent_color&&t.style.setProperty("--tenant-accent",e.accent_color),e.background_color&&t.style.setProperty("--tenant-background",e.background_color),e.site_title&&(document.title=e.site_title),e.favicon_url){let t=document.querySelector("link[rel~='icon']");t&&(t.href=e.favicon_url)}}e.s(["useTenant",0,s])},89554,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=(e,t,a,r,n,i,s,o)=>{let l=document.documentElement,c=["light","dark"];function d(t){var a;(Array.isArray(e)?e:[e]).forEach(e=>{let a="class"===e,r=a&&i?n.map(e=>i[e]||e):n;a?(l.classList.remove(...r),l.classList.add(i&&i[t]?i[t]:t)):l.setAttribute(e,t)}),a=t,o&&c.includes(a)&&(l.style.colorScheme=a)}if(r)d(r);else try{let e=localStorage.getItem(t)||a,r=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(r)}catch(e){}},n=["light","dark"],i="(prefers-color-scheme: dark)",s="undefined"==typeof window,o=a.createContext(void 0),l=e=>a.useContext(o)?a.createElement(a.Fragment,null,e.children):a.createElement(d,{...e}),c=["light","dark"],d=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:r=!0,enableColorScheme:s=!0,storageKey:l="theme",themes:d=c,defaultTheme:f=r?"system":"light",attribute:y="data-theme",value:g,children:b,nonce:_,scriptProps:w})=>{let[v,S]=a.useState(()=>p(l,f)),[$,k]=a.useState(()=>"system"===v?h():v),T=g?Object.values(g):d,j=a.useCallback(e=>{let a=e;if(!a)return;"system"===e&&r&&(a=h());let i=g?g[a]:a,o=t?m(_):null,l=document.documentElement,c=e=>{"class"===e?(l.classList.remove(...T),i&&l.classList.add(i)):e.startsWith("data-")&&(i?l.setAttribute(e,i):l.removeAttribute(e))};if(Array.isArray(y)?y.forEach(c):c(y),s){let e=n.includes(f)?f:null,t=n.includes(a)?a:e;l.style.colorScheme=t}null==o||o()},[_]),C=a.useCallback(e=>{let t="function"==typeof e?e(v):e;S(t);try{localStorage.setItem(l,t)}catch(e){}},[v]),O=a.useCallback(t=>{k(h(t)),"system"===v&&r&&!e&&j("system")},[v,e]);a.useEffect(()=>{let e=window.matchMedia(i);return e.addListener(O),O(e),()=>e.removeListener(O)},[O]),a.useEffect(()=>{let e=e=>{e.key===l&&(e.newValue?S(e.newValue):C(f))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[C]),a.useEffect(()=>{j(null!=e?e:v)},[e,v]);let E=a.useMemo(()=>({theme:v,setTheme:C,forcedTheme:e,resolvedTheme:"system"===v?$:v,themes:r?[...d,"system"]:d,systemTheme:r?$:void 0}),[v,C,e,$,r,d]);return a.createElement(o.Provider,{value:E},a.createElement(u,{forcedTheme:e,storageKey:l,attribute:y,enableSystem:r,enableColorScheme:s,defaultTheme:f,value:g,themes:d,nonce:_,scriptProps:w}),b)},u=a.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:i,enableColorScheme:s,defaultTheme:o,value:l,themes:c,nonce:d,scriptProps:u})=>{let p=JSON.stringify([n,t,o,e,c,l,i,s]).slice(1,-1);return a.createElement("script",{...u,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?d:"",dangerouslySetInnerHTML:{__html:`(${r.toString()})(${p})`}})}),p=(e,t)=>{let a;if(!s){try{a=localStorage.getItem(e)||void 0}catch(e){}return a||t}},m=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},h=e=>(e||(e=window.matchMedia(i)),e.matches?"dark":"light");function f({children:e,...a}){return(0,t.jsx)(l,{...a,children:e})}e.s(["ThemeProvider",()=>f],89554)},57091,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(24672);function n({children:e}){let{fetchTenantConfig:n,isInitialized:i}=(0,r.useTenant)();return(0,a.useEffect)(()=>{i||n()},[n,i]),(0,t.jsx)(t.Fragment,{children:e})}function i(){let{isInitialized:e,isLoading:t}=(0,r.useTenant)();return e&&!t}function s({children:e,fallback:a}){return i()?(0,t.jsx)(t.Fragment,{children:e}):a??null}e.s(["TenantProvider",()=>n,"TenantReady",()=>s,"useTenantReady",()=>i])},48030,e=>{"use strict";var t=e.i(43476),a=e.i(38036),r=e.i(67881),n=e.i(37727),i=e.i(86536);function s(){let{isImpersonating:e,impersonatedUserEmail:s,endImpersonation:o}=(0,a.useAuth)();return e?(0,t.jsxs)("div",{className:"bg-amber-500 text-amber-950 px-4 py-2 flex items-center justify-between gap-4 text-sm font-medium",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Eye,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["Viewing as ",(0,t.jsx)("strong",{children:s})]})]}),(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:o,className:"bg-amber-100 hover:bg-amber-200 text-amber-950 border-amber-600 h-7 px-3",children:[(0,t.jsx)(n.X,{className:"w-3 h-3 mr-1"}),"Stop Impersonating"]})]}):null}function o(){return(0,t.jsx)(s,{})}e.s(["ImpersonationBannerWrapper",()=>o],48030)},72285,e=>{"use strict";var t=e.i(71645);function a(){return(0,t.useEffect)(()=>{let e="localhost"===window.location.hostname;"https:"===window.location.protocol||e?"serviceWorker"in navigator?navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(e=>{console.log("[SW] Service worker registered:",e.scope),e.addEventListener("updatefound",()=>{let t=e.installing;t&&(console.log("[SW] New service worker installing..."),t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&console.log("[SW] New service worker installed, refresh for updates")}))})}).catch(e=>{console.error("[SW] Service worker registration failed:",e)}):console.log("[SW] Service workers not supported"):console.log("[SW] Skipping service worker registration: requires HTTPS")},[]),null}e.s(["ServiceWorkerRegistration",()=>a])},8341,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={cancelIdleCallback:function(){return s},requestIdleCallback:function(){return i}};for(var n in r)Object.defineProperty(a,n,{enumerable:!0,get:r[n]});let i="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},s="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},79520,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={default:function(){return _},handleClientScriptLoad:function(){return y},initScriptLoader:function(){return g}};for(var n in r)Object.defineProperty(a,n,{enumerable:!0,get:r[n]});let i=e.r(55682),s=e.r(90809),o=e.r(43476),l=i._(e.r(74080)),c=s._(e.r(71645)),d=e.r(42732),u=e.r(22737),p=e.r(8341),m=new Map,h=new Set,f=e=>{let{src:t,id:a,onLoad:r=()=>{},onReady:n=null,dangerouslySetInnerHTML:i,children:s="",strategy:o="afterInteractive",onError:c,stylesheets:d}=e,p=a||t;if(p&&h.has(p))return;if(m.has(t)){h.add(p),m.get(t).then(r,c);return}let f=()=>{n&&n(),h.add(p)},y=document.createElement("script"),g=new Promise((e,t)=>{y.addEventListener("load",function(t){e(),r&&r.call(this,t),f()}),y.addEventListener("error",function(e){t(e)})}).catch(function(e){c&&c(e)});i?(y.innerHTML=i.__html||"",f()):s?(y.textContent="string"==typeof s?s:Array.isArray(s)?s.join(""):"",f()):t&&(y.src=t,m.set(t,g)),(0,u.setAttributesFromProps)(y,e),"worker"===o&&y.setAttribute("type","text/partytown"),y.setAttribute("data-nscript",o),d&&(e=>{if(l.default.preinit)return e.forEach(e=>{l.default.preinit(e,{as:"style"})});if("undefined"!=typeof window){let t=document.head;e.forEach(e=>{let a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=e,t.appendChild(a)})}})(d),document.body.appendChild(y)};function y(e){let{strategy:t="afterInteractive"}=e;"lazyOnload"===t?window.addEventListener("load",()=>{(0,p.requestIdleCallback)(()=>f(e))}):f(e)}function g(e){e.forEach(y),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(e=>{let t=e.id||e.getAttribute("src");h.add(t)})}function b(e){let{id:t,src:a="",onLoad:r=()=>{},onReady:n=null,strategy:i="afterInteractive",onError:s,stylesheets:u,...m}=e,{updateScripts:y,scripts:g,getIsSsr:b,appDir:_,nonce:w}=(0,c.useContext)(d.HeadManagerContext);w=m.nonce||w;let v=(0,c.useRef)(!1);(0,c.useEffect)(()=>{let e=t||a;v.current||(n&&e&&h.has(e)&&n(),v.current=!0)},[n,t,a]);let S=(0,c.useRef)(!1);if((0,c.useEffect)(()=>{if(!S.current){if("afterInteractive"===i)f(e);else"lazyOnload"===i&&("complete"===document.readyState?(0,p.requestIdleCallback)(()=>f(e)):window.addEventListener("load",()=>{(0,p.requestIdleCallback)(()=>f(e))}));S.current=!0}},[e,i]),("beforeInteractive"===i||"worker"===i)&&(y?(g[i]=(g[i]||[]).concat([{id:t,src:a,onLoad:r,onReady:n,onError:s,...m,nonce:w}]),y(g)):b&&b()?h.add(t||a):b&&!b()&&f({...e,nonce:w})),_){if(u&&u.forEach(e=>{l.default.preinit(e,{as:"style"})}),"beforeInteractive"===i)if(!a)return m.dangerouslySetInnerHTML&&(m.children=m.dangerouslySetInnerHTML.__html,delete m.dangerouslySetInnerHTML),(0,o.jsx)("script",{nonce:w,dangerouslySetInnerHTML:{__html:`(self.__next_s=self.__next_s||[]).push(${JSON.stringify([0,{...m,id:t}])})`}});else return l.default.preload(a,m.integrity?{as:"script",integrity:m.integrity,nonce:w,crossOrigin:m.crossOrigin}:{as:"script",nonce:w,crossOrigin:m.crossOrigin}),(0,o.jsx)("script",{nonce:w,dangerouslySetInnerHTML:{__html:`(self.__next_s=self.__next_s||[]).push(${JSON.stringify([a,{...m,id:t}])})`}});"afterInteractive"===i&&a&&l.default.preload(a,m.integrity?{as:"script",integrity:m.integrity,nonce:w,crossOrigin:m.crossOrigin}:{as:"script",nonce:w,crossOrigin:m.crossOrigin})}return null}Object.defineProperty(b,"__nextScript",{value:!0});let _=b;("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},3303,(e,t,a)=>{t.exports=e.r(79520)},43316,e=>{"use strict";var t=e.i(47167),a=e.i(43476),r=e.i(3303);let n=t.default.env.NEXT_PUBLIC_GA_MEASUREMENT_ID||"G-D0E63LB9FY";function i(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.default,{src:`https://www.googletagmanager.com/gtag/js?id=${n}`,strategy:"afterInteractive"}),(0,a.jsx)(r.default,{id:"google-analytics",strategy:"afterInteractive",children:`
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', '${n}');
        `})]})}e.s(["GoogleAnalytics",()=>i])}]);