Metadata-Version: 2.4
Name: pyteledb
Version: 0.1.0
Summary: A Telegram-native embedded database for Telegram bots
Project-URL: Homepage, https://github.com/SilentDemonSD/pyteledb
Project-URL: Documentation, https://github.com/SilentDemonSD/pyteledb#readme
Project-URL: Repository, https://github.com/SilentDemonSD/pyteledb
Project-URL: Issues, https://github.com/SilentDemonSD/pyteledb/issues
Author: pyteledb contributors
License-Expression: GPL-3.0-or-later
License-File: LICENSE
Keywords: bot,database,embedded,persistence,telegram
Classifier: Development Status :: 3 - Alpha
Classifier: Framework :: AsyncIO
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Communications :: Chat
Classifier: Topic :: Database
Classifier: Typing :: Typed
Requires-Python: >=3.10
Requires-Dist: httpx>=0.25.0
Provides-Extra: dev
Requires-Dist: mypy>=1.5.0; extra == 'dev'
Requires-Dist: pytest-asyncio>=0.21.0; extra == 'dev'
Requires-Dist: pytest>=7.4.0; extra == 'dev'
Requires-Dist: ruff>=0.1.0; extra == 'dev'
Provides-Extra: sqlite
Requires-Dist: aiosqlite>=0.19.0; extra == 'sqlite'
Description-Content-Type: text/markdown

<div align="center">

![pyteledb](https://graph.org/file/447392c1845a8080329e4.png)

# PyTeleDB

**A Telegram-native embedded database for Telegram bots**

[![PyPI version](https://badge.fury.io/py/pyteledb.svg)](https://badge.fury.io/py/pyteledb)
[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)

</div>

---

## ğŸ§  What is pyteledb?

pyteledb is a **Telegram-native persistence abstraction** that uses Telegram itself as the storage layer. No external databases required â€” just your bot and a Telegram channel or group.

### Key Concepts

- **Telegram channel/group** = your database
- **Pinned message** = root index
- **Messages** = records
- **Bot API only** â€” no MTProto, no user accounts

## âœ¨ Features

- ğŸ”Œ **Zero external dependencies** for storage â€” Telegram IS the database
- ğŸš€ **Async-first** design with `httpx`
- ğŸ’¾ **Optional local caching** (memory or SQLite) for performance
- ğŸ”’ **Soft locking** for write coordination
- ğŸ“¦ **Versioned records** with optimistic concurrency
- ğŸ”§ **Crash-resilient** with repair tools
- ğŸ“Š **Built-in metrics** and observability

## ğŸ“¦ Installation

```bash
pip install pyteledb

# With SQLite cache support
pip install pyteledb[sqlite]
```

## ğŸš€ Quick Start

```python
import asyncio
from pyteledb import TelegramDatabase, DatabaseConfig

async def main():
    config = DatabaseConfig(
        bot_token="YOUR_BOT_TOKEN",
        chat_id=-100123456789,  # Your channel/group ID
        db_name="my_database",
    )

    async with TelegramDatabase(config) as db:
        # Initialize (creates root index if not exists)
        await db.initialize()

        # Insert a record
        record = await db.insert({
            "user_id": 12345,
            "name": "Alice",
            "score": 100,
        })
        print(f"Created record: {record.id}")

        # Update
        await db.update(record.id, {
            "user_id": 12345,
            "name": "Alice",
            "score": 150,  # New high score!
        })

        # Get database info
        info = await db.info()
        print(f"Total records: {info['record_count']}")

asyncio.run(main())
```

## ğŸ“ Project Structure

```
pyteledb/
â”œâ”€â”€ core/       # Database logic (TelegramDatabase, Record, RootIndex)
â”œâ”€â”€ telegram/   # Bot API client (messages, files, pins)
â”œâ”€â”€ storage/    # Serialization, checksums, versioning
â”œâ”€â”€ cache/      # Memory and SQLite caching
â”œâ”€â”€ ops/        # Rate limiting, write queue, metrics
â””â”€â”€ utils/      # Logging, time, ID generation
```

## âš¡ Performance Model

pyteledb is designed for **small to medium Telegram bots** with predictable workloads:

- **Never scans full chat history** â€” fetches only required message IDs
- **Uses local cache** for frequently accessed records
- **Rate-limit aware** with automatic throttling
- **Prefers `editMessage`** over `sendMessage` for updates

## ğŸ›¡ï¸ Consistency & Safety

Telegram provides no transactions, so pyteledb implements:

- **Record versioning** for optimistic concurrency
- **Soft locks** for write coordination
- **Idempotent, retry-safe writes**
- **Repair tools** for crash recovery

## ğŸ¯ Target Use Cases

- âœ… Small to medium Telegram bots
- âœ… Developer tooling
- âœ… Predictable workloads
- âœ… Human-inspectable data

## ğŸš« Not Designed For

- âŒ High-throughput applications
- âŒ Complex queries (SQL/NoSQL parity)
- âŒ Multi-service orchestration

## ğŸ“š Documentation

- [Architecture Guide](docs/architecture.mdx)
- [API Reference](docs/api/database.mdx)
- [Contributing Guide](CONTRIBUTING.md)

## ğŸ“„ License

This project is licensed under the GPL-3.0 License â€” see the [LICENSE](LICENSE) file for details.

## ğŸ¤ Contributing

Contributions are welcome! Please read our [Contributing Guide](CONTRIBUTING.md) first.

---

<div align="center">
Made with â¤ï¸ for the Telegram bot community
</div>
