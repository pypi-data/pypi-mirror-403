import{u as Y}from"./userStore-4FpRPoeM.js";import{E as X,a as Z}from"./router-DzczyMew.js";import{a as T,c as U,i as a,k as O,f as i,b as f,e as S,h as o,u as e,B as F,w as t,g as I,t as w,aK as D,a_ as z,O as Q,ba as N,b5 as h,b3 as x,b6 as M,bn as q,R as E,$ as A,bo as V,cB as ee,bl as ae,af as le,ag as oe,r as $,W as ne,n as K,aJ as te}from"./jwt-decode.esm-Dw_OlTCW.js";import{M as re}from"./member-Cn62RcK0.js";import{O as L}from"./organization-CyPzXZ9t.js";import"./tables-CkY-LQhC.js";import{F as se}from"./folder-DC5bh9EE.js";import{S as C}from"./index-BNW_czQY.js";import{_ as ie}from"./AbstraLogo.vue_vue_type_script_setup_true_lang--TrSji4U.js";import{S as ue,A as de}from"./index--PNRck0c.js";import"./ts.worker-5sEEipil.js";import"./record-BTRCUCPd.js";import"./string-BuQ9zSDy.js";import"./logo-BiWG9_W5.js";import"./Logo-CecBL509.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b=new Error().stack;b&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[b]="613a304d-c397-462c-a580-4d83da540956",r._sentryDebugIdIdentifier="sentry-dbid-613a304d-c397-462c-a580-4d83da540956")}catch{}})();async function ce(r){const b=Y(),y={email:r.basicInfo.email,name:r.basicInfo.name,work_email:r.basicInfo.workEmail,company_name:r.companyInfo.companyName,company_domain:r.companyInfo.companyDomain,team:r.companyInfo.team,other_team:r.companyInfo.otherTeam,role:r.companyInfo.role,python_experience:r.userDetails.pythonExperience,has_use_case:r.userDetails.hasUseCase,reported_use_cases:r.userDetails.reportedUseCases,other_use_cases:r.userDetails.otherUseCases,tools:r.userDetails.tools,source:r.sourceInfo.reportedSource,other_source:r.sourceInfo.otherSource,ref_url:document.referrer},u=await fetch(`${X.onboarding}/_hooks/onboarding-completed`,{method:"POST",headers:{"Content-Type":"application/json",token:b.jwt||""},body:JSON.stringify(y)});if(!u.ok)throw new Error(`Failed to submit onboarding data: ${u.statusText}`)}const me=[{value:"Finance",labelKey:"i18n_onboardingcompanyinfo_team_finance"},{value:"Accounting",labelKey:"i18n_onboardingcompanyinfo_team_accounting"},{value:"Tax",labelKey:"i18n_onboardingcompanyinfo_team_tax"},{value:"FinOps",labelKey:"i18n_onboardingcompanyinfo_team_finops"},{value:"Financial Planning & Analysis",labelKey:"i18n_onboardingcompanyinfo_team_fpa"},{value:"Operations",labelKey:"i18n_onboardingcompanyinfo_team_operations"},{value:"Product",labelKey:"i18n_onboardingcompanyinfo_team_product"},{value:"Marketing",labelKey:"i18n_onboardingcompanyinfo_team_marketing"},{value:"Sales",labelKey:"i18n_onboardingcompanyinfo_team_sales"},{value:"Cybersecurity",labelKey:"i18n_onboardingcompanyinfo_team_cybersecurity"},{value:"Customer Success",labelKey:"i18n_onboardingcompanyinfo_team_customersuccess"},{value:"HR",labelKey:"i18n_onboardingcompanyinfo_team_hr"},{value:"Other",labelKey:"i18n_onboardingcompanyinfo_team_other"}],_e=[{value:"I've never used Python before, but I'm excited to learn",labelKey:"i18n_onboardinguserdetails_python_never"},{value:"I sometimes use ChatGPT to generate Python scripts",labelKey:"i18n_onboardinguserdetails_python_chatgpt"},{value:"I've written some Python here and there",labelKey:"i18n_onboardinguserdetails_python_some"},{value:"I use Python regularly",labelKey:"i18n_onboardinguserdetails_python_regularly"}],pe=[{value:"Enable other teammates to run my scripts",labelKey:"i18n_onboardinguserdetails_usecase_enableteammates"},{value:"Design workflows with manual and automated steps",labelKey:"i18n_onboardinguserdetails_usecase_designworkflows"},{value:"Schedule my scripts to run automatically",labelKey:"i18n_onboardinguserdetails_usecase_schedule"},{value:"Integrate and connect the tools my team uses",labelKey:"i18n_onboardinguserdetails_usecase_integrate"},{value:"Automate spreadsheet work",labelKey:"i18n_onboardinguserdetails_usecase_spreadsheet"},{value:"Use AI to parse documents",labelKey:"i18n_onboardinguserdetails_usecase_ai"},{value:"Build an automated workflow",labelKey:"i18n_onboardinguserdetails_usecase_workflow"},{value:"Create automated reports",labelKey:"i18n_onboardinguserdetails_usecase_reports"},{value:"Other",labelKey:"i18n_onboardinguserdetails_usecase_other"}],be=[{value:"Google",labelKey:"i18n_onboardingsourceinfo_source_google"},{value:"Linkedin",labelKey:"i18n_onboardingsourceinfo_source_linkedin"},{value:"Github",labelKey:"i18n_onboardingsourceinfo_source_github"},{value:"Youtube",labelKey:"i18n_onboardingsourceinfo_source_youtube"},{value:"From a friend or coworker",labelKey:"i18n_onboardingsourceinfo_source_friend"},{value:"Event or conference",labelKey:"i18n_onboardingsourceinfo_source_event"},{value:"Other",labelKey:"i18n_onboardingsourceinfo_source_other"}],ve=["Excel","Google Sheets","Salesforce","Slack"],R=["gmail.com","yahoo.com","hotmail.com","outlook.com","icloud.com","protonmail.com","aol.com"],fe={class:"form-actions"},ye=T({__name:"OnboardingFormActions",props:{showBack:{type:Boolean,default:!1},isSubmit:{type:Boolean,default:!1},submitText:{default:void 0},loading:{type:Boolean,default:!1}},emits:["back"],setup(r){const b=r,y=U(()=>b.isSubmit?b.submitText||a.translate("i18n_onboardingformactions_complete"):a.translate("i18n_onboardingformactions_next"));return(u,d)=>(i(),O("div",fe,[r.showBack?(i(),f(e(F),{key:0,size:"large",onClick:d[0]||(d[0]=s=>u.$emit("back"))},{default:t(()=>[I(w(e(a).translate("i18n_onboardingformactions_back")),1)]),_:1})):S("",!0),o(e(F),{type:"primary",size:"large","html-type":"submit",loading:r.loading},{default:t(()=>[I(w(y.value),1)]),_:1},8,["loading"])]))}}),B=D(ye,[["__scopeId","data-v-706fd497"]]),ge={key:1,class:"warning-text"},he=T({__name:"BasicUserInfo",props:{modelValue:{}},emits:["update:modelValue","next"],setup(r,{emit:b}){const{Title:y,Text:u}=z,d=r,s=b,l=U({get:()=>d.modelValue,set:n=>s("update:modelValue",n)}),k=Z.getAuthor();k&&!l.value.email&&(l.value={...l.value,email:k.claims.email});const g=U(()=>!l.value.email||!l.value.email.includes("@")?"":l.value.email.split("@")[1]||""),_=U(()=>R.includes(g.value.toLowerCase())),m=U(()=>{if(!l.value.name)return a.translate("i18n_onboardingbasicuserinfo_workemail_placeholder");const n=l.value.name.replace(/[^a-zA-Z0-9]/g,"").toLowerCase();return n?`${n}@coolcompany.com`:a.translate("i18n_onboardingbasicuserinfo_workemail_placeholder")});Q(g,n=>{R.includes(n.toLowerCase())||(l.value={...l.value,workEmail:l.value.email})});const p=()=>{s("next")};return(n,v)=>(i(),f(e(N),{layout:"vertical",model:l.value,onFinish:p},{default:t(()=>[o(e(y),{level:3},{default:t(()=>[I(w(e(a).translate("i18n_onboardingbasicuserinfo_title")),1)]),_:1}),o(e(h),{label:e(a).translate("i18n_onboardingbasicuserinfo_name_label"),name:"name",rules:[{required:!0,message:e(a).translate("i18n_onboardingbasicuserinfo_name_required")}]},{default:t(()=>[o(e(x),{value:l.value.name,"onUpdate:value":v[0]||(v[0]=c=>l.value.name=c),placeholder:e(a).translate("i18n_onboardingbasicuserinfo_name_placeholder"),size:"large"},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),o(e(h),{label:e(a).translate("i18n_onboardingbasicuserinfo_email_label")},{default:t(()=>[o(e(x),{value:l.value.email,disabled:"",size:"large"},null,8,["value"])]),_:1},8,["label"]),_.value?(i(),f(e(h),{key:0,label:e(a).translate("i18n_onboardingbasicuserinfo_workemail_label"),name:"workEmail",rules:[{required:!1,type:"email",message:e(a).translate("i18n_onboardingbasicuserinfo_workemail_invalid")}]},{default:t(()=>[o(e(x),{value:l.value.workEmail,"onUpdate:value":v[1]||(v[1]=c=>l.value.workEmail=c),placeholder:m.value,size:"large"},null,8,["value","placeholder"])]),_:1},8,["label","rules"])):S("",!0),_.value?(i(),O("div",ge,[o(e(u),{type:"warning"},{default:t(()=>[I(w(e(a).translate("i18n_onboardingbasicuserinfo_warning")),1)]),_:1})])):S("",!0),o(B)]),_:1},8,["model"]))}}),ke=D(he,[["__scopeId","data-v-3fc1f0da"]]),we=T({__name:"CompanyInfo",props:{modelValue:{}},emits:["update:modelValue","next","back"],setup(r,{emit:b}){const y=r,u=b,d=U({get:()=>y.modelValue,set:g=>u("update:modelValue",g)}),s=me.map(g=>({label:a.translate(g.labelKey),value:g.value})),l=()=>{u("next")},k=()=>{u("back")};return(g,_)=>(i(),f(e(N),{layout:"vertical",model:d.value,onFinish:l},{default:t(()=>[o(e(h),{label:e(a).translate("i18n_onboardingcompanyinfo_company_label"),name:"companyName",rules:[{required:!0,message:e(a).translate("i18n_onboardingcompanyinfo_company_required")}]},{default:t(()=>[o(e(x),{value:d.value.companyName,"onUpdate:value":_[0]||(_[0]=m=>d.value.companyName=m),placeholder:e(a).translate("i18n_onboardingcompanyinfo_company_placeholder"),size:"large"},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),o(e(h),{label:e(a).translate("i18n_onboardingcompanyinfo_website_label"),name:"companyDomain"},{default:t(()=>[o(e(x),{value:d.value.companyDomain,"onUpdate:value":_[1]||(_[1]=m=>d.value.companyDomain=m),placeholder:e(a).translate("i18n_onboardingcompanyinfo_website_placeholder"),size:"large"},null,8,["value","placeholder"])]),_:1},8,["label"]),o(e(h),{label:e(a).translate("i18n_onboardingcompanyinfo_team_label"),name:"team",rules:[{required:!0,message:e(a).translate("i18n_onboardingcompanyinfo_team_required")}]},{default:t(()=>[o(e(M),{value:d.value.team,"onUpdate:value":_[2]||(_[2]=m=>d.value.team=m),placeholder:e(a).translate("i18n_onboardingcompanyinfo_team_placeholder"),size:"large",options:e(s)},null,8,["value","placeholder","options"])]),_:1},8,["label","rules"]),d.value.team==="Other"?(i(),f(e(h),{key:0,label:e(a).translate("i18n_onboardingcompanyinfo_otherteam_label"),name:"otherTeam",rules:[{required:!0,message:e(a).translate("i18n_onboardingcompanyinfo_otherteam_required")}]},{default:t(()=>[o(e(x),{value:d.value.otherTeam,"onUpdate:value":_[3]||(_[3]=m=>d.value.otherTeam=m),placeholder:e(a).translate("i18n_onboardingcompanyinfo_otherteam_placeholder"),size:"large"},null,8,["value","placeholder"])]),_:1},8,["label","rules"])):S("",!0),o(e(h),{label:e(a).translate("i18n_onboardingcompanyinfo_role_label"),name:"role",rules:[{required:!0,message:e(a).translate("i18n_onboardingcompanyinfo_role_required")}]},{default:t(()=>[o(e(x),{value:d.value.role,"onUpdate:value":_[4]||(_[4]=m=>d.value.role=m),placeholder:e(a).translate("i18n_onboardingcompanyinfo_role_placeholder"),size:"large"},null,8,["value","placeholder"])]),_:1},8,["label","rules"]),o(B,{"show-back":"",onBack:k})]),_:1},8,["model"]))}}),Ie=T({__name:"SourceInfo",props:{modelValue:{},loading:{type:Boolean,default:!1},isLastStep:{type:Boolean,default:!0}},emits:["update:modelValue","submit","back"],setup(r,{emit:b}){const{Title:y}=z,{TextArea:u}=x,d=r,s=b,l=U({get:()=>d.modelValue,set:m=>s("update:modelValue",m)}),k=be.map(m=>({value:m.value,label:a.translate(m.labelKey)})),g=()=>{s("submit")},_=()=>{s("back")};return(m,p)=>(i(),f(e(N),{layout:"vertical",model:l.value,onFinish:g},{default:t(()=>[o(e(y),{level:3},{default:t(()=>[I(w(e(a).translate("i18n_onboardingsourceinfo_title")),1)]),_:1}),o(e(h),{label:e(a).translate("i18n_onboardingsourceinfo_source_label"),name:"reportedSource"},{default:t(()=>[o(e(q),{value:l.value.reportedSource,"onUpdate:value":p[0]||(p[0]=n=>l.value.reportedSource=n),size:"large"},{default:t(()=>[o(e(C),{direction:"vertical"},{default:t(()=>[(i(!0),O(E,null,A(e(k),n=>(i(),f(e(V),{key:n.value,value:n.value},{default:t(()=>[I(w(n.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),l.value.reportedSource==="Other"?(i(),f(e(h),{key:0,label:e(a).translate("i18n_onboardingsourceinfo_other_label"),name:"otherSource",rules:[{required:!0,message:e(a).translate("i18n_onboardingsourceinfo_other_required")}]},{default:t(()=>[o(e(u),{value:l.value.otherSource,"onUpdate:value":p[1]||(p[1]=n=>l.value.otherSource=n),rows:3,placeholder:e(a).translate("i18n_onboardingsourceinfo_other_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label","rules"])):S("",!0),o(B,{"show-back":"","is-submit":r.isLastStep,loading:r.loading,onBack:_},null,8,["is-submit","loading"])]),_:1},8,["model"]))}}),xe={key:0},Se=T({__name:"UserDetails",props:{modelValue:{}},emits:["update:modelValue","next","back"],setup(r,{emit:b}){const{Title:y}=z,{TextArea:u}=x,d=r,s=b,l=U({get:()=>d.modelValue,set:n=>s("update:modelValue",n)}),k=_e.map(n=>({value:n.value,label:a.translate(n.labelKey)})),g=pe.map(n=>({value:n.value,label:a.translate(n.labelKey)})),_=ve,m=()=>{s("next")},p=()=>{s("back")};return(n,v)=>(i(),f(e(N),{layout:"vertical",model:l.value,onFinish:m},{default:t(()=>[o(e(y),{level:3},{default:t(()=>[I(w(e(a).translate("i18n_onboardinguserdetails_title")),1)]),_:1}),o(e(h),{label:e(a).translate("i18n_onboardinguserdetails_python_label"),name:"pythonExperience",rules:[{required:!0,message:e(a).translate("i18n_onboardinguserdetails_python_required")}]},{default:t(()=>[o(e(q),{value:l.value.pythonExperience,"onUpdate:value":v[0]||(v[0]=c=>l.value.pythonExperience=c),size:"large"},{default:t(()=>[o(e(C),{direction:"vertical"},{default:t(()=>[(i(!0),O(E,null,A(e(k),c=>(i(),f(e(V),{key:c.value,value:c.value},{default:t(()=>[I(w(c.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1},8,["label","rules"]),o(e(h),{label:e(a).translate("i18n_onboardinguserdetails_usecase_label"),name:"hasUseCase",rules:[{required:!0,message:e(a).translate("i18n_onboardinguserdetails_usecase_required")}]},{default:t(()=>[o(e(q),{value:l.value.hasUseCase,"onUpdate:value":v[1]||(v[1]=c=>l.value.hasUseCase=c),size:"large"},{default:t(()=>[o(e(C),{direction:"vertical"},{default:t(()=>[o(e(V),{value:!0},{default:t(()=>[I(w(e(a).translate("i18n_onboardinguserdetails_usecase_yes")),1)]),_:1}),o(e(V),{value:!1},{default:t(()=>[I(w(e(a).translate("i18n_onboardinguserdetails_usecase_no")),1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label","rules"]),l.value.hasUseCase?(i(),O("div",xe,[o(e(h),{label:e(a).translate("i18n_onboardinguserdetails_mainusecase_label"),name:"reportedUseCases",rules:[{required:!0,message:e(a).translate("i18n_onboardinguserdetails_mainusecase_required"),type:"array",min:1}]},{default:t(()=>[o(e(ee),{value:l.value.reportedUseCases,"onUpdate:value":v[2]||(v[2]=c=>l.value.reportedUseCases=c)},{default:t(()=>[o(e(C),{direction:"vertical"},{default:t(()=>[(i(!0),O(E,null,A(e(g),c=>(i(),f(e(ae),{key:c.value,value:c.value},{default:t(()=>[I(w(c.label),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1},8,["label","rules"]),l.value.reportedUseCases.includes("Integrate and connect the tools my team uses")?(i(),f(e(h),{key:0,label:e(a).translate("i18n_onboardinguserdetails_tools_label")},{default:t(()=>[o(e(M),{value:l.value.tools,"onUpdate:value":v[3]||(v[3]=c=>l.value.tools=c),mode:"tags",placeholder:e(a).translate("i18n_onboardinguserdetails_tools_placeholder"),size:"large","default-value":e(_)},null,8,["value","placeholder","default-value"])]),_:1},8,["label"])):S("",!0),l.value.reportedUseCases.includes("Other")?(i(),f(e(h),{key:1,label:e(a).translate("i18n_onboardinguserdetails_other_label"),name:"otherUseCases",rules:[{required:!0,message:e(a).translate("i18n_onboardinguserdetails_other_required")}]},{default:t(()=>[o(e(u),{value:l.value.otherUseCases,"onUpdate:value":v[4]||(v[4]=c=>l.value.otherUseCases=c),rows:3,placeholder:e(a).translate("i18n_onboardinguserdetails_other_placeholder")},null,8,["value","placeholder"])]),_:1},8,["label","rules"])):S("",!0)])):S("",!0),o(B,{"show-back":"",onBack:p})]),_:1},8,["model"]))}}),Ue={class:"onboarding-container"},Oe={class:"onboarding-form"},Te={class:"header"},Ke={class:"form-content"},Ve=T({__name:"OnboardingView",setup(r){const b=le(),y=oe(),u=$(0),d=[a.translate("i18n_onboardingview_step_basicinfo"),a.translate("i18n_onboardingview_step_company"),a.translate("i18n_onboardingview_step_details"),a.translate("i18n_onboardingview_step_source")],s=ne({basicInfo:{name:"",email:"",workEmail:""},companyInfo:{companyName:"",companyDomain:"",team:"",otherTeam:"",role:""},userDetails:{pythonExperience:"",hasUseCase:!1,reportedUseCases:[],otherUseCases:"",tools:[]},sourceInfo:{reportedSource:"",otherSource:""}}),l=()=>{u.value<d.length-1&&u.value++},k=()=>{u.value>0&&u.value--},g=$(!1),_=async()=>{g.value=!0;try{if(await ce(s),(await L.list()).length===0){const v=s.companyInfo.companyName||"My Organization",c=await L.create(v),G=new se,j=await new re().list(c.id),H=s.basicInfo.workEmail||s.basicInfo.email,P=j.find(W=>W.email===H),J=s.companyInfo.team||"General";await G.create({organizationId:c.id,name:J,memberIds:P?[P.id]:[]})}}catch(n){te(n,{extra:{step:"submitOnboarding",formData:s}});return}finally{g.value=!1}const m=y.query.redirect,p=y.query["prev-redirect"];if(m){const n=m.split("/").at(-1);await b.push({path:n,query:{...y.query,redirect:p,"prev-redirect":void 0}});return}b.push({name:"home"})};return(m,p)=>(i(),O("div",Ue,[K("div",Oe,[K("div",Te,[o(ie,{"hide-text":"",size:"large"}),K("h2",null,w(e(a).translate("i18n_onboardingview_welcome")),1),o(e(de),{current:u.value,size:"small",class:"step-indicator"},{default:t(()=>[(i(),O(E,null,A(d,n=>o(e(ue),{key:n,title:n,disabled:!0},null,8,["title"])),64))]),_:1},8,["current"])]),K("div",Ke,[u.value===0?(i(),f(ke,{key:0,modelValue:s.basicInfo,"onUpdate:modelValue":p[0]||(p[0]=n=>s.basicInfo=n),onNext:l},null,8,["modelValue"])):u.value===1?(i(),f(we,{key:1,modelValue:s.companyInfo,"onUpdate:modelValue":p[1]||(p[1]=n=>s.companyInfo=n),onNext:l,onBack:k},null,8,["modelValue"])):u.value===2?(i(),f(Se,{key:2,modelValue:s.userDetails,"onUpdate:modelValue":p[2]||(p[2]=n=>s.userDetails=n),onNext:l,onBack:k},null,8,["modelValue"])):u.value===3?(i(),f(Ie,{key:3,modelValue:s.sourceInfo,"onUpdate:modelValue":p[3]||(p[3]=n=>s.sourceInfo=n),loading:g.value,onSubmit:_,onBack:k},null,8,["modelValue","loading"])):S("",!0)])])]))}}),He=D(Ve,[["__scopeId","data-v-2d1c9ed0"]]);export{He as default};
//# sourceMappingURL=OnboardingView-D0e7uHpX.js.map
