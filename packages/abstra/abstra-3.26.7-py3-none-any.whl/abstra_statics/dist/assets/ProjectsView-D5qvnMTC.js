import{a as z,j as $,c as A,k as d,f as o,m as K,e as V,n as s,p as q,r as F,i as c,b as k,u as e,co as ce,t as f,bm as x,h as l,aM as O,w as r,g as y,bg as ue,aK as Q,bM as X,b3 as N,a0 as le,ag as pe,af as ve,O as fe,J as me,cp as ge,bq as U,b4 as _e,R as S,cq as he,$ as T,K as ye,Q as E,F as L,B as Y,cr as Ae,ac as G,ba as ee,b5 as B,b6 as te}from"./jwt-decode.esm-Dw_OlTCW.js";import{_ as C}from"./AbstraButton.vue_vue_type_script_setup_true_lang-60wd7w0p.js";import{G as be}from"./PhNotePencil.vue-aGTzqjqf.js";import{G as we}from"./PhCaretRight.vue-CPFOGdR4.js";import{a as je,G as He}from"./PhFolderPlus.vue-Cl7z2UQz.js";import{I as ke}from"./PhPlus.vue-DwQCqGHA.js";import{u as Me}from"./projectsStore-Hbr3d2AP.js";import{G as $e,A as ae}from"./index-CKBppVEa.js";import{f as Ze,e as Ve,L as Ce,h as Fe,j as Pe}from"./router-DzczyMew.js";import"./member-Cn62RcK0.js";import"./organization-CyPzXZ9t.js";import"./project-Dsz7eI6O.js";import"./record-BTRCUCPd.js";import"./tables-CkY-LQhC.js";import"./string-BuQ9zSDy.js";import"./folder-DC5bh9EE.js";import"./ant-design-Cvwf7JMR.js";import"./ts.worker-5sEEipil.js";(function(){try{var h=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},v=new Error().stack;v&&(h._sentryDebugIds=h._sentryDebugIds||{},h._sentryDebugIds[v]="1e58621a-f7d9-44ca-b8a5-17b86a1c12d5",h._sentryDebugIdIdentifier="sentry-dbid-1e58621a-f7d9-44ca-b8a5-17b86a1c12d5")}catch{}})();const xe=["width","height","fill","transform"],Le={key:0},ze=s("path",{d:"M224,44H32A20,20,0,0,0,12,64V192a20,20,0,0,0,20,20H224a20,20,0,0,0,20-20V64A20,20,0,0,0,224,44Zm-4,24V88H36V68ZM36,188V112H220v76Zm172-24a12,12,0,0,1-12,12H164a12,12,0,0,1,0-24h32A12,12,0,0,1,208,164Zm-68,0a12,12,0,0,1-12,12H116a12,12,0,0,1,0-24h12A12,12,0,0,1,140,164Z"},null,-1),Ie=[ze],Se={key:1},De=s("path",{d:"M232,96v96a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V96Z",opacity:"0.2"},null,-1),Be=s("path",{d:"M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48Zm0,16V88H32V64Zm0,128H32V104H224v88Zm-16-24a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h32A8,8,0,0,1,208,168Zm-64,0a8,8,0,0,1-8,8H120a8,8,0,0,1,0-16h16A8,8,0,0,1,144,168Z"},null,-1),Ne=[De,Be],Ue={key:2},Te=s("path",{d:"M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48ZM136,176H120a8,8,0,0,1,0-16h16a8,8,0,0,1,0,16Zm64,0H168a8,8,0,0,1,0-16h32a8,8,0,0,1,0,16ZM32,88V64H224V88Z"},null,-1),Ee=[Te],Ge={key:3},Oe=s("path",{d:"M224,50H32A14,14,0,0,0,18,64V192a14,14,0,0,0,14,14H224a14,14,0,0,0,14-14V64A14,14,0,0,0,224,50ZM32,62H224a2,2,0,0,1,2,2V90H30V64A2,2,0,0,1,32,62ZM224,194H32a2,2,0,0,1-2-2V102H226v90A2,2,0,0,1,224,194Zm-18-26a6,6,0,0,1-6,6H168a6,6,0,0,1,0-12h32A6,6,0,0,1,206,168Zm-64,0a6,6,0,0,1-6,6H120a6,6,0,0,1,0-12h16A6,6,0,0,1,142,168Z"},null,-1),Ke=[Oe],qe={key:4},Qe=s("path",{d:"M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48Zm0,16V88H32V64Zm0,128H32V104H224v88Zm-16-24a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h32A8,8,0,0,1,208,168Zm-64,0a8,8,0,0,1-8,8H120a8,8,0,0,1,0-16h16A8,8,0,0,1,144,168Z"},null,-1),Re=[Qe],We={key:5},Je=s("path",{d:"M224,52H32A12,12,0,0,0,20,64V192a12,12,0,0,0,12,12H224a12,12,0,0,0,12-12V64A12,12,0,0,0,224,52ZM32,60H224a4,4,0,0,1,4,4V92H28V64A4,4,0,0,1,32,60ZM224,196H32a4,4,0,0,1-4-4V100H228v92A4,4,0,0,1,224,196Zm-20-28a4,4,0,0,1-4,4H168a4,4,0,0,1,0-8h32A4,4,0,0,1,204,168Zm-64,0a4,4,0,0,1-4,4H120a4,4,0,0,1,0-8h16A4,4,0,0,1,140,168Z"},null,-1),Xe=[Je],Ye={name:"PhCreditCard"},e1=z({...Ye,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(h){const v=h,g=$("weight","regular"),t=$("size","1em"),u=$("color","currentColor"),_=$("mirrored",!1),p=A(()=>v.weight??g),b=A(()=>v.size??t),M=A(()=>v.color??u),j=A(()=>v.mirrored!==void 0?v.mirrored?"scale(-1, 1)":void 0:_?"scale(-1, 1)":void 0);return(w,Z)=>(o(),d("svg",q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:b.value,height:b.value,fill:M.value,transform:j.value},w.$attrs),[K(w.$slots,"default"),p.value==="bold"?(o(),d("g",Le,Ie)):p.value==="duotone"?(o(),d("g",Se,Ne)):p.value==="fill"?(o(),d("g",Ue,Ee)):p.value==="light"?(o(),d("g",Ge,Ke)):p.value==="regular"?(o(),d("g",qe,Re)):p.value==="thin"?(o(),d("g",We,Xe)):V("",!0)],16,xe))}}),t1=["width","height","fill","transform"],a1={key:0},l1=s("path",{d:"M248.23,112.31A20,20,0,0,0,232,104H220V88a20,20,0,0,0-20-20H132L105.34,48a20.12,20.12,0,0,0-12-4H40A20,20,0,0,0,20,64V208a12,12,0,0,0,12,12H211.1a12,12,0,0,0,11.33-8l28.49-81.47.06-.17A20,20,0,0,0,248.23,112.31ZM92,68l28.8,21.6A12,12,0,0,0,128,92h68v12H69.77a20,20,0,0,0-18.94,13.58L44,137.15V68ZM202.59,196H48.89l23.72-68H226.37Z"},null,-1),o1=[l1],r1={key:1},s1=s("path",{d:"M208,88v24H69.77a8,8,0,0,0-7.59,5.47L32,208V64a8,8,0,0,1,8-8H93.33a8,8,0,0,1,4.8,1.6L128,80h72A8,8,0,0,1,208,88Z",opacity:"0.2"},null,-1),n1=s("path",{d:"M245,110.64A16,16,0,0,0,232,104H216V88a16,16,0,0,0-16-16H130.67L102.94,51.2a16.14,16.14,0,0,0-9.6-3.2H40A16,16,0,0,0,24,64V208a8,8,0,0,0,8,8H211.1a8,8,0,0,0,7.59-5.47l28.49-85.47A16.05,16.05,0,0,0,245,110.64ZM93.34,64,123.2,86.4A8,8,0,0,0,128,88h72v16H69.77a16,16,0,0,0-15.18,10.94L40,158.7V64Zm112,136H43.1l26.67-80H232Z"},null,-1),i1=[s1,n1],d1={key:2},c1=s("path",{d:"M245,110.64A16,16,0,0,0,232,104H216V88a16,16,0,0,0-16-16H130.67L102.94,51.2a16.14,16.14,0,0,0-9.6-3.2H40A16,16,0,0,0,24,64V208h0a8,8,0,0,0,8,8H211.1a8,8,0,0,0,7.59-5.47l28.49-85.47A16.05,16.05,0,0,0,245,110.64ZM93.34,64,123.2,86.4A8,8,0,0,0,128,88h72v16H69.77a16,16,0,0,0-15.18,10.94L40,158.7V64Z"},null,-1),u1=[c1],p1={key:3},v1=s("path",{d:"M243.36,111.81A14,14,0,0,0,232,106H214V88a14,14,0,0,0-14-14H130L101.74,52.8a14.06,14.06,0,0,0-8.4-2.8H40A14,14,0,0,0,26,64V208a6,6,0,0,0,6,6H211.1a6,6,0,0,0,5.69-4.1l28.49-85.47A14,14,0,0,0,243.36,111.81ZM40,62H93.34a2,2,0,0,1,1.2.4L124.4,84.8A6,6,0,0,0,128,86h72a2,2,0,0,1,2,2v18H69.77a14,14,0,0,0-13.28,9.57L38,171V64A2,2,0,0,1,40,62Zm193.9,58.63L206.78,202H40.33l27.54-82.63a2,2,0,0,1,1.9-1.37H232a2,2,0,0,1,1.9,2.63Z"},null,-1),f1=[v1],m1={key:4},g1=s("path",{d:"M245,110.64A16,16,0,0,0,232,104H216V88a16,16,0,0,0-16-16H130.67L102.94,51.2a16.14,16.14,0,0,0-9.6-3.2H40A16,16,0,0,0,24,64V208h0a8,8,0,0,0,8,8H211.1a8,8,0,0,0,7.59-5.47l28.49-85.47A16.05,16.05,0,0,0,245,110.64ZM93.34,64,123.2,86.4A8,8,0,0,0,128,88h72v16H69.77a16,16,0,0,0-15.18,10.94L40,158.7V64Zm112,136H43.1l26.67-80H232Z"},null,-1),_1=[g1],h1={key:5},y1=s("path",{d:"M241.72,113a11.88,11.88,0,0,0-9.73-5H212V88a12,12,0,0,0-12-12H129.33l-28.8-21.6a12.05,12.05,0,0,0-7.2-2.4H40A12,12,0,0,0,28,64V208a4,4,0,0,0,4,4H211.09a4,4,0,0,0,3.79-2.74l28.49-85.47A11.86,11.86,0,0,0,241.72,113ZM40,60H93.33a4,4,0,0,1,2.4.8L125.6,83.2a4,4,0,0,0,2.4.8h72a4,4,0,0,1,4,4v20H69.76a12,12,0,0,0-11.38,8.21L36,183.35V64A4,4,0,0,1,40,60Zm195.78,61.26L208.2,204H37.55L66,118.74A4,4,0,0,1,69.76,116H232a4,4,0,0,1,3.79,5.26Z"},null,-1),A1=[y1],b1={name:"PhFolderOpen"},w1=z({...b1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(h){const v=h,g=$("weight","regular"),t=$("size","1em"),u=$("color","currentColor"),_=$("mirrored",!1),p=A(()=>v.weight??g),b=A(()=>v.size??t),M=A(()=>v.color??u),j=A(()=>v.mirrored!==void 0?v.mirrored?"scale(-1, 1)":void 0:_?"scale(-1, 1)":void 0);return(w,Z)=>(o(),d("svg",q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:b.value,height:b.value,fill:M.value,transform:j.value},w.$attrs),[K(w.$slots,"default"),p.value==="bold"?(o(),d("g",a1,o1)):p.value==="duotone"?(o(),d("g",r1,i1)):p.value==="fill"?(o(),d("g",d1,u1)):p.value==="light"?(o(),d("g",p1,f1)):p.value==="regular"?(o(),d("g",m1,_1)):p.value==="thin"?(o(),d("g",h1,A1)):V("",!0)],16,t1))}}),j1=["width","height","fill","transform"],H1={key:0},k1=s("path",{d:"M164.38,181.1a52,52,0,1,0-72.76,0,75.89,75.89,0,0,0-30,28.89,12,12,0,0,0,20.78,12,53,53,0,0,1,91.22,0,12,12,0,1,0,20.78-12A75.89,75.89,0,0,0,164.38,181.1ZM100,144a28,28,0,1,1,28,28A28,28,0,0,1,100,144Zm147.21,9.59a12,12,0,0,1-16.81-2.39c-8.33-11.09-19.85-19.59-29.33-21.64a12,12,0,0,1-1.82-22.91,20,20,0,1,0-24.78-28.3,12,12,0,1,1-21-11.6,44,44,0,1,1,73.28,48.35,92.18,92.18,0,0,1,22.85,21.69A12,12,0,0,1,247.21,153.59Zm-192.28-24c-9.48,2.05-21,10.55-29.33,21.65A12,12,0,0,1,6.41,136.79,92.37,92.37,0,0,1,29.26,115.1a44,44,0,1,1,73.28-48.35,12,12,0,1,1-21,11.6,20,20,0,1,0-24.78,28.3,12,12,0,0,1-1.82,22.91Z"},null,-1),M1=[k1],$1={key:1},Z1=s("path",{d:"M168,144a40,40,0,1,1-40-40A40,40,0,0,1,168,144ZM64,56A32,32,0,1,0,96,88,32,32,0,0,0,64,56Zm128,0a32,32,0,1,0,32,32A32,32,0,0,0,192,56Z",opacity:"0.2"},null,-1),V1=s("path",{d:"M244.8,150.4a8,8,0,0,1-11.2-1.6A51.6,51.6,0,0,0,192,128a8,8,0,0,1,0-16,24,24,0,1,0-23.24-30,8,8,0,1,1-15.5-4A40,40,0,1,1,219,117.51a67.94,67.94,0,0,1,27.43,21.68A8,8,0,0,1,244.8,150.4ZM190.92,212a8,8,0,1,1-13.85,8,57,57,0,0,0-98.15,0,8,8,0,1,1-13.84-8,72.06,72.06,0,0,1,33.74-29.92,48,48,0,1,1,58.36,0A72.06,72.06,0,0,1,190.92,212ZM128,176a32,32,0,1,0-32-32A32,32,0,0,0,128,176ZM72,120a8,8,0,0,0-8-8A24,24,0,1,1,87.24,82a8,8,0,1,0,15.5-4A40,40,0,1,0,37,117.51,67.94,67.94,0,0,0,9.6,139.19a8,8,0,1,0,12.8,9.61A51.6,51.6,0,0,1,64,128,8,8,0,0,0,72,120Z"},null,-1),C1=[Z1,V1],F1={key:2},P1=s("path",{d:"M64.12,147.8a4,4,0,0,1-4,4.2H16a8,8,0,0,1-7.8-6.17,8.35,8.35,0,0,1,1.62-6.93A67.79,67.79,0,0,1,37,117.51a40,40,0,1,1,66.46-35.8,3.94,3.94,0,0,1-2.27,4.18A64.08,64.08,0,0,0,64,144C64,145.28,64,146.54,64.12,147.8Zm182-8.91A67.76,67.76,0,0,0,219,117.51a40,40,0,1,0-66.46-35.8,3.94,3.94,0,0,0,2.27,4.18A64.08,64.08,0,0,1,192,144c0,1.28,0,2.54-.12,3.8a4,4,0,0,0,4,4.2H240a8,8,0,0,0,7.8-6.17A8.33,8.33,0,0,0,246.17,138.89Zm-89,43.18a48,48,0,1,0-58.37,0A72.13,72.13,0,0,0,65.07,212,8,8,0,0,0,72,224H184a8,8,0,0,0,6.93-12A72.15,72.15,0,0,0,157.19,182.07Z"},null,-1),x1=[P1],L1={key:3},z1=s("path",{d:"M243.6,148.8a6,6,0,0,1-8.4-1.2A53.58,53.58,0,0,0,192,126a6,6,0,0,1,0-12,26,26,0,1,0-25.18-32.5,6,6,0,0,1-11.62-3,38,38,0,1,1,59.91,39.63A65.69,65.69,0,0,1,244.8,140.4,6,6,0,0,1,243.6,148.8ZM189.19,213a6,6,0,0,1-2.19,8.2,5.9,5.9,0,0,1-3,.81,6,6,0,0,1-5.2-3,59,59,0,0,0-101.62,0,6,6,0,1,1-10.38-6A70.1,70.1,0,0,1,103,182.55a46,46,0,1,1,50.1,0A70.1,70.1,0,0,1,189.19,213ZM128,178a34,34,0,1,0-34-34A34,34,0,0,0,128,178ZM70,120a6,6,0,0,0-6-6A26,26,0,1,1,89.18,81.49a6,6,0,1,0,11.62-3,38,38,0,1,0-59.91,39.63A65.69,65.69,0,0,0,11.2,140.4a6,6,0,1,0,9.6,7.2A53.58,53.58,0,0,1,64,126,6,6,0,0,0,70,120Z"},null,-1),I1=[z1],S1={key:4},D1=s("path",{d:"M244.8,150.4a8,8,0,0,1-11.2-1.6A51.6,51.6,0,0,0,192,128a8,8,0,0,1-7.37-4.89,8,8,0,0,1,0-6.22A8,8,0,0,1,192,112a24,24,0,1,0-23.24-30,8,8,0,1,1-15.5-4A40,40,0,1,1,219,117.51a67.94,67.94,0,0,1,27.43,21.68A8,8,0,0,1,244.8,150.4ZM190.92,212a8,8,0,1,1-13.84,8,57,57,0,0,0-98.16,0,8,8,0,1,1-13.84-8,72.06,72.06,0,0,1,33.74-29.92,48,48,0,1,1,58.36,0A72.06,72.06,0,0,1,190.92,212ZM128,176a32,32,0,1,0-32-32A32,32,0,0,0,128,176ZM72,120a8,8,0,0,0-8-8A24,24,0,1,1,87.24,82a8,8,0,1,0,15.5-4A40,40,0,1,0,37,117.51,67.94,67.94,0,0,0,9.6,139.19a8,8,0,1,0,12.8,9.61A51.6,51.6,0,0,1,64,128,8,8,0,0,0,72,120Z"},null,-1),B1=[D1],N1={key:5},U1=s("path",{d:"M237,147.44a4,4,0,0,1-5.48-1.4c-8.33-14-20.93-22-34.56-22a4,4,0,0,1-1.2-.2,36.76,36.76,0,0,1-3.8.2,4,4,0,0,1,0-8,28,28,0,1,0-27.12-35,4,4,0,0,1-7.75-2,36,36,0,1,1,54,39.48c10.81,3.85,20.51,12,27.31,23.48A4,4,0,0,1,237,147.44ZM187.46,214a4,4,0,0,1-1.46,5.46,3.93,3.93,0,0,1-2,.54,4,4,0,0,1-3.46-2,61,61,0,0,0-105.08,0,4,4,0,0,1-6.92-4,68.35,68.35,0,0,1,39.19-31,44,44,0,1,1,40.54,0A68.35,68.35,0,0,1,187.46,214ZM128,180a36,36,0,1,0-36-36A36,36,0,0,0,128,180ZM64,116A28,28,0,1,1,91.12,81a4,4,0,0,0,7.75-2A36,36,0,1,0,45.3,118.75,63.55,63.55,0,0,0,12.8,141.6a4,4,0,0,0,6.4,4.8A55.55,55.55,0,0,1,64,124a4,4,0,0,0,0-8Z"},null,-1),T1=[U1],E1={name:"PhUsersThree"},G1=z({...E1,props:{weight:{type:String},size:{type:[String,Number]},color:{type:String},mirrored:{type:Boolean}},setup(h){const v=h,g=$("weight","regular"),t=$("size","1em"),u=$("color","currentColor"),_=$("mirrored",!1),p=A(()=>v.weight??g),b=A(()=>v.size??t),M=A(()=>v.color??u),j=A(()=>v.mirrored!==void 0?v.mirrored?"scale(-1, 1)":void 0:_?"scale(-1, 1)":void 0);return(w,Z)=>(o(),d("svg",q({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",width:b.value,height:b.value,fill:M.value,transform:j.value},w.$attrs),[K(w.$slots,"default"),p.value==="bold"?(o(),d("g",H1,M1)):p.value==="duotone"?(o(),d("g",$1,C1)):p.value==="fill"?(o(),d("g",F1,x1)):p.value==="light"?(o(),d("g",L1,I1)):p.value==="regular"?(o(),d("g",S1,B1)):p.value==="thin"?(o(),d("g",N1,T1)):V("",!0)],16,j1))}}),O1={class:"card-header"},K1={class:"header-left"},q1=["src"],Q1={class:"project-info"},R1={class:"project-title"},W1=["href"],J1={class:"card-footer"},X1=z({__name:"ProjectCard",props:{project:{},lastBuild:{}},emits:["click","delete"],setup(h,{emit:v}){const g=h,t=v,u=F(!1),_=A(()=>u.value?null:`https://${g.project.subdomain}.abstra.app/_assets/logo`),p=()=>{u.value=!0},b=A(()=>g.project.getUrl()),M=A(()=>g.project.getUrl().replace("https://","").replace(/\/$/,"")),j=A(()=>{if(!g.lastBuild)return null;const H=g.lastBuild.status;return H==="success"?{text:c.translate("i18n_builds_live"),color:"green"}:H==="in-progress"||H==="pending"?{text:c.translate("i18n_builds_deploying"),color:"blue"}:H==="failure"?{text:c.translate("i18n_builds_failed"),color:"red"}:{text:c.translate("i18n_builds_inactive"),color:"default"}}),w=()=>{t("click",g.project)},Z=()=>{t("delete",g.project)};return(H,P)=>(o(),d("div",{class:"project-card",onClick:w},[s("div",O1,[s("div",K1,[_.value?(o(),d("img",{key:0,src:_.value,class:"project-logo",onError:p},null,40,q1)):(o(),k(e(ce),{key:1,size:24,weight:"fill",class:"project-icon"})),s("div",Q1,[s("h3",R1,f(h.project.name),1),s("a",{href:b.value,target:"_blank",class:"project-url",onClick:P[0]||(P[0]=x(()=>{},["stop"]))},f(M.value),9,W1)])]),s("button",{class:"delete-btn",onClick:x(Z,["stop"])},[l(e(O),{size:16})])]),s("div",J1,[P[1]||(P[1]=s("div",{class:"footer-spacer"},null,-1)),j.value?(o(),k(e(ue),{key:0,color:j.value.color,bordered:!1},{default:r(()=>[y(f(j.value.text),1)]),_:1},8,["color"])):V("",!0)])]))}}),Y1=Q(X1,[["__scopeId","data-v-c691625f"]]),e0=z({__name:"EditableFolderName",props:{folder:{}},emits:["update:name"],setup(h,{emit:v}){const g=h,t=v,u=F(!1),_=F(""),p=F(null);function b(){_.value=g.folder.name,u.value=!0,le(()=>{p.value?.focus?.()})}function M(){_.value.trim()&&_.value!==g.folder.name&&t("update:name",_.value.trim()),u.value=!1}function j(){u.value=!1}return(w,Z)=>u.value?(o(),k(e(N),{key:1,ref_key:"inputRef",ref:p,value:_.value,"onUpdate:value":Z[0]||(Z[0]=H=>_.value=H),size:"small",class:"edit-input",onBlur:M,onClick:Z[1]||(Z[1]=x(()=>{},["stop"])),onKeydown:[X(M,["enter"]),X(j,["escape"])]},null,8,["value"])):(o(),d("h2",{key:0,class:"folder-name",onClick:x(b,["stop"])},[y(f(h.folder.name)+" ",1),l(e(be),{class:"edit-icon",size:14})]))}}),t0=Q(e0,[["__scopeId","data-v-1a20da68"]]),a0={class:"projects-view"},l0={key:0,class:"loading-container"},o0={key:1,class:"loading-container"},r0={class:"header-controls"},s0={class:"left-controls"},n0={class:"right-controls"},i0={class:"folders-container"},d0={class:"folder-header-content"},c0={class:"folder-info"},u0={class:"item-count"},p0=["onClick"],v0={class:"projects-grid"},f0=["onClick"],m0={class:"icon-circle-small"},g0={class:"create-project-text"},_0={key:3,class:"empty-state"},h0=z({__name:"ProjectsView",setup(h){const v=pe(),g=ve(),t=Me(),u=A(()=>v.params.organizationId),_={navigateToProject:n=>g.push({name:"project",params:{organizationId:u.value,projectId:n}})},p=(n,i)=>i?.label?.toLowerCase().includes(n.toLowerCase())??!1,b=F(!0),M=F(null),j=F(!1);async function w(n,i=!1){if(!j.value&&!(!i&&M.value===n&&t.fetchedState)){j.value=!0,b.value=!0,M.value=n,t.fetchedState=null;try{await t.fetchState(n)}catch(a){console.error("Failed to fetch organization data:",a)}finally{b.value=!1,j.value=!1}}}function Z(){const n=u.value;n&&w(n,!0)}fe(u,n=>{n&&w(n)},{immediate:!0}),me(()=>{le(()=>{setTimeout(()=>{const n=u.value;n&&!t.fetchedState&&w(n,!0)},50)})}),ge(()=>{const n=u.value;n&&!t.fetchedState&&w(n,!0)});const H=F(""),P=F(!1),R=async()=>{if(!(!H.value||P.value)){P.value=!0;try{await t.inviteMember(u.value,H.value),H.value=""}finally{P.value=!1}}},oe=async(n,i)=>{await t.updateFolderName(u.value,n.id,i,n.memberIds)},re=async n=>{await t.removeProjectOptimistic(n.id)},I=F(null),se=(n,i)=>{n.dataTransfer&&(n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("text/plain",i.id),n.dataTransfer.dropEffect="move")},ne=n=>{I.value=n},ie=(n,i)=>{const a=n.currentTarget,m=n.relatedTarget;a.contains(m)||I.value===i&&(I.value=null)},de=(n,i)=>{I.value=null;const a=n.dataTransfer?.getData("text/plain");a&&t.moveProject(a,i)},W=n=>{if(!n)return"";const a=n.split("@")[0].split(/[._-]/).filter(Boolean);return a.length===0?"":a.length===1?a[0][0].toUpperCase():(a[0][0]+a[1][0]).toUpperCase()},J=n=>({backgroundColor:"#f3f4f6",color:"#9ca3af",fontWeight:"bold",fontSize:"12px"});return(n,i)=>(o(),d(S,null,[s("div",a0,[u.value?b.value?(o(),d("div",o0,[l(e(_e),{size:"large"})])):e(t).fetchedState?(o(),d(S,{key:2},[s("div",r0,[s("div",s0,[l(e(he),{value:e(t).searchQuery,"onUpdate:value":i[0]||(i[0]=a=>e(t).searchQuery=a),placeholder:e(c).translate("i18n_projectsview_search_placeholder"),class:"search-input"},null,8,["value","placeholder"])]),s("div",n0,[l(C,{type:"link",onClick:e(t).openMembersModal},{default:r(()=>[l(e(G1)),y(" "+f(e(c).translate("i18n_consoleorganization_editors")),1)]),_:1},8,["onClick"]),l(C,{type:"link",onClick:i[1]||(i[1]=a=>e(g).push({name:"billing",params:{organizationId:u.value}}))},{default:r(()=>[l(e(e1)),y(" "+f(e(c).translate("i18n_consoleorganization_billing")),1)]),_:1}),l(C,{type:"link",onClick:e(t).openCreateFolderModal},{default:r(()=>[l(e(je)),y(" "+f(e(c).translate("i18n_projectsview_create_folder")||"New Folder"),1)]),_:1},8,["onClick"])])]),s("div",i0,[l(e(Ve),{activeKey:e(t).activeFolderIds,"onUpdate:activeKey":i[3]||(i[3]=a=>e(t).activeFolderIds=a),bordered:!1,style:{background:"transparent"}},{expandIcon:r(({isActive:a})=>[l(e(we),{style:E({transform:a?"rotate(90deg)":"rotate(0deg)",transition:"transform 0.2s"}),size:16},null,8,["style"])]),default:r(()=>[(o(!0),d(S,null,T(e(t).listFolders(),a=>(o(),k(e(Ze),{key:a.id,class:ye(["folder-card",{"drop-active":I.value===a.id}]),onDragover:x(m=>ne(a.id),["prevent"]),onDragleave:m=>ie(m,a.id),onDrop:m=>de(m,a.id)},{header:r(()=>[s("div",d0,[s("div",c0,[e(t).activeFolderIds.includes(a.id)?(o(),k(e(w1),{key:0,class:"folder-icon",size:20,weight:"fill"})):(o(),k(e(He),{key:1,class:"folder-icon",size:20,weight:"fill"})),l(t0,{folder:a,"onUpdate:name":m=>oe(a,m)},null,8,["folder","onUpdate:name"]),s("span",u0,f(e(t).getFolderProjects(a.id)?.length||0)+" projetos ",1)]),s("div",{class:"folder-actions",onClick:i[2]||(i[2]=x(()=>{},["stop"]))},[e(t).fetchedState?(o(),d("div",{key:0,class:"folder-avatars",onClick:x(m=>e(t).openEditFolderModal(a),["stop"])},[l(e($e),{"max-count":3,size:"small"},{default:r(()=>[(o(!0),d(S,null,T(a.memberIds,m=>(o(),k(e(ae),{key:m,style:E(J(m))},{icon:r(()=>[y(f(W(e(t).fetchedState.members.find(D=>D.id===m)?.email)),1)]),_:2},1032,["style"]))),128))]),_:2},1024)],8,p0)):V("",!0)])])]),default:r(()=>[s("div",v0,[(o(!0),d(S,null,T(e(t).getFolderProjects(a.id),m=>(o(),k(Y1,{key:m.id,project:m,"last-build":e(t).getProjectLastBuild(m.id),draggable:"true",onDragstart:D=>se(D,m),onClick:D=>_.navigateToProject(m.id),onDelete:re},null,8,["project","last-build","onDragstart","onClick"]))),128)),s("div",{class:"create-project-card",onClick:m=>e(t).openCreateProjectModal(a.id)},[s("div",m0,[l(e(ke),{size:20,weight:"bold"})]),s("span",g0,f(e(c).translate("i18n_projectsview_new_project")||"New Project"),1)],8,f0)])]),_:2},1032,["class","onDragover","onDragleave","onDrop"]))),128))]),_:1},8,["activeKey"])]),e(t).listFolders().length===0&&e(t).searchQuery.trim()?(o(),k(e(U),{key:0,style:{"margin-top":"50px"}},{description:r(()=>[y(f(e(c).translate("i18n_projectsview_no_projects_search",null,e(t).searchQuery)),1)]),_:1})):V("",!0)],64)):(o(),d("div",_0,[l(e(U),null,{description:r(()=>[s("span",null,f(e(c).translate("i18n_projectsview_loading_error")||"Não foi possível carregar os projetos"),1)]),default:r(()=>[l(C,{type:"primary",onClick:Z},{default:r(()=>[y(f(e(c).translate("i18n_projectsview_retry")||"Tentar novamente"),1)]),_:1})]),_:1})])):(o(),d("div",l0,[l(e(U),{description:"No organization ID found"})]))]),l(e(G),{open:e(t).isMembersModalOpen,title:e(c).translate("i18n_projectsview_manage_editors"),footer:null,class:"members-modal",onCancel:e(t).closeModals},{default:r(()=>[l(e(L),{vertical:"",gap:"middle"},{default:r(()=>[l(e(L),{gap:"small"},{default:r(()=>[l(e(N),{value:H.value,"onUpdate:value":i[4]||(i[4]=a=>H.value=a),placeholder:e(c).translate("i18n_projectsview_invite_by_email"),style:{flex:"1"},onPressEnter:R},null,8,["value","placeholder"]),l(e(Y),{type:"primary",disabled:!H.value,loading:P.value,onClick:R},{default:r(()=>[y(f(e(c).translate("i18n_projectsview_invite")),1)]),_:1},8,["disabled","loading"])]),_:1}),l(e(Ce),{"item-layout":"horizontal","data-source":e(t).fetchedState?.members||[],style:{"max-height":"400px","overflow-y":"auto"}},{renderItem:r(({item:a})=>[l(e(Fe),null,{actions:r(()=>[a.id!==e(t).fetchedState?.currentMember?.id?(o(),k(e(Y),{key:0,type:"text",size:"small",onClick:m=>e(t).removeMember(u.value,a.id)},{default:r(()=>[l(e(Ae),{size:14,style:{color:"#d1d5db"}})]),_:1},8,["onClick"])):V("",!0)]),default:r(()=>[l(e(Pe),null,{title:r(()=>[y(f(a.email),1)]),avatar:r(()=>[l(e(ae),{style:E(J(a.id))},{icon:r(()=>[y(f(W(a.email)),1)]),_:2},1032,["style"])]),_:2},1024)]),_:2},1024)]),_:1},8,["data-source"])]),_:1})]),_:1},8,["open","title","onCancel"]),l(e(G),{open:!!e(t).draftFolder,title:e(t).draftFolder?.modalTitle,onCancel:e(t).closeModals},{footer:r(()=>[l(e(L),{justify:e(t).draftFolder?.mode==="edit"?"space-between":"flex-end"},{default:r(()=>[e(t).draftFolder?.mode==="edit"?(o(),k(C,{key:0,danger:"","disabled-tooltip":e(c).translate("i18n_projectsview_cannot_delete_folder"),disabled:e(t).getFolderProjects(e(t).draftFolder?.id).length>0,loading:e(t).draftFolder?.buttonLoading==="delete",onClick:i[7]||(i[7]=x(a=>e(t).deleteFolder(u.value),["stop"]))},{default:r(()=>[l(e(O)),y(" "+f(e(c).translate("i18n_projectsview_delete_folder")),1)]),_:1},8,["disabled-tooltip","disabled","loading"])):V("",!0),l(e(L),{justify:"flex-end"},{default:r(()=>[l(C,{onClick:e(t).closeModals},{default:r(()=>[y(f(e(c).translate("i18n_projectsview_cancel")),1)]),_:1},8,["onClick"]),l(C,{type:"primary",disabled:!e(t).isDraftFolderValid,loading:e(t).draftFolder?.buttonLoading==="save",onClick:i[8]||(i[8]=a=>e(t).saveFolder(u.value))},{default:r(()=>[y(f(e(c).translate("i18n_projectsview_save")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["justify"])]),default:r(()=>[e(t).draftFolder?(o(),k(e(ee),{key:0,layout:"vertical"},{default:r(()=>[l(e(B),{label:e(c).translate("i18n_projectsview_folder_name"),"validate-status":e(t).isDraftFolderUnique?"":"error",help:e(t).isDraftFolderUnique?"":e(c).translate("i18n_projectsview_folder_exists")},{default:r(()=>[l(e(N),{value:e(t).draftFolder.newName,"onUpdate:value":i[5]||(i[5]=a=>e(t).draftFolder.newName=a)},null,8,["value"])]),_:1},8,["label","validate-status","help"]),l(e(B),{label:e(c).translate("i18n_projectsview_editors"),tooltip:e(c).translate("i18n_projectsview_editors_tooltip")},{default:r(()=>[l(e(te),{value:e(t).draftFolder.newMemberIds,"onUpdate:value":i[6]||(i[6]=a=>e(t).draftFolder.newMemberIds=a),mode:"tags",options:e(t).memberOptions,"filter-option":p,placeholder:e(c).translate("i18n_projectsview_choose_editors")},null,8,["value","options","placeholder"])]),_:1},8,["label","tooltip"])]),_:1})):V("",!0)]),_:1},8,["open","title","onCancel"]),l(e(G),{open:!!e(t).draftProject,title:e(t).draftProject?.modalTitle,onCancel:e(t).closeModals},{footer:r(()=>[l(e(L),{justify:e(t).draftProject?.mode==="edit"?"space-between":"flex-end"},{default:r(()=>[e(t).draftProject?.mode==="edit"?(o(),k(C,{key:0,danger:"",loading:e(t).draftProject?.buttonLoading==="delete",onClick:i[11]||(i[11]=a=>e(t).deleteProject(u.value))},{default:r(()=>[l(e(O)),y(" "+f(e(c).translate("i18n_projectsview_delete_project")),1)]),_:1},8,["loading"])):V("",!0),l(e(L),{justify:"flex-end"},{default:r(()=>[l(C,{onClick:e(t).closeModals},{default:r(()=>[y(f(e(c).translate("i18n_projectsview_cancel")),1)]),_:1},8,["onClick"]),l(C,{disabled:!e(t).isDraftProjectValid,type:"primary",loading:e(t).draftProject?.buttonLoading==="save",onClick:i[12]||(i[12]=a=>e(t).saveProject(u.value,_.navigateToProject))},{default:r(()=>[y(f(e(c).translate("i18n_projectsview_save")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["justify"])]),default:r(()=>[e(t).draftProject?(o(),k(e(ee),{key:0,layout:"vertical"},{default:r(()=>[l(e(B),{label:e(c).translate("i18n_projectsview_project_name")},{default:r(()=>[l(e(N),{value:e(t).draftProject.newName,"onUpdate:value":i[9]||(i[9]=a=>e(t).draftProject.newName=a)},null,8,["value"])]),_:1},8,["label"]),l(e(B),{label:e(c).translate("i18n_projectsview_project_folder")},{default:r(()=>[l(e(te),{value:e(t).draftProject.newFolderId,"onUpdate:value":i[10]||(i[10]=a=>e(t).draftProject.newFolderId=a),options:e(t).folderOptions,placeholder:e(c).translate("i18n_projectsview_choose_folder")},null,8,["value","options","placeholder"])]),_:1},8,["label"])]),_:1})):V("",!0)]),_:1},8,["open","title","onCancel"])],64))}}),S0=Q(h0,[["__scopeId","data-v-4c61fbba"]]);export{S0 as default};
//# sourceMappingURL=ProjectsView-D5qvnMTC.js.map
