
# DO NOT EDIT THIS FILE -- AUTOGENERATED BY PANTS
# Target: src/ai/backend/appproxy/coordinator:dist

from setuptools import setup

setup(**{
    'author': 'Lablup Inc. and contributors',
    'classifiers': [
        'Intended Audience :: Developers',
        'Operating System :: MacOS :: MacOS X',
        'Operating System :: POSIX :: Linux',
        'Programming Language :: Python',
        'Programming Language :: Python :: 3',
        'Environment :: No Input/Output (Daemon)',
        'Topic :: Scientific/Engineering',
        'Topic :: Software Development',
        'Development Status :: 5 - Production/Stable',
        'Programming Language :: Python :: 3.13',
        'License :: OSI Approved :: GNU Lesser General Public License v3 or later (LGPLv3+)',
    ],
    'description': 'Backend.AI AppProxy Coordinator',
    'entry_points': {
        'backendai_cli_v10': [
            'app-proxy-coordinator = ai.backend.appproxy.coordinator.cli.__main__:main',
            'app-proxy-coordinator.start-server = ai.backend.appproxy.coordinator.cli.start_server:main',
        ],
    },
    'install_requires': (
        'Jinja2~=3.1.6',
        'PyJWT~=2.10.1',
        'SQLAlchemy[postgresql_asyncpg]~=2.0.45',
        'aiohttp_cors~=0.8.1',
        'aiohttp_jinja2~=1.6',
        'aiohttp~=3.13.3',
        'aiomonitor~=0.7.0',
        'aiotools~=2.2.3',
        'alembic~=1.13.2',
        'asyncpg>=0.29.0',
        'attrs>=25.3',
        """backend.ai-appproxy-common==26.1.0
""",
        """backend.ai-cli==26.1.0
""",
        """backend.ai-common==26.1.0
""",
        """backend.ai-logging==26.1.0
""",
        """backend.ai-plugin==26.1.0
""",
        'click~=8.1.7',
        'memray~=1.17.2',
        'prometheus-client~=0.21.1',
        'pydantic[email]~=2.11.3',
        'pyroscope-io~=0.8.8',
        'python-dateutil>=2.9',
        'redis[hiredis]~=7.1.0',
        'setproctitle~=1.3.5',
        'tenacity>=9.0',
        'tomli-w~=1.2.0',
        'types-Jinja2',
        'types-python-dateutil',
        'types-redis',
        'uvloop~=0.22.1; sys_platform != "Windows"',
        'yarl~=1.19.0',
    ),
    'license': 'LGPLv3',
    'long_description': """# Backend.AI App Proxy Coordinator

## Purpose

The App Proxy Coordinator manages routing information for App Proxy Workers, coordinates worker instances, and handles service port mappings for compute session services (Jupyter, SSH, TensorBoard, etc.).

## Key Responsibilities

### 1. Worker Management
- Register and track App Proxy Worker instances
- Monitor worker health and availability
- Distribute routing information to workers
- Handle worker failover

### 2. Route Management
- Manage service port mappings (session → service → port)
- Update routing tables dynamically
- Propagate route changes to workers
- Handle route conflicts and resolution

### 3. Service Discovery
- Maintain service registry
- Provide route lookup for workers
- Update routes when sessions change
- Clean up routes for terminated sessions

## Entry Points

App Proxy Coordinator has 1 entry point to receive and process requests.

### 1. REST API

**Framework**: aiohttp (async HTTP server)

**Port**: 6030 (default)

**Primary Purpose**:
- Worker management (registration, monitoring)
- Routing information management (session-to-service port mapping)

**Key Features**:
- HTTP/HTTPS-based communication
- Centralized service routing information management
- Real-time route updates
- Persistent routing information storage in PostgreSQL

**Processing Flow**:

#### Worker Registration Flow
```
Worker → POST /workers/register → Coordinator
                                      ↓
                                  Register worker in DB
                                      ↓
                                  Return worker ID and routes
```

#### Route Creation Flow
```
Manager → POST /routes → Coordinator
                             ↓
                         Store route in DB
                             ↓
                         Notify all workers
                             ↓
                         Workers update local routing table
```

**Integrated Architecture**:

```
┌──────────────┐
│   Manager    │
│              │
└──────┬───────┘
       │ Route Management (REST)
       ▼
┌─────────────────────────────────────┐
│  App Proxy Coordinator (Port 6030)  │
│  - Worker registration              │
│  - Route management                 │
│  - Service port mapping             │
│  - Route propagation                │
└─────────┬───────────────────────────┘
          │
          ▼ Worker Registration & Route Updates
    ┌─────┴─────┬─────────┬─────────┐
    ▼           ▼         ▼         ▼
┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐
│Worker 1│ │Worker 2│ │Worker 3│ │Worker N│
└────────┘ └────────┘ └────────┘ └────────┘
```""",
    'long_description_content_type': 'text/markdown',
    'name': 'backend.ai-appproxy-coordinator',
    'namespace_packages': (
    ),
    'package_data': {
        'ai.backend.appproxy.coordinator': (
            'VERSION',
            'py.typed',
        ),
        'ai.backend.appproxy.coordinator.models.alembic': (
            'script.py.mako',
        ),
    },
    'packages': (
        'ai.backend.appproxy.coordinator',
        'ai.backend.appproxy.coordinator.api',
        'ai.backend.appproxy.coordinator.cli',
        'ai.backend.appproxy.coordinator.dependencies',
        'ai.backend.appproxy.coordinator.dependencies.bootstrap',
        'ai.backend.appproxy.coordinator.dependencies.infrastructure',
        'ai.backend.appproxy.coordinator.errors',
        'ai.backend.appproxy.coordinator.health',
        'ai.backend.appproxy.coordinator.models',
        'ai.backend.appproxy.coordinator.models.alembic',
    ),
    'project_urls': {
        'Documentation': 'https://docs.backend.ai/',
        'Source': 'https://github.com/lablup/backend.ai',
    },
    'python_requires': '>=3.13,<3.14',
    'url': 'https://github.com/lablup/backend.ai',
    'version': """26.1.0
""",
    'zip_safe': False,
})
