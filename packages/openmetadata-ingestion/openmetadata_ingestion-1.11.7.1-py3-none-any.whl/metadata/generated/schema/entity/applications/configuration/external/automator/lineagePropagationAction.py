# generated by datamodel-codegen:
#   filename:  entity/applications/configuration/external/automator/lineagePropagationAction.json
#   timestamp: 2026-01-30T06:35:57+00:00

from __future__ import annotations

from enum import Enum
from typing import List, Optional

from pydantic import ConfigDict, Field
from typing_extensions import Annotated

from metadata.ingestion.models.custom_pydantic import BaseModel

from . import propagationStopConfig


class PropagationDepthMode(Enum):
    ROOT = 'ROOT'
    DATA_ASSET = 'DATA_ASSET'


class LineagePropagationActionType(Enum):
    LineagePropagationAction = 'LineagePropagationAction'


class LineagePropagationAction(BaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    type: Annotated[
        LineagePropagationActionType,
        Field(description='Application Type', title='Application Type'),
    ]
    propagateDescription: Annotated[
        Optional[bool],
        Field(
            True,
            description='Propagate description through lineage',
            title='Propagate Description',
        ),
    ]
    propagateTags: Annotated[
        Optional[bool],
        Field(
            True, description='Propagate tags through lineage', title='Propagate Tags'
        ),
    ]
    propagateGlossaryTerms: Annotated[
        Optional[bool],
        Field(
            True,
            description='Propagate glossary terms through lineage',
            title='Propagate Glossary Terms',
        ),
    ]
    propagateTier: Annotated[
        Optional[bool],
        Field(
            False, description='Propagate tier from the parent', title='Propagate Tier'
        ),
    ]
    propagateDomains: Annotated[
        Optional[bool],
        Field(
            False,
            description='Propagate domains from the parent through lineage',
            title='Propagate Domains',
        ),
    ]
    propagateOwner: Annotated[
        Optional[bool],
        Field(
            False,
            description='Propagate owner from the parent',
            title='Propagate Owner',
        ),
    ]
    propagateColumnLevel: Annotated[
        Optional[bool],
        Field(
            True,
            description='Propagate the metadata to columns via column-level lineage.',
            title='Propagate Column Level',
        ),
    ]
    propagateParent: Annotated[
        Optional[bool],
        Field(
            False,
            description='Propagate the metadata to the parents (e.g., tables) via lineage.',
            title='Propagate Parent',
        ),
    ]
    overwriteMetadata: Annotated[
        Optional[bool],
        Field(
            False,
            description='Update descriptions, tags and Glossary Terms via lineage even if they are already defined in the asset. By default, descriptions are only updated if they are not already defined in the asset, and incoming tags are merged with the existing ones.',
            title='Overwrite Metadata',
        ),
    ]
    propagationDepth: Annotated[
        Optional[int],
        Field(
            None,
            description='Number of levels to propagate lineage. If not set, it will propagate to all levels.',
            title='Propagation Depth',
        ),
    ]
    propagationDepthMode: Annotated[
        Optional[PropagationDepthMode],
        Field(
            PropagationDepthMode.ROOT,
            description="Mode for calculating propagation depth. 'ROOT' calculates depth from root nodes (sources with no parents). 'DATA_ASSET' calculates depth relative to each data asset being processed, ensuring each asset only receives metadata from nodes within the specified number of hops upstream.",
            title='Propagation Depth Mode',
        ),
    ]
    propagationStopConfigs: Annotated[
        Optional[List[propagationStopConfig.PropagationStopConfig]],
        Field(
            None,
            description='List of configurations to stop propagation based on conditions',
            title='Propagation Stop Configurations',
        ),
    ]
    useOptimizedPropagation: Annotated[
        Optional[bool],
        Field(
            True,
            description='Use the optimized propagation algorithm that reduces memory usage and API calls. Recommended for large lineage graphs. If set to false, uses the original propagation algorithm. Default is true.',
            title='Use Optimized Propagation',
        ),
    ]
