# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: postgresql/postgresql.proto
# plugin: python-betterproto
# This file has been @generated

from dataclasses import dataclass
from datetime import datetime
from typing import (
    Dict,
    List,
    Optional,
)

import betterproto
import betterproto.lib.google.protobuf as betterproto_lib_google_protobuf


class TransactionState(betterproto.Enum):
    """Transaction state enumeration"""

    UNSPECIFIED = 0
    IDLE = 1
    ACTIVE = 2
    IDLE_IN_TRANSACTION = 3
    IDLE_IN_FAILED_TRANSACTION = 4


class IsolationLevel(betterproto.Enum):
    """PostgreSQL isolation levels"""

    UNSPECIFIED = 0
    READ_UNCOMMITTED = 1
    READ_COMMITTED = 2
    REPEATABLE_READ = 3
    SERIALIZABLE = 4


@dataclass(eq=False, repr=False)
class PostgreSqlQuery(betterproto.Message):
    """
    PostgreSQL query request - used internally by PostgreSQL instrumentation SDK
    """

    text: str = betterproto.string_field(1)
    """Core query information"""

    values: List[str] = betterproto.string_field(2)
    client_type: str = betterproto.string_field(3)
    connection: "PostgreSqlConnection" = betterproto.message_field(4)
    """Connection context"""

    options: "QueryOptions" = betterproto.message_field(5)
    query_id: str = betterproto.string_field(6)
    """Query metadata"""

    tags: Dict[str, str] = betterproto.map_field(
        7, betterproto.TYPE_STRING, betterproto.TYPE_STRING
    )


@dataclass(eq=False, repr=False)
class PostgreSqlConnection(betterproto.Message):
    """PostgreSQL connection information"""

    database_name: str = betterproto.string_field(1)
    username: str = betterproto.string_field(2)
    host: str = betterproto.string_field(3)
    port: int = betterproto.int32_field(4)
    application_name: str = betterproto.string_field(5)
    connection_id: str = betterproto.string_field(6)
    ssl_enabled: bool = betterproto.bool_field(7)
    server_version: str = betterproto.string_field(8)


@dataclass(eq=False, repr=False)
class QueryOptions(betterproto.Message):
    """Query execution options"""

    statement_timeout: int = betterproto.int32_field(1)
    query_timeout: int = betterproto.int32_field(2)
    binary_mode: bool = betterproto.bool_field(3)
    cursor_name: str = betterproto.string_field(4)
    fetch_size: int = betterproto.int32_field(5)
    read_only: bool = betterproto.bool_field(6)
    custom_options: Dict[str, str] = betterproto.map_field(
        7, betterproto.TYPE_STRING, betterproto.TYPE_STRING
    )


@dataclass(eq=False, repr=False)
class PostgreSqlResult(betterproto.Message):
    """PostgreSQL query result - matches your trace data structure"""

    command: str = betterproto.string_field(1)
    """Core result information (from your trace data)"""

    row_count: int = betterproto.int32_field(2)
    oid: Optional[int] = betterproto.int32_field(3, optional=True)
    rows: List["betterproto_lib_google_protobuf.Struct"] = betterproto.message_field(4)
    """Result data"""

    fields: List["PostgreSqlField"] = betterproto.message_field(5)
    execution_info: "QueryExecutionInfo" = betterproto.message_field(6)
    """Query execution metadata"""

    error: Optional["PostgreSqlError"] = betterproto.message_field(7, optional=True)
    """Error information (if query failed)"""


@dataclass(eq=False, repr=False)
class PostgreSqlField(betterproto.Message):
    """PostgreSQL field definition (matches your trace data)"""

    name: str = betterproto.string_field(1)
    table_id: int = betterproto.int32_field(2)
    column_id: int = betterproto.int32_field(3)
    data_type_id: int = betterproto.int32_field(4)
    data_type_size: int = betterproto.int32_field(5)
    data_type_modifier: int = betterproto.int32_field(6)
    format: str = betterproto.string_field(7)
    data_type_name: str = betterproto.string_field(8)
    """Additional field metadata"""

    nullable: bool = betterproto.bool_field(9)
    primary_key: bool = betterproto.bool_field(10)


@dataclass(eq=False, repr=False)
class QueryExecutionInfo(betterproto.Message):
    """Query execution information"""

    parse_time_ms: int = betterproto.int64_field(1)
    """Timing breakdown"""

    plan_time_ms: int = betterproto.int64_field(2)
    execute_time_ms: int = betterproto.int64_field(3)
    total_time_ms: int = betterproto.int64_field(4)
    rows_examined: int = betterproto.int64_field(5)
    """Execution statistics"""

    rows_returned: int = betterproto.int64_field(6)
    bytes_sent: int = betterproto.int64_field(7)
    bytes_received: int = betterproto.int64_field(8)
    execution_plan: str = betterproto.string_field(9)
    """Query plan information (optional)"""

    notices: List[str] = betterproto.string_field(10)


@dataclass(eq=False, repr=False)
class PostgreSqlError(betterproto.Message):
    """PostgreSQL-specific error information"""

    sql_state: str = betterproto.string_field(1)
    message: str = betterproto.string_field(2)
    detail: str = betterproto.string_field(3)
    hint: str = betterproto.string_field(4)
    position: str = betterproto.string_field(5)
    where: str = betterproto.string_field(6)
    schema_name: str = betterproto.string_field(7)
    table_name: str = betterproto.string_field(8)
    column_name: str = betterproto.string_field(9)
    constraint_name: str = betterproto.string_field(10)
    data_type_name: str = betterproto.string_field(11)
    file: str = betterproto.string_field(12)
    line: str = betterproto.string_field(13)
    routine: str = betterproto.string_field(14)


@dataclass(eq=False, repr=False)
class PostgreSqlPreparedStatement(betterproto.Message):
    """Prepared statement information"""

    statement_name: str = betterproto.string_field(1)
    query_text: str = betterproto.string_field(2)
    parameter_types: List["PostgreSqlParameterType"] = betterproto.message_field(3)
    prepared_at: datetime = betterproto.message_field(4)
    execution_count: int = betterproto.int32_field(5)


@dataclass(eq=False, repr=False)
class PostgreSqlParameterType(betterproto.Message):
    """Parameter type information for prepared statements"""

    position: int = betterproto.int32_field(1)
    data_type_id: int = betterproto.int32_field(2)
    data_type_name: str = betterproto.string_field(3)
    nullable: bool = betterproto.bool_field(4)


@dataclass(eq=False, repr=False)
class PostgreSqlTransaction(betterproto.Message):
    """Transaction context"""

    transaction_id: str = betterproto.string_field(1)
    state: "TransactionState" = betterproto.enum_field(2)
    isolation_level: "IsolationLevel" = betterproto.enum_field(3)
    read_only: bool = betterproto.bool_field(4)
    started_at: datetime = betterproto.message_field(5)


@dataclass(eq=False, repr=False)
class PostgreSqlBatch(betterproto.Message):
    """Batch query support"""

    queries: List["PostgreSqlQuery"] = betterproto.message_field(1)
    stop_on_error: bool = betterproto.bool_field(2)
    return_results: bool = betterproto.bool_field(3)


@dataclass(eq=False, repr=False)
class PostgreSqlBatchResult(betterproto.Message):
    """Batch result"""

    results: List["PostgreSqlResult"] = betterproto.message_field(1)
    successful_queries: int = betterproto.int32_field(2)
    failed_queries: int = betterproto.int32_field(3)
    first_error: Optional["PostgreSqlError"] = betterproto.message_field(
        4, optional=True
    )
