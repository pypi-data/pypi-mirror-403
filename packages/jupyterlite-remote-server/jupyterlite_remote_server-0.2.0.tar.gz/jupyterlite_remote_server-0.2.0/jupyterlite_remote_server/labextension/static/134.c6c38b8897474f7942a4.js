"use strict";(self.webpackChunkjupyterlite_remote_server=self.webpackChunkjupyterlite_remote_server||[]).push([[134],{134(e,t,r){r.r(t),r.d(t,{RemoteKernelManager:()=>i,RemoteKernelSpecManager:()=>l,RemoteServerSettings:()=>c,RemoteSessionManager:()=>d,RemoteTerminalManager:()=>h,default:()=>_});var n=r(125),s=r(583);class i extends n.BaseManager{constructor(e={}){var t,r,i;super(e),this._isReady=!1;const{serverSettings:a}=e;this._kernelManager=new n.KernelManager({serverSettings:a});const o=null!==(t=e.pollInterval)&&void 0!==t?t:1e4,l=null!==(r=e.maxPollInterval)&&void 0!==r?r:3e5;this._poll=new s.Poll({auto:!1,factory:()=>this._pollRunning(),frequency:{interval:o,backoff:!0,max:l},name:"@jupyterlite-remote-server:KernelManager#running",standby:null!==(i=e.standby)&&void 0!==i?i:"when-hidden"}),this._ready=this._initialize()}get runningChanged(){return this._kernelManager.runningChanged}get connectionFailure(){return this._kernelManager.connectionFailure}get isReady(){return this._isReady}get ready(){return this._ready}running(){return this._kernelManager.running()}get runningCount(){return Array.from(this.running()).length}async refreshRunning(){try{await this._kernelManager.refreshRunning()}catch(e){}}async startNew(e,t){return this._kernelManager.startNew(e,t)}connectTo(e){return this._kernelManager.connectTo(e)}async shutdown(e){return this._kernelManager.shutdown(e)}async shutdownAll(){return this._kernelManager.shutdownAll()}async findById(e){return this._kernelManager.findById(e)}dispose(){this.isDisposed||(this._poll.dispose(),this._kernelManager.dispose(),super.dispose())}async _initialize(){try{await this._kernelManager.refreshRunning()}catch(e){}this._isReady=!0,this._poll.start()}async _pollRunning(){try{await this._kernelManager.refreshRunning()}catch(e){}}}var a=r(526),o=r(602);class l extends n.BaseManager{constructor(e={}){var t,r,i;super(e),this._isReady=!1,this._connectionFailure=new o.Signal(this),this._specsChanged=new o.Signal(this),this._specs=null;const{serverSettings:a}=e;this._serverSettings=a,this._kernelSpecManager=new n.KernelSpecManager({serverSettings:a}),this._kernelSpecManager.specsChanged.connect(this._onSpecsChanged,this),this._kernelSpecManager.connectionFailure.connect((e,t)=>{this._connectionFailure.emit(t)});const l=null!==(t=e.pollInterval)&&void 0!==t?t:1e4,c=null!==(r=e.maxPollInterval)&&void 0!==r?r:3e5;this._poll=new s.Poll({auto:!1,factory:()=>this._pollSpecs(),frequency:{interval:l,backoff:!0,max:c},name:"@jupyterlite-remote-server:KernelSpecManager#specs",standby:null!==(i=e.standby)&&void 0!==i?i:"when-hidden"}),this._ready=this._initialize()}get connectionFailure(){return this._connectionFailure}get isReady(){return this._isReady}get ready(){return this._ready}get specs(){return this._specs}get specsChanged(){return this._specsChanged}async refreshSpecs(){await this._fetchSpecs()}dispose(){this.isDisposed||(this._poll.dispose(),this._kernelSpecManager.dispose(),super.dispose())}async _initialize(){try{await this._fetchSpecs()}catch(e){}this._isReady=!0,this._poll.start()}async _pollSpecs(){await this._fetchSpecs()}async _fetchSpecs(){var e;if(null===(e=this._serverSettings)||void 0===e?void 0:e.baseUrl)try{await this._kernelSpecManager.refreshSpecs(),this._rewriteSpecs()}catch(e){}}_onSpecsChanged(){this._rewriteSpecs()}_rewriteSpecs(){var e,t,r,n;const s=this._kernelSpecManager.specs;if(!s)return;const i={};if(s.kernelspecs){const o=null!==(t=null===(e=this._serverSettings)||void 0===e?void 0:e.baseUrl)&&void 0!==t?t:"",l=null!==(n=null===(r=this._serverSettings)||void 0===r?void 0:r.token)&&void 0!==n?n:"";for(const[e,t]of Object.entries(s.kernelspecs))if(t){const r={};for(const[e,n]of Object.entries(t.resources)){let t=a.URLExt.join(o,n);l&&(t+=`?token=${encodeURIComponent(l)}`),r[e]=t}i[e]={...t,resources:r}}}const o={default:s.default,kernelspecs:i};this._specs=o,this._specsChanged.emit(o)}}class c{constructor(e={}){var t;this._serviceType=null!==(t=e.serviceType)&&void 0!==t?t:"default",this._defaults=n.ServerConnection.makeSettings()}get serviceType(){return this._serviceType}get baseUrl(){return this._getServiceOption("BaseUrl")||a.PageConfig.getOption("remoteBaseUrl")}get appUrl(){return a.PageConfig.getOption("appUrl")}get wsUrl(){const e=this.baseUrl;return 0===e.indexOf("http")?"ws"+e.slice(4):a.PageConfig.getWsUrl()}get init(){return this._defaults.init}get token(){return this._getServiceOption("Token")||a.PageConfig.getOption("remoteToken")}get appendToken(){const e=a.PageConfig.getOption("appendToken").toLowerCase();return""===e?"undefined"==typeof window||a.URLExt.getHostName(this.baseUrl)!==window.location.host:"true"===e}get fetch(){return this._defaults.fetch}get Request(){return this._defaults.Request}get Headers(){return this._defaults.Headers}get WebSocket(){return this._defaults.WebSocket}get serializer(){return this._defaults.serializer}_getServiceOption(e){if("default"===this._serviceType)return"";const t=`remote${this._serviceType.charAt(0).toUpperCase()+this._serviceType.slice(1)}${e}`;return a.PageConfig.getOption(t)}}class d extends n.BaseManager{constructor(e){var t,r,i;super(e),this._isReady=!1;const{serverSettings:a,kernelManager:o}=e;this._sessionManager=new n.SessionManager({serverSettings:a,kernelManager:o});const l=null!==(t=e.pollInterval)&&void 0!==t?t:1e4,c=null!==(r=e.maxPollInterval)&&void 0!==r?r:3e5;this._poll=new s.Poll({auto:!1,factory:()=>this._pollRunning(),frequency:{interval:l,backoff:!0,max:c},name:"@jupyterlite-remote-server:SessionManager#running",standby:null!==(i=e.standby)&&void 0!==i?i:"when-hidden"}),this._ready=this._initialize()}get runningChanged(){return this._sessionManager.runningChanged}get connectionFailure(){return this._sessionManager.connectionFailure}get isReady(){return this._isReady}get ready(){return this._ready}running(){return this._sessionManager.running()}get runningCount(){return Array.from(this.running()).length}async refreshRunning(){try{await this._sessionManager.refreshRunning()}catch(e){}}async startNew(e,t){return this._sessionManager.startNew(e,t)}connectTo(e){return this._sessionManager.connectTo(e)}async shutdown(e){return this._sessionManager.shutdown(e)}async shutdownAll(){return this._sessionManager.shutdownAll()}async findById(e){return this._sessionManager.findById(e)}async findByPath(e){return this._sessionManager.findByPath(e)}async stopIfNeeded(e){return this._sessionManager.stopIfNeeded(e)}dispose(){this.isDisposed||(this._poll.dispose(),this._sessionManager.dispose(),super.dispose())}async _initialize(){try{await this._sessionManager.refreshRunning()}catch(e){}this._isReady=!0,this._poll.start()}async _pollRunning(){try{await this._sessionManager.refreshRunning()}catch(e){}}}class h extends n.BaseManager{constructor(e={}){var t,r,i;super(e),this._isReady=!1;const{serverSettings:a}=e;this._terminalManager=new n.TerminalManager({serverSettings:a});const o=null!==(t=e.pollInterval)&&void 0!==t?t:1e4,l=null!==(r=e.maxPollInterval)&&void 0!==r?r:3e5;this._poll=new s.Poll({auto:!1,factory:()=>this._pollRunning(),frequency:{interval:o,backoff:!0,max:l},name:"@jupyterlite-remote-server:TerminalManager#running",standby:null!==(i=e.standby)&&void 0!==i?i:"when-hidden"}),this._ready=this._initialize()}get runningChanged(){return this._terminalManager.runningChanged}get connectionFailure(){return this._terminalManager.connectionFailure}get isReady(){return this._isReady}get ready(){return this._ready}isAvailable(){return this._terminalManager.isAvailable()}running(){return this._terminalManager.running()}get runningCount(){return Array.from(this.running()).length}async refreshRunning(){try{await this._terminalManager.refreshRunning()}catch(e){}}async startNew(e){return this._terminalManager.startNew(e)}connectTo(e){return this._terminalManager.connectTo(e)}async shutdown(e){return this._terminalManager.shutdown(e)}async shutdownAll(){return this._terminalManager.shutdownAll()}dispose(){this.isDisposed||(this._poll.dispose(),this._terminalManager.dispose(),super.dispose())}async _initialize(){try{await this._terminalManager.refreshRunning()}catch(e){}this._isReady=!0,this._poll.start()}async _pollRunning(){try{await this._terminalManager.refreshRunning()}catch(e){}}}var g,p=r(986),u=r(285),m=r(249),v=r(769);!function(e){e.changeTheme="apputils:change-theme",e.changePreferredLightTheme="apputils:change-light-theme",e.changePreferredDarkTheme="apputils:change-dark-theme",e.toggleAdaptiveTheme="apputils:adaptive-theme",e.themeScrollbars="apputils:theme-scrollbars",e.changeFont="apputils:change-font",e.incrFontSize="apputils:incr-font-size",e.decrFontSize="apputils:decr-font-size"}(g||(g={}));const y={id:"jupyterlite-remote-server:themes",description:"Provides the theme manager.",requires:[m.ISettingRegistry,p.JupyterFrontEnd.IPaths,v.ITranslator],optional:[u.ISplashScreen],activate:(e,t,r,n,s)=>{const i=n.load("jupyterlab"),o=e.shell,l=e.commands,c=a.PageConfig.getOption("fullThemesUrl"),d=new u.ThemeManager({key:"@jupyterlab/apputils-extension:themes",host:o,settings:t,splash:null!=s?s:void 0,url:c});let h,p=null;return d.themeChanged.connect((e,t)=>{h=t.newValue,document.body.dataset.jpThemeLight=String(d.isLight(h)),document.body.dataset.jpThemeName=h,document.body.style.colorScheme=d.isLight(h)?"light":"dark",document.body.dataset.jpThemeScrollbars!==String(d.themeScrollbars(h))&&(document.body.dataset.jpThemeScrollbars=String(d.themeScrollbars(h)),d.themeScrollbars(h)?(p||(p=function(){const e=document.createElement("style");return e.setAttribute("type","text/css"),e.appendChild(document.createTextNode("/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\n/*\n * Webkit scrollbar styling.\n * Separate file which is dynamically loaded based on user/theme settings.\n */\n\n/* use standard opaque scrollbars for most nodes */\n\n::-webkit-scrollbar,\n::-webkit-scrollbar-corner {\n  background: var(--jp-scrollbar-background-color);\n}\n\n::-webkit-scrollbar-thumb {\n  background: rgb(var(--jp-scrollbar-thumb-color));\n  border: var(--jp-scrollbar-thumb-margin) solid transparent;\n  background-clip: content-box;\n  border-radius: var(--jp-scrollbar-thumb-radius);\n}\n\n::-webkit-scrollbar-track:horizontal {\n  border-left: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n  border-right: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n}\n\n::-webkit-scrollbar-track:vertical {\n  border-top: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n  border-bottom: var(--jp-scrollbar-endpad) solid\n    var(--jp-scrollbar-background-color);\n}\n\n/* for code nodes, use a transparent style of scrollbar */\n\n.CodeMirror-hscrollbar::-webkit-scrollbar,\n.CodeMirror-vscrollbar::-webkit-scrollbar,\n.CodeMirror-hscrollbar::-webkit-scrollbar-corner,\n.CodeMirror-vscrollbar::-webkit-scrollbar-corner {\n  background-color: transparent;\n}\n\n.CodeMirror-hscrollbar::-webkit-scrollbar-thumb,\n.CodeMirror-vscrollbar::-webkit-scrollbar-thumb {\n  background: rgba(var(--jp-scrollbar-thumb-color), 0.5);\n  border: var(--jp-scrollbar-thumb-margin) solid transparent;\n  background-clip: content-box;\n  border-radius: var(--jp-scrollbar-thumb-radius);\n}\n\n.CodeMirror-hscrollbar::-webkit-scrollbar-track:horizontal {\n  border-left: var(--jp-scrollbar-endpad) solid transparent;\n  border-right: var(--jp-scrollbar-endpad) solid transparent;\n}\n\n.CodeMirror-vscrollbar::-webkit-scrollbar-track:vertical {\n  border-top: var(--jp-scrollbar-endpad) solid transparent;\n  border-bottom: var(--jp-scrollbar-endpad) solid transparent;\n}")),e}()),p.parentElement||document.body.appendChild(p)):p&&p.parentElement&&p.parentElement.removeChild(p)),l.notifyCommandChanged(g.changeTheme)}),l.addCommand(g.changeTheme,{label:e=>{if(void 0===e.theme)return i.__("Switch to the provided `theme`.");const t=e.theme,r=d.getDisplayName(t);return e.isPalette?i.__("Use Theme: %1",r):r},describedBy:{args:{type:"object",properties:{theme:{type:"string",description:i.__("The theme name to switch to")},isPalette:{type:"boolean",description:i.__("Whether the command is being called from the palette")}},required:["theme"]}},isToggled:e=>e.theme===h,execute:e=>{const t=e.theme;if(t!==d.theme)return d.isToggledAdaptiveTheme()?d.toggleAdaptiveTheme():d.setTheme(t)}}),l.addCommand(g.changePreferredLightTheme,{label:e=>{if(void 0===e.theme)return i.__("Switch to the provided light `theme`.");const t=e.theme,r=d.getDisplayName(t);return e.isPalette?i.__("Set Preferred Light Theme: %1",r):r},describedBy:{args:{type:"object",properties:{theme:{type:"string",description:i.__("The preferred light theme name")},isPalette:{type:"boolean",description:i.__("Whether the command is being called from the palette")}},required:["theme"]}},isToggled:e=>e.theme===d.preferredLightTheme,execute:e=>{const t=e.theme;if(t!==d.preferredLightTheme)return d.setPreferredLightTheme(t)}}),l.addCommand(g.changePreferredDarkTheme,{label:e=>{if(void 0===e.theme)return i.__("Switch to the provided dark `theme`.");const t=e.theme,r=d.getDisplayName(t);return e.isPalette?i.__("Set Preferred Dark Theme: %1",r):r},describedBy:{args:{type:"object",properties:{theme:{type:"string",description:i.__("The preferred dark theme name")},isPalette:{type:"boolean",description:i.__("Whether the command is being called from the palette")}},required:["theme"]}},isToggled:e=>e.theme===d.preferredDarkTheme,execute:e=>{const t=e.theme;if(t!==d.preferredDarkTheme)return d.setPreferredDarkTheme(t)}}),l.addCommand(g.toggleAdaptiveTheme,{label:e=>e.isPalette?i.__("Synchronize Styling Theme with System Settings"):i.__("Synchronize with System Settings"),describedBy:{args:{type:"object",properties:{isPalette:{type:"boolean",description:i.__("Whether the command is being called from the palette")}}}},isToggled:()=>d.isToggledAdaptiveTheme(),execute:()=>{d.toggleAdaptiveTheme().catch(console.warn)}}),l.addCommand(g.themeScrollbars,{label:i.__("Theme Scrollbars"),describedBy:{args:{type:"object",properties:{}}},isToggled:()=>d.isToggledThemeScrollbars(),execute:()=>d.toggleThemeScrollbars()}),l.addCommand(g.changeFont,{label:e=>e.enabled?`${e.font}`:i.__("waiting for fonts"),describedBy:{args:{type:"object",properties:{enabled:{type:"boolean",description:i.__("Whether the font is available and enabled")},font:{type:"string",description:i.__("The font name")},key:{type:"string",description:i.__("The CSS property key to modify")}},required:["enabled","font","key"]}},isEnabled:e=>e.enabled,isToggled:e=>d.getCSS(e.key)===e.font,execute:e=>d.setCSSOverride(e.key,e.font)}),l.addCommand(g.incrFontSize,{label:e=>{switch(e.key){case"code-font-size":return i.__("Increase Code Font Size");case"content-font-size1":return i.__("Increase Content Font Size");case"ui-font-size1":return i.__("Increase UI Font Size");default:return i.__("Increase Font Size")}},describedBy:{args:{type:"object",properties:{key:{type:"string",description:i.__('The font size key to increase (e.g., "code-font-size", "content-font-size1", "ui-font-size1")')}},required:["key"]}},execute:e=>d.incrFontSize(e.key)}),l.addCommand(g.decrFontSize,{label:e=>{switch(e.key){case"code-font-size":return i.__("Decrease Code Font Size");case"content-font-size1":return i.__("Decrease Content Font Size");case"ui-font-size1":return i.__("Decrease UI Font Size");default:return i.__("Decrease Font Size")}},describedBy:{args:{type:"object",properties:{key:{type:"string",description:i.__('The font size key to decrease (e.g., "code-font-size", "content-font-size1", "ui-font-size1")')}},required:["key"]}},execute:e=>d.decrFontSize(e.key)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(d.isToggledAdaptiveTheme()){const t=e.matches?d.preferredDarkTheme:d.preferredLightTheme;d.theme!==t&&d.setTheme(t)}}),d},autoStart:!0,provides:u.IThemeManager},_=[{id:"jupyterlite-remote-server:server-settings",description:"Provides remote server settings from PageConfig.",autoStart:!0,provides:n.IServerSettings,activate:()=>new c({serviceType:"default"})},{id:"jupyterlite-remote-server:default-drive",description:"Provides a default drive that connects to the remote server.",autoStart:!0,provides:n.IDefaultDrive,activate:()=>{const e=new c({serviceType:"contents"});return new n.Drive({serverSettings:e})}},{id:"jupyterlite-remote-server:contents-manager",description:"Provides the contents manager.",autoStart:!0,provides:n.IContentsManager,requires:[n.IDefaultDrive],activate:(e,t)=>{const r=new c({serviceType:"contents"});return new n.ContentsManager({defaultDrive:t,serverSettings:r})}},{id:"jupyterlite-remote-server:kernel-manager",description:"Provides the kernel manager with polling support.",autoStart:!0,provides:n.IKernelManager,activate:()=>{const e=new c({serviceType:"kernels"});return new i({serverSettings:e})}},{id:"jupyterlite-remote-server:kernel-spec-manager",description:"Provides the kernel spec manager with polling and remote resource URL rewriting.",autoStart:!0,provides:n.IKernelSpecManager,activate:()=>{const e=new c({serviceType:"kernels"});return new l({serverSettings:e})}},{id:"jupyterlite-remote-server:session-manager",description:"Provides the session manager with polling support.",autoStart:!0,provides:n.ISessionManager,requires:[n.IKernelManager],activate:(e,t)=>{const r=new c({serviceType:"kernels"});return new d({kernelManager:t,serverSettings:r})}},{id:"jupyterlite-remote-server:event-manager",description:"Provides the event manager.",autoStart:!0,provides:n.IEventManager,activate:()=>{const e=new c({serviceType:"events"});return new n.EventManager({serverSettings:e})}},{id:"jupyterlite-remote-server:config-section-manager",description:"Provides the config section manager.",autoStart:!0,provides:n.IConfigSectionManager,activate:()=>{const e=new c({serviceType:"configSection"}),t=new n.ConfigSectionManager({serverSettings:e});return n.ConfigSection._setConfigSectionManager(t),t}},{id:"jupyterlite-remote-server:nbconvert-manager",description:"Provides the nbconvert manager.",autoStart:!0,provides:n.INbConvertManager,activate:()=>{const e=new c({serviceType:"nbconvert"});return new n.NbConvertManager({serverSettings:e})}},{id:"jupyterlite-remote-server:terminal-manager",description:"Provides the terminal manager with polling support.",autoStart:!0,provides:n.ITerminalManager,activate:()=>{const e=new c({serviceType:"terminals"});return new h({serverSettings:e})}},y]}}]);