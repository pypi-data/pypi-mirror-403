

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; weex-client 0.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=938c9ccc"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            weex-client
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul class="simple">
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">weex-client</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/e2e_testing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p># Weex Client E2E Testing</p>
<p>End-to-end testing for the Weex Client package.</p>
<p>## Setup</p>
<ol class="arabic simple">
<li><p><strong>Configure Environment Variables</strong></p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">cd</span> <span class="pre">weex_client</span>
<span class="pre">cp</span> <span class="pre">.env.example</span> <span class="pre">.env</span>
<span class="pre">#</span> <span class="pre">Edit</span> <span class="pre">.env</span> <span class="pre">with</span> <span class="pre">your</span> <span class="pre">real</span> <span class="pre">API</span> <span class="pre">credentials</span>
<span class="pre">`</span></code></p>
<ol class="arabic simple" start="2">
<li><p><strong>Install Dependencies</strong></p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">uv</span> <span class="pre">sync</span> <span class="pre">--dev</span>
<span class="pre">`</span></code></p>
<p>## Running E2E Tests</p>
<p>### Quick Start</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>bash
# Run all e2e tests
./run_e2e_tests.py</p>
<p># Or run specific test types
./run_e2e_tests.py async      # Only async client tests
./run_e2e_tests.py sync       # Only sync client tests
./run_e2e_tests.py websocket  # Only WebSocket tests
./run_e2e_tests.py performance # Only performance tests
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>### Using pytest directly</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>bash
# Enable e2e tests
export WEEX_E2E_TESTS=1</p>
<p># Run all e2e tests
pytest tests/test_e2e.py -v</p>
<p># Run specific test classes
pytest tests/test_e2e.py::TestWeexAsyncClientE2E -v
pytest tests/test_e2e.py::TestWeexWebSocketClientE2E -v
<a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>## Test Categories</p>
<p>### üîÑ Async Client Tests (<cite>TestWeexAsyncClientE2E</cite>)
- Real API calls with WeexAsyncClient
- Account balance retrieval
- Market data fetching
- Order placement and cancellation (with safeguards)
- Concurrent request performance</p>
<p>### üîÑ Sync Client Tests (<cite>TestWeexSyncClientE2E</cite>)
- Synchronous wrapper functionality
- Background thread management
- Real API integration</p>
<p>### üîå WebSocket Tests (<cite>TestWeexWebSocketClientE2E</cite>)
- Public WebSocket connections
- Private authenticated connections
- Message streaming and handling
- Real-time data reception</p>
<p>### ‚ö° Performance Tests (<cite>TestPerformanceE2E</cite>)
- Concurrent request benchmarking
- Rate limit handling validation
- Performance metrics collection</p>
<p>### ‚öôÔ∏è Environment Tests (<cite>TestEnvironmentE2E</cite>)
- Configuration validation
- Environment URL resolution
- Environment variable handling</p>
<p>## Safety Features</p>
<p>### üõ°Ô∏è Test Safeguards</p>
<ul class="simple">
<li><p><strong>Default Skip</strong>: E2E tests are skipped by default</p></li>
<li><p><strong>Environment Variable Check</strong>: Tests only run with <cite>WEEX_E2E_TESTS=1</cite></p></li>
<li><p><strong>API Quota Protection</strong>: Use efficient test patterns</p></li>
<li><p><strong>Order Safety</strong>: Real order placement requires <cite>WEEX_ALLOW_REAL_ORDERS=1</cite></p></li>
</ul>
<p>### ‚ö†Ô∏è Warnings</p>
<ul class="simple">
<li><p><strong>API Quotas</strong>: E2E tests consume real API quotas</p></li>
<li><p><strong>Real Orders</strong>: Order placement tests can execute real trades</p></li>
<li><p><strong>Rate Limits</strong>: Rapid requests may trigger rate limits</p></li>
<li><p><strong>Public Data</strong>: Some tests expose sensitive data in logs</p></li>
</ul>
<p>## Environment Variables</p>
<div class="line-block">
<div class="line">Variable | Required | Description |</div>
</div>
<p><a href="#id33"><span class="problematic" id="id34">|----------|</span></a>‚Äî‚Äî‚Äî‚Äì<a href="#id35"><span class="problematic" id="id36">|-------------|</span></a>
| <cite>WEEX_API_KEY</cite> | ‚úÖ | Your Weex API key |
| <cite>WEEX_SECRET_KEY</cite> | ‚úÖ | Your Weex secret key |
| <cite>WEEX_PASSPHRASE</cite> | ‚úÖ | Your API passphrase |
| <cite>WEEX_ENVIRONMENT</cite> | ‚ùå | Environment (development/staging/production) |
| <cite>WEEX_TEST_SYMBOL</cite> | ‚ùå | Symbol for testing (default: BTCUSDT) |
| <cite>WEEX_E2E_TESTS</cite> | ‚ùå | Enable e2e tests (set to 1) |
| <cite>WEEX_ALLOW_REAL_ORDERS</cite> | ‚ùå | Allow real order placement (DANGEROUS) |</p>
<p>## Test Markers</p>
<ul class="simple">
<li><p><cite>&#64;pytest.mark.integration</cite> - Marks integration tests</p></li>
<li><p><cite>&#64;pytest.mark.slow</cite> - Marks slow performance tests</p></li>
<li><p><cite>&#64;pytest.mark.skipif</cite> - Conditional test skipping</p></li>
</ul>
<p>## Troubleshooting</p>
<p>### Common Issues</p>
<ol class="arabic simple">
<li><p><strong>Tests Skipped</strong>
<code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">export</span> <span class="pre">WEEX_E2E_TESTS=1</span>
<span class="pre">`</span></code></p></li>
<li><p><strong>Authentication Failures</strong>
- Check API credentials in <cite>.env</cite>
- Verify environment is correct
- Check API key permissions</p></li>
<li><p><strong>WebSocket Connection Issues</strong>
- Verify network connectivity
- Check firewall settings
- Test with public channels first</p></li>
<li><p><strong>Rate Limit Errors</strong>
- Reduce concurrent requests
- Add delays between tests
- Monitor API quota usage</p></li>
</ol>
<p>### Debug Mode</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>bash
# Enable verbose output
pytest tests/test_e2e.py -v -s ‚Äìtb=long</p>
<p># Run with specific markers
pytest tests/test_e2e.py -v -m ‚Äúintegration and not slow‚Äù
<a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
<p>## Performance Monitoring</p>
<p>E2E tests include performance monitoring:</p>
<ul class="simple">
<li><p><strong>Request Timing</strong>: Measures API response times</p></li>
<li><p><strong>Concurrent Efficiency</strong>: Compares sequential vs concurrent performance</p></li>
<li><p><strong>Rate Limit Detection</strong>: Validates rate limit handling</p></li>
<li><p><strong>Memory Usage</strong>: Tracks memory consumption patterns</p></li>
</ul>
<p>## Continuous Integration</p>
<p>For CI/CD environments:</p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a><a href="#id27"><span class="problematic" id="id28">`</span></a>yaml
# GitHub Actions example
- name: Run E2E Tests</p>
<blockquote>
<div><dl class="simple">
<dt>env:</dt><dd><p>WEEX_E2E_TESTS: 1
WEEX_API_KEY: ${{ secrets.WEEX_API_KEY }}
WEEX_SECRET_KEY: ${{ secrets.WEEX_SECRET_KEY }}
WEEX_PASSPHRASE: ${{ secrets.WEEX_PASSPHRASE }}</p>
</dd>
<dt>run: |</dt><dd><p>./run_e2e_tests.py async</p>
</dd>
</dl>
</div></blockquote>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a></p>
<p>## Best Practices</p>
<ol class="arabic simple">
<li><p><strong>Use Test Environment</strong>: Prefer <cite>development</cite> environment</p></li>
<li><p><strong>Monitor Quotas</strong>: Track API usage during testing</p></li>
<li><p><strong>Clean Up</strong>: Always cancel test orders</p></li>
<li><p><strong>Rate Limiting</strong>: Respect API rate limits</p></li>
<li><p><strong>Security</strong>: Never commit credentials to version control</p></li>
</ol>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Weex Client Contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>