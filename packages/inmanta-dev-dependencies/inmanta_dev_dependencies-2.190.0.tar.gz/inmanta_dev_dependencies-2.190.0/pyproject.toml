[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[project]
name = "inmanta-dev-dependencies"
version = "2.190.0"
requires-python = ">=3.12"
description = "Package collecting all common dev dependencies of inmanta modules and extensions to synchronize dependency versions."
authors = [
    {name = "Inmanta", email = "code@inmanta.com"},
]

dependencies = [
    "black==26.1.0",
    "flake8==7.3.0",
    "flake8-copyright==0.2.4",
    "flake8-black==0.4.0",
    "flake8-isort==7.0.0",
    "flake8-junit-report==2.1.0",
    "isort==7.0.0",
    "lxml==6.0.2",
    "mypy==1.19.1",
    "pep8-naming==0.15.1",
    "pytest==9.0.2",
    "pyupgrade==3.21.2",
    "mypy-baseline==0.7.3",
]

[tool.setuptools]
packages = { find = { include = ["inmanta_dev_dependencies*"], where = ["src"] } }

# Optional dependencies
[project.optional-dependencies]
module = ["pytest-inmanta"]
core = [
    "asyncpg>=0.21.0,<1.0.0",
    "pytest-env==1.2.0",
    "pytest-postgresql==8.0.0",
    "psycopg==3.3.2",
    "tornado>=6.1,<7.0"
]
extension = [
    # depend on inmanta-core with the extra rather than plain pytest-inmanta-extensions to aid pip in finding candidate
    # versions if constraints on inmanta-core are added externally (e.g. via inmanta-service-orchestrator)
    # (see https://github.com/inmanta/infra-tickets/issues/180#issuecomment-1715587389)
    "inmanta-core[pytest-inmanta-extensions]",
    "asyncpg>=0.21.0,<1.0.0",
    "pytest-env==1.2.0",
    "pytest-postgresql==8.0.0",
    "psycopg==3.3.2",
    "tornado>=6.1,<7.0"
]
async = [
    "pytest-asyncio==1.3.0",
    "pytest-timeout==2.4.0"
]
pytest = [
    "pytest-env==1.2.0",
    "pytest-cover==3.0.0",
    "pytest-randomly==4.0.1",
    "pytest-sugar==1.1.1",
    "pytest-instafail==0.5.0"
]
