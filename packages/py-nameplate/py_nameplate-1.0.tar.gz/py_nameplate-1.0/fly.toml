# =============================================================================
# Fly.io Configuration for Nameplate MCP Server
# =============================================================================
#
# This configures the remote MCP server deployment on Fly.io.
#
# Deployment:
#   - Automatic: Push a version tag (v*) to trigger GitHub Actions release
#   - Manual: Run `fly deploy` from the project root
#
# Useful commands:
#   fly status -a nameplate-mcp     # Check deployment status
#   fly logs -a nameplate-mcp       # View logs
#   fly ssh console -a nameplate-mcp # SSH into the machine
#
# =============================================================================

app = "nameplate-mcp"
primary_region = "iad"

[build]
dockerfile = "Dockerfile"

[env]
NAMEPLATE_HOST = "0.0.0.0"
NAMEPLATE_PORT = "8080"
NAMEPLATE_RATE_LIMIT = "60"

[http_service]
internal_port = 8080
force_https = true
auto_stop_machines = true
auto_start_machines = true
min_machines_running = 0

[http_service.concurrency]
type = "requests"
hard_limit = 250
soft_limit = 200

[[vm]]
count = 1
cpu_kind = "shared"
cpus = 1
memory = "256mb"
