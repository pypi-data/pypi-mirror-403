{
    "type": "object",
    "properties": {
        "gatewayId": {
            "type": "string",
            "maxLength": 36
        },
        "gatewayType": {
            "type": "string"
        },
        "timestamp": {
            "type": "number"
        },
        "packets": {
            "description": "Unified Packet",
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "aliasBridgeId": {
                        "type": "string"
                    },
                    "timestamp": {
                        "type": "number"
                    },
                    "sequenceId": {
                        "type": "number"
                    },
                    "rssi": { 
                        "type": "number"
                    },
                    "payload": {
                        "type": "string"
                    }
                },
                "if": {
                    "description":  "unified SI packet + Sensor packet",
                    "properties":{
                        "payload": {
                            "oneOf": [
                                { "pattern": "[1][eE][1][6][cC][6][fF][cC][0][0][0][0][37bBfF][fF]" },
                                { "pattern": "[1][eE][1][6][cC][6][fF][cC][0][0][0][0][eE][eE]" },
                                { "pattern": "[1][eE][1][6][9][0][fF][cC]" },
                                { "pattern": "[1][eE][1][6][cC][6][fF][cC][0][0][0][0][eE][bB]" }
                            ]
                        }
                    }
                },
                "then": {
                        "required": ["aliasBridgeId", "timestamp", "sequenceId", "payload"]
                },
                "else": {
                        "required": ["timestamp", "sequenceId", "payload"]
                }
            }
        }
    },
    "required": [
        "gatewayId",
        "gatewayType",
        "timestamp",
        "packets"
    ],
    "dependentSchemas": {
        "location": {
            "properties": {
                "location": {
                    "type": "object",
                    "properties": {
                        "lat": {
                            "type": "number"
                        },
                        "lng": {
                            "type": "number"
                        }
                    },
                    "required": [
                        "lat",
                        "lng"
                    ]
                }
            }
        }
    }
}