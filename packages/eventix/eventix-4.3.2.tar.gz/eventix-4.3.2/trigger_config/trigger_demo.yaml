triggers:
  TriggerKLAnnouncementEmail:
    code: |
      def execute(self, event: TEventixEvent) -> TEventixTask:
          payload = event.payload_dict()
          full_tr_number = payload.get("full_tr_number")
          status = payload.get("status")

          if not (full_tr_number.startswith("KL") and status == "ANNOUNCED"):
              self.ignore()

          task = TEventixTask(
              task="task_send_shipment_announcement_email",
              kwargs=dict(full_tr_number=full_tr_number),
          )
          return task
    event_name: TTransactionStatusChangeEvent
    namespace: default
    revision: null
    trigger_type: default
    version: 1
