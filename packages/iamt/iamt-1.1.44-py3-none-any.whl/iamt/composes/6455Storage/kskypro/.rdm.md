git clone https://github.com/HalcyonAzure/lsky-pro-docker
https://hub.docker.com/_/php


# 镜像编译好了 第一次部署却失败的 
# 通过检查 storage 目录下的日志发现 其实还是 Unsupported cipher or incorrect key length
# .evn.example 文件当中的 APP_KEY 应该留空 然后让他自己去生成 要不然就会出现这个问题 

# mysql 容器 /etc/mysql 目录不能做映射 要不然就需要自己去准备配置文件 


# docker exec -it lskypro php artisan key:generate  
# docker exec -it mysql-lsky mysql -uroot -pKS123456! -e "UPDATE ks_sky.groups SET is_default = 0 WHERE id = 1;"
# docker exec -it mysql-lsky mysql -uroot -pKS123456! -e "UPDATE ks_sky.groups SET is_guest = 0 WHERE id = 1;"
# 初次部署好之后需要修改这两个字段的值 才能用 


# docker exec -it mysql-lsky mysql -uroot -pKS123456! -e "UPDATE ks_sky.configs SET value = '102400000000' WHERE name ='user_initial_capacity';"


# docker build -t test:v5  --no-cache . 
# docker build 的构建速度太慢了 需要十几分钟 还是需要优化一下的  更换一下 apt 的软件源还是有必要的 
# 目前使用的php8.1的母容器是debian12系统 但是 软件源设置是在 /etc/apt/source.list.d/debian.sources 而且是 deb822格式 
# 优化之后仍然需要 1500S
# 然后测试了国外编译镜像 尝试了几个国家 都是从gitee拉取代码太慢了 几乎无法完成镜像的编译 
# 最后 从github拉代码 然后韩国编译镜像还是很快的 


# env.conf 的内容本来应该是自动生成的 但是现在变成本地设置好直接弄到远程主机上去的 
# 所以我需要手动维护好才行的 