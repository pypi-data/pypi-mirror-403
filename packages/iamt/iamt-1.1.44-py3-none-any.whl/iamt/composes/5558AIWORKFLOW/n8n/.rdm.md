https://docs.n8n.io/hosting/installation/docker/


docker volume create n8n_data
docker run -it --rm --name n8n -p 5678:5678 -v n8n_data:/home/node/.n8n docker.n8n.io/n8nio/n8n
# 一定要先创建volume 而不能进行本地文件夹映射 要不然 有文件夹权限问题 会直接报错
# 然后就算运行起来也访问不了 因为有TLS问题  N8N_SECURE_COOKIE 设置为 false 可以解决这个问题 


官方也有docker compose教程  但是我看了一下用不了
还是自己把命令转换成compose吧


https://github.com/n8n-io/n8n-hosting/tree/main
# 原来有个专门的 hosting 仓库 还是要仔细看文档 
# 使用上面的 withPostgres  然后采用目录映射的方式是运行不了的  n8n 容器没有操作 本地 n8n_storage 文件夹的权限 
# 经过我的一番折腾 可以正常启动 但是还是需要把 N8N_SECURE_COOKIE 设置为 false 才能用 


# n8n 容器使用的 alpine 作为基础系统 
# 运行的 用户是node 它的id是1000 正好和vagrant(1000) 相同 
uid=1000(node) gid=1000(node) groups=1000(node)
# 这应该就是目前我用 vagrant 能够连接成功的原因  
# 后面这里最好优化一下 更改 n8n_storage 文件夹的权限 sudo chown -R 1000:1000 n8n_storage
