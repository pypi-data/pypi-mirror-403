import{a as G,f as U}from"./cZ5dS-Bk.js";import"./D0ky-wp8.js";import{c as xe,a as Se}from"./C0R47HOl.js";import{p as Pe,t as je,a as Le,b8 as N,s as Me,c as Re,r as ze,g,e as Ne,b as qe,b5 as T}from"./DxqtznRv.js";import{e as y}from"./BGP0akLM.js";import{s as Be}from"./DcsVdkUI.js";import{a as Ge,b as We,s as W}from"./D2iqoFGv.js";import{p as c,c as K}from"./C8zSuf0b.js";import{i as Ke}from"./DvaMvQ_S.js";function C(e,t,n,l){function o(i){return i instanceof n?i:new n(function(f){f(i)})}return new(n||(n=Promise))(function(i,f){function u(d){try{a(l.next(d))}catch(h){f(h)}}function E(d){try{a(l.throw(d))}catch(h){f(h)}}function a(d){d.done?i(d.value):o(d.value).then(u,E)}a((l=l.apply(e,t||[])).next())})}function k(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},l,o,i,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=u(0),f.throw=u(1),f.return=u(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function u(a){return function(d){return E([a,d])}}function E(a){if(l)throw new TypeError("Generator is already executing.");for(;f&&(f=0,a[0]&&(n=0)),n;)try{if(l=1,o&&(i=a[0]&2?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,o=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(d){a=[6,d],o=0}finally{l=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Ye(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var l=n.call(e),o,i=[],f;try{for(;(t===void 0||t-- >0)&&!(o=l.next()).done;)i.push(o.value)}catch(u){f={error:u}}finally{try{o&&!o.done&&(n=l.return)&&n.call(l)}finally{if(f)throw f.error}}return i}function He(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ye(arguments[t]));return e}var Je=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function j(e,t){var n=Ve(e);if(typeof n.path!="string"){var l=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof l=="string"&&l.length>0?l:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function Ve(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var l=t.split(".").pop().toLowerCase(),o=Je.get(l);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var Qe=[".DS_Store","Thumbs.db"];function Ue(e){return C(this,void 0,void 0,function(){return k(this,function(t){return[2,Xe(e)&&e.dataTransfer?et(e.dataTransfer,e.type):Ze(e)]})})}function Xe(e){return!!e.dataTransfer}function Ze(e){var t=$e(e.target)?e.target.files?q(e.target.files):[]:[];return t.map(function(n){return j(n)})}function $e(e){return e!==null}function et(e,t){return C(this,void 0,void 0,function(){var n,l;return k(this,function(o){switch(o.label){case 0:return e.items?(n=q(e.items).filter(function(i){return i.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(tt))]):[3,2];case 1:return l=o.sent(),[2,Y(X(l))];case 2:return[2,Y(q(e.files).map(function(i){return j(i)}))]}})})}function Y(e){return e.filter(function(t){return Qe.indexOf(t.name)===-1})}function q(e){for(var t=[],n=0;n<e.length;n++){var l=e[n];t.push(l)}return t}function tt(e){if(typeof e.webkitGetAsEntry!="function")return H(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Z(t):H(e)}function X(e){return e.reduce(function(t,n){return He(t,Array.isArray(n)?X(n):[n])},[])}function H(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=j(t);return Promise.resolve(n)}function rt(e){return C(this,void 0,void 0,function(){return k(this,function(t){return[2,e.isDirectory?Z(e):nt(e)]})})}function Z(e){var t=e.createReader();return new Promise(function(n,l){var o=[];function i(){var f=this;t.readEntries(function(u){return C(f,void 0,void 0,function(){var E,a,d;return k(this,function(h){switch(h.label){case 0:if(u.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return E=h.sent(),n(E),[3,4];case 3:return a=h.sent(),l(a),[3,4];case 4:return[3,6];case 5:d=Promise.all(u.map(rt)),o.push(d),i(),h.label=6;case 6:return[2]}})})},function(u){l(u)})}i()})}function nt(e){return C(this,void 0,void 0,function(){return k(this,function(t){return[2,new Promise(function(n,l){e.file(function(o){var i=j(o,e.fullPath);n(i)},function(o){l(o)})})]})})}function it(e,t){if(e&&t){const n=Array.isArray(t)?t:t.split(","),l=e.name||"",o=(e.type||"").toLowerCase(),i=o.replace(/\/.*$/,"");return n.some(f=>{const u=f.trim().toLowerCase();return u.charAt(0)==="."?l.toLowerCase().endsWith(u):u.endsWith("/*")?i===u.replace(/\/.*$/,""):o===u})}return!0}const at="file-invalid-type",ot="file-too-large",st="file-too-small",lt="too-many-files",ft=e=>{e=Array.isArray(e)&&e.length===1?e[0]:e;const t=Array.isArray(e)?`one of ${e.join(", ")}`:e;return{code:at,message:`File type must be ${t}`}},J=e=>({code:ot,message:`File is larger than ${e} bytes`}),V=e=>({code:st,message:`File is smaller than ${e} bytes`}),ut={code:lt,message:"Too many files"};function ct(e,t){const n=e.type==="application/x-moz-file"||it(e,t);return[n,n?null:ft(t)]}function dt(e,t,n){if(I(e.size))if(I(t)&&I(n)){if(e.size>n)return[!1,J(n)];if(e.size<t)return[!1,V(t)]}else{if(I(t)&&e.size<t)return[!1,V(t)];if(I(n)&&e.size>n)return[!1,J(n)]}return[!0,null]}function I(e){return e!=null}function Q(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function P(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,t=>t==="Files"||t==="application/x-moz-file"):!!e.target&&!!e.target.files}function pt(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function gt(e){return e.indexOf("Edge/")!==-1}function mt(e=window.navigator.userAgent){return pt(e)||gt(e)}var yt=U("<p>Drag 'n' drop some files here, or click to select files</p>"),ht=U('<div tabindex="0"><input type="file" autocomplete="off" tabindex="-1" style="display: none;"/> <!></div>');function Ot(e,t){Pe(t,!1);let n=c(t,"accept",8),l=c(t,"disabled",8,!1),o=c(t,"getFilesFromEvent",8,Ue),i=c(t,"maxSize",8,1/0),f=c(t,"minSize",8,0),u=c(t,"multiple",8,!0),E=c(t,"preventDropOnDocument",8,!0),a=c(t,"noClick",8,!1),d=c(t,"noKeyboard",8,!1),h=c(t,"noDrag",8,!1),L=c(t,"noDragEventsBubbling",8,!1),$=c(t,"containerClasses",8,""),ee=c(t,"containerStyles",8,""),te=c(t,"disableDefaultStyles",8,!1),re=c(t,"name",8,""),v=c(t,"inputElement",12),ne=c(t,"required",8,!1);const D=xe();let p={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]},_=qe();function ie(){p.isFileDialogActive=!1,p.isDragActive=!1,p.draggedFiles=[],p.acceptedFiles=[],p.fileRejections=[]}function M(){v()&&(v(v().value=null,!0),p.isFileDialogActive=!0,v().click())}function ae(r){!g(_)||!g(_).isEqualNode(r.target)||(r.keyCode===32||r.keyCode===13)&&(r.preventDefault(),M())}function oe(){p.isFocused=!0}function se(){p.isFocused=!1}function le(){a()||(mt()?setTimeout(M,0):M())}function fe(r){r.preventDefault(),S(r),A=[...A,r.target],P(r)&&Promise.resolve(o()(r)).then(s=>{Q(r)&&!L()||(p.draggedFiles=s,p.isDragActive=!0,D("dragenter",{dragEvent:r}))})}function ue(r){if(r.preventDefault(),S(r),r.dataTransfer)try{r.dataTransfer.dropEffect="copy"}catch{}return P(r)&&D("dragover",{dragEvent:r}),!1}function ce(r){r.preventDefault(),S(r);const s=A.filter(F=>g(_)&&g(_).contains(F)),b=s.indexOf(r.target);b!==-1&&s.splice(b,1),A=s,!(s.length>0)&&(p.isDragActive=!1,p.draggedFiles=[],P(r)&&D("dragleave",{dragEvent:r}))}function B(r){r.preventDefault(),S(r),A=[],P(r)&&(D("filedropped",{event:r}),Promise.resolve(o()(r)).then(s=>{if(Q(r)&&!L())return;const b=[],F=[];s.forEach(O=>{const[Te,Ae]=ct(O,n()),[Oe,Ie]=dt(O,f(),i());if(Te&&Oe)b.push(O);else{const Ce=[Ae,Ie].filter(ke=>ke);F.push({file:O,errors:Ce})}}),!u()&&b.length>1&&(b.forEach(O=>{F.push({file:O,errors:[ut]})}),b.splice(0)),r.dataTransfer&&v(v().files=r.dataTransfer.files,!0),p.acceptedFiles=b,p.fileRejections=F,D("drop",{acceptedFiles:b,fileRejections:F,event:r}),F.length>0&&D("droprejected",{fileRejections:F,event:r}),b.length>0&&D("dropaccepted",{acceptedFiles:b,event:r})})),ie()}function R(r){return l()?null:r}function z(r){return d()?null:R(r)}function x(r){return h()?null:R(r)}function S(r){L()&&r.stopPropagation()}function de(r){E()&&r.preventDefault()}let A=[];function pe(r){E()&&(g(_)&&g(_).contains(r.target)||(r.preventDefault(),A=[]))}function ge(){p.isFileDialogActive&&setTimeout(()=>{if(v()){const{files:r}=v();r.length||(p.isFileDialogActive=!1,D("filedialogcancel"))}},300)}Se(()=>{v(null)});function me(r){r.stopPropagation()}Ke();var m=ht();y("focus",N,ge),y("dragover",N,de),y("drop",N,pe);var ye=T(()=>z(ae)),he=T(()=>z(oe)),ve=T(()=>z(se)),be=T(()=>R(le)),Ee=T(()=>x(fe)),De=T(()=>x(ue)),_e=T(()=>x(ce)),we=T(()=>x(B)),w=Re(m);K(w,r=>v(r),()=>v());var Fe=Me(w,2);Be(Fe,t,"default",{},r=>{var s=yt();G(r,s)}),ze(m),K(m,r=>Ne(_,r),()=>g(_)),je(()=>{Ge(m,1,`${te()?"":"dropzone"}
  ${$()??""}`,"svelte-1pnwkfd"),We(m,ee()),W(w,"accept",n()),w.multiple=u(),w.required=ne(),W(w,"name",re())}),y("change",w,B),y("click",w,me),y("keydown",m,function(...r){var s;(s=g(ye))==null||s.apply(this,r)}),y("focus",m,function(...r){var s;(s=g(he))==null||s.apply(this,r)}),y("blur",m,function(...r){var s;(s=g(ve))==null||s.apply(this,r)}),y("click",m,function(...r){var s;(s=g(be))==null||s.apply(this,r)}),y("dragenter",m,function(...r){var s;(s=g(Ee))==null||s.apply(this,r)}),y("dragover",m,function(...r){var s;(s=g(De))==null||s.apply(this,r)}),y("dragleave",m,function(...r){var s;(s=g(_e))==null||s.apply(this,r)}),y("drop",m,function(...r){var s;(s=g(we))==null||s.apply(this,r)}),G(e,m),Le()}export{Ot as D};
