import{a as Q,c as ne,f as W}from"../chunks/cZ5dS-Bk.js";import"../chunks/D0ky-wp8.js";import{p as Nt,ap as ht,e as st,z as lt,g as T,aq as Ht,f as ut,c as X,r as E,s as q,u as Y,t as gt,a as At,b as ct,O as Lt,n as re,b9 as ae,d as ie,b8 as oe}from"../chunks/DxqtznRv.js";import{s as mt,e as at}from"../chunks/BGP0akLM.js";import{p as $t,i as et,c as se,s as wt,a as Yt,d as ue,b as nt}from"../chunks/C8zSuf0b.js";import{i as jt}from"../chunks/DvaMvQ_S.js";import"../chunks/CdQeho8k.js";import{F as bt}from"../chunks/Bypr0-Js.js";import{e as zt,i as Rt,d as H,D as le}from"../chunks/FF3P85hg.js";import{a as vt,s as Vt}from"../chunks/D2iqoFGv.js";import{e as St,g as qt}from"../chunks/C8Jx7AEg.js";import{D as ce}from"../chunks/DfmVMWXE.js";import{a as fe,o as he}from"../chunks/C0R47HOl.js";import{S as Gt,j as ge,k as de,s as ot,m as Xt,p as Ft,T as Dt,q as Pt,f as ve,t as me,o as pe,g as ye,L as be}from"../chunks/COjgeFWH.js";var xe=W("<button><!></button>"),_e=W("<button><!></button>"),we=W('<th scope="col" class="text-sm font-medium text-white px-6 py-4 text-left"><div class="flex"><span> </span> &nbsp; <!> <!></div></th>'),Me=W('<td class="px-6 py-4 whitespace text-sm font-medium text-gray-900"> </td>'),$e=W('<tr class="border-b hover:bg-gray-100"></tr>'),ze=W(`<span class="px-2 py-3"> </span> <div class="dropdown relative"><button class="
          dropdown-toggle
          px-2
          py-3
          bg-blue-600
          text-white
          font-medium
          text-xs
          leading-tight
          uppercase
          rounded
          shadow-md
          hover:bg-blue-700 hover:shadow-lg
          focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0
          active:bg-blue-800 active:shadow-lg active:text-white
          transition
          duration-150
          ease-in-out
          flex
          items-center
          whitespace-nowrap
        " type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false"> <span class="px-1"></span> <!></button> <ul class="
          dropdown-menu
          min-w-max
          absolute
          bg-white
          text-base
          z-50
          float-left
          py-3
          list-none
          text-left
          rounded-lg
          shadow-lg
          mt-1
          hidden
          m-0
          bg-clip-padding
          border-none
        "><li><button class="
              dropdown-item
              text-sm
              py-2.5
              px-6
              font-normal
              block
              w-full
              whitespace-nowrap
              bg-transparent
              text-gray-700
              hover:bg-gray-100
            ">10</button></li> <li><button class="
              dropdown-item
              text-sm
              py-2.5
              px-6
              font-normal
              block
              w-full
              whitespace-nowrap
              bg-transparent
              text-gray-700
              hover:bg-gray-100
            ">25</button></li></ul></div> <span class="px-2 py-3">rows per page.</span>`,1),ke=W("<li><button> </button></li>"),Te=W('<ul class="flex  list-style-none"><li><button aria-label="Previous"><span aria-hidden="true">&laquo;</span></button></li> <!> <li><button aria-label="Next"><span aria-hidden="true">&raquo;</span></button></li></ul>'),Ne=W('<div class="flex w-full flex-col my-2"><div class="flex w-full justify-between"><button type="button" class="inline-block px-6 py-1.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg"><!></button></div></div> <table class="table-auto w-full"><thead class="border-b bg-gray-800"><tr></tr></thead><tbody></tbody></table> <div class="flex w-full justify-between mb-12"><div class="flex justify-center"><!></div> <nav aria-label="Page navigation example"><!></nav></div>',1);function xt(t,n){Nt(n,!1);const e=ct(),s=ct(),h=ct(),l=ct(),g=ct();let p=$t(n,"data",28,()=>[]),M=$t(n,"columns",28,()=>[]),f=$t(n,"showAll",12,!1),w=$t(n,"N",12,10);function $(u){const i=u?p().length+1:w();var z=[{number:1,active:!0}];for(const[A,S]of p().entries())A%i===0&&A>0&&(z=[...z,{number:A/i+1,active:!1}]);return z}function y(u){for(var i of T(s))i.number===u?i.active=!0:i.active=!1;st(s,T(s))}function b(u){for(let i of M())i.title==u.title?(i.sortActive&&(i.sort=i.sort=="ascending"?"descending":"ascending"),i.sortActive=!0):i.sortActive=!1;M(M()),p(p())}function k(u){for(const i of M())if(i.sortActive){i.sort=="ascending"?u.sort((z,A)=>{let S=z[i.sortName],P=A[i.sortName];return S=S=="-"?0:S,P=P=="-"?0:P,S<P?-1:S>P?1:0}):i.sort=="descending"&&u.sort((z,A)=>{let S=z[i.sortName],P=A[i.sortName];return S=S=="-"?0:S,P=P=="-"?0:P,S>P?-1:S<P?1:0});break}return u}ht(()=>(lt(f()),lt(p()),lt(w())),()=>{st(e,f()?p().length+1:w())}),ht(()=>lt(f()),()=>{st(s,$(f()))}),ht(()=>T(s),()=>{st(h,T(s).length===1?!0:T(s)[0].active)}),ht(()=>T(s),()=>{st(l,T(s).length===1?!0:T(s).at(-1).active)}),ht(()=>T(s),()=>{st(g,T(s).findIndex(u=>u.active))}),ht(()=>lt(p()),()=>{k(p())}),Ht(),jt();var m=Ne(),d=ut(m),r=X(d),x=X(r),_=X(x);{var c=u=>{bt(u,{get icon(){return qt}})},N=u=>{bt(u,{get icon(){return St}})};et(_,u=>{f()?u(c):u(N,!1)})}E(x),E(r),E(d);var j=q(d,2),D=X(j),I=X(D);zt(I,5,M,Rt,(u,i)=>{var z=we(),A=X(z),S=X(A),P=X(S,!0);E(S);var G=q(S,2);{var O=B=>{var V=xe(),rt=X(V);{let yt=Lt(()=>(T(i),Y(()=>T(i).sortActive?T(i).sortColor:"#aaa")));bt(rt,{get style(){return`color: ${T(yt)??""}`},get icon(){return St}})}E(V),at("click",V,()=>b(T(i))),Q(B,V)};et(G,B=>{T(i),Y(()=>T(i).sort=="ascending")&&B(O)})}var R=q(G,2);{var U=B=>{var V=_e(),rt=X(V);{let yt=Lt(()=>(T(i),Y(()=>T(i).sortActive?T(i).sortColor:"#aaa")));bt(rt,{get style(){return`color: ${T(yt)??""}`},get icon(){return qt}})}E(V),at("click",V,()=>b(T(i))),Q(B,V)};et(R,B=>{T(i),Y(()=>T(i).sort=="descending")&&B(U)})}E(A),E(z),gt(()=>mt(P,(T(i),Y(()=>T(i).title)))),Q(u,z)}),E(I),E(D);var F=q(D);zt(F,7,p,u=>u,(u,i,z)=>{var A=ne(),S=ut(A);{var P=G=>{var O=$e();zt(O,5,M,Rt,(R,U)=>{var B=Me(),V=X(B,!0);E(B),gt(()=>mt(V,(T(i),T(U),Y(()=>T(i)[T(U).field])))),Q(R,B)}),E(O),Q(G,O)};et(S,G=>{T(z)>=T(g)*T(e)&&T(z)<(T(g)+1)*T(e)&&G(P)})}Q(u,A)}),E(F),E(j);var C=q(j,2),L=X(C),K=X(L);{var J=u=>{var i=ze(),z=ut(i),A=X(z);E(z);var S=q(z,2),P=X(S),G=X(P),O=q(G,3);bt(O,{get icon(){return St}}),E(P);var R=q(P,2),U=X(R),B=X(U);E(U);var V=q(U,2),rt=X(V);E(V),E(R),E(S),re(2),gt(yt=>{mt(A,`Showing ${w()*T(g)+1} to ${yt??""} of
        ${lt(p()),Y(()=>p().length)??""} rows with`),mt(G,`${w()??""} `)},[()=>(lt(w()),T(g),lt(p()),Y(()=>Math.min(w()*(T(g)+1),p().length)))]),at("click",B,()=>w(10)),at("click",rt,()=>w(25)),Q(u,i)};et(K,u=>{f()||u(J)})}E(L);var o=q(L,2),v=X(o);{var a=u=>{var i=Te(),z=X(i),A=X(z);E(z);var S=q(z,2);zt(S,1,()=>T(s),O=>O,(O,R)=>{var U=ke(),B=X(U),V=X(B,!0);E(B),E(U),gt(()=>{vt(U,1,`page-item ${T(R),Y(()=>T(R).active?"active":"")??""}`),vt(B,1,`page-link relative block py-1.5 px-3 border-0 outline-none rounded
                ${T(R),Y(()=>T(R).active?"bg-blue-600 text-white hover:text-white hover:bg-blue-600 shadow-md focus:shadow-md":"bg-transparent text-gray-800 hover:text-gray-800 hover:bg-gray-200 focus:shadow-none")??""}
                  `),mt(V,(T(R),Y(()=>T(R).number)))}),at("click",B,rt=>y(T(R).number)),Q(O,U)});var P=q(S,2),G=X(P);E(P),E(i),gt(()=>{vt(z,1,`page-item ${T(h)?"disabled":""}`),vt(A,1,`page-link relative block py-1.5 px-3 rounded border-0 bg-transparent outline-none text-gray-800 focus:shadow-none
            ${T(h)?"pointer-events-none":"hover:text-gray-800 hover:bg-gray-200"}`),vt(P,1,`page-item  ${T(l)?"disabled":""}`),vt(G,1,`page-link relative block py-1.5 px-3 rounded border-0 bg-transparent outline-none text-gray-800 focus:shadow-none
            ${T(l)?"pointer-events-none":"hover:text-gray-800 hover:bg-gray-200"}`)}),at("click",A,O=>y(1)),at("click",G,O=>y(T(s).length)),Q(u,i)};et(v,u=>{f()||u(a)})}E(o),E(C),at("click",x,u=>f(!f())),Q(t,m),At()}var Ae=1e-12;function Ut(t){return((t=Math.exp(t))+1/t)/2}function je(t){return((t=Math.exp(t))-1/t)/2}function Se(t){return((t=Math.exp(2*t))-1)/(t+1)}const De=(function t(n,e,s){function h(l,g){var p=l[0],M=l[1],f=l[2],w=g[0],$=g[1],y=g[2],b=w-p,k=$-M,m=b*b+k*k,d,r;if(m<Ae)r=Math.log(y/f)/n,d=function(D){return[p+D*b,M+D*k,f*Math.exp(n*D*r)]};else{var x=Math.sqrt(m),_=(y*y-f*f+s*m)/(2*f*e*x),c=(y*y-f*f-s*m)/(2*y*e*x),N=Math.log(Math.sqrt(_*_+1)-_),j=Math.log(Math.sqrt(c*c+1)-c);r=(j-N)/n,d=function(D){var I=D*r,F=Ut(N),C=f/(e*x)*(F*Se(n*I+N)-je(N));return[p+C*b,M+C*k,f*F/Ut(n*I+N)]}}return d.duration=r*1e3*n/Math.SQRT2,d}return h.rho=function(l){var g=Math.max(.001,+l),p=g*g,M=p*p;return t(g,p,M)},h})(Math.SQRT2,2,4);function Pe(t){let n;for(;n=t.sourceEvent;)t=n;return t}function it(t,n){if(t=Pe(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var s=e.createSVGPoint();return s.x=t.clientX,s.y=t.clientY,s=s.matrixTransform(n.getScreenCTM().inverse()),[s.x,s.y]}if(n.getBoundingClientRect){var h=n.getBoundingClientRect();return[t.clientX-h.left-n.clientLeft,t.clientY-h.top-n.clientTop]}}return[t.pageX,t.pageY]}function Ie(t){return typeof t=="string"?new Gt([document.querySelectorAll(t)],[document.documentElement]):new Gt([de(t)],ge)}const Ce={passive:!1},Mt={capture:!0,passive:!1};function It(t){t.stopImmediatePropagation()}function pt(t){t.preventDefault(),t.stopImmediatePropagation()}function Zt(t){var n=t.document.documentElement,e=ot(t).on("dragstart.drag",pt,Mt);"onselectstart"in n?e.on("selectstart.drag",pt,Mt):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function te(t,n){var e=t.document.documentElement,s=ot(t).on("dragstart.drag",null);n&&(s.on("click.drag",pt,Mt),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in e?s.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const kt=t=>()=>t;function Et(t,{sourceEvent:n,subject:e,target:s,identifier:h,active:l,x:g,y:p,dx:M,dy:f,dispatch:w}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:e,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:h,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:g,enumerable:!0,configurable:!0},y:{value:p,enumerable:!0,configurable:!0},dx:{value:M,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:w}})}Et.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Ee(t){return!t.ctrlKey&&!t.button}function Ye(){return this.parentNode}function Xe(t,n){return n??{x:t.x,y:t.y}}function Fe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oe(){var t=Ee,n=Ye,e=Xe,s=Fe,h={},l=Xt("start","drag","end"),g=0,p,M,f,w,$=0;function y(c){c.on("mousedown.drag",b).filter(s).on("touchstart.drag",d).on("touchmove.drag",r,Ce).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(c,N){if(!(w||!t.call(this,c,N))){var j=_(this,n.call(this,c,N),c,N,"mouse");j&&(ot(c.view).on("mousemove.drag",k,Mt).on("mouseup.drag",m,Mt),Zt(c.view),It(c),f=!1,p=c.clientX,M=c.clientY,j("start",c))}}function k(c){if(pt(c),!f){var N=c.clientX-p,j=c.clientY-M;f=N*N+j*j>$}h.mouse("drag",c)}function m(c){ot(c.view).on("mousemove.drag mouseup.drag",null),te(c.view,f),pt(c),h.mouse("end",c)}function d(c,N){if(t.call(this,c,N)){var j=c.changedTouches,D=n.call(this,c,N),I=j.length,F,C;for(F=0;F<I;++F)(C=_(this,D,c,N,j[F].identifier,j[F]))&&(It(c),C("start",c,j[F]))}}function r(c){var N=c.changedTouches,j=N.length,D,I;for(D=0;D<j;++D)(I=h[N[D].identifier])&&(pt(c),I("drag",c,N[D]))}function x(c){var N=c.changedTouches,j=N.length,D,I;for(w&&clearTimeout(w),w=setTimeout(function(){w=null},500),D=0;D<j;++D)(I=h[N[D].identifier])&&(It(c),I("end",c,N[D]))}function _(c,N,j,D,I,F){var C=l.copy(),L=it(F||j,N),K,J,o;if((o=e.call(c,new Et("beforestart",{sourceEvent:j,target:y,identifier:I,active:g,x:L[0],y:L[1],dx:0,dy:0,dispatch:C}),D))!=null)return K=o.x-L[0]||0,J=o.y-L[1]||0,function v(a,u,i){var z=L,A;switch(a){case"start":h[I]=v,A=g++;break;case"end":delete h[I],--g;case"drag":L=it(i||u,N),A=g;break}C.call(a,c,new Et(a,{sourceEvent:u,subject:o,target:y,identifier:I,active:A,x:L[0]+K,y:L[1]+J,dx:L[0]-z[0],dy:L[1]-z[1],dispatch:C}),D)}}return y.filter=function(c){return arguments.length?(t=typeof c=="function"?c:kt(!!c),y):t},y.container=function(c){return arguments.length?(n=typeof c=="function"?c:kt(c),y):n},y.subject=function(c){return arguments.length?(e=typeof c=="function"?c:kt(c),y):e},y.touchable=function(c){return arguments.length?(s=typeof c=="function"?c:kt(!!c),y):s},y.on=function(){var c=l.on.apply(l,arguments);return c===l?y:c},y.clickDistance=function(c){return arguments.length?($=(c=+c)*c,y):Math.sqrt($)},y}const Tt=t=>()=>t;function Be(t,{sourceEvent:n,target:e,transform:s,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:h}})}function Ct(t){t.stopImmediatePropagation()}function _t(t){t.preventDefault(),t.stopImmediatePropagation()}function Le(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Re(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Jt(){return this.__zoom||Ft}function Ve(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function qe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ge(t,n,e){var s=t.invertX(n[0][0])-e[0][0],h=t.invertX(n[1][0])-e[1][0],l=t.invertY(n[0][1])-e[0][1],g=t.invertY(n[1][1])-e[1][1];return t.translate(h>s?(s+h)/2:Math.min(0,s)||Math.max(0,h),g>l?(l+g)/2:Math.min(0,l)||Math.max(0,g))}function Ue(){var t=Le,n=Re,e=Ge,s=Ve,h=qe,l=[0,1/0],g=[[-1/0,-1/0],[1/0,1/0]],p=250,M=De,f=Xt("start","zoom","end"),w,$,y,b=500,k=150,m=0,d=10;function r(o){o.property("__zoom",Jt).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",C).filter(h).on("touchstart.zoom",L).on("touchmove.zoom",K).on("touchend.zoom touchcancel.zoom",J).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}r.transform=function(o,v,a,u){var i=o.selection?o.selection():o;i.property("__zoom",Jt),o!==i?N(o,v,a,u):i.interrupt().each(function(){j(this,arguments).event(u).start().zoom(null,typeof v=="function"?v.apply(this,arguments):v).end()})},r.scaleBy=function(o,v,a,u){r.scaleTo(o,function(){var i=this.__zoom.k,z=typeof v=="function"?v.apply(this,arguments):v;return i*z},a,u)},r.scaleTo=function(o,v,a,u){r.transform(o,function(){var i=n.apply(this,arguments),z=this.__zoom,A=a==null?c(i):typeof a=="function"?a.apply(this,arguments):a,S=z.invert(A),P=typeof v=="function"?v.apply(this,arguments):v;return e(_(x(z,P),A,S),i,g)},a,u)},r.translateBy=function(o,v,a,u){r.transform(o,function(){return e(this.__zoom.translate(typeof v=="function"?v.apply(this,arguments):v,typeof a=="function"?a.apply(this,arguments):a),n.apply(this,arguments),g)},null,u)},r.translateTo=function(o,v,a,u,i){r.transform(o,function(){var z=n.apply(this,arguments),A=this.__zoom,S=u==null?c(z):typeof u=="function"?u.apply(this,arguments):u;return e(Ft.translate(S[0],S[1]).scale(A.k).translate(typeof v=="function"?-v.apply(this,arguments):-v,typeof a=="function"?-a.apply(this,arguments):-a),z,g)},u,i)};function x(o,v){return v=Math.max(l[0],Math.min(l[1],v)),v===o.k?o:new Dt(v,o.x,o.y)}function _(o,v,a){var u=v[0]-a[0]*o.k,i=v[1]-a[1]*o.k;return u===o.x&&i===o.y?o:new Dt(o.k,u,i)}function c(o){return[(+o[0][0]+ +o[1][0])/2,(+o[0][1]+ +o[1][1])/2]}function N(o,v,a,u){o.on("start.zoom",function(){j(this,arguments).event(u).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(u).end()}).tween("zoom",function(){var i=this,z=arguments,A=j(i,z).event(u),S=n.apply(i,z),P=a==null?c(S):typeof a=="function"?a.apply(i,z):a,G=Math.max(S[1][0]-S[0][0],S[1][1]-S[0][1]),O=i.__zoom,R=typeof v=="function"?v.apply(i,z):v,U=M(O.invert(P).concat(G/O.k),R.invert(P).concat(G/R.k));return function(B){if(B===1)B=R;else{var V=U(B),rt=G/V[2];B=new Dt(rt,P[0]-V[0]*rt,P[1]-V[1]*rt)}A.zoom(null,B)}})}function j(o,v,a){return!a&&o.__zooming||new D(o,v)}function D(o,v){this.that=o,this.args=v,this.active=0,this.sourceEvent=null,this.extent=n.apply(o,v),this.taps=0}D.prototype={event:function(o){return o&&(this.sourceEvent=o),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(o,v){return this.mouse&&o!=="mouse"&&(this.mouse[1]=v.invert(this.mouse[0])),this.touch0&&o!=="touch"&&(this.touch0[1]=v.invert(this.touch0[0])),this.touch1&&o!=="touch"&&(this.touch1[1]=v.invert(this.touch1[0])),this.that.__zoom=v,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(o){var v=ot(this.that).datum();f.call(o,this.that,new Be(o,{sourceEvent:this.sourceEvent,target:r,transform:this.that.__zoom,dispatch:f}),v)}};function I(o,...v){if(!t.apply(this,arguments))return;var a=j(this,v).event(o),u=this.__zoom,i=Math.max(l[0],Math.min(l[1],u.k*Math.pow(2,s.apply(this,arguments)))),z=it(o);if(a.wheel)(a.mouse[0][0]!==z[0]||a.mouse[0][1]!==z[1])&&(a.mouse[1]=u.invert(a.mouse[0]=z)),clearTimeout(a.wheel);else{if(u.k===i)return;a.mouse=[z,u.invert(z)],Pt(this),a.start()}_t(o),a.wheel=setTimeout(A,k),a.zoom("mouse",e(_(x(u,i),a.mouse[0],a.mouse[1]),a.extent,g));function A(){a.wheel=null,a.end()}}function F(o,...v){if(y||!t.apply(this,arguments))return;var a=o.currentTarget,u=j(this,v,!0).event(o),i=ot(o.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",G,!0),z=it(o,a),A=o.clientX,S=o.clientY;Zt(o.view),Ct(o),u.mouse=[z,this.__zoom.invert(z)],Pt(this),u.start();function P(O){if(_t(O),!u.moved){var R=O.clientX-A,U=O.clientY-S;u.moved=R*R+U*U>m}u.event(O).zoom("mouse",e(_(u.that.__zoom,u.mouse[0]=it(O,a),u.mouse[1]),u.extent,g))}function G(O){i.on("mousemove.zoom mouseup.zoom",null),te(O.view,u.moved),_t(O),u.event(O).end()}}function C(o,...v){if(t.apply(this,arguments)){var a=this.__zoom,u=it(o.changedTouches?o.changedTouches[0]:o,this),i=a.invert(u),z=a.k*(o.shiftKey?.5:2),A=e(_(x(a,z),u,i),n.apply(this,v),g);_t(o),p>0?ot(this).transition().duration(p).call(N,A,u,o):ot(this).call(r.transform,A,u,o)}}function L(o,...v){if(t.apply(this,arguments)){var a=o.touches,u=a.length,i=j(this,v,o.changedTouches.length===u).event(o),z,A,S,P;for(Ct(o),A=0;A<u;++A)S=a[A],P=it(S,this),P=[P,this.__zoom.invert(P),S.identifier],i.touch0?!i.touch1&&i.touch0[2]!==P[2]&&(i.touch1=P,i.taps=0):(i.touch0=P,z=!0,i.taps=1+!!w);w&&(w=clearTimeout(w)),z&&(i.taps<2&&($=P[0],w=setTimeout(function(){w=null},b)),Pt(this),i.start())}}function K(o,...v){if(this.__zooming){var a=j(this,v).event(o),u=o.changedTouches,i=u.length,z,A,S,P;for(_t(o),z=0;z<i;++z)A=u[z],S=it(A,this),a.touch0&&a.touch0[2]===A.identifier?a.touch0[0]=S:a.touch1&&a.touch1[2]===A.identifier&&(a.touch1[0]=S);if(A=a.that.__zoom,a.touch1){var G=a.touch0[0],O=a.touch0[1],R=a.touch1[0],U=a.touch1[1],B=(B=R[0]-G[0])*B+(B=R[1]-G[1])*B,V=(V=U[0]-O[0])*V+(V=U[1]-O[1])*V;A=x(A,Math.sqrt(B/V)),S=[(G[0]+R[0])/2,(G[1]+R[1])/2],P=[(O[0]+U[0])/2,(O[1]+U[1])/2]}else if(a.touch0)S=a.touch0[0],P=a.touch0[1];else return;a.zoom("touch",e(_(A,S,P),a.extent,g))}}function J(o,...v){if(this.__zooming){var a=j(this,v).event(o),u=o.changedTouches,i=u.length,z,A;for(Ct(o),y&&clearTimeout(y),y=setTimeout(function(){y=null},b),z=0;z<i;++z)A=u[z],a.touch0&&a.touch0[2]===A.identifier?delete a.touch0:a.touch1&&a.touch1[2]===A.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),a.taps===2&&(A=it(A,this),Math.hypot($[0]-A[0],$[1]-A[1])<d)){var S=ot(this).on("dblclick.zoom");S&&S.apply(this,arguments)}}}return r.wheelDelta=function(o){return arguments.length?(s=typeof o=="function"?o:Tt(+o),r):s},r.filter=function(o){return arguments.length?(t=typeof o=="function"?o:Tt(!!o),r):t},r.touchable=function(o){return arguments.length?(h=typeof o=="function"?o:Tt(!!o),r):h},r.extent=function(o){return arguments.length?(n=typeof o=="function"?o:Tt([[+o[0][0],+o[0][1]],[+o[1][0],+o[1][1]]]),r):n},r.scaleExtent=function(o){return arguments.length?(l[0]=+o[0],l[1]=+o[1],r):[l[0],l[1]]},r.translateExtent=function(o){return arguments.length?(g[0][0]=+o[0][0],g[1][0]=+o[1][0],g[0][1]=+o[0][1],g[1][1]=+o[1][1],r):[[g[0][0],g[0][1]],[g[1][0],g[1][1]]]},r.constrain=function(o){return arguments.length?(e=o,r):e},r.duration=function(o){return arguments.length?(p=+o,r):p},r.interpolate=function(o){return arguments.length?(M=o,r):M},r.on=function(){var o=f.on.apply(f,arguments);return o===f?r:o},r.clickDistance=function(o){return arguments.length?(m=(o=+o)*o,r):Math.sqrt(m)},r.tapDistance=function(o){return arguments.length?(d=+o,r):d},r}const Je=ve("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function Ke(t,n){var e,s=1;t==null&&(t=0),n==null&&(n=0);function h(){var l,g=e.length,p,M=0,f=0;for(l=0;l<g;++l)p=e[l],M+=p.x,f+=p.y;for(M=(M/g-t)*s,f=(f/g-n)*s,l=0;l<g;++l)p=e[l],p.x-=M,p.y-=f}return h.initialize=function(l){e=l},h.x=function(l){return arguments.length?(t=+l,h):t},h.y=function(l){return arguments.length?(n=+l,h):n},h.strength=function(l){return arguments.length?(s=+l,h):s},h}function Qe(t){const n=+this._x.call(null,t),e=+this._y.call(null,t);return ee(this.cover(n,e),n,e,t)}function ee(t,n,e,s){if(isNaN(n)||isNaN(e))return t;var h,l=t._root,g={data:s},p=t._x0,M=t._y0,f=t._x1,w=t._y1,$,y,b,k,m,d,r,x;if(!l)return t._root=g,t;for(;l.length;)if((m=n>=($=(p+f)/2))?p=$:f=$,(d=e>=(y=(M+w)/2))?M=y:w=y,h=l,!(l=l[r=d<<1|m]))return h[r]=g,t;if(b=+t._x.call(null,l.data),k=+t._y.call(null,l.data),n===b&&e===k)return g.next=l,h?h[r]=g:t._root=g,t;do h=h?h[r]=new Array(4):t._root=new Array(4),(m=n>=($=(p+f)/2))?p=$:f=$,(d=e>=(y=(M+w)/2))?M=y:w=y;while((r=d<<1|m)===(x=(k>=y)<<1|b>=$));return h[x]=l,h[r]=g,t}function We(t){var n,e,s=t.length,h,l,g=new Array(s),p=new Array(s),M=1/0,f=1/0,w=-1/0,$=-1/0;for(e=0;e<s;++e)isNaN(h=+this._x.call(null,n=t[e]))||isNaN(l=+this._y.call(null,n))||(g[e]=h,p[e]=l,h<M&&(M=h),h>w&&(w=h),l<f&&(f=l),l>$&&($=l));if(M>w||f>$)return this;for(this.cover(M,f).cover(w,$),e=0;e<s;++e)ee(this,g[e],p[e],t[e]);return this}function He(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,s=this._y0,h=this._x1,l=this._y1;if(isNaN(e))h=(e=Math.floor(t))+1,l=(s=Math.floor(n))+1;else{for(var g=h-e||1,p=this._root,M,f;e>t||t>=h||s>n||n>=l;)switch(f=(n<s)<<1|t<e,M=new Array(4),M[f]=p,p=M,g*=2,f){case 0:h=e+g,l=s+g;break;case 1:e=h-g,l=s+g;break;case 2:h=e+g,s=l-g;break;case 3:e=h-g,s=l-g;break}this._root&&this._root.length&&(this._root=p)}return this._x0=e,this._y0=s,this._x1=h,this._y1=l,this}function Ze(){var t=[];return this.visit(function(n){if(!n.length)do t.push(n.data);while(n=n.next)}),t}function tn(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Z(t,n,e,s,h){this.node=t,this.x0=n,this.y0=e,this.x1=s,this.y1=h}function en(t,n,e){var s,h=this._x0,l=this._y0,g,p,M,f,w=this._x1,$=this._y1,y=[],b=this._root,k,m;for(b&&y.push(new Z(b,h,l,w,$)),e==null?e=1/0:(h=t-e,l=n-e,w=t+e,$=n+e,e*=e);k=y.pop();)if(!(!(b=k.node)||(g=k.x0)>w||(p=k.y0)>$||(M=k.x1)<h||(f=k.y1)<l))if(b.length){var d=(g+M)/2,r=(p+f)/2;y.push(new Z(b[3],d,r,M,f),new Z(b[2],g,r,d,f),new Z(b[1],d,p,M,r),new Z(b[0],g,p,d,r)),(m=(n>=r)<<1|t>=d)&&(k=y[y.length-1],y[y.length-1]=y[y.length-1-m],y[y.length-1-m]=k)}else{var x=t-+this._x.call(null,b.data),_=n-+this._y.call(null,b.data),c=x*x+_*_;if(c<e){var N=Math.sqrt(e=c);h=t-N,l=n-N,w=t+N,$=n+N,s=b.data}}return s}function nn(t){if(isNaN(w=+this._x.call(null,t))||isNaN($=+this._y.call(null,t)))return this;var n,e=this._root,s,h,l,g=this._x0,p=this._y0,M=this._x1,f=this._y1,w,$,y,b,k,m,d,r;if(!e)return this;if(e.length)for(;;){if((k=w>=(y=(g+M)/2))?g=y:M=y,(m=$>=(b=(p+f)/2))?p=b:f=b,n=e,!(e=e[d=m<<1|k]))return this;if(!e.length)break;(n[d+1&3]||n[d+2&3]||n[d+3&3])&&(s=n,r=d)}for(;e.data!==t;)if(h=e,!(e=e.next))return this;return(l=e.next)&&delete e.next,h?(l?h.next=l:delete h.next,this):n?(l?n[d]=l:delete n[d],(e=n[0]||n[1]||n[2]||n[3])&&e===(n[3]||n[2]||n[1]||n[0])&&!e.length&&(s?s[r]=e:this._root=e),this):(this._root=l,this)}function rn(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this}function an(){return this._root}function on(){var t=0;return this.visit(function(n){if(!n.length)do++t;while(n=n.next)}),t}function sn(t){var n=[],e,s=this._root,h,l,g,p,M;for(s&&n.push(new Z(s,this._x0,this._y0,this._x1,this._y1));e=n.pop();)if(!t(s=e.node,l=e.x0,g=e.y0,p=e.x1,M=e.y1)&&s.length){var f=(l+p)/2,w=(g+M)/2;(h=s[3])&&n.push(new Z(h,f,w,p,M)),(h=s[2])&&n.push(new Z(h,l,w,f,M)),(h=s[1])&&n.push(new Z(h,f,g,p,w)),(h=s[0])&&n.push(new Z(h,l,g,f,w))}return this}function un(t){var n=[],e=[],s;for(this._root&&n.push(new Z(this._root,this._x0,this._y0,this._x1,this._y1));s=n.pop();){var h=s.node;if(h.length){var l,g=s.x0,p=s.y0,M=s.x1,f=s.y1,w=(g+M)/2,$=(p+f)/2;(l=h[0])&&n.push(new Z(l,g,p,w,$)),(l=h[1])&&n.push(new Z(l,w,p,M,$)),(l=h[2])&&n.push(new Z(l,g,$,w,f)),(l=h[3])&&n.push(new Z(l,w,$,M,f))}e.push(s)}for(;s=e.pop();)t(s.node,s.x0,s.y0,s.x1,s.y1);return this}function ln(t){return t[0]}function cn(t){return arguments.length?(this._x=t,this):this._x}function fn(t){return t[1]}function hn(t){return arguments.length?(this._y=t,this):this._y}function Ot(t,n,e){var s=new Bt(n??ln,e??fn,NaN,NaN,NaN,NaN);return t==null?s:s.addAll(t)}function Bt(t,n,e,s,h,l){this._x=t,this._y=n,this._x0=e,this._y0=s,this._x1=h,this._y1=l,this._root=void 0}function Kt(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var tt=Ot.prototype=Bt.prototype;tt.copy=function(){var t=new Bt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,e,s;if(!n)return t;if(!n.length)return t._root=Kt(n),t;for(e=[{source:n,target:t._root=new Array(4)}];n=e.pop();)for(var h=0;h<4;++h)(s=n.source[h])&&(s.length?e.push({source:s,target:n.target[h]=new Array(4)}):n.target[h]=Kt(s));return t};tt.add=Qe;tt.addAll=We;tt.cover=He;tt.data=Ze;tt.extent=tn;tt.find=en;tt.remove=nn;tt.removeAll=rn;tt.root=an;tt.size=on;tt.visit=sn;tt.visitAfter=un;tt.x=cn;tt.y=hn;function dt(t){return function(){return t}}function ft(t){return(t()-.5)*1e-6}function gn(t){return t.x+t.vx}function dn(t){return t.y+t.vy}function vn(t){var n,e,s,h=1,l=1;typeof t!="function"&&(t=dt(t==null?1:+t));function g(){for(var f,w=n.length,$,y,b,k,m,d,r=0;r<l;++r)for($=Ot(n,gn,dn).visitAfter(p),f=0;f<w;++f)y=n[f],m=e[y.index],d=m*m,b=y.x+y.vx,k=y.y+y.vy,$.visit(x);function x(_,c,N,j,D){var I=_.data,F=_.r,C=m+F;if(I){if(I.index>y.index){var L=b-I.x-I.vx,K=k-I.y-I.vy,J=L*L+K*K;J<C*C&&(L===0&&(L=ft(s),J+=L*L),K===0&&(K=ft(s),J+=K*K),J=(C-(J=Math.sqrt(J)))/J*h,y.vx+=(L*=J)*(C=(F*=F)/(d+F)),y.vy+=(K*=J)*C,I.vx-=L*(C=1-C),I.vy-=K*C)}return}return c>b+C||j<b-C||N>k+C||D<k-C}}function p(f){if(f.data)return f.r=e[f.data.index];for(var w=f.r=0;w<4;++w)f[w]&&f[w].r>f.r&&(f.r=f[w].r)}function M(){if(n){var f,w=n.length,$;for(e=new Array(w),f=0;f<w;++f)$=n[f],e[$.index]=+t($,f,n)}}return g.initialize=function(f,w){n=f,s=w,M()},g.iterations=function(f){return arguments.length?(l=+f,g):l},g.strength=function(f){return arguments.length?(h=+f,g):h},g.radius=function(f){return arguments.length?(t=typeof f=="function"?f:dt(+f),M(),g):t},g}function mn(t){return t.index}function Qt(t,n){var e=t.get(n);if(!e)throw new Error("node not found: "+n);return e}function pn(t){var n=mn,e=$,s,h=dt(30),l,g,p,M,f,w=1;t==null&&(t=[]);function $(d){return 1/Math.min(p[d.source.index],p[d.target.index])}function y(d){for(var r=0,x=t.length;r<w;++r)for(var _=0,c,N,j,D,I,F,C;_<x;++_)c=t[_],N=c.source,j=c.target,D=j.x+j.vx-N.x-N.vx||ft(f),I=j.y+j.vy-N.y-N.vy||ft(f),F=Math.sqrt(D*D+I*I),F=(F-l[_])/F*d*s[_],D*=F,I*=F,j.vx-=D*(C=M[_]),j.vy-=I*C,N.vx+=D*(C=1-C),N.vy+=I*C}function b(){if(g){var d,r=g.length,x=t.length,_=new Map(g.map((N,j)=>[n(N,j,g),N])),c;for(d=0,p=new Array(r);d<x;++d)c=t[d],c.index=d,typeof c.source!="object"&&(c.source=Qt(_,c.source)),typeof c.target!="object"&&(c.target=Qt(_,c.target)),p[c.source.index]=(p[c.source.index]||0)+1,p[c.target.index]=(p[c.target.index]||0)+1;for(d=0,M=new Array(x);d<x;++d)c=t[d],M[d]=p[c.source.index]/(p[c.source.index]+p[c.target.index]);s=new Array(x),k(),l=new Array(x),m()}}function k(){if(g)for(var d=0,r=t.length;d<r;++d)s[d]=+e(t[d],d,t)}function m(){if(g)for(var d=0,r=t.length;d<r;++d)l[d]=+h(t[d],d,t)}return y.initialize=function(d,r){g=d,f=r,b()},y.links=function(d){return arguments.length?(t=d,b(),y):t},y.id=function(d){return arguments.length?(n=d,y):n},y.iterations=function(d){return arguments.length?(w=+d,y):w},y.strength=function(d){return arguments.length?(e=typeof d=="function"?d:dt(+d),k(),y):e},y.distance=function(d){return arguments.length?(h=typeof d=="function"?d:dt(+d),m(),y):h},y}const yn=1664525,bn=1013904223,Wt=4294967296;function xn(){let t=1;return()=>(t=(yn*t+bn)%Wt)/Wt}function _n(t){return t.x}function wn(t){return t.y}var Mn=10,$n=Math.PI*(3-Math.sqrt(5));function zn(t){var n,e=1,s=.001,h=1-Math.pow(s,1/300),l=0,g=.6,p=new Map,M=me($),f=Xt("tick","end"),w=xn();t==null&&(t=[]);function $(){y(),f.call("tick",n),e<s&&(M.stop(),f.call("end",n))}function y(m){var d,r=t.length,x;m===void 0&&(m=1);for(var _=0;_<m;++_)for(e+=(l-e)*h,p.forEach(function(c){c(e)}),d=0;d<r;++d)x=t[d],x.fx==null?x.x+=x.vx*=g:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=g:(x.y=x.fy,x.vy=0);return n}function b(){for(var m=0,d=t.length,r;m<d;++m){if(r=t[m],r.index=m,r.fx!=null&&(r.x=r.fx),r.fy!=null&&(r.y=r.fy),isNaN(r.x)||isNaN(r.y)){var x=Mn*Math.sqrt(.5+m),_=m*$n;r.x=x*Math.cos(_),r.y=x*Math.sin(_)}(isNaN(r.vx)||isNaN(r.vy))&&(r.vx=r.vy=0)}}function k(m){return m.initialize&&m.initialize(t,w),m}return b(),n={tick:y,restart:function(){return M.restart($),n},stop:function(){return M.stop(),n},nodes:function(m){return arguments.length?(t=m,b(),p.forEach(k),n):t},alpha:function(m){return arguments.length?(e=+m,n):e},alphaMin:function(m){return arguments.length?(s=+m,n):s},alphaDecay:function(m){return arguments.length?(h=+m,n):+h},alphaTarget:function(m){return arguments.length?(l=+m,n):l},velocityDecay:function(m){return arguments.length?(g=1-m,n):1-g},randomSource:function(m){return arguments.length?(w=m,p.forEach(k),n):w},force:function(m,d){return arguments.length>1?(d==null?p.delete(m):p.set(m,k(d)),n):p.get(m)},find:function(m,d,r){var x=0,_=t.length,c,N,j,D,I;for(r==null?r=1/0:r*=r,x=0;x<_;++x)D=t[x],c=m-D.x,N=d-D.y,j=c*c+N*N,j<r&&(I=D,r=j);return I},on:function(m,d){return arguments.length>1?(f.on(m,d),n):f.on(m)}}}function kn(){var t,n,e,s,h=dt(-30),l,g=1,p=1/0,M=.81;function f(b){var k,m=t.length,d=Ot(t,_n,wn).visitAfter($);for(s=b,k=0;k<m;++k)n=t[k],d.visit(y)}function w(){if(t){var b,k=t.length,m;for(l=new Array(k),b=0;b<k;++b)m=t[b],l[m.index]=+h(m,b,t)}}function $(b){var k=0,m,d,r=0,x,_,c;if(b.length){for(x=_=c=0;c<4;++c)(m=b[c])&&(d=Math.abs(m.value))&&(k+=m.value,r+=d,x+=d*m.x,_+=d*m.y);b.x=x/r,b.y=_/r}else{m=b,m.x=m.data.x,m.y=m.data.y;do k+=l[m.data.index];while(m=m.next)}b.value=k}function y(b,k,m,d){if(!b.value)return!0;var r=b.x-n.x,x=b.y-n.y,_=d-k,c=r*r+x*x;if(_*_/M<c)return c<p&&(r===0&&(r=ft(e),c+=r*r),x===0&&(x=ft(e),c+=x*x),c<g&&(c=Math.sqrt(g*c)),n.vx+=r*b.value*s/c,n.vy+=x*b.value*s/c),!0;if(b.length||c>=p)return;(b.data!==n||b.next)&&(r===0&&(r=ft(e),c+=r*r),x===0&&(x=ft(e),c+=x*x),c<g&&(c=Math.sqrt(g*c)));do b.data!==n&&(_=l[b.data.index]*s/c,n.vx+=r*_,n.vy+=x*_);while(b=b.next)}return f.initialize=function(b,k){t=b,e=k,w()},f.strength=function(b){return arguments.length?(h=typeof b=="function"?b:dt(+b),w(),f):h},f.distanceMin=function(b){return arguments.length?(g=b*b,f):Math.sqrt(g)},f.distanceMax=function(b){return arguments.length?(p=b*b,f):Math.sqrt(p)},f.theta=function(b){return arguments.length?(M=b*b,f):Math.sqrt(M)},f}var Tn=W('<div class="container"><canvas class="svelte-131g6tr"></canvas></div>');function Nn(t,n){Nt(n,!1);const e=()=>wt(f,"$width",l),s=()=>wt(w,"$height",l),h=()=>wt(M,"$data",l),[l,g]=Yt(),p=ct(),{data:M,width:f,height:w}=ae("LayerCake");let $={zoom:Ue,zoomIdentity:Ft,scaleLinear:ye,scaleOrdinal:pe,schemeCategory10:Je,select:ot,selectAll:Ie,pointer:it,drag:Oe,forceSimulation:zn,forceLink:pn,forceManyBody:kn,forceCenter:Ke,forceCollide:vn},y=ct(),b=e(),k=s();const m=5,d=$.scaleOrdinal($.schemeCategory10);let r=$.zoomIdentity,x,_;const c=M.subscribe(async v=>{await ie(),N()});fe(()=>{c()});function N(){x&&(x.nodes([]).force("link",$.forceLink([])),x=void 0),_=T(y).getContext("2d"),K(),x=$.forceSimulation(T(p).nodes).force("link",$.forceLink(T(p).links).id(v=>v.name)).force("charge",$.forceManyBody()).force("center",$.forceCenter(e()/2,s()/2)).on("tick",j),$.select(_.canvas).on("mousemove",v=>{const a=$.pointer(v),u=x.find(r.invertX(a[0]),r.invertY(a[1]),m);u?_.canvas.title=u.index:_.canvas.title=""}),$.select(T(y)).call($.drag().container(T(y)).subject(I).on("start",F).on("drag",C).on("end",L)).call($.zoom().scaleExtent([1/10,8]).on("zoom",D))}function j(){_.save(),_.clearRect(0,0,_.canvas.width,_.canvas.height),_.strokeStyle="#999",_.strokeRect(0,0,e(),s()),_.translate(r.x,r.y),_.scale(r.k,r.k),T(p).links.forEach(v=>{if(!(v.source.name=="__broker__"||v.target.name=="__broker__")){_.beginPath();var a=v.target.x-v.source.x,u=v.target.y-v.source.y,i=Math.atan2(u,a),z=m;_.moveTo(v.source.x,v.source.y),_.lineTo(v.target.x-Math.cos(i)*m*1.2,v.target.y-Math.sin(i)*m*1.2),_.lineTo(v.target.x-Math.cos(i)*m*1.2-z*Math.cos(i-Math.PI/6),v.target.y-Math.sin(i)*m*1.2-z*Math.sin(i-Math.PI/6)),_.moveTo(v.target.x-Math.cos(i)*m*1.2,v.target.y-Math.sin(i)*m*1.2),_.lineTo(v.target.x-Math.cos(i)*m*1.2-z*Math.cos(i+Math.PI/6),v.target.y-Math.sin(i)*m*1.2-z*Math.sin(i+Math.PI/6)),_.globalAlpha=.6,_.strokeStyle="#999",_.lineWidth=Math.sqrt(v.value),_.stroke(),_.globalAlpha=1,_.fillStyle="#aaa",_.fillText(v.label,v.target.x-Math.cos(i)*Math.abs(a)/2,v.target.y-Math.sin(i)*Math.abs(u)/2),_.globalAlpha=1}}),T(p).nodes.forEach((v,a)=>{v.name!="__broker__"&&(_.beginPath(),_.arc(v.x,v.y,m,0,2*Math.PI),_.strokeStyle="#fff",_.lineWidth=1.5,_.stroke(),_.fillStyle=d(v.group),_.fill(),_.fillText(v.name,v.x+10,v.y+3))}),_.restore()}function D(v){r=v.transform,j()}function I(v){const a=x.find(r.invertX(v.x),r.invertY(v.y),m);return a&&(a.x=r.applyX(a.x),a.y=r.applyY(a.y)),a}function F(v){v.active||x.alphaTarget(.3).restart(),v.subject.fx=r.invertX(v.subject.x),v.subject.fy=r.invertY(v.subject.y)}function C(v){v.subject.fx=r.invertX(v.x),v.subject.fy=r.invertY(v.y)}function L(v){v.active||x.alphaTarget(0),v.subject.fx=null,v.subject.fy=null}function K(){({w:b,h:k}=T(y))}ht(()=>h(),()=>{st(p,h().length==0?{nodes:[],links:[]}:h())}),Ht(),jt();var J=Tn();at("resize",oe,K);var o=X(J);se(o,v=>st(y,v),()=>T(y)),E(J),gt(()=>{Vt(o,"width",e()),Vt(o,"height",s())}),Q(t,J),At(),g()}var An=W('<div class="flex flex-col h-[55vh] py-4"><div class="grow grid grid-areas-layout justify-items-stretch my-auto"><!></div></div>');function jn(t,n){Nt(n,!1);const e=()=>wt(H,"$data",s),[s,h]=Yt();function l(w,$){let y=[],b=[],k={};y.push({name:"__broker__",group:0});for(const m of $.cores)for(const d of m.federates){d.publications===void 0&&(d.publications=[]);for(const r of d.publications){y.push({name:`${r.federate}-${r.handle}`,federate:d.attributes.name,group:1}),r.targets===void 0&&(r.targets=[]),k[`${r.federate}-${r.handle}`]=r.key;for(const x of r.targets)b.push({source:`${r.federate}-${r.handle}`,target:`${x.federate}-${x.handle}`,label:k[`${r.federate}-${r.handle}`],ignore:!1})}}for(const m of $.cores)for(const d of m.federates){d.inputs===void 0&&(d.inputs=[]);for(const r of d.inputs){y.push({name:`${r.federate}-${r.handle}`,federate:d.attributes.name,group:2}),r.sources===void 0&&(r.sources=[]);for(const x of r.sources)b.push({source:`${x.federate}-${x.handle}`,target:`${r.federate}-${r.handle}`,label:k[`${x.federate}-${x.handle}`],ignore:!1})}}return y=Array.from(new Set(y.map(JSON.stringify))).map(JSON.parse),b=Array.from(new Set(b.map(JSON.stringify))).map(JSON.parse),{nodes:y,links:b}}let g=ct();he(()=>{st(g,l(e().graphs.federate,e().graphs.data))}),jt();var p=An(),M=X(p),f=X(M);be(f,{get data(){return T(g)},children:(w,$)=>{Nn(w,{})},$$slots:{default:!0}}),E(M),E(p),Q(t,p),At(),h()}var Sn=W(`<p>Drag 'n' drop a observer generated "helics-cli.sqlite" file here, or click to select a
            "helics-cli.sqlite" file</p>`),Dn=W('<div class="my-4"> </div>'),Pn=W('<h3 class="font-medium leading-tight text-2xl mt-0 mb-2 text-blue-600">Topology</h3> <!>',1),In=W('<h3 class="font-medium leading-tight text-2xl mt-0 mb-2 text-blue-600">Cores</h3> <!>',1),Cn=W('<h3 class="font-medium leading-tight text-2xl mt-0 mb-2 text-blue-600">Federates</h3> <!>',1),En=W('<h3 class="font-medium leading-tight text-2xl mt-0 mb-2 text-blue-600">Publications</h3> <!>',1),Yn=W('<h3 class="font-medium leading-tight text-2xl mt-0 mb-2 text-blue-600">Inputs</h3> <!>',1),Xn=W('<h3 class="font-medium leading-tight text-2xl mt-0 mb-2 text-blue-600">data</h3> <!>',1),Fn=W('<div class="flex w-7/8 flex-col mt-6 mx-8"><div class="overflow-x-auto sm:-mx-6 lg:-mx-8"><div class="py-2 inline-block w-full sm:px-6 lg:px-8"><div class="flex space-x-4"><!> <button type="button" class="inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out">Clear</button></div> <!> <!> <!> <!> <!> <!> <!></div></div></div>');function tr(t,n){Nt(n,!1);const e=()=>wt(H,"$data",s),[s,h]=Yt(),l="http://127.0.0.1:5000/api/observer";function g(a){for(const u of e().cores)if(u.id==a)return u.name}function p(a){for(const u of e().federates)if(u.id==a)return u.name}async function M(){nt(H,Y(e).systeminfo=await(await fetch(`${l}/systeminfo`)).json(),Y(e)),nt(H,Y(e).cores=await(await fetch(`${l}/cores`)).json(),Y(e)),nt(H,Y(e).federates=await(await fetch(`${l}/federates`)).json(),Y(e)),e().federates.map(i=>i.core_name=g(i.parent)),nt(H,Y(e).federates=e().federates,Y(e)),nt(H,Y(e).graphs=await(await fetch(`${l}/graphs`)).json(),Y(e)),nt(H,Y(e).publications=await(await fetch(`${l}/publications`)).json(),Y(e)),e().publications.map(i=>{i.source_name=p(i.source),i.target_name=p(i.target)}),nt(H,Y(e).publications=e().publications,Y(e)),nt(H,Y(e).inputs=await(await fetch(`${l}/inputs`)).json(),Y(e)),e().inputs.map(i=>{i.source_name=p(i.source),i.target_name=p(i.target)}),nt(H,Y(e).inputs=e().inputs,Y(e));function a(i){return i=="id"?"ID":i=="simulation_time"?"Simulation Time":i}nt(H,Y(e).table=await(await fetch(`${l}/data`)).json(),Y(e));const u=[];for(const i of Object.keys(e().table[0]))i!="updated_at"&&u.push({field:i,sortName:i,title:a(i),show:!0,sort:"ascending",sortColor:"#fff",sortActive:!0,text_center:!1});nt(H,Y(e).table_columns=u,Y(e))}let f={accepted:[],rejected:[]};async function w(a){const{acceptedFiles:u,fileRejections:i}=a.detail;f.accepted=[...f.accepted,...u],f.rejected=[...f.rejected,...i];var z=new FormData;z.append("file",f.accepted.at(-1)),await fetch(`${l}/database`,{method:"POST",body:z}),await M()}async function $(a){const u=e().profile;ue(H,le),nt(H,Y(e).profile=u,Y(e))}jt();var y=Fn(),b=X(y),k=X(b),m=X(k),d=X(m);ce(d,{multiple:"false",$$events:{drop:w},children:(a,u)=>{var i=Sn();Q(a,i)},$$slots:{default:!0}});var r=q(d,2);E(m);var x=q(m,2);{var _=a=>{var u=Dn(),i=X(u);E(u),gt(()=>mt(i,`HELICS Version: ${e().systeminfo.version.string??""}`)),Q(a,u)};et(x,a=>{Object.keys(e().systeminfo).length!=0&&a(_)})}var c=q(x,2);{var N=a=>{var u=Pn(),i=q(ut(u),2);jn(i,{}),Q(a,u)};et(c,a=>{e().table.length!=0&&a(N)})}var j=q(c,2);{var D=a=>{var u=In(),i=q(ut(u),2);xt(i,{get data(){return e().cores},get columns(){return e().cores_columns}}),Q(a,u)};et(j,a=>{e().cores.length!=0&&a(D)})}var I=q(j,2);{var F=a=>{var u=Cn(),i=q(ut(u),2);xt(i,{get data(){return e().federates},get columns(){return e().federates_columns}}),Q(a,u)};et(I,a=>{e().federates.length!=0&&a(F)})}var C=q(I,2);{var L=a=>{var u=En(),i=q(ut(u),2);xt(i,{get data(){return e().publications},get columns(){return e().publications_columns}}),Q(a,u)};et(C,a=>{e().publications.length!=0&&a(L)})}var K=q(C,2);{var J=a=>{var u=Yn(),i=q(ut(u),2);xt(i,{get data(){return e().inputs},get columns(){return e().inputs_columns}}),Q(a,u)};et(K,a=>{e().inputs.length!=0&&a(J)})}var o=q(K,2);{var v=a=>{var u=Xn(),i=q(ut(u),2);xt(i,{get data(){return e().table},get columns(){return e().table_columns}}),Q(a,u)};et(o,a=>{e().table.length!=0&&a(v)})}E(k),E(b),E(y),at("click",r,$),Q(t,y),At(),h()}export{tr as component};
