
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>A quickstart guide to the Tracklib library &#8212; TrackLib 1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=3ee479438cf8b5e0d341" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=3ee479438cf8b5e0d341"></script>

    <script src="../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'usecase/Quickstart';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Summarize GPS information in a regular grid" href="Summarize.html" />
    <link rel="prev" title="Use Cases" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/TracklibLogo.png" class="logo__image only-light" alt="TrackLib 1.0 documentation - Home"/>
    <script>document.write(`<img src="../_static/TracklibLogo.png" class="logo__image only-dark" alt="TrackLib 1.0 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../userguide/gallery.html">
    Quick Examples
  </a>
</li>


<li class="nav-item pst-header-nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Use Cases
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/umrlastig/tracklib" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item pst-header-nav-item">
  <a class="nav-link nav-internal" href="../userguide/gallery.html">
    Quick Examples
  </a>
</li>


<li class="nav-item pst-header-nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Use Cases
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/umrlastig/tracklib" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">A quickstart guide to the Tracklib library</a></li>
<li class="toctree-l1"><a class="reference internal" href="Summarize.html">Summarize GPS information in a regular grid</a></li>
<li class="toctree-l1"><a class="reference internal" href="Switchbacks.html">Switchbacks identification</a></li>
<li class="toctree-l1"><a class="reference internal" href="KalmanFiltering.html">Kalman filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="StopPoints.html">Different stops detection methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="AggregatedTrajectory.html">Aggregated Trajectory: position errors and shape deviation</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Use Cases</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">A...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="A-quickstart-guide-to-the-Tracklib-library">
<h1>A quickstart guide to the Tracklib library<a class="headerlink" href="#A-quickstart-guide-to-the-Tracklib-library" title="Link to this heading">#</a></h1>
<section id="Or-how-to-load,-plot,-use-operators-to-compute-new-features,-summarize,-split-and-segment-on-a-GPS-track">
<h2>Or how to load, plot, use operators to compute new features, summarize, split and segment on a GPS track<a class="headerlink" href="#Or-how-to-load,-plot,-use-operators-to-compute-new-features,-summarize,-split-and-segment-on-a-GPS-track" title="Link to this heading">#</a></h2>
<p>Le but de ce quickstart est de montrer quelques commandes de base de la librairie tracklib. Les données d’une trace GPS qui représente un entrainement de course à pied sur une piste d’athletisme. Nous verrons donc comment charger les données, la représenter avec des indicateurs de base (vitesse, abscisse curviligne, etc.) afin d’y observer visuellement des phénomènes. Enfin nous verrons comment segmenter la trace suivant un changement de vitesse détecté.</p>
<section id="Import-de-la-librairie-tracklib">
<h3>Import de la librairie tracklib<a class="headerlink" href="#Import-de-la-librairie-tracklib" title="Link to this heading">#</a></h3>
<p>This task is only useful for the online notebook</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c1"># Import de tracklib</span>
<span class="n">module_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;../../..&#39;</span><span class="p">))</span>
<span class="k">if</span> <span class="n">module_path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">module_path</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">tracklib</span> <span class="k">as</span> <span class="nn">tkl</span>
</pre></div>
</div>
</div>
</section>
<section id="Read-GPS-data,-transform-coordinates-and-print-summary">
<h3>Read GPS data, transform coordinates and print summary<a class="headerlink" href="#Read-GPS-data,-transform-coordinates-and-print-summary" title="Link to this heading">#</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># ---------------------------------------------------</span>
<span class="c1"># Lecture des donnees</span>
<span class="c1"># ---------------------------------------------------</span>
<span class="n">tkl</span><span class="o">.</span><span class="n">ObsTime</span><span class="o">.</span><span class="n">setReadFormat</span><span class="p">(</span><span class="s2">&quot;4Y-2M-2DT2h:2m:2sZ&quot;</span><span class="p">)</span>
<span class="n">tracks</span> <span class="o">=</span> <span class="n">tkl</span><span class="o">.</span><span class="n">TrackReader</span><span class="o">.</span><span class="n">readFromFile</span><span class="p">(</span><span class="s1">&#39;../../../data/gpx/activity_5807084803.gpx&#39;</span><span class="p">,</span> <span class="n">tkl</span><span class="o">.</span><span class="n">TrackFormat</span><span class="p">({</span><span class="s1">&#39;ext&#39;</span><span class="p">:</span> <span class="s1">&#39;GPX&#39;</span><span class="p">}))</span>
<span class="n">trace</span> <span class="o">=</span> <span class="n">tracks</span><span class="o">.</span><span class="n">getTrack</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Transformation GEO coordinates to ENU</span>
<span class="n">trace</span><span class="o">.</span><span class="n">toENUCoords</span><span class="p">()</span>

<span class="c1"># Summary</span>
<span class="n">trace</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Warning: no reference point (base) provided for local projection to ENU coordinates. Arbitrarily used: [lon= 2.457019882, lat=48.830705099, hgt= 55.200]
-------------------------------------
GPS track #0 of user 0:
-------------------------------------
  Nb of pt(s):   190
  Ref sys id   : ENU
  Starting at  : 11/11/2020 15:39:54
  Ending at    : 11/11/2020 15:52:00
  Duration     : 726.000 s
  Length       : 2412.144 m
-------------------------------------

</pre></div></div>
</div>
</section>
<section id="Display-GPS-data">
<h3>Display GPS data<a class="headerlink" href="#Display-GPS-data" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Figure 1: in a cartesian reference frame</p></li>
<li><p>Figure 2: in a circular reference frame</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">1.3</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="c1"># GPS track in a cartesian coordinate system</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot2grid</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">trace</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;LINE&#39;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>

<span class="c1">#</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot2grid</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">trace</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;CIRCULAR&#39;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/usecase_Quickstart_6_0.png" src="../_images/usecase_Quickstart_6_0.png" />
</div>
</div>
</section>
<section id="Compute-local-speed">
<h3>Compute local speed<a class="headerlink" href="#Compute-local-speed" title="Link to this heading">#</a></h3>
<p>La méthode estimate_speed de l’objet track, calcule la vitesse locale en chaque point et stocke le résultat dans une AF “speed”.</p>
<p>La vitesse locale sur le premier (resp dernier) point est égale à la vitesse au premier (resp avant dernier) point. Pour les autres points, la vitesse est calculée suivant le point précédent et le suivant:</p>
<p>speed(i) = distance (point(i+1), point(i-1)) / temps écoulé entre point(i-1) et point (i+1)</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compute local speed</span>
<span class="n">trace</span><span class="o">.</span><span class="n">estimate_speed</span><span class="p">()</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<span class="c1"># Get all speed values</span>
<span class="n">SPEEDS</span> <span class="o">=</span> <span class="n">trace</span><span class="o">.</span><span class="n">getAnalyticalFeature</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">)</span>
<span class="c1"># Display the top ten speeds</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">SPEEDS</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

[4.55221497831179, 6.255327113366183, 5.896832339965242, 4.978192041525976, 5.334848802884135, 5.503904742096748, 4.541114070830664, 4.5655781449843715, 4.272215133699211, 4.3784508497879155]
</pre></div></div>
</div>
</section>
<section id="Different-plots-of-speed-observations">
<h3>Different plots of speed observations<a class="headerlink" href="#Different-plots-of-speed-observations" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Figure 1: whisker plot for each speed values</p></li>
<li><p>Figure 2: GPS data, color depends on speed</p></li>
<li><p>Figure 3: speed profil along the curvilinear abscissa</p></li>
</ul>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">1.3</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="c1">#</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot2grid</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">trace</span><span class="o">.</span><span class="n">plotAnalyticalFeature</span><span class="p">(</span><span class="s1">&#39;speed&#39;</span><span class="p">,</span> <span class="s1">&#39;BOXPLOT&#39;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>

<span class="c1"># Display the GPS data, color depends on speed</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot2grid</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">trace</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;POINT&#39;</span><span class="p">,</span> <span class="n">af_name</span><span class="o">=</span><span class="s1">&#39;speed&#39;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>

<span class="c1"># Display the speed profil along the curvilinear abscissa</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot2grid</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">colspan</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">trace</span><span class="o">.</span><span class="n">plotProfil</span><span class="p">(</span><span class="s1">&#39;SPATIAL_SPEED_PROFIL&#39;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">ax3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/usecase_Quickstart_10_0.png" src="../_images/usecase_Quickstart_10_0.png" />
</div>
</div>
</section>
<section id="Summarize-analytical-features-and-plot-it-in-images">
<h3>Summarize analytical features and plot it in images<a class="headerlink" href="#Summarize-analytical-features-and-plot-it-in-images" title="Link to this heading">#</a></h3>
<p>In tracklib library, it is possible to summarize into a regular grid features (quantitatives measures). For example, the average of speed, most dominant direction and the minimum of acceleration are computed per 3 by 3 meter cells.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">collection</span> <span class="o">=</span> <span class="n">tkl</span><span class="o">.</span><span class="n">TrackCollection</span><span class="p">([</span><span class="n">trace</span><span class="p">])</span>

<span class="n">trace</span><span class="o">.</span><span class="n">addAnalyticalFeature</span><span class="p">(</span><span class="n">tkl</span><span class="o">.</span><span class="n">acceleration</span><span class="p">)</span>
<span class="n">trace</span><span class="o">.</span><span class="n">addAnalyticalFeature</span><span class="p">(</span><span class="n">tkl</span><span class="o">.</span><span class="n">heading</span><span class="p">)</span>

<span class="n">af_algos</span> <span class="o">=</span> <span class="p">[</span><span class="n">tkl</span><span class="o">.</span><span class="n">speed</span><span class="p">,</span> <span class="n">tkl</span><span class="o">.</span><span class="n">heading</span><span class="p">,</span> <span class="n">tkl</span><span class="o">.</span><span class="n">acceleration</span><span class="p">]</span>
<span class="n">cell_operators</span> <span class="o">=</span> <span class="p">[</span><span class="n">tkl</span><span class="o">.</span><span class="n">co_avg</span><span class="p">,</span> <span class="n">tkl</span><span class="o">.</span><span class="n">co_dominant</span><span class="p">,</span> <span class="n">tkl</span><span class="o">.</span><span class="n">co_min</span><span class="p">]</span>
<span class="n">marge</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">raster</span> <span class="o">=</span> <span class="n">tkl</span><span class="o">.</span><span class="n">summarize</span><span class="p">(</span><span class="n">collection</span><span class="p">,</span> <span class="n">af_algos</span><span class="p">,</span> <span class="n">cell_operators</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">marge</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">top</span><span class="o">=</span><span class="mf">1.3</span><span class="p">,</span> <span class="n">wspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">hspace</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot2grid</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">raster</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;speed#co_avg&#39;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot2grid</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">raster</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;heading#co_dominant&#39;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>

<span class="n">ax3</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot2grid</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">raster</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s1">&#39;acceleration#co_min&#39;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="n">ax3</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/usecase_Quickstart_12_0.png" src="../_images/usecase_Quickstart_12_0.png" />
</div>
</div>
</section>
<section id="Compute-speed-change">
<h3>Compute speed change<a class="headerlink" href="#Compute-speed-change" title="Link to this heading">#</a></h3>
<p>Speed change is calculated as the absolute of the difference of speed between two consecutive points:</p>
<ol class="arabic">
<li><p><span class="math notranslate nohighlight">\(dv_i = v_i - v_{i-1}\)</span></p>
<p>we compute <span class="math notranslate nohighlight">\(dv\)</span> by using the differentiator operator</p>
</li>
<li><p><span class="math notranslate nohighlight">\(absdv_i = |dv_i|\)</span></p>
<p>follow up rectifier operator to have the absolute value of the difference</p>
</li>
</ol>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">trace</span><span class="o">.</span><span class="n">operate</span><span class="p">(</span><span class="n">tkl</span><span class="o">.</span><span class="n">Operator</span><span class="o">.</span><span class="n">DIFFERENTIATOR</span><span class="p">,</span> <span class="s2">&quot;speed&quot;</span><span class="p">,</span> <span class="s2">&quot;dv&quot;</span><span class="p">)</span>
<span class="n">trace</span><span class="o">.</span><span class="n">operate</span><span class="p">(</span><span class="n">tkl</span><span class="o">.</span><span class="n">Operator</span><span class="o">.</span><span class="n">RECTIFIER</span><span class="p">,</span> <span class="s2">&quot;dv&quot;</span><span class="p">,</span> <span class="s2">&quot;absdv&quot;</span><span class="p">)</span>

<span class="c1"># Speed change according to the curvilinear abscissa</span>
<span class="n">trace</span><span class="o">.</span><span class="n">plotAnalyticalFeature</span><span class="p">(</span><span class="s2">&quot;absdv&quot;</span><span class="p">,</span> <span class="s2">&quot;PLOT&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/usecase_Quickstart_14_0.png" src="../_images/usecase_Quickstart_14_0.png" />
</div>
</div>
</section>
<section id="Segmentation">
<h3>Segmentation<a class="headerlink" href="#Segmentation" title="Link to this heading">#</a></h3>
<p>Once the speed change marker is calculed, we can split the track on a collection of tracks. The marker is called here <span class="math notranslate nohighlight">\(speed_decoup\)</span>. We cut the track when the speed change is under the threshold 1.5 meter per second. If the track splitted have less 50 points, we don’t keep it.</p>
<p>Next, we show the tracks segmented and interpolated with the spline method. Some indicators on the speed are calculated at the same time.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#  Segmentation</span>
<span class="n">tkl</span><span class="o">.</span><span class="n">segmentation</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;absdv&quot;</span><span class="p">],</span> <span class="s2">&quot;speed_decoup&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">])</span>

<span class="c1"># ------------------------------------------------------------------</span>
<span class="c1"># + récupération d&#39;un sous-ensemble de traces</span>
<span class="c1"># + interpolation/lissage + ré-estimation des vitesses...</span>
<span class="c1"># ------------------------------------------------------------------</span>
<span class="n">segmentedTracks</span> <span class="o">=</span> <span class="n">tkl</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="s2">&quot;speed_decoup&quot;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

<span class="c1"># Affichage</span>
<span class="n">COLORS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;k-&#39;</span><span class="p">,</span><span class="s1">&#39;r-&#39;</span><span class="p">,</span><span class="s1">&#39;g-&#39;</span><span class="p">,</span><span class="s1">&#39;b-&#39;</span><span class="p">,</span><span class="s1">&#39;y-&#39;</span><span class="p">,</span><span class="s1">&#39;m-&#39;</span><span class="p">,</span><span class="s1">&#39;c-&#39;</span><span class="p">]</span>

<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">tkl</span><span class="o">.</span><span class="n">SPLINE_PENALIZATION</span> <span class="o">=</span> <span class="mf">1e-2</span>
<span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="n">segmentedTracks</span><span class="p">:</span>
    <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">track</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">tkl</span><span class="o">.</span><span class="n">ALGO_THIN_SPLINES</span><span class="p">,</span> <span class="n">tkl</span><span class="o">.</span><span class="n">MODE_SPATIAL</span><span class="p">)</span>
    <span class="n">track</span><span class="o">.</span><span class="n">estimate_speed</span><span class="p">()</span>
    <span class="n">diff</span> <span class="o">=</span> <span class="n">track</span><span class="o">.</span><span class="n">getLastObs</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">-</span> <span class="n">track</span><span class="o">.</span><span class="n">getFirstObs</span><span class="p">()</span><span class="o">.</span><span class="n">timestamp</span>
    <span class="n">v</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">track</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="o">/</span><span class="n">diff</span><span class="o">*</span><span class="mf">3.6</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">vm</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">track</span><span class="o">.</span><span class="n">operate</span><span class="p">(</span><span class="n">tkl</span><span class="o">.</span><span class="n">Operator</span><span class="o">.</span><span class="n">MAX</span><span class="p">,</span> <span class="s2">&quot;speed&quot;</span><span class="p">)</span><span class="o">*</span><span class="mf">3.6</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">vc</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mi">100</span><span class="o">/</span><span class="p">(</span><span class="n">track</span><span class="o">.</span><span class="n">getObs</span><span class="p">(</span><span class="mi">150</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="o">-</span><span class="n">track</span><span class="o">.</span><span class="n">getObs</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span><span class="o">*</span><span class="mf">3.6</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Rep&quot;</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="s2">&quot;:  vmoy = &quot;</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="s2">&quot;km/h   vmax = &quot;</span><span class="p">,</span> <span class="n">vm</span><span class="p">,</span> <span class="s2">&quot; km/h   vc = &quot;</span><span class="p">,</span> <span class="n">vc</span><span class="p">,</span> <span class="s2">&quot;km/h&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">track</span><span class="o">.</span><span class="n">getX</span><span class="p">(),</span> <span class="n">track</span><span class="o">.</span><span class="n">getY</span><span class="p">(),</span> <span class="n">COLORS</span><span class="p">[</span><span class="n">count</span><span class="o">%</span><span class="k">7</span>])

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Rep 1 :  vmoy =  17.22 km/h   vmax =  22.81  km/h   vc =  16.67 km/h
Rep 2 :  vmoy =  16.39 km/h   vmax =  17.7  km/h   vc =  16.18 km/h
Rep 3 :  vmoy =  16.72 km/h   vmax =  17.94  km/h   vc =  16.62 km/h
Rep 4 :  vmoy =  16.09 km/h   vmax =  19.18  km/h   vc =  15.92 km/h
Rep 5 :  vmoy =  16.63 km/h   vmax =  18.02  km/h   vc =  16.78 km/h
Rep 6 :  vmoy =  16.16 km/h   vmax =  18.6  km/h   vc =  16.29 km/h
Rep 7 :  vmoy =  16.36 km/h   vmax =  18.45  km/h   vc =  16.3 km/h
Rep 8 :  vmoy =  16.43 km/h   vmax =  20.29  km/h   vc =  16.36 km/h
Rep 9 :  vmoy =  16.73 km/h   vmax =  19.08  km/h   vc =  16.4 km/h
Rep 10 :  vmoy =  17.81 km/h   vmax =  20.48  km/h   vc =  18.2 km/h
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/usecase_Quickstart_16_1.png" src="../_images/usecase_Quickstart_16_1.png" />
</div>
</div>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Use Cases</p>
      </div>
    </a>
    <a class="right-next"
       href="Summarize.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Summarize GPS information in a regular grid</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#Or-how-to-load,-plot,-use-operators-to-compute-new-features,-summarize,-split-and-segment-on-a-GPS-track">Or how to load, plot, use operators to compute new features, summarize, split and segment on a GPS track</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Import-de-la-librairie-tracklib">Import de la librairie tracklib</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Read-GPS-data,-transform-coordinates-and-print-summary">Read GPS data, transform coordinates and print summary</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Display-GPS-data">Display GPS data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Compute-local-speed">Compute local speed</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Different-plots-of-speed-observations">Different plots of speed observations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Summarize-analytical-features-and-plot-it-in-images">Summarize analytical features and plot it in images</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Compute-speed-change">Compute speed change</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#Segmentation">Segmentation</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/usecase/Quickstart.ipynb.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=3ee479438cf8b5e0d341"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=3ee479438cf8b5e0d341"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, LASTIG lab, French National Institute of Geographic and Forest Information.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>