"""teslafleetmanagementapi.

This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
"""

# ruff: noqa: D410, E501, E101, D206
from apimatic_core.authentication.multiple.and_auth_group import (
    And,
)
from apimatic_core.authentication.multiple.single_auth import (
    Single,
)
from apimatic_core.request_builder import RequestBuilder
from apimatic_core.response_handler import ResponseHandler
from apimatic_core.types.parameter import Parameter

from teslafleetmanagementapi.api_helper import (
    APIHelper,
)
from teslafleetmanagementapi.configuration import (
    Server,
)
from teslafleetmanagementapi.controllers.base_controller import (
    BaseController,
)
from teslafleetmanagementapi.http.http_method_enum import (
    HttpMethodEnum,
)
from teslafleetmanagementapi.models.backup_response import (
    BackupResponse,
)
from teslafleetmanagementapi.models.fleet_telemetry_errors_response import (
    FleetTelemetryErrorsResponse,
)
from teslafleetmanagementapi.models.public_key_response import (
    PublicKeyResponse,
)
from teslafleetmanagementapi.models.register_partner_response import (
    RegisterPartnerResponse,
)


class PartnerController(BaseController):
    """A Controller to access Endpoints in the teslafleetmanagementapi API."""

    def __init__(self, config):
        """Initialize PartnerController object."""
        super(PartnerController, self).__init__(config)

    def get_vins_with_fleet_telemetry_errors(self):
        """Perform a GET request to
        /api/1/partner_accounts/fleet_telemetry_error_vins.

        Returns:
            ApiResponse: An object with the response value as well as other useful
                information such as status codes and headers. List of VINs with
                telemetry errors

        Raises:
            ApiException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/api/1/partner_accounts/fleet_telemetry_error_vins")
            .http_method(HttpMethodEnum.GET)
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(And(Single("bearerAuth"), Single("thirdpartytoken"))),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(BackupResponse.from_dictionary)
            .is_api_response(True),
        ).execute()

    def get_recent_fleet_telemetry_errors(self):
        """Perform a GET request to
        /api/1/partner_accounts/fleet_telemetry_errors.

        Returns:
            ApiResponse: An object with the response value as well as other useful
                information such as status codes and headers. Fleet telemetry errors
                retrieved

        Raises:
            ApiException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/api/1/partner_accounts/fleet_telemetry_errors")
            .http_method(HttpMethodEnum.GET)
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(And(Single("bearerAuth"), Single("thirdpartytoken"))),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(FleetTelemetryErrorsResponse.from_dictionary)
            .is_api_response(True),
        ).execute()

    def get_public_key_for_a_domain(self,
                                    domain):
        """Perform a GET request to /api/1/partner_accounts/public_key.

        Args:
            domain (str): The request query parameter.

        Returns:
            ApiResponse: An object with the response value as well as other useful
                information such as status codes and headers. Public key retrieved

        Raises:
            ApiException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/api/1/partner_accounts/public_key")
            .http_method(HttpMethodEnum.GET)
            .query_param(Parameter()
                .key("domain")
                .value(domain)
                .is_required(True))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(And(Single("bearerAuth"), Single("thirdpartytoken"))),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(PublicKeyResponse.from_dictionary)
            .is_api_response(True),
        ).execute()

    def register_a_partner_account(self,
                                   body):
        """Perform a POST request to /api/1/partner_accounts.

        Args:
            body (RegisterPartnerRequest): The request body parameter.

        Returns:
            ApiResponse: An object with the response value as well as other useful
                information such as status codes and headers. Partner account
                registered

        Raises:
            ApiException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/api/1/partner_accounts")
            .http_method(HttpMethodEnum.POST)
            .header_param(Parameter()
                .key("Content-Type")
                .value("application/json"))
            .body_param(Parameter()
                .value(body)
                .is_required(True))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .body_serializer(APIHelper.json_serialize)
            .auth(And(Single("bearerAuth"), Single("thirdpartytoken"))),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(RegisterPartnerResponse.from_dictionary)
            .is_api_response(True),
        ).execute()
