"""teslafleetmanagementapi.

This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
"""

# ruff: noqa: D410, E501, E101, D206
from apimatic_core.authentication.multiple.and_auth_group import (
    And,
)
from apimatic_core.authentication.multiple.single_auth import (
    Single,
)
from apimatic_core.request_builder import RequestBuilder
from apimatic_core.response_handler import ResponseHandler
from apimatic_core.types.parameter import Parameter

from teslafleetmanagementapi.api_helper import (
    APIHelper,
)
from teslafleetmanagementapi.configuration import (
    Server,
)
from teslafleetmanagementapi.controllers.base_controller import (
    BaseController,
)
from teslafleetmanagementapi.http.http_method_enum import (
    HttpMethodEnum,
)
from teslafleetmanagementapi.models.charging_history_response import (
    ChargingHistoryResponse,
)
from teslafleetmanagementapi.models.charging_sessions_response import (
    ChargingSessionsResponse,
)


class ChargingController(BaseController):
    """A Controller to access Endpoints in the teslafleetmanagementapi API."""

    def __init__(self, config):
        """Initialize ChargingController object."""
        super(ChargingController, self).__init__(config)

    def get_charging_history(self):
        """Perform a GET request to /api/1/dx/charging/history.

        Returns the paginated charging history for the authenticated account.

        Returns:
            ApiResponse: An object with the response value as well as other useful
                information such as status codes and headers. Charging history
                retrieved successfully

        Raises:
            ApiException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/api/1/dx/charging/history")
            .http_method(HttpMethodEnum.GET)
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(And(Single("bearerAuth"), Single("thirdpartytoken"))),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(ChargingHistoryResponse.from_dictionary)
            .is_api_response(True),
        ).execute()

    def get_charging_invoice(self,
                             id):
        """Perform a GET request to /api/1/dx/charging/invoice/{id}.

        Returns a charging invoice PDF for a charging session.

        Args:
            id (str): Charging session invoice identifier

        Returns:
            ApiResponse: An object with the response value as well as other useful
                information such as status codes and headers. Invoice PDF document

        Raises:
            ApiException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/api/1/dx/charging/invoice/{id}")
            .http_method(HttpMethodEnum.GET)
            .template_param(Parameter()
                .key("id")
                .value(id)
                .is_required(True)
                .should_encode(True))
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(And(Single("bearerAuth"), Single("thirdpartytoken"))),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.dynamic_deserialize)
            .is_api_response(True),
        ).execute()

    def get_charging_sessions(self):
        """Perform a GET request to /api/1/dx/charging/sessions.

        Returns charging session information. Only available for business fleet
        owners.

        Returns:
            ApiResponse: An object with the response value as well as other useful
                information such as status codes and headers. Charging sessions
                retrieved successfully

        Raises:
            ApiException: When an error occurs while fetching the data from the
                remote API. This exception includes the HTTP Response code, an error
                message, and the HTTP body that was received in the request.

        """
        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.DEFAULT)
            .path("/api/1/dx/charging/sessions")
            .http_method(HttpMethodEnum.GET)
            .header_param(Parameter()
                .key("accept")
                .value("application/json"))
            .auth(And(Single("bearerAuth"), Single("thirdpartytoken"))),
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(ChargingSessionsResponse.from_dictionary)
            .is_api_response(True),
        ).execute()
