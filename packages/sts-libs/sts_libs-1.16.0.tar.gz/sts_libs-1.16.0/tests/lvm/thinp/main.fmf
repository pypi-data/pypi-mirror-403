summary: LVM Thin Provisioning Tests
description: |
    Comprehensive test suite for LVM thin provisioning functionality.
    Tests cover thin pool creation, thin volume operations, capacity management,
    and various LVM commands with thin provisioning.

contact: fsuba@redhat.com
component:
    - lvm
    - device-mapper

# Common environment for all thin provisioning tests
environment:
    STS_VG_NAME: testvg
    STS_LV_NAME: testlv
    STS_THIN_POOL_NAME: testpool

# Default test duration
duration: 30m

tag:
    - lvm
    - thinp


/lvchange_thin:
    summary: Test discard mode transitions and activation/deactivation of thin pools and volumes
    test: python3 -m pytest test_lvchange_thin.py
    duration: 15m
    tier: 1

/lvconvert_thin_lv:
    summary: Test converting regular LVs to thin LVs with origin snapshots and data preservation
    test: python3 -m pytest test_lvconvert_thin_lv.py
    duration: 15m
    tier: 1

/lvconvert_thinpool:
    summary: Test converting regular LVs to thin pools with chunksize, discards, and metadata options
    test: python3 -m pytest test_lvconvert_thinpool.py
    duration: 15m
    tier: 1

/lvcreate_linear:
    summary: Test thin pool creation with extents, size, chunksize, discards, and virtualsize options
    test: python3 -m pytest test_lvcreate_linear.py
    duration: 15m
    tier: 1

/lvcreate_mirror:
    summary: Test converting thin pool data and metadata components to RAID1 mirroring
    test: python3 -m pytest test_lvcreate_mirror.py
    duration: 15m
    tier: 1

/lvcreate_poolmetadataspare:
    summary: Test thin pool metadata spare creation, sizing, and automatic size updates
    test: python3 -m pytest test_lvcreate_poolmetadataspare.py
    duration: 15m
    tier: 1

/lvcreate_stripe:
    summary: Test striped thin pool creation with various stripe counts and stripe sizes
    test: python3 -m pytest test_lvcreate_stripe.py
    duration: 15m
    tier: 1

/lvextend:
    summary: Test extending thin pools and thin LVs by extents, size, or percentage
    test: python3 -m pytest test_lvextend.py
    duration: 15m
    tier: 1

/lvreduce_thinp:
    summary: Test reducing thin LV virtual size with filesystem and snapshot handling
    test: python3 -m pytest test_lvreduce_thinp.py
    duration: 15m
    tier: 1

/lvremove_thinp:
    summary: Test removing thin pools, thin LVs, and snapshot chains with force options
    test: python3 -m pytest test_lvremove_thinp.py
    duration: 15m
    tier: 1

/lvrename_thinp:
    summary: Test renaming thin pools, thin LVs, and snapshots while preserving relationships
    test: python3 -m pytest test_lvrename_thinp.py
    duration: 15m
    tier: 1

/lvresize_thinp:
    summary: Test resizing thin pools and thin LVs including filesystem and metadata resizing
    test: python3 -m pytest test_lvresize_thinp.py
    duration: 15m
    tier: 1

/lvs_thinp:
    summary: Test lvs command output for thin pool attributes, filtering, sorting, and hidden volumes
    test: python3 -m pytest test_lvs_thinp.py
    duration: 15m
    tier: 1

/lvscan_thinp:
    summary: Test lvscan command showing thin pool and volume states with JSON output format
    test: python3 -m pytest test_lvscan_thinp.py
    duration: 15m
    tier: 1

/lvconf_thinp:
    summary: Test LVM config options for separate metadata PVs and thin pool autoextend settings
    test: python3 -m pytest test_lvconf_thinp.py
    duration: 15m
    tier: 1

/pool_capacity:
    summary: Test thin pool overprovisioning behavior and data/metadata usage monitoring
    test: python3 -m pytest test_pool_capacity.py
    duration: 15m
    tier: 1

/discard_perf:
    summary: Test mkfs discard performance on large thin volumes (BZ1404736)
    test: python3 -m pytest test_discard_perf.py
    duration: 15m
    tier: 1

/thin_perf:
    summary: Test thin vs regular LV performance comparison for read, write, and random I/O
    test: python3 -m pytest test_thin_perf.py
    duration: 15m
    tier: 1

/bugs/discard_corruption:
    summary: Test discard on thin snapshots doesn't cause data corruption (BZ918647)
    test: python3 -m pytest bugs/test_discard_corruption.py
    duration: 15m
    tier: 2

/bugs/stripe_blkdiscard:
    summary: Test blkdiscard command works correctly on striped logical volumes
    test: python3 -m pytest bugs/test_stripe_blkdiscard.py
    duration: 15m
    tier: 2

/bugs/thinpool_error_target_meta:
    summary: Test error target on thin pool metadata doesn't cause kernel panic (BZ1305983)
    test: python3 -m pytest bugs/test_thinpool_error_target_meta.py
    duration: 15m
    tier: 2
