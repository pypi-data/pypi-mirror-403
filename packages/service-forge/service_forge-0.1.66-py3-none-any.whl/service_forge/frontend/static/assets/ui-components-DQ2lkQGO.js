import{v as le,a8 as re,r as W,C as Ge,E as F,O as ae,ad as Qe,a9 as qe,u as a,a0 as Je,c as We,j as xe,i as T,n as oe,V as ke,I as $,x as D,z as _,H as se,a4 as ue,w as et,F as me,A as He,T as ct,am as Te,q as Q,y,B as Z,L as $e,ag as tt,M as je,ai as dt,av as ft,W as _e,U as Ce,aw as Ne}from"./vue-core-C3hq3bxF.js";let ne=null;function vt(){return ne!==null}function ht(e){ne&&nt(),ne=e}function Ee(e){e===ne&&(ne=null)}function nt(){ne&&(ne.closeMenu(),ne=null)}const ee={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function pe(e,l){let s=e.offsetTop;return e.offsetParent!=null&&e.offsetParent!=l&&(s-=e.offsetParent.scrollTop,s+=pe(e.offsetParent,l)),s}function ge(e,l){let s=e.offsetLeft;return e.offsetParent!=null&&e.offsetParent!=l&&(s-=e.offsetParent.scrollLeft,s+=ge(e.offsetParent,l)),s}function mt(e,l,s,r){return{x:ge(e,r)+l,y:pe(e,r)+s}}const Ie="mx-menu-default-container",pt="mx-menu-container-";let gt=0;function lt(e){const{getContainer:l,zIndex:s}=e;if(l){const f=typeof l=="function"?l():l;if(f){let t=f.getAttribute("id");return t||(t=pt+gt++,f.setAttribute("id",t)),{eleId:t,container:f,isNew:!1}}}let r=document.getElementById(Ie);return r||(r=document.createElement("div"),r.setAttribute("id",Ie),r.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(r)),r.style.zIndex=s?.toString()||ee.defaultZindex.toString(),{eleId:Ie,container:r,isNew:!0}}function bt(e){let l=0;for(let s=0;s<e.length;s++){const r=e.charCodeAt(s);l=(l<<5)-l+r,l|=0}return l}function De(e){return typeof e=="number"?`${e}px`:e}const J=le({props:{vnode:{type:null},data:{type:null,default:null}},setup(e){const{vnode:l,data:s}=re(e);return()=>typeof l.value=="function"?l.value(s.value):l.value}});function yt(e,l){const s={...e};return delete s[l],s}var Ct=Object.defineProperty,xt=(e,l,s)=>l in e?Ct(e,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[l]=s,Ve=(e,l,s)=>xt(e,typeof l!="symbol"?l+"":l,s);class Ke{constructor(l,s){Ve(this,"x",0),Ve(this,"y",0),this.x=l||0,this.y=s||0}set(l,s){this.x=l,this.y=s}substract(l){this.x-=l.x,this.y-=l.y}}function Ue(e){const{onDown:l,onMove:s,onUp:r}=e,f=new Ke,t=new Ke;let C;function c(m){m.stopPropagation(),t.set(m.x,m.y),t.substract(f),s(f,t,m,C)}function v(m){r(m,C),f.set(0,0),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",v)}return(m,p)=>l(m,p)?(C=p,f.set(m.x,m.y),document.addEventListener("mousemove",c),document.addEventListener("mouseup",v),m.stopPropagation(),!0):!1}function kt(e,l){let s=0;return{start(){s>0&&clearInterval(s),s=setInterval(()=>{s=0,l()},e)},stop(){s>0&&(clearInterval(s),s=0)}}}const he=[],Ye=kt(100,()=>{for(const e of he)e()});function Mt(e,l,s,r){let f=0,t=0;function C(){e.value&&(l&&f!==e.value.offsetWidth&&l(e.value.offsetWidth),s&&t!==e.value.offsetHeight&&s(e.value.offsetHeight),f=e.value.offsetWidth,t=e.value.offsetHeight)}return{startResizeChecker(){Ye.start(),he.push(C)},stopResizeChecker(){const c=he.indexOf(C);c>=0&&he.splice(c,1),he.length===0&&Ye.stop()}}}const Ze=140,St=70,wt=le({__name:"ScrollRect",props:{scroll:{type:String,default:"both"},scrollBarAlwaysShow:{type:Boolean,default:!1},scrollBarBackgroundClickable:{type:Boolean,default:!1},height:{type:Number,default:void 0},width:{type:Number,default:void 0},maxHeight:{type:Number,default:void 0},maxWidth:{type:Number,default:void 0},containerClass:{type:String,default:""},containerStyle:{type:null}},emits:["scroll","resized"],setup(e,{expose:l,emit:s}){const r=e,f=s,t=W(),C=W(),c=W(),v=W(),m=W(),p=W(),R=W(!1),V=We(()=>r.scroll==="horizontal"||r.scroll==="both"),H=We(()=>r.scroll==="vertical"||r.scroll==="both"),x=_e({show:!1,size:0,sizeRaw:0,pos:0}),k=_e({show:!1,size:0,sizeRaw:0,pos:0});let M=0,g=0,O=0,B=0,P=null;const S={attributes:!0,childList:!0};function i(){if(t.value){if(x.show){const n=t.value.offsetWidth/t.value.scrollWidth;x.sizeRaw=n*t.value.offsetWidth,x.size=n*100,x.pos=t.value.scrollLeft/(t.value.scrollWidth-t.value.offsetWidth)*(100-x.size),n>=1&&(x.show=!1)}if(k.show){const n=t.value.offsetHeight/t.value.scrollHeight;k.sizeRaw=n*t.value.offsetHeight,k.size=n*100,k.pos=t.value.scrollTop/(t.value.scrollHeight-t.value.offsetHeight)*(100-k.size),n>=1&&(k.show=!1)}f("scroll",t.value.scrollLeft,t.value.scrollTop)}}function h(n=!1){if(!t.value)return;let d=V.value,o=H.value;const ce=d&&(M!==t.value.scrollWidth||O!==t.value.offsetWidth),Y=H&&(g!==t.value.scrollHeight||B!==t.value.offsetHeight);if(!n&&!ce&&!Y)return;const z=window.getComputedStyle(t.value);(z.overflow==="hidden"||z.overflowX==="hidden")&&(d=!1),(z.overflow==="hidden"||z.overflowY==="hidden")&&(o=!1),x.show=d,k.show=o,i(),O=t.value.offsetWidth,B=t.value.offsetHeight,M=t.value.scrollWidth,g=t.value.scrollHeight,f("resized",M,g)}function N(n){var d;r.scroll=="horizontal"&&(n.deltaMode==0&&((d=t.value)==null||d.scrollTo({left:t.value.scrollLeft+(n.deltaY>0?Ze:-140),behavior:"smooth"})),n.preventDefault(),n.stopPropagation())}function w(n){var d;n.deltaMode==0&&((d=t.value)==null||d.scrollTo({left:t.value.scrollLeft+(n.deltaY>0?Ze:-140),behavior:"smooth"}),n.preventDefault(),n.stopPropagation())}function j(n){var d;n.deltaMode==0&&((d=t.value)==null||d.scrollTo({top:t.value.scrollTop+(n.deltaY>0?St:-70),behavior:"smooth"}),n.preventDefault(),n.stopPropagation())}let K=0,U=0,A=0,b=0;const L=Ue({onDown(n){return!c.value||!m.value?!1:(K=n.offsetX,U=n.x-n.offsetX-m.value.offsetLeft,n.preventDefault(),R.value=!0,!0)},onMove(n,d,o){t.value&&c.value&&(q(o.x-K-U),o.preventDefault(),o.stopPropagation())},onUp(){R.value=!1}}),X=Ue({onDown(n){return!v.value||!p.value?!1:(A=n.offsetY,b=n.y-n.offsetY-p.value.offsetTop,n.preventDefault(),R.value=!0,!0)},onMove(n,d,o){t.value&&v.value&&(te(o.y-A-b),o.preventDefault(),o.stopPropagation())},onUp(){R.value=!1}});function E(n){t.value&&(t.value.scrollLeft=n/100*(t.value.scrollWidth-t.value.offsetWidth))}function G(n){t.value&&(t.value.scrollLeft=n/100*(t.value.scrollHeight-t.value.offsetHeight))}function q(n){t.value&&(t.value.scrollLeft=n/(t.value.offsetWidth-x.sizeRaw)*(t.value.scrollWidth-t.value.offsetWidth))}function te(n){t.value&&(t.value.scrollTop=n/(t.value.offsetHeight-k.sizeRaw)*(t.value.scrollHeight-t.value.offsetHeight))}function I(n){r.scrollBarBackgroundClickable&&q(n.offsetX-x.sizeRaw/2)}function ie(n){r.scrollBarBackgroundClickable&&te(n.offsetY-k.sizeRaw/2)}const{startResizeChecker:ye,stopResizeChecker:u}=Mt(t,()=>h(),()=>h());return xe(()=>{oe(()=>{setTimeout(()=>h(!0),200),h(!0),ye(),P=new MutationObserver(()=>h()),P.observe(t.value,S)})}),ke(()=>{u(),P&&(P.disconnect(),P=null)}),l({refreshScrollState(){h(!0)},getScrollContainer(){return t.value},scrollTo(n,d){var o;(o=t.value)==null||o.scrollTo(n,d)},scrollToTop(){var n;(n=t.value)==null||n.scrollTo(0,0)},scrollToBottom(){var n;(n=t.value)==null||n.scrollTo(t.value.scrollWidth,t.value.scrollHeight)}}),(n,d)=>(y(),D("div",{ref_key:"scrollrect",ref:C,class:se(["vue-scroll-rect",e.scrollBarAlwaysShow?"always-show-scrollbar":"",e.scrollBarBackgroundClickable?"background-clickable":"",R.value?"dragging":""]),style:Ce({width:e.width?`${e.width}px`:void 0,height:e.height?`${e.height}px`:void 0}),onWheel:N},[Z("div",{ref_key:"container",ref:t,class:se(["scroll-content",e.scroll,e.containerClass]),style:Ce({maxWidth:e.maxWidth?`${e.maxWidth}px`:void 0,maxHeight:e.maxHeight?`${e.maxHeight}px`:void 0,...e.containerStyle}),onScroll:i},[_(n.$slots,"default")],38),x.show?_(n.$slots,"scrollBarX",{key:0,scrollBarValue:x,onScroll:E},()=>[Z("div",{ref_key:"scrollBarRefX",ref:c,class:"scrollbar horizontal",onClick:I,onWheel:w},[Z("div",{class:"thumb",ref_key:"scrollBarThumbRefX",ref:m,style:Ce({left:`${x.pos}%`,width:`${x.size}%`}),onMousedown:d[0]||(d[0]=(...o)=>a(L)&&a(L)(...o)),onWheel:w},null,36)],544)]):$("",!0),k.show?_(n.$slots,"scrollBarY",{key:1,scrollBarValue:k,onScroll:G},()=>[k.show?(y(),D("div",{key:0,ref_key:"scrollBarRefY",ref:v,class:"scrollbar vertical",onClick:ie,onWheel:j},[Z("div",{class:"thumb",ref_key:"scrollBarThumbRefY",ref:p,style:Ce({top:`${k.pos}%`,height:`${k.size}%`}),onMousedown:d[1]||(d[1]=(...o)=>a(X)&&a(X)(...o)),onWheel:j},null,36)],544)):$("",!0)]):$("",!0)],38))}}),Re=(e,l)=>{const s=e.__vccOpts||e;for(const[r,f]of l)s[r]=f;return s},It={},Wt={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Ht=Z("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),Rt=[Ht];function Pt(e,l){return y(),D("svg",Wt,Rt)}const Bt=Re(It,[["render",Pt]]),Ot={},Lt={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},At=Z("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),zt=[At];function Ft(e,l){return y(),D("svg",Lt,zt)}const Tt=Re(Ot,[["render",Ft]]),$t={class:"mx-item-row"},jt=["xlink:href"],_t={key:1,class:"label"},Nt={class:"mx-item-row"},Et={class:"mx-shortcut"},Pe=le({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(e,{expose:l,emit:s}){const r=e,f=s,{clickHandler:t,clickClose:C,clickableWhenHasChildren:c,disabled:v,hidden:m,label:p,icon:R,iconFontClass:V,showRightArrow:H,shortcut:x,hasChildren:k}=re(r),M=W(!1),g=W(!1),O=W(),B=T("globalOptions"),P=T("globalHasSlot"),S=T("globalRenderSlot"),i=T("globalCloseMenu"),h=T("menuContext"),N=We(()=>typeof p.value=="string"?p.value:typeof p.value=="function"?bt(p.value.toString()):"MenuItem[unknow]");Q("MenuItemName",N);const w={getSubMenuInstance:()=>{},showSubMenu:()=>M.value?(h.markActiveMenuItem(w,!0),!0):k.value?(K(),!0):!1,hideSubMenu:()=>{h.closeOtherSubMenu()},isDisabledOrHidden:()=>v.value||m.value,getElement:()=>O.value,focus:()=>g.value=!0,blur:()=>g.value=!1,click:j};Q("menuItemInstance",w),xe(()=>{h.isMenuItemDataCollectedFlag()?oe(()=>{let b=0;const L=h.getElement();if(L){let X=0;for(let E=0;E<L.children.length;E++){const G=L.children[E];if(G.getAttribute("data-type")==="ContextMenuItem"){if(G===O.value){b=X;break}X++}}}h.addChildMenuItem(w,b)}):h.addChildMenuItem(w)}),ke(()=>{h.removeChildMenuItem(w)});function j(b){if(!v.value){if(b){const L=b.target;if(L.classList.contains("mx-context-no-clickable")||B.value.ignoreClickClassName&&L.classList.contains(B.value.ignoreClickClassName))return;if(B.value.clickCloseClassName&&L.classList.contains(B.value.clickCloseClassName)){b.stopPropagation(),i(r.rawMenuItem);return}}k.value?c.value?(typeof t.value=="function"&&t.value(b),f("click",b)):M.value||K():(typeof t.value=="function"&&t.value(b),f("click",b),C.value&&i(r.rawMenuItem))}}function K(b){g.value=!1,h.checkCloseOtherSubMenuTimeOut()||h.closeOtherSubMenu(),v.value||(h.markActiveMenuItem(w),k.value&&(b||h.markThisOpenedByKeyBoard(),h.addOpenedSubMenu(U),M.value=!0,oe(()=>f("subMenuOpen",w))))}function U(){g.value=!1,M.value=!1,f("subMenuClose",w)}function A(){return{disabled:v.value,label:p.value,icon:R.value,iconFontClass:V.value,showRightArrow:H.value,clickClose:C.value,clickableWhenHasChildren:c.value,shortcut:x.value,theme:B.value.theme,isOpen:M,hasChildren:k,onClick:j,onMouseEnter:K,closeMenu:i}}return l(w),(b,L)=>a(m)?$("",!0):(y(),D("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:O,"data-type":"ContextMenuItem"},[a(P)("itemRender")?(y(),F(a(J),{key:0,vnode:()=>a(S)("itemRender",A())},null,8,["vnode"])):e.customRender?(y(),F(a(J),{key:1,vnode:e.customRender,data:A()},null,8,["vnode","data"])):(y(),D("div",{key:2,class:se(["mx-context-menu-item",a(v)?"disabled":"",g.value?"keyboard-focus":"",e.customClass?" "+e.customClass:"",M.value?"open":""]),onClick:j,onMouseenter:K},[_(b.$slots,"default",{},()=>[Z("div",$t,[Z("div",{class:se(["mx-icon-placeholder",e.preserveIconWidth?"preserve-width":""])},[_(b.$slots,"icon",{},()=>[a(P)("itemIconRender")?(y(),F(a(J),{key:0,vnode:()=>a(S)("itemIconRender",A())},null,8,["vnode"])):typeof e.svgIcon=="string"&&e.svgIcon?(y(),D("svg",He({key:1,class:"icon svg"},e.svgProps),[Z("use",{"xlink:href":e.svgIcon},null,8,jt)],16)):typeof a(R)!="string"?(y(),F(a(J),{key:2,vnode:a(R),data:a(R)},null,8,["vnode","data"])):typeof a(R)=="string"&&a(R)!==""?(y(),D("i",{key:3,class:se(a(R)+" icon "+a(V)+" "+a(B).iconFontClass)},null,2)):$("",!0)]),e.checked?_(b.$slots,"check",{key:0},()=>[a(P)("itemCheckRender")?(y(),F(a(J),{key:0,vnode:()=>a(S)("itemCheckRender",A())},null,8,["vnode"])):$("",!0),ae(Bt)]):$("",!0)],2),_(b.$slots,"label",{},()=>[a(P)("itemLabelRender")?(y(),F(a(J),{key:0,vnode:()=>a(S)("itemLabelRender",A())},null,8,["vnode"])):typeof a(p)=="string"?(y(),D("span",_t,$e(a(p)),1)):(y(),F(a(J),{key:2,vnode:a(p),data:a(p)},null,8,["vnode","data"]))])]),Z("div",Nt,[a(x)||b.$slots.shortcut?_(b.$slots,"shortcut",{key:0},()=>[a(P)("itemShortcutRender")?(y(),F(a(J),{key:0,vnode:()=>a(S)("itemShortcutRender",A())},null,8,["vnode"])):$("",!0),Z("span",Et,$e(a(x)),1)]):$("",!0),a(H)?_(b.$slots,"rightArrow",{key:1},()=>[a(P)("itemRightArrowRender")?(y(),F(a(J),{key:0,vnode:()=>a(S)("itemRightArrowRender",A())},null,8,["vnode"])):$("",!0),ae(Tt)]):$("",!0)])])],34)),_(b.$slots,"submenu",{context:w,show:M.value})],512))}}),Dt=le({name:"ContextMenuSperator",components:{VNodeRender:J},setup(){const e=T("globalHasSlot"),l=T("globalRenderSlot");return{globalHasSlot:e,globalRenderSlot:l}}}),Vt={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function Kt(e,l,s,r,f,t){const C=tt("VNodeRender");return e.globalHasSlot("separatorRender")?(y(),F(C,{key:0,vnode:()=>e.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(y(),D("div",Vt))}const be=Re(Dt,[["render",Kt]]),Be=le({__name:"ContextSubMenu",props:{items:{type:Object,default:null},show:{type:Boolean,default:!1},maxHeight:{type:Number,default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"},parentMenuItemContext:{type:Object,default:null}},emits:["closeAnimFinished"],setup(e,{expose:l,emit:s}){const r=e,f=s,t=W(!1),C=T("globalGetMenuHostId",""),c=T("menuContext"),v=T("globalOptions");T("globalHasSlot"),T("globalRenderSlot");const m=W("UnknowOrRoot"),p=T("MenuItemName",m),{zIndex:R,getParentWidth:V,getParentHeight:H,getZoom:x}=c,{adjustPosition:k}=re(r),M=W(),g=W(),O=W(),B=[],P=T("globalSetCurrentSubMenu"),S=[];let i=null,h=0;function N(){i&&i.blur()}function w(u,n){if(u){for(let d=n!==void 0?n:0;d<S.length;d++)if(!S[d].isDisabledOrHidden()){j(d);break}}else for(let d=n!==void 0?n:S.length-1;d>=0;d--)if(!S[d].isDisabledOrHidden()){j(d);break}}function j(u){if(i&&N(),u!==void 0&&(i=S[Math.max(0,Math.min(u,S.length-1))]),!i)return;i.focus();const n=i.getElement();n&&n.scrollIntoView({behavior:"auto",block:"nearest",inline:"nearest"})}function K(){P(U)}const U={el:O,name:p,isTopLevel:()=>c.getParentContext()===null,closeSelfAndActiveParent:()=>{const u=L.getParentContext();if(u){u.closeOtherSubMenu();const n=u.getSubMenuInstanceContext();if(n)return n.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var u;return(u=L.getParentContext())==null?void 0:u.closeOtherSubMenu()},moveCurrentItemFirst:()=>w(!0),moveCurrentItemLast:()=>w(!1),moveCurrentItemDown:()=>w(!0,i?S.indexOf(i)+1:0),moveCurrentItemUp:()=>w(!1,i?S.indexOf(i)-1:0),focusCurrentItem:()=>j(),openCurrentItemSubMenu:()=>i?i?.showSubMenu():!1,triggerCurrentItemClick:u=>i?.click(u)};let A=!1,b=!1;const L={zIndex:R+1,container:c.container,adjustPadding:v.value.adjustPadding||ee.defaultAdjustPadding,getParentWidth:()=>{var u;return((u=O.value)==null?void 0:u.offsetWidth)||0},getParentHeight:()=>{var u;return((u=O.value)==null?void 0:u.offsetHeight)||0},getPositon:()=>[I.value.x,I.value.y],getZoom:()=>v.value.zoom||ee.defaultZoom,addOpenedSubMenu(u){B.push(u)},closeOtherSubMenu(){B.forEach(u=>u()),B.splice(0,B.length),P(U)},checkCloseOtherSubMenuTimeOut(){return h?(clearTimeout(h),h=0,!0):!1},closeOtherSubMenuWithTimeOut(){h=setTimeout(()=>{h=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(u,n)=>{n===void 0?S.push(u):S.splice(n,0,u)},removeChildMenuItem:u=>{S.splice(S.indexOf(u),1),u.getSubMenuInstance=()=>{}},markActiveMenuItem:(u,n=!1)=>{N(),i=u,n&&j()},markThisOpenedByKeyBoard:()=>{A=!0},isOpenedByKeyBoardFlag:()=>A?(A=!1,!0):!1,isMenuItemDataCollectedFlag:()=>b,getElement:()=>O.value||null,getParentContext:()=>c,getSubMenuInstanceContext:()=>U};Q("menuContext",L);const X={getChildItem:u=>S[u],getMenuDimensions:()=>g.value?{width:g.value.offsetWidth,height:g.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>g.value,getMenu:()=>O.value,getScrollValue:()=>{var u,n;return((n=(u=M.value)==null?void 0:u.getScrollContainer())==null?void 0:n.scrollTop)||0},setScrollValue:u=>{var n;return(n=M.value)==null?void 0:n.scrollTo(0,u)},getScrollHeight:()=>G.value,adjustPosition:()=>{ie()},getMaxHeight:()=>q.value,getPosition:()=>I.value,setPosition:(u,n)=>{I.value.x=u,I.value.y=n}},E=T("menuItemInstance",void 0);E&&(E.getSubMenuInstance=()=>X);const G=W(0),q=W(0),te=W(!1),I=W({x:0,y:0});function ie(){oe(()=>{const u=O.value,n=g.value;if(u&&n&&M.value){const{container:d}=c,o=V?.()??0,ce=H?.()??0,Y=getComputedStyle(n),z=parseFloat(Y.paddingLeft),de=parseFloat(Y.paddingTop),Me=ce>0?de:0,at=document.documentElement.scrollHeight/x(),st=document.documentElement.scrollWidth/x(),ut=Math.min(st,d.offsetWidth),Oe=Math.min(at,d.offsetHeight);let Se=ge(u,d),we=pe(u,d);r.direction.includes("l")?I.value.x-=u.offsetWidth+z:r.direction.includes("r")?I.value.x+=o+z:(I.value.x+=o/2,I.value.x-=(u.offsetWidth+z)/2),r.direction.includes("t")?I.value.y-=(u.offsetHeight+de*2)/x():r.direction.includes("b")?I.value.y-=de/x():I.value.y-=(u.offsetHeight+de)/2/x(),oe(()=>{var Le,Ae;Se=ge(u,d),we=pe(u,d);const ze=((Ae=(Le=M.value)==null?void 0:Le.getScrollContainer())==null?void 0:Ae.scrollHeight)||0,rt=r.maxHeight;G.value=r.maxHeight?Math.min(ze,r.maxHeight):ze;const it=Se+u.offsetWidth-ut,Fe=we+G.value+Me*2-Oe;if(te.value=Fe>0,k.value&&it>0){const fe=o+u.offsetWidth-z,ve=Se;fe>ve?I.value.x-=ve:I.value.x-=fe}if(te.value){if(k.value){const fe=Fe,ve=we;fe>ve?I.value.y-=ve-Me:I.value.y-=fe-Me}q.value=Oe-(I.value.y+de)}else q.value=rt||0})}})}function ye(){var u;const n=(u=r.parentMenuItemContext)==null?void 0:u.getElement();if(n){const d=ge(n,c.container),o=pe(n,c.container);I.value.x=d,I.value.y=o}else{const[d,o]=c.getPositon();I.value.x=d,I.value.y=o}oe(()=>{var d;P(U),(d=O.value)==null||d.focus({preventScroll:!0}),c.isOpenedByKeyBoardFlag()&&oe(()=>w(!0)),b=!0}),ie()}return et(()=>r.show,u=>{u&&ye()}),xe(()=>{t.value=!0,r.show?ye():ie()}),ke(()=>{t.value=!1,E&&(E.getSubMenuInstance=()=>{})}),l(X),(u,n)=>{const d=tt("ContextSubMenu",!0);return t.value?(y(),F(Je,{key:0,to:`#${a(C)}`},[ae(ct,He({appear:""},a(v).menuTransitionProps||{duration:10},{onAfterLeave:n[0]||(n[0]=o=>f("closeAnimFinished"))}),{default:me(()=>[e.show?(y(),D("div",He({key:0,ref_key:"submenuRoot",ref:g},u.$attrs,{class:["mx-context-menu",a(v).customClass?a(v).customClass:"",a(v).theme??""],style:{maxWidth:e.maxWidth?a(De)(e.maxWidth):`${a(ee).defaultMaxWidth}px`,minWidth:e.minWidth?a(De)(e.minWidth):`${a(ee).defaultMinWidth}px`,zIndex:a(R),left:`${I.value.x}px`,top:`${I.value.y}px`},"data-type":"ContextSubMenu",onClick:K}),[ae(a(wt),{ref_key:"scrollRectRef",ref:M,scroll:"vertical",maxHeight:q.value,containerClass:"mx-context-menu-scroll"},{default:me(()=>[Z("div",{class:se(["mx-context-menu-items"]),ref_key:"menu",ref:O},[_(u.$slots,"default",{},()=>[(y(!0),D(je,null,qe(e.items,(o,ce)=>(y(),D(je,{key:ce},[o.hidden!==!0&&o.divided==="up"?(y(),F(be,{key:0})):$("",!0),o.hidden!==!0&&o.divided==="self"?(y(),F(be,{key:1})):(y(),F(Pe,{key:2,clickHandler:o.onClick?Y=>o.onClick(Y):void 0,disabled:typeof o.disabled=="object"?o.disabled.value:o.disabled,hidden:typeof o.hidden=="object"?o.hidden.value:o.hidden,icon:o.icon,iconFontClass:o.iconFontClass,svgIcon:o.svgIcon,svgProps:o.svgProps,label:o.label,customRender:o.customRender,customClass:o.customClass,checked:typeof o.checked=="object"?o.checked.value:o.checked,shortcut:o.shortcut,clickClose:o.clickClose,clickableWhenHasChildren:o.clickableWhenHasChildren,preserveIconWidth:o.preserveIconWidth!==void 0?o.preserveIconWidth:a(v).preserveIconWidth,showRightArrow:o.children&&o.children.length>0,hasChildren:o.children&&o.children.length>0,rawMenuItem:o,onSubMenuOpen:Y=>{var z;return(z=o.onSubMenuOpen)==null?void 0:z.call(o,Y)},onSubMenuClose:Y=>{var z;return(z=o.onSubMenuClose)==null?void 0:z.call(o,Y)}},Qe({_:2},[o.children&&o.children.length>0?{name:"submenu",fn:me(({context:Y,show:z})=>[ae(d,{show:z,parentMenuItemContext:Y,items:o.children,maxWidth:o.maxWidth,minWidth:o.minWidth,maxHeight:o.maxHeight,adjustPosition:o.adjustSubMenuPosition!==void 0?o.adjustSubMenuPosition:a(v).adjustPosition,direction:o.direction!==void 0?o.direction:a(v).direction},null,8,["show","parentMenuItemContext","items","maxWidth","minWidth","maxHeight","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),o.hidden!==!0&&(o.divided==="down"||o.divided===!0)?(y(),F(be,{key:3})):$("",!0)],64))),128))])],512)]),_:3},8,["maxHeight"])],16)):$("",!0)]),_:3},16)],8,["to"])):$("",!0)}}}),ot=le({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:null,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(e,{expose:l,emit:s}){const r=e,f=s,t=Ge(),C=W(),{options:c,show:v,container:m}=re(r);xe(()=>{v.value&&V()}),ke(()=>{M()}),et(v,i=>{i?V():(Ee(p),M())});const p={closeMenu:H,isClosed:x,getMenuRef:()=>C.value,getMenuDimensions:()=>{var i;return((i=C.value)==null?void 0:i.getMenuDimensions())??{width:0,height:0}}};let R=!1;function V(){k(),ht(p)}function H(i){R=!0,f("close",i),c.value.menuTransitionProps||f("closeAnimFinished"),Ee(p)}function x(){return R}function k(){setTimeout(()=>{document.addEventListener("click",P,!0),document.addEventListener("contextmenu",P,!0),document.addEventListener("scroll",B,!0),!r.isFullScreenContainer&&m.value&&m.value.addEventListener("scroll",B,!0),c.value.keyboardControl!==!1&&document.addEventListener("keydown",O,!0)},50)}function M(){document.removeEventListener("contextmenu",P,!0),document.removeEventListener("click",P,!0),document.removeEventListener("scroll",B,!0),!r.isFullScreenContainer&&m.value&&m.value.removeEventListener("scroll",B,!0),c.value.keyboardControl!==!1&&document.removeEventListener("keydown",O,!0)}const g=W();Q("globalSetCurrentSubMenu",i=>g.value=i),Q("globalGetMenuHostId",m.value.id);function O(i){var h,N,w,j,K,U,A,b,L,X,E,G,q;let te=!0;switch(i.key){case"Escape":{((h=g.value)==null?void 0:h.isTopLevel())===!1?(N=g.value)==null||N.closeCurrentSubMenu():H();break}case"ArrowDown":(w=g.value)==null||w.moveCurrentItemDown();break;case"ArrowUp":(j=g.value)==null||j.moveCurrentItemUp();break;case"Home":(K=g.value)==null||K.moveCurrentItemFirst();break;case"End":(U=g.value)==null||U.moveCurrentItemLast();break;case"ArrowLeft":{(A=g.value)!=null&&A.closeSelfAndActiveParent()||(L=(b=c.value).onKeyFocusMoveLeft)==null||L.call(b);break}case"ArrowRight":(X=g.value)!=null&&X.openCurrentItemSubMenu()||(G=(E=c.value).onKeyFocusMoveRight)==null||G.call(E);break;case"Enter":(q=g.value)==null||q.triggerCurrentItemClick(i);break;default:te=!1;break}te&&g.value&&(i.stopPropagation(),i.preventDefault())}function B(i){c.value.closeWhenScroll!==!1&&S(i.target,null)}function P(i){S(i.target,i)}function S(i,h){for(var N,w;i;){if(i.classList&&i.classList.contains("mx-context-menu"))return;i=i.parentNode}h?c.value.clickCloseOnOutside!==!1?(M(),H()):(w=(N=c.value).onClickOnOutside)==null||w.call(N,h):(M(),H())}return Q("globalOptions",c),Q("globalCloseMenu",H),Q("globalIsFullScreenContainer",r.isFullScreenContainer),Q("globalHasSlot",i=>t[i]!==void 0),Q("globalRenderSlot",(i,h)=>_(t,i,{...h},()=>[ue("span","Render slot failed")],!1)),Q("menuContext",{zIndex:c.value.zIndex||ee.defaultZindex,container:m.value,adjustPadding:{x:0,y:0},getZoom:()=>c.value.zoom||ee.defaultZoom,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[c.value.x,c.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),l(p),(i,h)=>(y(),F(Be,{ref_key:"submenuInstance",ref:C,show:a(v),items:a(c).items,adjustPosition:a(c).adjustPosition,maxWidth:a(c).maxWidth||a(ee).defaultMaxWidth,minWidth:a(c).minWidth||a(ee).defaultMinWidth,maxHeight:a(c).maxHeight,direction:a(c).direction||a(ee).defaultDirection,onCloseAnimFinished:h[0]||(h[0]=N=>f("closeAnimFinished"))},{default:me(()=>[_(i.$slots,"default")]),_:3},8,["show","items","adjustPosition","maxWidth","minWidth","maxHeight","direction"]))}}),Ut=le({__name:"ContextMenu",props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},emits:["update:show","close"],setup(e,{expose:l,emit:s}){const r=s,f=e,{options:t,show:C}=re(f),{isNew:c,container:v,eleId:m}=lt(t.value),p=W(null),R=Ge();function V(H){var x,k;r("update:show",!1),r("close"),(k=(x=t.value).onClose)==null||k.call(x,H)}return l({closeMenu:()=>r("update:show",!1),isClosed:()=>!C.value,getMenuRef:()=>{var H;return(H=p.value)==null?void 0:H.getMenuRef()},getMenuDimensions:()=>{var H;return((H=p.value)==null?void 0:H.getMenuDimensions())??{width:0,height:0}}}),(H,x)=>(y(),F(Je,{to:`#${a(m)}`},[ae(ot,{ref_key:"menuRef",ref:p,options:a(t),show:a(C),container:a(v),isFullScreenContainer:!a(c),onClose:V},Qe({_:2},[qe(a(R),(k,M)=>({name:M,fn:me(g=>[_(H.$slots,M,dt(ft(g)))])}))]),1032,["options","show","container","isFullScreenContainer"])],8,["to"]))}}),Yt=le({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxHeight:{type:[String,Number],default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(e,l){const s=T("globalOptions"),{adjustSubMenuPosition:r,maxWidth:f,minWidth:t,maxHeight:C}=re(e),c=typeof r.value<"u"?r.value:s.value.adjustPosition,v=W(),m=W();return l.expose({getSubMenuRef:()=>v.value,getMenuItemRef:()=>m.value}),()=>ue(Pe,{...e,ref:m,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,maxHeight:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof l.slots.default!==void 0},l.slots.default?{submenu:p=>ue(Be,{ref:v,show:p.show,maxWidth:f.value,minWidth:t.value,maxHeight:C.value,adjustPosition:c,parentMenuItemContext:p.context},{default:l.slots.default}),...yt(l.slots,"default")}:l.slots)}});function Zt(e,l,s,r){const f=W(!0),t=ue(ot,{options:e,show:f,container:l,isFullScreenContainer:!s,onCloseAnimFinished:()=>{Te(null,l)},onClose:C=>{var c;(c=e.onClose)==null||c.call(e,C),f.value=!1}},r);return Te(t,l),t.component}function Xe(e,l){const s=lt(e);return Zt(e,s.container,s.isNew,l).exposed}const Gt={install(e){e.config.globalProperties.$contextmenu=Xe,e.component("ContextMenu",Ut),e.component("ContextMenuItem",Pe),e.component("ContextMenuGroup",Yt),e.component("ContextMenuSperator",be),e.component("ContextMenuSeparator",be),e.component("ContextSubMenu",Be)},showContextMenu(e,l){return Xe(e,l)},isAnyContextMenuOpen(){return vt()},closeContextMenu:nt,transformMenuPosition:mt},Qt=e=>({props:{className:String,color:String,size:{type:[String,Number],default:24}},data(){return{treeData:e}},render(){const{className:l,color:s,size:r,treeData:f}=this,t={stroke:"currentColor",fill:"currentColor","stroke-width":"0",xmlns:"http://www.w3.org/2000/svg"},C=c=>ue(c.tag,Ne.startsWith("2.7.")?{attrs:{...t,...c.attr,height:r,width:r,className:l,color:s}}:{...t,...c.attr,height:r,width:r,className:l,color:s},c.child.map(v=>v.child&&v.child.length>0?C(v):ue(v.tag,Ne.startsWith("2.7.")?{attrs:{...v.attr}}:{...v.attr})));return C(f)}});export{Pe as $,Gt as Q,Ut as U,Qt as u};
