[project]
name = "revo-module-installer"
version = "0.2.0"
description = "CLI for installing RevoData modules"
readme = "README.md"
requires-python = ">=3.12"
license = { text = "MIT" }
authors = [
  { name = "RevoData NL" },
]
dependencies = [
  "httpx>=0.27.0",
  "pathspec>=0.12.1",
  "platformdirs>=4.2.2",
  "prompt-toolkit>=3.0.43",
  "pydantic>=2.7.0",
  "rich>=13.7.1",
  "ruamel.yaml>=0.18.6",
  "typer>=0.12.3",
  "gitpython>=3.1.43",
]

[project.optional-dependencies]
dev = [
  "flake8>=7.1.0",
  "prek==0.3.0",
  "pydoclint>=0.8.3",
  "pre-commit-hooks>=6.0.0",
  "pylint>=3.2.6",
  "pymarkdownlnt>=0.9.35",
  "pyright>=1.1.374",
  "pytest>=8.2.0",
  "pytest-cov>=5.0.0",
  "ruff>=0.5.5",
]

[project.scripts]
revo = "revo_module_installer.cli:app"

[build-system]
requires = ["hatchling>=1.24.2"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.sdist]
include = [
  "src/revo_module_installer",
  "src/revo_module_installer/examples/example_registry.yml",
  "src/revo_module_installer/examples/example_manifest.yml",
]

[tool.hatch.build.targets.wheel]
packages = ["src/revo_module_installer"]
include = [
  "src/revo_module_installer/examples/example_registry.yml",
  "src/revo_module_installer/examples/example_manifest.yml",
]

[tool.pytest.ini_options]
addopts = "-q --cov-fail-under=100"
testpaths = ["tests"]

[tool.ruff]
line-length = 88

[tool.ruff.lint]
select = ["E", "F", "I", "B", "UP"]

[tool.ruff.lint.isort]
combine-as-imports = true
force-sort-within-sections = true

[tool.pyright]
typeCheckingMode = "strict"
include = ["src", "tests"]
exclude = [
  ".venv",
  "dist",
  "build"
]

[tool.flake8]
max-line-length = 88
extend-ignore = ["E203", "W503"]
exclude = [
  ".venv",
  "build",
  "dist",
  ".git"
]

[tool.pylint.main]
py-version = "3.12"
ignore = [
  ".venv",
  "dist",
  "build"
]

[tool.pylint.format]
max-line-length = 88

[tool.pylint.messages_control]
disable = ["too-few-public-methods"]

[tool.pydoclint]
exclude = [
  ".venv",
  "dist",
  "build"
]
