.. image:: https://odoo-community.org/readme-banner-image
   :target: https://odoo-community.org/get-involved?utm_source=readme
   :alt: Odoo Community Association

==============
ATC Modelo 417
==============

.. 
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:93c0b371fb26ff2d45a92688ed0364dd909c5b47a19b0041d12908dc5f20e332
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/license-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fl10n--spain-lightgray.png?logo=github
    :target: https://github.com/OCA/l10n-spain/tree/17.0/l10n_es_atc_mod417
    :alt: OCA/l10n-spain
.. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
    :target: https://translation.odoo-community.org/projects/l10n-spain-17-0/l10n-spain-17-0-l10n_es_atc_mod417
    :alt: Translate me on Weblate
.. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
    :target: https://runboat.odoo-community.org/builds?repo=OCA/l10n-spain&target_branch=17.0
    :alt: Try me on Runboat

|badge1| |badge2| |badge3| |badge4| |badge5|

Módulo para la presentación del modelo 417 (Suministro Inmediato de
Información - Autodeclaración) de la Agencia Tributaria Canaria.

Instrucciones del modelo:
https://www3.gobiernodecanarias.org/tributos/atc/estatico/asistencia_contribuyente/modelos/ref_y_propios/igic/mod417/pdf/instrucciones/417.pdf

**Table of contents**

.. contents::
   :local:

Installation
============

Para instalar este modulo y usar el .jar se necesitan las siguientes
librerias: ``openjdk-8-jdk``, ``ttf-mscorefonts-installer``, y
``fontconfig``.

Ejemplo en Debian/Ubuntu

.. code:: bash

   echo "deb http://deb.debian.org/debian unstable main non-free contrib" > /etc/apt/sources.list
   echo "ttf-mscorefonts-installer msttcorefonts/accepted-mscorefonts-eula select true" | debconf-set-selections
   apt-get update
   apt-get install -y --no-install-recommends openjdk-8-jdk ttf-mscorefonts-installer fontconfig
   fc-cache -f -v

Usage
=====

Para crear un modelo, por ejemplo de un trimestre del año:

1. Ir a Contabilidad > Declaraciones ATC > Modelo 417

2. Pulsar en el botón "Crear"

3. Seleccionar el ejercicio fiscal y el tipo de período, los periodos
   incluidos se calculan automáticamente

4. Guardar y pulsar en el botón "Calcular"

5. Rellenar (si es necesario) aquellos campos que Odoo no calcula
   automáticamente:

   - Viajeros Base: Casilla [23]
   - Viajeros Cuota: Casilla [24]
   - Cuotas ganaderas y pesqueras: Casilla [36]
   - Cuotas de bienes de inversión: Casilla [37]
   - Cuota Antes del inicio de la actividad: Casilla [38]
   - Cuota prorrata: Casilla [39]
   - Regularización de cuotas: Casilla [42]
   - Cuotas a compensar: Casilla [43]
   - A deducir: Casilla [44]

6. Cuando los valores sean los correctos, pulsar en el botón "Confirmar"

7. Para crear el movimiento correspondiente, pulsar en el botón "Crear
   asiento"

8. Teniendo en cuenta los valores, rellenar el PDF modelo 417 de la AEAT

9. El boton ``Generar declaración`` permite generar el archivo .xml y
   usando el ``.jar`` provisto por la ATC se puede obtener la
   declaracion. Este puede ser en formato ``.dec`` cuando en el campo
   ``Tipo de salida`` se elija ``telemático``; en caso contrario, se
   generará en formato ``.pdf``.

Known issues / Roadmap
======================

Limitación en entorno Runboat
-----------------------------

Este módulo no podrá generar archivos ``.dec`` o ``.pdf`` en entornos
ejecutados desde Runboat, debido a que la instalación de la librería
``ttf-mscorefonts-installer`` requiere la aceptación de una licencia, lo
cual no es posible automatizar en dicho entorno.

Se puede consultar el informe del problema en el siguiente enlace:
https://github.com/OCA/oca-ci/issues/94

Para verificar la funcionalidad completa del módulo, hay que realizar
las pruebas localmente siguiendo las instrucciones indicadas en el
apartado de instalación.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/OCA/l10n-spain/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://github.com/OCA/l10n-spain/issues/new?body=module:%20l10n_es_atc_mod417%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
-------

* Tecnativa

Contributors
------------

- `Tecnativa <https://www.tecnativa.com>`__:

  - Pedro M. Baeza
  - Sergio Teruel
  - Carlos Lopez

Maintainers
-----------

This module is maintained by the OCA.

.. image:: https://odoo-community.org/logo.png
   :alt: Odoo Community Association
   :target: https://odoo-community.org

OCA, or the Odoo Community Association, is a nonprofit organization whose
mission is to support the collaborative development of Odoo features and
promote its widespread use.

.. |maintainer-carlos-lopez-tecnativa| image:: https://github.com/carlos-lopez-tecnativa.png?size=40px
    :target: https://github.com/carlos-lopez-tecnativa
    :alt: carlos-lopez-tecnativa

Current `maintainer <https://odoo-community.org/page/maintainer-role>`__:

|maintainer-carlos-lopez-tecnativa| 

This module is part of the `OCA/l10n-spain <https://github.com/OCA/l10n-spain/tree/17.0/l10n_es_atc_mod417>`_ project on GitHub.

You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
