[project]
authors = [{ "name" = "Volodymyr Pivoshenko", "email" = "volodymyr.pivoshenko@gmail.com" }]
classifiers = [
  "Development Status :: 5 - Production/Stable",
  "Environment :: Other Environment",
  "Intended Audience :: Developers",
  "Intended Audience :: Information Technology",
  "License :: OSI Approved :: MIT License",
  "Natural Language :: English",
  "Operating System :: OS Independent",
  "Programming Language :: Python",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Programming Language :: Python :: 3.9",
  "Topic :: Scientific/Engineering",
  "Topic :: Software Development",
  "Topic :: Software Development :: Libraries",
  "Topic :: Software Development :: Libraries :: Python Modules"
]
dependencies = ["click>=8.1.8", "httpx>=0.28.1", "tomlkit>=0.13.3"]
description = "uv-upsync - is a tool for automated dependency updates and version bumping in pyproject.toml."
keywords = [
  "cli",
  "cli-tool",
  "cli-tools",
  "cross-platform",
  "dependencies",
  "dependencies-management",
  "dependencies-update",
  "dependencies-upgrade",
  "dependency",
  "hacktoberfest",
  "packaging",
  "packaging-management",
  "packaging-update",
  "packaging-upgrade",
  "plugin",
  "plugins",
  "pypi",
  "python",
  "uv",
  "uv-plugin",
  "uv-plugins"
]
license = "MIT"
maintainers = [{ "name" = "Volodymyr Pivoshenko", "email" = "volodymyr.pivoshenko@gmail.com" }]
name = "uv-upsync"
readme = "README.md"
requires-python = ">=3.10"
version = "2.0.3"

[project.scripts]
uv-upsync = "uv_upsync.__main__:main"

[project.urls]
Homepage = "https://github.com/pivoshenko/uv-upsync"
Repository = "https://github.com/pivoshenko/uv-upsync"

[build-system]
build-backend = "hatchling.build"
requires = ["hatchling"]

[dependency-groups]
ci = ["python-semantic-release~=10.5.3"]
dev = ["poethepoet>=0.40.0"]
formatters = ["pyupgrade>=3.21.2", "ruff>=0.14.14"]
linters = [
    "commitizen>=4.12.1",
    "ruff>=0.14.14",
    "ty>=0.0.14",
]
tests = [
  "coverage[toml]>=7.13.2",
  "pytest-cov>=7.0.0",
  "pytest-lazy-fixture>=0.6.3",
  "pytest-mock>=3.15.1",
  "pytest-sugar>=1.1.1",
  "pytest==7.4.4",
  "sh>=2.2.2"
]

[tool.commitizen]
allowed_prefixes = ["0", "1", "2", "Initial", "Merge"]

[tool.coverage.run]
omit = ["*/__init__.py", "*/__main__.py"]

[tool.pytest.ini_options]
addopts = ["--basetemp=tests/fixtures", "--color=yes", "--cov-report=html", "--cov-report=xml", "--cov=src"]
testpaths = ["tests"]

[tool.ruff]
fix = true
line-length = 100
target-version = "py313"
unsafe-fixes = true

[tool.ruff.format]
docstring-code-format = true
quote-style = "double"

[tool.ruff.lint]
ignore = ["COM812", "D101", "D102", "D103", "D107", "D203", "D213", "G004", "PLE1205", "TRY003", "TRY401"]
select = ["ALL"]

[tool.ruff.lint.isort]
force-single-line = true
from-first = false
length-sort-straight = true
lines-after-imports = 2
lines-between-types = 1
required-imports = ["from __future__ import annotations"]

[tool.ruff.lint.per-file-ignores]
"tests/*.py" = ["INP001", "PLR2004", "S101"]

[tool.semantic_release]
changelog_file = "CHANGELOG.md"
commit_author = "github-actions <github-actions@github.com>"
exclude_commit_patterns = ["Merge pull request"]
logging_use_named_masks = true
version_toml = ["pyproject.toml:project.version"]
version_variables = ["src/uv_upsync/__init__.py:__version__"]

[tool.semantic_release.changelog]
exclude_commit_patterns = ['''Initial Commit.*''', '''Merged? .*''', '''^\d+\.\d+\.\d+''']

[tool.semantic_release.commit_parser_options]
major_tags = ["feat"]
minor_tags = ["fix", "perf", "refactor"]
patch_tags = ["docs", "style"]

[tool.poe.tasks.format]
help = "Run formatters"
sequence = [
  { help = "Run annotations formatter", shell = "find src -type f -name '*.py' | xargs uv run pyupgrade --py313-plus" },
  { help = "Run annotations formatter", shell = "find tests -type f -name '*.py' | xargs uv run pyupgrade --py313-plus" },
  { help = "Run code formatter", shell = "uv run ruff format ." }
]

[tool.poe.tasks.lint]
help = "Run linters"
sequence = [
  { help = "Run types linter", shell = "uv run ty check ." },
  { help = "Run code linter", shell = "uv run ruff check ." },
  { help = "Run commits linter", shell = "uv run cz check --rev-range ." }
]

[tool.poe.tasks.tests]
help = "Run tests"
shell = "uv run pytest ."
