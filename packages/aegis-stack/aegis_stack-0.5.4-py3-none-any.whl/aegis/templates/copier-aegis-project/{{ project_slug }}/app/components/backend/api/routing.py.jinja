from fastapi import FastAPI

from app.components.backend.api import health
{%- if include_worker %}
from app.components.backend.api import worker
{%- endif %}
{%- if scheduler_backend != "memory" %}
from app.components.backend.api import scheduler
{%- endif %}
{%- if include_auth %}
from app.components.backend.api.auth.router import router as auth_router
{%- endif %}
{%- if include_ai %}
from app.components.backend.api.ai.router import router as ai_router
{%- if ai_backend != "memory" %}
from app.components.backend.api.llm.router import router as llm_router
{%- endif %}
{%- endif %}
{%- if include_comms %}
from app.components.backend.api.comms.router import router as comms_router
{%- endif %}
{%- if ai_rag %}
from app.components.backend.api.rag.router import router as rag_router
{%- endif %}


def include_routers(app: FastAPI) -> None:
    """Include all API routers in the FastAPI app"""
    app.include_router(health.router, prefix="/health", tags=["health"])
    {%- if include_worker %}
    app.include_router(worker.router, prefix="/api/v1", tags=["worker"])
    {%- endif %}
    {%- if scheduler_backend != "memory" %}
    app.include_router(scheduler.router, prefix="/api/v1", tags=["scheduler"])
    {%- endif %}
    {%- if include_auth %}
    app.include_router(auth_router, prefix="/api/v1")
    {%- endif %}
    {%- if include_ai %}
    app.include_router(ai_router)
    {%- if ai_backend != "memory" %}
    app.include_router(llm_router, prefix="/api/v1")
    {%- endif %}
    {%- endif %}
    {%- if include_comms %}
    app.include_router(comms_router, prefix="/api/v1")
    {%- endif %}
    {%- if ai_rag %}
    app.include_router(rag_router, prefix="/api/v1")
    {%- endif %}
