MySQL Awesome Stats Collector (MASC) - Changes Made
====================================================

1. INITIAL SETUP
   ‚Ä¢ Built FastAPI web application for MySQL diagnostics
   ‚Ä¢ Created hosts.yaml for host configuration
   ‚Ä¢ Set up SQLite for job metadata storage
   ‚Ä¢ Implemented background job collection system
   ‚Ä¢ Created Jinja2 templates with TailwindCSS styling

2. UV PACKAGE MANAGER
   ‚Ä¢ Switched from pip/requirements.txt to uv for package management
   ‚Ä¢ Created pyproject.toml for dependency management

3. HOSTS CONFIGURATION
   ‚Ä¢ Updated hosts.yaml with RDS instances (Primary, Replica-3, Replica-4)

4. HOMEPAGE CHECKBOX FIX
   ‚Ä¢ Fixed radio select (checkboxes) not working on homepage
   ‚Ä¢ Changed @click logic to x-model="selectedHosts" for proper Alpine.js state syncing

5. MYSQL CLI \G ERROR FIX
   ‚Ä¢ Fixed "Unknown command '\G'" error
   ‚Ä¢ Switched from \G format to tabular output
   ‚Ä¢ Updated parsers to handle tabular format
   ‚Ä¢ Used MYSQL_PWD environment variable for password security

6. PROCESSLIST SORTING
   ‚Ä¢ Added client-side sorting using Alpine.js
   ‚Ä¢ Click column headers to sort ascending/descending
   ‚Ä¢ Supports sorting by ID, User, Host, DB, Command, Time, State

7. PROCESSLIST COLUMN DISPLAY FIX
   ‚Ä¢ Fixed processlist not showing due to JSON parsing issues in x-data
   ‚Ä¢ Moved processlist JSON to <script> tag (window.processlistData)

8. GLOBAL STATUS DISPLAY IMPROVEMENTS
   ‚Ä¢ Fixed long values (like RSA public keys) extending column width
   ‚Ä¢ Added value truncation (>50 chars) with "Expand" button
   ‚Ä¢ Added search functionality for variables
   ‚Ä¢ Implemented number formatting (K, M, B for large numbers)
   ‚Ä¢ InnoDB Row Operations: millions/billions/thousands formatting
   ‚Ä¢ Network Bytes: GB formatting

9. TIMESTAMPS IN LOGS
   ‚Ä¢ Added timestamps to raw output header and footer
   ‚Ä¢ Added timestamps before each MySQL command
   ‚Ä¢ Added started_at/completed_at to job detail page
   ‚Ä¢ Added duration display for completed hosts

10. SERVER LOGS ENHANCEMENT
    ‚Ä¢ Added timestamps to server logs
    ‚Ä¢ Added host details (label, host:port) to logs
    ‚Ä¢ Added DB connection logging with PID
    ‚Ä¢ Logs show: [DB CONNECT] PID xxx - Connected to host
    ‚Ä¢ Logs show: [DB DISCONNECT] PID xxx - Closed successfully/with error

11. DATABASE CLEANUP
    ‚Ä¢ Added instructions for cleaning observer.db
    ‚Ä¢ Created .gitignore to exclude:
      - observer.db
      - runs/
      - __pycache__/
      - .venv/
      - *.egg-info/
      - uv.lock
      - .env
      - *.py[cod]
    ‚Ä¢ Cleaned up existing .pyc files

12. GLOBAL STATUS JSON FIX
    ‚Ä¢ Fixed x-data JSON breaking after Network Bytes section
    ‚Ä¢ Moved global_status JSON to <script> tag (window.globalStatusData)

13. COPY TO CLIPBOARD
    ‚Ä¢ Added "Copy to Clipboard" button to Raw Output tab
    ‚Ä¢ Added "Copy to Clipboard" button to InnoDB tab
    ‚Ä¢ Shows green checkmark and "Copied!" message for 2 seconds
    ‚Ä¢ Fallback support for older browsers

14. INNODB STATUS STRUCTURED DISPLAY
    ‚Ä¢ Created parse_innodb_status_structured() function
    ‚Ä¢ Fixed literal \n parsing from MySQL tabular output
    ‚Ä¢ Added visual dashboard with key metrics:
      - Buffer Pool Hit Rate, Utilization, Dirty Pages
      - History List Length, Active Transactions
      - Queries in InnoDB
    ‚Ä¢ Added Row Operations section (inserts/updates/deletes/reads per sec)
    ‚Ä¢ Added Buffer Pool & Memory section with utilization bar
    ‚Ä¢ Added Redo Log section
    ‚Ä¢ Added File I/O section
    ‚Ä¢ Added Insert Buffer & Adaptive Hash Index section
    ‚Ä¢ Added Transactions section
    ‚Ä¢ Added Background Thread section
    ‚Ä¢ Toggle between Parsed view and Raw view

15. CONFIG VARIABLES TAB (4TH TAB)
    ‚Ä¢ Added SHOW GLOBAL VARIABLES to MySQL commands
    ‚Ä¢ Created parse_config_variables() function
    ‚Ä¢ Stores config to config_vars.json
    ‚Ä¢ Shows 22 important variables (allowlist)
    ‚Ä¢ Human-readable formatting:
      - Byte sizes ‚Üí GB/MB/KB with raw value
      - Numbers ‚Üí comma-formatted
      - ON/OFF ‚Üí colored badges

16. CONFIG VARIABLES TOGGLE (SHOW ALL)
    ‚Ä¢ Added toggle to switch between Important (22) and All (~600) variables
    ‚Ä¢ Search box when viewing all variables
    ‚Ä¢ Important variables marked with ‚òÖ star
    ‚Ä¢ Scrollable table (max 600px height) with sticky header

17. CONFIG HEALTH INDICATORS
    ‚Ä¢ Added health indicators (üü¢üü°üî¥) to Important Config section
    ‚Ä¢ Health column with tooltips showing reason
    ‚Ä¢ Variables with health checks:
      - innodb_buffer_pool_size (vs RAM %)
      - max_connections (usage %)
      - tmp_table_size (‚â•64MB healthy)
      - max_heap_table_size (vs tmp_table_size)
      - table_open_cache (vs Open_tables)
      - table_definition_cache (vs Open_table_definitions)
      - open_files_limit (‚â•2√ó table_open_cache)
      - thread_cache_size (>0 healthy)
      - wait_timeout (‚â•300s healthy)
      - innodb_log_file_size (‚â•512MB healthy)
      - innodb_flush_log_at_trx_commit (1=healthy, 2=warning, 0=critical)
      - sync_binlog (1=healthy, 0=warning)
      - innodb_read_io_threads (‚â•4 healthy)
      - innodb_write_io_threads (‚â•4 healthy)

18. ADDITIONAL CONFIG VARIABLES
    ‚Ä¢ Added 8 new variables to Important Config (total: 30):
      - innodb_read_io_threads
      - innodb_write_io_threads
      - innodb_sync_array_size
      - innodb_change_buffering
      - binlog_group_commit_sync_delay
      - slave_parallel_workers
      - slave_preserve_commit_order
      - max_prepared_stmt_count

19. PROCESSLIST QUERY FILTER
    ‚Ä¢ Added query filter to Processlist tab
    ‚Ä¢ Filters by Info column content (SQL query)
    ‚Ä¢ Case-insensitive substring matching
    ‚Ä¢ Useful for filtering by: SELECT, UPDATE, table names, etc.

20. PARALLEL COMMAND EXECUTION
    ‚Ä¢ MySQL commands now run in PARALLEL (4 concurrent connections)
    ‚Ä¢ Uses ThreadPoolExecutor for concurrent execution
    ‚Ä¢ Significantly faster collection (~4x speedup)
    ‚Ä¢ Example: 4 commands √ó 2s each = 2s total (vs 8s sequential)

21. TIMING METRICS IN UI
    ‚Ä¢ Added timing.json with per-command metrics
    ‚Ä¢ Shows total collection time with ‚ö° indicator
    ‚Ä¢ Expandable "Command Timing" dropdown showing:
      - Per-command duration
      - Success/failure status (‚úì/‚úó)
    ‚Ä¢ Helps identify slow commands or network issues

22. JOB NAMING
    ‚Ä¢ Added optional "Job Name" input field on homepage
    ‚Ä¢ Job name displayed in jobs list and job detail pages
    ‚Ä¢ Falls back to job ID if no name provided
    ‚Ä¢ Helps organize collection runs (e.g., "Load test baseline")
    ‚Ä¢ Added `name` column to Job model in SQLite

23. INSTANT TOOLTIPS FOR CONFIG HEALTH
    ‚Ä¢ Replaced browser default tooltip (slow ~500ms delay)
    ‚Ä¢ Custom Alpine.js tooltip shows instantly on hover
    ‚Ä¢ Styled with dark theme matching the app

24. JOB COMPARISON FEATURE
    ‚Ä¢ New /compare page to select two completed jobs
    ‚Ä¢ Compares only hosts that exist in both jobs
    ‚Ä¢ Global Status: numeric diff with delta (increase=red, decrease=green)
      - Metrics: Threads_running, Slow_queries, Select_scan, etc.
    ‚Ä¢ Processlist: summary comparison (total, long_running, users)
    ‚Ä¢ Config Variables: side-by-side with changed values highlighted
    ‚Ä¢ InnoDB Status: unified text diff with +/- lines
    ‚Ä¢ Added "Compare" link to main navigation
    ‚Ä¢ No database storage - loads directly from filesystem

25. UI IMPROVEMENTS
    ‚Ä¢ Instant tooltips for hostname hover (homepage, job detail)
    ‚Ä¢ MySQL database favicon
    ‚Ä¢ "Commands to Execute" updated with all 4 commands + descriptions
    ‚Ä¢ Command timing shows actual names (InnoDB Status, Global Status, etc.)
    ‚Ä¢ Job Name label shows "(optional)" inline
    ‚Ä¢ Host detail tabs reordered: InnoDB first, Raw Output last

26. REGRESSION DETECTION HEURISTICS
    ‚Ä¢ Added automatic regression detection when comparing jobs
    ‚Ä¢ 8 deterministic rules implemented:
      - Thread pressure (Threads_running > 50% increase + > CPU cores)
      - Slow query rate increase
      - Temp table disk spill ratio increase
      - Row lock contention (waits + avg time)
      - Buffer pool efficiency drop (> 1%)
      - Table cache overflow/miss increase
      - Redo log contention (Innodb_log_waits)
      - Long-running queries increase (Time > 10s)
    ‚Ä¢ Regression Summary section at top of comparison results
    ‚Ä¢ üî¥ Critical (red) and üü° Warning (yellow) severity levels
    ‚Ä¢ ‚úÖ "No Regressions Detected" when metrics stable
    ‚Ä¢ Click "View Details" to jump to affected host tab
    ‚Ä¢ Pure function: detect_regressions() in compare.py

27. REGRESSION NOISE REDUCTION & ROOT-CAUSE HIERARCHY
    ‚Ä¢ Root-cause hierarchy: threads > locking > table_cache > buffer_pool > redo_log > temp_tables > processlist
    ‚Ä¢ Noise reduction rules:
      - Rule 1: Root cause suppression (thread_pressure suppresses processlist/temp_tables)
      - Rule 2: Low signal suppression (< 5% delta AND small absolute value)
      - Rule 3: Cold start suppression (uptime < 600s ‚Üí skip buffer_pool/table_cache)
      - Rule 4: Single event downgrade (1 event ‚Üí critical ‚Üí warning)
      - Rule 5: Cross-host correlation (all hosts affected ‚Üí downgrade severity)
    ‚Ä¢ Suppressed regressions preserved with reason
    ‚Ä¢ "Show suppressed issues" toggle in UI
    ‚Ä¢ Suppressed items shown in gray, smaller font, with explanation
    ‚Ä¢ Pure function: refine_regressions() in compare.py

28. HOSTS FILE OVERRIDE
    ‚Ä¢ Added MASC_HOSTS_FILE environment variable to override hosts.yaml path
    ‚Ä¢ Added MASC_RUNS_DIR environment variable to override runs directory
    ‚Ä¢ Startup log shows which hosts file is being used

29. PYPI PACKAGE PUBLISHING
    ‚Ä¢ Renamed project: MySQL Observer ‚Üí MySQL Awesome Stats Collector (MASC)
    ‚Ä¢ Package name: mysql-awesome-stats-collector
    ‚Ä¢ CLI commands: `masc` (short) and `mysql-awesome-stats-collector` (full)
    ‚Ä¢ Added CLI entry points with --host, --port, --reload, --hosts-file, --version
    ‚Ä¢ Created docs/PUBLISHING.md with PyPI upload instructions
    ‚Ä¢ Updated pyproject.toml with full PyPI metadata
    ‚Ä¢ Created MANIFEST.in for including templates
    ‚Ä¢ Package ready for: pip install mysql-awesome-stats-collector

30. HOST SELECTOR DROPDOWN IN BREADCRUMB
    ‚Ä¢ Made DB name in breadcrumb clickable to open dropdown
    ‚Ä¢ Dropdown shows all hosts from current job
    ‚Ä¢ Status indicators (üü¢ completed, üî¥ failed, üü° running, ‚ö™ pending)
    ‚Ä¢ Current host highlighted with checkmark
    ‚Ä¢ Tab preserved when switching hosts
    ‚Ä¢ Click outside to close dropdown

31. BUFFER POOL SUMMARY CARD
    ‚Ä¢ New compact card showing InnoDB Buffer Pool metrics
    ‚Ä¢ Derived from existing SHOW GLOBAL STATUS and SHOW GLOBAL VARIABLES (no extra queries)
    ‚Ä¢ Metrics displayed:
      - Buffer Pool Size (GB)
      - Used memory (GB + %)
      - Free memory (GB + %)
      - Dirty Pages (%)
      - Hit Ratio (%)
      - Wait Free count
    ‚Ä¢ Health badge: üü¢ Healthy (‚â•99% hit, 0 waits), üü° Mild (97-99%), üî¥ Pressure (<97% or waits)
    ‚Ä¢ Stored in runs/job_<id>/<host>/buffer_pool.json
    ‚Ä¢ Appears on host detail page before tabs

32. HOT TABLES (OPTIONAL)
    ‚Ä¢ New optional "Collect Hot Tables" toggle on homepage
    ‚Ä¢ Queries performance_schema.table_io_waits_summary_by_index_usage
    ‚Ä¢ Shows top 10 most active tables by I/O operations
    ‚Ä¢ Metrics: Schema, Table, Reads, Writes, Total Ops
    ‚Ä¢ Stored in runs/job_<id>/<host>/hot_tables.json
    ‚Ä¢ Graceful handling when performance_schema is disabled
    ‚Ä¢ OFF by default (no extra queries unless enabled)
    ‚Ä¢ Card displays below Buffer Pool summary

33. HUMAN-READABLE NUMBERS IN HOT TABLES
    ‚Ä¢ Numbers in Hot Tables now display with K/M/B suffixes
    ‚Ä¢ Tooltips show exact values on hover
    ‚Ä¢ Uses instant tooltips (no delay)

34. CLIENT-SIDE TAB SWITCHING (NO PAGE REFRESH)
    ‚Ä¢ Tabs on host detail page now switch instantly without page refresh
    ‚Ä¢ Uses Alpine.js x-show for client-side tab visibility
    ‚Ä¢ All tab data loaded upfront for instant switching
    ‚Ä¢ Charts in Global Status tab initialize when tab becomes visible
    ‚Ä¢ Dramatically improved UX - no more page flickering or scroll position changes
    ‚Ä¢ Only host switching (via dropdown) requires server round-trip

35. HOT TABLES SORTING
    ‚Ä¢ Added sortable columns to Hot Tables section
    ‚Ä¢ Click column headers to sort ascending/descending
    ‚Ä¢ Sort indicator arrow shows current sort column and direction
    ‚Ä¢ Default sort: Total Ops (descending)

36. SERVER UPTIME DISPLAY
    ‚Ä¢ Added server uptime to main header (next to collection timestamp)
    ‚Ä¢ Shows human-readable format (e.g., "7d 12h", "3h 45m")
    ‚Ä¢ Tooltip shows exact seconds on hover
    ‚Ä¢ Uptime sourced from SHOW GLOBAL STATUS (Uptime variable)

37. HOT TABLES OPS/SEC COLUMN
    ‚Ä¢ New "Ops/sec" column showing average operations per second
    ‚Ä¢ Calculated from total_ops / server_uptime
    ‚Ä¢ Sortable like other columns
    ‚Ä¢ Provides normalized throughput metric for comparing tables

38. PARALLEL HOST COLLECTION
    ‚Ä¢ Fixed: Hosts were being collected serially (one after another)
    ‚Ä¢ Now all hosts are collected in parallel using ThreadPoolExecutor
    ‚Ä¢ Total job time = slowest host (not sum of all hosts)
    ‚Ä¢ Example: 4 hosts √ó 3s each = ~3s total (was ~12s)
    ‚Ä¢ Max 10 parallel workers to avoid overwhelming the system

39. INNODB HEALTH ANALYSIS
    ‚Ä¢ New "Health" tab on host detail page with comprehensive InnoDB analysis
    ‚Ä¢ Extracts and displays:
      - Deadlock information (timestamp, tables, indexes, operations, victim transaction)
      - Lock contention (waiting transactions count, wait details)
      - Hot indexes (indexes with most contention, lock types)
      - Semaphore/mutex health (RW-shared, RW-excl, RW-sx OS waits)
      - Redo log pressure (checkpoint age, log I/O rates, health trend)
    ‚Ä¢ Overall health status indicator (üü¢/üü°/üî¥)
    ‚Ä¢ Detailed breakdowns for each issue category
    ‚Ä¢ Noise reduction rules:
      - Only show latest deadlock
      - Warn on lock contention only if persistent or multiple transactions
      - Deduplicate hot indexes
      - Ignore semaphore spin counts, focus on OS waits
      - Redo log alerts based on trend, not absolute values
    ‚Ä¢ Stored as innodb_health.json (not in SQLite)

40. CUSTOM JINJA2 FILTERS
    ‚Ä¢ Added format_bytes filter: bytes ‚Üí KB/MB/GB/TB/PB
    ‚Ä¢ Added format_number filter: large numbers ‚Üí K/M/B/T
    ‚Ä¢ Added format_uptime filter: seconds ‚Üí human-readable (7d 12h, 3h 45m)
    ‚Ä¢ Simplified server uptime display using the new filter
    ‚Ä¢ Redo log details now use human-readable formatting with tooltips

41. ENHANCED DEADLOCK DETAILS
    ‚Ä¢ Added user and host extraction (e.g., polo-worker@172.20.61.93)
    ‚Ä¢ Added MySQL thread ID and query ID
    ‚Ä¢ Added active time (how long transaction was active)
    ‚Ä¢ Added row locks count, lock structs, undo log entries
    ‚Ä¢ Added actual SQL query extraction with:
      - Collapsible view for long queries (>150 chars)
      - Copy to clipboard button
      - Clean formatting (removes metadata lines)
    ‚Ä¢ Timestamp extraction improved to handle both formats

42. TAB PERSISTENCE & CLIENT-SIDE FILTERING
    ‚Ä¢ Tab state now persists on page refresh via URL parameter
    ‚Ä¢ Switching tabs updates URL with history.replaceState
    ‚Ä¢ Processlist filtering converted to client-side (no page reload)
    ‚Ä¢ Instant filtering as you type
    ‚Ä¢ Shows "Showing X of Y" count
    ‚Ä¢ "Clear All" button to reset all filters
    ‚Ä¢ No more scroll-to-top issues when filtering or switching tabs

43. JOBS LIST - HOSTS INCLUDED COLUMN
    ‚Ä¢ Added "Hosts Included" column showing all host labels for each job
    ‚Ä¢ Host names displayed as styled pill badges
    ‚Ä¢ Renamed "Hosts" column to "Progress" for clarity
    ‚Ä¢ Fixed progress column alignment (SVG icons instead of emojis)
    ‚Ä¢ Checkmarks and X marks now properly aligned with numbers

44. PROCESSLIST SQL PRETTIFICATION
    ‚Ä¢ Click on truncated SQL to open full-screen modal
    ‚Ä¢ Syntax highlighting with token-based lexer:
      - Keywords (SELECT, FROM, WHERE) in violet
      - Strings in green
      - Numbers in orange
      - Backtick identifiers in blue
      - Functions (NOW, CONCAT) in cyan
      - Comments (/* ... */) in gray italic
    ‚Ä¢ Auto line-breaks before major clauses (FROM, WHERE, JOIN, etc.)
    ‚Ä¢ Handles literal \n, \r, \t escape sequences
    ‚Ä¢ Modal header shows: Process ID, User, Host, Database
    ‚Ä¢ Copy button with green checkmark feedback (2 second animation)
    ‚Ä¢ Press Escape to close modal

45. REAL-TIME COLLECTION PROGRESS
    ‚Ä¢ Job detail page shows command-by-command progress during collection
    ‚Ä¢ Each host card displays:
      - Progress bar (X/6 commands completed)
      - Grid of command status with individual timings
      - Phase indicators: "Collecting data...", "Processing data...", "Querying hot tables..."
    ‚Ä¢ Command labels: InnoDB, Status, Processes, Variables, Replica, Master
    ‚Ä¢ Checkmark when command completes (with duration in seconds)
    ‚Ä¢ Spinner animation for pending commands
    ‚Ä¢ Red X for failed commands
    ‚Ä¢ Polls API every 1.5 seconds for real-time updates
    ‚Ä¢ Progress stored in progress.json per host

46. IMPROVED COLLECTION TIMING LOGS
    ‚Ä¢ Added separate timing for MySQL commands vs total collection
    ‚Ä¢ New log format: "Collection COMPLETED for {host} in X.Xs (commands: Y.Ys)"
    ‚Ä¢ Added parsing duration log: "Parsing completed for {host} in X.Xs"
    ‚Ä¢ Added hot tables duration in log output
    ‚Ä¢ Helps diagnose bottlenecks (commands vs parsing vs hot tables)

47. PARSER PERFORMANCE OPTIMIZATIONS
    ‚Ä¢ Rewrote _extract_section() using string operations instead of regex
      - Before: re.search(r"...(.*?)...", text, re.DOTALL) - O(n¬≤) backtracking
      - After: str.find() based extraction - O(n) single pass
    ‚Ä¢ Rewrote parse_lock_contention() to avoid catastrophic backtracking
      - Before: re.findall(r"---TRANSACTION.*?LOCK WAIT", section, re.DOTALL)
      - After: str.count() + split-based processing
    ‚Ä¢ Rewrote _extract_index_locks() for line-by-line processing
      - Only examines lines containing "RECORD LOCKS"
      - Avoids scanning entire TRANSACTIONS section
    ‚Ä¢ Added pre-compiled regex patterns at module level:
      - _RE_TIMESTAMP, _RE_TABLE_INDEX, _RE_INDEX_NAME
      - _RE_TRX_ID, _RE_TABLES_LOCKED, _RE_LOCK_STRUCTS
      - _RE_THREAD_INFO, _RE_HISTORY_LIST, _RE_WAIT_SEC
    ‚Ä¢ Result: Parsing time reduced from 100-140s to 1-5s on large outputs

48. HOT TABLES TIMEOUT REDUCTION
    ‚Ä¢ Reduced hot tables query timeout from 30s to 15s
    ‚Ä¢ Prevents long waits when performance_schema is slow under load
    ‚Ä¢ Query still runs with shorter timeout, gracefully times out if needed

49. INFORMATIONAL TOOLTIPS - INNODB STATUS TAB
    ‚Ä¢ Added contextual help tooltips (‚ÑπÔ∏è icon) throughout the UI
    ‚Ä¢ Hover to see definitions and explanations for MySQL/InnoDB concepts
    ‚Ä¢ Tooltips added to:
      Key Metrics Overview:
        - Buffer Pool Hit Rate: explains ratio and healthy values
        - Pool Utilization: explains what high/low values mean
        - Dirty Pages: explains modified pages awaiting flush
        - History List: explains undo log purge lag
        - Active Transactions: explains open transactions and connection leaks
        - Queries in InnoDB: explains kernel execution and queue
      Section Headers (with detailed technical explanations):
        - Row Operations: throughput and workload analysis
        - Buffer Pool & Memory: LRU, Made Young, Not Made Young
        - Redo Log: LSN, checkpoint age, crash recovery
        - File I/O: fsyncs, I/O threads configuration
        - Insert Buffer & Adaptive Hash Index: change buffer, AHI effectiveness
        - Transactions: transaction ID counter, purge gap
        - Background Thread: master thread loops
      Summary Cards:
        - Buffer Pool Summary: sizing guidelines (70-80% RAM)
        - Hot Tables: performance_schema source, ops/sec explanation
      Health Tab:
        - Deadlocks: detection, victim, optimization tips
        - Lock Contention: isolation levels, indexes
        - Redo Log Health: checkpoint age warnings, innodb_log_file_size
        - Deadlock Details: victim analysis tips
        - Waiting Transactions: hot-spot contention
        - Hot Indexes: bottleneck analysis
        - Semaphore/Mutex: internal locking (RW-Shared, RW-Excl, RW-SX)
        - Redo Log Details: LSN interpretation
    ‚Ä¢ Tooltip implementation:
        - Jinja2 macro for consistent styling
        - Hover-activated, no click required
        - Positioned right by default, supports left/bottom
        - Styled with app theme (midnight background, ocean border)
        - Arrow pointer indicates direction

50. INFORMATIONAL TOOLTIPS - ADDITIONAL PAGES
    ‚Ä¢ Global Status Tab:
      - Thread Connections chart: Threads_connected/running, Max_used_connections
      - Query Types chart: Com_select/insert/update/delete counters
      - InnoDB Row Operations chart: Innodb_rows_* counters
      - Network Bytes chart: Bytes_sent/received explanation
      - All Status Variables: search tips and data source
    ‚Ä¢ Processlist Tab:
      - Section header: Column definitions (ID, User, Host, DB, Command, Time, State, Info)
    ‚Ä¢ Config Tab:
      - Section header: Important variables with health indicators explanation
    ‚Ä¢ Replication Tab:
      - Replication Lag: Seconds_Behind_Master, NULL meaning
      - IO Thread: Slave_IO_Running, fetching binary log
      - SQL Thread: Slave_SQL_Running, relay log execution
    ‚Ä¢ Homepage (index.html):
      - "Collect Hot Tables" option: performance_schema query, safety notes
      - "Commands to Execute" section header: parallel execution, timeouts
      - Each MySQL command: detailed explanation of what it returns
    ‚Ä¢ Jobs List (jobs.html):
      - Hosts Included column
      - Status column: pending/running/completed/failed meanings
      - Progress column: success/failure counts
    ‚Ä¢ Compare Page (compare.html):
      - Base Job (Before): baseline selection guidance
      - Compare Job (After): when to use (deploys, incidents)
      - What Gets Compared section: regression detection overview
      - Global Status comparison: delta interpretation
      - Processlist comparison: what to look for
      - Config Vars comparison: change highlighting
      - InnoDB Status comparison: diff interpretation

51. VARIABLE-LEVEL TOOLTIPS FOR STATUS & CONFIG
    ‚Ä¢ Global Status Variables (~130 variables documented):
      - Connections & Threads: Aborted_*, Connections, Max_used_connections, Threads_*
      - Queries & Commands: Com_*, Questions, Queries, Slow_queries, Select_*, Sort_*
      - InnoDB Buffer Pool: Innodb_buffer_pool_read_*, pages_*, wait_free
      - InnoDB Row Operations: Innodb_rows_read/inserted/updated/deleted
      - InnoDB Locking: Innodb_row_lock_* (waits, time, current)
      - InnoDB I/O: Innodb_data_*, Innodb_os_log_*, Innodb_log_*
      - InnoDB Transactions: Innodb_history_list_length, purge_trx_id
      - InnoDB Pages: Innodb_pages_*, Innodb_dblwr_*
      - Table & Handler: Handler_read_*, Handler_write/update/delete, Open_*, Table_locks_*
      - Temp Tables: Created_tmp_disk_tables, Created_tmp_tables
      - Network: Bytes_sent, Bytes_received
      - Binary Log: Binlog_cache_*, Binlog_stmt_cache_*
      - Keys (MyISAM): Key_blocks_*, Key_read*, Key_write*
      - Query Cache: Qcache_* (deprecated in MySQL 8.0)
      - Performance Schema: Performance_schema_*_lost
      - Server: Uptime, Uptime_since_flush_status
    ‚Ä¢ Config Variables (~75 variables documented):
      - InnoDB Buffer Pool: innodb_buffer_pool_size/instances/chunk_size
      - InnoDB Redo Log: innodb_log_file_size, innodb_flush_log_at_trx_commit
      - InnoDB I/O: innodb_read_io_threads, innodb_write_io_threads, innodb_io_capacity
      - InnoDB Transactions: innodb_lock_wait_timeout, innodb_deadlock_detect
      - InnoDB Change Buffer: innodb_change_buffering, innodb_change_buffer_max_size
      - InnoDB Adaptive Hash: innodb_adaptive_hash_index
      - Connections: max_connections, thread_cache_size, wait_timeout
      - Query Execution: tmp_table_size, max_heap_table_size, sort_buffer_size
      - Table Cache: table_open_cache, table_definition_cache, open_files_limit
      - Binary Logging: binlog_format, sync_binlog, binlog_group_commit_*
      - Replication: slave_parallel_workers, replica_preserve_commit_order, gtid_mode
      - Performance Schema: performance_schema settings
      - Logging: slow_query_log, long_query_time, log_queries_not_using_indexes
    ‚Ä¢ Tooltips appear on hover over info icon (‚ÑπÔ∏è) next to variable name
    ‚Ä¢ Descriptions explain: purpose, recommended values, impact of changes

52. TOOLTIP POSITIONING FIX & RAW OUTPUT DOWNLOADS
    ‚Ä¢ Fixed tooltip cutoff on "Queries in InnoDB" metric card (changed to bottom position)
    ‚Ä¢ Added download button to Raw Output tab (downloads single host's raw output as .txt)
    ‚Ä¢ Added "Download All Raw" button on job detail page (downloads all hosts' raw outputs)
    ‚Ä¢ API endpoint: /api/jobs/{job_id}/raw-outputs for batch download

53. LOCAL TIMEZONE DISPLAY
    ‚Ä¢ All timestamps now display in browser's local timezone instead of UTC
    ‚Ä¢ Uses data-utc attribute with JavaScript conversion on page load
    ‚Ä¢ Applied to: Jobs list, Job detail, Host detail, Compare pages
    ‚Ä¢ Server stores UTC, client displays local time automatically

54. DOWNLOAD BUTTON ENHANCEMENTS
    ‚Ä¢ Download button shows green tick animation when completed (2 second feedback)
    ‚Ä¢ Filename includes datetime stamp: hostname_YYYYMMDD_HHMMSS.txt
    ‚Ä¢ "Download All Raw" also includes datetime in each filename
    ‚Ä¢ Consistent feedback pattern with copy-to-clipboard buttons

55. JOB RERUN FEATURE
    ‚Ä¢ Added "Re-run Job" button on completed/failed job pages
    ‚Ä¢ Creates new job with same hosts and settings as original
    ‚Ä¢ Auto-detects if "Collect Hot Tables" was enabled in original job
    ‚Ä¢ New job starts immediately with background collection
    ‚Ä¢ Re-run jobs don't inherit name to avoid "Re-run of Re-run of..." chains

56. BUFFER POOL SUMMARY ON JOB DETAIL
    ‚Ä¢ Added Buffer Pool Summary table below hosts list on job detail page
    ‚Ä¢ Shows all hosts' buffer pool metrics at a glance:
      - Pool Size (GB)
      - Used memory (GB + %)
      - Free memory (GB + %)
      - Hit Ratio (%) with color coding
      - Health badge (Good/Warning/Critical)
    ‚Ä¢ Only shown for completed hosts with buffer pool data
    ‚Ä¢ Clickable host names link to detailed host view

57. JOBS LIST UI IMPROVEMENTS
    ‚Ä¢ Job ID now shows only first 6 characters (cleaner table)
    ‚Ä¢ Replaced "View Details" button with two compact buttons:
      - "View" with eye icon - opens job detail
      - "Re-run" with refresh icon - re-runs the job
    ‚Ä¢ Actions column now center-aligned
    ‚Ä¢ Progress column simplified: removed "total" count, shows only succeeded/failed
    ‚Ä¢ Progress column data center-aligned
    ‚Ä¢ Re-run button only appears for completed/failed jobs

58. GLOBAL BUFFER POOL COMPARISON
    ‚Ä¢ New "Buffer Pool Overview" section on compare results page
    ‚Ä¢ Shows all hosts' buffer pool comparison in a single table
    ‚Ä¢ Columns: Host, Pool Size, Used (Job A & B), Hit Ratio (Job A & B)
    ‚Ä¢ Pool Size column shows change if size differs between jobs (e.g., "8 GB ‚Üí 16 GB")
    ‚Ä¢ Colored arrows in Job B columns indicate direction of change:
      - Used: amber ‚Üë (increased usage), green ‚Üì (decreased usage)
      - Hit Ratio: green ‚Üë (improved), red ‚Üì (degraded)
    ‚Ä¢ Row highlighting for degraded hit ratios (light red background)
    ‚Ä¢ Clickable host names jump to detailed host comparison
    ‚Ä¢ Sub-headers show Job A/Job B column grouping
    ‚Ä¢ Intuitive at-a-glance view for comparing buffer pools across all hosts

59. CONNECTIONS BY USER SUMMARY
    ‚Ä¢ New "Connections by User" summary table in Processlist tab
    ‚Ä¢ Aggregates connections from existing processlist data (no extra queries)
    ‚Ä¢ Columns: User, Active, Sleeping, Other, Total
      - Active (green): Command = 'Query' (executing SQL)
      - Sleeping (amber): Command = 'Sleep' (idle)
      - Other: Connect, Binlog Dump, Daemon, etc.
    ‚Ä¢ Footer row shows grand totals
    ‚Ä¢ Click on user name to auto-filter processlist below
    ‚Ä¢ Sorted by total connections (descending)
    ‚Ä¢ Equivalent to: SELECT USER, SUM(COMMAND='Query'), SUM(COMMAND='Sleep') 
      FROM information_schema.PROCESSLIST GROUP BY USER

60. STICKY BREADCRUMB NAVIGATION
    ‚Ä¢ Breadcrumb bar now stays fixed at top when scrolling
    ‚Ä¢ Always visible: Job ID, Job Name, Host Selector dropdown
    ‚Ä¢ Switch between hosts from anywhere on the page
    ‚Ä¢ Enhanced host selector button with server icon and highlight color
    ‚Ä¢ Dropdown includes "Switch Host" header for clarity
    ‚Ä¢ Smooth backdrop blur effect on scroll
    ‚Ä¢ Works on all tabs: InnoDB Status, Health, Global Status, etc.

61. CONNECTIONS BY USER PAGINATION
    ‚Ä¢ Connections by User table now shows only first 10 users by default
    ‚Ä¢ Header displays total user count (e.g., "15 users")
    ‚Ä¢ "Show all X users" button appears when there are more than 10
    ‚Ä¢ Footer totals always show aggregated values for ALL users
    ‚Ä¢ Click to expand/collapse the full list

62. SCHEDULED CRON JOBS
    ‚Ä¢ New "Crons" tab in navigation for scheduled automatic collection
    ‚Ä¢ Create scheduled jobs to run at specified intervals (15m, 30m, 1h, 6h, 24h, or custom)
    ‚Ä¢ Select which hosts to include in each schedule
    ‚Ä¢ Option to enable/disable hot tables collection per schedule
    ‚Ä¢ Background scheduler runs automatically on MASC startup
    ‚Ä¢ Dashboard shows:
      - Schedule name and ID
      - Included hosts (with badges)
      - Interval (human-readable: 30m, 1h, 6h)
      - Active/Paused status with visual indicator
      - Last run time with link to view job
      - Next scheduled run time
      - Total run count
    ‚Ä¢ Actions per schedule:
      - Run Now: Manually trigger immediate execution
      - Pause/Resume: Toggle schedule on/off
      - Delete: Remove schedule
    ‚Ä¢ Jobs created by cron are prefixed with "[Cron]" in name
    ‚Ä¢ Manual triggers are prefixed with "[Cron] ... (Manual)"
    ‚Ä¢ CronJob model stored in SQLite with:
      - id, name, host_ids (JSON), interval_minutes
      - collect_hot_tables, enabled, last_run_at, last_job_id
      - next_run_at, created_at, updated_at, run_count
    ‚Ä¢ Scheduler checks for due crons every 30 seconds
    ‚Ä¢ Graceful startup/shutdown handling
    ‚Ä¢ "How It Works" section explains the feature

63. JOBS LIST PERFORMANCE OPTIMIZATION
    ‚Ä¢ Added database indexes for faster queries:
      - jobs.created_at, jobs.status
      - job_hosts.job_id, job_hosts.host_id
    ‚Ä¢ Implemented eager loading for JobHost relationship
    ‚Ä¢ Pre-load all host configurations once (avoid repeated file reads)
    ‚Ä¢ Added pagination to jobs list (50 per page)
    ‚Ä¢ Pagination controls: Previous/Next, page numbers, total count
    ‚Ä¢ Significantly reduced load time for large job lists

64. RAW OUTPUT NEWLINE FIX
    ‚Ä¢ Fixed literal \n characters displaying instead of actual newlines
    ‚Ä¢ MySQL InnoDB status returns escaped newlines in tabular format
    ‚Ä¢ Added normalization at storage time (collector.py)
    ‚Ä¢ Added fallback conversion at display time (main.py)
    ‚Ä¢ Raw Output tab now displays properly formatted multi-line output

65. HOST SELECTOR DROPDOWN FIX
    ‚Ä¢ Fixed dropdown briefly appearing after page navigation
    ‚Ä¢ Added x-cloak to prevent flash until Alpine.js initializes
    ‚Ä¢ Added @click="open = false" on links to close immediately
    ‚Ä¢ Smoother transitions when switching between hosts

66. CONNECTION SUMMARY VIEW MODES
    ‚Ä¢ Enhanced "Connections by User" to "Connection Summary"
    ‚Ä¢ Three view modes with toggle buttons:
      - By User: Original view (groups by MySQL user)
      - By IP: Groups connections by source IP address
      - IP + User: Shows both columns for detailed breakdown
    ‚Ä¢ Sortable columns (click headers to sort):
      - IP: Sorted numerically (192.168.1.2 before 192.168.1.10)
      - User: Alphabetical sorting
      - Active/Sleeping/Other/Total: Numeric sorting
    ‚Ä¢ Sort indicators (‚Üë/‚Üì) show current sort column and direction
    ‚Ä¢ IP extracted from host field (strips port number)
    ‚Ä¢ Pagination: 10 rows default, expandable
    ‚Ä¢ Click user name to filter processlist below

67. ABOUT PAGE & BRANDING
    ‚Ä¢ Clickable "MySQL Awesome Stats Collector" header opens About page
    ‚Ä¢ About page displays author information:
      - Profile picture from GitHub avatar
      - Name: Kratik Jain (@k4kratik)
      - LinkedIn, GitHub, Polarsteps, X.com social links
      - Workplace: Primetrace Technologies (team behind Kutumb & Crafto)
      - Personal websites: kratik.dev, kratik.cloud
    ‚Ä¢ Zoomed profile picture within circular container
    ‚Ä¢ External links open in new tabs
    ‚Ä¢ Play Store links for Kutumb and Crafto apps
    ‚Ä¢ Clean, centered layout with gradient styling

68. HOMEPAGE CLEANUP
    ‚Ä¢ Removed "Commands to Execute (Parallel)" section from homepage
    ‚Ä¢ Cleaner focus on host selection and job configuration
    ‚Ä¢ Commands still documented in README and shown in Raw Output

69. DATABASE-BACKED HOST MANAGEMENT
    ‚Ä¢ New /hosts page for managing database connections via web UI
    ‚Ä¢ Full CRUD operations:
      - Add new hosts with label, host, port, user, password
      - Edit existing host configurations
      - Delete hosts (with confirmation)
      - Enable/disable hosts (disabled hosts not shown in job creation)
      - Test connection with real-time feedback
    ‚Ä¢ Host Groups for organization:
      - Create groups with name, description, color
      - Assign hosts to groups
      - Edit/delete groups
      - Color-coded group badges
    ‚Ä¢ Auto-migration from hosts.yaml:
      - On first load, imports existing hosts.yaml into database
      - Preserves host IDs and configurations
      - No data loss when upgrading
    ‚Ä¢ Database models: DBHost, DBGroup in SQLite
    ‚Ä¢ Schema migrations run automatically on startup
    ‚Ä¢ No server restart needed for host changes

70. AUTO-GENERATED IDS
    ‚Ä¢ Host ID auto-generated from label as URL-friendly slug
      - "Primary DB" ‚Üí "primary-db"
      - Handles duplicates by appending numbers: "primary-db-1"
    ‚Ä¢ Group ID auto-generated from name
      - "Production Servers" ‚Üí "production-servers"
    ‚Ä¢ Reduces user input errors
    ‚Ä¢ ID field hidden in create forms, shown only when editing

71. SECURITY RECOMMENDATIONS
    ‚Ä¢ Added security warning banner on homepage
    ‚Ä¢ Recommends using read-only MySQL user with limited access
    ‚Ä¢ Toggleable SQL instructions to create secure user:
      - CREATE USER 'masc_reader'@'%' IDENTIFIED BY '...'
      - GRANT SELECT ON *.* TO 'masc_reader'@'%'
      - GRANT PROCESS ON *.* (for SHOW PROCESSLIST)
      - GRANT REPLICATION CLIENT (for SHOW SLAVE STATUS)
    ‚Ä¢ Copy to Clipboard button with green tick animation
    ‚Ä¢ Warning for admin users: Shows alert when entering privileged
      usernames (root, admin, mysql.sys, etc.) in host forms
    ‚Ä¢ Encourages principle of least privilege

72. HOMEPAGE HOST GROUPS
    ‚Ä¢ Available Hosts section organized by DB Groups
    ‚Ä¢ Groups displayed as collapsible sections with:
      - Group name with colored badge
      - Toggle button to select/deselect all hosts in group
      - Host count display
    ‚Ä¢ Ungrouped hosts shown in separate section
    ‚Ä¢ Selected hosts show colored ring matching group color
    ‚Ä¢ Visual hierarchy for managing large host inventories
    ‚Ä¢ Consistent with /hosts page grouping

73. COPY TO CLIPBOARD ANIMATION FIX
    ‚Ä¢ Fixed Copy to Clipboard button not showing green tick
    ‚Ä¢ Issue: event.target not properly passed in onclick handler
    ‚Ä¢ Fix: Pass button element directly as function parameter
    ‚Ä¢ Green checkmark (‚úì) with "Copied!" text for 2 seconds
    ‚Ä¢ Applied to both homepage and hosts page SQL copy buttons

74. VERSION DISPLAY & API
    ‚Ä¢ Added version detection in app/__init__.py
    ‚Ä¢ Uses importlib.metadata to read installed package version
    ‚Ä¢ Falls back to "development" when running locally (not pip installed)
    ‚Ä¢ New /version API endpoint: returns {"version": "x.x.x"}
    ‚Ä¢ Version displayed in footer next to app name
    ‚Ä¢ Styled pill badge: ocean blue for releases, amber for development
    ‚Ä¢ Accessible globally in templates via app_version variable
    ‚Ä¢ CLI startup banner now displays version

75. UI POLISH & PRODUCTION READINESS
    ‚Ä¢ Navigation active state: Current page highlighted in nav bar
    ‚Ä¢ Mobile navigation: Hamburger menu for mobile devices
      - Collapsible menu with all navigation links
      - Animated open/close with smooth transitions
      - About link accessible on mobile
    ‚Ä¢ Jobs list pagination: Moved outside table container for proper spacing
    ‚Ä¢ Footer version badge: Fixed CSS class conflict for proper coloring
    ‚Ä¢ Meta tags: Added SEO description, theme-color, color-scheme
    ‚Ä¢ Responsive design improvements:
      - Homepage animation hidden on mobile for cleaner UX
      - Headers stack vertically on mobile (flex-col sm:flex-row)
      - Action buttons wrap and resize for small screens
      - Text sizes adjust (text-sm sm:text-base, text-2xl sm:text-3xl)
      - Button labels truncate on mobile (e.g., "Download" vs "Download All Raw")
      - Full-width buttons on mobile, auto-width on desktop
      - Jobs, Hosts, Crons pages all mobile-friendly
    ‚Ä¢ Overall consistency pass across all templates

