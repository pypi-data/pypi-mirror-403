[build-system]
requires = [
    "setuptools>=42",
    "setuptools_scm[toml]>=3.4.3",
    "wheel",
]
build-backend = "setuptools.build_meta"


[project]
name = "stillsuit"
dynamic = ["version"]
authors = [
  { name="Chad Hanna", email="crh184@psu.edu" },
]
description = "A place to store all that is precious."
readme = "README.md"
requires-python = ">=3.9"
classifiers = [
    "Programming Language :: Python :: 3",
    "License :: OSI Approved :: Mozilla Public License 2.0 (MPL 2.0)",
    "Operating System :: OS Independent",
]
dependencies = [
    "numpy",
    "pyyaml",
]

[project.scripts]
stillsuit-merge-reduce = "stillsuit.bin.merge_reduce:main"
stillsuit-show = "stillsuit.bin.show:main"

[project.optional-dependencies]
docs = [
    "mkdocs",
    "mkdocs-material",
    "mkdocstrings[python]",
]
test = [
    "pytest",
    "pytest-cov",
]
lint = [
    "black",
    "flake8",
    "flake8-pyproject",
    "isort",
]
dev = [
    "stillsuit[docs]",
    "stillsuit[lint]",
    "stillsuit[test]",
]

[project.urls]
Homepage = "https://git.ligo.org/greg/stillsuit"
Documentation = "https://greg.docs.ligo.org/stillsuit"
Issues = "https://git.ligo.org/greg/stillsuit/issues"

[tool.setuptools.packages.find]
where = ["src"]

[tool.setuptools_scm]
write_to = "src/stillsuit/_version.py"

[tool.pytest.ini_options]
addopts = "-p no:warnings"

[tool.flake8]
max-line-length = 88
exclude = [".git", "docs", "build", "dist", "_version.py"]
extend-ignore = [
    "E203",
    "E501",  # line too long - black handles what it can
    "S101",  # assert usage ok in tests/internal code
    "S110",  # try/except/pass
    "S311",  # pseudo-random not used for security
    "S608",  # SQL injection - internal DB interface, not user-facing
]
per-file-ignores = [
    "tests/*:B006",  # mutable defaults ok in test fixtures
]

[tool.isort]
profile = "black"
skip_glob = ["docs/*", "build/*", "dist/*"]

[tool.black]
force-exclude = "_version\\.py"
