/**
 * Chat Input Component Styles
 *
 * Styles for the chat input area including:
 * - SendButton positioning
 * - TokenProgressIndicator
 * - ModeSelector
 * - ContextRow
 *
 * These styles complement base.css which contains the base component styles.
 */

/* ==========================================================================
   SendButton Positioning
   ========================================================================== */

/**
 * Container for the React SendButton component.
 * Positioned absolutely within the input row, bottom-right corner.
 */
.sage-ai-send-button-container {
  position: absolute;
  bottom: 12px;
  right: 12px;
  z-index: 10;
}

/**
 * Button styles are positioned relative to the container.
 * The container handles absolute positioning within the input row.
 */
.sage-ai-send-button-container .sage-ai-send-button,
.sage-ai-send-button-container .sage-ai-cancel-button {
  position: relative;
  bottom: auto;
  right: auto;
}

/* ==========================================================================
   TokenProgressIndicator Positioning
   ========================================================================== */

/**
 * Container wrapper for the React TokenProgressIndicator component.
 * Positioned absolutely within the input row.
 */
.sage-ai-token-progress-container-wrapper {
  position: absolute;
  bottom: 13px;
  right: 48px;
  z-index: 10;
}

/**
 * The inner wrapper rendered by the React component.
 * Contains the progress circle and compact button.
 */
.sage-ai-token-progress-container-wrapper .sage-ai-token-progress-wrapper {
  position: relative;
  bottom: auto;
  right: auto;
  padding: 0 2px;
  border-radius: 4px;
}

/* Token progress container sizing */
.sage-ai-token-progress-container {
  width: 24px;
  height: 24px;
}

/* ==========================================================================
   ModeSelector Positioning
   ========================================================================== */

/**
 * Container for the React ModeSelector component.
 * Positioned absolutely within the input row, bottom-left corner.
 */
.sage-ai-mode-selector-container {
  position: absolute;
  bottom: 12px;
  left: 12px;
  z-index: 10;
}

/**
 * The ModeSelector is positioned relative to its container.
 * The container handles absolute positioning within the input row.
 */
.sage-ai-mode-selector-container .sage-ai-mode-selector {
  position: relative;
  bottom: auto;
  left: auto;
}

/* ==========================================================================
   React Bootstrap Dropdown Overrides
   ========================================================================== */

/**
 * Override React Bootstrap dropdown styles to match our custom design.
 * The dropdown uses Bootstrap's Dropdown component but with custom styling.
 */
.sage-ai-mode-selector-dropdown {
  z-index: 10;
}

/* Hide Bootstrap's default dropdown caret */
.sage-ai-mode-selector-dropdown .dropdown-toggle::after {
  display: none !important;
}

/* Override Bootstrap's dropdown-menu positioning */
.sage-ai-mode-selector-dropdown .dropdown-menu.sage-ai-mode-dropdown {
  /* Use our custom styling */
  min-width: 200px;
  padding: 6px;
  background: var(--jp-layout-color1);
  border: 0.5px solid var(--jp-border-color1);
  border-radius: 12px;
  box-shadow:
    0 10px 40px rgb(0 0 0 / 15%),
    0 4px 12px rgb(0 0 0 / 10%),
    0 0 0 1px rgb(255 255 255 / 5%);

  /* Override the original CSS that hides with opacity/visibility */
  opacity: 1 !important;
  visibility: visible !important;

  /* Override Popper.js inline transform - position above toggle */
  inset: auto auto 0 0 !important;
}

/* Override Bootstrap's dropdown-item styles */
.sage-ai-mode-selector-dropdown .dropdown-item.sage-ai-mode-option {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 6px 8px;
  border-radius: 8px;
  background: transparent;
  border: none;
  color: inherit;
}

.sage-ai-mode-selector-dropdown .dropdown-item.sage-ai-mode-option:hover,
.sage-ai-mode-selector-dropdown .dropdown-item.sage-ai-mode-option:focus,
.sage-ai-mode-selector-dropdown .dropdown-item.sage-ai-mode-option.active:hover,
.sage-ai-mode-selector-dropdown
  .dropdown-item.sage-ai-mode-option.active:focus {
  background: var(--jp-border-color1);
  color: inherit;
}

/* Active item looks the same as others - user can still reselect */
.sage-ai-mode-selector-dropdown .dropdown-item.sage-ai-mode-option.active {
  background: transparent;
  color: inherit;
}

/* ==========================================================================
   Compress Button Styles
   ========================================================================== */

.sage-ai-compress-button {
  border-radius: 4px;
  border: none;
  background: transparent;
  cursor: pointer;
  display: none; /* Hidden by default, shown when >= 40% */
  padding: 2px 4px;
  flex-shrink: 0;
  align-items: center;
  justify-content: center;
  font-size: 9px;
}

.sage-ai-compress-button:hover {
  background: var(--jp-layout-color2);
}

.sage-ai-compress-button.visible {
  display: flex;
}

/* ==========================================================================
   ContextRow Container
   ========================================================================== */

/**
 * Container for the React ContextRow component.
 * Uses display: contents so the inner .sage-ai-context-row flows directly
 * into the chatbox wrapper's layout without an extra wrapper element.
 */
.sage-ai-context-row-container {
  display: contents;
}
