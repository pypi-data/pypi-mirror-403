{"version":3,"file":"company_map.min.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACfA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AACA;AAGA;AAAA;AAAA;;;;;;;;;ACZA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;AAEA;AACA;AAUA;AAEA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;;;;AAAA;AAEA;AAAA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAXA;AAAA;;;AAcA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvEA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;ACaA;AAAA;;;AAIA;AAAA;;AACA;AAAA;AAAA;;;AALA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AGlBA;;ACAA;AACA;AACA;AACA;AACA;AACA;;AJJA;;;;;AAMA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;AKdA;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACNA;AACA;AAEA;AACA;AACA;AACA;AACA;AAMA;;;;AAJA;AACA;AACA;AAGA;AAWA;AAAA;AAAA;AACA;AACA;AAGA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClCA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AAEA;AAKA;AAEA;AACA;AAEA;AAAA;AAAA;AAEA;AAAA;AACA;AAGA;AACA;AACA;;AAEA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrCA;;ACAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAmDA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;AC3HA;AACA;AACA;AAEA;AACA;AAEA;;;;;;;;;;AAhBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAWA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;;;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BA;;ACAA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;AACA;AACA;AACA;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACNA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AChDA;;;;;AEAA;AACA;AACA;AACA;AACA","sources":["webpack://enDI/./src/css/leaflet-markercluster-style.css","webpack://enDI/./src/css/leaflet-markercluster-style.css?40d0","webpack://enDI/./src/components/TextWithBr.vue","webpack://enDI/./src/components/TextWithBr.vue?4515","webpack://enDI/./src/components/TextWithBr.vue?8e10","webpack://enDI/./src/components/company/CompanyMap.vue","webpack://enDI/./src/components/company/CompanyMap.vue?0790","webpack://enDI/./src/components/company/CompanyMap.vue?8bb3","webpack://enDI/./src/components/TabbedView.vue","webpack://enDI/./src/components/TabbedView.vue?1603","webpack://enDI/./src/components/TabHeader.vue","webpack://enDI/./src/components/TabHeader.vue?cf26","webpack://enDI/./src/components/TabHeader.vue?1518","webpack://enDI/./src/components/TabbedView.vue?ef29","webpack://enDI/./src/components/TabbedView.vue?9334","webpack://enDI/./src/views/company_map/App.vue","webpack://enDI/./src/views/company_map/App.vue?b258","webpack://enDI/./src/views/company_map/App.vue?9b58","webpack://enDI/./src/components/CollapsibleSearchFilters.vue","webpack://enDI/./src/components/CollapsibleSearchFilters.vue?d535","webpack://enDI/./src/components/CollapsibleSearchFilters.vue?1d98","webpack://enDI/./src/stores/company.js","webpack://enDI/./src/components/company/CompanyUrlSearchFilters.vue","webpack://enDI/./src/components/company/CompanyUrlSearchFilters.vue?e709","webpack://enDI/./src/components/company/CompanyUrlSearchFilters.vue?44f7","webpack://enDI/./src/views/company_map/company_map.js","webpack://enDI/webpack/bootstrap","webpack://enDI/webpack/runtime/chunk loaded","webpack://enDI/webpack/runtime/compat get default export","webpack://enDI/webpack/runtime/create fake namespace object","webpack://enDI/webpack/runtime/define property getters","webpack://enDI/webpack/runtime/ensure chunk","webpack://enDI/webpack/runtime/global","webpack://enDI/webpack/runtime/hasOwnProperty shorthand","webpack://enDI/webpack/runtime/make namespace object","webpack://enDI/webpack/runtime/runtimeId","webpack://enDI/webpack/runtime/publicPath","webpack://enDI/webpack/runtime/jsonp chunk loading","webpack://enDI/webpack/runtime/nonce","webpack://enDI/webpack/before-startup","webpack://enDI/webpack/startup","webpack://enDI/webpack/after-startup"],"sourcesContent":["export default __webpack_public_path__ + \"5a6cdb62371f4bc880e3e24e76589b1f.css\";","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoLinkTag.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import content from \"!!../../node_modules/file-loader/dist/cjs.js!./leaflet-markercluster-style.css\";\n      \n\nvar options = {};\n\n\n      options.insert = insertFn.bind(null, \"head\");\n    \n\nvar update = API(content, options);\n\n\n\nexport default {}","<script setup>\nimport { computed } from 'vue'\n\n/** Converts the new lines of a text into <br />\n *\n * \"foo \\n bar\" will be rendered as \"foo <br /> bar\"\n *\n * Prevents HTML injection.\n */\nconst props = defineProps({\n  'text': {type: String, required: true}\n})\nconst lines = computed(() => props.text.split(\"\\n\"))\n</script>\n\n<template>\n  <template v-for='(line, _, index) in lines'>\n    {{ line }}\n    <template v-if='index < lines.length'><br /></template>\n  </template>\n</template>\n\n","export { default } from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TextWithBr.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TextWithBr.vue?vue&type=script&setup=true&lang=js\"","import script from \"./TextWithBr.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TextWithBr.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\n  import 'leaflet/dist/leaflet.css'\n  // Import a static copy of the css; because for some reason importing it from npm pkg is buggy\n  import '/src/css/leaflet-markercluster-style.css'\n\n  import L from 'leaflet'\n  import {\n    LControlLayers,\n    LFeatureGroup,\n    LIcon,\n    LMap,\n    LMarker,\n    LPopup,\n    LTileLayer,\n  } from '@vue-leaflet/vue-leaflet'\n\n  import { LMarkerClusterGroup } from 'vue-leaflet-markercluster'\n\n  import { ref, watchEffect } from 'vue'\n\n  import IconSpan from '@/components/IconSpan.vue'\n  import { useConstStore } from '@/stores/const'\n  import http from '@/helpers/http'\n  import Icon from '@/components/Icon.vue'\n  import TextWithBr from '@/components/TextWithBr.vue'\n\n  const loading = ref(true)\n  const endiConfig = ref({})\n\n  const mapBounds = ref(new L.Bounds())\n  const constStore = useConstStore()\n  const companiesGeoData = ref()\n  const extraPlacesGeoData = ref()\n  // Track current displayed popup to allow lazyload of logos.\n  const currentCompanyId = ref()\n  \n  const props = defineProps({\n    companiesUrl: {type: String, required: true},\n    extraPlacesUrl: {type: String, required: true},\n  })\n\n\n  const showLayerInMap = (layer) => {\n    const bounds = layer.getBounds()\n    if (mapBounds.value.isValid()) {\n      mapBounds.value.extend(bounds)\n    } else {\n      mapBounds.value = bounds\n    }\n  }\n\n  endiConfig.value = await constStore.loadConst('config')\n\n  await Promise.allSettled([\n      http.get(props.companiesUrl),\n      http.get(props.extraPlacesUrl)\n  ]).then(([companies_response, extraplaces_response]) => {\n      if (companies_response.status == 'fulfilled' && companies_response.value) {\n          companiesGeoData.value = companies_response.value\n      }\n      if (extraplaces_response.status == 'fulfilled' && extraplaces_response.value) {\n          extraPlacesGeoData.value = extraplaces_response.value\n      }\n      loading.value = false\n  })\n  \n\n  // Update companies layer if URL changes\n  watchEffect(async () => {\n      companiesGeoData.value = await http.get(props.companiesUrl)\n    },\n  )\n\n</script>\n\n<template>\n  <div v-if='loading'>Chargement…</div>\n  <div style='width: 100%; height: 70vh' class='toggle'>\n    <l-map ref='map' :center='[47.21297, -1.55104]' :zoom='18' :bounds='mapBounds'>\n      <l-control-layers position=\"topright\" :collapsed='false'></l-control-layers>\n      <l-tile-layer\n        :url='endiConfig.leaflet_layer_url'\n        attribution='&copy; Contributeur·ices <a target=\"_blank\" href=\"http://osm.org/copyright\">OpenStreetMap</a>'\n      />\n\n      <l-feature-group\n        name='Lieux ressources' key='places'  layer-type='overlay'\n        @ready='showLayerInMap'\n      >\n        <l-marker\n          v-if='extraPlacesGeoData'\n          v-for='feature in extraPlacesGeoData.features'\n          :lat-lng='L.GeoJSON.coordsToLatLng(feature.geometry.coordinates)'\n        >\n          <l-icon>\n            <IconSpan name='location-star' css-class='map_location favourite' :alt='feature.properties.name'/>\n          </l-icon>\n          <l-popup>\n            <div>\n              <p>\n                <strong>{{ feature.properties.name }}</strong>\n              </p>\n              <p v-if='feature.properties.description'>\n                <TextWithBr :text='feature.properties.description' />\n              </p>\n              <ul class='contacts'>\n                <li v-if='feature.properties.website'>\n                    <a :href='feature.properties.website'>\n                      <IconSpan name='globe' alt='Site web' title='Site web'/>\n                      {{ feature.properties.website }}\n                    </a>\n                </li>\n                <li v-if='feature.properties.contact'>\n                  <IconSpan name='user'  alt='' />\n                  Contact : {{ feature.properties.contact }}\n                </li>\n              </ul>\n            </div>\n          </l-popup>\n        </l-marker>\n      </l-feature-group>\n\n      <l-marker-cluster-group\n        name='Enseignes et entrepreneur·euses' key='companies' layer-type='overlay'\n        @ready='showLayerInMap'\n      >\n        <l-marker\n          v-for='feature in companiesGeoData.features'\n          :lat-lng='L.GeoJSON.coordsToLatLng(feature.geometry.coordinates)'\n          @popupopen='currentCompanyId = feature.properties.id'\n        >\n          <l-icon>\n            <IconSpan name='location-dot' css-class='map_location' :alt='feature.properties.name' />\n          </l-icon>\n            <l-popup>\n              <div>\n                <p>\n                  <strong>{{ feature.properties.name }}</strong>\n                </p>\n                <p v-if='feature.properties.goal'><em>{{ feature.properties.goal}}</em></p>\n                <p v-if='feature.properties.activities_labels.length > 0'>\n                  {{ feature.properties.activities_labels.join(', ') }}\n                </p>\n                <ul class=\"contacts\">\n                  <li v-if='feature.properties.phone'>\n                    <a :href='`tel:${feature.properties.phone}`'>\n                      <IconSpan name='phone' alt=\"Téléphone\" title=\"Téléphone\" />\n                      {{ feature.properties.phone }}\n                    </a>\n                  </li>\n                  <li v-if='feature.properties.mobile'>\n                    <a :href='`tel:${feature.properties.mobile}`'>\n                      <IconSpan name='mobile-alt' title='Téléphone portable' alt=\"Téléphone portable\" />\n                      {{ feature.properties.mobile }}\n                    </a>\n                  </li>\n                  <li v-if='feature.properties.email'>\n                    <a :href='`mailto:${feature.properties.email}`'>\n                      <IconSpan name='envelope' title='E-mail' alt=\"E-mail\" />\n                      {{ feature.properties.email }}\n                    </a>\n                  </li>\n                </ul>\n                <ul class='users'>\n\n                  <li v-for='user in feature.properties.users_gallery'>\n                    <!--\n                         Renders only if the API gives us a logo\n                         + lazy-loading of logos to avoid mass-loading them on page startup.\n                    -->\n                    <span v-if='user.logo_url  && currentCompanyId === feature.properties.id' class='user_avatar photo'>\n                      <img :src='user.logo_url' :alt='user.fullname' width='48' height='48'/>\n                    </span>\n                    <span v-else class='user_avatar'>\n                      <Icon name='user' />\n                    </span>\n                    <span>\n                      {{ user.fullname }}\n                    </span>\n                  </li>\n                </ul>\n              </div>\n          </l-popup>\n        </l-marker>\n      </l-marker-cluster-group>\n    </l-map>\n  </div>\n\n\n</template>\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./CompanyMap.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./CompanyMap.vue?vue&type=script&setup=true&lang=js\"","import script from \"./CompanyMap.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CompanyMap.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script>\n  /** A Static tabbed view\n   *\n   * Static = the tabs point to HTTP URL, clicking on a tab header won't alter page, but load a new one.\n   */\n\n\nimport { defineComponent } from 'vue'\nimport Icon from '@/components/Icon.vue'\nimport TabHeader from '@/components/TabHeader.vue'\n  import IconSpan from '@/components/IconSpan.vue'\n\nexport default defineComponent({\n  components: { IconSpan, TabHeader, Icon }\n})\n</script>\n\n<template>\n  <ul class='nav nav-tabs' role='tablist'>\n    <slot name='headers' />\n  </ul>\n\n  <div class='tab-content content'>\n    <div id='list-container' class='tab-pane fade in active' role='tabpanel'>\n      <slot name='panels' />\n    </div>\n  </div>\n</template>\n\n","export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[2]!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabbedView.vue?vue&type=template&id=d7014288\"","<script setup>\ndefineProps({\n  href: {type: String, default: \"#\"},\n  active: {type: Boolean, default: false}\n})\n</script>\n\n\n<template>\n  <li role='presentation' :class='active ? \"active\" : \"\"'>\n    <a :href='href' role='tab'>\n      <slot></slot>\n    </a>\n  </li>\n</template>\n","export { default } from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabHeader.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabHeader.vue?vue&type=script&setup=true&lang=js\"","import script from \"./TabHeader.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TabHeader.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","export { default } from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabbedView.vue?vue&type=script&lang=js\"; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabbedView.vue?vue&type=script&lang=js\"","import { render } from \"./TabbedView.vue?vue&type=template&id=d7014288\"\nimport script from \"./TabbedView.vue?vue&type=script&lang=js\"\nexport * from \"./TabbedView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script setup>\n  import { ref, Suspense, watch } from 'vue'\n  import { collectOptions } from '@/helpers/context.js'\n\n  import CompanyMap from '@/components/company/CompanyMap.vue'\n  import TabbedView from '@/components/TabbedView.vue'\n  import IconSpan from '@/components/IconSpan.vue'\n  import TabHeader from '@/components/TabHeader.vue'\n  import { useRoute, useRouter } from 'vue-router'\n\n  const options = collectOptions()\n  const router = useRouter()\n  const route = useRoute()\n\n  const extraPlacesUrl = '/public/cae_places.geojson'\n  const companiesFields = [\n    'id',\n    'name',\n    'phone',\n    'email',\n    'mobile',\n    'goal',\n    'activities_labels',\n    'logo_id',\n    'users_gallery',\n  ]\n  const baseCompaniesUrl = '/api/v1/companies.geojson?' + companiesFields.map(x => `fields=${x}`).join('&')\n  // We re-use companies editting form_config\n  const currentCompaniesUrl = ref(baseCompaniesUrl)\n\n\n  watch(() => route.query, (newQuery) => {\n    const queryString = new URLSearchParams(newQuery).toString()\n    currentCompaniesUrl.value = `${baseCompaniesUrl}&${queryString}`\n  })\n\n</script>\n\n<template>\n  <Suspense>\n    <RouterView name='CompanyURLSearchFilters' v-slot='{ Component }'>\n      <component :is='Component' />\n    </RouterView>\n    <template #fallback>Chargement…</template>\n  </Suspense>\n  <Suspense>\n    <TabbedView>\n      <template #headers>\n        <TabHeader :href=\"options.tab_url\">\n          <IconSpan name='list' alt=\"\" />\n          {{options.tab_title}}\n        </TabHeader>\n        <TabHeader active>\n          <IconSpan name='map-location-dot' alt=\"\" />\n          Carte des enseignes\n        </TabHeader>\n      </template>\n      <template #panels>\n        <CompanyMap :companiesUrl='currentCompaniesUrl' :extraPlacesUrl='extraPlacesUrl'/>\n\n      </template>\n    </TabbedView>\n    <template #fallback> Chargement...</template>\n  </Suspense>\n</template>\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./App.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./App.vue?vue&type=script&setup=true&lang=js\"","import script from \"./App.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<script setup>\n\n  import IconSpan from '@/components/IconSpan.vue'\n  import Icon from '@/components/Icon.vue'\n  import Button from '@/components/Button.vue'\n  import { computed, ref, watch } from 'vue'\n  import { uniqueId } from '@/helpers/utils'\n\n  const props = defineProps({\n    title: { required: true, type: String },\n    initialCollapsedState: { type: Boolean, default: false },\n    initialFilters: { type: Object, default: {} },\n  })\n  const collapsedState = ref(props.initialCollapsedState)\n\n  const panelDomId = uniqueId('accordionPanel')\n  const titleDomId = uniqueId('accordionTitle')\n\n  const toggleCollapse = () => collapsedState.value = !collapsedState.value\n\n  const actionTitle = computed(() =>\n    collapsedState.value ? 'Afficher les champs de recherche' : 'Masquer les champs de recherche'\n  )\n\n  const emits = defineEmits(['applyFilters'])\n  // Filters will have one key per filter set\n  const filters = Object.assign({ }, props.initialFilters)\n\n  // The change event are emited by childs of the form (eg: <input>)\n  const setFilter = (e) => filters[e.target.name] = e.target.value\n\n  const applyFilters = (e) => {\n    e.preventDefault();\n    emits(\"applyFilters\", filters);\n  }\n  watch(\n    () => props.initialFilters,\n    () => Object.assign(filters, props.initialFilters),\n  )\n\n</script>\n\n<template>\n\n  <div class='collapsible search_filters expanded'>\n    <h2 class='collapse_title'>\n      <a href='#'\n         :id='titleDomId'\n         :aria-expanded='! collapsedState'\n         accesskey='R'\n         :title='actionTitle'\n         :aria-label='actionTitle'\n         @click='toggleCollapse'\n      >\n        <IconSpan name='search' alt=\"\" />\n        {{ title }}\n        <Icon class='arrow' name='chevron-down' />\n\n      </a>\n    </h2>\n    <div class='collapse_content'\n         :id='panelDomId'\n         :aria-labelledby='titleDomId'\n         :hidden='collapsedState'>\n      <div>\n        <form id='search_form' class='form-search form-inline'\n              @change='setFilter'\n              @submit='applyFilters'\n        >\n          <slot></slot>\n          <div>\n            <Button css='btn-primary' icon='search' buttonType='submit'\n                    title='Lancer la recherche avec ces critères'\n                    label='Lancer la recherche avec ces critères'\n            />\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n\n\n</template>\n","export { default } from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./CollapsibleSearchFilters.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./CollapsibleSearchFilters.vue?vue&type=script&setup=true&lang=js\"","import script from \"./CollapsibleSearchFilters.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CollapsibleSearchFilters.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n * Stores used during company add/edit\n */\nimport { defineStore } from 'pinia'\nimport getFormConfigStore from './formConfig'\nimport { collectionHelpers } from './modelStore'\nimport api from '@/api/index'\nexport const useCompanyConfigStore = getFormConfigStore('company')\n\n// Fields loaded by default via API call\nconst defaultFields = [\n    'goal',\n    'name',\n    'activities',\n    'email',\n    'phone',\n    'mobile',\n    'address',\n    'zip_code',\n    'city',\n    'latitude',\n    'longitude',\n    'logo',\n    'logo_id',\n    'cgv',\n    'header',\n    'header_id',\n    'decimal_to_display',\n    'internal',\n\n    'code_compta',\n\n    'general_customer_account',\n    'general_expense_account',\n\n    'third_party_customer_account',\n\n    'general_supplier_account',\n    'third_party_supplier_account',\n\n    'internalgeneral_customer_account',\n    'internalthird_party_customer_account',\n\n    'internalgeneral_supplier_account',\n    'internalthird_party_supplier_account',\n\n    'contribution',\n    'internalcontribution',\n\n    'insurance',\n    'internalinsurance',\n\n    'RIB',\n    'IBAN',\n\n    'antenne_id',\n    'follower_id',\n\n    'use_margin_rate_in_catalog',\n    'margin_rate'\n  ]\nexport const useCompanyStore = defineStore('company', {\n  state: () => ({\n    loading: true,\n    error: false,\n    collection: [],\n    collectionMetaData: {},\n    companyId: null,\n    item: {},\n  }),\n  actions: {\n    setCurrentCompanyId(companyId) {\n      this.companyId = companyId\n    },\n    async loadCompanies(companyId, options) {\n      this.loading = true\n      return api.companies\n        .getCompanies(companyId, options)\n        .then((result) => {\n          let collection\n          if (options.pageOptions && result.length == 2) {\n            this.collectionMetaData = result[0]\n            collection = result[1]\n          } else {\n            collection = result\n          }\n          this.loading = false\n          this.error = ''\n          this.collection = collection\n          return collection\n        })\n        .catch(this.handleError)\n    },\n    async loadCompany(companyId = null, fields = null) {\n      if (fields === null) {\n        fields = defaultFields\n      }\n      companyId = companyId || this.companyId\n      if (!companyId) {\n        throw Error('no Id provided')\n      }\n      this.loading = true\n      return api.companies\n        .load(companyId, fields)\n        .then((item) => {\n          this.loading = false\n          this.error = false\n          this.item = item\n          return item\n        })\n        .catch(this.handleError)\n    },\n    async handleError(error) {\n      this.loading = false\n      this.error = error\n      return Promise.reject(error)\n    },\n    async saveCompany(data) {\n      let companyId = this.companyId || data.id\n      if (companyId) {\n        return api.companies.update(data, companyId)\n      } else {\n        return this.createCompany(data)\n      }\n    },\n    async createCompany(data) {\n      if (data.id) {\n        throw Error('Company already exists (has an id)')\n      }\n      return api.companies.create(data)\n    }\n  },\n  getters: collectionHelpers('company'),\n})\n","<script setup>\n  /** Handles a search filters block bound with URL params\n   *\n   * This is a bidirectional bind between filters and URL:\n   *\n   * - filters inputs will be initialized with URL data\n   * - submitting the <form> will navigate to the current view with current filters as URL query\n   * - if initialFilters changes, filters will be set to initialFilters value\n   */\n\n  import Input from '@/components/forms/Input.vue'\n  import Select from '@/components/forms/Select.vue'\n  import CollapsibleSearchFilters\n    from '@/components/CollapsibleSearchFilters.vue'\n  import { useCompanyConfigStore } from '@/stores/company'\n  import { useRoute, useRouter } from 'vue-router'\n\n  const filtersFormConfigUrl = '/api/v1/companies.geojson?form_config=1'\n\n  const router = useRouter()\n  const route = useRoute()\n  const formConfigStore = useCompanyConfigStore()\n\n  const navigateTo = (filters) => {\n    router.push({ path: '/companies_map', query: filters })\n  }\n\n  formConfigStore.setUrl(filtersFormConfigUrl)\n  await formConfigStore.loadConfig()\n  const activitiesOptions = formConfigStore.getOptions('activities')\n</script>\n\n<template>\n  <CollapsibleSearchFilters\n    title='Recherche'\n    @applyFilters='navigateTo'\n    :initialFilters='route.query'\n  >\n    <Input\n      label='Nom, enseigne, activité' name='search'\n      :value='route.query.search'\n    />\n    <Select\n      label=\"Type d'activité\" name='activity_id'\n      :options='activitiesOptions'\n      :value='route.query.activity_id'\n      add-default\n      :default-option=\"{ id: '', label: '- Tous les types d\\'activité -' }\"\n    />\n    <Input\n      label='Code postal' name='postcode'\n      :value='route.query.postcode'\n    />\n  </CollapsibleSearchFilters>\n</template>\n","export { default } from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./CompanyUrlSearchFilters.vue?vue&type=script&setup=true&lang=js\"; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./CompanyUrlSearchFilters.vue?vue&type=script&setup=true&lang=js\"","import script from \"./CompanyUrlSearchFilters.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CompanyUrlSearchFilters.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { startApp } from '@/helpers/utils'\nimport App from './App.vue'\nimport CompanyURLSearchFilters\n  from '@/components/company/CompanyUrlSearchFilters.vue'\n\nconst routes = [\n  {path: '/companies_map', components: { CompanyURLSearchFilters } },\n]\n\nconst app = startApp(App, 'vue-app', routes)\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// The chunk loading function for additional chunks\n// Since all referenced chunks are already included\n// in this file, this function is empty here.\n__webpack_require__.e = () => (Promise.resolve());","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.j = 503;","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t503: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkenDI\"] = self[\"webpackChunkenDI\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [534], () => (__webpack_require__(7040)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":[],"sourceRoot":""}