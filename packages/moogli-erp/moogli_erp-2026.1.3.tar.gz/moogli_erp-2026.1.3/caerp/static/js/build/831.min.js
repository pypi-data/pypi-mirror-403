"use strict";(self.webpackChunkenDI=self.webpackChunkenDI||[]).push([[831],{7831:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var a=n(467),r=n(4756),o=n.n(r),i=n(641),l=n(953),s=n(810),c=n(5207),u=n(19),p=n(940),d=n(136),m=n(7546),f=n(7959),v=n(150),_=n(2752),g=n(33),k={class:"col_text"};const C={__name:"UserCell",props:{item:{type:Object,required:!0},getValue:{type:Function,required:!1},name:{type:String,required:!0}},setup:function(e){var t=e,n=(0,i.EW)(function(){return t.getValue?t.getValue(t.item):t.item[t.name]});return function(e,t){return(0,i.uX)(),(0,i.CE)("td",k,[n.value?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)((0,g.v_)(n.value.label),1)],64)):(0,i.Q3)("v-if",!0)])}}};var b=n(5979);const h={__name:"StatusCell",props:{item:{type:Object,required:!0}},setup:function(e){var t=e,n=(0,i.EW)(function(){return"cancelled"===t.item.status?"danger":"closed"===t.item.status?"success":"neutral"});return function(t,a){return(0,i.uX)(),(0,i.CE)("td",{class:(0,g.C4)("col_status ".concat(n.value))},["cancelled"===e.item.status?((0,i.uX)(),(0,i.Wv)(b.A,{key:0,name:"cross","css-class":["status",n.value]},null,8,["css-class"])):(0,i.Q3)("v-if",!0),"closed"==e.item.status?((0,i.uX)(),(0,i.Wv)(b.A,{key:1,name:"check","css-class":["status",n.value]},null,8,["css-class"])):(0,i.Q3)("v-if",!0)],2)}}},y=[{name:"status",title:"Statut",cellComponent:(0,l.IG)(h),css:"col_status"},{name:"execution_date",title:"Date d'émission",cellComponent:(0,l.IG)(f.A),sort:"execution_date",css:"col_date"},{name:"user",title:"Émis par",cellComponent:(0,l.IG)(C),sort:"user"},{name:"bank_account",title:"Compte bancaire",cellComponent:(0,l.IG)(_.A),componentOptions:{getValue:function(e){return e.bank_account?e.bank_account.label:""}}},{name:"reference",title:"Référence",cellComponent:(0,l.IG)(_.A),css:"col_text"},{name:"amount",title:"Montant TTC",cellComponent:(0,l.IG)(v.A),sort:"amount",css:"col_number",componentOptions:{intFormat:2}}];var A={key:0},R={key:1},L={class:"main_toolbar action_tools"},E={class:"layout flex main_actions"},F={role:"group"},X={key:0,class:"alert alert-info"},w={class:"col_actions width_two"},I={class:"btn-group"},T=["href"];const S={__name:"SepaCreditTransferListComponent",setup:function(e){var t=(0,l.KR)(!0),n=(0,d.Dn)(),r=(0,c.G)(),f=(0,c.S)();f.setUrl(n.form_config_url);var v=(0,s.bP)(r),_=v.creditTransferCollection,g=v.creditTransferLoadOptions,k=v.creditTransferCollectionMeta,C=(0,l.KR)({sort:g.value.sort,columnsDef:y,columns:y.map(function(e){return e.name})}),b=function(e,t){g.value.sort.sort=e,g.value.sort.sortDirection=t};function h(){return(h=(0,a.A)(o().mark(function e(){var a,i,l;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setInitialValues(n.credit_transfer_id),i=f.loadConfig(),l=r.loadCreditTransferCollection(),e.next=1,Promise.all([a,i,l]);case 1:t.value=!1;case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}return function(){h.apply(this,arguments)}(),function(e,n){var a=(0,i.g2)("RouterLink");return t.value?((0,i.uX)(),(0,i.CE)("div",A,"Chargement des informations")):((0,i.uX)(),(0,i.CE)("div",R,[(0,i.Lk)("div",L,[(0,i.Lk)("div",E,[(0,i.Lk)("div",F,[(0,i.bF)(a,{to:"/",class:"btn icon only"},{default:(0,i.k6)(function(){return[(0,i.bF)(m.A,{name:"arrow-left"}),n[3]||(n[3]=(0,i.eW)("  Revenir à la liste des règlements en attente "))]}),_:1,__:[3]})])])]),n[6]||(n[6]=(0,i.Lk)("h1",null,"Historique des virements SEPA",-1)),0===(0,l.R1)(k).total_count?((0,i.uX)(),(0,i.CE)("div",X," Aucun virement SEPA n'a été effectué. ")):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.bF)(p.A,{page:(0,l.R1)(g).pagination.page,"onUpdate:page":n[0]||(n[0]=function(e){return(0,l.R1)(g).pagination.page=e}),"items-per-page":(0,l.R1)(g).pagination.per_page,"onUpdate:itemsPerPage":n[1]||(n[1]=function(e){return(0,l.R1)(g).pagination.per_page=e}),pagination:(0,l.R1)(g).pagination,"onUpdate:pagination":n[2]||(n[2]=function(e){return(0,l.R1)(g).pagination=e}),"total-pages":(0,l.R1)(k).total_pages,"total-count":(0,l.R1)(k).total_count},null,8,["page","items-per-page","pagination","total-pages","total-count"]),(0,i.bF)(u.A,{items:(0,l.R1)(_),params:C.value,onSortBy:b},{rowActions:(0,i.k6)(function(e){var t=e.item;return[(0,i.Lk)("td",w,[(0,i.Lk)("div",I,[(0,i.bF)(a,{class:"btn icon only",to:"/orders/".concat(t.id),title:"Voir le détail de l'ordre de virement","aria-label":"Afficher le détail de l'ordre de virement"},{default:(0,i.k6)(function(){return[(0,i.bF)(m.A,{name:"eye"}),n[4]||(n[4]=(0,i.eW)(" Voir "))]}),_:2,__:[4]},1032,["to"]),(0,i.Lk)("a",{class:"btn icon only",href:"/files/".concat(t.file_id,"?action=download"),title:"Télécharger le fichier XML de l'ordre de virement","aria-label":"Ouvre une nouvelle fenêtre pour télécharger le fichier XML de l'ordre de virement",target:"_blank"},[(0,i.bF)(m.A,{name:"download"}),n[5]||(n[5]=(0,i.eW)(" Télécharger le fichier "))],8,T)])])]}),_:1},8,["items","params"])],64))]))}}}}}]);