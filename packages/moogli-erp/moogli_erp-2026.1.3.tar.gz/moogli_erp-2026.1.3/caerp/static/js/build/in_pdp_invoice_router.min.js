(()=>{"use strict";var e,t,n,o={5973:(e,t,n)=>{var o=n(641),r=n(953),a=n(5220);const i={},l=(0,n(6262).A)(i,[["render",function(e,t){return(0,o.uX)(),(0,o.CE)("div")}]]);var u={class:"container-fluid"};const s={__name:"App",setup:function(e){return function(e,t){return(0,o.uX)(),(0,o.CE)("div",u,[t[1]||(t[1]=(0,o.Lk)("h1",null,"Réception de factures",-1)),((0,o.uX)(),(0,o.Wv)(o.tY,null,{fallback:(0,o.k6)(function(){return t[0]||(t[0]=[(0,o.Lk)("div",{class:"loading-container"},[(0,o.Lk)("p",null,"Chargement des factures...")],-1)])}),default:(0,o.k6)(function(){return[(0,o.bF)((0,r.R1)(a.Tp))]}),_:1}))])}}};var c=n(296),p=n(467),d=n(4756),m=n.n(d),f=n(810),v=n(6355),g=n(181),b=n.n(g),_=n(3454),y=n(750),h=(0,_.A)("inPdpInvoice"),k="id,official_number,date,status,supplier[".concat("id,label","],company[").concat("id,name,active","]"),R={filters:{status:["pending"],remote_number:"",company_ids:[],supplier_ids:[]},sort:{sortDirection:"asc"},pagination:{page:1,per_page:50},fields:"id,remote_number,recipient_number,date,reception_date,ht,tva,ttc,supplier_invoices[".concat(k,"],status")},A=(0,f.nY)("inPdpInvoice",function(){var e=(0,r.KR)(!0),t=(0,r.KR)(null),n=(0,r.KR)({}),a=(0,r.KR)([]),i=(0,r.KR)({}),l=(0,r.KR)(R),u=function(){var t=(0,p.A)(m().mark(function t(){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,s();case 1:e.value=!1;case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),s=function(){var e=(0,p.A)(m().mark(function e(){var t,n,o=arguments;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=1,v.A.inPdpInvoices.loadCollection(t);case 1:n=e.sent,a.value=n.items,i.value=n.metadata;case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),c=b()(function(){return s()},y.Op);return(0,o.wB)(function(){return[l.value.pagination.page,l.value.pagination.per_page,l.value.sort,l.value.filters,l.value.fields]},function(){var t=(0,p.A)(m().mark(function t(n,o){return m().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.value){t.next=1;break}return console.log("Still loading, not listening yet"),t.abrupt("return");case 1:n[0]==o[0]&&n[0]>1?l.value.pagination.page=1:c();case 2:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),{deep:!0}),{loading:e,itemId:t,item:n,itemCollection:a,itemCollectionMeta:i,itemLoadOptions:l,setInitialValues:u,loadItemCollection:s}}),C=n(19),O=n(940),P=n(3751),w=n(5877),S=n(6741),I=n(4457),L={class:"form-group String"},V=["innerHTML"];const x={__name:"CheckboxList",props:(0,o.zz)({name:String,label:String,options:{type:Array},description:{type:String},idKey:{type:String,default:"id"},labelKey:{type:String,default:"label"},editable:{type:Boolean,default:!0},required:{type:Boolean,default:!1}},{modelValue:{type:Array},modelModifiers:{}}),emits:["update:modelValue"],setup:function(e){var t=e,n=(0,y.NF)(t.name),a=(0,o.fn)(e,"modelValue");return function(t,i){return(0,o.uX)(),(0,o.CE)("div",L,[(0,o.bF)(S.A,{label:e.label,required:e.required,"tag-id":(0,r.R1)(n)},null,8,["label","required","tag-id"]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.options,function(t,n){return(0,o.uX)(),(0,o.Wv)(I.A,{key:e.name+"-"+n,modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=function(e){return a.value=e}),label:t[e.labelKey],name:e.name,value:t[e.idKey],editable:e.editable,"div-css":"checkbox"},null,8,["modelValue","label","name","value","editable"])}),128)),e.description?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"help-block",innerHTML:e.description},null,8,V)):(0,o.Q3)("v-if",!0)])}}};var F=n(5251),E={class:"form-group"},j={class:"form-group"},T={class:"form-group"};const D={__name:"FilterForm",props:{filters:{},filtersModifiers:{}},emits:["update:filters"],setup:function(e){var t=(0,o.fn)(e,"filters"),n=h(),a=n.getOptions("suppliers"),i=n.getOptions("companies"),l=n.getOptions("in_pdp_invoices_statuses"),u=function(){};return function(e,n){return(0,o.uX)(),(0,o.Wv)(F.A,{title:"Recherche",icon:"search",class:"search_filters"},{content:(0,o.k6)(function(){return[(0,o.Lk)("form",{class:"form-search form-inline",onSubmit:(0,P.D$)(u,["prevent"])},[(0,o.bF)(x,{modelValue:t.value.status,"onUpdate:modelValue":n[0]||(n[0]=function(e){return t.value.status=e}),options:(0,r.R1)(l),label:"Statut"},null,8,["modelValue","options"]),(0,o.Lk)("div",E,[n[4]||(n[4]=(0,o.Lk)("label",{for:"remote_number"},"Numéro distant",-1)),(0,o.bo)((0,o.Lk)("input",{id:"remote_number","onUpdate:modelValue":n[1]||(n[1]=function(e){return t.value.remote_number=e}),type:"text",placeholder:"Saisir le numéro distant"},null,512),[[P.Jo,t.value.remote_number]])]),(0,o.Lk)("div",j,[n[5]||(n[5]=(0,o.Lk)("label",{for:"supplier_ids"},"Fournisseurs",-1)),(0,o.bF)((0,r.R1)(w.Ay),{id:"supplier_ids",modelValue:t.value.supplier_ids,"onUpdate:modelValue":n[2]||(n[2]=function(e){return t.value.supplier_ids=e}),options:(0,r.R1)(a),"preserve-search":!0,placeholder:"Sélectionner",label:"label","track-by":"id","show-labels":!1,multiple:!0,"close-on-select":!1,"clear-on-select":!1},null,8,["modelValue","options"])]),(0,o.Lk)("div",T,[n[6]||(n[6]=(0,o.Lk)("label",{for:"company_ids"},"Enseignes",-1)),(0,o.bF)((0,r.R1)(w.Ay),{id:"company_ids",modelValue:t.value.company_ids,"onUpdate:modelValue":n[3]||(n[3]=function(e){return t.value.company_ids=e}),options:(0,r.R1)(i),"preserve-search":!0,placeholder:"Sélectionner",label:"label","track-by":"id","show-labels":!1,multiple:!0,"close-on-select":!1,"clear-on-select":!1},null,8,["modelValue","options"])])],32)]}),_:1})}}};var U=n(7959),K=n(2752),M=n(150),X=n(9719);const G=[{name:"status",title:"Statut",cellComponent:(0,r.IG)(K.A),css:"col_status",sort:"status"},{name:"remote_number",title:"N° distant",cellComponent:(0,r.IG)(K.A),sort:"remote_number"},{name:"reception_date",title:"Date de réception",cellComponent:(0,r.IG)(U.A),sort:"reception_date",css:"col_date"},{name:"company",title:"Enseigne",cellComponent:(0,r.IG)(X.A),sort:"company"},{name:"supplier",title:"Fournisseur",cellComponent:(0,r.IG)(K.A),sort:"supplier",componentOptions:{getValue:function(e){var t;return(null===(t=e.supplier)||void 0===t?void 0:t.label)||""}}},{name:"ht",title:"Montant HT",cellComponent:(0,r.IG)(M.A),sort:"ht",css:"col_number",componentOptions:{intFormat:2}},{name:"tva",title:"TVA",cellComponent:(0,r.IG)(M.A),sort:"tva",css:"col_number",componentOptions:{intFormat:2}},{name:"ttc",title:"Montant TTC",cellComponent:(0,r.IG)(M.A),sort:"ttc",css:"col_number",componentOptions:{intFormat:2}}];var Q=n(136),B={key:0,class:"loading"},N={key:1,id:"app"},W={class:"col_actions width_one"},q={class:"btn-group"},$={key:0,class:"text-center py-4"},H=[{path:"/",component:{__name:"InInvoiceListComponent",setup:function(e){return(0,p.A)(m().mark(function e(){var t,n,a,i,l,u,s,d,f,v,g,b,_,y,k,R,P,w;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P=function(){return(P=(0,p.A)(m().mark(function e(){var t;return m().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[y(),f.loadConfig()],e.next=1,Promise.all(t);case 1:v.value=!1;case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)},R=function(){return P.apply(this,arguments)},s=(0,Q.Dn)(),d=A(),(f=h()).setUrl(s.form_config_url),v=(0,r.KR)(!0),g=d.itemCollection,b=d.itemCollectionMeta,_=d.itemLoadOptions,y=d.setInitialValues,k=(0,r.KR)({columns:["status","remote_number","reception_date","company","supplier","ht","tva","ttc"],columnsDef:G,sort:{sort:(null===(t=_.sort)||void 0===t?void 0:t.sort)||"id",sortDirection:(null===(n=_.sort)||void 0===n?void 0:n.sortDirection)||"desc"}}),w=function(e,t){_.sort={sort:e,sortDirection:t},k.value.sort={sort:e,sortDirection:t}},a=(0,o.E)(function(){return R()}),i=(0,c.A)(a,2),l=i[0],u=i[1],e.next=1,l;case 1:return u(),e.abrupt("return",function(e,t){var n=(0,o.g2)("Icon"),a=(0,o.g2)("RouterLink");return v.value?((0,o.uX)(),(0,o.CE)("div",B,t[7]||(t[7]=[(0,o.Lk)("p",null,"Chargement en cours...",-1)]))):((0,o.uX)(),(0,o.CE)("div",N,[(0,o.Q3)(" Filters Section "),(0,o.bF)(D,{filters:(0,r.R1)(_).filters,"onUpdate:filters":t[0]||(t[0]=function(e){return(0,r.R1)(_).filters=e})},null,8,["filters"]),(0,o.Q3)(" Pagination Top "),(0,o.bF)(O.A,{page:(0,r.R1)(_).pagination.page,"onUpdate:page":t[1]||(t[1]=function(e){return(0,r.R1)(_).pagination.page=e}),itemsPerPage:(0,r.R1)(_).pagination.per_page,"onUpdate:itemsPerPage":t[2]||(t[2]=function(e){return(0,r.R1)(_).pagination.per_page=e}),columns:k.value.columns,"onUpdate:columns":t[3]||(t[3]=function(e){return k.value.columns=e}),"total-pages":(0,r.R1)(b).total_pages||1,"total-count":(0,r.R1)(b).total_items||0,"columns-def":k.value.columnsDef},null,8,["page","itemsPerPage","columns","total-pages","total-count","columns-def"]),(0,o.Q3)(" Table "),(0,o.bF)(C.A,{items:(0,r.R1)(g),params:k.value,onSortBy:w},{rowActions:(0,o.k6)(function(e){var r=e.item;return[(0,o.Lk)("td",W,[(0,o.Lk)("div",q,[(0,o.bF)(a,{class:"btn icon only",to:"/inpdpinvoice/".concat(r.id),title:"Voir le détail de l'ordre de virement","aria-label":"Afficher le détail de l'ordre de virement"},{default:(0,o.k6)(function(){return[(0,o.bF)(n,{name:"eye"}),t[8]||(t[8]=(0,o.eW)(" Voir "))]}),_:2,__:[8]},1032,["to"])])])]}),_:1},8,["items","params"]),(0,o.Q3)(" Empty State "),0===(0,r.R1)(g).length?((0,o.uX)(),(0,o.CE)("div",$,t[9]||(t[9]=[(0,o.Lk)("p",{class:"text-muted"},"Aucune facture PDP trouvée.",-1)]))):(0,o.Q3)("v-if",!0),(0,o.Q3)(" Pagination Bottom "),(0,r.R1)(b).total_pages>1?((0,o.uX)(),(0,o.Wv)(O.A,{key:1,page:(0,r.R1)(_).pagination.page,"onUpdate:page":t[4]||(t[4]=function(e){return(0,r.R1)(_).pagination.page=e}),itemsPerPage:(0,r.R1)(_).pagination.per_page,"onUpdate:itemsPerPage":t[5]||(t[5]=function(e){return(0,r.R1)(_).pagination.per_page=e}),columns:k.value.columns,"onUpdate:columns":t[6]||(t[6]=function(e){return k.value.columns=e}),"total-pages":(0,r.R1)(b).total_pages||1,"total-count":(0,r.R1)(b).total_items||0,"columns-def":k.value.columnsDef},null,8,["page","itemsPerPage","columns","total-pages","total-count","columns-def"])):(0,o.Q3)("v-if",!0)]))});case 2:case"end":return e.stop()}},e)}))()}}},{path:"/inpdpinvoices/:id",component:l}];(0,y.Yk)(s,"vue-app",H,a.Bt)}},r={};function a(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return o[e].call(n.exports,n,n.exports,a),n.exports}a.m=o,e=[],a.O=(t,n,o,r)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,o,r]=e[c],l=!0,u=0;u<n.length;u++)(!1&r||i>=r)&&Object.keys(a.O).every(e=>a.O[e](n[u]))?n.splice(u--,1):(l=!1,r<i&&(i=r));if(l){e.splice(c--,1);var s=o();void 0!==s&&(t=s)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,o,r]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var r=Object.create(null);a.r(r);var i={};t=t||[null,n({}),n([]),n(n)];for(var l=2&o&&e;"object"==typeof l&&!~t.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach(t=>i[t]=()=>e[t]);return i.default=()=>e,a.d(r,i),r},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.e=()=>Promise.resolve(),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=949,(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={949:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var o,r,[i,l,u]=n,s=0;if(i.some(t=>0!==e[t])){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(u)var c=u(a)}for(t&&t(n);s<i.length;s++)r=i[s],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self.webpackChunkenDI=self.webpackChunkenDI||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var i=a.O(void 0,[534],()=>a(5973));i=a.O(i)})();