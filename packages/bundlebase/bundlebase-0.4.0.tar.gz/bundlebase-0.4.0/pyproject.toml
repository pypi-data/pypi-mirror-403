[tool.poetry]
name = "bundlebase"
version = "0.4.0"
description = "Like Docker, but for data"
authors = ["Nathan Voxland <nathan@voxland.net>"]
readme = "README.md"
license = "Apache-2.0"
homepage = "https://github.com/nvoxland/bundlebase"
repository = "https://github.com/nvoxland/bundlebase"
keywords = ["data", "arrow", "datafusion", "rust", "parquet", "etl", "data-processing"]
classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Developers",
    "License :: OSI Approved :: Apache Software License",
    "Programming Language :: Python :: 3",
    "Operating System :: OS Independent",
    "Topic :: Database",
]
packages = [{include = "bundlebase", from = "python/src"}]

[tool.poetry.urls]
"Bug Tracker" = "https://github.com/nvoxland/bundlebase/issues"
"Documentation" = "https://nvoxland.github.io/bundlebase/"
"Source Code" = "https://github.com/nvoxland/bundlebase"

[tool.poetry.dependencies]
python = "^3.13"
pyarrow = ">=14.0.0"
pandas = ">=2.0.0"
polars = {version = ">=0.20.0", optional = true}
numpy = {version = ">=1.20.0", optional = true}
nest-asyncio = {version = "^1.6.0", optional = true}
ipykernel = {version = "^7.1.0", optional = true}

[tool.poetry.group.dev.dependencies]
maturin-import-hook = "^0.3.0"
pytest = "^8.4"
pytest-asyncio = "^1.2"
pytest-timeout = "^2.3.1"
mypy = "^1.18.2"
snakeviz = "^2.2"

# Keep versions in sync with optional dependencies above
pandas = ">=2.0.0"
polars = ">=0.20.0"
numpy = ">=1.20.0"
nest-asyncio = "^1.6.0"
maturin = "^1.10.2"
pyyaml = "^6.0.3"

[tool.poetry.group.docs]
optional = true

[tool.poetry.group.docs.dependencies]
mkdocs = "^1.6.0"
mkdocs-material = "^9.5.0"
mkdocstrings = {extras = ["python"], version = "^1.0.0"}
pymdown-extensions = "^10.12.0"
mkdocs-gen-files = "^0.5.0"
mkdocs-literate-nav = "^0.6.0"
mkdocs-autorefs = "^1.4.0"
mkdocs-awesome-pages-plugin = "^2.10.1"

[tool.poetry.extras]
jupyter = ["nest-asyncio"]

[build-system]
requires = ["maturin>=1.7,<2.0"]
build-backend = "maturin"

[tool.maturin]
manifest-path = "rust/bundlebase-python/Cargo.toml"
python-source = "python/src"
module-name = "bundlebase._bundlebase"
features = ["extension-module"]

# Include README as long_description for PyPI
[project]
name = "bundlebase"
dynamic = ["version"]
readme = "README.md"
license = {file = "LICENSE"}
