[project]
name = "adc-toolkit"
dynamic = ["version"]
authors = [
    { name = "Ivan", email = "ivan.k@adc-consulting.com" },
    { name = "Jakob", email = "jakob.d@adc-consulting.com" },
    { name = "Marc", email = "marc@adc-consulting.com" },
    { name = "Martijn", email = "martijn.b@adc-consulting.com" },
    { name = "Niek", email = "niek.vdl@adc-consulting.com" },
    { name = "Nils", email = "nils.j@adc-consulting.com" },
    { name = "Rutger", email = "rutger.l@adc-consulting.com" },
    { name = "Noortje", email = "noortje.m@adc-consulting.com" },
    { name = "Ron", email = "ron.k@adc-consulting.com" }
]
description = "ADC toolkit, here to help you."
license = "MIT"
readme = "README.md"
requires-python = ">=3.10,<3.14"

dependencies = [
    "numpy>=2.2.2",
    "pandas>=2.2.3",
    "pyyaml>=6.0",
]

[project.urls]
Repository = "https://github.com/ADC-Consulting/adc-toolkit"
Documentation = "https://adc-consulting.github.io/adc-toolkit/adc_toolkit.html"

[project.scripts]
adc-toolkit = "adc_toolkit.cli.main:main"

# The optional dependency groups below can be installed using the following command:
# uv sync --extra <group_name>    # install including one extra group
# uv sync --all-extras            # install including all optional groups

[project.optional-dependencies]
dev = [
    "pytest>=7.1.2",
    "pytest-cov>=3.0.0",
    "pre-commit>=3.2.0",
    "ruff>=0.14.0",
    "pdoc>=15.0.1",
    "ipykernel>=6.13.0"
]
gcp = [
    "dbt-bigquery>=1.0.0",
    "gcsfs>=2023.9.2",
    "google-api-core>=2.8.2",
    "google-cloud-bigquery-storage>=2.13.0",
    "pandas-gbq>=0.19.2"
]
spark = [
    "pyspark>=3.5.0",
    "zstandard>=0.25.0"
]
kedro = [
    "kedro>=1.0.0",
    "kedro-datasets>=9.0.0",
    "pyarrow>=22.0.0",
    "fastparquet>=2023.7.0",
]
eda = [
    "matplotlib>=3.7.2",
    "statsmodels>=0.14.4",
]
gx = ["great-expectations>=0.18.2,<1.0.0"]
pandera = ["pandera>=0.24.0"]
logging = ["loguru>=0.7.2"]
preprocessing = ["scikit-learn>=1.5.2"]

[tool.mypy]
disallow_untyped_defs = true
ignore_missing_imports = true
no_implicit_optional = true
check_untyped_defs = true
show_error_codes = true
warn_unused_ignores = true

[tool.ruff]
line-length = 120
exclude = [
    ".git",
    ".venv",
    "__pycache__",
    "build",
    "dist",
    "*.egg-info",
    ".tox",
    ".mypy_cache",
    ".pytest_cache",
    ".ruff_cache",
]

[tool.ruff.lint]
select = [
    "E",      # pycodestyle errors
    "W",      # pycodestyle warnings
    "F",      # Pyflakes
    "I",      # isort (import sorting)
    "B",      # flake8-bugbear
    "C4",     # flake8-comprehensions
    "UP",     # pyupgrade
    "ARG",    # flake8-unused-arguments
    "SIM",    # flake8-simplify
    "TCH",    # flake8-type-checking
    "PL",     # Pylint
    "RUF",    # Ruff-specific rules
    # "D",    # pydocstyle (uncomment if you want docstring enforcement)
]
ignore = [
    "E501",   # Line too long (handled by formatter)
    "PLR0913", # Too many arguments
    "PLR2004", # Magic value comparison
]

[tool.ruff.lint.per-file-ignores]
"**/tests/*.py" = [
    "ARG",    # Unused arguments are common in test fixtures
    "PLR2004", # Magic values are fine in tests
    "F401",   # Unused imports are common in tests
    "F811",
]
"**/__init__.py" = [
    "F401",   # Unused imports in __init__.py are intentional re-exports
]
"**/default_attributes.py" = [
    "PLC0415", # Lazy imports are intentional for optional dependencies
]

[tool.ruff.lint.isort]
known-first-party = ["adc_toolkit"]
force-single-line = false
lines-after-imports = 2

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
skip-magic-trailing-comma = false
line-ending = "auto"
docstring-code-format = true  # Formats code examples in docstrings

# Optional: codespell configuration
[tool.codespell]
skip = "*.lock,*.min.js,*.min.css"
ignore-words-list = "nd,te,assertIn"  # Add false positives here

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.wheel]
packages = ["src/adc_toolkit"]

[tool.hatch.version]
path = "src/adc_toolkit/__init__.py"
