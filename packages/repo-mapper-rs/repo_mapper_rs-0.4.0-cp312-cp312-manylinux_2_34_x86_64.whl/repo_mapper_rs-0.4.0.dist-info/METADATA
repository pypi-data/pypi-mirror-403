Metadata-Version: 2.4
Name: repo-mapper-rs
Version: 0.4.0
Classifier: Programming Language :: Rust
Classifier: Programming Language :: Python :: Implementation :: CPython
Classifier: Programming Language :: Python :: Implementation :: PyPy
License-File: LICENSE
License-Expression: MIT
Requires-Python: >=3.10
Description-Content-Type: text/markdown; charset=UTF-8; variant=GFM

# repo-mapper-rs ğŸ¦€
[![PyPI Downloads](https://static.pepy.tech/badge/repo-mapper-rs)](https://pepy.tech/projects/repo-mapper-rs)


Rust implementation of [repo_mapper](https://github.com/second-ed/repo_mapper).

# What it does:
A CLI tool to scan a code repository and generate a structured file tree map, inserted into your `README.md` written in Rust.
The map is fenced inside a markdown code block under a `# Repo map` section, if one exists the existing one is replaced, else it is appended to the bottom of the `README.md`.

Supported functionality:
- .gitignore
- file extension filtering
- directory exclusion
- ignore hidden files

# Installation
```shell
pip install repo-mapper-rs
```
Or
```shell
uv add repo-mapper-rs
```

# Example usage:
```shell
python -m repo_mapper \
  --repo-root "/path/to/my_repo" \
  --readme-path "/path/to/my_repo/README.md" \
  --gitignore-path "/path/to/my_repo/.gitignore" \
  --allowed-exts "py,rs,toml" \
  --ignore-dirs ".venv,target" \
  --ignore-hidden
```
### This command:
- Traverses `/path/to/my_repo`
- Respects files excluded in `.gitignore` or listed in `--ignore-dirs`
- Includes only files with extensions `.py`, `.rs`, `.toml`. It's recommended to use this parameter to avoid unexpected files being added to the map.
- Skips hidden files and directories (those starting with a dot)
- Inserts or updates the `# Repo map` section in the README

# Args
| Argument           | Type                  | Required | Default | Description                                          |
| ------------------ | --------------------- | -------- | ------- | ---------------------------------------------------- |
| `--repo-root`      | `str`                 | âœ…       |  | Path to the root of the repository to scan           |
| `--readme-path`    | `str`                 | âŒ       | `'./README.md'` | Path to the README file that will be modified        |
| `--gitignore-path` | `str`                 | âŒ       | `'./.gitignore'` | Path to the `.gitignore` file                        |
| `--allowed-exts`   | Comma-separated `str` | âŒ       | `'py,md,toml,lock,yaml,ipynb'` | Extensions to include (e.g. `'py,rs,md'`). Note this is overruled by the `.gitignore`.             |
| `--ignore-dirs`    | Comma-separated `str` | âŒ       | `'.git,.venv,build,dist'` | Directories to exclude (e.g. `'.venv,target'`). If not supplied, all directories will be evaluated. Note this is overruled by the `.gitignore`.|
| `--output-mode`      | `str`        | âŒ       | `'readme'` | Output mode to display the tree: `choices=['readme', 'shell']`. |
| `--ignore-hidden`  | Flag (no value)       | âŒ       |  | If set, hidden files and directories will be ignored |
| `--dirs-only`      | Flag (no value)       | âŒ       |  | If set, only directories and subdirectories will be mapped (useful with larger codebases). |


<!--
repo-map-desc: Installation and simple docs
-->

# New Features:
### 0.4.0
- `repo-map-desc`:
    - adding `repo-map-desc:` to a line will treat everything after `repo-map-desc:` up to the end of the line as a file description.
    - that description is added to the corresponding file in the repo map
    - it will ignore any characters before `repo-map-desc:` (e.g. comments or code)
    - only apply to the first matching line per file

# Repo map
```
â”œâ”€â”€ .github
â”‚   â””â”€â”€ workflows
â”‚       â”œâ”€â”€ ci.yaml
â”‚       â””â”€â”€ publish.yaml
â”œâ”€â”€ python
â”‚   â””â”€â”€ repo_mapper
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ __main__.py       # Main CLI entry point
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ core
â”‚   â”‚   â”œâ”€â”€ domain
â”‚   â”‚   â”‚   â”œâ”€â”€ file_node.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ file_tree.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ repo_file.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ ret_codes.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ transform.rs  # Where the file tree is generated
â”‚   â”‚   â”‚   â””â”€â”€ utils.rs
â”‚   â”‚   â”œâ”€â”€ parsing
â”‚   â”‚   â”‚   â”œâ”€â”€ args.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ context.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ file_text.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ gitignore.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ mod.rs
â”‚   â”‚   â”‚   â””â”€â”€ readme.rs
â”‚   â”‚   â”œâ”€â”€ adapters.rs
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ api.rs                # The translation layer between python and rust
â”‚   â””â”€â”€ lib.rs
â”œâ”€â”€ tests
â”‚   â””â”€â”€ integration_tests.rs
â”œâ”€â”€ .pre-commit-config.yaml
â”œâ”€â”€ Cargo.lock
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ README.md                 # Installation and simple docs
â”œâ”€â”€ pyproject.toml
â””â”€â”€ uv.lock

(generated with repo-mapper-rs)
::
```

# Ret codes
| RetCode               | int | description           |
| ----------------------| --- | --------------------- |
| `NoModification`      | 0   | The Repo map reflects the current state of the repo. |
| `ModifiedReadme`      | 1   | The README was updated. |
| `FailedParsingFile`   | 2   | Failed to read the file to string. |
| `FailedToWriteReadme` | 3   | Failed to write the modified README to file. |
| `InvalidFilename`     | 4   | The given `README.md` or `.gitignore` path does not match the expected basename. |

