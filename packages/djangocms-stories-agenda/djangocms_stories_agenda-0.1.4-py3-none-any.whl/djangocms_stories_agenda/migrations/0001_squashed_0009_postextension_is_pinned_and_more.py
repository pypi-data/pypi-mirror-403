# Generated by Django 5.2.7 on 2025-11-20 10:47

import aldryn_apphooks_config.fields
from django.db import migrations, models
import django.db.migrations.operations.special
import django.db.models.deletion
import recurrence.fields
import taggit_autosuggest.managers


class Migration(migrations.Migration):
    initial = True

    dependencies = [
        ("cms", "0022_auto_20180620_1551"),
        ("djangocms_stories", "0001_initial"),
        ("taggit", "0005_auto_20220424_2025"),
    ]

    operations = [
        migrations.CreateModel(
            name="PostExtension",
            fields=[
                (
                    "id",
                    models.AutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("event_start_date", models.DateTimeField(verbose_name="Event start")),
                (
                    "post",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="extension",
                        to="djangocms_stories.post",
                    ),
                ),
                (
                    "event_end_date",
                    models.DateTimeField(
                        blank=True,
                        help_text="If the event is held over several days",
                        null=True,
                        verbose_name="Event end",
                    ),
                ),
                (
                    "is_pinned",
                    models.BooleanField(
                        default=False,
                        help_text="If the event is pinned on top of the agenda it will be displayed first whatever its start date",
                        verbose_name="Pinned on top of the agenda",
                    ),
                ),
                (
                    "recurrences_end_date",
                    models.DateField(blank=True, null=True),
                ),
                (
                    "recurrences",
                    recurrence.fields.RecurrenceField(blank=True, null=True),
                ),
            ],
            options={
                "verbose_name": "Event infos",
                "verbose_name_plural": "Events infos",
            },
        ),
        migrations.CreateModel(
            name="PastEventsPlugin",
            fields=[],
            options={
                "verbose_name": "Past events plugin",
                "verbose_name_plural": "Past events plugins",
                "proxy": True,
                "indexes": [],
                "constraints": [],
            },
            bases=("djangocms_stories.latestpostsplugin",),
        ),
        migrations.CreateModel(
            name="UpcomingEventsPlugin",
            fields=[
                (
                    "cmsplugin_ptr",
                    models.OneToOneField(
                        auto_created=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        parent_link=True,
                        primary_key=True,
                        related_name="djangocms_stories_agenda_upcomingeventspluginnew",
                        serialize=False,
                        to="cms.cmsplugin",
                    ),
                ),
                (
                    "current_site",
                    models.BooleanField(
                        default=True,
                        help_text="Select items from the current site only",
                        verbose_name="current site",
                    ),
                ),
                (
                    "template_folder",
                    models.CharField(
                        choices=[
                            ("plugins", "Modèle par défaut"),
                            ("detail_plugins", "Modèle d’affichage dans les articles"),
                        ],
                        default="plugins",
                        help_text="Select plugin template to load for this instance",
                        max_length=200,
                        verbose_name="Plugin template",
                    ),
                ),
                (
                    "latest_posts",
                    models.IntegerField(
                        default=5,
                        help_text="The number of latests articles to be displayed.",
                        verbose_name="articles",
                    ),
                ),
                (
                    "show_until_event_end",
                    models.BooleanField(
                        default=True, verbose_name="Show events until their end date"
                    ),
                ),
                (
                    "app_config",
                    aldryn_apphooks_config.fields.AppHookConfigField(
                        blank=True,
                        help_text="When selecting a value, the form is reloaded to get the updated default",
                        null=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        to="djangocms_stories.storiesconfig",
                        verbose_name="app. config",
                    ),
                ),
                (
                    "categories",
                    models.ManyToManyField(
                        blank=True,
                        help_text="Show only the blog articles tagged with chosen categories.",
                        to="djangocms_stories.postcategory",
                        verbose_name="filter by category",
                    ),
                ),
                (
                    "tags",
                    taggit_autosuggest.managers.TaggableManager(
                        blank=True,
                        help_text="Show only the blog articles tagged with chosen tags.",
                        through="taggit.TaggedItem",
                        to="taggit.Tag",
                        verbose_name="filter by tag",
                    ),
                ),
                (
                    "hide_events_after",
                    models.CharField(
                        choices=[
                            ("start", "just after event start date"),
                            ("start+1h", "1 hour after event start date"),
                            ("start+4h", "4 hours after event start date"),
                            ("start+1d", "1 day after event start date"),
                            ("start+2d", "2 days after event start date"),
                            ("start+3d", "3 days after event start date"),
                            ("start+7d", "7 days after event start date"),
                            ("end", "just after event end date"),
                        ],
                        default="start",
                        max_length=100,
                        verbose_name="Hide events",
                    ),
                ),
            ],
            options={
                "verbose_name": "Upcoming events plugin",
                "verbose_name_plural": "Upcoming events plugins",
            },
            bases=("cms.cmsplugin",),
        ),
        migrations.CreateModel(
            name="AgendaStoriesCategory",
            fields=[],
            options={
                "proxy": True,
                "indexes": [],
                "constraints": [],
            },
            bases=("djangocms_stories.postcategory",),
        ),
    ]
