# Snippet registrations for the Users Profiles module

defaults_context: &users_profiles_defaults
  default_timezone: UTC
  max_bio_length: 280
  avatar_max_bytes: 2_097_152
  allow_marketing_opt_in: true
  social_links_limit: 5
  default_visibility: public

snippets:
  - id: users_profiles_env
    target: .env,.env.example,.env.dev,.env.prod
    anchor: "# <<<inject:module-env>>>"
    template: users_profiles.snippet.j2
    features: [users_profiles]
    profiles: [fastapi/standard, nestjs/standard]
    description: Inject Users Profiles environment variables with defaults.
    version: "0.1.0"
    priority: 15
    dependencies: []
    context:
      fragment: env
      defaults: *users_profiles_defaults
    schema:
      type: object
      properties:
        USERS_PROFILES_DEFAULT_TIMEZONE:
          type: string
          default: UTC
          description: Default time zone value used when a profile omits one.
        USERS_PROFILES_MAX_BIO_LENGTH:
          type: integer
          default: 280
          description: Maximum characters allowed in biography fields.
      additionalProperties: true
      required: []
    metadata:
      author: "RapidKit Core Team"
      created_at: "2025-10-29"
      last_modified: "2025-10-29"
    conflict_resolution: merge

  - id: users_profiles_settings_fragment
    target: src/modules/free/essentials/settings/settings.py
    anchor: "# <<<inject:settings-fields>>>"
    template: users_profiles.snippet.j2
    features: [users_profiles, extendable_settings]
    profiles: [fastapi/standard]
    description: Extend project settings with Users Profiles configuration section.
    version: "0.1.0"
    priority: 20
    dependencies: []
    context:
      fragment: settings
      defaults: *users_profiles_defaults
    schema:
      type: object
      properties: {}
      additionalProperties: true
      required: []
    metadata:
      author: "RapidKit Core Team"
      created_at: "2025-10-29"
      last_modified: "2025-10-29"
    conflict_resolution: merge
