# Snippet registrations for the logging module
snippets:
  - id: logging_env
    target: .env,.env.dev,.env.prod,.env.example
    anchor: "# <<<inject:module-env>>>"
    template: env.snippet.j2
    features: [logging]
    profiles: [fastapi/standard, fastapi/ddd, nestjs/standard]
    description: Inject logging-related environment variables
    version: "1.0.0"
    priority: 10
    dependencies: []
    context:
      logging_defaults:
        level: INFO
        format: json
        sinks:
          - stderr
        file_path: logs/app.log
        async_queue: true
        sampling_rate: 1.0
        enable_redaction: true
        healthcheck_enabled: true
        healthcheck_path: /api/health/module/logging
    schema:
      type: object
      properties:
        LOG_LEVEL:
          type: str
          default: INFO
          description: Default logging level
          validation: "^(DEBUG|INFO|WARNING|ERROR|CRITICAL)$"
        LOG_FORMAT:
          type: str
          default: json
          description: Log output format
          validation: "^(json|text|colored)$"
        LOG_SINKS:
          type: string
          default: "[\"stderr\"]"
          description: JSON list of configured sinks (stderr,file,syslog)
        LOG_FILE_PATH:
          type: str
          default: logs/app.log
          description: File path when file sink is enabled
        LOG_ASYNC_QUEUE:
          type: bool
          default: true
          description: Use async queue dispatch for handlers
        LOG_SAMPLING_RATE:
          type: number
          default: 1.0
          description: Sampling rate for verbose loggers
        LOG_ENABLE_REDACTION:
          type: bool
          default: true
          description: Enable masking of sensitive values
        LOGGING_HEALTHCHECK_ENABLED:
          type: bool
          default: true
          description: Toggle logging module health probe
        LOGGING_HEALTHCHECK_PATH:
          type: str
          default: /api/health/module/logging
          description: Health endpoint path exposed by logging module
      additionalProperties: true
      required: []
    metadata:
      author: "RapidKit Core Team"
      created_at: "2025-10-30"
      last_modified: "2025-10-30"
    conflict_resolution: merge

  - id: logging_settings_fields
    target: src/modules/free/essentials/settings/settings.py
    anchor: "# <<<inject:settings-fields>>>"
    template: logging_fields.snippet.j2
    features: [extendable_settings, logging]
    profiles: [fastapi/standard, fastapi/ddd]
    description: Inject logging configuration fields into Python settings module
    version: "1.0.0"
    priority: 20
    dependencies: []
    context:
      logging_defaults:
        level: INFO
        format: json
        sinks:
          - stderr
        async_queue: true
        file_path: logs/app.log
        sampling_rate: 1.0
        enable_redaction: true
        correlation_header: X-Request-ID
        healthcheck_enabled: true
        healthcheck_path: /api/health/module/logging
    schema:
      type: object
      properties: {}
      additionalProperties: true
      required: []
    metadata:
      author: "RapidKit Core Team"
      created_at: "2025-10-30"
      last_modified: "2025-10-30"
    conflict_resolution: merge

  - id: logging_settings_fields_nestjs
    target: src/modules/free/essentials/settings/configuration.ts
    anchor: "// <<<inject:settings-fields>>>"
    template: logging_fields_nestjs.snippet.j2
    features: [logging]
    profiles: [nestjs/standard]
    description: Extend SettingsConfig interface with logging fields
    version: "1.0.0"
    priority: 20
    dependencies: []
    context:
      logging_defaults:
        level: INFO
        format: json
        sinks:
          - stderr
        async_queue: true
        file_path: logs/app.log
        sampling_rate: 1.0
        enable_redaction: true
        healthcheck_enabled: true
        healthcheck_path: /api/health/module/logging
    schema:
      type: object
      properties: {}
      additionalProperties: true
      required: []
    metadata:
      author: "RapidKit Core Team"
      created_at: "2025-10-30"
      last_modified: "2025-10-30"
    conflict_resolution: merge
