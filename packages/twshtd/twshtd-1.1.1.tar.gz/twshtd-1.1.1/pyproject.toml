[project]
name = "twshtd"
version = "1.1.1"
description = "Git repository synchronization tool"
readme = "README.md"
authors = [{ name = "sysid", email = "sysid@gmx.de" }]
requires-python = ">=3.12"
dependencies = [
    "typer>=0.15.1",
    "rich>=13.0.0",
]

[project.scripts]
twshtd = "twshtd.bin.cli:app"

[project.optional-dependencies]
rplc = ["rplc"]

[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[tool.uv]
managed = true
package = true

[dependency-groups]
dev = [
    "ruff",
    "coverage",
    "bump-my-version",
    "isort",
    "pre-commit",
    "pytest",
    "pytest-cov",
    "pytest-mock",
    "mypy",
    "build>=1.2.2.post1",
]

[tool.bumpversion]
current_version = "1.1.1"
parse = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+)"
serialize = ["{major}.{minor}.{patch}"]
tag = true
tag_name = "v{new_version}"
commit = true
message = "Bump version: {current_version} â†’ {new_version}"

[[tool.bumpversion.files]]
filename = "src/twshtd/bin/cli.py"
[[tool.bumpversion.files]]
filename = "VERSION"
[[tool.bumpversion.files]]
filename = "pyproject.toml"

[tool.pytest.ini_options]
markers = [
    "integration: marks tests as integration tests",
    "e2e: marks tests as e2e tests"
]
python_files = "*.py"
norecursedirs = ["wip"]

[tool.coverage.run]
source = ["src/twshtd"]
omit = ["tests/*", "**/__main__.py"]
branch = true

[tool.coverage.report]
show_missing = true
skip_covered = true
fail_under = 65

[tool.ruff]
exclude = [".venv", "build", "dist"]
line-length = 88
target-version = "py312"

[tool.ruff.lint]
select = ["E4", "E7", "E9", "F"]
fixable = ["ALL"]

[tool.ruff.format]
quote-style = "double"
indent-style = "space"
