[workspace]
members = ["crates/*"]
resolver = "3"

[workspace.package]
edition = "2024"
rust-version = "1.88"
version = "0.3.2"
license = "Apache-2.0 OR MIT"
repository = "https://github.com/bug-ops/pyhdb-rs"
authors = ["Andrei G <andrei.g@my.com>"]

[workspace.lints.rust]
missing_debug_implementations = "warn"
unsafe_op_in_unsafe_fn = "deny"
unused_lifetimes = "warn"
unused_qualifications = "warn"

[workspace.lints.clippy]
all = { level = "warn", priority = -1 }
pedantic = { level = "warn", priority = -1 }
nursery = { level = "warn", priority = -1 }
cargo = { level = "warn", priority = -1 }
# Allow some lints that are too strict
missing_errors_doc = "allow"
missing_panics_doc = "allow"
must_use_candidate = "allow"
cast_possible_wrap = "allow"
cast_possible_truncation = "allow"
cast_sign_loss = "allow"
multiple_crate_versions = "allow"

# Dependencies sorted ALPHABETICALLY - versions only (features in crates)
[workspace.dependencies]
arrow = { version = "57.0", default-features = false }
arrow-array = "57.0"
arrow-buffer = "57.0"
arrow-data = "57.0"
arrow-schema = "57.0"
bigdecimal = "0.4"
criterion = "0.8"
deadpool = { version = "0.12", default-features = false }
dhat = "0.3"
hdbconnect = "0.32"
hdbconnect_async = "0.32"
hdbconnect-arrow = { path = "crates/hdbconnect-arrow", version = "0.3.2" }
lru = "0.16"
num-bigint = "0.4"
num-traits = "0.2"
parking_lot = "0.12.5"
pyo3 = "0.27"
pyo3-arrow = "0.15"
pyo3-async-runtimes = "0.27"
serde = "1.0"
thiserror = "2.0"
tokio = "1.49"
url = "2.5"

# Fast dev profile with minimal optimizations for faster builds
[profile.dev]
opt-level = 1  # Some optimization for reasonable test speed
debug = true   # Keep debug symbols

[profile.release]
lto = "fat"
codegen-units = 1
opt-level = 3
strip = "symbols"
panic = "abort"

[profile.bench]
inherits = "release"
debug = true

[profile.release-with-debug]
inherits = "release"
debug = true
strip = false
