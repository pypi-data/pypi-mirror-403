import{j as t,d,t as l}from"./vendor-tanstack-BcZfOOfy.js";import{D as p,B as x,g as b,h as i,bs as f,bB as g,bD as j,bE as h,bF as v,bG as D,y as m}from"./index-m48E4KcG.js";import"./automation-schema-BIBsyp0j.js";import{A as B}from"./automation-wizard-EYSfXlQ7.js";import{t as N}from"./event-to-trigger-BEzU9b5I.js";import"./vendor-react-Bce9NwRC.js";import"./vendor-radix-BTiKGWfR.js";import"./vendor-recharts-BAN776s_.js";import"./vendor-forms-ClCIacbh.js";import"./vendor-date-wwuDAncJ.js";import"./zod-Cuos7J7w.js";import"./form-DLrbC7rV.js";import"./use-stepper-CDucnvzp.js";import"./textarea-B3_TtPRi.js";import"./index-BwCLKpNb.js";import"./radio-group-Co3cN0Kv.js";import"./collapsible-BVQTBG_U.js";import"./tags-input-BLPMVWpZ.js";const y=()=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(A,{}),t.jsx(p,{label:"Documentation",id:"automations-guide"})]}),A=()=>t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(x,{children:t.jsxs(b,{children:[t.jsx(i,{children:t.jsx(f,{to:"/automations",className:"text-xl font-semibold",children:"Automations"})}),t.jsx(g,{}),t.jsx(i,{className:"text-xl font-semibold",children:t.jsx(j,{children:"Create"})})]})})});function E(a){const[e,o,s]=a.split("-").map(Number);return new Date(e,o-1,s)}function S(){const{eventId:a,eventDate:e}=v.useSearch(),o=!!(a&&e),{data:s}=l({...D(a??"",e?E(e):new Date),enabled:o});if(!o||!s)return;const{trigger:n,triggerTemplate:r}=N(s);return{trigger:n,triggerTemplate:r}}function K(){const{createAutomation:a,isPending:e}=h(),o=d(),s=S(),n=r=>{const c={name:r.name,description:r.description??"",enabled:!0,trigger:r.trigger,actions:r.actions};a(c,{onSuccess:()=>{m.success("Automation created successfully"),o({to:"/automations"})},onError:u=>{m.error(`Failed to create automation: ${u.message}`)}})};return t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx(y,{}),t.jsx(B,{defaultValues:s,onSubmit:n,isSubmitting:e})]})}export{K as component};
//# sourceMappingURL=create-BycfZHGQ.js.map
