import{j as e,L as p,r as i,s as m}from"./vendor-tanstack-BcZfOOfy.js";import{E as g,t as C,v as f,w as y,x as N,q as x,I as u,D as k,y as o,W,A as S,F as v,G as P,H as E,J as D,C as b,m as I,n as T,o as _,K as L,M as A,N as M,O}from"./index-m48E4KcG.js";import{W as R}from"./header-ChFAx5uR.js";import{S as z}from"./index-CKGj5lSu.js";import{D as w,a as $,b as F,c as B,d}from"./dropdown-menu-0atiOSFo.js";import"./vendor-react-Bce9NwRC.js";import"./vendor-radix-BTiKGWfR.js";import"./vendor-recharts-BAN776s_.js";import"./vendor-forms-ClCIacbh.js";import"./vendor-date-wwuDAncJ.js";const K=()=>e.jsxs(g,{children:[e.jsx(C,{id:"Cpu"}),e.jsx(f,{children:"Add a work pool to get started"}),e.jsx(y,{children:"Work pools allow you to prioritize and manage deployments and control the infrastructure they run on."}),e.jsxs(N,{children:[e.jsx(p,{to:"/work-pools/create",children:e.jsxs(x,{children:["Add Work Pool ",e.jsx(u,{id:"Plus",className:"size-4 ml-2"})]})}),e.jsx(k,{id:"work-pools-guide"})]})]}),H=({workPool:s,onDelete:a})=>{const n=r=>{navigator.clipboard.writeText(r),o.success("ID copied")};return e.jsxs(w,{children:[e.jsx($,{asChild:!0,children:e.jsxs(x,{variant:"outline",className:"size-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(u,{id:"MoreVertical",className:"size-4"})]})}),e.jsxs(F,{align:"end",children:[e.jsx(B,{children:"Actions"}),e.jsx(d,{onClick:()=>n(s.id),children:"Copy ID"}),e.jsx(p,{to:"/work-pools/work-pool/$workPoolName/edit",params:{workPoolName:s.name},children:e.jsx(d,{children:"Edit"})}),e.jsx(d,{onClick:a,children:"Delete"})]})]})},Q=({workPoolName:s})=>e.jsx(W,{workPoolName:s}),U=({workPool:s})=>{const[a,n]=i.useState(s.status==="PAUSED"),{pauseWorkPool:r,isPending:c}=S(),{resumeWorkPool:l,isPending:t}=v(),j=i.useMemo(()=>c||t,[c,t]),h=()=>{a?l(s.name,{onSuccess:()=>{n(!1),o.success(`${s.name} resumed`)},onError:()=>{o.error(`Failed to resume ${s.name}`)}}):r(s.name,{onSuccess:()=>{n(!0),o.success(`${s.name} paused`)},onError:()=>{o.error(`Failed to pause ${s.name}`)}})};return e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:a?"Paused":"Active"}),e.jsx(P,{checked:!a,onCheckedChange:h,disabled:j,"aria-label":a?"Resume work pool":"Pause work pool"})]})},q={process:"Process",ecs:"ECS","azure-container-instance":"Azure Container Instance",docker:"Docker","cloud-run":"Cloud Run","cloud-run-v2":"Cloud Run v2","vertex-ai":"Vertex AI",kubernetes:"Kubernetes"},J={process:"Cpu",ecs:"Cpu","azure-container-instance":"Cpu",docker:"Cpu","cloud-run":"Cpu","cloud-run-v2":"Cpu","vertex-ai":"Cpu",kubernetes:"Cpu"},V=s=>q[s]??s,Y=s=>J[s]??"Cpu",G=({type:s})=>e.jsxs(E,{children:[e.jsx(u,{id:Y(s)}),V(s)]}),X=({workPool:s})=>{const{deleteWorkPool:a}=D(),n=()=>{a(s.name,{onSuccess:()=>{o.success(`${s.name} deleted`)},onError:r=>{o.error(`Failed to delete work pool: ${r instanceof Error?r.message:"Unknown error"}`)}})};return e.jsxs(b,{className:"gap-2",children:[e.jsxs(I,{className:"flex flex-row items-center justify-between",children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Q,{workPoolName:s.name}),s.status&&e.jsx(z,{status:s.status})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{workPool:s}),e.jsx(H,{workPool:s,onDelete:n})]})]}),e.jsxs(_,{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"flex items-center gap-1",children:e.jsx(G,{type:s.type})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Concurrency:"," ",e.jsx("span",{className:"text-foreground",children:s.concurrency_limit?s.concurrency_limit:"Unlimited"})]})]})]})};function le(){const[s,a]=i.useState(""),{data:n=0}=m(L()),{data:r=[]}=m(A({limit:200,offset:0})),c=i.useMemo(()=>r.filter(t=>[t.name,t.description,t.type,JSON.stringify(t.base_job_template),t.id,t.default_queue_id,t.status].join(" ").toLowerCase().includes(s.toLowerCase())),[r,s]),l=t=>{a(t.target.value)};return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(R,{}),n<1?e.jsx(K,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[n," ",M(n,"work pool")]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(O,{placeholder:"Search work pools...",value:s,onChange:l})})]}),e.jsx("div",{className:"flex flex-col gap-4",children:c.map(t=>e.jsx(X,{workPool:t},t.id))})]})]})}export{le as component};
//# sourceMappingURL=index-DATPYZfT.js.map
