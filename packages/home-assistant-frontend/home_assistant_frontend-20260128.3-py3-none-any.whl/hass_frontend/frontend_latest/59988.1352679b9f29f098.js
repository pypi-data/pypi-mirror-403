export const __rspack_esm_id="59988";export const __rspack_esm_ids=["59988"];export const __webpack_modules__={71938(t,i,e){e.a(t,async function(t,i){try{e(18111),e(22489),e(61701);var s=e(62826),a=e(96196),n=e(44457),c=e(4937),o=e(1087),l=e(81423),r=t([l]);l=(r.then?(await r)():r)[0];class d extends a.WF{render(){if(!this.hass)return a.s6;const t=this.ignoreRestrictionsOnFirstStatistic&&this._currentStatistics.length<=1,i=t?void 0:this.includeStatisticsUnitOfMeasurement,e=t?void 0:this.includeUnitClass,s=t?void 0:this.includeDeviceClass,n=t?void 0:this.statisticTypes;return a.qy` ${this.label?a.qy`<label>${this.label}</label>`:a.s6} ${(0,c.u)(this._currentStatistics,t=>t,t=>a.qy` <div> <ha-statistic-picker .curValue="${t}" .hass="${this.hass}" .includeStatisticsUnitOfMeasurement="${i}" .includeUnitClass="${e}" .includeDeviceClass="${s}" .value="${t}" .statisticTypes="${n}" .statisticIds="${this.statisticIds}" .excludeStatistics="${this.value}" .allowCustomEntity="${this.allowCustomEntity}" @value-changed="${this._statisticChanged}"></ha-statistic-picker> </div> `)} <div> <ha-statistic-picker .hass="${this.hass}" .includeStatisticsUnitOfMeasurement="${this.includeStatisticsUnitOfMeasurement}" .includeUnitClass="${this.includeUnitClass}" .includeDeviceClass="${this.includeDeviceClass}" .statisticTypes="${this.statisticTypes}" .statisticIds="${this.statisticIds}" .placeholder="${this.placeholder}" .excludeStatistics="${this.value}" .allowCustomEntity="${this.allowCustomEntity}" @value-changed="${this._addStatistic}"></ha-statistic-picker> </div> `}get _currentStatistics(){return this.value||[]}async _updateStatistics(t){this.value=t,(0,o.r)(this,"value-changed",{value:t})}_statisticChanged(t){t.stopPropagation();const i=t.currentTarget.curValue,e=t.detail.value;if(e===i)return;const s=this._currentStatistics;e&&!s.includes(e)?this._updateStatistics(s.map(t=>t===i?e:t)):this._updateStatistics(s.filter(t=>t!==i))}async _addStatistic(t){t.stopPropagation();const i=t.detail.value;if(!i)return;if(t.currentTarget.value="",!i)return;const e=this._currentStatistics;e.includes(i)||this._updateStatistics([...e,i])}constructor(...t){super(...t),this.ignoreRestrictionsOnFirstStatistic=!1}}d.styles=a.AH`:host{display:block}ha-statistic-picker{display:block;width:100%;margin-top:8px}label{display:block;margin-bottom:0 0 8px}`,(0,s.Cg)([(0,n.MZ)({attribute:!1})],d.prototype,"hass",void 0),(0,s.Cg)([(0,n.MZ)({type:Array})],d.prototype,"value",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1,type:Array})],d.prototype,"statisticIds",void 0),(0,s.Cg)([(0,n.MZ)({attribute:"statistic-types"})],d.prototype,"statisticTypes",void 0),(0,s.Cg)([(0,n.MZ)({type:String})],d.prototype,"label",void 0),(0,s.Cg)([(0,n.MZ)({type:String})],d.prototype,"placeholder",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean,attribute:"allow-custom-entity"})],d.prototype,"allowCustomEntity",void 0),(0,s.Cg)([(0,n.MZ)({attribute:"include-statistics-unit-of-measurement"})],d.prototype,"includeStatisticsUnitOfMeasurement",void 0),(0,s.Cg)([(0,n.MZ)({attribute:"include-unit-class"})],d.prototype,"includeUnitClass",void 0),(0,s.Cg)([(0,n.MZ)({attribute:"include-device-class"})],d.prototype,"includeDeviceClass",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean,attribute:"ignore-restrictions-on-first-statistic"})],d.prototype,"ignoreRestrictionsOnFirstStatistic",void 0),d=(0,s.Cg)([(0,n.EM)("ha-statistics-picker")],d),i()}catch(t){i(t)}})},9169(t,i,e){e.d(i,{j:()=>s});const s=["relative","total","date","time","datetime"]},9562(t,i,e){e.a(t,async function(t,s){try{e.r(i),e.d(i,{HuiStatisticsGraphCardEditor:()=>k});e(44114),e(18111),e(22489),e(20116),e(7588),e(61701),e(13579),e(17642),e(58004),e(33853),e(45876),e(32475),e(15024),e(31698);var a=e(62826),n=e(96196),c=e(44457),o=e(22786),l=e(63533),r=e(44537),d=e(1087),h=e(19459),u=e(36525),p=e(71938),_=(e(52763),e(23528)),m=e(20939),y=e(84698),g=e(20507),v=e(3515),f=t([p,v,u]);[p,v,u]=f.then?(await f)():f;const b=(0,l.KC)([(0,l.eu)("state"),(0,l.eu)("sum"),(0,l.eu)("change"),(0,l.eu)("min"),(0,l.eu)("max"),(0,l.eu)("mean")]),C=(0,l.kp)(y.H,(0,l.Ik)({entities:(0,l.YO)(g.l),title:(0,l.lq)((0,l.Yj)()),days_to_show:(0,l.lq)((0,l.ai)()),period:(0,l.lq)((0,l.KC)([(0,l.eu)("5minute"),(0,l.eu)("hour"),(0,l.eu)("day"),(0,l.eu)("week"),(0,l.eu)("month")])),chart_type:(0,l.lq)((0,l.KC)([(0,l.eu)("bar"),(0,l.eu)("line")])),stat_types:(0,l.lq)((0,l.KC)([(0,l.YO)(b),b])),unit:(0,l.lq)((0,l.Yj)()),hide_legend:(0,l.lq)((0,l.zM)()),logarithmic_scale:(0,l.lq)((0,l.zM)()),min_y_axis:(0,l.lq)((0,l.ai)()),max_y_axis:(0,l.lq)((0,l.ai)()),fit_y_data:(0,l.lq)((0,l.zM)())})),$=["5minute","hour","day","week","month"],q=["mean","min","max","sum","state","change"];class k extends n.WF{setConfig(t){(0,l.vA)(t,C),this._config=t,this._configEntities=t.entities?(0,m.L)(t.entities,!1).map(t=>t.entity):[]}willUpdate(t){t.has("_configEntities")&&!(0,h.b)(this._configEntities,t.get("_configEntities"))&&(this._metaDatas=void 0,this._configEntities?.length&&this._getStatisticsMetaData(this._configEntities))}render(){if(!this.hass||!this._config)return n.s6;const t=this._schema(this.hass.localize,this._configEntities,this._metaDatas,void 0!==this._config.min_y_axis||void 0!==this._config.max_y_axis),i=this._config.stat_types?(0,r.e)(this._config.stat_types):q.filter(t=>this._metaDatas?.some(i=>(0,_.nN)(i,t))),e={chart_type:"line",period:"hour",...this._config,stat_types:i},s=this._metaDatas?.[0]?.unit_class,a=s?void 0:this._metaDatas?.[0]?.statistics_unit_of_measurement;return n.qy` <ha-form .hass="${this.hass}" .data="${e}" .schema="${t}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form> <ha-statistics-picker .hass="${this.hass}" .placeholder="${this.hass.localize("ui.panel.lovelace.editor.card.statistics-graph.pick_statistic")}" .label="${this.hass.localize("ui.panel.lovelace.editor.card.statistics-graph.picked_statistic")}" .includeStatisticsUnitOfMeasurement="${a}" .includeUnitClass="${s}" .ignoreRestrictionsOnFirstStatistic="${!0}" .value="${this._configEntities}" .configValue="${"entities"}" @value-changed="${this._entitiesChanged}"></ha-statistics-picker> `}_valueChanged(t){(0,d.r)(this,"config-changed",{config:t.detail.value})}async _entitiesChanged(t){const i=t.detail.value,e=i.map(t=>this._config.entities.find(i=>"string"!=typeof i&&i.entity===t)??t),s={...this._config,entities:e};i?.some(t=>(0,_.OQ)(t))&&"5minute"===s.period&&delete s.period;const a=s.stat_types||s.unit?await(0,_.Wr)(this.hass,i):void 0;s.stat_types&&s.entities.length&&(s.stat_types=(0,r.e)(s.stat_types).filter(t=>a.some(i=>(0,_.nN)(i,t))),s.stat_types.length||delete s.stat_types),s.unit&&!a.some(t=>(0,_.JE)(this.hass,t?.statistic_id,t)===s.unit)&&delete s.unit,(0,d.r)(this,"config-changed",{config:s})}constructor(...t){super(...t),this._getStatisticsMetaData=async t=>{this._metaDatas=await(0,_.Wr)(this.hass,t||[])},this._schema=(0,o.A)((t,i,e,s)=>{const a=new Set;e?.forEach(t=>{const i=(0,_.JE)(this.hass,t.statistic_id,t);i&&a.add(i)});const n=[{name:"title",selector:{text:{}}},{name:"",type:"grid",schema:[{name:"period",required:!0,selector:{select:{options:$.map(e=>({value:e,label:t(`ui.panel.lovelace.editor.card.statistics-graph.periods.${e}`),disabled:"5minute"===e&&i?.some(t=>(0,_.OQ)(t))}))}}},{name:"days_to_show",default:v.DEFAULT_DAYS_TO_SHOW,selector:{number:{min:1,mode:"box"}}},{name:"stat_types",required:!0,selector:{select:{multiple:!0,mode:"list",options:q.map(i=>({value:i,label:t(`ui.panel.lovelace.editor.card.statistics-graph.stat_type_labels.${i}`),disabled:!e||!e.some(t=>(0,_.nN)(t,u.n[i]))}))}}},{name:"chart_type",required:!0,type:"select",options:[["line",t("ui.panel.lovelace.editor.card.statistics-graph.chart_type_labels.line")],["bar",t("ui.panel.lovelace.editor.card.statistics-graph.chart_type_labels.bar")]]},{name:"",type:"grid",schema:[{name:"min_y_axis",required:!1,selector:{number:{mode:"box",step:"any"}}},{name:"max_y_axis",required:!1,selector:{number:{mode:"box",step:"any"}}}]},...s?[{name:"fit_y_data",required:!1,selector:{boolean:{}}}]:[],{name:"hide_legend",required:!1,selector:{boolean:{}}},{name:"logarithmic_scale",required:!1,selector:{boolean:{}}}]}];return a.size>1&&n[1].schema.push({name:"unit",required:!1,selector:{select:{options:Array.from(a).map(t=>({value:t,label:t}))}}}),n}),this._computeLabelCallback=t=>{switch(t.name){case"chart_type":case"stat_types":case"period":case"unit":case"hide_legend":case"logarithmic_scale":case"min_y_axis":case"max_y_axis":case"fit_y_data":return this.hass.localize(`ui.panel.lovelace.editor.card.statistics-graph.${t.name}`);default:return this.hass.localize(`ui.panel.lovelace.editor.card.generic.${t.name}`)}}}}k.styles=n.AH`ha-statistics-picker{width:100%}`,(0,a.Cg)([(0,c.MZ)({attribute:!1})],k.prototype,"hass",void 0),(0,a.Cg)([(0,c.wk)()],k.prototype,"_config",void 0),(0,a.Cg)([(0,c.wk)()],k.prototype,"_configEntities",void 0),(0,a.Cg)([(0,c.wk)()],k.prototype,"_metaDatas",void 0),k=(0,a.Cg)([(0,c.EM)("hui-statistics-graph-card-editor")],k),s()}catch(t){s(t)}})},84698(t,i,e){e.d(i,{H:()=>a});var s=e(63533);const a=(0,s.Ik)({type:(0,s.Yj)(),view_layout:(0,s.bz)(),layout_options:(0,s.bz)(),grid_options:(0,s.bz)(),visibility:(0,s.bz)(),disabled:(0,s.lq)((0,s.zM)())})},20507(t,i,e){e.d(i,{l:()=>o});var s=e(63533),a=e(9169),n=e(91408),c=e(44155);const o=(0,s.KC)([(0,s.Ik)({entity:(0,s.Yj)(),name:(0,s.lq)(c.q),icon:(0,s.lq)((0,s.Yj)()),image:(0,s.lq)((0,s.Yj)()),secondary_info:(0,s.lq)((0,s.Yj)()),format:(0,s.lq)((0,s.vP)(a.j)),state_color:(0,s.lq)((0,s.zM)()),tap_action:(0,s.lq)(n.kn),hold_action:(0,s.lq)(n.kn),double_tap_action:(0,s.lq)(n.kn),confirmation:(0,s.lq)(n.dk),show_last_changed:(0,s.lq)((0,s.zM)()),show_state:(0,s.lq)((0,s.zM)())}),(0,s.Yj)()])},6116(t,i,e){e.d(i,{o:()=>n});var s=e(6439),a=e(83339);function n(t,i,e){const n=(0,a.b)(t,i)/6e4;return(0,s.u)(e?.roundingMethod)(n)}}};
//# sourceMappingURL=59988.1352679b9f29f098.js.map