export const __rspack_esm_id="57516";export const __rspack_esm_ids=["57516"];export const __webpack_modules__={91069(e,t,a){a.a(e,async function(e,i){try{a.d(t,{EO:()=>w,Yq:()=>M,_U:()=>S,eE:()=>b,fU:()=>$,ol:()=>y,xo:()=>x});var s=a(78016),l=a(31810),o=a(49134),r=a(81977),n=a(36307),c=a(35932),d=a(73983),g=a(6946),h=a(92913),u=a(83339),_=a(77972),p=a(31886),m=a(46927),v=e([p]);p=(v.then?(await v)():v)[0];const f=(e,t,a,i)=>{const s=a(new p.BB(e,t),i);return s instanceof Date?new Date(s.getTime()):s},y=(e,t,a,i,s)=>a.time_zone===m.Wj.server?f(e,i.time_zone,t,s):t(e,s),x=(e,t,a,i,s)=>a.time_zone===m.Wj.server?f(e,i.time_zone,t,s):t(e,s),w=(e,t,a,i,s)=>x(e,a,i,s,i.time_zone===m.Wj.server?new p.BB(t,s.time_zone):t),b=(e,t,a,i,p)=>{let m,v;if(x(e,s.e,i,p)&&x(t,l.c,i,p)){const s=(w(t,e,o.W,i,p)+1)*(a?1:-1);m=y(e,r.P,i,p,s),v=y(y(t,r.P,i,p,s),n.p,i,p)}else if(x(e,e=>(0,c.o)(e).getMilliseconds()===e.getMilliseconds(),i,p)&&x(t,e=>(0,d.D)(e).getMilliseconds()===e.getMilliseconds(),i,p)){const s=(w(t,e,g.c,i,p)+1)*(a?1:-1);m=y(e,h.f,i,p,s),v=y(t,h.f,i,p,s)}else{const s=w(t,e,u.b,i,p)*(a?1:-1);m=y(e,_.A,i,p,s),v=y(t,_.A,i,p,s)}return{start:m,end:v}},S=(e,t)=>{const a=new p.BB(e,t);return new Date(a.getTime())},M=(e,t)=>new p.BB(e,t).toISOString().split("T")[0],$=(e,t)=>new p.BB(e,t).toISOString().split("T")[1].split(".")[0];i()}catch(e){i(e)}})},46223(e,t,a){a.a(e,async function(e,i){try{a.d(t,{b:()=>w});var s=a(35932),l=a(73983),o=a(92913),r=a(52640),n=a(69137),c=a(35660),d=a(36307),g=a(11650),h=a(15797),u=a(33977),_=a(69748),p=a(55144),m=a(21828),v=a(66708),f=a(91069),y=a(380),x=e([f]);f=(x.then?(await x)():x)[0];const w=(e,t)=>{const a=new Date,i=(0,y.P)(e.locale);switch(t){case"today":return[(0,f.ol)(a,s.o,e.locale,e.config,{weekStartsOn:i}),(0,f.ol)(a,l.D,e.locale,e.config,{weekStartsOn:i})];case"yesterday":return[(0,f.ol)((0,o.f)(a,-1),s.o,e.locale,e.config,{weekStartsOn:i}),(0,f.ol)((0,o.f)(a,-1),l.D,e.locale,e.config,{weekStartsOn:i})];case"this_week":return[(0,f.ol)(a,r.k,e.locale,e.config,{weekStartsOn:i}),(0,f.ol)(a,n.$,e.locale,e.config,{weekStartsOn:i})];case"this_month":return[(0,f.ol)(a,c.w,e.locale,e.config),(0,f.ol)(a,d.p,e.locale,e.config)];case"this_quarter":return[(0,f.ol)(a,g.a,e.locale,e.config),(0,f.ol)(a,h.j,e.locale,e.config)];case"this_year":return[(0,f.ol)(a,u.D,e.locale,e.config),(0,f.ol)(a,_.Q,e.locale,e.config)];case"now-7d":return[(0,f.ol)(a,p.e,e.locale,e.config,7),(0,f.ol)(a,p.e,e.locale,e.config,0)];case"now-30d":return[(0,f.ol)(a,p.e,e.locale,e.config,30),(0,f.ol)(a,p.e,e.locale,e.config,0)];case"now-12m":return[(0,f.ol)(a,m.a,e.locale,e.config,12),(0,f.ol)(a,m.a,e.locale,e.config,0)];case"now-1h":return[(0,f.ol)(a,v.O,e.locale,e.config,1),(0,f.ol)(a,v.O,e.locale,e.config,0)];case"now-12h":return[(0,f.ol)(a,v.O,e.locale,e.config,12),(0,f.ol)(a,v.O,e.locale,e.config,0)];case"now-24h":return[(0,f.ol)(a,v.O,e.locale,e.config,24),(0,f.ol)(a,v.O,e.locale,e.config,0)]}return[a,a]};i()}catch(e){i(e)}})},5127(e,t,a){a.a(e,async function(e,t){try{a(18111),a(61701);var i=a(62826),s=a(96196),l=a(44457),o=a(6415),r=a(20058),n=a(67258),c=a(12587),d=a(36240),g=e([r]);r=(g.then?(await g)():g)[0];const h=(e,t,a)=>180*(0,d.NN)((0,d.S8)(e,t,a),t,a)/100;class u extends s.WF{firstUpdated(e){super.firstUpdated(e),(0,c.m)(()=>{this._updated=!0,this._angle=h(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg()})}updated(e){super.updated(e),this._updated&&(e.has("value")||e.has("valueText")||e.has("label")||e.has("_segment_label"))&&(this._angle=h(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg())}render(){return s.JW` <svg viewBox="-50 -50 100 50" class="gauge"> ${this.needle&&this.levels?"":s.JW`<path class="dial" d="M -40 0 A 40 40 0 0 1 40 0"></path>`} ${this.levels?this.levels.sort((e,t)=>e.level-t.level).map((e,t)=>{let a;if(0===t&&e.level!==this.min){const e=h(this.min,this.min,this.max);a=s.JW`<path stroke="var(--info-color)" class="level" d="M
                          ${0-40*Math.cos(e*Math.PI/180)}
                          ${0-40*Math.sin(e*Math.PI/180)}
                         A 40 40 0 0 1 40 0
                        "></path>`}const i=h(e.level,this.min,this.max);return s.JW`${a}<path stroke="${e.stroke}" class="level" d="M
                        ${0-40*Math.cos(i*Math.PI/180)}
                        ${0-40*Math.sin(i*Math.PI/180)}
                       A 40 40 0 0 1 40 0
                      "></path>`}):""} ${this.needle?s.JW`<path class="needle" d="M -25 -2.5 L -47.5 0 L -25 2.5 z" style="${(0,o.W)({transform:`rotate(${this._angle}deg)`})}"> </path>`:s.JW`<path class="value" d="M -40 0 A 40 40 0 1 0 40 0" style="${(0,o.W)({transform:`rotate(${this._angle}deg)`})}"></path>`}  </svg> <svg class="text"> <text class="value-text"> ${this._segment_label?this._segment_label:this.valueText||(0,r.ZV)(this.value,this.locale,this.formatOptions)}${this._segment_label?"":"%"===this.label?(0,n.d)(this.locale)+"%":` ${this.label}`} </text> </svg>`}_rescaleSvg(){const e=this.shadowRoot.querySelector(".text"),t=e.querySelector("text").getBBox();e.setAttribute("viewBox",`${t.x} ${t.y} ${t.width} ${t.height}`)}_getSegmentLabel(){if(this.levels){this.levels.sort((e,t)=>e.level-t.level);for(let e=this.levels.length-1;e>=0;e--)if(this.value>=this.levels[e].level)return this.levels[e].label}return""}constructor(...e){super(...e),this.min=0,this.max=100,this.value=0,this.needle=!1,this.label="",this._angle=0,this._updated=!1,this._segment_label=""}}u.styles=s.AH`:host{position:relative}.dial{fill:none;stroke:var(--primary-background-color);stroke-width:15}.value{fill:none;stroke-width:15;stroke:var(--gauge-color);transition:all 1s ease 0s}.needle{fill:var(--primary-text-color);transition:all 1s ease 0s}.level{fill:none;stroke-width:15}.gauge{display:block}.text{position:absolute;max-height:40%;max-width:55%;left:50%;bottom:-6%;transform:translate(-50%,0%)}.value-text{font-size:50px;fill:var(--primary-text-color);text-anchor:middle;direction:ltr}`,(0,i.Cg)([(0,l.MZ)({type:Number})],u.prototype,"min",void 0),(0,i.Cg)([(0,l.MZ)({type:Number})],u.prototype,"max",void 0),(0,i.Cg)([(0,l.MZ)({type:Number})],u.prototype,"value",void 0),(0,i.Cg)([(0,l.MZ)({attribute:!1})],u.prototype,"formatOptions",void 0),(0,i.Cg)([(0,l.MZ)({attribute:!1,type:String})],u.prototype,"valueText",void 0),(0,i.Cg)([(0,l.MZ)({attribute:!1})],u.prototype,"locale",void 0),(0,i.Cg)([(0,l.MZ)({type:Boolean})],u.prototype,"needle",void 0),(0,i.Cg)([(0,l.MZ)({type:Array})],u.prototype,"levels",void 0),(0,i.Cg)([(0,l.MZ)()],u.prototype,"label",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_angle",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_updated",void 0),(0,i.Cg)([(0,l.wk)()],u.prototype,"_segment_label",void 0),u=(0,i.Cg)([(0,l.EM)("ha-gauge")],u),t()}catch(e){t(e)}})},23528(e,t,a){a.d(t,{$3:()=>p,$O:()=>S,$j:()=>m,ED:()=>l,JE:()=>M,OQ:()=>$,PU:()=>k,Ph:()=>u,Uf:()=>b,W1:()=>_,Wr:()=>d,Z:()=>n,gF:()=>v,iY:()=>f,jU:()=>o,nN:()=>w,p3:()=>c,pJ:()=>h,r_:()=>r,sz:()=>g});a(18111),a(13579);var i=a(28978),s=a(380),l=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({});const o=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],r=["L","gal","ft³","m³","CCF","MCF"],n=e=>e.sendMessagePromise({type:"recorder/info"}),c=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),d=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),g=(e,t,a,i,s="hour",l,o)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:a?.toISOString(),statistic_ids:i,period:s,units:l,types:o}),h=(e,t,a,i)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:i,fixed_period:a.fixed_period?{start_time:a.fixed_period.start instanceof Date?a.fixed_period.start.toISOString():a.fixed_period.start,end_time:a.fixed_period.end instanceof Date?a.fixed_period.end.toISOString():a.fixed_period.end}:void 0,calendar:a.calendar?{..."week"===a.calendar.period?{first_weekday:(0,s.D)(e.locale).substring(0,3)}:{},...a.calendar}:void 0,rolling_window:a.rolling_window}),u=e=>e.callWS({type:"recorder/validate_statistics"}),_=(e,t,a,i)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:a,unit_class:i}),p=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),m=e=>{let t=null;if(!e)return null;for(const a of e)null!==a.change&&void 0!==a.change&&(null===t?t=a.change:t+=a.change);return t},v=(e,t)=>{let a=null;for(const i of t){if(!(i in e))continue;const t=m(e[i]);null!==t&&(null===a?a=t:a+=t)}return a},f=(e,t)=>e.some(e=>void 0!==e[t]&&null!==e[t]),y=["mean","min","max"],x=["sum","state","change"],w=(e,t)=>!(!y.includes(t)||0===e.mean_type)||!(!x.includes(t)||!e.has_sum),b=(e,t,a,i,s)=>{const l=new Date(a).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:l,adjustment:i,adjustment_unit_of_measurement:s})},S=(e,t,a)=>{const s=e.states[t];return s?(0,i.u)(s):a?.name||t},M=(e,t,a)=>{let i;return t&&(i=e.states[t]?.attributes.unit_of_measurement),void 0===i?a?.statistics_unit_of_measurement:i},$=e=>e.includes(":"),k=e=>e.callWS({type:"recorder/update_statistics_issues"})},80449(e,t,a){a.a(e,async function(e,i){try{a.r(t);var s=a(62826),l=a(96196),o=a(44457),r=a(20058),n=(a(76776),a(5127)),c=(a(67094),a(34127)),d=a(38114),g=a(54706),h=a(784),u=e([n,c,d,r]);[n,c,d,r]=u.then?(await u)():u;const _="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",p=[{level:-1,stroke:"var(--energy-grid-consumption-color)"},{level:0,stroke:"var(--energy-grid-return-color)"}];class m extends((0,g.E)(l.WF)){hassSubscribe(){return[(0,d.tb)(this.hass,{key:this._config?.collection_key}).subscribe(e=>{this._data=e})]}getCardSize(){return 4}setConfig(e){this._config=e}shouldUpdate(e){return(0,h.xP)(this,e)||e.size>1||!e.has("hass")}render(){if(!this._config||!this.hass)return l.s6;if(!this._data)return l.qy`${this.hass.localize("ui.panel.lovelace.cards.energy.loading")}`;const{summedData:e,compareSummedData:t}=(0,d.gv)(this._data);let a;if(!("from_grid"in e.total))return l.s6;const i=e.total.from_grid??0,s=e.total.to_grid??0;return null!==i&&null!==s&&(a=s>i?1-i/s:s<i?-1*(1-s/i):0),l.qy` <ha-card> ${void 0!==a?l.qy` <ha-gauge min="-1" max="1" .value="${a}" .valueText="${(0,r.ZV)(Math.abs(s-i),this.hass.locale,{maximumFractionDigits:2})}" .locale="${this.hass.locale}" .levels="${p}" label="kWh" needle></ha-gauge> <ha-svg-icon id="info" .path="${_}"></ha-svg-icon> <ha-tooltip for="info" placement="left"> ${this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.energy_dependency")} <br><br> ${this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.color_explain")} </ha-tooltip> <div class="name"> ${s>=i?this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_returned_grid"):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_consumed_grid")} </div> `:this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.grid_neutrality_not_calculated")} </ha-card> `}constructor(...e){super(...e),this.hassSubscribeRequiredHostProps=["_config"]}}m.styles=l.AH`ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px;direction:ltr}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}`,(0,s.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,s.Cg)([(0,o.wk)()],m.prototype,"_config",void 0),(0,s.Cg)([(0,o.wk)()],m.prototype,"_data",void 0),m=(0,s.Cg)([(0,o.EM)("hui-energy-grid-neutrality-gauge-card")],m),i()}catch(e){i(e)}})},36240(e,t,a){a.d(t,{NN:()=>s,S8:()=>i,gN:()=>l});const i=(e,t,a)=>isNaN(e)||isNaN(t)||isNaN(a)?0:e>a?a:e<t?t:e,s=(e,t,a)=>100*(e-t)/(a-t),l=e=>Math.round(10*e)/10},56434(e,t,a){a.d(t,{e:()=>s});var i=a(81977);function s(e,t,a){return(0,i.P)(e,12*t,a)}}};
//# sourceMappingURL=57516.e587ddd31beaf667.js.map