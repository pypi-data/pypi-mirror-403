export const __rspack_esm_id="48668";export const __rspack_esm_ids=["48668"];export const __webpack_modules__={91069(e,t,n){n.a(e,async function(e,a){try{n.d(t,{EO:()=>v,Yq:()=>O,_U:()=>x,eE:()=>b,fU:()=>T,ol:()=>w,xo:()=>S});var o=n(78016),r=n(31810),i=n(49134),s=n(81977),l=n(36307),c=n(35932),u=n(73983),d=n(6946),f=n(92913),m=n(83339),_=n(77972),g=n(31886),p=n(46927),y=e([g]);g=(y.then?(await y)():y)[0];const h=(e,t,n,a)=>{const o=n(new g.BB(e,t),a);return o instanceof Date?new Date(o.getTime()):o},w=(e,t,n,a,o)=>n.time_zone===p.Wj.server?h(e,a.time_zone,t,o):t(e,o),S=(e,t,n,a,o)=>n.time_zone===p.Wj.server?h(e,a.time_zone,t,o):t(e,o),v=(e,t,n,a,o)=>S(e,n,a,o,a.time_zone===p.Wj.server?new g.BB(t,o.time_zone):t),b=(e,t,n,a,g)=>{let p,y;if(S(e,o.e,a,g)&&S(t,r.c,a,g)){const o=(v(t,e,i.W,a,g)+1)*(n?1:-1);p=w(e,s.P,a,g,o),y=w(w(t,s.P,a,g,o),l.p,a,g)}else if(S(e,e=>(0,c.o)(e).getMilliseconds()===e.getMilliseconds(),a,g)&&S(t,e=>(0,u.D)(e).getMilliseconds()===e.getMilliseconds(),a,g)){const o=(v(t,e,d.c,a,g)+1)*(n?1:-1);p=w(e,f.f,a,g,o),y=w(t,f.f,a,g,o)}else{const o=v(t,e,m.b,a,g)*(n?1:-1);p=w(e,_.A,a,g,o),y=w(t,_.A,a,g,o)}return{start:p,end:y}},x=(e,t)=>{const n=new g.BB(e,t);return new Date(n.getTime())},O=(e,t)=>new g.BB(e,t).toISOString().split("T")[0],T=(e,t)=>new g.BB(e,t).toISOString().split("T")[1].split(".")[0];a()}catch(e){a(e)}})},46223(e,t,n){n.a(e,async function(e,a){try{n.d(t,{b:()=>v});var o=n(35932),r=n(73983),i=n(92913),s=n(52640),l=n(69137),c=n(35660),u=n(36307),d=n(11650),f=n(15797),m=n(33977),_=n(69748),g=n(55144),p=n(21828),y=n(66708),h=n(91069),w=n(380),S=e([h]);h=(S.then?(await S)():S)[0];const v=(e,t)=>{const n=new Date,a=(0,w.P)(e.locale);switch(t){case"today":return[(0,h.ol)(n,o.o,e.locale,e.config,{weekStartsOn:a}),(0,h.ol)(n,r.D,e.locale,e.config,{weekStartsOn:a})];case"yesterday":return[(0,h.ol)((0,i.f)(n,-1),o.o,e.locale,e.config,{weekStartsOn:a}),(0,h.ol)((0,i.f)(n,-1),r.D,e.locale,e.config,{weekStartsOn:a})];case"this_week":return[(0,h.ol)(n,s.k,e.locale,e.config,{weekStartsOn:a}),(0,h.ol)(n,l.$,e.locale,e.config,{weekStartsOn:a})];case"this_month":return[(0,h.ol)(n,c.w,e.locale,e.config),(0,h.ol)(n,u.p,e.locale,e.config)];case"this_quarter":return[(0,h.ol)(n,d.a,e.locale,e.config),(0,h.ol)(n,f.j,e.locale,e.config)];case"this_year":return[(0,h.ol)(n,m.D,e.locale,e.config),(0,h.ol)(n,_.Q,e.locale,e.config)];case"now-7d":return[(0,h.ol)(n,g.e,e.locale,e.config,7),(0,h.ol)(n,g.e,e.locale,e.config,0)];case"now-30d":return[(0,h.ol)(n,g.e,e.locale,e.config,30),(0,h.ol)(n,g.e,e.locale,e.config,0)];case"now-12m":return[(0,h.ol)(n,p.a,e.locale,e.config,12),(0,h.ol)(n,p.a,e.locale,e.config,0)];case"now-1h":return[(0,h.ol)(n,y.O,e.locale,e.config,1),(0,h.ol)(n,y.O,e.locale,e.config,0)];case"now-12h":return[(0,h.ol)(n,y.O,e.locale,e.config,12),(0,h.ol)(n,y.O,e.locale,e.config,0)];case"now-24h":return[(0,h.ol)(n,y.O,e.locale,e.config,24),(0,h.ol)(n,y.O,e.locale,e.config,0)]}return[n,n]};a()}catch(e){a(e)}})},75428(e,t,n){n.d(t,{D:()=>r});var a=n(75158),o=n.n(a);const r=e=>o()(e,{whiteList:{},stripIgnoreTag:!0,stripIgnoreTagBody:!0})},23528(e,t,n){n.d(t,{$3:()=>g,$O:()=>x,$j:()=>p,ED:()=>r,JE:()=>O,OQ:()=>T,PU:()=>D,Ph:()=>m,Uf:()=>b,W1:()=>_,Wr:()=>u,Z:()=>l,gF:()=>y,iY:()=>h,jU:()=>i,nN:()=>v,p3:()=>c,pJ:()=>f,r_:()=>s,sz:()=>d});n(18111),n(13579);var a=n(28978),o=n(380),r=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({});const i=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],s=["L","gal","ft³","m³","CCF","MCF"],l=e=>e.sendMessagePromise({type:"recorder/info"}),c=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),u=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),d=(e,t,n,a,o="hour",r,i)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:n?.toISOString(),statistic_ids:a,period:o,units:r,types:i}),f=(e,t,n,a)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:a,fixed_period:n.fixed_period?{start_time:n.fixed_period.start instanceof Date?n.fixed_period.start.toISOString():n.fixed_period.start,end_time:n.fixed_period.end instanceof Date?n.fixed_period.end.toISOString():n.fixed_period.end}:void 0,calendar:n.calendar?{..."week"===n.calendar.period?{first_weekday:(0,o.D)(e.locale).substring(0,3)}:{},...n.calendar}:void 0,rolling_window:n.rolling_window}),m=e=>e.callWS({type:"recorder/validate_statistics"}),_=(e,t,n,a)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:n,unit_class:a}),g=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),p=e=>{let t=null;if(!e)return null;for(const n of e)null!==n.change&&void 0!==n.change&&(null===t?t=n.change:t+=n.change);return t},y=(e,t)=>{let n=null;for(const a of t){if(!(a in e))continue;const t=p(e[a]);null!==t&&(null===n?n=t:n+=t)}return n},h=(e,t)=>e.some(e=>void 0!==e[t]&&null!==e[t]),w=["mean","min","max"],S=["sum","state","change"],v=(e,t)=>!(!w.includes(t)||0===e.mean_type)||!(!S.includes(t)||!e.has_sum),b=(e,t,n,a,o)=>{const r=new Date(n).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:r,adjustment:a,adjustment_unit_of_measurement:o})},x=(e,t,n)=>{const o=e.states[t];return o?(0,a.u)(o):n?.name||t},O=(e,t,n)=>{let a;return t&&(a=e.states[t]?.attributes.unit_of_measurement),void 0===a?n?.statistics_unit_of_measurement:a},T=e=>e.includes(":"),D=e=>e.callWS({type:"recorder/update_statistics_issues"})},97372(e,t,n){n.a(e,async function(e,a){try{n.d(t,{Gs:()=>b,JR:()=>k,RR:()=>D,od:()=>O,ok:()=>W});n(44114),n(18111),n(22489),n(7588),n(61701),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698);var o=n(66708),r=n(6946),i=n(57279),s=n(98487),l=n(33977),c=n(56434),u=n(49134),d=n(35660),f=n(81977),m=n(35932),_=n(92913),g=n(77972),p=n(20058),y=n(72487),h=n(30162),w=n(75428),S=n(38114),v=e([S,y,h,p]);function b(e,t){let n=new Date(t);return"5minute"===e?n.getTime():(n.setMinutes(0,0,0),"hour"===e?n.getTime():(0===n.getHours()&&(n=(0,o.O)(n,1)),n.setHours(0),"day"===e||"week"===e||n.setDate(1),n.getTime()))}function x(e){let t;return n=>{const a=Math.max(1,-Math.floor(Math.log10(Math.abs(n-(t??n)||1))));return t=n,(0,p.ZV)(n,e,{maximumFractionDigits:a})}}function O(e,t,n,a,o,i,s,l,c=!1){const u=(0,r.c)(t,e),d=void 0!==i&&void 0!==s,f=d&&e.getFullYear()!==i.getFullYear();return{xAxis:{type:"time",min:e,max:b((0,S.TI)(e,t,c),t)},yAxis:{type:"value",name:o,nameGap:2,nameTextStyle:{align:"left"},axisLabel:{formatter:x(n)},splitLine:{show:!0}},grid:{top:15,bottom:0,left:1,right:1,containLabel:!0},tooltip:{trigger:"axis",formatter:e=>{if(Array.isArray(e)){const t=[],r=[];return e.forEach(e=>{e.seriesId?.startsWith("compare-")?r.push(e):t.push(e)}),[t,r].map(e=>T(e,n,a,u,d,f,o,l)).filter(Boolean).join("<br><br>")}return T([e],n,a,u,d,f,o,l)}}}}function T(e,t,n,a,o,r,s,l){if(!e[0]?.value)return"";const c=new Date(e[0].value?.[2]??e[0].value?.[0]);let u;a>=89?u=`${(0,y.fr)(c,t,n)}`:a>0?u=`${(r?y.kz:y.sl)(c,t,n)}`:(u=`${o?`${(r?y.kz:y.sl)(c,t,n)}: `:""}${(0,h.fU)(c,t,n)}`,"bar"===e[0].componentSubType&&(u+=` – ${(0,h.fU)((0,i.L)(c,1),t,n)}`));const d=`<h4 style="text-align: center; margin: 0;">${u}</h4>`;let f=0,m=0,_=0,g=0;const S=e.map(e=>{const n=e.value?.[1],a=(0,p.ZV)(n,t,n<.1?{maximumFractionDigits:3}:void 0);return"0"!==a&&("bar"===e.componentSubType&&(n>0?(f+=n,m++):(_+=n,g++)),`${e.marker} ${(0,w.D)(e.seriesName)}: <div style="direction:ltr; display: inline;">${a} ${s}</div>`)}).filter(Boolean);let v="";return 0!==f&&m>1&&l&&(v+=`<br><b>${l(f)}</b>`),0!==_&&g>1&&l&&(v+=`<br><b>${l(_)}</b>`),S.length>0?`${d}${S.join("<br>")}${v}`:""}function D(e){Array.from(new Set(e.map(e=>e.data.map(e=>Number(e[0]))).flat())).sort((e,t)=>e-t).forEach((t,n)=>{const a={},o={};for(let r=e.length-1;r>=0;r--){const i=e[r].data[n],s=i&&"object"==typeof i&&"value"in i?i:{value:i},l=s.value?.[0],c=e[r].stack??"";void 0!==l&&(Number(l)!==t?e[r].data?.splice(n,0,{value:[t,0],itemStyle:{borderWidth:0}}):0===s.value?.[1]?e[r].data[n]={...s,itemStyle:{...s.itemStyle,borderWidth:0}}:!a[c]&&s.value?.[1]>0?(e[r].data[n]={...s,itemStyle:{...s.itemStyle,borderRadius:[4,4,0,0]}},a[c]=!0):!o[c]&&s.value?.[1]<0&&(e[r].data[n]={...s,itemStyle:{...s.itemStyle,borderRadius:[0,0,4,4]}},o[c]=!0))}})}function $(e){const t=e&&"object"==typeof e&&"value"in e?e:{value:e};return Number(t.value?.[0])}function k(e){const t=Array.from(new Set(e.map(e=>e.data.map(e=>$(e))).flat())).sort((e,t)=>e-t);return e.forEach(e=>{const n=new Map;e.data.forEach(e=>{const t=e&&"object"==typeof e&&"value"in e?e:{value:e},a=$(e);Number.isNaN(a)||n.set(a,t)}),e.data=t.map(e=>n.get(e)??[e,0])}),e}function W(e,t){if(!t)return e=>e;const n=(0,s.V)(e,t);if(0!==n&&e.getTime()===(0,l.D)(e).getTime())return e=>(0,c.e)(e,n);const a=(0,u.W)(e,t);if(0!==a&&e.getTime()===(0,d.w)(e).getTime())return e=>(0,f.P)(e,a);const o=(0,r.c)(e,t);if(0!==o&&e.getTime()===(0,m.o)(e).getTime())return e=>(0,_.f)(e,o);const i=e.getTime()-t.getTime();return e=>(0,g.A)(e,i)}[S,y,h,p]=v.then?(await v)():v,a()}catch(I){a(I)}})},56434(e,t,n){n.d(t,{e:()=>o});var a=n(81977);function o(e,t,n){return(0,a.P)(e,12*t,n)}},98487(e,t,n){n.d(t,{V:()=>i});var a=n(74816),o=n(95785);function r(e,t,n){const[o,r]=(0,a.x)(n?.in,e,t);return o.getFullYear()-r.getFullYear()}function i(e,t,n){const[i,s]=(0,a.x)(n?.in,e,t),l=(0,o.z)(i,s),c=Math.abs(r(i,s));i.setFullYear(1584),s.setFullYear(1584);const u=l*(c-+((0,o.z)(i,s)===-l));return 0===u?0:u}}};
//# sourceMappingURL=48668.d7c3ed4dcb0d7f4d.js.map