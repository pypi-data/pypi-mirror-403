"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["64811"],{1375:function(t,e){e.A={en:"US",hi:"IN",deva:"IN",te:"IN",mr:"IN",ta:"IN",gu:"IN",kn:"IN",or:"IN",ml:"IN",pa:"IN",bho:"IN",awa:"IN",as:"IN",mwr:"IN",mai:"IN",mag:"IN",bgc:"IN",hne:"IN",dcc:"IN",bn:"BD",beng:"BD",rkt:"BD",dz:"BT",tibt:"BT",tn:"BW",am:"ET",ethi:"ET",om:"ET",quc:"GT",id:"ID",jv:"ID",su:"ID",mad:"ID",ms_arab:"ID",he:"IL",hebr:"IL",jam:"JM",ja:"JP",jpan:"JP",km:"KH",khmr:"KH",ko:"KR",kore:"KR",lo:"LA",laoo:"LA",mh:"MH",my:"MM",mymr:"MM",mt:"MT",ne:"NP",fil:"PH",ceb:"PH",ilo:"PH",ur:"PK",pa_arab:"PK",lah:"PK",ps:"PK",sd:"PK",skr:"PK",gn:"PY",th:"TH",thai:"TH",tts:"TH",zh_hant:"TW",hant:"TW",sm:"WS",zu:"ZA",sn:"ZW",arq:"DZ",ar:"EG",arab:"EG",arz:"EG",fa:"IR",az_arab:"IR",dv:"MV",thaa:"MV"}},81e3:function(t,e,n){n.d(e,{S:function(){return a}});n(27495);var o=n(1375),s=n(62009);function a(t){return function(t,e,n){if(t){var o,s=t.toLowerCase().split(/[-_]/),a=s[0],r=a;if(s[1]&&4===s[1].length?(r+="_"+s[1],o=s[2]):o=s[1],o||(o=e[r]||e[a]),o)return function(t,e){var n=e["string"==typeof t?t.toUpperCase():t];return"number"==typeof n?n:1}(o.match(/^\d+$/)?Number(o):o,n)}return 1}(t,o.A,s.A)}},62009:function(t,e){e.A={AG:0,ATG:0,28:0,AS:0,ASM:0,16:0,BD:0,BGD:0,50:0,BR:0,BRA:0,76:0,BS:0,BHS:0,44:0,BT:0,BTN:0,64:0,BW:0,BWA:0,72:0,BZ:0,BLZ:0,84:0,CA:0,CAN:0,124:0,CO:0,COL:0,170:0,DM:0,DMA:0,212:0,DO:0,DOM:0,214:0,ET:0,ETH:0,231:0,GT:0,GTM:0,320:0,GU:0,GUM:0,316:0,HK:0,HKG:0,344:0,HN:0,HND:0,340:0,ID:0,IDN:0,360:0,IL:0,ISR:0,376:0,IN:0,IND:0,356:0,JM:0,JAM:0,388:0,JP:0,JPN:0,392:0,KE:0,KEN:0,404:0,KH:0,KHM:0,116:0,KR:0,KOR:0,410:0,LA:0,LA0:0,418:0,MH:0,MHL:0,584:0,MM:0,MMR:0,104:0,MO:0,MAC:0,446:0,MT:0,MLT:0,470:0,MX:0,MEX:0,484:0,MZ:0,MOZ:0,508:0,NI:0,NIC:0,558:0,NP:0,NPL:0,524:0,PA:0,PAN:0,591:0,PE:0,PER:0,604:0,PH:0,PHL:0,608:0,PK:0,PAK:0,586:0,PR:0,PRI:0,630:0,PT:0,PRT:0,620:0,PY:0,PRY:0,600:0,SA:0,SAU:0,682:0,SG:0,SGP:0,702:0,SV:0,SLV:0,222:0,TH:0,THA:0,764:0,TT:0,TTO:0,780:0,TW:0,TWN:0,158:0,UM:0,UMI:0,581:0,US:0,USA:0,840:0,VE:0,VEN:0,862:0,VI:0,VIR:0,850:0,WS:0,WSM:0,882:0,YE:0,YEM:0,887:0,ZA:0,ZAF:0,710:0,ZW:0,ZWE:0,716:0,AE:6,ARE:6,784:6,AF:6,AFG:6,4:6,BH:6,BHR:6,48:6,DJ:6,DJI:6,262:6,DZ:6,DZA:6,12:6,EG:6,EGY:6,818:6,IQ:6,IRQ:6,368:6,IR:6,IRN:6,364:6,JO:6,JOR:6,400:6,KW:6,KWT:6,414:6,LY:6,LBY:6,434:6,OM:6,OMN:6,512:6,QA:6,QAT:6,634:6,SD:6,SDN:6,729:6,SY:6,SYR:6,760:6,MV:5,MDV:5,462:5}},380:function(t,e,n){n.a(t,async function(t,o){try{n.d(e,{D:function(){return l},P:function(){return c}});n(74423);var s=n(74487),a=n(81e3),r=n(46927),i=n(96029),u=t([s]);s=(u.then?(await u)():u)[0];const c=t=>t.first_weekday===r.zt.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(t.language).weekInfo.firstDay%7:(0,a.S)(t.language)%7:i.Z.includes(t.first_weekday)?i.Z.indexOf(t.first_weekday):1,l=t=>{const e=c(t);return i.Z[e]};o()}catch(c){o(c)}})},98975:function(t,e,n){n.a(t,async function(t,o){try{n.d(e,{K:function(){return c}});var s=n(74487),a=n(22786),r=n(63927),i=t([s,r]);[s,r]=i.then?(await i)():i;const u=(0,a.A)(t=>new Intl.RelativeTimeFormat(t.language,{numeric:"auto"})),c=(t,e,n,o=!0)=>{const s=(0,r.x)(t,n,e);return o?u(e).format(s.value,s.unit):Intl.NumberFormat(e.language,{style:"unit",unit:s.unit,unitDisplay:"long"}).format(Math.abs(s.value))};o()}catch(u){o(u)}})},96029:function(t,e,n){n.d(e,{Tq:function(){return r},Z:function(){return s},ZV:function(){return o},sj:function(){return a}});const o=["sun","mon","tue","wed","thu","fri","sat"],s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],a={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"},r={sun:"sunday",mon:"monday",tue:"tuesday",wed:"wednesday",thu:"thursday",fri:"friday",sat:"saturday"}},63927:function(t,e,n){n.a(t,async function(t,o){try{n.d(e,{x:function(){return f}});var s=n(6946),a=n(52640),r=n(38684),i=n(380),u=t([i]);i=(u.then?(await u)():u)[0];const l=1e3,h=60,d=60*h;function f(t,e=Date.now(),n,o={}){const u=Object.assign(Object.assign({},b),o||{}),c=(+t-+e)/l;if(Math.abs(c)<u.second)return{value:Math.round(c),unit:"second"};const f=c/h;if(Math.abs(f)<u.minute)return{value:Math.round(f),unit:"minute"};const g=c/d;if(Math.abs(g)<u.hour)return{value:Math.round(g),unit:"hour"};const v=new Date(t),m=new Date(e);v.setHours(0,0,0,0),m.setHours(0,0,0,0);const y=(0,s.c)(v,m);if(0===y)return{value:Math.round(g),unit:"hour"};if(Math.abs(y)<u.day)return{value:y,unit:"day"};const p=(0,i.P)(n),_=(0,a.k)(v,{weekStartsOn:p}),M=(0,a.k)(m,{weekStartsOn:p}),D=(0,r.I)(_,M);if(0===D)return{value:y,unit:"day"};if(Math.abs(D)<u.week)return{value:D,unit:"week"};const w=v.getFullYear()-m.getFullYear(),I=12*w+v.getMonth()-m.getMonth();return 0===I?{value:D,unit:"week"}:Math.abs(I)<u.month||0===w?{value:I,unit:"month"}:{value:Math.round(w),unit:"year"}}const b={second:59,minute:59,hour:22,day:5,week:4,month:11};o()}catch(c){o(c)}})},2854:function(t,e,n){n.a(t,async function(t,o){try{n.r(e),n.d(e,{BluetoothNetworkVisualization:function(){return w}});n(44114),n(18111),n(22489),n(20116),n(7588),n(61701),n(53921),n(62953);var s=n(40445),a=n(96196),r=n(77845),i=n(22786),u=n(98975),c=n(76774),l=n(91926),h=n(77796),d=n(7358),f=n(21030),b=(n(31168),n(34301)),g=t([d,b,u]);[d,b,u]=g.then?(await g)():g;let v,m,y=t=>t;const p=1e4,_="ha",M="Home Assistant",D=[[-70,"--green-color"],[-75,"--lime-color"],[-80,"--yellow-color"],[-85,"--amber-color"],[-90,"--orange-color"],[-95,"--deep-orange-color"],[-1/0,"--red-color"]];class w extends a.WF{connectedCallback(){if(super.connectedCallback(),this.hass){this._unsub_advertisements=(0,f.Ht)(this.hass.connection,t=>{this._data.length?this._throttledUpdateData(t):this._data=t}),this._unsub_scanners=(0,f.mj)(this.hass.connection,t=>{this._scanners=t});const t=Object.values(this.hass.devices).filter(t=>t.connections.find(t=>"bluetooth"===t[0]));this._sourceDevices=Object.fromEntries(t.map(t=>[t.connections.find(t=>"bluetooth"===t[0])[1],t]))}}disconnectedCallback(){super.disconnectedCallback(),this._unsub_advertisements&&(this._unsub_advertisements(),this._unsub_advertisements=void 0),this._throttledUpdateData.cancel(),this._unsub_scanners&&(this._unsub_scanners(),this._unsub_scanners=void 0)}render(){return(0,a.qy)(v||(v=y` <hass-tabs-subpage .hass="${0}" .narrow="${0}" .route="${0}" .tabs="${0}"> <ha-network-graph .hass="${0}" .data="${0}" .tooltipFormatter="${0}" @chart-click="${0}"></ha-network-graph> </hass-tabs-subpage> `),this.hass,this.narrow,this.route,b.bluetoothTabs,this.hass,this._formatNetworkData(this._data,this._scanners),this._tooltipFormatter,this._handleChartClick)}_getBluetoothDeviceName(t){var e,n,o,s;return t===_?M:this._sourceDevices[t]?(null===(n=this._sourceDevices[t])||void 0===n?void 0:n.name_by_user)||(null===(o=this._sourceDevices[t])||void 0===o?void 0:o.name)||t:this._scanners[t]?(null===(s=this._scanners[t])||void 0===s?void 0:s.name)||t:(null===(e=this._data.find(e=>e.address===t))||void 0===e?void 0:e.name)||t}_getLineWidth(t){return t>-33?3:t>-66?2:1}_handleChartClick(t){if("node"===t.detail.dataType&&"pointer"===t.detail.event.target.cursor){const{id:e}=t.detail.data,n=this._sourceDevices[e];n&&(0,l.o)(`/config/devices/device/${n.id}`)}}static get styles(){return[(0,a.AH)(m||(m=y`ha-network-graph{height:100%}`))]}constructor(...t){super(...t),this.narrow=!1,this.isWide=!1,this._data=[],this._scanners={},this._sourceDevices={},this._throttledUpdateData=(0,h.n)(t=>{this._data=t},p),this._getRssiColorVar=(0,i.A)(t=>{for(const[e,n]of D)if(t>e)return n;return"--red-color"}),this._formatNetworkData=(0,i.A)((t,e)=>{const n=getComputedStyle(this),o=[{name:M,symbol:"roundRect",itemStyle:{color:n.getPropertyValue("--primary-color")}},{name:this.hass.localize("ui.panel.config.bluetooth.scanners"),symbol:"circle",itemStyle:{color:n.getPropertyValue("--cyan-color")}},{name:this.hass.localize("ui.panel.config.bluetooth.known_devices"),symbol:"circle",itemStyle:{color:n.getPropertyValue("--teal-color")}},{name:this.hass.localize("ui.panel.config.bluetooth.unknown_devices"),symbol:"circle",itemStyle:{color:n.getPropertyValue("--disabled-color")}}],s=[{id:_,name:M,category:0,value:4,symbol:"roundRect",symbolSize:40,polarDistance:0}],a=[];return Object.values(e).forEach(t=>{const e=this._sourceDevices[t.source],o=e?(0,c.w)(e,this.hass).area:void 0;s.push({id:t.source,name:(null==e?void 0:e.name_by_user)||(null==e?void 0:e.name)||t.name,context:null==o?void 0:o.name,category:1,value:5,symbol:"circle",symbolSize:30,polarDistance:.25}),a.push({source:_,target:t.source,value:0,symbol:"none",lineStyle:{width:3,color:n.getPropertyValue("--primary-color")}})}),t.forEach(t=>{if(e[t.address])return void a.push({source:t.source,target:t.address,value:t.rssi,symbol:"none",lineStyle:{width:this._getLineWidth(t.rssi),color:n.getPropertyValue(this._getRssiColorVar(t.rssi))}});const o=this._sourceDevices[t.address],r=o?(0,c.w)(o,this.hass).area:void 0;s.push({id:t.address,name:this._getBluetoothDeviceName(t.address),context:null==r?void 0:r.name,value:o?1:0,category:o?2:3,symbolSize:20}),a.push({source:t.source,target:t.address,value:t.rssi,symbol:"none",lineStyle:{width:this._getLineWidth(t.rssi),color:o?n.getPropertyValue(this._getRssiColorVar(t.rssi)):n.getPropertyValue("--disabled-color")}})}),{nodes:s,links:a,categories:o}}),this._tooltipFormatter=t=>{const{dataType:e,data:n}=t;let o="";if("edge"===e){const{source:t,target:e,value:s}=n;o=`${this._getBluetoothDeviceName(t)} â†’ ${this._getBluetoothDeviceName(e)}`,t!==_&&(o+=` <b>${this.hass.localize("ui.panel.config.bluetooth.rssi")}:</b> ${s}`)}else{const{id:t}=n,e=this._getBluetoothDeviceName(t),s=this._data.find(e=>e.address===t);if(s){o=`<b>${e}</b><br><b>${this.hass.localize("ui.panel.config.bluetooth.address")}:</b> ${t}<br><b>${this.hass.localize("ui.panel.config.bluetooth.rssi")}:</b> ${s.rssi}<br><b>${this.hass.localize("ui.panel.config.bluetooth.source")}:</b> ${s.source}<br><b>${this.hass.localize("ui.panel.config.bluetooth.updated")}:</b> ${(0,u.K)(new Date(1e3*s.time),this.hass.locale)}`;const n=this._sourceDevices[t];if(n){const t=(0,c.w)(n,this.hass).area;t&&(o+=`<br><b>${this.hass.localize("ui.panel.config.bluetooth.area")}: </b>${t.name}`)}}else{const n=this._sourceDevices[t];if(n){o=`<b>${e}</b><br><b>${this.hass.localize("ui.panel.config.bluetooth.address")}:</b> ${t}`;const s=(0,c.w)(n,this.hass).area;s&&(o+=`<br><b>${this.hass.localize("ui.panel.config.bluetooth.area")}: </b>${s.name}`)}}}return o}}}(0,s.Cg)([(0,r.MZ)({attribute:!1})],w.prototype,"hass",void 0),(0,s.Cg)([(0,r.MZ)({type:Boolean,reflect:!0})],w.prototype,"narrow",void 0),(0,s.Cg)([(0,r.MZ)({attribute:"is-wide",type:Boolean})],w.prototype,"isWide",void 0),(0,s.Cg)([(0,r.MZ)({attribute:!1})],w.prototype,"route",void 0),(0,s.Cg)([(0,r.wk)()],w.prototype,"_data",void 0),(0,s.Cg)([(0,r.wk)()],w.prototype,"_scanners",void 0),(0,s.Cg)([(0,r.wk)()],w.prototype,"_sourceDevices",void 0),w=(0,s.Cg)([(0,r.EM)("bluetooth-network-visualization")],w),o()}catch(v){o(v)}})},53921:function(t,e,n){var o=n(46518),s=n(72652),a=n(97040);o({target:"Object",stat:!0},{fromEntries:function(t){var e={};return s(t,function(t,n){a(e,t,n)},{AS_ENTRIES:!0}),e}})},2045:function(t,e,n){n.d(e,{q:function(){return s}});let o={};function s(){return o}},74816:function(t,e,n){n.d(e,{x:function(){return s}});n(18111),n(20116),n(61701);var o=n(51039);function s(t,...e){const n=o.w.bind(null,t||e.find(t=>"object"==typeof t));return e.map(n)}},3952:function(t,e,n){n.d(e,{m:function(){return u}});n(62953);var o=n(83504);function s(t){const e=(0,o.a)(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}var a=n(74816),r=n(9160),i=n(35932);function u(t,e,n){const[o,u]=(0,a.x)(null==n?void 0:n.in,t,e),c=(0,i.o)(o),l=(0,i.o)(u),h=+c-s(c),d=+l-s(l);return Math.round((h-d)/r.w4)}},6946:function(t,e,n){n.d(e,{c:function(){return a}});n(62953);var o=n(74816),s=n(3952);function a(t,e,n){const[a,i]=(0,o.x)(null==n?void 0:n.in,t,e),u=r(a,i),c=Math.abs((0,s.m)(a,i));a.setDate(a.getDate()-u*c);const l=u*(c-Number(r(a,i)===-u));return 0===l?0:l}function r(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}},38684:function(t,e,n){n.d(e,{I:function(){return a}});var o=n(6439),s=n(6946);function a(t,e,n){const a=(0,s.c)(t,e,n)/7;return(0,o.u)(null==n?void 0:n.roundingMethod)(a)}},35932:function(t,e,n){n.d(e,{o:function(){return s}});var o=n(83504);function s(t,e){const n=(0,o.a)(t,null==e?void 0:e.in);return n.setHours(0,0,0,0),n}},52640:function(t,e,n){n.d(e,{k:function(){return a}});var o=n(2045),s=n(83504);function a(t,e){var n,a,r,i,u,c;const l=(0,o.q)(),h=null!==(n=null!==(a=null!==(r=null!==(i=null==e?void 0:e.weekStartsOn)&&void 0!==i?i:null==e||null===(u=e.locale)||void 0===u||null===(u=u.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==r?r:l.weekStartsOn)&&void 0!==a?a:null===(c=l.locale)||void 0===c||null===(c=c.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==n?n:0,d=(0,s.a)(t,null==e?void 0:e.in),f=d.getDay(),b=(f<h?7:0)+f-h;return d.setDate(d.getDate()-b),d.setHours(0,0,0,0),d}}}]);
//# sourceMappingURL=64811.67ca6000051e64d0.js.map