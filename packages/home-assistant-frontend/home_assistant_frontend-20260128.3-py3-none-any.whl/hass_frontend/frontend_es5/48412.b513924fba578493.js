"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["48412"],{58548:function(t,i,e){e.d(i,{A:function(){return o}});e(16280),e(27495),e(25440);const n=t=>{const i=parseFloat(t);if(isNaN(i))throw new Error(`${t} is not a number`);return i};function o(t){if(!t)return null;try{if(t.endsWith("%"))return{w:100,h:n(t.slice(0,-1))};const i=t.replace(":","x").split("x");return 0===i.length?null:1===i.length?{w:n(i[0]),h:1}:{w:n(i[0]),h:n(i[1])}}catch(i){}return null}},17022:function(t,i,e){e.d(i,{A1:function(){return n},CY:function(){return a},Fn:function(){return o},Jz:function(){return c},St:function(){return r},VA:function(){return u},WI:function(){return d},iY:function(){return h},xw:function(){return s}});e(16280),e(3362);const n=(t,i)=>t.callWS({type:"media_source/resolve_media",media_content_id:i}),o=(t,i)=>t.callWS({type:"media_source/browse_media",media_content_id:i}),s="__MANUAL_ENTRY__",a=t=>t.startsWith(s),r=t=>t.startsWith("media-source://"),c=t=>t.startsWith("media-source://media_source"),h=t=>t.startsWith("media-source://image_upload"),u=async(t,i,e)=>{const n=new FormData;n.append("media_content_id",i),n.append("file",e);const o=await t.fetchWithAuth("/api/media_source/local_source/upload",{method:"POST",body:n});if(413===o.status)throw new Error(`Uploaded file is too large (${e.name})`);if(200!==o.status)throw new Error("Unknown error");return o.json()},d=async(t,i)=>t.callWS({type:"media_source/local_source/remove",media_content_id:i})},86063:function(t,i,e){e.a(t,async function(t,n){try{e.r(i),e.d(i,{STUB_IMAGE:function(){return A}});e(16280),e(74423),e(3362),e(62953);var o=e(40445),s=e(96196),a=e(77845),r=e(94333),c=e(32288),h=e(42372),u=e(71727),d=(e(76776),e(67013)),f=e(19037),g=e(37642),_=e(13632),l=e(37544),m=e(97176),p=e(784),y=e(57914),w=e(85979),v=t([y]);y=(v.then?(await v)():v)[0];let b,$,x,k,C,E,W=t=>t;const A="https://demo.home-assistant.io/stub_config/bedroom.png";class S extends s.WF{static async getConfigElement(){return await e.e("76999").then(e.bind(e,98458)),document.createElement("hui-picture-entity-card-editor")}static getStubConfig(t,i,e){return{type:"picture-entity",entity:(0,_.B)(t,1,i,e,["light","switch"])[0]||"",image:A}}getCardSize(){return 3}setConfig(t){if(!t||!t.entity)throw new Error("Entity must be specified");if(!(["camera","image","person"].includes((0,u.m)(t.entity))||t.image||t.state_image||t.camera_image))throw new Error("No image source configured");this._config=Object.assign({show_name:!0,show_state:!0,tap_action:{action:"more-info"}},t)}shouldUpdate(t){return(0,p.LX)(this,t)}updated(t){if(super.updated(t),!this._config||!this.hass)return;const i=t.get("hass"),e=t.get("_config");i&&e&&i.themes===this.hass.themes&&e.theme===this._config.theme||(0,h.Q)(this,this.hass.themes,this._config.theme)}render(){var t,i;if(!this._config||!this.hass)return s.s6;const e=this.hass.states[this._config.entity];if(!e)return(0,s.qy)(b||(b=W` <hui-warning .hass="${0}"> ${0} </hui-warning> `),this.hass,(0,w.j)(this.hass,this._config.entity));const n=(0,g.v)(this.hass,e,this._config.name),o=this.hass.formatEntityState(e);let a="";this._config.show_name&&this._config.show_state?a=(0,s.qy)($||($=W` <div class="footer both"> <div>${0}</div> <div>${0}</div> </div> `),n,o):this._config.show_name?a=(0,s.qy)(x||(x=W`<div class="footer single">${0}</div>`),n):this._config.show_state&&(a=(0,s.qy)(k||(k=W`<div class="footer single">${0}</div>`),o));const h=(0,u.m)(this._config.entity);let _="object"==typeof(null===(t=this._config)||void 0===t?void 0:t.image)&&this._config.image.media_content_id||this._config.image;if(!_)switch(h){case"image":_=(0,d.e)(e);break;case"person":e.attributes.entity_picture&&(_=e.attributes.entity_picture)}const l="grid"===this.layout&&"number"==typeof(null===(i=this._config.grid_options)||void 0===i?void 0:i.rows),p=(0,m.h)(this._config.tap_action)||Boolean(!this._config.tap_action&&this._config.entity);return(0,s.qy)(C||(C=W` <ha-card> <div class="image-container ${0}" @action="${0}" .actionHandler="${0}" tabindex="${0}" role="${0}"> <hui-image .hass="${0}" .image="${0}" .stateImage="${0}" .stateFilter="${0}" .cameraImage="${0}" .cameraView="${0}" .entity="${0}" .aspectRatio="${0}" .fitMode="${0}"></hui-image> </div> ${0} </ha-card> `),(0,r.H)({clickable:p}),this._handleAction,(0,f.T)({hasHold:(0,m.h)(this._config.hold_action),hasDoubleClick:(0,m.h)(this._config.double_tap_action)}),(0,c.J)(p?"0":void 0),(0,c.J)(p?"0":void 0),this.hass,_,this._config.state_image,this._config.state_filter,"camera"===h?this._config.entity:this._config.camera_image,this._config.camera_view,this._config.entity,l?void 0:this._config.aspect_ratio,this._config.fit_mode,a)}_handleAction(t){(0,l.$)(this,this.hass,this._config,t.detail.action)}}S.styles=(0,s.AH)(E||(E=W`ha-card{min-height:75px;overflow:hidden;position:relative;height:100%;box-sizing:border-box}.image-container{height:100%}.image-container.clickable{cursor:pointer}hui-image{pointer-events:none;height:100%}.footer{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;position:absolute;left:0;right:0;bottom:0;background-color:var(--ha-picture-card-background-color,rgba(0,0,0,.3));padding:16px;font-size:var(--ha-font-size-l);line-height:16px;color:var(--ha-picture-card-text-color,#fff);pointer-events:none}.both{display:flex;justify-content:space-between}.single{text-align:center}`)),(0,o.Cg)([(0,a.MZ)({attribute:!1})],S.prototype,"hass",void 0),(0,o.Cg)([(0,a.MZ)({attribute:!1})],S.prototype,"layout",void 0),(0,o.Cg)([(0,a.wk)()],S.prototype,"_config",void 0),S=(0,o.Cg)([(0,a.EM)("hui-picture-entity-card")],S),n()}catch(b){n(b)}})}}]);
//# sourceMappingURL=48412.b513924fba578493.js.map