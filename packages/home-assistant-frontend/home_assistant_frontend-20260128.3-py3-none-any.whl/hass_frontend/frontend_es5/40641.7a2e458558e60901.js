"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["40641"],{91069:function(e,t,n){n.a(e,async function(e,o){try{n.d(t,{EO:function(){return v},Yq:function(){return k},_U:function(){return O},eE:function(){return S},fU:function(){return b},ol:function(){return w},xo:function(){return C}});var i=n(78016),r=n(31810),s=n(49134),a=n(81977),c=n(36307),l=n(35932),u=n(73983),d=n(6946),_=n(92913),f=n(83339),h=n(77972),p=n(31886),g=n(46927),m=e([p]);p=(m.then?(await m)():m)[0];const y=(e,t,n,o)=>{const i=n(new p.BB(e,t),o);return i instanceof Date?new Date(i.getTime()):i},w=(e,t,n,o,i)=>n.time_zone===g.Wj.server?y(e,o.time_zone,t,i):t(e,i),C=(e,t,n,o,i)=>n.time_zone===g.Wj.server?y(e,o.time_zone,t,i):t(e,i),v=(e,t,n,o,i)=>C(e,n,o,i,o.time_zone===g.Wj.server?new p.BB(t,i.time_zone):t),S=(e,t,n,o,p)=>{let g,m;if(C(e,i.e,o,p)&&C(t,r.c,o,p)){const i=(v(t,e,s.W,o,p)+1)*(n?1:-1);g=w(e,a.P,o,p,i),m=w(w(t,a.P,o,p,i),c.p,o,p)}else if(C(e,e=>(0,l.o)(e).getMilliseconds()===e.getMilliseconds(),o,p)&&C(t,e=>(0,u.D)(e).getMilliseconds()===e.getMilliseconds(),o,p)){const i=(v(t,e,d.c,o,p)+1)*(n?1:-1);g=w(e,_.f,o,p,i),m=w(t,_.f,o,p,i)}else{const i=v(t,e,f.b,o,p)*(n?1:-1);g=w(e,h.A,o,p,i),m=w(t,h.A,o,p,i)}return{start:g,end:m}},O=(e,t)=>{const n=new p.BB(e,t);return new Date(n.getTime())},k=(e,t)=>new p.BB(e,t).toISOString().split("T")[0],b=(e,t)=>new p.BB(e,t).toISOString().split("T")[1].split(".")[0];o()}catch(y){o(y)}})},46223:function(e,t,n){n.a(e,async function(e,o){try{n.d(t,{b:function(){return v}});var i=n(35932),r=n(73983),s=n(92913),a=n(52640),c=n(69137),l=n(35660),u=n(36307),d=n(11650),_=n(15797),f=n(33977),h=n(69748),p=n(55144),g=n(21828),m=n(66708),y=n(91069),w=n(380),C=e([w,y]);[w,y]=C.then?(await C)():C;const v=(e,t)=>{const n=new Date,o=(0,w.P)(e.locale);switch(t){case"today":return[(0,y.ol)(n,i.o,e.locale,e.config,{weekStartsOn:o}),(0,y.ol)(n,r.D,e.locale,e.config,{weekStartsOn:o})];case"yesterday":return[(0,y.ol)((0,s.f)(n,-1),i.o,e.locale,e.config,{weekStartsOn:o}),(0,y.ol)((0,s.f)(n,-1),r.D,e.locale,e.config,{weekStartsOn:o})];case"this_week":return[(0,y.ol)(n,a.k,e.locale,e.config,{weekStartsOn:o}),(0,y.ol)(n,c.$,e.locale,e.config,{weekStartsOn:o})];case"this_month":return[(0,y.ol)(n,l.w,e.locale,e.config),(0,y.ol)(n,u.p,e.locale,e.config)];case"this_quarter":return[(0,y.ol)(n,d.a,e.locale,e.config),(0,y.ol)(n,_.j,e.locale,e.config)];case"this_year":return[(0,y.ol)(n,f.D,e.locale,e.config),(0,y.ol)(n,h.Q,e.locale,e.config)];case"now-7d":return[(0,y.ol)(n,p.e,e.locale,e.config,7),(0,y.ol)(n,p.e,e.locale,e.config,0)];case"now-30d":return[(0,y.ol)(n,p.e,e.locale,e.config,30),(0,y.ol)(n,p.e,e.locale,e.config,0)];case"now-12m":return[(0,y.ol)(n,g.a,e.locale,e.config,12),(0,y.ol)(n,g.a,e.locale,e.config,0)];case"now-1h":return[(0,y.ol)(n,m.O,e.locale,e.config,1),(0,y.ol)(n,m.O,e.locale,e.config,0)];case"now-12h":return[(0,y.ol)(n,m.O,e.locale,e.config,12),(0,y.ol)(n,m.O,e.locale,e.config,0)];case"now-24h":return[(0,y.ol)(n,m.O,e.locale,e.config,24),(0,y.ol)(n,m.O,e.locale,e.config,0)]}return[n,n]};o()}catch(v){o(v)}})},23528:function(e,t,n){n.a(e,async function(e,o){try{n.d(t,{$3:function(){return m},$O:function(){return b},$j:function(){return y},ED:function(){return a},JE:function(){return M},OQ:function(){return W},PU:function(){return I},Ph:function(){return p},Uf:function(){return k},W1:function(){return g},Wr:function(){return _},Z:function(){return u},gF:function(){return w},iY:function(){return C},jU:function(){return c},nN:function(){return O},p3:function(){return d},pJ:function(){return h},r_:function(){return l},sz:function(){return f}});n(74423),n(18111),n(13579),n(62953);var i=n(28978),r=n(380),s=e([r]);r=(s.then?(await s)():s)[0];var a=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({});const c=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],l=["L","gal","ft³","m³","CCF","MCF"],u=e=>e.sendMessagePromise({type:"recorder/info"}),d=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),_=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),f=(e,t,n,o,i="hour",r,s)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:null==n?void 0:n.toISOString(),statistic_ids:o,period:i,units:r,types:s}),h=(e,t,n,o)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:o,fixed_period:n.fixed_period?{start_time:n.fixed_period.start instanceof Date?n.fixed_period.start.toISOString():n.fixed_period.start,end_time:n.fixed_period.end instanceof Date?n.fixed_period.end.toISOString():n.fixed_period.end}:void 0,calendar:n.calendar?Object.assign(Object.assign({},"week"===n.calendar.period?{first_weekday:(0,r.D)(e.locale).substring(0,3)}:{}),n.calendar):void 0,rolling_window:n.rolling_window}),p=e=>e.callWS({type:"recorder/validate_statistics"}),g=(e,t,n,o)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:n,unit_class:o}),m=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),y=e=>{let t=null;if(!e)return null;for(const n of e)null!==n.change&&void 0!==n.change&&(null===t?t=n.change:t+=n.change);return t},w=(e,t)=>{let n=null;for(const o of t){if(!(o in e))continue;const t=y(e[o]);null!==t&&(null===n?n=t:n+=t)}return n},C=(e,t)=>e.some(e=>void 0!==e[t]&&null!==e[t]),v=["mean","min","max"],S=["sum","state","change"],O=(e,t)=>!(!v.includes(t)||0===e.mean_type)||!(!S.includes(t)||!e.has_sum),k=(e,t,n,o,i)=>{const r=new Date(n).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:r,adjustment:o,adjustment_unit_of_measurement:i})},b=(e,t,n)=>{const o=e.states[t];return o?(0,i.u)(o):(null==n?void 0:n.name)||t},M=(e,t,n)=>{let o;var i;t&&(o=null===(i=e.states[t])||void 0===i?void 0:i.attributes.unit_of_measurement);return void 0===o?null==n?void 0:n.statistics_unit_of_measurement:o},W=e=>e.includes(":"),I=e=>e.callWS({type:"recorder/update_statistics_issues"});o()}catch(c){o(c)}})},62284:function(e,t,n){n.a(e,async function(e,o){try{n.r(t),n.d(t,{HuiEnergyCompareCard:function(){return C}});n(62953);var i=n(40445),r=n(6946),s=n(73983),a=n(96196),c=n(77845),l=n(72487),u=n(38114),d=n(54706),_=n(784),f=(n(38962),n(1087)),h=n(14503),p=e([l,u]);[l,u]=p.then?(await p)():p;let g,m,y,w=e=>e;class C extends((0,d.E)(a.WF)){getCardSize(){return 1}setConfig(e){this._config=e}hassSubscribe(){return[(0,u.tb)(this.hass,{key:this._config.collection_key}).subscribe(e=>this._update(e))]}shouldUpdate(e){return(0,_.xP)(this,e)||e.size>1||!e.has("hass")}render(){if(!this._startCompare||!this._endCompare)return a.s6;const e=(0,r.c)(this._endCompare,this._startCompare);return(0,a.qy)(g||(g=w` <ha-alert dismissable @alert-dismissed-clicked="${0}"> ${0} </ha-alert> `),this._stopCompare,this.hass.localize("ui.panel.lovelace.cards.energy.energy_compare.info",{start:(0,a.qy)(m||(m=w`<b>${0}${0}</b>`),(0,l.Yq)(this._start,this.hass.locale,this.hass.config),e>0?` -\n          ${(0,l.Yq)(this._end||(0,s.D)(new Date),this.hass.locale,this.hass.config)}`:""),end:(0,a.qy)(y||(y=w`<b>${0}${0}</b> <button class="link" @click="${0}"> (${0}) </button>`),(0,l.Yq)(this._startCompare,this.hass.locale,this.hass.config),e>0?` -\n          ${(0,l.Yq)(this._endCompare,this.hass.locale,this.hass.config)}`:"",this._changeCompareMode,this._compareMode===u.lh.PREVIOUS?this.hass.localize("ui.panel.lovelace.cards.energy.energy_compare.compare_previous_year"):this.hass.localize("ui.panel.lovelace.cards.energy.energy_compare.compare_previous_period"))}))}_changeCompareMode(){const e=(0,u.tb)(this.hass,{key:this._config.collection_key});e.setCompare(this._compareMode===u.lh.PREVIOUS?u.lh.YOY:u.lh.PREVIOUS),e.refresh()}_update(e){this._start=e.start,this._end=e.end,this._startCompare=e.startCompare,this._endCompare=e.endCompare,this._compareMode=e.compareMode;const t=this.hidden;this.hidden=!this._startCompare,t!==this.hidden&&(0,f.r)(this,"card-visibility-changed")}_stopCompare(){const e=(0,u.tb)(this.hass,{key:this._config.collection_key});e.setCompare(u.lh.NONE),e.refresh()}constructor(...e){super(...e),this.hidden=!0,this.connectedWhileHidden=!0,this.hassSubscribeRequiredHostProps=["_config"]}}C.styles=[h.og],(0,i.Cg)([(0,c.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,i.Cg)([(0,c.wk)()],C.prototype,"_config",void 0),(0,i.Cg)([(0,c.wk)()],C.prototype,"_start",void 0),(0,i.Cg)([(0,c.wk)()],C.prototype,"_end",void 0),(0,i.Cg)([(0,c.wk)()],C.prototype,"_startCompare",void 0),(0,i.Cg)([(0,c.wk)()],C.prototype,"_endCompare",void 0),(0,i.Cg)([(0,c.wk)()],C.prototype,"_compareMode",void 0),(0,i.Cg)([(0,c.MZ)({type:Boolean,reflect:!0})],C.prototype,"hidden",void 0),C=(0,i.Cg)([(0,c.EM)("hui-energy-compare-card")],C),o()}catch(g){o(g)}})},56434:function(e,t,n){n.d(t,{e:function(){return i}});var o=n(81977);function i(e,t,n){return(0,o.P)(e,12*t,n)}}}]);
//# sourceMappingURL=40641.7a2e458558e60901.js.map