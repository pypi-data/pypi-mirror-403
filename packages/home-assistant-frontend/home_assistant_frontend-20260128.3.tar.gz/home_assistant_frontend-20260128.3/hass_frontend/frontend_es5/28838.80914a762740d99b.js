"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["28838"],{20559:function(e,t,a){a.d(t,{JW:function(){return y},OW:function(){return v},PO:function(){return p},VN:function(){return c},XG:function(){return u},eB:function(){return h},gZ:function(){return f},hM:function(){return l},k2:function(){return d},lU:function(){return _},nc:function(){return m},vX:function(){return g},z1:function(){return o}});a(18111),a(22489),a(20116),a(61701),a(3362),a(17642),a(58004),a(33853),a(45876),a(32475),a(15024),a(31698),a(62953);var n=a(36312),i=a(91926),s=a(28989),r=a(16790),o=function(e){return e.THREAD="thread",e.WIFI="wifi",e.ETHERNET="ethernet",e.UNKNOWN="unknown",e}({});const d=e=>{var t;return null===(t=e.auth.external)||void 0===t?void 0:t.config.canCommissionMatter},c=async e=>{if((0,n.x)(e,"thread")){const t=(await(0,r.sL)(e)).datasets.find(e=>e.preferred);if(t)return e.auth.external.fireMessage({type:"matter/commission",payload:{active_operational_dataset:(await(0,r.dy)(e,t.dataset_id)).tlv,border_agent_id:t.preferred_border_agent_id,mac_extended_address:t.preferred_extended_address,extended_pan_id:t.extended_pan_id}})}return e.auth.external.fireMessage({type:"matter/commission"})},l=(e,t)=>{let a;const n=(0,s.Ag)(e.connection,e=>{if(!a)return void(a=new Set(Object.values(e).filter(e=>e.identifiers.find(e=>"matter"===e[0])).map(e=>e.id)));const s=Object.values(e).filter(e=>e.identifiers.find(e=>"matter"===e[0])&&!a.has(e.id));s.length&&(n(),a=void 0,null==t||t(),(0,i.o)(`/config/devices/device/${s[0].id}`))});return()=>{n(),a=void 0}},p=(e,t)=>e.callWS({type:"matter/commission",code:t}),u=(e,t)=>e.callWS({type:"matter/commission_on_network",pin:t}),_=(e,t,a)=>e.callWS({type:"matter/set_wifi_credentials",network_name:t,password:a}),f=(e,t)=>e.callWS({type:"matter/set_thread",thread_operation_dataset:t}),h=(e,t)=>e.callWS({type:"matter/node_diagnostics",device_id:t}),v=(e,t)=>e.callWS({type:"matter/ping_node",device_id:t}),m=(e,t)=>e.callWS({type:"matter/open_commissioning_window",device_id:t}),g=(e,t,a)=>e.callWS({type:"matter/remove_matter_fabric",device_id:t,fabric_index:a}),y=(e,t)=>e.callWS({type:"matter/interview_node",device_id:t})},16790:function(e,t,a){a.d(t,{It:function(){return o},W4:function(){return c},dy:function(){return r},l1:function(){return l},rY:function(){return d},sL:function(){return s},wm:function(){return i}});class n{processEvent(e){return"router_discovered"===e.type?this.routers[e.key]=e.data:"router_removed"===e.type&&delete this.routers[e.key],Object.values(this.routers)}constructor(){this.routers={}}}const i=(e,t)=>{const a=new n;return e.connection.subscribeMessage(e=>t(a.processEvent(e)),{type:"thread/discover_routers"})},s=e=>e.callWS({type:"thread/list_datasets"}),r=(e,t)=>e.callWS({type:"thread/get_dataset_tlv",dataset_id:t}),o=(e,t,a)=>e.callWS({type:"thread/add_dataset_tlv",source:t,tlv:a}),d=(e,t)=>e.callWS({type:"thread/delete_dataset",dataset_id:t}),c=(e,t)=>e.callWS({type:"thread/set_preferred_dataset",dataset_id:t}),l=(e,t,a,n)=>e.callWS({type:"thread/set_preferred_border_agent",dataset_id:t,border_agent_id:a,extended_address:n})},59077:function(e,t,a){a.r(t),a.d(t,{HaDeviceInfoMatter:function(){return h}});a(18111),a(61701),a(3362);var n=a(40445),i=a(96196),s=a(77845),r=(a(11382),a(20559)),o=a(54706),d=a(14503);let c,l,p,u,_,f=e=>e;class h extends((0,o.E)(i.WF)){willUpdate(e){super.willUpdate(e),e.has("device")&&this._fetchNodeDetails()}async _fetchNodeDetails(){if(this.device&&null===this.device.via_device_id)try{this._nodeDiagnostics=await(0,r.eB)(this.hass,this.device.id)}catch(e){this._nodeDiagnostics=void 0}}render(){return this._nodeDiagnostics?(0,i.qy)(c||(c=f` <ha-expansion-panel .header="${0}"> <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> ${0} ${0} <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> </ha-expansion-panel> `),this.hass.localize("ui.panel.config.matter.device_info.matter_info"),this.hass.localize("ui.panel.config.matter.device_info.node_id"),this._nodeDiagnostics.node_id,this.hass.localize("ui.panel.config.matter.device_info.network_type"),this.hass.localize(`ui.panel.config.matter.network_type.${this._nodeDiagnostics.network_type}`),this.hass.localize("ui.panel.config.matter.device_info.node_type"),this.hass.localize(`ui.panel.config.matter.node_type.${this._nodeDiagnostics.node_type}`),this._nodeDiagnostics.network_name?(0,i.qy)(l||(l=f` <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> `),this.hass.localize("ui.panel.config.matter.device_info.network_name"),this._nodeDiagnostics.network_name):i.s6,this._nodeDiagnostics.mac_address?(0,i.qy)(p||(p=f` <div class="row"> <span class="name">${0}:</span> <span class="value">${0}</span> </div> `),this.hass.localize("ui.panel.config.matter.device_info.mac_address"),this._nodeDiagnostics.mac_address):i.s6,this.hass.localize("ui.panel.config.matter.device_info.ip_adresses"),this._nodeDiagnostics.ip_adresses.map(e=>(0,i.qy)(u||(u=f`${0}<br>`),e))):i.s6}static get styles(){return[d.RF,(0,i.AH)(_||(_=f`h4{margin-bottom:4px}div{word-break:break-all;margin-top:2px}.row{display:flex;justify-content:space-between;padding-bottom:4px}.value{text-align:right}ha-expansion-panel{margin:8px -16px 0;--expansion-panel-summary-padding:0 16px;--expansion-panel-content-padding:0 16px;--ha-card-border-radius:var(--ha-border-radius-square)}`))]}}(0,n.Cg)([(0,s.MZ)({attribute:!1})],h.prototype,"hass",void 0),(0,n.Cg)([(0,s.MZ)({attribute:!1})],h.prototype,"device",void 0),(0,n.Cg)([(0,s.wk)()],h.prototype,"_nodeDiagnostics",void 0),h=(0,n.Cg)([(0,s.EM)("ha-device-info-matter")],h)}}]);
//# sourceMappingURL=28838.80914a762740d99b.js.map