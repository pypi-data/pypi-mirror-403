"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["57516"],{91069:function(e,t,n){n.a(e,async function(e,i){try{n.d(t,{EO:function(){return w},Yq:function(){return M},_U:function(){return S},eE:function(){return b},fU:function(){return k},ol:function(){return y},xo:function(){return x}});var a=n(78016),o=n(31810),r=n(49134),s=n(81977),l=n(36307),c=n(35932),u=n(73983),d=n(6946),h=n(92913),g=n(83339),f=n(77972),_=n(31886),p=n(46927),v=e([_]);_=(v.then?(await v)():v)[0];const m=(e,t,n,i)=>{const a=n(new _.BB(e,t),i);return a instanceof Date?new Date(a.getTime()):a},y=(e,t,n,i,a)=>n.time_zone===p.Wj.server?m(e,i.time_zone,t,a):t(e,a),x=(e,t,n,i,a)=>n.time_zone===p.Wj.server?m(e,i.time_zone,t,a):t(e,a),w=(e,t,n,i,a)=>x(e,n,i,a,i.time_zone===p.Wj.server?new _.BB(t,a.time_zone):t),b=(e,t,n,i,_)=>{let p,v;if(x(e,a.e,i,_)&&x(t,o.c,i,_)){const a=(w(t,e,r.W,i,_)+1)*(n?1:-1);p=y(e,s.P,i,_,a),v=y(y(t,s.P,i,_,a),l.p,i,_)}else if(x(e,e=>(0,c.o)(e).getMilliseconds()===e.getMilliseconds(),i,_)&&x(t,e=>(0,u.D)(e).getMilliseconds()===e.getMilliseconds(),i,_)){const a=(w(t,e,d.c,i,_)+1)*(n?1:-1);p=y(e,h.f,i,_,a),v=y(t,h.f,i,_,a)}else{const a=w(t,e,g.b,i,_)*(n?1:-1);p=y(e,f.A,i,_,a),v=y(t,f.A,i,_,a)}return{start:p,end:v}},S=(e,t)=>{const n=new _.BB(e,t);return new Date(n.getTime())},M=(e,t)=>new _.BB(e,t).toISOString().split("T")[0],k=(e,t)=>new _.BB(e,t).toISOString().split("T")[1].split(".")[0];i()}catch(m){i(m)}})},46223:function(e,t,n){n.a(e,async function(e,i){try{n.d(t,{b:function(){return w}});var a=n(35932),o=n(73983),r=n(92913),s=n(52640),l=n(69137),c=n(35660),u=n(36307),d=n(11650),h=n(15797),g=n(33977),f=n(69748),_=n(55144),p=n(21828),v=n(66708),m=n(91069),y=n(380),x=e([y,m]);[y,m]=x.then?(await x)():x;const w=(e,t)=>{const n=new Date,i=(0,y.P)(e.locale);switch(t){case"today":return[(0,m.ol)(n,a.o,e.locale,e.config,{weekStartsOn:i}),(0,m.ol)(n,o.D,e.locale,e.config,{weekStartsOn:i})];case"yesterday":return[(0,m.ol)((0,r.f)(n,-1),a.o,e.locale,e.config,{weekStartsOn:i}),(0,m.ol)((0,r.f)(n,-1),o.D,e.locale,e.config,{weekStartsOn:i})];case"this_week":return[(0,m.ol)(n,s.k,e.locale,e.config,{weekStartsOn:i}),(0,m.ol)(n,l.$,e.locale,e.config,{weekStartsOn:i})];case"this_month":return[(0,m.ol)(n,c.w,e.locale,e.config),(0,m.ol)(n,u.p,e.locale,e.config)];case"this_quarter":return[(0,m.ol)(n,d.a,e.locale,e.config),(0,m.ol)(n,h.j,e.locale,e.config)];case"this_year":return[(0,m.ol)(n,g.D,e.locale,e.config),(0,m.ol)(n,f.Q,e.locale,e.config)];case"now-7d":return[(0,m.ol)(n,_.e,e.locale,e.config,7),(0,m.ol)(n,_.e,e.locale,e.config,0)];case"now-30d":return[(0,m.ol)(n,_.e,e.locale,e.config,30),(0,m.ol)(n,_.e,e.locale,e.config,0)];case"now-12m":return[(0,m.ol)(n,p.a,e.locale,e.config,12),(0,m.ol)(n,p.a,e.locale,e.config,0)];case"now-1h":return[(0,m.ol)(n,v.O,e.locale,e.config,1),(0,m.ol)(n,v.O,e.locale,e.config,0)];case"now-12h":return[(0,m.ol)(n,v.O,e.locale,e.config,12),(0,m.ol)(n,v.O,e.locale,e.config,0)];case"now-24h":return[(0,m.ol)(n,v.O,e.locale,e.config,24),(0,m.ol)(n,v.O,e.locale,e.config,0)]}return[n,n]};i()}catch(w){i(w)}})},5127:function(e,t,n){n.a(e,async function(e,t){try{n(26910),n(18111),n(61701),n(62953);var i=n(40445),a=n(96196),o=n(77845),r=n(6415),s=n(20058),l=n(67258),c=n(12587),u=n(36240),d=e([s]);s=(d.then?(await d)():d)[0];let h,g,f,_,p,v,m,y=e=>e;const x=(e,t,n)=>180*(0,u.NN)((0,u.S8)(e,t,n),t,n)/100;class w extends a.WF{firstUpdated(e){super.firstUpdated(e),(0,c.m)(()=>{this._updated=!0,this._angle=x(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg()})}updated(e){super.updated(e),this._updated&&(e.has("value")||e.has("valueText")||e.has("label")||e.has("_segment_label"))&&(this._angle=x(this.value,this.min,this.max),this._segment_label=this._getSegmentLabel(),this._rescaleSvg())}render(){return(0,a.JW)(h||(h=y` <svg viewBox="-50 -50 100 50" class="gauge"> ${0} ${0} ${0}  </svg> <svg class="text"> <text class="value-text"> ${0}${0} </text> </svg>`),this.needle&&this.levels?"":(0,a.JW)(g||(g=y`<path class="dial" d="M -40 0 A 40 40 0 0 1 40 0"></path>`)),this.levels?this.levels.sort((e,t)=>e.level-t.level).map((e,t)=>{let n;if(0===t&&e.level!==this.min){const e=x(this.min,this.min,this.max);n=(0,a.JW)(f||(f=y`<path stroke="var(--info-color)" class="level" d="M
                          ${0}
                          ${0}
                         A 40 40 0 0 1 40 0
                        "></path>`),0-40*Math.cos(e*Math.PI/180),0-40*Math.sin(e*Math.PI/180))}const i=x(e.level,this.min,this.max);return(0,a.JW)(_||(_=y`${0}<path stroke="${0}" class="level" d="M
                        ${0}
                        ${0}
                       A 40 40 0 0 1 40 0
                      "></path>`),n,e.stroke,0-40*Math.cos(i*Math.PI/180),0-40*Math.sin(i*Math.PI/180))}):"",this.needle?(0,a.JW)(p||(p=y`<path class="needle" d="M -25 -2.5 L -47.5 0 L -25 2.5 z" style="${0}"> </path>`),(0,r.W)({transform:`rotate(${this._angle}deg)`})):(0,a.JW)(v||(v=y`<path class="value" d="M -40 0 A 40 40 0 1 0 40 0" style="${0}"></path>`),(0,r.W)({transform:`rotate(${this._angle}deg)`})),this._segment_label?this._segment_label:this.valueText||(0,s.ZV)(this.value,this.locale,this.formatOptions),this._segment_label?"":"%"===this.label?(0,l.d)(this.locale)+"%":` ${this.label}`)}_rescaleSvg(){const e=this.shadowRoot.querySelector(".text"),t=e.querySelector("text").getBBox();e.setAttribute("viewBox",`${t.x} ${t.y} ${t.width} ${t.height}`)}_getSegmentLabel(){if(this.levels){this.levels.sort((e,t)=>e.level-t.level);for(let e=this.levels.length-1;e>=0;e--)if(this.value>=this.levels[e].level)return this.levels[e].label}return""}constructor(...e){super(...e),this.min=0,this.max=100,this.value=0,this.needle=!1,this.label="",this._angle=0,this._updated=!1,this._segment_label=""}}w.styles=(0,a.AH)(m||(m=y`:host{position:relative}.dial{fill:none;stroke:var(--primary-background-color);stroke-width:15}.value{fill:none;stroke-width:15;stroke:var(--gauge-color);transition:all 1s ease 0s}.needle{fill:var(--primary-text-color);transition:all 1s ease 0s}.level{fill:none;stroke-width:15}.gauge{display:block}.text{position:absolute;max-height:40%;max-width:55%;left:50%;bottom:-6%;transform:translate(-50%,0%)}.value-text{font-size:50px;fill:var(--primary-text-color);text-anchor:middle;direction:ltr}`)),(0,i.Cg)([(0,o.MZ)({type:Number})],w.prototype,"min",void 0),(0,i.Cg)([(0,o.MZ)({type:Number})],w.prototype,"max",void 0),(0,i.Cg)([(0,o.MZ)({type:Number})],w.prototype,"value",void 0),(0,i.Cg)([(0,o.MZ)({attribute:!1})],w.prototype,"formatOptions",void 0),(0,i.Cg)([(0,o.MZ)({attribute:!1,type:String})],w.prototype,"valueText",void 0),(0,i.Cg)([(0,o.MZ)({attribute:!1})],w.prototype,"locale",void 0),(0,i.Cg)([(0,o.MZ)({type:Boolean})],w.prototype,"needle",void 0),(0,i.Cg)([(0,o.MZ)({type:Array})],w.prototype,"levels",void 0),(0,i.Cg)([(0,o.MZ)()],w.prototype,"label",void 0),(0,i.Cg)([(0,o.wk)()],w.prototype,"_angle",void 0),(0,i.Cg)([(0,o.wk)()],w.prototype,"_updated",void 0),(0,i.Cg)([(0,o.wk)()],w.prototype,"_segment_label",void 0),w=(0,i.Cg)([(0,o.EM)("ha-gauge")],w),t()}catch(h){t(h)}})},23528:function(e,t,n){n.a(e,async function(e,i){try{n.d(t,{$3:function(){return v},$O:function(){return k},$j:function(){return m},ED:function(){return s},JE:function(){return $},OQ:function(){return C},PU:function(){return O},Ph:function(){return _},Uf:function(){return M},W1:function(){return p},Wr:function(){return h},Z:function(){return u},gF:function(){return y},iY:function(){return x},jU:function(){return l},nN:function(){return S},p3:function(){return d},pJ:function(){return f},r_:function(){return c},sz:function(){return g}});n(74423),n(18111),n(13579),n(62953);var a=n(28978),o=n(380),r=e([o]);o=(r.then?(await r)():r)[0];var s=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({});const l=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],c=["L","gal","ft³","m³","CCF","MCF"],u=e=>e.sendMessagePromise({type:"recorder/info"}),d=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),h=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),g=(e,t,n,i,a="hour",o,r)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:null==n?void 0:n.toISOString(),statistic_ids:i,period:a,units:o,types:r}),f=(e,t,n,i)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:i,fixed_period:n.fixed_period?{start_time:n.fixed_period.start instanceof Date?n.fixed_period.start.toISOString():n.fixed_period.start,end_time:n.fixed_period.end instanceof Date?n.fixed_period.end.toISOString():n.fixed_period.end}:void 0,calendar:n.calendar?Object.assign(Object.assign({},"week"===n.calendar.period?{first_weekday:(0,o.D)(e.locale).substring(0,3)}:{}),n.calendar):void 0,rolling_window:n.rolling_window}),_=e=>e.callWS({type:"recorder/validate_statistics"}),p=(e,t,n,i)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:n,unit_class:i}),v=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),m=e=>{let t=null;if(!e)return null;for(const n of e)null!==n.change&&void 0!==n.change&&(null===t?t=n.change:t+=n.change);return t},y=(e,t)=>{let n=null;for(const i of t){if(!(i in e))continue;const t=m(e[i]);null!==t&&(null===n?n=t:n+=t)}return n},x=(e,t)=>e.some(e=>void 0!==e[t]&&null!==e[t]),w=["mean","min","max"],b=["sum","state","change"],S=(e,t)=>!(!w.includes(t)||0===e.mean_type)||!(!b.includes(t)||!e.has_sum),M=(e,t,n,i,a)=>{const o=new Date(n).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:o,adjustment:i,adjustment_unit_of_measurement:a})},k=(e,t,n)=>{const i=e.states[t];return i?(0,a.u)(i):(null==n?void 0:n.name)||t},$=(e,t,n)=>{let i;var a;t&&(i=null===(a=e.states[t])||void 0===a?void 0:a.attributes.unit_of_measurement);return void 0===i?null==n?void 0:n.statistics_unit_of_measurement:i},C=e=>e.includes(":"),O=e=>e.callWS({type:"recorder/update_statistics_issues"});i()}catch(l){i(l)}})},80449:function(e,t,n){n.a(e,async function(e,i){try{n.r(t);n(62953);var a=n(40445),o=n(96196),r=n(77845),s=n(20058),l=(n(76776),n(5127)),c=(n(67094),n(34127)),u=n(38114),d=n(54706),h=n(784),g=e([l,c,u,s]);[l,c,u,s]=g.then?(await g)():g;let f,_,p,v,m=e=>e;const y="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",x=[{level:-1,stroke:"var(--energy-grid-consumption-color)"},{level:0,stroke:"var(--energy-grid-return-color)"}];class w extends((0,d.E)(o.WF)){hassSubscribe(){var e;return[(0,u.tb)(this.hass,{key:null===(e=this._config)||void 0===e?void 0:e.collection_key}).subscribe(e=>{this._data=e})]}getCardSize(){return 4}setConfig(e){this._config=e}shouldUpdate(e){return(0,h.xP)(this,e)||e.size>1||!e.has("hass")}render(){var e,t;if(!this._config||!this.hass)return o.s6;if(!this._data)return(0,o.qy)(f||(f=m`${0}`),this.hass.localize("ui.panel.lovelace.cards.energy.loading"));const{summedData:n,compareSummedData:i}=(0,u.gv)(this._data);let a;if(!("from_grid"in n.total))return o.s6;const r=null!==(e=n.total.from_grid)&&void 0!==e?e:0,l=null!==(t=n.total.to_grid)&&void 0!==t?t:0;return null!==r&&null!==l&&(a=l>r?1-r/l:l<r?-1*(1-l/r):0),(0,o.qy)(_||(_=m` <ha-card> ${0} </ha-card> `),void 0!==a?(0,o.qy)(p||(p=m` <ha-gauge min="-1" max="1" .value="${0}" .valueText="${0}" .locale="${0}" .levels="${0}" label="kWh" needle></ha-gauge> <ha-svg-icon id="info" .path="${0}"></ha-svg-icon> <ha-tooltip for="info" placement="left"> ${0} <br><br> ${0} </ha-tooltip> <div class="name"> ${0} </div> `),a,(0,s.ZV)(Math.abs(l-r),this.hass.locale,{maximumFractionDigits:2}),this.hass.locale,x,y,this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.energy_dependency"),this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.color_explain"),l>=r?this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_returned_grid"):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.net_consumed_grid")):this.hass.localize("ui.panel.lovelace.cards.energy.grid_neutrality_gauge.grid_neutrality_not_calculated"))}constructor(...e){super(...e),this.hassSubscribeRequiredHostProps=["_config"]}}w.styles=(0,o.AH)(v||(v=m`ha-card{height:100%;overflow:hidden;padding:16px;display:flex;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}ha-gauge{width:100%;max-width:250px;direction:ltr}.name{text-align:center;line-height:initial;color:var(--primary-text-color);width:100%;font-size:var(--ha-font-size-m);margin-top:8px}ha-svg-icon{position:absolute;right:4px;inset-inline-end:4px;inset-inline-start:initial;top:4px;color:var(--secondary-text-color)}ha-tooltip::part(base__popup){margin-top:4px}`)),(0,a.Cg)([(0,r.MZ)({attribute:!1})],w.prototype,"hass",void 0),(0,a.Cg)([(0,r.wk)()],w.prototype,"_config",void 0),(0,a.Cg)([(0,r.wk)()],w.prototype,"_data",void 0),w=(0,a.Cg)([(0,r.EM)("hui-energy-grid-neutrality-gauge-card")],w),i()}catch(f){i(f)}})},36240:function(e,t,n){n.d(t,{NN:function(){return a},S8:function(){return i},gN:function(){return o}});const i=(e,t,n)=>isNaN(e)||isNaN(t)||isNaN(n)?0:e>n?n:e<t?t:e,a=(e,t,n)=>100*(e-t)/(n-t),o=e=>Math.round(10*e)/10},56434:function(e,t,n){n.d(t,{e:function(){return a}});var i=n(81977);function a(e,t,n){return(0,i.P)(e,12*t,n)}}}]);
//# sourceMappingURL=57516.cd173f866a216976.js.map