"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["24891"],{76774:function(e,t,i){i.d(t,{w:function(){return s}});const s=(e,t)=>{const i=e.area_id,s=i?t.areas[i]:void 0,a=null==s?void 0:s.floor_id;return{device:e,area:s||null,floor:(a?t.floors[a]:void 0)||null}}},18198:function(e,t,i){i.d(t,{Dc:function(){return c},Si:function(){return d}});var s=i(40445),a=i(96196),n=i(77845);i(88945),i(67094);let r,o,l=e=>e;const d=e=>{switch(e.level){case 0:return"M11,10H13V16H11V10M22,12H19V20H5V12H2L12,3L22,12M15,10A2,2 0 0,0 13,8H11A2,2 0 0,0 9,10V16A2,2 0 0,0 11,18H13A2,2 0 0,0 15,16V10Z";case 1:return"M12,3L2,12H5V20H19V12H22L12,3M10,8H14V18H12V10H10V8Z";case 2:return"M12,3L2,12H5V20H19V12H22L12,3M9,8H13A2,2 0 0,1 15,10V12A2,2 0 0,1 13,14H11V16H15V18H9V14A2,2 0 0,1 11,12H13V10H9V8Z";case 3:return"M12,3L22,12H19V20H5V12H2L12,3M15,11.5V10C15,8.89 14.1,8 13,8H9V10H13V12H11V14H13V16H9V18H13A2,2 0 0,0 15,16V14.5A1.5,1.5 0 0,0 13.5,13A1.5,1.5 0 0,0 15,11.5Z";case-1:return"M12,3L2,12H5V20H19V12H22L12,3M11,15H7V13H11V15M15,18H13V10H11V8H15V18Z"}return"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"},c=e=>{switch(e.level){case 0:return"mdi:home-floor-0";case 1:return"mdi:home-floor-1";case 2:return"mdi:home-floor-2";case 3:return"mdi:home-floor-3";case-1:return"mdi:home-floor-negative-1"}return"mdi:home"};class h extends a.WF{render(){if(!this.floor)return a.s6;if(this.floor.icon)return(0,a.qy)(r||(r=l`<ha-icon .icon="${0}"></ha-icon>`),this.floor.icon);const e=d(this.floor);return(0,a.qy)(o||(o=l`<ha-svg-icon .path="${0}"></ha-svg-icon>`),e)}}(0,s.Cg)([(0,n.MZ)({attribute:!1})],h.prototype,"floor",void 0),(0,s.Cg)([(0,n.MZ)()],h.prototype,"icon",void 0),h=(0,s.Cg)([(0,n.EM)("ha-floor-icon")],h)},79286:function(e,t,i){i.a(e,async function(e,t){try{i(74423),i(44114),i(26910),i(18111),i(22489),i(7588),i(61701),i(53921),i(3362),i(27495),i(62953);var s=i(40445),a=i(61366),n=i(16527),r=i(94454),o=i(78648),l=i(96196),d=i(77845),c=i(6415),h=i(22786),p=i(44537),u=i(1087),v=i(78649),m=i(52220),g=i(15638),y=i(28223),_=i(77423),b=i(38911),f=i(31422),$=i(53756),C=i(95350),x=i(5904),k=i(88555),H=i(54706),V=i(24367),M=i(19711),L=i(59653),I=i(44144),D=i(38508),w=(i(67094),i(73150),i(22099)),F=i(69404),q=e([a,D,w,F]);[a,D,w,F]=q.then?(await q)():q;let Z,z,E,A,O,j,P,R,N,S,T,B,W,Y,G,K,U,J,X,Q,ee,te,ie,se,ae,ne,re,oe,le=e=>e;const de="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",ce="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",he="________",pe="___create-new-entity___";class ue extends((0,H.E)(l.WF)){get _showEntityId(){var e;return null===(e=this.hass.userData)||void 0===e?void 0:e.showEntityIdPicker}willUpdate(e){super.willUpdate(e),this.hasUpdated||this._loadConfigEntries()}render(){return this.addOnTop?(0,l.qy)(Z||(Z=le` ${0} ${0} `),this._renderPicker(),this._renderItems()):(0,l.qy)(z||(z=le` ${0} ${0} `),this._renderItems(),this._renderPicker())}_renderValueChips(){var e,t,i,s,a;const n=null!==(e=this.value)&&void 0!==e&&e.entity_id?(0,p.e)(this.value.entity_id):[],r=null!==(t=this.value)&&void 0!==t&&t.device_id?(0,p.e)(this.value.device_id):[],o=null!==(i=this.value)&&void 0!==i&&i.area_id?(0,p.e)(this.value.area_id):[],d=null!==(s=this.value)&&void 0!==s&&s.floor_id?(0,p.e)(this.value.floor_id):[],c=null!==(a=this.value)&&void 0!==a&&a.label_id?(0,p.e)(this.value.label_id):[];return n.length||r.length||o.length||d.length||c.length?(0,l.qy)(E||(E=le` <div class="mdc-chip-set items"> ${0} ${0} ${0} ${0} ${0} </div> `),d.length?d.map(e=>(0,l.qy)(A||(A=le` <ha-target-picker-value-chip .hass="${0}" type="floor" .itemId="${0}" @remove-target-item="${0}" @expand-target-item="${0}"></ha-target-picker-value-chip> `),this.hass,e,this._handleRemove,this._handleExpand)):l.s6,o.length?o.map(e=>(0,l.qy)(O||(O=le` <ha-target-picker-value-chip .hass="${0}" type="area" .itemId="${0}" @remove-target-item="${0}" @expand-target-item="${0}"></ha-target-picker-value-chip> `),this.hass,e,this._handleRemove,this._handleExpand)):l.s6,r.length?r.map(e=>(0,l.qy)(j||(j=le` <ha-target-picker-value-chip .hass="${0}" type="device" .itemId="${0}" @remove-target-item="${0}" @expand-target-item="${0}"></ha-target-picker-value-chip> `),this.hass,e,this._handleRemove,this._handleExpand)):l.s6,n.length?n.map(e=>(0,l.qy)(P||(P=le` <ha-target-picker-value-chip .hass="${0}" type="entity" .itemId="${0}" @remove-target-item="${0}" @expand-target-item="${0}"></ha-target-picker-value-chip> `),this.hass,e,this._handleRemove,this._handleExpand)):l.s6,c.length?c.map(e=>(0,l.qy)(R||(R=le` <ha-target-picker-value-chip .hass="${0}" type="label" .itemId="${0}" @remove-target-item="${0}" @expand-target-item="${0}"></ha-target-picker-value-chip> `),this.hass,e,this._handleRemove,this._handleExpand)):l.s6):l.s6}_renderValueGroups(){var e,t,i,s,a,n;const r=null!==(e=this.value)&&void 0!==e&&e.entity_id?(0,p.e)(this.value.entity_id):[],o=null!==(t=this.value)&&void 0!==t&&t.device_id?(0,p.e)(this.value.device_id):[],d=null!==(i=this.value)&&void 0!==i&&i.area_id?(0,p.e)(this.value.area_id):[],c=null!==(s=this.value)&&void 0!==s&&s.floor_id?(0,p.e)(this.value.floor_id):[],h=null!==(a=this.value)&&void 0!==a&&a.label_id?(0,p.e)(null===(n=this.value)||void 0===n?void 0:n.label_id):[];return r.length||o.length||d.length||c.length||h.length?(0,l.qy)(N||(N=le` <div class="item-groups"> ${0} ${0} ${0} ${0} </div> `),r.length?(0,l.qy)(S||(S=le` <ha-target-picker-item-group @remove-target-item="${0}" type="entity" .hass="${0}" .items="${0}" .deviceFilter="${0}" .entityFilter="${0}" .includeDomains="${0}" .includeDeviceClasses="${0}"> </ha-target-picker-item-group> `),this._handleRemove,this.hass,{entity:r},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):l.s6,o.length?(0,l.qy)(T||(T=le` <ha-target-picker-item-group @remove-target-item="${0}" type="device" .hass="${0}" .items="${0}" .deviceFilter="${0}" .entityFilter="${0}" .includeDomains="${0}" .includeDeviceClasses="${0}"> </ha-target-picker-item-group> `),this._handleRemove,this.hass,{device:o},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):l.s6,c.length||d.length?(0,l.qy)(B||(B=le` <ha-target-picker-item-group @remove-target-item="${0}" type="area" .hass="${0}" .items="${0}" .deviceFilter="${0}" .entityFilter="${0}" .includeDomains="${0}" .includeDeviceClasses="${0}"> </ha-target-picker-item-group> `),this._handleRemove,this.hass,{floor:c,area:d},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):l.s6,h.length?(0,l.qy)(W||(W=le` <ha-target-picker-item-group @remove-target-item="${0}" type="label" .hass="${0}" .items="${0}" .deviceFilter="${0}" .entityFilter="${0}" .includeDomains="${0}" .includeDeviceClasses="${0}"> </ha-target-picker-item-group> `),this._handleRemove,this.hass,{label:h},this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses):l.s6):l.s6}_renderItems(){return(0,l.qy)(Y||(Y=le` ${0} `),this.compact?this._renderValueChips():this._renderValueGroups())}_renderPicker(){const e=[{id:"entity",label:this.hass.localize("ui.components.target-picker.type.entities")},{id:"device",label:this.hass.localize("ui.components.target-picker.type.devices")},{id:"area",label:this.hass.localize("ui.components.target-picker.type.areas")},"separator",{id:"label",label:this.hass.localize("ui.components.target-picker.type.labels")}];return(0,l.qy)(G||(G=le` <div class="add-target-wrapper"> <ha-generic-picker .hass="${0}" .disabled="${0}" .autofocus="${0}" .helper="${0}" .sections="${0}" .notFoundLabel="${0}" .emptyLabel="${0}" .sectionTitleFunction="${0}" .selectedSection="${0}" .rowRenderer="${0}" .getItems="${0}" @value-changed="${0}" .addButtonLabel="${0}" .getAdditionalItems="${0}"> </ha-generic-picker> </div> `),this.hass,this.disabled,this.autofocus,this.helper,e,this._noTargetFoundLabel,this.hass.localize("ui.components.target-picker.no_targets"),this._sectionTitleFunction,this._selectedSection,this._renderRow,this._getItems,this._targetPicked,this.hass.localize("ui.components.target-picker.add_target"),this._getAdditionalItems)}_targetPicked(e){e.stopPropagation();const t=e.detail.value;if(t.startsWith(pe))return void this._createNewDomainElement(t.substring(pe.length));const[i,s]=e.detail.value.split(he);this._addTarget(s,i)}_addTarget(e,t){var i,s;const a=`${t}_id`;("entity_id"!==a||(0,v.n)(e))&&(this.value&&this.value[a]&&(0,p.e)(this.value[a]).includes(e)||((0,u.r)(this,"value-changed",{value:this.value?Object.assign(Object.assign({},this.value),{},{[a]:this.value[a]?[...(0,p.e)(this.value[a]),e]:e}):{[a]:e}}),null===(i=this.shadowRoot)||void 0===i||null===(i=i.querySelector(`ha-target-picker-item-group[type='${null===(s=this._newTarget)||void 0===s?void 0:s.type}']`))||void 0===i||i.removeAttribute("collapsed")))}_handleRemove(e){const{type:t,id:i}=e.detail;(0,u.r)(this,"value-changed",{value:this._removeItem(this.value,t,i)})}_handleExpand(e){const t=e.detail.type,i=e.detail.id,s=[],a=[],n=[];if("floor"===t)Object.values(this.hass.areas).forEach(e=>{var t;e.floor_id!==i||null!==(t=this.value.area_id)&&void 0!==t&&t.includes(e.area_id)||!(0,k.Kx)(e,this.hass.devices,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||s.push(e.area_id)});else if("area"===t)Object.values(this.hass.devices).forEach(e=>{var t;e.area_id!==i||null!==(t=this.value.device_id)&&void 0!==t&&t.includes(e.id)||!(0,k.Ly)(e,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||a.push(e.id)}),Object.values(this.hass.entities).forEach(e=>{var t;e.area_id!==i||null!==(t=this.value.entity_id)&&void 0!==t&&t.includes(e.entity_id)||!(0,k.YK)(e,!1,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||n.push(e.entity_id)});else if("device"===t)Object.values(this.hass.entities).forEach(e=>{var t;e.device_id!==i||null!==(t=this.value.entity_id)&&void 0!==t&&t.includes(e.entity_id)||!(0,k.YK)(e,!1,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||n.push(e.entity_id)});else{if("label"!==t)return;Object.values(this.hass.areas).forEach(e=>{var t;!e.labels.includes(i)||null!==(t=this.value.area_id)&&void 0!==t&&t.includes(e.area_id)||!(0,k.Kx)(e,this.hass.devices,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||s.push(e.area_id)}),Object.values(this.hass.devices).forEach(e=>{var t;!e.labels.includes(i)||null!==(t=this.value.device_id)&&void 0!==t&&t.includes(e.id)||!(0,k.Ly)(e,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||a.push(e.id)}),Object.values(this.hass.entities).forEach(e=>{var t;!e.labels.includes(i)||null!==(t=this.value.entity_id)&&void 0!==t&&t.includes(e.entity_id)||!(0,k.YK)(e,!0,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter)||n.push(e.entity_id)})}let r=this.value;n.length&&(r=this._addItems(r,"entity_id",n)),a.length&&(r=this._addItems(r,"device_id",a)),s.length&&(r=this._addItems(r,"area_id",s)),r=this._removeItem(r,t,i),(0,u.r)(this,"value-changed",{value:r})}_addItems(e,t,i){return Object.assign(Object.assign({},e),{},{[t]:e[t]?(0,p.e)(e[t]).concat(i):i})}_removeItem(e,t,i){const s=`${t}_id`,a=(0,p.e)(e[s]).filter(e=>String(e)!==i);if(a.length)return Object.assign(Object.assign({},e),{},{[s]:a});const n=Object.assign({},e);return delete n[s],Object.keys(n).length?n:void 0}_filterGroup(e,t,i,s,a=!0){const n=this._fuseIndexes[e](t);return a?(0,L.x)(t,i,s,e=>e.id,n):(0,L.C)(t,i,s,n,{ignoreLocation:!0})}async _loadConfigEntries(){const e=await(0,_.VN)(this.hass);this._configEntryLookup=Object.fromEntries(e.map(e=>[e.entry_id,e]))}static get styles(){return(0,l.AH)(K||(K=le`.add-target-wrapper{display:flex;justify-content:flex-start;margin-top:var(--ha-space-3)}ha-generic-picker{width:100%}${0} .items{z-index:2}.mdc-chip-set{padding:var(--ha-space-1) 0;gap:var(--ha-space-2)}.item-groups{overflow:hidden;border:2px solid var(--divider-color);border-radius:var(--ha-border-radius-lg)}`),(0,l.iz)(r))}constructor(...e){super(...e),this.compact=!1,this.disabled=!1,this.addOnTop=!1,this._configEntryLookup={},this._getDevicesMemoized=(0,h.A)(f.o),this._getLabelsMemoized=(0,h.A)(x.I),this._getEntitiesMemoized=(0,h.A)($.w),this._getAreasAndFloorsMemoized=(0,h.A)(y.bi),this._fuseIndexes={area:(0,h.A)(e=>this._createFuseIndex(e,y.Z2)),entity:(0,h.A)(e=>this._createFuseIndex(e,$.t)),device:(0,h.A)(e=>this._createFuseIndex(e,f._)),label:(0,h.A)(e=>this._createFuseIndex(e,x.u))},this._createFuseIndex=(e,t)=>o.A.createIndex(t,e),this._createNewDomainElement=e=>{(0,M.$)(this,{domain:e,dialogClosedCallback:e=>{e.entityId&&requestAnimationFrame(()=>{this._addTarget(e.entityId,"entity")})}})},this._sectionTitleFunction=({firstIndex:e,lastIndex:t,firstItem:i,secondItem:s,itemsCount:a})=>{if(void 0===i||void 0===s||"string"==typeof i||"string"==typeof s&&"padding"!==s||0===e&&t===a-1)return;const n=(0,k.OJ)(i),r="area"===n||"floor"===n?"areas":"entity"===n?"entities":n&&"empty"!==n?`${n}s`:void 0;return r?this.hass.localize(`ui.components.target-picker.type.${r}`):void 0},this._getItems=(e,t)=>(this._selectedSection=t,this._getItemsMemoized(this.hass.localize,this.entityFilter,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.value,e,this._configEntryLookup,this._selectedSection)),this._getItemsMemoized=(0,h.A)((e,t,i,s,a,n,r,o,l)=>{const d=[];if(!l||"entity"===l){let i=this._getEntitiesMemoized(this.hass,s,void 0,t,a,void 0,void 0,null!=n&&n.entity_id?(0,p.e)(n.entity_id):void 0,void 0,`entity${he}`).sort(this._sortBySortingLabel);r&&(i=this._filterGroup("entity",i,r,$.t)),!l&&i.length&&d.push(e("ui.components.target-picker.type.entities")),d.push(...i)}if(!l||"device"===l){let c=this._getDevicesMemoized(this.hass,o,s,void 0,a,i,t,null!=n&&n.device_id?(0,p.e)(n.device_id):void 0,void 0,`device${he}`).sort(this._sortBySortingLabel);r&&(c=this._filterGroup("device",c,r,f._)),!l&&c.length&&d.push(e("ui.components.target-picker.type.devices")),d.push(...c)}if(!l||"area"===l){let o=this._getAreasAndFloorsMemoized(this.hass.states,this.hass.floors,this.hass.areas,this.hass.devices,this.hass.entities,(0,h.A)(e=>[e.type,e.id].join(he)),s,void 0,a,i,t,null!=n&&n.area_id?(0,p.e)(n.area_id):void 0,null!=n&&n.floor_id?(0,p.e)(n.floor_id):void 0);r&&(o=this._filterGroup("area",o,r,y.Z2,!1)),!l&&o.length&&d.push(e("ui.components.target-picker.type.areas")),d.push(...o.map((e,t)=>{const i=o[t+1];return!i||"area"===e.type&&"floor"===i.type?Object.assign(Object.assign({},e),{},{last:!0}):e}))}if(!l||"label"===l){let o=this._getLabelsMemoized(this.hass.states,this.hass.areas,this.hass.devices,this.hass.entities,this._labelRegistry,s,void 0,a,i,t,null!=n&&n.label_id?(0,p.e)(n.label_id):void 0,`label${he}`).sort(this._sortBySortingLabel);r&&(o=this._filterGroup("label",o,r,x.u)),!l&&o.length&&d.push(e("ui.components.target-picker.type.labels")),d.push(...o)}return d}),this._getAdditionalItems=()=>this._getCreateItems(this.createDomains),this._getCreateItems=(0,h.A)(e=>null!=e&&e.length?e.map(e=>{const t=this.hass.localize("ui.components.entity.entity-picker.create_helper",{domain:(0,V.z)(e)?this.hass.localize(`ui.panel.config.helpers.types.${e}`):(0,C.p$)(this.hass.localize,e)});return{id:pe+e,primary:t,secondary:this.hass.localize("ui.components.entity.entity-picker.new_entity"),icon_path:de}}):[]),this._renderRow=(e,t)=>{var i;if(!e)return l.s6;const s=(0,k.OJ)(e);let a=!1,n=!1,r=!1;var o;"area"!==s&&"floor"!==s||(n=(0,g.qC)(this.hass),a="area"===s&&!(null===(o=e.area)||void 0===o||!o.floor_id));return"entity"===s&&(r=!!this._showEntityId),(0,l.qy)(U||(U=le` <ha-combo-box-item id="${0}" tabindex="-1" .type="${0}" class="${0}" style="${0}"> ${0} ${0} <span slot="headline">${0}</span> ${0} ${0} ${0} </ha-combo-box-item> `),`list-item-${t}`,"empty"===s?"text":"button","empty"===s?"empty":"","area"===e.type&&a?"--md-list-item-leading-space: var(--ha-space-12);":"","area"===e.type&&a?(0,l.qy)(J||(J=le` <ha-tree-indicator style="${0}" .end="${0}" slot="start"></ha-tree-indicator> `),(0,c.W)({width:"var(--ha-space-12)",position:"absolute",top:"0",left:n?void 0:"var(--ha-space-1)",right:n?"var(--ha-space-1)":void 0,transform:n?"scaleX(-1)":""}),e.last):l.s6,e.icon?(0,l.qy)(X||(X=le`<ha-icon slot="start" .icon="${0}"></ha-icon>`),e.icon):e.icon_path?(0,l.qy)(Q||(Q=le`<ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>`),e.icon_path):"entity"===s&&e.stateObj?(0,l.qy)(ee||(ee=le` <state-badge slot="start" .stateObj="${0}" .hass="${0}"></state-badge> `),e.stateObj,this.hass):"device"===s&&e.domain?(0,l.qy)(te||(te=le` <img slot="start" alt="" crossorigin="anonymous" referrerpolicy="no-referrer" src="${0}"> `),(0,I.MR)({domain:e.domain,type:"icon",darkOptimized:this.hass.themes.darkMode})):"floor"===s?(0,l.qy)(ie||(ie=le`<ha-floor-icon slot="start" .floor="${0}"></ha-floor-icon>`),e.floor):"area"===s?(0,l.qy)(se||(se=le`<ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>`),e.icon_path||ce):l.s6,e.primary,e.secondary?(0,l.qy)(ae||(ae=le`<span slot="supporting-text">${0}</span>`),e.secondary):l.s6,e.stateObj&&r?(0,l.qy)(ne||(ne=le` <span slot="supporting-text" class="code"> ${0} </span> `),null===(i=e.stateObj)||void 0===i?void 0:i.entity_id):l.s6,!e.domain_name||"entity"===s&&r?l.s6:(0,l.qy)(re||(re=le` <div slot="trailing-supporting-text" class="domain"> ${0} </div> `),e.domain_name))},this._noTargetFoundLabel=e=>this.hass.localize("ui.components.target-picker.no_target_found",{term:(0,l.qy)(oe||(oe=le`<b>‘${0}’</b>`),e)}),this._sortBySortingLabel=(e,t)=>{var i,s;return(0,m.SH)(e.sorting_label,t.sorting_label,null!==(i=null===(s=this.hass)||void 0===s?void 0:s.locale.language)&&void 0!==i?i:navigator.language)}}}(0,s.Cg)([(0,d.MZ)({attribute:!1})],ue.prototype,"hass",void 0),(0,s.Cg)([(0,d.MZ)({attribute:!1})],ue.prototype,"value",void 0),(0,s.Cg)([(0,d.MZ)()],ue.prototype,"helper",void 0),(0,s.Cg)([(0,d.MZ)({type:Boolean,reflect:!0})],ue.prototype,"compact",void 0),(0,s.Cg)([(0,d.MZ)({attribute:!1,type:Array})],ue.prototype,"createDomains",void 0),(0,s.Cg)([(0,d.MZ)({type:Array,attribute:"include-domains"})],ue.prototype,"includeDomains",void 0),(0,s.Cg)([(0,d.MZ)({type:Array,attribute:"include-device-classes"})],ue.prototype,"includeDeviceClasses",void 0),(0,s.Cg)([(0,d.MZ)({attribute:!1})],ue.prototype,"deviceFilter",void 0),(0,s.Cg)([(0,d.MZ)({attribute:!1})],ue.prototype,"entityFilter",void 0),(0,s.Cg)([(0,d.MZ)({type:Boolean,reflect:!0})],ue.prototype,"disabled",void 0),(0,s.Cg)([(0,d.MZ)({attribute:"add-on-top",type:Boolean})],ue.prototype,"addOnTop",void 0),(0,s.Cg)([(0,d.wk)()],ue.prototype,"_selectedSection",void 0),(0,s.Cg)([(0,d.wk)()],ue.prototype,"_configEntryLookup",void 0),(0,s.Cg)([(0,d.wk)(),(0,n.Fg)({context:b.HD,subscribe:!0})],ue.prototype,"_labelRegistry",void 0),ue=(0,s.Cg)([(0,d.EM)("ha-target-picker")],ue),t()}catch(Z){t(Z)}})},89081:function(e,t,i){i.d(t,{D:function(){return n}});i(3362),i(62953);var s=i(1087);const a=()=>i.e("97704").then(i.bind(i,25563)),n=(e,t)=>(0,s.r)(e,"show-dialog",{dialogTag:"ha-dialog-target-details",dialogImport:a,dialogParams:t})},22099:function(e,t,i){i.a(e,async function(e,t){try{i(18111),i(7588),i(61701),i(62953);var s=i(40445),a=i(96196),n=i(77845),r=(i(11382),i(17308),i(92288)),o=e([r]);r=(o.then?(await o)():o)[0];let l,d,c,h=e=>e;class p extends a.WF{render(){let e=0;return Object.values(this.items).forEach(t=>{t&&(e+=t.length)}),(0,a.qy)(l||(l=h`<ha-expansion-panel .expanded="${0}" left-chevron @expanded-changed="${0}"> <div slot="header" class="heading"> ${0} </div> ${0} </ha-expansion-panel>`),!this.collapsed,this._expandedChanged,this.hass.localize(`ui.components.target-picker.selected.${this.type}`,{count:e}),Object.entries(this.items).map(([e,t])=>t?t.map(t=>(0,a.qy)(d||(d=h`<ha-target-picker-item-row .hass="${0}" .type="${0}" .itemId="${0}" .deviceFilter="${0}" .entityFilter="${0}" .includeDomains="${0}" .includeDeviceClasses="${0}"></ha-target-picker-item-row>`),this.hass,e,t,this.deviceFilter,this.entityFilter,this.includeDomains,this.includeDeviceClasses)):a.s6))}_expandedChanged(e){this.collapsed=!e.detail.expanded}constructor(...e){super(...e),this.collapsed=!1}}p.styles=(0,a.AH)(c||(c=h`:host{display:block;--expansion-panel-content-padding:0}ha-expansion-panel::part(summary){background-color:var(--ha-color-fill-neutral-quiet-resting);padding:var(--ha-space-1) var(--ha-space-2);font-weight:var(--ha-font-weight-bold);color:var(--secondary-text-color);display:flex;justify-content:space-between;min-height:unset}ha-md-list{padding:0}`)),(0,s.Cg)([(0,n.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,s.Cg)([(0,n.MZ)()],p.prototype,"type",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1})],p.prototype,"items",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],p.prototype,"collapsed",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1})],p.prototype,"deviceFilter",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1})],p.prototype,"entityFilter",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-domains"})],p.prototype,"includeDomains",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-device-classes"})],p.prototype,"includeDeviceClasses",void 0),p=(0,s.Cg)([(0,n.EM)("ha-target-picker-item-group")],p),t()}catch(l){t(l)}})},92288:function(e,t,i){i.a(e,async function(e,t){try{i(74423),i(44114),i(18111),i(22489),i(20116),i(61701),i(13579),i(3362),i(62953);var s=i(40445),a=i(16527),n=i(96196),r=i(77845),o=i(22786),l=i(1087),d=i(65522),c=i(79),h=i(71727),p=i(81816),u=i(28455),v=i(15638),m=i(77423),g=i(38911),y=i(95350),_=i(88555),b=i(14503),f=i(44144),$=i(18198),C=(i(26300),i(17308),i(2846),i(93367)),x=(i(67094),i(89081)),k=e([C]);C=(k.then?(await k)():k)[0];let H,V,M,L,I,D,w,F,q,Z,z,E,A,O,j,P,R,N=e=>e;const S="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",T="M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",B="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",W="M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",Y="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z";class G extends n.WF{willUpdate(e){!this.subEntry&&e.has("itemId")&&this._updateItemData()}render(){const{name:e,context:t,iconPath:i,fallbackIconPath:s,stateObject:a,notFound:r}=this._itemData(this.type,this.itemId),o="entity"!==this.type&&!r,l=this.parentEntries||this._entries;return!this.subEntry||"entity"===this.type||l&&0!==l.referenced_entities.length?(0,n.qy)(H||(H=N` <ha-md-list-item type="text" class="${0}"> <div class="icon" slot="start"> ${0} ${0} </div> <div slot="headline">${0}</div> ${0} ${0} ${0} ${0} </ha-md-list-item> ${0} `),r?"error":"",this.subEntry?(0,n.qy)(V||(V=N` <div class="horizontal-line-wrapper"> <div class="horizontal-line"></div> </div> `)):n.s6,i?(0,n.qy)(M||(M=N`<ha-icon .icon="${0}"></ha-icon>`),i):this._iconImg?(0,n.qy)(L||(L=N`<img alt="${0}" crossorigin="anonymous" referrerpolicy="no-referrer" src="${0}">`),this._domainName||"",this._iconImg):s?(0,n.qy)(I||(I=N`<ha-svg-icon .path="${0}"></ha-svg-icon>`),s):"entity"===this.type?(0,n.qy)(D||(D=N` <ha-state-icon .hass="${0}" .stateObj="${0}"> </ha-state-icon> `),this.hass,a||{entity_id:this.itemId,attributes:{}}):n.s6,e,r||t&&!this.hideContext?(0,n.qy)(w||(w=N`<span slot="supporting-text">${0}</span>`),r?this.hass.localize(`ui.components.target-picker.${this.type}_not_found`):t):n.s6,this._domainName&&this.subEntry?(0,n.qy)(F||(F=N`<span slot="supporting-text" class="domain">${0}</span>`),this._domainName):n.s6,!this.subEntry&&l&&o?(0,n.qy)(q||(q=N` <div slot="end" class="summary"> ${0} </div> `),o&&!this.expand&&null!=l&&l.referenced_entities.length?(0,n.qy)(Z||(Z=N`<button class="main link" @click="${0}"> ${0} </button>`),this._openDetails,this.hass.localize("ui.components.target-picker.entities_count",{count:null==l?void 0:l.referenced_entities.length})):o?(0,n.qy)(z||(z=N`<span class="main"> ${0} </span>`),this.hass.localize("ui.components.target-picker.entities_count",{count:null==l?void 0:l.referenced_entities.length})):n.s6):n.s6,this.expand||this.subEntry?n.s6:(0,n.qy)(E||(E=N` <ha-icon-button .path="${0}" slot="end" @click="${0}"></ha-icon-button> `),S,this._removeItem),this.expand&&l&&l.referenced_entities?this._renderEntries():n.s6):n.s6}_renderEntries(){const e=this.parentEntries||this._entries;let t="floor"===this.type?"area":"area"===this.type?"device":"entity";"label"===this.type&&(null!=e&&e.referenced_areas.length?t="area":null!=e&&e.referenced_devices.length&&(t="device"));const i=("area"===t?null==e?void 0:e.referenced_areas:"device"===t&&"label"!==this.type?null==e?void 0:e.referenced_devices:"label"!==this.type?null==e?void 0:e.referenced_entities:[])||[],s=[],a="entity"===t?void 0:i.map(i=>{const a={referenced_areas:[],referenced_devices:[],referenced_entities:[]};return"area"===t?(a.referenced_devices=(null==e?void 0:e.referenced_devices.filter(t=>{var s;return(null===(s=this.hass.devices)||void 0===s||null===(s=s[t])||void 0===s?void 0:s.area_id)===i&&(null==e?void 0:e.referenced_entities.some(e=>{var i;return(null===(i=this.hass.entities)||void 0===i||null===(i=i[e])||void 0===i?void 0:i.device_id)===t}))}))||[],s.push(...a.referenced_devices),a.referenced_entities=(null==e?void 0:e.referenced_entities.filter(e=>{const t=this.hass.entities[e];return t.area_id===i||!t.device_id||a.referenced_devices.includes(t.device_id)}))||[],a):(a.referenced_entities=(null==e?void 0:e.referenced_entities.filter(e=>{var t;return(null===(t=this.hass.entities)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.device_id)===i}))||[],a)}),r="label"===this.type&&e?e.referenced_entities.filter(t=>{const i=this.hass.entities[t];return i.labels.includes(this.itemId)&&!e.referenced_devices.includes(i.device_id||"")}):"device"===t&&e?e.referenced_entities.filter(e=>this.hass.entities[e].area_id===this.itemId):[],o="label"===this.type&&e?e.referenced_devices.filter(e=>!s.includes(e)&&this.hass.devices[e].labels.includes(this.itemId)):[],l=0===o.length?void 0:o.map(t=>({referenced_areas:[],referenced_devices:[],referenced_entities:(null==e?void 0:e.referenced_entities.filter(e=>{var i;return(null===(i=this.hass.entities)||void 0===i||null===(i=i[e])||void 0===i?void 0:i.device_id)===t}))||[]}));return(0,n.qy)(A||(A=N` <div class="entries-tree"> <div class="line-wrapper"> <div class="line"></div> </div> <ha-md-list class="entries"> ${0} ${0} ${0} </ha-md-list> </div> `),i.map((e,i)=>(0,n.qy)(O||(O=N` <ha-target-picker-item-row sub-entry .hass="${0}" .type="${0}" .itemId="${0}" .parentEntries="${0}" .hideContext="${0}" expand></ha-target-picker-item-row> `),this.hass,t,e,null==a?void 0:a[i],this.hideContext||"label"!==this.type)),o.map((e,t)=>(0,n.qy)(j||(j=N` <ha-target-picker-item-row sub-entry .hass="${0}" type="device" .itemId="${0}" .parentEntries="${0}" .hideContext="${0}" expand></ha-target-picker-item-row> `),this.hass,e,null==l?void 0:l[t],this.hideContext||"label"!==this.type)),r.map(e=>(0,n.qy)(P||(P=N` <ha-target-picker-item-row sub-entry .hass="${0}" type="entity" .itemId="${0}" .hideContext="${0}"></ha-target-picker-item-row> `),this.hass,e,this.hideContext||"label"!==this.type)))}async _updateItemData(){if("entity"!==this.type)try{const e=await(0,_.F7)(this.hass,{[`${this.type}_id`]:[this.itemId]}),t=[];"floor"!==this.type&&"label"!==this.type||(e.referenced_areas=e.referenced_areas.filter(e=>{const i=this.hass.areas[e];return!("floor"!==this.type&&!i.labels.includes(this.itemId)||!(0,_.Kx)(i,this.hass.devices,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter))||(t.push(e),!1)}));const i=[];"floor"!==this.type&&"area"!==this.type&&"label"!==this.type||(e.referenced_devices=e.referenced_devices.filter(e=>{const s=this.hass.devices[e];return!(t.includes(s.area_id||"")||!(0,_.Ly)(s,this.hass.entities,this.deviceFilter,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter))||(i.push(e),!1)})),e.referenced_entities=e.referenced_entities.filter(t=>{const s=this.hass.entities[t];return!i.includes(s.device_id||"")&&(!!("area"===this.type&&s.area_id===this.itemId||"floor"===this.type&&s.area_id&&e.referenced_areas.includes(s.area_id)||"label"===this.type&&s.labels.includes(this.itemId)||e.referenced_devices.includes(s.device_id||""))&&(0,_.YK)(s,"label"===this.type,this.includeDomains,this.includeDeviceClasses,this.hass.states,this.entityFilter))}),this._entries=e}catch(e){console.error("Failed to extract target",e)}else this._entries=void 0}_setDomainName(e){this._domainName=(0,y.p$)(this.hass.localize,e)}_removeItem(e){e.stopPropagation(),(0,l.r)(this,"remove-target-item",{type:this.type,id:this.itemId})}async _getDeviceDomain(e){try{var t;const i=(await(0,m.Vx)(this.hass,e)).config_entry.domain;this._iconImg=(0,f.MR)({domain:i,type:"icon",darkOptimized:null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode}),this._setDomainName(i)}catch(i){}}_openDetails(){(0,x.D)(this,{title:this._itemData(this.type,this.itemId).name,type:this.type,itemId:this.itemId,deviceFilter:this.deviceFilter,entityFilter:this.entityFilter,includeDomains:this.includeDomains,includeDeviceClasses:this.includeDeviceClasses})}constructor(...e){super(...e),this.expand=!1,this.subEntry=!1,this.hideContext=!1,this._itemData=(0,o.A)((e,t)=>{if("floor"===e){var i;const e=null===(i=this.hass.floors)||void 0===i?void 0:i[t];return{name:(null==e?void 0:e.name)||t,iconPath:null==e?void 0:e.icon,fallbackIconPath:e?(0,$.Si)(e):B,notFound:!e}}if("area"===e){var s,a;const e=null===(s=this.hass.areas)||void 0===s?void 0:s[t];return{name:(null==e?void 0:e.name)||t,context:(null==e?void 0:e.floor_id)&&(null===(a=this.hass.floors)||void 0===a||null===(a=a[e.floor_id])||void 0===a?void 0:a.name),iconPath:null==e?void 0:e.icon,fallbackIconPath:Y,notFound:!e}}if("device"===e){var n,r;const e=null===(n=this.hass.devices)||void 0===n?void 0:n[t];return null!=e&&e.primary_config_entry&&this._getDeviceDomain(e.primary_config_entry),{name:e?(0,c.T)(e,this.hass):t,context:(null==e?void 0:e.area_id)&&(null===(r=this.hass.areas)||void 0===r||null===(r=r[e.area_id])||void 0===r?void 0:r.name),fallbackIconPath:T,notFound:!e}}if("entity"===e){this._setDomainName((0,h.m)(t));const e=this.hass.states[t],i=e?(0,p.aH)(e,this.hass.entities,this.hass.devices):t,{area:s,device:a}=e?(0,u.l)(e,this.hass.entities,this.hass.devices,this.hass.areas,this.hass.floors):{area:void 0,device:void 0},n=a?(0,c.xn)(a):void 0,r=[s?(0,d.A)(s):void 0,i?n:void 0].filter(Boolean).join((0,v.qC)(this.hass)?" ◂ ":" ▸ ");return{name:i||n||t,context:r,stateObject:e,notFound:!e&&"all"!==t&&"none"!==t}}const o=this._labelRegistry.find(e=>e.label_id===t);return{name:(null==o?void 0:o.name)||t,iconPath:null==o?void 0:o.icon,fallbackIconPath:W,notFound:!o}})}}G.styles=[b.og,(0,n.AH)(R||(R=N`:host{--md-list-item-top-space:0;--md-list-item-bottom-space:0;--md-list-item-leading-space:var(--ha-space-2);--md-list-item-trailing-space:var(--ha-space-2);--md-list-item-two-line-container-height:56px}:host([expand]:not([sub-entry])) ha-md-list-item{border:2px solid var(--ha-color-border-neutral-loud);background-color:var(--ha-color-fill-neutral-quiet-resting);border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg))}.error{background:var(--ha-color-fill-warning-quiet-resting)}.error [slot=supporting-text]{color:var(--ha-color-on-warning-normal)}state-badge{color:var(--ha-color-on-neutral-quiet)}.icon{width:24px;display:flex}img{width:24px;height:24px;z-index:1}ha-icon-button{--mdc-icon-button-size:32px}.summary{display:flex;flex-direction:column;align-items:flex-end;line-height:var(--ha-line-height-condensed)}:host([sub-entry]) .summary{margin-right:var(--ha-space-12)}.summary .main{font-weight:var(--ha-font-weight-medium)}.summary .secondary{font-size:var(--ha-font-size-s);color:var(--secondary-text-color)}.entries-tree{display:flex;position:relative}.entries-tree .line-wrapper{padding:var(--ha-space-5)}.entries-tree .line-wrapper .line{border-left:2px dashed var(--divider-color);height:calc(100% - 28px);position:absolute;top:0}:host([sub-entry]) .entries-tree .line-wrapper .line{height:calc(100% - 12px);top:-18px}.entries{padding:0;--md-item-overflow:visible}.horizontal-line-wrapper{position:relative}.horizontal-line-wrapper .horizontal-line{position:absolute;top:11px;margin-inline-start:-28px;width:29px;border-top:2px dashed var(--divider-color)}button.link{text-decoration:none;color:var(--primary-color)}button.link:focus,button.link:hover{text-decoration:underline}.domain{width:fit-content;border-radius:var(--ha-border-radius-md);background-color:var(--ha-color-fill-neutral-quiet-resting);padding:var(--ha-space-1);font-family:var(--ha-font-family-code)}`))],(0,s.Cg)([(0,r.MZ)({attribute:!1})],G.prototype,"hass",void 0),(0,s.Cg)([(0,r.MZ)({reflect:!0})],G.prototype,"type",void 0),(0,s.Cg)([(0,r.MZ)({attribute:"item-id"})],G.prototype,"itemId",void 0),(0,s.Cg)([(0,r.MZ)({type:Boolean})],G.prototype,"expand",void 0),(0,s.Cg)([(0,r.MZ)({type:Boolean,attribute:"sub-entry",reflect:!0})],G.prototype,"subEntry",void 0),(0,s.Cg)([(0,r.MZ)({type:Boolean,attribute:"hide-context"})],G.prototype,"hideContext",void 0),(0,s.Cg)([(0,r.MZ)({attribute:!1})],G.prototype,"parentEntries",void 0),(0,s.Cg)([(0,r.MZ)({attribute:!1})],G.prototype,"deviceFilter",void 0),(0,s.Cg)([(0,r.MZ)({attribute:!1})],G.prototype,"entityFilter",void 0),(0,s.Cg)([(0,r.MZ)({type:Array,attribute:"include-domains"})],G.prototype,"includeDomains",void 0),(0,s.Cg)([(0,r.MZ)({type:Array,attribute:"include-device-classes"})],G.prototype,"includeDeviceClasses",void 0),(0,s.Cg)([(0,r.wk)()],G.prototype,"_iconImg",void 0),(0,s.Cg)([(0,r.wk)()],G.prototype,"_domainName",void 0),(0,s.Cg)([(0,r.wk)()],G.prototype,"_entries",void 0),(0,s.Cg)([(0,r.wk)(),(0,a.Fg)({context:g.HD,subscribe:!0})],G.prototype,"_labelRegistry",void 0),(0,s.Cg)([(0,r.P)("ha-md-list-item")],G.prototype,"item",void 0),(0,s.Cg)([(0,r.P)("ha-md-list")],G.prototype,"list",void 0),(0,s.Cg)([(0,r.P)("ha-target-picker-item-row")],G.prototype,"itemRow",void 0),G=(0,s.Cg)([(0,r.EM)("ha-target-picker-item-row")],G),t()}catch(H){t(H)}})},69404:function(e,t,i){i.a(e,async function(e,t){try{i(18111),i(20116),i(3362),i(62953);var s=i(40445),a=i(16527),n=i(94454),r=i(96196),o=i(77845),l=i(94333),d=i(22786),c=i(78870),h=i(79468),p=i(1087),u=i(79),v=i(71727),m=i(28978),g=i(80880),y=i(77423),_=i(38911),b=i(95350),f=i(44144),$=i(18198),C=(i(88945),i(26300),i(17308),i(2846),i(93367)),x=i(34127),k=e([C,x]);[C,x]=k.then?(await k)():k;let H,V,M,L,I,D,w,F=e=>e;const q="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",Z="M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",z="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",E="M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",A="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",O="M18.17,12L15,8.83L16.41,7.41L21,12L16.41,16.58L15,15.17L18.17,12M5.83,12L9,15.17L7.59,16.59L3,12L7.59,7.42L9,8.83L5.83,12Z";class j extends r.WF{render(){const{name:e,iconPath:t,fallbackIconPath:i,stateObject:s,color:a}=this._itemData(this.type,this.itemId);return(0,r.qy)(H||(H=F` <div class="mdc-chip ${0}" style="${0}"> ${0} <span role="gridcell"> <span role="button" tabindex="0" class="mdc-chip__primary-action"> <span id="title-${0}" class="mdc-chip__text">${0}</span> </span> </span> ${0} <span role="gridcell"> <ha-tooltip .for="remove-${0}"> ${0} </ha-tooltip> <ha-icon-button class="mdc-chip__icon mdc-chip__icon--trailing" .label="${0}" .path="${0}" hide-title .id="remove-${0}" .type="${0}" @click="${0}"></ha-icon-button> </span> </div> `),(0,l.H)({[this.type]:!0}),a?`--color: rgb(${a}); --background-color: rgba(${a}, .5)`:"",t?(0,r.qy)(V||(V=F`<ha-icon class="mdc-chip__icon mdc-chip__icon--leading" .icon="${0}"></ha-icon>`),t):this._iconImg?(0,r.qy)(M||(M=F`<img class="mdc-chip__icon mdc-chip__icon--leading" alt="${0}" crossorigin="anonymous" referrerpolicy="no-referrer" src="${0}">`),this._domainName||"",this._iconImg):i?(0,r.qy)(L||(L=F`<ha-svg-icon class="mdc-chip__icon mdc-chip__icon--leading" .path="${0}"></ha-svg-icon>`),i):s?(0,r.qy)(I||(I=F`<ha-state-icon class="mdc-chip__icon mdc-chip__icon--leading" .hass="${0}" .stateObj="${0}"></ha-state-icon>`),this.hass,s):r.s6,this.itemId,e,"entity"===this.type?r.s6:(0,r.qy)(D||(D=F`<span role="gridcell"> <ha-tooltip .for="expand-${0}">${0} </ha-tooltip> <ha-icon-button class="expand-btn mdc-chip__icon mdc-chip__icon--trailing" .label="${0}" .path="${0}" hide-title .id="expand-${0}" .type="${0}" @click="${0}"></ha-icon-button> </span>`),(0,g.Y)(this.itemId),this.hass.localize(`ui.components.target-picker.expand_${this.type}_id`),this.hass.localize("ui.components.target-picker.expand"),O,(0,g.Y)(this.itemId),this.type,this._handleExpand),(0,g.Y)(this.itemId),this.hass.localize(`ui.components.target-picker.remove_${this.type}_id`),this.hass.localize("ui.components.target-picker.remove"),q,(0,g.Y)(this.itemId),this.type,this._removeItem)}_setDomainName(e){this._domainName=(0,b.p$)(this.hass.localize,e)}async _getDeviceDomain(e){try{var t;const i=(await(0,y.Vx)(this.hass,e)).config_entry.domain;this._iconImg=(0,f.MR)({domain:i,type:"icon",darkOptimized:null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode}),this._setDomainName(i)}catch(i){}}_removeItem(e){e.stopPropagation(),(0,p.r)(this,"remove-target-item",{type:this.type,id:this.itemId})}_handleExpand(e){e.stopPropagation(),(0,p.r)(this,"expand-target-item",{type:this.type,id:this.itemId})}constructor(...e){super(...e),this._itemData=(0,d.A)((e,t)=>{var i,s;if("floor"===e){var a;const e=null===(a=this.hass.floors)||void 0===a?void 0:a[t];return{name:(null==e?void 0:e.name)||t,iconPath:null==e?void 0:e.icon,fallbackIconPath:e?(0,$.Si)(e):z}}if("area"===e){var n;const e=null===(n=this.hass.areas)||void 0===n?void 0:n[t];return{name:(null==e?void 0:e.name)||t,iconPath:null==e?void 0:e.icon,fallbackIconPath:A}}if("device"===e){var r;const e=null===(r=this.hass.devices)||void 0===r?void 0:r[t];return e.primary_config_entry&&this._getDeviceDomain(e.primary_config_entry),{name:e?(0,u.T)(e,this.hass):t,fallbackIconPath:Z}}if("entity"===e){this._setDomainName((0,v.m)(t));const e=this.hass.states[t];return{name:(0,m.u)(e)||t,stateObject:e}}const o=this._labelRegistry.find(e=>e.label_id===t);let l=null!=o&&o.color?(0,c.MP)(o.color):void 0;if(null!==(i=l)&&void 0!==i&&i.startsWith("var(")){l=getComputedStyle(this).getPropertyValue(l.substring(4,l.length-1))}return null!==(s=l)&&void 0!==s&&s.startsWith("#")&&(l=(0,h.xp)(l).join(",")),{name:(null==o?void 0:o.name)||t,iconPath:null==o?void 0:o.icon,fallbackIconPath:E,color:l}})}}j.styles=(0,r.AH)(w||(w=F`${0} .mdc-chip{color:var(--primary-text-color)}.mdc-chip.add{color:rgba(0,0,0,.87)}.add-container{position:relative;display:inline-flex}.mdc-chip:not(.add){cursor:default}.mdc-chip ha-icon-button{--mdc-icon-button-size:24px;display:flex;align-items:center;outline:0}.mdc-chip ha-icon-button ha-svg-icon{border-radius:50%;background:var(--secondary-text-color)}.mdc-chip__icon.mdc-chip__icon--trailing{width:var(--ha-space-4);height:var(--ha-space-4);--mdc-icon-size:14px;color:var(--secondary-text-color);margin-inline-start:var(--ha-space-1)!important;margin-inline-end:calc(-1 * var(--ha-space-1))!important;direction:var(--direction)}.mdc-chip__icon--leading{display:flex;align-items:center;justify-content:center;--mdc-icon-size:20px;border-radius:var(--ha-border-radius-circle);padding:6px;margin-left:-13px!important;margin-inline-start:-13px!important;margin-inline-end:var(--ha-space-1)!important;direction:var(--direction)}.expand-btn{margin-right:0;margin-inline-end:0;margin-inline-start:initial}.mdc-chip.area:not(.add),.mdc-chip.floor:not(.add){border:1px solid #fed6a4;background:var(--card-background-color)}.mdc-chip.area.add,.mdc-chip.area:not(.add) .mdc-chip__icon--leading,.mdc-chip.floor.add,.mdc-chip.floor:not(.add) .mdc-chip__icon--leading{background:#fed6a4}.mdc-chip.device:not(.add){border:1px solid #a8e1fb;background:var(--card-background-color)}.mdc-chip.device.add,.mdc-chip.device:not(.add) .mdc-chip__icon--leading{background:#a8e1fb}.mdc-chip.entity:not(.add){border:1px solid #d2e7b9;background:var(--card-background-color)}.mdc-chip.entity.add,.mdc-chip.entity:not(.add) .mdc-chip__icon--leading{background:#d2e7b9}.mdc-chip.label:not(.add){border:1px solid var(--color,#e0e0e0);background:var(--card-background-color)}.mdc-chip.label.add,.mdc-chip.label:not(.add) .mdc-chip__icon--leading{background:var(--background-color,#e0e0e0)}.mdc-chip:hover{z-index:5}:host([disabled]) .mdc-chip{opacity:var(--light-disabled-opacity);pointer-events:none}.tooltip-icon-img{width:24px;height:24px}`),(0,r.iz)(n)),(0,s.Cg)([(0,o.MZ)({attribute:!1})],j.prototype,"hass",void 0),(0,s.Cg)([(0,o.MZ)()],j.prototype,"type",void 0),(0,s.Cg)([(0,o.MZ)({attribute:"item-id"})],j.prototype,"itemId",void 0),(0,s.Cg)([(0,o.wk)()],j.prototype,"_domainName",void 0),(0,s.Cg)([(0,o.wk)()],j.prototype,"_iconImg",void 0),(0,s.Cg)([(0,o.wk)(),(0,a.Fg)({context:_.HD,subscribe:!0})],j.prototype,"_labelRegistry",void 0),j=(0,s.Cg)([(0,o.EM)("ha-target-picker-value-chip")],j),t()}catch(H){t(H)}})},31422:function(e,t,i){i.d(t,{_:function(){return d},o:function(){return c}});i(74423),i(18111),i(81148),i(22489),i(61701),i(13579);var s=i(65522),a=i(79),n=i(71727),r=i(76774),o=i(95350),l=i(28989);const d=[{name:"search_labels.deviceName",weight:10},{name:"search_labels.areaName",weight:8},{name:"search_labels.domainName",weight:4},{name:"search_labels.domain",weight:4}],c=(e,t,i,d,c,h,p,u,v,m="")=>{const g=Object.values(e.devices),y=Object.values(e.entities);let _={};(i||d||c||p)&&(_=(0,l.g2)(y));let b=g.filter(e=>e.id===v||!e.disabled_by);i&&(b=b.filter(e=>{const t=_[e.id];return!(!t||!t.length)&&_[e.id].some(e=>i.includes((0,n.m)(e.entity_id)))})),d&&(b=b.filter(e=>{const t=_[e.id];return!t||!t.length||y.every(e=>!d.includes((0,n.m)(e.entity_id)))})),u&&(b=b.filter(e=>!u.includes(e.id))),c&&(b=b.filter(t=>{const i=_[t.id];return!(!i||!i.length)&&_[t.id].some(t=>{const i=e.states[t.entity_id];return!!i&&(i.attributes.device_class&&c.includes(i.attributes.device_class))})})),p&&(b=b.filter(t=>{const i=_[t.id];return!(!i||!i.length)&&i.some(t=>{const i=e.states[t.entity_id];return!!i&&p(i)})})),h&&(b=b.filter(e=>e.id===v||h(e)));return b.map(i=>{const n=(0,a.T)(i,e,_[i.id]),{area:l}=(0,r.w)(i,e),d=l?(0,s.A)(l):void 0,c=i.primary_config_entry?null==t?void 0:t[i.primary_config_entry]:void 0,h=null==c?void 0:c.domain,p=h?(0,o.p$)(e.localize,h):void 0,u=n||e.localize("ui.components.device-picker.unnamed_device");return{id:`${m}${i.id}`,label:"",primary:u,secondary:d,domain:null==c?void 0:c.domain,domain_name:p,search_labels:{deviceName:n,areaName:d||null,domain:h||null,domainName:p||null},sorting_label:[u,d,p].filter(Boolean).join("_")}})}}}]);
//# sourceMappingURL=24891.e5f626f169e715f9.js.map