export const __rspack_esm_id="64811";export const __rspack_esm_ids=["64811"];export const __webpack_modules__={58109(e,t,s){s.d(t,{S:()=>n});const a={en:"US",hi:"IN",deva:"IN",te:"IN",mr:"IN",ta:"IN",gu:"IN",kn:"IN",or:"IN",ml:"IN",pa:"IN",bho:"IN",awa:"IN",as:"IN",mwr:"IN",mai:"IN",mag:"IN",bgc:"IN",hne:"IN",dcc:"IN",bn:"BD",beng:"BD",rkt:"BD",dz:"BT",tibt:"BT",tn:"BW",am:"ET",ethi:"ET",om:"ET",quc:"GT",id:"ID",jv:"ID",su:"ID",mad:"ID",ms_arab:"ID",he:"IL",hebr:"IL",jam:"JM",ja:"JP",jpan:"JP",km:"KH",khmr:"KH",ko:"KR",kore:"KR",lo:"LA",laoo:"LA",mh:"MH",my:"MM",mymr:"MM",mt:"MT",ne:"NP",fil:"PH",ceb:"PH",ilo:"PH",ur:"PK",pa_arab:"PK",lah:"PK",ps:"PK",sd:"PK",skr:"PK",gn:"PY",th:"TH",thai:"TH",tts:"TH",zh_hant:"TW",hant:"TW",sm:"WS",zu:"ZA",sn:"ZW",arq:"DZ",ar:"EG",arab:"EG",arz:"EG",fa:"IR",az_arab:"IR",dv:"MV",thaa:"MV"};const o={AG:0,ATG:0,28:0,AS:0,ASM:0,16:0,BD:0,BGD:0,50:0,BR:0,BRA:0,76:0,BS:0,BHS:0,44:0,BT:0,BTN:0,64:0,BW:0,BWA:0,72:0,BZ:0,BLZ:0,84:0,CA:0,CAN:0,124:0,CO:0,COL:0,170:0,DM:0,DMA:0,212:0,DO:0,DOM:0,214:0,ET:0,ETH:0,231:0,GT:0,GTM:0,320:0,GU:0,GUM:0,316:0,HK:0,HKG:0,344:0,HN:0,HND:0,340:0,ID:0,IDN:0,360:0,IL:0,ISR:0,376:0,IN:0,IND:0,356:0,JM:0,JAM:0,388:0,JP:0,JPN:0,392:0,KE:0,KEN:0,404:0,KH:0,KHM:0,116:0,KR:0,KOR:0,410:0,LA:0,LA0:0,418:0,MH:0,MHL:0,584:0,MM:0,MMR:0,104:0,MO:0,MAC:0,446:0,MT:0,MLT:0,470:0,MX:0,MEX:0,484:0,MZ:0,MOZ:0,508:0,NI:0,NIC:0,558:0,NP:0,NPL:0,524:0,PA:0,PAN:0,591:0,PE:0,PER:0,604:0,PH:0,PHL:0,608:0,PK:0,PAK:0,586:0,PR:0,PRI:0,630:0,PT:0,PRT:0,620:0,PY:0,PRY:0,600:0,SA:0,SAU:0,682:0,SG:0,SGP:0,702:0,SV:0,SLV:0,222:0,TH:0,THA:0,764:0,TT:0,TTO:0,780:0,TW:0,TWN:0,158:0,UM:0,UMI:0,581:0,US:0,USA:0,840:0,VE:0,VEN:0,862:0,VI:0,VIR:0,850:0,WS:0,WSM:0,882:0,YE:0,YEM:0,887:0,ZA:0,ZAF:0,710:0,ZW:0,ZWE:0,716:0,AE:6,ARE:6,784:6,AF:6,AFG:6,4:6,BH:6,BHR:6,48:6,DJ:6,DJI:6,262:6,DZ:6,DZA:6,12:6,EG:6,EGY:6,818:6,IQ:6,IRQ:6,368:6,IR:6,IRN:6,364:6,JO:6,JOR:6,400:6,KW:6,KWT:6,414:6,LY:6,LBY:6,434:6,OM:6,OMN:6,512:6,QA:6,QAT:6,634:6,SD:6,SDN:6,729:6,SY:6,SYR:6,760:6,MV:5,MDV:5,462:5};function n(e){return function(e,t,s){if(e){var a,o=e.toLowerCase().split(/[-_]/),n=o[0],r=n;if(o[1]&&4===o[1].length?(r+="_"+o[1],a=o[2]):a=o[1],a||(a=t[r]||t[n]),a)return function(e,t){var s=t["string"==typeof e?e.toUpperCase():e];return"number"==typeof s?s:1}(a.match(/^\d+$/)?Number(a):a,s)}return 1}(e,a,o)}},380(e,t,s){s.d(t,{D:()=>i,P:()=>r});var a=s(58109),o=s(46927),n=s(96029);const r=e=>e.first_weekday===o.zt.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(e.language).weekInfo.firstDay%7:(0,a.S)(e.language)%7:n.Z.includes(e.first_weekday)?n.Z.indexOf(e.first_weekday):1,i=e=>{const t=r(e);return n.Z[t]}},98975(e,t,s){s.a(e,async function(e,a){try{s.d(t,{K:()=>c});var o=s(74487),n=s(22786),r=s(63927),i=e([o,r]);[o,r]=i.then?(await i)():i;const u=(0,n.A)(e=>new Intl.RelativeTimeFormat(e.language,{numeric:"auto"})),c=(e,t,s,a=!0)=>{const o=(0,r.x)(e,s,t);return a?u(t).format(o.value,o.unit):Intl.NumberFormat(t.language,{style:"unit",unit:o.unit,unitDisplay:"long"}).format(Math.abs(o.value))};a()}catch(e){a(e)}})},96029(e,t,s){s.d(t,{Tq:()=>r,Z:()=>o,ZV:()=>a,sj:()=>n});const a=["sun","mon","tue","wed","thu","fri","sat"],o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"},r={sun:"sunday",mon:"monday",tue:"tuesday",wed:"wednesday",thu:"thursday",fri:"friday",sat:"saturday"}},63927(e,t,s){s.a(e,async function(e,a){try{s.d(t,{x:()=>h});var o=s(6946),n=s(52640),r=s(38684),i=s(380);const u=1e3,c=60,l=60*c;function h(e,t=Date.now(),s,a={}){const h={...d,...a||{}},b=(+e-+t)/u;if(Math.abs(b)<h.second)return{value:Math.round(b),unit:"second"};const g=b/c;if(Math.abs(g)<h.minute)return{value:Math.round(g),unit:"minute"};const m=b/l;if(Math.abs(m)<h.hour)return{value:Math.round(m),unit:"hour"};const _=new Date(e),y=new Date(t);_.setHours(0,0,0,0),y.setHours(0,0,0,0);const p=(0,o.c)(_,y);if(0===p)return{value:Math.round(m),unit:"hour"};if(Math.abs(p)<h.day)return{value:p,unit:"day"};const f=(0,i.P)(s),v=(0,n.k)(_,{weekStartsOn:f}),M=(0,n.k)(y,{weekStartsOn:f}),D=(0,r.I)(v,M);if(0===D)return{value:p,unit:"day"};if(Math.abs(D)<h.week)return{value:D,unit:"week"};const w=_.getFullYear()-y.getFullYear(),I=12*w+_.getMonth()-y.getMonth();return 0===I?{value:D,unit:"week"}:Math.abs(I)<h.month||0===w?{value:I,unit:"month"}:{value:Math.round(w),unit:"year"}}const d={second:59,minute:59,hour:22,day:5,week:4,month:11};a()}catch(b){a(b)}})},2854(e,t,s){s.a(e,async function(e,a){try{s.r(t),s.d(t,{BluetoothNetworkVisualization:()=>v});s(44114),s(18111),s(22489),s(20116),s(7588),s(61701);var o=s(62826),n=s(96196),r=s(44457),i=s(22786),u=s(98975),c=s(76774),l=s(91926),h=s(77796),d=s(7358),b=s(21030),g=(s(31168),s(56682)),m=e([d,g,u]);[d,g,u]=m.then?(await m)():m;const _=1e4,y="ha",p="Home Assistant",f=[[-70,"--green-color"],[-75,"--lime-color"],[-80,"--yellow-color"],[-85,"--amber-color"],[-90,"--orange-color"],[-95,"--deep-orange-color"],[-1/0,"--red-color"]];class v extends n.WF{connectedCallback(){if(super.connectedCallback(),this.hass){this._unsub_advertisements=(0,b.Ht)(this.hass.connection,e=>{this._data.length?this._throttledUpdateData(e):this._data=e}),this._unsub_scanners=(0,b.mj)(this.hass.connection,e=>{this._scanners=e});const e=Object.values(this.hass.devices).filter(e=>e.connections.find(e=>"bluetooth"===e[0]));this._sourceDevices=Object.fromEntries(e.map(e=>[e.connections.find(e=>"bluetooth"===e[0])[1],e]))}}disconnectedCallback(){super.disconnectedCallback(),this._unsub_advertisements&&(this._unsub_advertisements(),this._unsub_advertisements=void 0),this._throttledUpdateData.cancel(),this._unsub_scanners&&(this._unsub_scanners(),this._unsub_scanners=void 0)}render(){return n.qy` <hass-tabs-subpage .hass="${this.hass}" .narrow="${this.narrow}" .route="${this.route}" .tabs="${g.bluetoothTabs}"> <ha-network-graph .hass="${this.hass}" .data="${this._formatNetworkData(this._data,this._scanners)}" .tooltipFormatter="${this._tooltipFormatter}" @chart-click="${this._handleChartClick}"></ha-network-graph> </hass-tabs-subpage> `}_getBluetoothDeviceName(e){return e===y?p:this._sourceDevices[e]?this._sourceDevices[e]?.name_by_user||this._sourceDevices[e]?.name||e:this._scanners[e]?this._scanners[e]?.name||e:this._data.find(t=>t.address===e)?.name||e}_getLineWidth(e){return e>-33?3:e>-66?2:1}_handleChartClick(e){if("node"===e.detail.dataType&&"pointer"===e.detail.event.target.cursor){const{id:t}=e.detail.data,s=this._sourceDevices[t];s&&(0,l.o)(`/config/devices/device/${s.id}`)}}static get styles(){return[n.AH`ha-network-graph{height:100%}`]}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this._data=[],this._scanners={},this._sourceDevices={},this._throttledUpdateData=(0,h.n)(e=>{this._data=e},_),this._getRssiColorVar=(0,i.A)(e=>{for(const[t,s]of f)if(e>t)return s;return"--red-color"}),this._formatNetworkData=(0,i.A)((e,t)=>{const s=getComputedStyle(this),a=[{name:p,symbol:"roundRect",itemStyle:{color:s.getPropertyValue("--primary-color")}},{name:this.hass.localize("ui.panel.config.bluetooth.scanners"),symbol:"circle",itemStyle:{color:s.getPropertyValue("--cyan-color")}},{name:this.hass.localize("ui.panel.config.bluetooth.known_devices"),symbol:"circle",itemStyle:{color:s.getPropertyValue("--teal-color")}},{name:this.hass.localize("ui.panel.config.bluetooth.unknown_devices"),symbol:"circle",itemStyle:{color:s.getPropertyValue("--disabled-color")}}],o=[{id:y,name:p,category:0,value:4,symbol:"roundRect",symbolSize:40,polarDistance:0}],n=[];return Object.values(t).forEach(e=>{const t=this._sourceDevices[e.source],a=t?(0,c.w)(t,this.hass).area:void 0;o.push({id:e.source,name:t?.name_by_user||t?.name||e.name,context:a?.name,category:1,value:5,symbol:"circle",symbolSize:30,polarDistance:.25}),n.push({source:y,target:e.source,value:0,symbol:"none",lineStyle:{width:3,color:s.getPropertyValue("--primary-color")}})}),e.forEach(e=>{if(t[e.address])return void n.push({source:e.source,target:e.address,value:e.rssi,symbol:"none",lineStyle:{width:this._getLineWidth(e.rssi),color:s.getPropertyValue(this._getRssiColorVar(e.rssi))}});const a=this._sourceDevices[e.address],r=a?(0,c.w)(a,this.hass).area:void 0;o.push({id:e.address,name:this._getBluetoothDeviceName(e.address),context:r?.name,value:a?1:0,category:a?2:3,symbolSize:20}),n.push({source:e.source,target:e.address,value:e.rssi,symbol:"none",lineStyle:{width:this._getLineWidth(e.rssi),color:a?s.getPropertyValue(this._getRssiColorVar(e.rssi)):s.getPropertyValue("--disabled-color")}})}),{nodes:o,links:n,categories:a}}),this._tooltipFormatter=e=>{const{dataType:t,data:s}=e;let a="";if("edge"===t){const{source:e,target:t,value:o}=s;a=`${this._getBluetoothDeviceName(e)} â†’ ${this._getBluetoothDeviceName(t)}`,e!==y&&(a+=` <b>${this.hass.localize("ui.panel.config.bluetooth.rssi")}:</b> ${o}`)}else{const{id:e}=s,t=this._getBluetoothDeviceName(e),o=this._data.find(t=>t.address===e);if(o){a=`<b>${t}</b><br><b>${this.hass.localize("ui.panel.config.bluetooth.address")}:</b> ${e}<br><b>${this.hass.localize("ui.panel.config.bluetooth.rssi")}:</b> ${o.rssi}<br><b>${this.hass.localize("ui.panel.config.bluetooth.source")}:</b> ${o.source}<br><b>${this.hass.localize("ui.panel.config.bluetooth.updated")}:</b> ${(0,u.K)(new Date(1e3*o.time),this.hass.locale)}`;const s=this._sourceDevices[e];if(s){const e=(0,c.w)(s,this.hass).area;e&&(a+=`<br><b>${this.hass.localize("ui.panel.config.bluetooth.area")}: </b>${e.name}`)}}else{const s=this._sourceDevices[e];if(s){a=`<b>${t}</b><br><b>${this.hass.localize("ui.panel.config.bluetooth.address")}:</b> ${e}`;const o=(0,c.w)(s,this.hass).area;o&&(a+=`<br><b>${this.hass.localize("ui.panel.config.bluetooth.area")}: </b>${o.name}`)}}}return a}}}(0,o.Cg)([(0,r.MZ)({attribute:!1})],v.prototype,"hass",void 0),(0,o.Cg)([(0,r.MZ)({type:Boolean,reflect:!0})],v.prototype,"narrow",void 0),(0,o.Cg)([(0,r.MZ)({attribute:"is-wide",type:Boolean})],v.prototype,"isWide",void 0),(0,o.Cg)([(0,r.MZ)({attribute:!1})],v.prototype,"route",void 0),(0,o.Cg)([(0,r.wk)()],v.prototype,"_data",void 0),(0,o.Cg)([(0,r.wk)()],v.prototype,"_scanners",void 0),(0,o.Cg)([(0,r.wk)()],v.prototype,"_sourceDevices",void 0),v=(0,o.Cg)([(0,r.EM)("bluetooth-network-visualization")],v),a()}catch(e){a(e)}})},2045(e,t,s){s.d(t,{q:()=>o});let a={};function o(){return a}},74816(e,t,s){s.d(t,{x:()=>o});s(18111),s(20116),s(61701);var a=s(51039);function o(e,...t){const s=a.w.bind(null,e||t.find(e=>"object"==typeof e));return t.map(s)}},3952(e,t,s){s.d(t,{m:()=>u});var a=s(83504);function o(e){const t=(0,a.a)(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}var n=s(74816),r=s(9160),i=s(35932);function u(e,t,s){const[a,u]=(0,n.x)(s?.in,e,t),c=(0,i.o)(a),l=(0,i.o)(u),h=+c-o(c),d=+l-o(l);return Math.round((h-d)/r.w4)}},6946(e,t,s){s.d(t,{c:()=>n});var a=s(74816),o=s(3952);function n(e,t,s){const[n,i]=(0,a.x)(s?.in,e,t),u=r(n,i),c=Math.abs((0,o.m)(n,i));n.setDate(n.getDate()-u*c);const l=u*(c-Number(r(n,i)===-u));return 0===l?0:l}function r(e,t){const s=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return s<0?-1:s>0?1:s}},38684(e,t,s){s.d(t,{I:()=>n});var a=s(6439),o=s(6946);function n(e,t,s){const n=(0,o.c)(e,t,s)/7;return(0,a.u)(s?.roundingMethod)(n)}},35932(e,t,s){s.d(t,{o:()=>o});var a=s(83504);function o(e,t){const s=(0,a.a)(e,t?.in);return s.setHours(0,0,0,0),s}},52640(e,t,s){s.d(t,{k:()=>n});var a=s(2045),o=s(83504);function n(e,t){const s=(0,a.q)(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,r=(0,o.a)(e,t?.in),i=r.getDay(),u=(i<n?7:0)+i-n;return r.setDate(r.getDate()-u),r.setHours(0,0,0,0),r}}};
//# sourceMappingURL=64811.3e3859bc9922ce83.js.map