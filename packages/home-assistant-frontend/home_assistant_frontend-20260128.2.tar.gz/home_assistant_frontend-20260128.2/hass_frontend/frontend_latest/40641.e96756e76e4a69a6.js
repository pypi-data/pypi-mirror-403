export const __rspack_esm_id="40641";export const __rspack_esm_ids=["40641"];export const __webpack_modules__={91069(e,t,s){s.a(e,async function(e,o){try{s.d(t,{EO:()=>S,Yq:()=>k,_U:()=>O,eE:()=>v,fU:()=>b,ol:()=>w,xo:()=>C});var i=s(78016),a=s(31810),r=s(49134),n=s(81977),c=s(36307),l=s(35932),d=s(73983),_=s(6946),h=s(92913),p=s(83339),u=s(77972),g=s(31886),f=s(46927),m=e([g]);g=(m.then?(await m)():m)[0];const y=(e,t,s,o)=>{const i=s(new g.BB(e,t),o);return i instanceof Date?new Date(i.getTime()):i},w=(e,t,s,o,i)=>s.time_zone===f.Wj.server?y(e,o.time_zone,t,i):t(e,i),C=(e,t,s,o,i)=>s.time_zone===f.Wj.server?y(e,o.time_zone,t,i):t(e,i),S=(e,t,s,o,i)=>C(e,s,o,i,o.time_zone===f.Wj.server?new g.BB(t,i.time_zone):t),v=(e,t,s,o,g)=>{let f,m;if(C(e,i.e,o,g)&&C(t,a.c,o,g)){const i=(S(t,e,r.W,o,g)+1)*(s?1:-1);f=w(e,n.P,o,g,i),m=w(w(t,n.P,o,g,i),c.p,o,g)}else if(C(e,e=>(0,l.o)(e).getMilliseconds()===e.getMilliseconds(),o,g)&&C(t,e=>(0,d.D)(e).getMilliseconds()===e.getMilliseconds(),o,g)){const i=(S(t,e,_.c,o,g)+1)*(s?1:-1);f=w(e,h.f,o,g,i),m=w(t,h.f,o,g,i)}else{const i=S(t,e,p.b,o,g)*(s?1:-1);f=w(e,u.A,o,g,i),m=w(t,u.A,o,g,i)}return{start:f,end:m}},O=(e,t)=>{const s=new g.BB(e,t);return new Date(s.getTime())},k=(e,t)=>new g.BB(e,t).toISOString().split("T")[0],b=(e,t)=>new g.BB(e,t).toISOString().split("T")[1].split(".")[0];o()}catch(e){o(e)}})},46223(e,t,s){s.a(e,async function(e,o){try{s.d(t,{b:()=>S});var i=s(35932),a=s(73983),r=s(92913),n=s(52640),c=s(69137),l=s(35660),d=s(36307),_=s(11650),h=s(15797),p=s(33977),u=s(69748),g=s(55144),f=s(21828),m=s(66708),y=s(91069),w=s(380),C=e([y]);y=(C.then?(await C)():C)[0];const S=(e,t)=>{const s=new Date,o=(0,w.P)(e.locale);switch(t){case"today":return[(0,y.ol)(s,i.o,e.locale,e.config,{weekStartsOn:o}),(0,y.ol)(s,a.D,e.locale,e.config,{weekStartsOn:o})];case"yesterday":return[(0,y.ol)((0,r.f)(s,-1),i.o,e.locale,e.config,{weekStartsOn:o}),(0,y.ol)((0,r.f)(s,-1),a.D,e.locale,e.config,{weekStartsOn:o})];case"this_week":return[(0,y.ol)(s,n.k,e.locale,e.config,{weekStartsOn:o}),(0,y.ol)(s,c.$,e.locale,e.config,{weekStartsOn:o})];case"this_month":return[(0,y.ol)(s,l.w,e.locale,e.config),(0,y.ol)(s,d.p,e.locale,e.config)];case"this_quarter":return[(0,y.ol)(s,_.a,e.locale,e.config),(0,y.ol)(s,h.j,e.locale,e.config)];case"this_year":return[(0,y.ol)(s,p.D,e.locale,e.config),(0,y.ol)(s,u.Q,e.locale,e.config)];case"now-7d":return[(0,y.ol)(s,g.e,e.locale,e.config,7),(0,y.ol)(s,g.e,e.locale,e.config,0)];case"now-30d":return[(0,y.ol)(s,g.e,e.locale,e.config,30),(0,y.ol)(s,g.e,e.locale,e.config,0)];case"now-12m":return[(0,y.ol)(s,f.a,e.locale,e.config,12),(0,y.ol)(s,f.a,e.locale,e.config,0)];case"now-1h":return[(0,y.ol)(s,m.O,e.locale,e.config,1),(0,y.ol)(s,m.O,e.locale,e.config,0)];case"now-12h":return[(0,y.ol)(s,m.O,e.locale,e.config,12),(0,y.ol)(s,m.O,e.locale,e.config,0)];case"now-24h":return[(0,y.ol)(s,m.O,e.locale,e.config,24),(0,y.ol)(s,m.O,e.locale,e.config,0)]}return[s,s]};o()}catch(e){o(e)}})},23528(e,t,s){s.d(t,{$3:()=>g,$O:()=>O,$j:()=>f,ED:()=>a,JE:()=>k,OQ:()=>b,PU:()=>M,Ph:()=>p,Uf:()=>v,W1:()=>u,Wr:()=>d,Z:()=>c,gF:()=>m,iY:()=>y,jU:()=>r,nN:()=>S,p3:()=>l,pJ:()=>h,r_:()=>n,sz:()=>_});s(18111),s(13579);var o=s(28978),i=s(380),a=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({});const r=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],n=["L","gal","ft³","m³","CCF","MCF"],c=e=>e.sendMessagePromise({type:"recorder/info"}),l=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),d=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),_=(e,t,s,o,i="hour",a,r)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:s?.toISOString(),statistic_ids:o,period:i,units:a,types:r}),h=(e,t,s,o)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:o,fixed_period:s.fixed_period?{start_time:s.fixed_period.start instanceof Date?s.fixed_period.start.toISOString():s.fixed_period.start,end_time:s.fixed_period.end instanceof Date?s.fixed_period.end.toISOString():s.fixed_period.end}:void 0,calendar:s.calendar?{..."week"===s.calendar.period?{first_weekday:(0,i.D)(e.locale).substring(0,3)}:{},...s.calendar}:void 0,rolling_window:s.rolling_window}),p=e=>e.callWS({type:"recorder/validate_statistics"}),u=(e,t,s,o)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:s,unit_class:o}),g=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),f=e=>{let t=null;if(!e)return null;for(const s of e)null!==s.change&&void 0!==s.change&&(null===t?t=s.change:t+=s.change);return t},m=(e,t)=>{let s=null;for(const o of t){if(!(o in e))continue;const t=f(e[o]);null!==t&&(null===s?s=t:s+=t)}return s},y=(e,t)=>e.some(e=>void 0!==e[t]&&null!==e[t]),w=["mean","min","max"],C=["sum","state","change"],S=(e,t)=>!(!w.includes(t)||0===e.mean_type)||!(!C.includes(t)||!e.has_sum),v=(e,t,s,o,i)=>{const a=new Date(s).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:a,adjustment:o,adjustment_unit_of_measurement:i})},O=(e,t,s)=>{const i=e.states[t];return i?(0,o.u)(i):s?.name||t},k=(e,t,s)=>{let o;return t&&(o=e.states[t]?.attributes.unit_of_measurement),void 0===o?s?.statistics_unit_of_measurement:o},b=e=>e.includes(":"),M=e=>e.callWS({type:"recorder/update_statistics_issues"})},62284(e,t,s){s.a(e,async function(e,o){try{s.r(t),s.d(t,{HuiEnergyCompareCard:()=>f});var i=s(62826),a=s(6946),r=s(73983),n=s(96196),c=s(44457),l=s(72487),d=s(38114),_=s(54706),h=s(784),p=(s(38962),s(1087)),u=s(14503),g=e([l,d]);[l,d]=g.then?(await g)():g;class f extends((0,_.E)(n.WF)){getCardSize(){return 1}setConfig(e){this._config=e}hassSubscribe(){return[(0,d.tb)(this.hass,{key:this._config.collection_key}).subscribe(e=>this._update(e))]}shouldUpdate(e){return(0,h.xP)(this,e)||e.size>1||!e.has("hass")}render(){if(!this._startCompare||!this._endCompare)return n.s6;const e=(0,a.c)(this._endCompare,this._startCompare);return n.qy` <ha-alert dismissable @alert-dismissed-clicked="${this._stopCompare}"> ${this.hass.localize("ui.panel.lovelace.cards.energy.energy_compare.info",{start:n.qy`<b>${(0,l.Yq)(this._start,this.hass.locale,this.hass.config)}${e>0?` -\n          ${(0,l.Yq)(this._end||(0,r.D)(new Date),this.hass.locale,this.hass.config)}`:""}</b>`,end:n.qy`<b>${(0,l.Yq)(this._startCompare,this.hass.locale,this.hass.config)}${e>0?` -\n          ${(0,l.Yq)(this._endCompare,this.hass.locale,this.hass.config)}`:""}</b> <button class="link" @click="${this._changeCompareMode}"> (${this._compareMode===d.lh.PREVIOUS?this.hass.localize("ui.panel.lovelace.cards.energy.energy_compare.compare_previous_year"):this.hass.localize("ui.panel.lovelace.cards.energy.energy_compare.compare_previous_period")}) </button>`})} </ha-alert> `}_changeCompareMode(){const e=(0,d.tb)(this.hass,{key:this._config.collection_key});e.setCompare(this._compareMode===d.lh.PREVIOUS?d.lh.YOY:d.lh.PREVIOUS),e.refresh()}_update(e){this._start=e.start,this._end=e.end,this._startCompare=e.startCompare,this._endCompare=e.endCompare,this._compareMode=e.compareMode;const t=this.hidden;this.hidden=!this._startCompare,t!==this.hidden&&(0,p.r)(this,"card-visibility-changed")}_stopCompare(){const e=(0,d.tb)(this.hass,{key:this._config.collection_key});e.setCompare(d.lh.NONE),e.refresh()}constructor(...e){super(...e),this.hidden=!0,this.connectedWhileHidden=!0,this.hassSubscribeRequiredHostProps=["_config"]}}f.styles=[u.og],(0,i.Cg)([(0,c.MZ)({attribute:!1})],f.prototype,"hass",void 0),(0,i.Cg)([(0,c.wk)()],f.prototype,"_config",void 0),(0,i.Cg)([(0,c.wk)()],f.prototype,"_start",void 0),(0,i.Cg)([(0,c.wk)()],f.prototype,"_end",void 0),(0,i.Cg)([(0,c.wk)()],f.prototype,"_startCompare",void 0),(0,i.Cg)([(0,c.wk)()],f.prototype,"_endCompare",void 0),(0,i.Cg)([(0,c.wk)()],f.prototype,"_compareMode",void 0),(0,i.Cg)([(0,c.MZ)({type:Boolean,reflect:!0})],f.prototype,"hidden",void 0),f=(0,i.Cg)([(0,c.EM)("hui-energy-compare-card")],f),o()}catch(e){o(e)}})},56434(e,t,s){s.d(t,{e:()=>i});var o=s(81977);function i(e,t,s){return(0,o.P)(e,12*t,s)}}};
//# sourceMappingURL=40641.e96756e76e4a69a6.js.map