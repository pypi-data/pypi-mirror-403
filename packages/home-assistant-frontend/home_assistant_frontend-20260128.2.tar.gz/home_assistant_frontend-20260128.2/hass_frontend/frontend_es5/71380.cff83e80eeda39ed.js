"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["71380"],{26571:function(e,t,s){s.d(t,{Al:function(){return n},KY:function(){return i},PN:function(){return c},dG:function(){return h},jm:function(){return l},m7:function(){return _},sR:function(){return d},t1:function(){return o},t2:function(){return u},x:function(){return p},yu:function(){return g}});var a=s(95350);const i=["bluetooth","dhcp","discovery","esphome","hardware","hassio","homekit","integration_discovery","mqtt","ssdp","unignore","usb","zeroconf"],n=["reauth"],r={"HA-Frontend-Base":`${location.protocol}//${location.host}`},o=(e,t,s)=>{var a;return e.callApi("POST","config/config_entries/flow",{handler:t,show_advanced_options:Boolean(null===(a=e.userData)||void 0===a?void 0:a.showAdvanced),entry_id:s},r)},c=(e,t)=>e.callApi("GET",`config/config_entries/flow/${t}`,void 0,r),l=(e,t,s)=>e.callApi("POST",`config/config_entries/flow/${t}`,s,r),h=(e,t,s)=>e.callWS({type:"config_entries/ignore_flow",flow_id:t,title:s}),d=(e,t)=>e.callApi("DELETE",`config/config_entries/flow/${t}`),g=(e,t)=>e.callApi("GET","config/config_entries/flow_handlers"+(t?`?type=${t}`:"")),u=e=>e.sendMessagePromise({type:"config_entries/flow/progress"}),p=(e,t)=>e.connection.subscribeMessage(e=>t(e),{type:"config_entries/flow/subscribe"}),_=(e,t)=>t.context.title_placeholders&&0!==Object.keys(t.context.title_placeholders).length?e(`component.${t.handler}.config.flow_title`,t.context.title_placeholders)||("name"in t.context.title_placeholders?t.context.title_placeholders.name:(0,a.p$)(e,t.handler)):(0,a.p$)(e,t.handler)},77763:function(e,t,s){s.d(t,{W:function(){return y}});s(89463),s(3362),s(62953);var a=s(96196),i=s(26571),n=s(95350),r=s(29094);let o,c,l,h,d,g,u,p,_,f=e=>e;const y=(e,t)=>(0,r.g)(e,t,{flowType:"config_flow",showDevices:!0,createFlow:async(e,s)=>{const[a]=await Promise.all([(0,i.t1)(e,s,t.entryId),e.loadFragmentTranslation("config"),e.loadBackendTranslation("config",s),e.loadBackendTranslation("selector",s),e.loadBackendTranslation("title",s)]);return a},fetchFlow:async(e,t)=>{const[s]=await Promise.all([(0,i.PN)(e,t),e.loadFragmentTranslation("config")]);return await Promise.all([e.loadBackendTranslation("config",s.handler),e.loadBackendTranslation("selector",s.handler),e.loadBackendTranslation("title",s.handler)]),s},handleFlowStep:i.jm,deleteFlow:i.sR,renderAbortDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.abort.${t.reason}`,t.description_placeholders);return s?(0,a.qy)(o||(o=f` <ha-markdown allow-svg breaks .content="${0}"></ha-markdown> `),s):t.reason},renderShowFormStepHeader(e,t){return e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.title`,t.description_placeholders)||e.localize(`component.${t.handler}.title`)},renderShowFormStepDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.description`,t.description_placeholders);return s?(0,a.qy)(c||(c=f` <ha-markdown .allowDataUrl="${0}" allow-svg breaks .content="${0}"></ha-markdown> `),"zwave_js"===t.handler,s):""},renderShowFormStepFieldLabel(e,t,s,a){var i;if("expandable"===s.type)return e.localize(`component.${t.handler}.config.step.${t.step_id}.sections.${s.name}.name`,t.description_placeholders);const n=null!=a&&null!==(i=a.path)&&void 0!==i&&i[0]?`sections.${a.path[0]}.`:"";return e.localize(`component.${t.handler}.config.step.${t.step_id}.${n}data.${s.name}`,t.description_placeholders)||s.name},renderShowFormStepFieldHelper(e,t,s,i){var n;if("expandable"===s.type)return e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.sections.${s.name}.description`,t.description_placeholders);const r=null!=i&&null!==(n=i.path)&&void 0!==n&&n[0]?`sections.${i.path[0]}.`:"",o=e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.${r}data_description.${s.name}`,t.description_placeholders);return o?(0,a.qy)(l||(l=f`<ha-markdown breaks .content="${0}"></ha-markdown>`),o):""},renderShowFormStepFieldError(e,t,s){return e.localize(`component.${t.translation_domain||t.translation_domain||t.handler}.config.error.${s}`,t.description_placeholders)||s},renderShowFormStepFieldLocalizeValue(e,t,s){return e.localize(`component.${t.handler}.selector.${s}`)},renderShowFormStepSubmitButton(e,t){return e.localize(`component.${t.handler}.config.step.${t.step_id}.submit`)||e.localize("ui.panel.config.integrations.config_flow."+(!1===t.last_step?"next":"submit"))},renderExternalStepHeader(e,t){return e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize("ui.panel.config.integrations.config_flow.external_step.open_site")},renderExternalStepDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.${t.step_id}.description`,t.description_placeholders);return(0,a.qy)(h||(h=f` <p> ${0} </p> ${0} `),e.localize("ui.panel.config.integrations.config_flow.external_step.description"),s?(0,a.qy)(d||(d=f` <ha-markdown allow-svg breaks .content="${0}"></ha-markdown> `),s):"")},renderCreateEntryDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.create_entry.${t.description||"default"}`,t.description_placeholders);return(0,a.qy)(g||(g=f` ${0} `),s?(0,a.qy)(u||(u=f` <ha-markdown allow-svg breaks .content="${0}"></ha-markdown> `),s):a.s6)},renderShowFormProgressHeader(e,t){return e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize(`component.${t.handler}.title`)},renderShowFormProgressDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.progress.${t.progress_action}`,t.description_placeholders);return s?(0,a.qy)(p||(p=f` <ha-markdown allow-svg breaks .content="${0}"></ha-markdown> `),s):""},renderMenuHeader(e,t){return e.localize(`component.${t.handler}.config.step.${t.step_id}.title`)||e.localize(`component.${t.handler}.title`)},renderMenuDescription(e,t){const s=e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.description`,t.description_placeholders);return s?(0,a.qy)(_||(_=f` <ha-markdown allow-svg breaks .content="${0}"></ha-markdown> `),s):""},renderMenuOption(e,t,s){return e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.menu_options.${s}`,t.description_placeholders)},renderMenuOptionDescription(e,t,s){return e.localize(`component.${t.translation_domain||t.handler}.config.step.${t.step_id}.menu_option_descriptions.${s}`,t.description_placeholders)},renderLoadingDescription(e,t,s,a){if("loading_flow"!==t&&"loading_step"!==t)return"";const i=(null==a?void 0:a.handler)||s;return e.localize(`ui.panel.config.integrations.config_flow.loading.${t}`,{integration:i?(0,n.p$)(e.localize,i):e.localize("ui.panel.config.integrations.config_flow.loading.fallback_title")})}})},29094:function(e,t,s){s.d(t,{g:function(){return n}});s(3362),s(62953);var a=s(1087);const i=()=>Promise.all([s.e("73126"),s.e("62066"),s.e("44533"),s.e("46095"),s.e("63768"),s.e("92769"),s.e("62453"),s.e("93785"),s.e("12036"),s.e("89385"),s.e("52937"),s.e("30440"),s.e("26233"),s.e("39005"),s.e("39292")]).then(s.bind(s,78314)),n=(e,t,s)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-data-entry-flow",dialogImport:i,dialogParams:Object.assign(Object.assign({},t),{},{flowConfig:s,dialogParentElement:e})})}},23206:function(e,t,s){s.a(e,async function(e,t){try{s(44114),s(18111),s(22489),s(7588),s(61701),s(3362);var a=s(40445),i=s(96196),n=s(77845),r=s(1087),o=(s(76776),s(18350)),c=(s(67094),s(26300),s(8034),s(38114)),l=s(23528),h=s(65063),d=s(14503),g=s(36918),u=s(82105),p=(s(38940),s(6268)),_=e([o,l,c]);[o,l,c]=_.then?(await _)():_;let f,y,v,b,m,$,w=e=>e;const H="M16 20H8V6H16M16.67 4H15V2H9V4H7.33C6.6 4 6 4.6 6 5.33V20.67C6 21.4 6.6 22 7.33 22H16.67C17.41 22 18 21.41 18 20.67V5.33C18 4.6 17.4 4 16.67 4M15 16H9V19H15V16M15 7H9V10H15V7M15 11.5H9V14.5H15V11.5Z",C="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",M="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",O="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";class z extends i.WF{render(){const e=[],t=[];return this.preferences.energy_sources.forEach((s,a)=>{"battery"===s.type&&(e.push(s),this.validationResult&&t.push(this.validationResult.energy_sources[a]))}),(0,i.qy)(f||(f=w` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${0}"></ha-svg-icon> ${0} </h1> <div class="card-content"> <p> ${0} <a target="_blank" rel="noopener noreferrer" href="${0}">${0}</a> </p> ${0} <h3> ${0} </h3> ${0} <div class="row border-bottom"> <ha-svg-icon .path="${0}"></ha-svg-icon> <ha-button @click="${0}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${0}"></ha-svg-icon> ${0}</ha-button> </div> </div> </ha-card> `),H,this.hass.localize("ui.panel.config.energy.battery.title"),this.hass.localize("ui.panel.config.energy.battery.sub"),(0,g.o)(this.hass,"/docs/energy/battery/"),this.hass.localize("ui.panel.config.energy.battery.learn_more"),t.map(e=>(0,i.qy)(y||(y=w` <ha-energy-validation-result .hass="${0}" .issues="${0}"></ha-energy-validation-result> `),this.hass,e)),this.hass.localize("ui.panel.config.energy.battery.battery_systems"),e.map(e=>{var t,s;const a=this.hass.states[e.stat_energy_to];return(0,i.qy)(v||(v=w` <div class="row" .source="${0}"> ${0} <div class="content"> <span class="label">${0}</span> <span class="label">${0}</span> </div> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> </div> `),e,null!=a&&a.attributes.icon?(0,i.qy)(b||(b=w`<ha-icon .icon="${0}"></ha-icon>`),a.attributes.icon):(0,i.qy)(m||(m=w`<ha-svg-icon .path="${0}"></ha-svg-icon>`),H),(0,l.$O)(this.hass,e.stat_energy_from,null===(t=this.statsMetadata)||void 0===t?void 0:t[e.stat_energy_from]),(0,l.$O)(this.hass,e.stat_energy_to,null===(s=this.statsMetadata)||void 0===s?void 0:s[e.stat_energy_to]),this.hass.localize("ui.panel.config.energy.battery.edit_battery_system"),this._editSource,M,this.hass.localize("ui.panel.config.energy.battery.delete_battery_system"),this._deleteSource,C)}),H,this._addSource,O,this.hass.localize("ui.panel.config.energy.battery.add_battery_system"))}_addSource(){(0,u.m5)(this,{battery_sources:this.preferences.energy_sources.filter(e=>"battery"===e.type),saveCallback:async e=>{await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.concat(e)}))}})}_editSource(e){const t=e.currentTarget.closest(".row").source;(0,u.m5)(this,{source:Object.assign({},t),battery_sources:this.preferences.energy_sources.filter(e=>"battery"===e.type),saveCallback:async e=>{await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(s=>s===t?e:s)}))}})}async _deleteSource(e){const t=e.currentTarget.closest(".row").source;if(await(0,h.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))try{await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.filter(e=>e!==t)}))}catch(s){(0,h.showAlertDialog)(this,{title:`Failed to save config: ${s.message}`})}}async _savePreferences(e){const t=await(0,c.WN)(this.hass,e);(0,r.r)(this,"value-changed",{value:t})}static get styles(){return[d.RF,p.X,(0,i.AH)($||($=w`.row{height:58px}.content{display:flex;flex-direction:column}.label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}`))]}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],z.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],z.prototype,"preferences",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],z.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],z.prototype,"validationResult",void 0),z=(0,a.Cg)([(0,n.EM)("ha-energy-battery-settings")],z),t()}catch(f){t(f)}})},76135:function(e,t,s){s.a(e,async function(e,t){try{s(74423),s(18111),s(22489),s(7588),s(61701),s(3362);var a=s(40445),i=s(96196),n=s(4937),r=s(77845),o=s(1087),c=(s(76776),s(18350)),l=(s(26300),s(85938),s(67094),s(38114)),h=s(23528),d=s(65063),g=s(14503),u=s(36918),p=s(82105),_=(s(38940),s(6268)),f=e([c,h,l]);[c,h,l]=f.then?(await f)():f;let y,v,b,m,$=e=>e;const w="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",H="M3 6H21V4H3C1.9 4 1 4.9 1 6V18C1 19.1 1.9 20 3 20H7V18H3V6M13 12H9V13.78C8.39 14.33 8 15.11 8 16C8 16.89 8.39 17.67 9 18.22V20H13V18.22C13.61 17.67 14 16.88 14 16S13.61 14.33 13 13.78V12M11 17.5C10.17 17.5 9.5 16.83 9.5 16S10.17 14.5 11 14.5 12.5 15.17 12.5 16 11.83 17.5 11 17.5M22 8H16C15.5 8 15 8.5 15 9V19C15 19.5 15.5 20 16 20H22C22.5 20 23 19.5 23 19V9C23 8.5 22.5 8 22 8M21 18H17V10H21V18Z",C="M21 11H3V9H21V11M21 13H3V15H21V13Z",M="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",O="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";class z extends i.WF{render(){var e;return(0,i.qy)(y||(y=$` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${0}"></ha-svg-icon> ${0} </h1> <div class="card-content"> <p> ${0} <a target="_blank" rel="noopener noreferrer" href="${0}">${0}</a> </p> ${0} <h3> ${0} </h3> <ha-sortable handle-selector=".handle" @item-moved="${0}"> <div class="devices"> ${0} </div> </ha-sortable> <div class="row"> <ha-svg-icon .path="${0}"></ha-svg-icon> <ha-button @click="${0}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>${0}</ha-button> </div> </div> </ha-card> `),H,this.hass.localize("ui.panel.config.energy.device_consumption.title"),this.hass.localize("ui.panel.config.energy.device_consumption.sub"),(0,u.o)(this.hass,"/docs/energy/individual-devices/"),this.hass.localize("ui.panel.config.energy.device_consumption.learn_more"),null===(e=this.validationResult)||void 0===e?void 0:e.device_consumption.map(e=>(0,i.qy)(v||(v=$` <ha-energy-validation-result .hass="${0}" .issues="${0}"></ha-energy-validation-result> `),this.hass,e)),this.hass.localize("ui.panel.config.energy.device_consumption.devices"),this._itemMoved,(0,n.u)(this.preferences.device_consumption,e=>e.stat_consumption,e=>{var t;return(0,i.qy)(b||(b=$` <div class="row" .device="${0}"> <div class="handle"> <ha-svg-icon .path="${0}"></ha-svg-icon> </div> <span class="content">${0}</span> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> <ha-icon-button .label="${0}" @click="${0}" .device="${0}" .path="${0}"></ha-icon-button> </div> `),e,C,e.name||(0,h.$O)(this.hass,e.stat_consumption,null===(t=this.statsMetadata)||void 0===t?void 0:t[e.stat_consumption]),this.hass.localize("ui.common.edit"),this._editDevice,M,this.hass.localize("ui.common.delete"),this._deleteDevice,e,w)}),H,this._addDevice,O,this.hass.localize("ui.panel.config.energy.device_consumption.add_device"))}_itemMoved(e){e.stopPropagation();const{oldIndex:t,newIndex:s}=e.detail,a=this.preferences.device_consumption.concat(),i=a.splice(t,1)[0];a.splice(s,0,i);const n=Object.assign(Object.assign({},this.preferences),{},{device_consumption:a});(0,o.r)(this,"value-changed",{value:n}),this._savePreferences(n)}_editDevice(e){const t=e.currentTarget.closest(".row").device;(0,p.D0)(this,{statsMetadata:this.statsMetadata,device:Object.assign({},t),device_consumptions:this.preferences.device_consumption,saveCallback:async e=>{const s=Object.assign(Object.assign({},this.preferences),{},{device_consumption:this.preferences.device_consumption.map(s=>s===t?e:s)});this._sanitizeParents(s),await this._savePreferences(s)}})}_addDevice(){(0,p.D0)(this,{statsMetadata:this.statsMetadata,device_consumptions:this.preferences.device_consumption,saveCallback:async e=>{await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{device_consumption:this.preferences.device_consumption.concat(e)}))}})}_sanitizeParents(e){const t=e.device_consumption.map(e=>e.stat_consumption);e.device_consumption.forEach(e=>{e.included_in_stat&&!t.includes(e.included_in_stat)&&delete e.included_in_stat})}async _deleteDevice(e){const t=e.currentTarget.device;if(await(0,d.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))try{const e=Object.assign(Object.assign({},this.preferences),{},{device_consumption:this.preferences.device_consumption.filter(e=>e!==t)});this._sanitizeParents(e),await this._savePreferences(e)}catch(s){(0,d.showAlertDialog)(this,{title:`Failed to save config: ${s.message}`})}}async _savePreferences(e){const t=await(0,l.WN)(this.hass,e);(0,o.r)(this,"value-changed",{value:t})}static get styles(){return[g.RF,_.X,(0,i.AH)(m||(m=$`.handle{cursor:move;cursor:grab}`))]}}(0,a.Cg)([(0,r.MZ)({attribute:!1})],z.prototype,"hass",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],z.prototype,"preferences",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],z.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],z.prototype,"validationResult",void 0),z=(0,a.Cg)([(0,r.EM)("ha-energy-device-settings")],z),t()}catch(y){t(y)}})},28166:function(e,t,s){s.a(e,async function(e,t){try{s(44114),s(18111),s(22489),s(7588),s(61701),s(3362);var a=s(40445),i=s(96196),n=s(77845),r=s(1087),o=s(18350),c=(s(76776),s(26300),s(38114)),l=s(23528),h=s(65063),d=s(14503),g=s(36918),u=s(82105),p=(s(38940),s(6268)),_=e([o,l,c]);[o,l,c]=_.then?(await _)():_;let f,y,v,b,m,$=e=>e;const w="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",H="M17.66 11.2C17.43 10.9 17.15 10.64 16.89 10.38C16.22 9.78 15.46 9.35 14.82 8.72C13.33 7.26 13 4.85 13.95 3C13 3.23 12.17 3.75 11.46 4.32C8.87 6.4 7.85 10.07 9.07 13.22C9.11 13.32 9.15 13.42 9.15 13.55C9.15 13.77 9 13.97 8.8 14.05C8.57 14.15 8.33 14.09 8.14 13.93C8.08 13.88 8.04 13.83 8 13.76C6.87 12.33 6.69 10.28 7.45 8.64C5.78 10 4.87 12.3 5 14.47C5.06 14.97 5.12 15.47 5.29 15.97C5.43 16.57 5.7 17.17 6 17.7C7.08 19.43 8.95 20.67 10.96 20.92C13.1 21.19 15.39 20.8 17.03 19.32C18.86 17.66 19.5 15 18.56 12.72L18.43 12.46C18.22 12 17.66 11.2 17.66 11.2M14.5 17.5C14.22 17.74 13.76 18 13.4 18.1C12.28 18.5 11.16 17.94 10.5 17.28C11.69 17 12.4 16.12 12.61 15.23C12.78 14.43 12.46 13.77 12.33 13C12.21 12.26 12.23 11.63 12.5 10.94C12.69 11.32 12.89 11.7 13.13 12C13.9 13 15.11 13.44 15.37 14.8C15.41 14.94 15.43 15.08 15.43 15.23C15.46 16.05 15.1 16.95 14.5 17.5H14.5Z",C="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",M="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";class O extends i.WF{render(){const e=[],t=[];return this.preferences.energy_sources.forEach((s,a)=>{"gas"===s.type&&(e.push(s),this.validationResult&&t.push(this.validationResult.energy_sources[a]))}),(0,i.qy)(f||(f=$` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${0}"></ha-svg-icon> ${0} </h1> <div class="card-content"> <p> ${0} <a target="_blank" rel="noopener noreferrer" href="${0}">${0}</a> </p> ${0} <h3> ${0} </h3> ${0} <div class="row border-bottom"> <ha-svg-icon .path="${0}"></ha-svg-icon> <ha-button @click="${0}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>${0}</ha-button> </div> </div> </ha-card> `),H,this.hass.localize("ui.panel.config.energy.gas.title"),this.hass.localize("ui.panel.config.energy.gas.sub"),(0,g.o)(this.hass,"/docs/energy/gas/"),this.hass.localize("ui.panel.config.energy.gas.learn_more"),t.map(e=>(0,i.qy)(y||(y=$` <ha-energy-validation-result .hass="${0}" .issues="${0}"></ha-energy-validation-result> `),this.hass,e)),this.hass.localize("ui.panel.config.energy.gas.gas_consumption"),e.map(e=>{var t;const s=this.hass.states[e.stat_energy_from];return(0,i.qy)(v||(v=$` <div class="row" .source="${0}"> ${0} <span class="content">${0}</span> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> </div> `),e,null!=s&&s.attributes.icon?(0,i.qy)(b||(b=$`<ha-icon .icon="${0}"></ha-icon>`),s.attributes.icon):(0,i.qy)(m||(m=$`<ha-svg-icon .path="${0}"></ha-svg-icon>`),H),(0,l.$O)(this.hass,e.stat_energy_from,null===(t=this.statsMetadata)||void 0===t?void 0:t[e.stat_energy_from]),this.hass.localize("ui.panel.config.energy.gas.edit_gas_source"),this._editSource,C,this.hass.localize("ui.panel.config.energy.gas.delete_gas_source"),this._deleteSource,w)}),H,this._addSource,M,this.hass.localize("ui.panel.config.energy.gas.add_gas_source"))}_addSource(){(0,u.yH)(this,{allowedGasUnitClass:(0,c._d)(this.preferences,void 0,this.statsMetadata),gas_sources:this.preferences.energy_sources.filter(e=>"gas"===e.type),saveCallback:async e=>{delete e.unit_of_measurement,await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.concat(e)}))}})}_editSource(e){var t;const s=e.currentTarget.closest(".row").source;(0,u.yH)(this,{source:Object.assign({},s),allowedGasUnitClass:(0,c._d)(this.preferences,s.stat_energy_from,this.statsMetadata),metadata:null===(t=this.statsMetadata)||void 0===t?void 0:t[s.stat_energy_from],gas_sources:this.preferences.energy_sources.filter(e=>"gas"===e.type),saveCallback:async e=>{await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(t=>t===s?e:t)}))}})}async _deleteSource(e){const t=e.currentTarget.closest(".row").source;if(await(0,h.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))try{await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.filter(e=>e!==t)}))}catch(s){(0,h.showAlertDialog)(this,{title:`Failed to save config: ${s.message}`})}}async _savePreferences(e){const t=await(0,c.WN)(this.hass,e);(0,r.r)(this,"value-changed",{value:t})}static get styles(){return[d.RF,p.X]}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],O.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],O.prototype,"preferences",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],O.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],O.prototype,"validationResult",void 0),O=(0,a.Cg)([(0,n.EM)("ha-energy-gas-settings")],O),t()}catch(f){t(f)}})},54081:function(e,t,s){s.a(e,async function(e,t){try{s(44114),s(72712),s(18111),s(22489),s(20116),s(61701),s(18237),s(3362),s(62953);var a=s(40445),i=s(96196),n=s(77845),r=s(1087),o=(s(76776),s(18350)),c=(s(26300),s(67094),s(77423)),l=s(38114),h=s(23528),d=s(77763),g=s(65063),u=s(14503),p=s(44144),_=s(36918),f=s(82105),y=(s(38940),s(6268)),v=e([o,h,l]);[o,h,l]=v.then?(await v)():v;let b,m,$,w,H,C,M,O,z,V,L,k,j,S=e=>e;const P="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",Z="M24 13L20 17V14H11V12H20V9L24 13M4 20V12H1L11 3L18 9.3V10H15.79L11 5.69L6 10.19V18H16V16H18V20H4Z",q="M15 13L11 17V14H2V12H11V9L15 13M5 20V16H7V18H17V10.19L12 5.69L7.21 10H4.22L12 3L22 12H19V20H5Z",x="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",T="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",F="M8.28,5.45L6.5,4.55L7.76,2H16.23L17.5,4.55L15.72,5.44L15,4H9L8.28,5.45M18.62,8H14.09L13.3,5H10.7L9.91,8H5.38L4.1,10.55L5.89,11.44L6.62,10H17.38L18.1,11.45L19.89,10.56L18.62,8M17.77,22H15.7L15.46,21.1L12,15.9L8.53,21.1L8.3,22H6.23L9.12,11H11.19L10.83,12.35L12,14.1L13.16,12.35L12.81,11H14.88L17.77,22M11.4,15L10.5,13.65L9.32,18.13L11.4,15M14.68,18.12L13.5,13.64L12.6,15L14.68,18.12Z";class E extends i.WF{firstUpdated(){this._fetchCO2SignalConfigEntries()}render(){var e,t,s,a;const n=this.preferences.energy_sources.findIndex(e=>"grid"===e.type);let r,o;return-1===n?r=(0,l.uh)():(r=this.preferences.energy_sources[n],this.validationResult&&(o=this.validationResult.energy_sources[n])),(0,i.qy)(b||(b=S` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${0}"></ha-svg-icon> ${0} </h1> <div class="card-content"> <p> ${0} <a target="_blank" rel="noopener noreferrer" href="${0}">${0}</a> </p> ${0} <h3> ${0} </h3> ${0} <div class="row border-bottom"> <ha-svg-icon .path="${0}"></ha-svg-icon> <ha-button appearance="filled" size="small" @click="${0}"> <ha-svg-icon .path="${0}" slot="start"></ha-svg-icon> ${0}</ha-button> </div> <h3> ${0} </h3> ${0} <div class="row border-bottom"> <ha-svg-icon .path="${0}"></ha-svg-icon> <ha-button @click="${0}" appearance="filled" size="small"> <ha-svg-icon .path="${0}" slot="start"></ha-svg-icon>${0}</ha-button> </div> <h3> ${0} </h3> ${0} <div class="row border-bottom"> <ha-svg-icon .path="${0}"></ha-svg-icon> <ha-button @click="${0}" appearance="filled" size="small"> <ha-svg-icon .path="${0}" slot="start"></ha-svg-icon>${0}</ha-button> </div> <h3> ${0} </h3> ${0} </div> </ha-card> `),F,this.hass.localize("ui.panel.config.energy.grid.title"),this.hass.localize("ui.panel.config.energy.grid.sub"),(0,_.o)(this.hass,"/docs/energy/electricity-grid/"),this.hass.localize("ui.panel.config.energy.grid.learn_more"),o?(0,i.qy)(m||(m=S` <ha-energy-validation-result .hass="${0}" .issues="${0}"></ha-energy-validation-result> `),this.hass,o):"",this.hass.localize("ui.panel.config.energy.grid.grid_consumption"),r.flow_from.map(e=>{var t;const s=this.hass.states[e.stat_energy_from];return(0,i.qy)($||($=S` <div class="row" .source="${0}"> ${0} <span class="content">${0}</span> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> </div> `),e,null!=s&&s.attributes.icon?(0,i.qy)(w||(w=S`<ha-icon .icon="${0}"></ha-icon>`),null==s?void 0:s.attributes.icon):(0,i.qy)(H||(H=S`<ha-svg-icon .path="${0}"></ha-svg-icon>`),q),(0,h.$O)(this.hass,e.stat_energy_from,null===(t=this.statsMetadata)||void 0===t?void 0:t[e.stat_energy_from]),this.hass.localize("ui.panel.config.energy.grid.edit_consumption"),this._editFromSource,x,this.hass.localize("ui.panel.config.energy.grid.delete_consumption"),this._deleteFromSource,P)}),q,this._addFromSource,T,this.hass.localize("ui.panel.config.energy.grid.add_consumption"),this.hass.localize("ui.panel.config.energy.grid.return_to_grid"),r.flow_to.map(e=>{var t;const s=this.hass.states[e.stat_energy_to];return(0,i.qy)(C||(C=S` <div class="row" .source="${0}"> ${0} <span class="content">${0}</span> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> </div> `),e,null!=s&&s.attributes.icon?(0,i.qy)(M||(M=S`<ha-icon .icon="${0}"></ha-icon>`),s.attributes.icon):(0,i.qy)(O||(O=S`<ha-svg-icon .path="${0}"></ha-svg-icon>`),Z),(0,h.$O)(this.hass,e.stat_energy_to,null===(t=this.statsMetadata)||void 0===t?void 0:t[e.stat_energy_to]),this.hass.localize("ui.panel.config.energy.grid.edit_return"),this._editToSource,x,this.hass.localize("ui.panel.config.energy.grid.delete_return"),this._deleteToSource,P)}),Z,this._addToSource,T,this.hass.localize("ui.panel.config.energy.grid.add_return"),this.hass.localize("ui.panel.config.energy.grid.grid_power"),null===(e=r.power)||void 0===e?void 0:e.map(e=>{var t;const s=this.hass.states[e.stat_rate];return(0,i.qy)(z||(z=S` <div class="row" .source="${0}"> ${0} <span class="content">${0}</span> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> </div> `),e,null!=s&&s.attributes.icon?(0,i.qy)(V||(V=S`<ha-icon .icon="${0}"></ha-icon>`),s.attributes.icon):(0,i.qy)(L||(L=S`<ha-svg-icon .path="${0}"></ha-svg-icon>`),F),(0,h.$O)(this.hass,e.stat_rate,null===(t=this.statsMetadata)||void 0===t?void 0:t[e.stat_rate]),this.hass.localize("ui.panel.config.energy.grid.edit_power"),this._editPowerSource,x,this.hass.localize("ui.panel.config.energy.grid.delete_power"),this._deletePowerSource,P)}),F,this._addPowerSource,T,this.hass.localize("ui.panel.config.energy.grid.add_power"),this.hass.localize("ui.panel.config.energy.grid.grid_carbon_footprint"),this._co2ConfigEntry?(0,i.qy)(k||(k=S`<div class="row" .entry="${0}"> <img alt="" crossorigin="anonymous" referrerpolicy="no-referrer" src="${0}"> <span class="content">${0}</span> <a href="${0}"> <ha-icon-button .path="${0}"></ha-icon-button> </a> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> </div>`),this._co2ConfigEntry,(0,p.MR)({domain:"co2signal",type:"icon",darkOptimized:null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode}),this._co2ConfigEntry.title,`/config/integrations/integration/${null===(s=this._co2ConfigEntry)||void 0===s?void 0:s.domain}`,x,this.hass.localize("ui.panel.config.energy.grid.remove_co2_signal"),this._removeCO2Sensor,P):(0,i.qy)(j||(j=S` <div class="row border-bottom"> <img alt="" crossorigin="anonymous" referrerpolicy="no-referrer" src="${0}"> <ha-button @click="${0}" appearance="filled" size="small"> <ha-svg-icon .path="${0}" slot="start"></ha-svg-icon> ${0} </ha-button> </div> `),(0,p.MR)({domain:"co2signal",type:"icon",darkOptimized:null===(a=this.hass.themes)||void 0===a?void 0:a.darkMode}),this._addCO2Sensor,T,this.hass.localize("ui.panel.config.energy.grid.add_co2_signal")))}async _fetchCO2SignalConfigEntries(){const e=await(0,c.VN)(this.hass,{domain:"co2signal"});this._co2ConfigEntry=e.length?e[0]:void 0}_addCO2Sensor(){(0,d.W)(this,{startFlowHandler:"co2signal",dialogClosedCallback:()=>{this._fetchCO2SignalConfigEntries()}})}async _removeCO2Sensor(e){const t=e.currentTarget.closest(".row").entry.entry_id;await(0,g.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_integration")})&&(await(0,c.eM)(this.hass,t),this._fetchCO2SignalConfigEntries())}_addFromSource(){const e=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,f.xu)(this,{grid_source:e,saveCallback:async t=>{let s;s=e?Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(s=>"grid"===s.type?Object.assign(Object.assign({},s),{},{flow_from:[...e.flow_from,t]}):s)}):Object.assign(Object.assign({},this.preferences),{},{energy_sources:[...this.preferences.energy_sources,Object.assign(Object.assign({},(0,l.uh)()),{},{flow_from:[t]})]}),await this._savePreferences(s)}})}_addToSource(){const e=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,f.An)(this,{grid_source:e,saveCallback:async t=>{let s;s=e?Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(s=>"grid"===s.type?Object.assign(Object.assign({},s),{},{flow_to:[...e.flow_to,t]}):s)}):Object.assign(Object.assign({},this.preferences),{},{energy_sources:[...this.preferences.energy_sources,Object.assign(Object.assign({},(0,l.uh)()),{},{flow_to:[t]})]}),await this._savePreferences(s)}})}_editFromSource(e){var t;const s=e.currentTarget.closest(".row").source,a=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,f.xu)(this,{source:Object.assign({},s),grid_source:a,metadata:null===(t=this.statsMetadata)||void 0===t?void 0:t[s.stat_energy_from],saveCallback:async e=>{const t=(0,l.E$)(this.preferences).grid[0].flow_from,a=Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(a=>"grid"===a.type?Object.assign(Object.assign({},a),{},{flow_from:t.map(t=>t===s?e:t)}):a)});await this._savePreferences(a)}})}_editToSource(e){var t;const s=e.currentTarget.closest(".row").source,a=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,f.An)(this,{source:Object.assign({},s),grid_source:a,metadata:null===(t=this.statsMetadata)||void 0===t?void 0:t[s.stat_energy_to],saveCallback:async e=>{const t=(0,l.E$)(this.preferences).grid[0].flow_to,a=Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(a=>"grid"===a.type?Object.assign(Object.assign({},a),{},{flow_to:t.map(t=>t===s?e:t)}):a)});await this._savePreferences(a)}})}async _deleteFromSource(e){const t=e.currentTarget.closest(".row").source;if(!(await(0,g.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")})))return;const s=(0,l.E$)(this.preferences).grid[0].flow_from.filter(e=>e!==t),a=Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(e=>"grid"===e.type?Object.assign(Object.assign({},e),{},{flow_from:s}):e)}),i=this._removeEmptySources(a);await this._savePreferences(i)}async _deleteToSource(e){const t=e.currentTarget.closest(".row").source;if(!(await(0,g.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")})))return;const s=(0,l.E$)(this.preferences).grid[0].flow_to.filter(e=>e!==t),a=Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(e=>"grid"===e.type?Object.assign(Object.assign({},e),{},{flow_to:s}):e)}),i=this._removeEmptySources(a);await this._savePreferences(i)}_addPowerSource(){const e=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,f._V)(this,{grid_source:e,saveCallback:async t=>{let s;s=e?Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(s=>"grid"===s.type?Object.assign(Object.assign({},s),{},{power:[...e.power||[],t]}):s)}):Object.assign(Object.assign({},this.preferences),{},{energy_sources:[...this.preferences.energy_sources,Object.assign(Object.assign({},(0,l.uh)()),{},{power:[t]})]}),await this._savePreferences(s)}})}_editPowerSource(e){const t=e.currentTarget.closest(".row").source,s=this.preferences.energy_sources.find(e=>"grid"===e.type);(0,f._V)(this,{source:Object.assign({},t),grid_source:s,saveCallback:async e=>{const s=(0,l.E$)(this.preferences).grid[0].power||[],a=Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(a=>"grid"===a.type?Object.assign(Object.assign({},a),{},{power:s.map(s=>s===t?e:s)}):a)});await this._savePreferences(a)}})}async _deletePowerSource(e){var t;const s=e.currentTarget.closest(".row").source;if(!(await(0,g.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")})))return;const a=(null===(t=(0,l.E$)(this.preferences).grid[0].power)||void 0===t?void 0:t.filter(e=>e!==s))||[],i=Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(e=>"grid"===e.type?Object.assign(Object.assign({},e),{},{power:a}):e)}),n=this._removeEmptySources(i);await this._savePreferences(n)}_removeEmptySources(e){return e.energy_sources=e.energy_sources.reduce((e,t)=>(("grid"!==t.type||t.flow_from.length>0||t.flow_to.length>0||t.power&&t.power.length>0)&&e.push(t),e),[]),e}async _savePreferences(e){try{const t=await(0,l.WN)(this.hass,e);(0,r.r)(this,"value-changed",{value:t})}catch(t){(0,g.showAlertDialog)(this,{title:`Failed to save config: ${t.message}`})}}static get styles(){return[u.RF,y.X]}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],E.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],E.prototype,"preferences",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],E.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],E.prototype,"validationResult",void 0),(0,a.Cg)([(0,n.wk)()],E.prototype,"_co2ConfigEntry",void 0),E=(0,a.Cg)([(0,n.EM)("ha-energy-grid-settings")],E),t()}catch(b){t(b)}})},38726:function(e,t,s){s.a(e,async function(e,t){try{s(44114),s(18111),s(22489),s(7588),s(61701),s(3362);var a=s(40445),i=s(96196),n=s(77845),r=s(1087),o=(s(76776),s(18350)),c=(s(26300),s(38114)),l=s(23528),h=s(65063),d=s(14503),g=s(36918),u=s(82105),p=(s(38940),s(6268)),_=e([o,l,c]);[o,l,c]=_.then?(await _)():_;let f,y,v,b,m,$,w,H=e=>e;const C="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",M="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",O="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",z="M11.45,2V5.55L15,3.77L11.45,2M10.45,8L8,10.46L11.75,11.71L10.45,8M2,11.45L3.77,15L5.55,11.45H2M10,2H2V10C2.57,10.17 3.17,10.25 3.77,10.25C7.35,10.26 10.26,7.35 10.27,3.75C10.26,3.16 10.17,2.57 10,2M17,22V16H14L19,7V13H22L17,22Z";class V extends i.WF{render(){const e=[],t=[];return this.preferences.energy_sources.forEach((s,a)=>{"solar"===s.type&&(e.push(s),this.validationResult&&t.push(this.validationResult.energy_sources[a]))}),(0,i.qy)(f||(f=H` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${0}"></ha-svg-icon> ${0} </h1> <div class="card-content"> <p> ${0} <a target="_blank" rel="noopener noreferrer" href="${0}">${0}</a> </p> ${0} <h3> ${0} </h3> ${0} ${0} </div> </ha-card> `),z,this.hass.localize("ui.panel.config.energy.solar.title"),this.hass.localize("ui.panel.config.energy.solar.sub"),(0,g.o)(this.hass,"/docs/energy/solar-panels/"),this.hass.localize("ui.panel.config.energy.solar.learn_more"),t.map(e=>(0,i.qy)(y||(y=H` <ha-energy-validation-result .hass="${0}" .issues="${0}"></ha-energy-validation-result> `),this.hass,e)),this.hass.localize("ui.panel.config.energy.solar.solar_production"),e.map(e=>{var t;const s=this.hass.states[e.stat_energy_from];return(0,i.qy)(v||(v=H` <div class="row" .source="${0}"> ${0} <span class="content">${0}</span> ${0} <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> </div> `),e,null!=s&&s.attributes.icon?(0,i.qy)(b||(b=H`<ha-icon .icon="${0}"></ha-icon>`),s.attributes.icon):(0,i.qy)(m||(m=H`<ha-svg-icon .path="${0}"></ha-svg-icon>`),z),(0,l.$O)(this.hass,e.stat_energy_from,null===(t=this.statsMetadata)||void 0===t?void 0:t[e.stat_energy_from]),this.info?(0,i.qy)($||($=H` <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> `),this.hass.localize("ui.panel.config.energy.solar.edit_solar_production"),this._editSource,M):"",this.hass.localize("ui.panel.config.energy.solar.delete_solar_production"),this._deleteSource,C)}),this.info?(0,i.qy)(w||(w=H` <div class="row border-bottom"> <ha-svg-icon .path="${0}"></ha-svg-icon> <ha-button @click="${0}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${0}"></ha-svg-icon> ${0} </ha-button> </div> `),z,this._addSource,O,this.hass.localize("ui.panel.config.energy.solar.add_solar_production")):"")}_addSource(){(0,u.se)(this,{info:this.info,solar_sources:this.preferences.energy_sources.filter(e=>"solar"===e.type),saveCallback:async e=>{await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.concat(e)}))}})}_editSource(e){const t=e.currentTarget.closest(".row").source;(0,u.se)(this,{info:this.info,source:Object.assign({},t),solar_sources:this.preferences.energy_sources.filter(e=>"solar"===e.type),saveCallback:async e=>{await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(s=>s===t?e:s)}))}})}async _deleteSource(e){const t=e.currentTarget.closest(".row").source;if(await(0,h.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))try{await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.filter(e=>e!==t)}))}catch(s){(0,h.showAlertDialog)(this,{title:`Failed to save config: ${s.message}`})}}async _savePreferences(e){const t=await(0,c.WN)(this.hass,e);(0,r.r)(this,"value-changed",{value:t})}static get styles(){return[d.RF,p.X]}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],V.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],V.prototype,"preferences",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],V.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],V.prototype,"validationResult",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],V.prototype,"info",void 0),V=(0,a.Cg)([(0,n.EM)("ha-energy-solar-settings")],V),t()}catch(f){t(f)}})},38940:function(e,t,s){s(18111),s(61701),s(62953);var a=s(40445),i=s(96196),n=s(77845),r=(s(38962),s(36918));let o,c,l,h,d,g=e=>e;class u extends i.WF{render(){return 0===this.issues.length?i.s6:this.issues.map(e=>(0,i.qy)(o||(o=g` <ha-alert alert-type="warning" .title="${0}"> ${0} ${0} <ul> ${0} </ul> </ha-alert> `),this.hass.localize(`component.energy.issues.${e.type}.title`)||e.type,this.hass.localize(`component.energy.issues.${e.type}.description`,e.translation_placeholders),"recorder_untracked"===e.type?(0,i.qy)(c||(c=g`(<a href="${0}" target="_blank" rel="noopener noreferrer">${0}</a>)`),(0,r.o)(this.hass,"/integrations/recorder#configure-filter"),this.hass.localize("ui.panel.config.common.learn_more")):"",e.affected_entities.map(([e,t])=>(0,i.qy)(l||(l=g`<li>${0}${0}</li>`),e,t?(0,i.qy)(h||(h=g` (${0})`),t):""))))}}u.styles=(0,i.AH)(d||(d=g`ul{padding-left:24px;padding-inline-start:24px padding-inline-end: initial;margin:4px 0}a{color:var(--primary-color)}`)),(0,a.Cg)([(0,n.MZ)({attribute:!1})],u.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],u.prototype,"issues",void 0),u=(0,a.Cg)([(0,n.EM)("ha-energy-validation-result")],u)},70604:function(e,t,s){s.a(e,async function(e,t){try{s(44114),s(18111),s(22489),s(7588),s(61701),s(3362);var a=s(40445),i=s(96196),n=s(77845),r=s(1087),o=(s(76776),s(18350)),c=(s(26300),s(38114)),l=s(23528),h=s(65063),d=s(14503),g=s(36918),u=s(82105),p=(s(38940),s(6268)),_=e([o,l,c]);[o,l,c]=_.then?(await _)():_;let f,y,v,b,m,$=e=>e;const w="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",H="M12,20A6,6 0 0,1 6,14C6,10 12,3.25 12,3.25C12,3.25 18,10 18,14A6,6 0 0,1 12,20Z",C="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",M="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";class O extends i.WF{render(){const e=[],t=[];return this.preferences.energy_sources.forEach((s,a)=>{"water"===s.type&&(e.push(s),this.validationResult&&t.push(this.validationResult.energy_sources[a]))}),(0,i.qy)(f||(f=$` <ha-card outlined> <h1 class="card-header"> <ha-svg-icon .path="${0}"></ha-svg-icon> ${0} </h1> <div class="card-content"> <p> ${0} <a target="_blank" rel="noopener noreferrer" href="${0}">${0}</a> </p> ${0} <h3> ${0} </h3> ${0} <div class="row border-bottom"> <ha-svg-icon .path="${0}"></ha-svg-icon> <ha-button @click="${0}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>${0}</ha-button> </div> </div> </ha-card> `),H,this.hass.localize("ui.panel.config.energy.water.title"),this.hass.localize("ui.panel.config.energy.water.sub"),(0,g.o)(this.hass,"/docs/energy/water/"),this.hass.localize("ui.panel.config.energy.water.learn_more"),t.map(e=>(0,i.qy)(y||(y=$` <ha-energy-validation-result .hass="${0}" .issues="${0}"></ha-energy-validation-result> `),this.hass,e)),this.hass.localize("ui.panel.config.energy.water.water_consumption"),e.map(e=>{var t;const s=this.hass.states[e.stat_energy_from];return(0,i.qy)(v||(v=$` <div class="row" .source="${0}"> ${0} <span class="content">${0}</span> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> <ha-icon-button .label="${0}" @click="${0}" .path="${0}"></ha-icon-button> </div> `),e,null!=s&&s.attributes.icon?(0,i.qy)(b||(b=$`<ha-icon .icon="${0}"></ha-icon>`),s.attributes.icon):(0,i.qy)(m||(m=$`<ha-svg-icon .path="${0}"></ha-svg-icon>`),H),(0,l.$O)(this.hass,e.stat_energy_from,null===(t=this.statsMetadata)||void 0===t?void 0:t[e.stat_energy_from]),this.hass.localize("ui.panel.config.energy.water.edit_water_source"),this._editSource,C,this.hass.localize("ui.panel.config.energy.water.delete_water_source"),this._deleteSource,w)}),H,this._addSource,M,this.hass.localize("ui.panel.config.energy.water.add_water_source"))}_addSource(){(0,u.YX)(this,{water_sources:this.preferences.energy_sources.filter(e=>"water"===e.type),saveCallback:async e=>{delete e.unit_of_measurement,await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.concat(e)}))}})}_editSource(e){var t;const s=e.currentTarget.closest(".row").source;(0,u.YX)(this,{source:Object.assign({},s),metadata:null===(t=this.statsMetadata)||void 0===t?void 0:t[s.stat_energy_from],water_sources:this.preferences.energy_sources.filter(e=>"water"===e.type),saveCallback:async e=>{await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.map(t=>t===s?e:t)}))}})}async _deleteSource(e){const t=e.currentTarget.closest(".row").source;if(await(0,h.dk)(this,{title:this.hass.localize("ui.panel.config.energy.delete_source")}))try{await this._savePreferences(Object.assign(Object.assign({},this.preferences),{},{energy_sources:this.preferences.energy_sources.filter(e=>e!==t)}))}catch(s){(0,h.showAlertDialog)(this,{title:`Failed to save config: ${s.message}`})}}async _savePreferences(e){const t=await(0,c.WN)(this.hass,e);(0,r.r)(this,"value-changed",{value:t})}static get styles(){return[d.RF,p.X]}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],O.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],O.prototype,"preferences",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],O.prototype,"statsMetadata",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],O.prototype,"validationResult",void 0),O=(0,a.Cg)([(0,n.EM)("ha-energy-water-settings")],O),t()}catch(f){t(f)}})},6268:function(e,t,s){s.d(t,{X:function(){return i}});let a;const i=(0,s(96196).AH)(a||(a=(e=>e)`ha-card{height:100%}.card-header ha-svg-icon{height:32px;width:32px;margin-right:8px;margin-inline-end:8px;margin-inline-start:initial;direction:var(--direction)}h3{margin-top:24px;margin-bottom:4px}.row{display:flex;align-items:center;border-top:1px solid var(--divider-color);height:48px;box-sizing:border-box}.row ha-icon,.row ha-svg-icon,.row img{margin-right:16px;margin-inline-end:16px;margin-inline-start:initial;direction:var(--direction)}.row img{height:24px}.row .content{flex-grow:1;overflow:hidden;text-overflow:ellipsis}ha-icon-button{color:var(--secondary-text-color)}`))},82105:function(e,t,s){s.d(t,{An:function(){return h},D0:function(){return i},YA:function(){return d},YX:function(){return c},_V:function(){return g},m5:function(){return n},se:function(){return r},xu:function(){return l},yH:function(){return o}});s(3362),s(62953);var a=s(1087);const i=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-device-settings",dialogImport:()=>Promise.all([s.e("73126"),s.e("62066"),s.e("44533"),s.e("46095"),s.e("63768"),s.e("92769"),s.e("62453"),s.e("26767"),s.e("93785"),s.e("63577"),s.e("12036"),s.e("4939"),s.e("31150"),s.e("26233"),s.e("39005"),s.e("8851"),s.e("54884"),s.e("40243")]).then(s.bind(s,1419)),dialogParams:t})},n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-battery-settings",dialogImport:()=>Promise.all([s.e("73126"),s.e("62066"),s.e("44533"),s.e("46095"),s.e("63768"),s.e("92769"),s.e("62453"),s.e("93785"),s.e("12036"),s.e("4939"),s.e("48161"),s.e("26233"),s.e("39005"),s.e("8851"),s.e("54884"),s.e("3562")]).then(s.bind(s,5242)),dialogParams:t})},r=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-solar-settings",dialogImport:()=>Promise.all([s.e("73126"),s.e("62066"),s.e("44533"),s.e("46095"),s.e("63768"),s.e("92769"),s.e("62453"),s.e("93785"),s.e("12036"),s.e("8477"),s.e("4939"),s.e("70542"),s.e("26233"),s.e("39005"),s.e("8851"),s.e("54884"),s.e("28470")]).then(s.bind(s,94098)),dialogParams:t})},o=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-gas-settings",dialogImport:()=>Promise.all([s.e("73126"),s.e("62066"),s.e("44533"),s.e("46095"),s.e("63768"),s.e("92769"),s.e("62453"),s.e("93785"),s.e("12036"),s.e("89385"),s.e("4939"),s.e("76091"),s.e("26233"),s.e("39005"),s.e("8851"),s.e("54884"),s.e("92848")]).then(s.bind(s,16106)),dialogParams:t})},c=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-water-settings",dialogImport:()=>Promise.all([s.e("73126"),s.e("62066"),s.e("44533"),s.e("46095"),s.e("63768"),s.e("92769"),s.e("62453"),s.e("93785"),s.e("12036"),s.e("89385"),s.e("4939"),s.e("98472"),s.e("26233"),s.e("39005"),s.e("8851"),s.e("54884"),s.e("21702")]).then(s.bind(s,86240)),dialogParams:t})},l=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-grid-flow-settings",dialogImport:()=>Promise.all([s.e("73126"),s.e("62066"),s.e("44533"),s.e("46095"),s.e("63768"),s.e("92769"),s.e("62453"),s.e("93785"),s.e("12036"),s.e("89385"),s.e("4939"),s.e("31329"),s.e("26233"),s.e("39005"),s.e("8851"),s.e("54884"),s.e("10714")]).then(s.bind(s,61112)),dialogParams:Object.assign(Object.assign({},t),{},{direction:"from"})})},h=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-grid-flow-settings",dialogImport:()=>Promise.all([s.e("73126"),s.e("62066"),s.e("44533"),s.e("46095"),s.e("63768"),s.e("92769"),s.e("62453"),s.e("93785"),s.e("12036"),s.e("89385"),s.e("4939"),s.e("31329"),s.e("26233"),s.e("39005"),s.e("8851"),s.e("54884"),s.e("10714")]).then(s.bind(s,61112)),dialogParams:Object.assign(Object.assign({},t),{},{direction:"to"})})},d=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-device-settings-water",dialogImport:()=>Promise.all([s.e("73126"),s.e("62066"),s.e("44533"),s.e("46095"),s.e("63768"),s.e("92769"),s.e("62453"),s.e("26767"),s.e("93785"),s.e("63577"),s.e("12036"),s.e("4939"),s.e("8769"),s.e("26233"),s.e("39005"),s.e("8851"),s.e("54884"),s.e("67409")]).then(s.bind(s,68937)),dialogParams:t})},g=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-energy-grid-power-settings",dialogImport:()=>Promise.all([s.e("73126"),s.e("62066"),s.e("44533"),s.e("46095"),s.e("63768"),s.e("92769"),s.e("62453"),s.e("93785"),s.e("12036"),s.e("4939"),s.e("92923"),s.e("26233"),s.e("39005"),s.e("8851"),s.e("54884"),s.e("13887")]).then(s.bind(s,72473)),dialogParams:t})}}}]);
//# sourceMappingURL=71380.cff83e80eeda39ed.js.map