/*! For license information please see 81704.68bd02ebd0b411a2.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["81704"],{86233:function(e,t,n){function a(e,t){if(e.closest)return e.closest(t);for(var n=e;n;){if(r(n,t))return n;n=n.parentElement}return null}function r(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}n.d(t,{cK:function(){return r},kp:function(){return a}})},34271:function(e,t,n){n.d(t,{A:function(){return a}});n(18111),n(7588),n(61701);function a(e){if(!e||"object"!=typeof e)return e;if("[object Date]"==Object.prototype.toString.call(e))return new Date(e.getTime());if(Array.isArray(e))return e.map(a);var t={};return Object.keys(e).forEach(function(n){t[n]=a(e[n])}),t}},90322:function(e,t,n){n.a(e,async function(e,a){try{n.r(t),n.d(t,{ZHAAddGroupPage:function(){return g}});n(18111),n(61701),n(3362),n(62953);var r=n(40445),i=n(96196),o=n(77845),s=n(91926),c=n(18350),u=n(84621),l=(n(81310),n(20820),n(75709),n(10879),e([c]));c=(l.then?(await l)():l)[0];let h,d,p=e=>e;class g extends i.WF{connectedCallback(){super.connectedCallback(),this.hass&&this._firstUpdatedCalled&&this._fetchData()}firstUpdated(e){super.firstUpdated(e),this.hass&&this._fetchData(),this._firstUpdatedCalled=!0}render(){return(0,i.qy)(h||(h=p` <hass-subpage .hass="${0}" .narrow="${0}" .header="${0}"> <ha-config-section .isWide="${0}"> <p slot="introduction"> ${0} </p> <ha-textfield type="string" .value="${0}" @change="${0}" .placeholder="${0}"></ha-textfield> <ha-textfield type="number" .value="${0}" @change="${0}" .placeholder="${0}"></ha-textfield> <div class="header"> ${0} </div> <zha-device-endpoint-data-table .hass="${0}" .deviceEndpoints="${0}" .narrow="${0}" selectable @selection-changed="${0}"> </zha-device-endpoint-data-table> <div class="buttons"> <ha-button .disabled="${0}" @click="${0}" class="button" .loading="${0}"> ${0}</ha-button> </div> </ha-config-section> </hass-subpage> `),this.hass,this.narrow,this.hass.localize("ui.panel.config.zha.groups.create_group"),!this.narrow,this.hass.localize("ui.panel.config.zha.groups.create_group_details"),this._groupName,this._handleNameChange,this.hass.localize("ui.panel.config.zha.groups.group_name_placeholder"),this._groupId,this._handleGroupIdChange,this.hass.localize("ui.panel.config.zha.groups.group_id_placeholder"),this.hass.localize("ui.panel.config.zha.groups.add_members"),this.hass,this.deviceEndpoints,this.narrow,this._handleAddSelectionChanged,!this._groupName||""===this._groupName||this._processingAdd,this._createGroup,this._processingAdd,this.hass.localize("ui.panel.config.zha.groups.create"))}async _fetchData(){this.deviceEndpoints=await(0,u.zt)(this.hass)}_handleAddSelectionChanged(e){this._selectedDevicesToAdd=e.detail.value}async _createGroup(){this._processingAdd=!0;const e=this._selectedDevicesToAdd.map(e=>{const t=e.split("_");return{ieee:t[0],endpoint_id:t[1]}}),t=this._groupId?parseInt(this._groupId,10):void 0,n=await(0,u.$)(this.hass,this._groupName,t,e);this._selectedDevicesToAdd=[],this._processingAdd=!1,this._groupName="",this._zhaDevicesDataTable.clearSelection(),(0,s.o)(`/config/zha/group/${n.group_id}`,{replace:!0})}_handleGroupIdChange(e){this._groupId=e.target.value}_handleNameChange(e){this._groupName=e.target.value||""}static get styles(){return[(0,i.AH)(d||(d=p`.header{font-family:var(--ha-font-family-body);-webkit-font-smoothing:var(--ha-font-smoothing);-moz-osx-font-smoothing:var(--ha-moz-osx-font-smoothing);font-size:var(--ha-font-size-4xl);font-weight:var(--ha-font-weight-normal);line-height:var(--ha-line-height-condensed);opacity:var(--dark-primary-opacity)}.button{float:right}ha-config-section :last-child{padding-bottom:24px}.buttons{align-items:flex-end;padding:16px}.buttons .warning{--mdc-theme-primary:var(--error-color)}`))]}constructor(...e){super(...e),this.narrow=!1,this.deviceEndpoints=[],this._processingAdd=!1,this._groupName="",this._firstUpdatedCalled=!1,this._selectedDevicesToAdd=[]}}(0,r.Cg)([(0,o.MZ)({attribute:!1})],g.prototype,"hass",void 0),(0,r.Cg)([(0,o.MZ)({type:Boolean})],g.prototype,"narrow",void 0),(0,r.Cg)([(0,o.MZ)({attribute:!1,type:Array})],g.prototype,"deviceEndpoints",void 0),(0,r.Cg)([(0,o.wk)()],g.prototype,"_processingAdd",void 0),(0,r.Cg)([(0,o.wk)()],g.prototype,"_groupName",void 0),(0,r.Cg)([(0,o.wk)()],g.prototype,"_groupId",void 0),(0,r.Cg)([(0,o.P)("zha-device-endpoint-data-table",!0)],g.prototype,"_zhaDevicesDataTable",void 0),g=(0,r.Cg)([(0,o.EM)("zha-add-group-page")],g),a()}catch(h){a(h)}})},35370:function(e,t,n){var a=n(26198);e.exports=function(e,t,n){for(var r=0,i=arguments.length>2?n:a(t),o=new e(i);i>r;)o[r]=t[r++];return o}},77957:function(e,t,n){var a=n(76080),r=n(79504),i=n(47055),o=n(48981),s=n(56969),c=n(26198),u=n(2360),l=n(35370),h=Array,d=r([].push);e.exports=function(e,t,n,r){for(var p,g,f,m=o(e),v=i(m),y=a(t,n),b=u(null),_=c(v),w=0;_>w;w++)f=v[w],(g=s(y(f,w,m)))in b?d(b[g],f):b[g]=[f];if(r&&(p=r(m))!==h)for(g in b)b[g]=l(p,b[g]);return b}},46058:function(e,t,n){var a=n(46518),r=n(77957),i=n(6469);a({target:"Array",proto:!0},{group:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i("group")},2209:function(e,t,n){n.d(t,{LV:function(){return d}});n(89463),n(16280),n(72712),n(55081),n(18111),n(61701),n(18237),n(3362),n(84864),n(57465),n(27495),n(62953);const a=Symbol("Comlink.proxy"),r=Symbol("Comlink.endpoint"),i=Symbol("Comlink.releaseProxy"),o=Symbol("Comlink.finalizer"),s=Symbol("Comlink.thrown"),c=e=>"object"==typeof e&&null!==e||"function"==typeof e,u=new Map([["proxy",{canHandle:e=>c(e)&&e[a],serialize(e){const{port1:t,port2:n}=new MessageChannel;return l(e,t),[n,[n]]},deserialize(e){return e.start(),d(e)}}],["throw",{canHandle:e=>c(e)&&s in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function l(e,t=globalThis,n=["*"]){t.addEventListener("message",function r(i){if(!i||!i.data)return;if(!function(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(n,i.origin))return void console.warn(`Invalid origin '${i.origin}' for comlink proxy`);const{id:c,type:u,path:d}=Object.assign({path:[]},i.data),p=(i.data.argumentList||[]).map(w);let g;try{const t=d.slice(0,-1).reduce((e,t)=>e[t],e),n=d.reduce((e,t)=>e[t],e);switch(u){case"GET":g=n;break;case"SET":t[d.slice(-1)[0]]=w(i.data.value),g=!0;break;case"APPLY":g=n.apply(t,p);break;case"CONSTRUCT":g=function(e){return Object.assign(e,{[a]:!0})}(new n(...p));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;l(e,n),g=function(e,t){return b.set(e,t),e}(t,[t])}break;case"RELEASE":g=void 0;break;default:return}}catch(f){g={value:f,[s]:0}}Promise.resolve(g).catch(e=>({value:e,[s]:0})).then(n=>{const[a,i]=_(n);t.postMessage(Object.assign(Object.assign({},a),{id:c}),i),"RELEASE"===u&&(t.removeEventListener("message",r),h(t),o in e&&"function"==typeof e[o]&&e[o]())}).catch(e=>{const[n,a]=_({value:new TypeError("Unserializable return value"),[s]:0});t.postMessage(Object.assign(Object.assign({},n),{id:c}),a)})}),t.start&&t.start()}function h(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function d(e,t){const n=new Map;return e.addEventListener("message",function(e){const{data:t}=e;if(!t||!t.id)return;const a=n.get(t.id);if(a)try{a(t)}finally{n.delete(t.id)}}),v(e,n,[],t)}function p(e){if(e)throw new Error("Proxy has been released and is not useable")}function g(e){return E(e,new Map,{type:"RELEASE"}).then(()=>{h(e)})}const f=new WeakMap,m="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const t=(f.get(e)||0)-1;f.set(e,t),0===t&&g(e)});function v(e,t,n=[],a=function(){}){let o=!1;const s=new Proxy(a,{get(a,r){if(p(o),r===i)return()=>{!function(e){m&&m.unregister(e)}(s),g(e),t.clear(),o=!0};if("then"===r){if(0===n.length)return{then:()=>s};const a=E(e,t,{type:"GET",path:n.map(e=>e.toString())}).then(w);return a.then.bind(a)}return v(e,t,[...n,r])},set(a,r,i){p(o);const[s,c]=_(i);return E(e,t,{type:"SET",path:[...n,r].map(e=>e.toString()),value:s},c).then(w)},apply(a,i,s){p(o);const c=n[n.length-1];if(c===r)return E(e,t,{type:"ENDPOINT"}).then(w);if("bind"===c)return v(e,t,n.slice(0,-1));const[u,l]=y(s);return E(e,t,{type:"APPLY",path:n.map(e=>e.toString()),argumentList:u},l).then(w)},construct(a,r){p(o);const[i,s]=y(r);return E(e,t,{type:"CONSTRUCT",path:n.map(e=>e.toString()),argumentList:i},s).then(w)}});return function(e,t){const n=(f.get(t)||0)+1;f.set(t,n),m&&m.register(e,t,e)}(s,e),s}function y(e){const t=e.map(_);return[t.map(e=>e[0]),(n=t.map(e=>e[1]),Array.prototype.concat.apply([],n))];var n}const b=new WeakMap;function _(e){for(const[t,n]of u)if(n.canHandle(e)){const[a,r]=n.serialize(e);return[{type:"HANDLER",name:t,value:a},r]}return[{type:"RAW",value:e},b.get(e)||[]]}function w(e){switch(e.type){case"HANDLER":return u.get(e.name).deserialize(e.value);case"RAW":return e.value}}function E(e,t,n,a){return new Promise(r=>{const i=new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");t.set(i,r),e.start&&e.start(),e.postMessage(Object.assign({id:i},n),a)})}},54495:function(e,t,n){n.d(t,{OA:function(){return a.OA},WL:function(){return a.WL},u$:function(){return a.u$}});var a=n(42017)},6415:function(e,t,n){n.d(t,{W:function(){return a.W}});var a=n(64913)}}]);
//# sourceMappingURL=81704.68bd02ebd0b411a2.js.map