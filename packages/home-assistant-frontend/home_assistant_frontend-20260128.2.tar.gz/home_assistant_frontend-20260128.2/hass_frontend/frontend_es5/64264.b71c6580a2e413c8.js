"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["64264"],{24790:function(t,n,e){e.d(n,{F:function(){return r},r:function(){return o}});e(18111),e(13579),e(27495);const i=/{%|{{/,r=t=>i.test(t),o=t=>{if(!t)return!1;if("string"==typeof t)return r(t);if("object"==typeof t){return(Array.isArray(t)?t:Object.values(t)).some(t=>t&&o(t))}return!1}},88249:function(t,n,e){e.d(n,{$W:function(){return v},Dp:function(){return W},Dt:function(){return l},EC:function(){return a},G3:function(){return C},HB:function(){return m},KH:function(){return E},Q:function(){return d},S9:function(){return R},VH:function(){return f},XF:function(){return g},aI:function(){return A},b1:function(){return h},bV:function(){return u},fo:function(){return Y},lB:function(){return _},lg:function(){return p},mX:function(){return S},oj:function(){return b},rY:function(){return k},vH:function(){return O},vO:function(){return q}});e(44114),e(18111),e(7588),e(61701),e(62953);var i=e(44537),r=e(91926),o=e(6030),s=e(87225),c=e(84025);const a="single",u=10,f="__DYNAMIC__",d=t=>null==t?void 0:t.startsWith(f),l=t=>t.substring(f.length),g=t=>{if("condition"in t&&Array.isArray(t.condition))return{condition:"and",conditions:t.condition};for(const n of s.I8)if(n in t)return{condition:n,conditions:t[n]};return t},_=(t,n)=>{t.callService("automation","trigger",{entity_id:n,skip_condition:!0})},p=(t,n)=>t.callApi("DELETE",`config/automation/config/${n}`);let y;const b=(t,n)=>t.callApi("GET",`config/automation/config/${n}`),v=(t,n)=>t.callWS({type:"automation/config",entity_id:n}),h=(t,n,e)=>t.callApi("POST",`config/automation/config/${n}`,e),m=t=>{t=j(t);for(const n of["triggers","conditions","actions"]){const e=t[n];e&&!Array.isArray(e)&&(t[n]=[e])}return t},j=t=>("trigger"in t&&("triggers"in t||(t.triggers=t.trigger),delete t.trigger),"condition"in t&&("conditions"in t||(t.conditions=t.condition),delete t.condition),"action"in t&&("actions"in t||(t.actions=t.action),delete t.action),t.triggers&&(t.triggers=q(t.triggers)),t.actions&&(t.actions=(0,c.Rn)(t.actions)),t),q=t=>t?Array.isArray(t)?t.map(q):("triggers"in t&&t.triggers&&(t.triggers=q(t.triggers)),"platform"in t&&("trigger"in t||(t.trigger=t.platform),delete t.platform),t):t,A=t=>{if(!t)return[];const n=[];return(0,i.e)(t).forEach(t=>{"triggers"in t?t.triggers&&n.push(...A(t.triggers)):n.push(t)}),n},S=(t,n)=>{y=t;const e=n?`?${(0,o.KH)({expanded:"1"})}`:"";(0,r.o)(`/config/automation/edit/new${e}`)},O=t=>{S(Object.assign(Object.assign({},t),{},{id:void 0,alias:void 0}))},k=()=>{const t=y;return y=void 0,t},Y=t=>{if(!t||"object"!=typeof t)return!1;const n=t;return"trigger"in n&&"string"==typeof n.trigger||"platform"in n&&"string"==typeof n.platform},C=t=>{if(!t||"object"!=typeof t)return!1;return"condition"in t&&"string"==typeof t.condition},E=t=>{if(!t||"object"!=typeof t)return!1;return"field"in t&&"object"==typeof t.field},W=(t,n,e,i)=>t.connection.subscribeMessage(n,{type:"subscribe_trigger",trigger:e,variables:i}),R=(t,n,e)=>t.callWS({type:"test_condition",condition:n,variables:e})},59241:function(t,n,e){e.d(n,{BM:function(){return S},Bz:function(){return m},DW:function(){return d},Er:function(){return f},G3:function(){return _},G_:function(){return p},Ox:function(){return q},P9:function(){return A},RP:function(){return v},bg:function(){return y},jh:function(){return l},n4:function(){return j},v:function(){return g}});e(74423),e(26910),e(18111),e(22489),e(20116),e(62953);var i=e(70570),r=e(22786),o=e(71727),s=e(28978),c=e(52220),a=e(9899);const u=["sensor","binary_sensor"],f=(t,n)=>{const e=n.filter(n=>t.states[n.entity_id]&&"battery"===t.states[n.entity_id].attributes.device_class&&u.includes((0,o.m)(n.entity_id))).sort((t,n)=>u.indexOf((0,o.m)(t.entity_id))-u.indexOf((0,o.m)(n.entity_id)));if(e.length>0)return e[0]},d=(t,n)=>n.find(n=>t.states[n.entity_id]&&"battery_charging"===t.states[n.entity_id].attributes.device_class),l=(t,n)=>{if(n.name)return n.name;const e=t.states[n.entity_id];return e?(0,s.u)(e):n.original_name?n.original_name:n.entity_id},g=(t,n)=>t.callWS({type:"config/entity_registry/get",entity_id:n}),_=(t,n)=>t.callWS({type:"config/entity_registry/get_entries",entity_ids:n}),p=(t,n,e)=>t.callWS(Object.assign({type:"config/entity_registry/update",entity_id:n},e)),y=(t,n)=>t.callWS({type:"config/entity_registry/remove",entity_id:n}),b=t=>t.sendMessagePromise({type:"config/entity_registry/list"}),v=t=>t.sendMessagePromise({type:"config/entity_registry/list_for_display"}),h=(t,n)=>t.subscribeEvents((0,a.s)(()=>b(t).then(t=>n.setState(t,!0)),500,!0),"entity_registry_updated"),m=(t,n)=>(0,i.N)("_entityRegistry",b,h,t,n),j=(t,n)=>t.sort((t,e)=>(0,c.SH)(t.name||"",e.name||"",n)),q=(0,r.A)(t=>{const n={};for(const e of t)n[e.entity_id]=e;return n}),A=(0,r.A)(t=>{const n={};for(const e of t)n[e.id]=e;return n}),S=(t,n)=>t.callWS({type:"config/entity_registry/get_automatic_entity_ids",entity_ids:n})},95350:function(t,n,e){e.d(n,{$h:function(){return d},FP:function(){return p},Og:function(){return o},QC:function(){return f},QQ:function(){return c},S1:function(){return s},Ud:function(){return y},fK:function(){return u},nQ:function(){return g},p$:function(){return a}});var i=e(70570),r=e(9899);const o={bluetooth:"config/bluetooth",dhcp:"config/dhcp",matter:"config/matter",mqtt:"config/mqtt",ssdp:"config/ssdp",thread:"config/thread",zeroconf:"config/zeroconf",zha:"config/zha/dashboard",zwave_js:"config/zwave_js/dashboard"};var s=function(t){return t[t.CRITICAL=50]="CRITICAL",t[t.ERROR=40]="ERROR",t[t.WARNING=30]="WARNING",t[t.INFO=20]="INFO",t[t.DEBUG=10]="DEBUG",t[t.NOTSET=0]="NOTSET",t}({});const c=(t,n)=>n.issue_tracker||`https://github.com/home-assistant/core/issues?q=is%3Aissue+is%3Aopen+label%3A%22integration%3A+${t}%22`,a=(t,n,e)=>t(`component.${n}.title`)||(null==e?void 0:e.name)||n,u=(t,n)=>{const e={type:"manifest/list"};return n&&(e.integrations=n),t.callWS(e)},f=(t,n)=>t.callWS({type:"manifest/get",integration:n}),d=t=>t.callWS({type:"integration/setup_info"}),l=t=>t.sendMessagePromise({type:"logger/log_info"}),g=(t,n,e,i)=>t.callWS({type:"logger/integration_log_level",integration:n,level:e,persistence:i}),_=(t,n)=>t.subscribeEvents((0,r.s)(()=>l(t).then(t=>n.setState(t,!0)),200,!0),"logging_changed"),p=(t,n)=>(0,i.N)("_integration_log_info",l,_,t,n),y=(t,n)=>t.callWS({type:"integration/wait",domain:n})},84025:function(t,n,e){e.d(n,{AM:function(){return j},BD:function(){return _},FN:function(){return f},GA:function(){return k},Ht:function(){return b},Iq:function(){return d},Kq:function(){return h},NX:function(){return q},Q2:function(){return y},R$:function(){return m},Rn:function(){return C},TP:function(){return O},dW:function(){return g},kR:function(){return p},nB:function(){return E},pq:function(){return A},sW:function(){return Y},ve:function(){return S}});e(18111),e(81148),e(61701),e(13579),e(62953);var i=e(63533),r=e(23832),o=e(68246),s=e(91926),c=e(24790),a=e(6030),u=e(88249);const f=["single","restart","queued","parallel"],d=(0,r.g)(["queued","parallel"]),l=(0,i.Ik)({alias:(0,i.lq)((0,i.Yj)()),continue_on_error:(0,i.lq)((0,i.zM)()),enabled:(0,i.lq)((0,i.zM)())}),g=(0,i.Ik)({entity_id:(0,i.lq)((0,i.KC)([(0,i.Yj)(),(0,i.YO)((0,i.Yj)())])),device_id:(0,i.lq)((0,i.KC)([(0,i.Yj)(),(0,i.YO)((0,i.Yj)())])),area_id:(0,i.lq)((0,i.KC)([(0,i.Yj)(),(0,i.YO)((0,i.Yj)())])),floor_id:(0,i.lq)((0,i.KC)([(0,i.Yj)(),(0,i.YO)((0,i.Yj)())])),label_id:(0,i.lq)((0,i.KC)([(0,i.Yj)(),(0,i.YO)((0,i.Yj)())]))}),_=(0,i.kp)(l,(0,i.Ik)({action:(0,i.lq)((0,i.Yj)()),service_template:(0,i.lq)((0,i.Yj)()),entity_id:(0,i.lq)((0,i.Yj)()),target:(0,i.lq)((0,i.KC)([g,(0,i.YP)((0,i.Yj)(),"has_template",t=>(0,c.r)(t))])),data:(0,i.lq)((0,i.Ik)()),response_variable:(0,i.lq)((0,i.Yj)()),metadata:(0,i.lq)((0,i.Ik)())})),p=(t,n,e)=>t.callService("script",n,e),y=t=>"off"===t.state||!!("on"===t.state&&d(t.attributes.mode)&&t.attributes.current<t.attributes.max),b=(t,n)=>t.callApi("DELETE",`config/script/config/${n}`);let v;const h=(t,n)=>t.callApi("GET",`config/script/config/${n}`),m=(t,n)=>t.callWS({type:"script/config",entity_id:n}),j=(t,n)=>{v=t;const e=n?`?${(0,a.KH)({expanded:"1"})}`:"";(0,s.o)(`/config/script/edit/new${e}`)},q=()=>{const t=v;return v=void 0,t},A=t=>"string"==typeof t&&(0,c.r)(t)?"check_condition":"delay"in t?"delay":"wait_template"in t?"wait_template":["condition","and","or","not"].some(n=>n in t)?"check_condition":"event"in t?"fire_event":!("device_id"in t)||"trigger"in t||"condition"in t?"repeat"in t?"repeat":"choose"in t?"choose":"if"in t?"if":"wait_for_trigger"in t?"wait_for_trigger":"variables"in t?"variables":"stop"in t?"stop":"sequence"in t?"sequence":"parallel"in t?"parallel":"set_conversation_response"in t?"set_conversation_response":"action"in t||"service"in t?"service":"unknown":"device_action",S=t=>"unknown"!==A(t),O=(t,n)=>{var e;const i=null===(e=t.services.script[(0,o.Y)(n)])||void 0===e?void 0:e.fields;return void 0!==i&&Object.keys(i).length>0},k=(t,n)=>{var e;const i=null===(e=t.services.script[(0,o.Y)(n)])||void 0===e?void 0:e.fields;return void 0!==i&&Object.values(i).some(t=>t.required)},Y=(t,n,e)=>{var i;const r=null===(i=t.services.script[(0,o.Y)(n)])||void 0===i?void 0:i.fields;return void 0===r||0===Object.keys(r).length||void 0!==e&&Object.entries(r).every(([t,n])=>!n.required||void 0!==e[t])},C=t=>{var n,e;if(!t)return t;if(Array.isArray(t))return t.map(C);if("object"==typeof t&&null!==t&&"service"in t&&("action"in t||(t.action=t.service),delete t.service),"object"==typeof t&&null!==t&&"scene"in t&&(t.action="scene.turn_on",t.target={entity_id:t.scene},delete t.scene),"object"==typeof t&&null!==t&&"action"in t&&"media_player.play_media"===t.action&&"data"in t&&(null!==(n=t.data)&&void 0!==n&&n.media_content_id||null!==(e=t.data)&&void 0!==e&&e.media_content_type)){const n=Object.assign({},t.data),e={media_content_id:n.media_content_id,media_content_type:n.media_content_type,metadata:Object.assign({},t.metadata||{})};delete t.metadata,delete n.media_content_id,delete n.media_content_type,t.data=Object.assign(Object.assign({},n),{},{media:e})}if("object"==typeof t&&null!==t&&"sequence"in t){delete t.metadata;for(const n of t.sequence)C(n)}const i=A(t);if("parallel"===i){C(t.parallel)}if("choose"===i){const n=t;if(Array.isArray(n.choose))for(const t of n.choose)C(t.sequence);else n.choose&&C(n.choose.sequence);n.default&&C(n.default)}if("repeat"===i){C(t.repeat.sequence)}if("if"===i){const n=t;C(n.then),n.else&&C(n.else)}if("wait_for_trigger"===i){const n=t;(0,u.vO)(n.wait_for_trigger)}return t},E=t=>{const n=t.sequence;return n&&!Array.isArray(n)&&(t.sequence=[n]),t.sequence&&(t.sequence=C(t.sequence)),t}},54706:function(t,n,e){e.d(n,{E:function(){return o}});e(74423),e(18111),e(13579),e(3362),e(62953);var i=e(40445),r=e(77845);const o=t=>{class n extends t{connectedCallback(){super.connectedCallback(),this._checkSubscribed()}disconnectedCallback(){if(super.disconnectedCallback(),this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then(t=>t()):t()}this.__unsubs=void 0}}updated(t){if(super.updated(t),t.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const n of t.keys())if(this.hassSubscribeRequiredHostProps.includes(n))return void this._checkSubscribed()}hassSubscribe(){return[]}_checkSubscribed(){var t;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some(t=>void 0===this[t])||(this.__unsubs=this.hassSubscribe())}}return(0,i.Cg)([(0,r.MZ)({attribute:!1})],n.prototype,"hass",void 0),n}}}]);
//# sourceMappingURL=64264.b71c6580a2e413c8.js.map