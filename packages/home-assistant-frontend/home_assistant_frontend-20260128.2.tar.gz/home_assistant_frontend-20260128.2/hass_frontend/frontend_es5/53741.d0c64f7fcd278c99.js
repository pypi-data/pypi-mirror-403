"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["53741"],{90433:function(e,t,i){i.d(t,{Vy:function(){return o},fI:function(){return r},ux:function(){return l}});var a=i(22786),s=i(79468);const n=54;function o(e,t){const i=e%n+1;return t.getPropertyValue(`--color-${i}`)}function r(e,t){const i=t.getPropertyValue(`--graph-color-${e+1}`)||o(e,t);return(0,s.RQ)(i)}const l=(0,a.A)(e=>Array.from({length:n},(t,i)=>r(i,e)),(e,t)=>e[0].getPropertyValue("--graph-color-1")===t[0].getPropertyValue("--graph-color-1")&&e[0].getPropertyValue("--color-1")===t[0].getPropertyValue("--color-1"))},80785:function(e,t,i){function a(e){return!!e&&(e instanceof Date&&!isNaN(e.valueOf()))}i.d(t,{A:function(){return a}})},380:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{D:function(){return d},P:function(){return c}});i(74423);var s=i(74487),n=i(81e3),o=i(46927),r=i(96029),l=e([s]);s=(l.then?(await l)():l)[0];const c=e=>e.first_weekday===o.zt.language?"weekInfo"in Intl.Locale.prototype?new Intl.Locale(e.language).weekInfo.firstDay%7:(0,n.S)(e.language)%7:r.Z.includes(e.first_weekday)?r.Z.indexOf(e.first_weekday):1,d=e=>{const t=c(e);return r.Z[t]};a()}catch(c){a(c)}})},98975:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{K:function(){return c}});var s=i(74487),n=i(22786),o=i(63927),r=e([s,o]);[s,o]=r.then?(await r)():r;const l=(0,n.A)(e=>new Intl.RelativeTimeFormat(e.language,{numeric:"auto"})),c=(e,t,i,a=!0)=>{const s=(0,o.x)(e,i,t);return a?l(t).format(s.value,s.unit):Intl.NumberFormat(t.language,{style:"unit",unit:s.unit,unitDisplay:"long"}).format(Math.abs(s.value))};a()}catch(l){a(l)}})},96029:function(e,t,i){i.d(t,{Tq:function(){return o},Z:function(){return s},ZV:function(){return a},sj:function(){return n}});const a=["sun","mon","tue","wed","thu","fri","sat"],s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n={0:"sun",1:"mon",2:"tue",3:"wed",4:"thu",5:"fri",6:"sat"},o={sun:"sunday",mon:"monday",tue:"tuesday",wed:"wednesday",thu:"thursday",fri:"friday",sat:"saturday"}},17451:function(e,t,i){i.d(t,{j:function(){return a}});const a=(e,t,i)=>(void 0!==i&&(i=!!i),e.hasAttribute(t)?!!i||(e.removeAttribute(t),!1):!1!==i&&(e.setAttribute(t,""),!0))},96986:function(e,t,i){i.d(t,{L:function(){return n}});const a={10:"mdi:battery-10",20:"mdi:battery-20",30:"mdi:battery-30",40:"mdi:battery-40",50:"mdi:battery-50",60:"mdi:battery-60",70:"mdi:battery-70",80:"mdi:battery-80",90:"mdi:battery-90",100:"mdi:battery"},s={10:"mdi:battery-charging-10",20:"mdi:battery-charging-20",30:"mdi:battery-charging-30",40:"mdi:battery-charging-40",50:"mdi:battery-charging-50",60:"mdi:battery-charging-60",70:"mdi:battery-charging-70",80:"mdi:battery-charging-80",90:"mdi:battery-charging-90",100:"mdi:battery-charging"},n=(e,t)=>{const i=Number(e);if(isNaN(i))return"off"===e?"mdi:battery":"on"===e?"mdi:battery-alert":"mdi:battery-unknown";const n=10*Math.round(i/10);return t&&i>=10?s[n]:t?"mdi:battery-charging-outline":i<=5?"mdi:battery-alert-variant-outline":a[n]}},15090:function(e,t,i){i.d(t,{n:function(){return c},v:function(){return r}});i(44114),i(26910),i(18111),i(22489),i(61701),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(62953);var a=i(22675),s=i(52220),n=i(71727),o=i(69093);const r={alarm_control_panel:["armed_away","armed_custom_bypass","armed_home","armed_night","armed_vacation","arming","disarmed","disarming","pending","triggered"],alert:["on","off","idle"],assist_satellite:["idle","listening","responding","processing"],automation:["on","off"],binary_sensor:["on","off"],button:[],calendar:["on","off"],camera:["idle","recording","streaming"],cover:["closed","closing","open","opening"],device_tracker:["home","not_home"],fan:["on","off"],humidifier:["on","off"],input_boolean:["on","off"],input_button:[],lawn_mower:["error","paused","mowing","returning","docked"],light:["on","off"],lock:["jammed","locked","locking","unlocked","unlocking","opening","open"],media_player:["off","on","idle","playing","paused","standby","buffering"],person:["home","not_home"],plant:["ok","problem"],remote:["on","off"],scene:[],schedule:["on","off"],script:["on","off"],siren:["on","off"],sun:["above_horizon","below_horizon"],switch:["on","off"],timer:["active","idle","paused"],update:["on","off"],vacuum:["cleaning","docked","error","idle","paused","returning"],valve:["closed","closing","open","opening"],weather:["clear-night","cloudy","exceptional","fog","hail","lightning-rainy","lightning","partlycloudy","pouring","rainy","snowy-rainy","snowy","sunny","windy-variant","windy"]},l={alarm_control_panel:{code_format:["number","text"]},binary_sensor:{device_class:["battery","battery_charging","co","cold","connectivity","door","garage_door","gas","heat","light","lock","moisture","motion","moving","occupancy","opening","plug","power","presence","problem","running","safety","smoke","sound","tamper","update","vibration","window"]},button:{device_class:["restart","update"]},camera:{frontend_stream_type:["hls","web_rtc"]},climate:{hvac_action:["off","idle","preheating","defrosting","heating","cooling","drying","fan"]},cover:{device_class:["awning","blind","curtain","damper","door","garage","gate","shade","shutter","window"]},device_tracker:{source_type:["bluetooth","bluetooth_le","gps","router"]},fan:{direction:["forward","reverse"]},humidifier:{device_class:["humidifier","dehumidifier"],action:["off","idle","humidifying","drying"]},media_player:{device_class:["tv","speaker","receiver"],media_content_type:["album","app","artist","channel","channels","composer","contributing_artist","episode","game","genre","image","movie","music","playlist","podcast","season","track","tvshow","url","video"],repeat:["off","one","all"]},number:{device_class:["temperature"]},sensor:{device_class:["apparent_power","aqi","battery","carbon_dioxide","carbon_monoxide","current","date","duration","energy","frequency","gas","humidity","illuminance","monetary","nitrogen_dioxide","nitrogen_monoxide","nitrous_oxide","ozone","ph","pm1","pm10","pm25","pm4","power_factor","power","pressure","reactive_power","signal_strength","sulphur_dioxide","temperature","timestamp","volatile_organic_compounds","volatile_organic_compounds_parts","voltage","volume_flow_rate"],state_class:["measurement","total","total_increasing"]},switch:{device_class:["outlet","switch"]},update:{device_class:["firmware"]},water_heater:{away_mode:["on","off"]}},c=(e,t,i=void 0)=>{const c=(0,o.t)(t),d=[];switch(!i&&c in r?d.push(...r[c]):i&&c in l&&i in l[c]&&d.push(...l[c][i]),c){case"climate":i?"fan_mode"===i?d.push(...t.attributes.fan_modes):"preset_mode"===i?d.push(...t.attributes.preset_modes):"swing_mode"===i&&d.push(...t.attributes.swing_modes):d.push(...t.attributes.hvac_modes);break;case"device_tracker":case"person":i||d.push(...Object.entries(e.states).filter(([e,t])=>"zone"===(0,n.m)(e)&&"zone.home"!==e&&t.attributes.friendly_name).map(([e,t])=>t.attributes.friendly_name).sort((t,i)=>(0,s.xL)(t,i,e.locale.language)));break;case"event":"event_type"===i&&d.push(...t.attributes.event_types);break;case"fan":"preset_mode"===i&&d.push(...t.attributes.preset_modes);break;case"humidifier":"mode"===i&&d.push(...t.attributes.available_modes);break;case"input_select":case"select":i||d.push(...t.attributes.options);break;case"light":"effect"===i&&t.attributes.effect_list?d.push(...t.attributes.effect_list):"color_mode"===i&&t.attributes.supported_color_modes&&d.push(...t.attributes.supported_color_modes);break;case"media_player":"sound_mode"===i?d.push(...t.attributes.sound_mode_list):"source"===i&&d.push(...t.attributes.source_list);break;case"remote":"current_activity"===i&&d.push(...t.attributes.activity_list);break;case"sensor":i||"enum"!==t.attributes.device_class||d.push(...t.attributes.options);break;case"vacuum":"fan_speed"===i&&d.push(...t.attributes.fan_speed_list);break;case"water_heater":i&&"operation_mode"!==i||d.push(...t.attributes.operation_list)}return i||d.push(...a.s7),[...new Set(d)]}},78649:function(e,t,i){i.d(t,{n:function(){return s}});i(27495);const a=/^(\w+)\.(\w+)$/,s=e=>a.test(e)},52943:function(e,t,i){i.d(t,{Z:function(){return a}});const a=e=>e.charAt(0).toUpperCase()+e.slice(1)},22533:function(e,t,i){i.d(t,{i:function(){return s}});var a=i(52943);const s=(e,t)=>(e=>{switch(e){case"de":case"lb":return!0;default:return!1}})(t)?(0,a.Z)(e):e.toLocaleLowerCase(t)},63927:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{x:function(){return p}});var s=i(6946),n=i(52640),o=i(38684),r=i(380),l=e([r]);r=(l.then?(await l)():l)[0];const d=1e3,h=60,u=60*h;function p(e,t=Date.now(),i,a={}){const l=Object.assign(Object.assign({},g),a||{}),c=(+e-+t)/d;if(Math.abs(c)<l.second)return{value:Math.round(c),unit:"second"};const p=c/h;if(Math.abs(p)<l.minute)return{value:Math.round(p),unit:"minute"};const v=c/u;if(Math.abs(v)<l.hour)return{value:Math.round(v),unit:"hour"};const _=new Date(e),m=new Date(t);_.setHours(0,0,0,0),m.setHours(0,0,0,0);const f=(0,s.c)(_,m);if(0===f)return{value:Math.round(v),unit:"hour"};if(Math.abs(f)<l.day)return{value:f,unit:"day"};const y=(0,r.P)(i),b=(0,n.k)(_,{weekStartsOn:y}),w=(0,n.k)(m,{weekStartsOn:y}),$=(0,o.I)(b,w);if(0===$)return{value:f,unit:"day"};if(Math.abs($)<l.week)return{value:$,unit:"week"};const C=_.getFullYear()-m.getFullYear(),x=12*C+_.getMonth()-m.getMonth();return 0===x?{value:$,unit:"week"}:Math.abs(x)<l.month||0===C?{value:x,unit:"month"}:{value:Math.round(C),unit:"year"}}const g={second:59,minute:59,hour:22,day:5,week:4,month:11};a()}catch(c){a(c)}})},72945:function(e,t,i){var a=i(40445),s=i(96196),n=i(77845),o=i(96986);i(88945);let r,l=e=>e;class c extends s.WF{render(){var e;return this.batteryStateObj?(0,s.qy)(r||(r=l` <ha-icon .icon="${0}"></ha-icon> `),(0,o.L)(this.batteryStateObj.state,"on"===(null===(e=this.batteryChargingStateObj)||void 0===e?void 0:e.state))):s.s6}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],c.prototype,"batteryStateObj",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],c.prototype,"batteryChargingStateObj",void 0),c=(0,a.Cg)([(0,n.EM)("ha-battery-icon")],c)},76776:function(e,t,i){i(62953);var a=i(40445),s=i(96196),n=i(77845);let o,r,l,c=e=>e;class d extends s.WF{render(){return(0,s.qy)(o||(o=c` ${0} <slot></slot> `),this.header?(0,s.qy)(r||(r=c`<h1 class="card-header">${0}</h1>`),this.header):s.s6)}constructor(...e){super(...e),this.raised=!1}}d.styles=(0,s.AH)(l||(l=c`:host{background:var(--ha-card-background,var(--card-background-color,#fff));-webkit-backdrop-filter:var(--ha-card-backdrop-filter,none);backdrop-filter:var(--ha-card-backdrop-filter,none);box-shadow:var(--ha-card-box-shadow,none);box-sizing:border-box;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));border-width:var(--ha-card-border-width,1px);border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0));color:var(--primary-text-color);display:block;transition:all .3s ease-out;position:relative}:host([raised]){border:none;box-shadow:var(--ha-card-box-shadow,0px 2px 1px -1px rgba(0,0,0,.2),0px 1px 1px 0px rgba(0,0,0,.14),0px 1px 3px 0px rgba(0,0,0,.12))}.card-header,:host ::slotted(.card-header){color:var(--ha-card-header-color,var(--primary-text-color));font-family:var(--ha-card-header-font-family, inherit);font-size:var(--ha-card-header-font-size, var(--ha-font-size-2xl));letter-spacing:-.012em;line-height:var(--ha-line-height-expanded);padding:var(--ha-space-3) var(--ha-space-4) var(--ha-space-4);display:block;margin-block-start:0;margin-block-end:0;font-weight:var(--ha-font-weight-normal)}:host ::slotted(.card-content:not(:nth-child(1of.card-content,.card-header))),slot:not(:first-child)::slotted(.card-content){padding-top:0;margin-top:calc(var(--ha-space-2) * -1)}:host ::slotted(.card-content){padding:var(--ha-space-4)}:host ::slotted(.card-actions){border-top:1px solid var(--divider-color,#e8e8e8);padding:var(--ha-space-2)}`)),(0,a.Cg)([(0,n.MZ)()],d.prototype,"header",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],d.prototype,"raised",void 0),d=(0,a.Cg)([(0,n.EM)("ha-card")],d)},63817:function(e,t,i){i.a(e,async function(e,t){try{i(74423),i(26910),i(18111),i(22489),i(61701),i(3362),i(62953);var a=i(40445),s=i(96196),n=i(77845),o=i(4937),r=i(22786),l=i(1087),c=i(52220),d=i(95350),h=i(14503),u=(i(58349),i(59174)),p=(i(11382),i(8630),i(89947),e([u]));u=(p.then?(await p)():p)[0];let g,v,_,m,f,y=e=>e;const b="M21 8H3V6H21V8M13.81 16H10V18H13.09C13.21 17.28 13.46 16.61 13.81 16M18 11H6V13H18V11M21.12 15.46L19 17.59L16.88 15.46L15.47 16.88L17.59 19L15.47 21.12L16.88 22.54L19 20.41L21.12 22.54L22.54 21.12L20.41 19L22.54 16.88L21.12 15.46Z";class w extends s.WF{render(){var e,t;return(0,s.qy)(g||(g=y` <ha-expansion-panel left-chevron .expanded="${0}" @expanded-will-change="${0}" @expanded-changed="${0}"> <div slot="header" class="header"> ${0} ${0} </div> ${0} </ha-expansion-panel> `),this.expanded,this._expandedWillChange,this._expandedChanged,this.hass.localize("ui.panel.config.integrations.caption"),null!==(e=this.value)&&void 0!==e&&e.length?(0,s.qy)(v||(v=y`<div class="badge">${0}</div> <ha-icon-button .path="${0}" @click="${0}"></ha-icon-button>`),null===(t=this.value)||void 0===t?void 0:t.length,b,this._clearFilter):s.s6,this._manifests&&this._shouldRender?(0,s.qy)(_||(_=y`<search-input-outlined .hass="${0}" .filter="${0}" @value-changed="${0}"> </search-input-outlined> <ha-list class="ha-scrollbar" @click="${0}" multi> ${0} </ha-list> `),this.hass,this._filter,this._handleSearchChange,this._handleItemClick,(0,o.u)(this._integrations(this.hass.localize,this._manifests,this._filter,this.value),e=>e.domain,e=>(0,s.qy)(m||(m=y`<ha-check-list-item .value="${0}" .selected="${0}" graphic="icon"> <ha-domain-icon slot="graphic" .hass="${0}" .domain="${0}" brand-fallback></ha-domain-icon> ${0} </ha-check-list-item>`),e.domain,(this.value||[]).includes(e.domain),this.hass,e.domain,e.name))):s.s6)}updated(e){e.has("expanded")&&this.expanded&&setTimeout(()=>{this.expanded&&(this.renderRoot.querySelector("ha-list").style.height=this.clientHeight-49-32+"px")},300)}_expandedWillChange(e){this._shouldRender=e.detail.expanded}_expandedChanged(e){this.expanded=e.detail.expanded}async firstUpdated(){this._manifests=await(0,d.fK)(this.hass),this.hass.loadBackendTranslation("title")}_handleItemClick(e){var t,i;const a=e.target.closest("ha-check-list-item"),s=null==a?void 0:a.value;if(s){var n;if(null!==(t=this.value)&&void 0!==t&&t.includes(s))this.value=null===(n=this.value)||void 0===n?void 0:n.filter(e=>e!==s);else this.value=[...this.value||[],s];a.selected=null===(i=this.value)||void 0===i?void 0:i.includes(s),(0,l.r)(this,"data-table-filter-changed",{value:this.value,items:void 0})}}_clearFilter(e){e.preventDefault(),this.value=void 0,(0,l.r)(this,"data-table-filter-changed",{value:void 0,items:void 0})}_handleSearchChange(e){this._filter=e.detail.value.toLowerCase()}static get styles(){return[h.dp,(0,s.AH)(f||(f=y`:host{border-bottom:1px solid var(--divider-color)}:host([expanded]){flex:1;height:0}ha-expansion-panel{--ha-card-border-radius:var(--ha-border-radius-square);--expansion-panel-content-padding:0}.header{display:flex;align-items:center}.header ha-icon-button{margin-inline-start:auto;margin-inline-end:8px}.badge{display:inline-block;margin-left:8px;margin-inline-start:8px;margin-inline-end:0;min-width:16px;box-sizing:border-box;border-radius:var(--ha-border-radius-circle);font-size:var(--ha-font-size-xs);font-weight:var(--ha-font-weight-normal);background-color:var(--primary-color);line-height:var(--ha-line-height-normal);text-align:center;padding:0px 2px;color:var(--text-primary-color)}search-input-outlined{display:block;padding:var(--ha-space-1) var(--ha-space-2) 0}`))]}constructor(...e){super(...e),this.narrow=!1,this.expanded=!1,this._shouldRender=!1,this._integrations=(0,r.A)((e,t,i,a)=>t.map(t=>Object.assign(Object.assign({},t),{},{name:(0,d.p$)(e,t.domain,t)})).filter(e=>(!e.integration_type||!["entity","system","hardware"].includes(e.integration_type))&&(!i||e.name.toLowerCase().includes(i)||e.domain.toLowerCase().includes(i))).sort((e,t)=>(0,c.xL)(e.name,t.name,this.hass.locale.language)))}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],w.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],w.prototype,"value",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean})],w.prototype,"narrow",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],w.prototype,"expanded",void 0),(0,a.Cg)([(0,n.wk)()],w.prototype,"_manifests",void 0),(0,a.Cg)([(0,n.wk)()],w.prototype,"_shouldRender",void 0),(0,a.Cg)([(0,n.wk)()],w.prototype,"_filter",void 0),w=(0,a.Cg)([(0,n.EM)("ha-filter-integrations")],w),t()}catch(g){t(g)}})},64263:function(e,t,i){i(74423),i(44114),i(18111),i(20116),i(61701),i(3362),i(62953);var a=i(40445),s=i(96196),n=i(77845),o=i(1087),r=i(14503);i(58349),i(11382),i(88945),i(26300),i(8630);let l,c,d,h,u,p,g=e=>e;class v extends s.WF{render(){var e,t;if(!this.states)return s.s6;const i=this.states.find(e=>e.icon);return(0,s.qy)(l||(l=g` <ha-expansion-panel left-chevron .expanded="${0}" @expanded-will-change="${0}" @expanded-changed="${0}"> <div slot="header" class="header"> ${0} ${0} </div> ${0} </ha-expansion-panel> `),this.expanded,this._expandedWillChange,this._expandedChanged,this.label,null!==(e=this.value)&&void 0!==e&&e.length?(0,s.qy)(c||(c=g`<div class="badge">${0}</div> <ha-icon-button .path="${0}" @click="${0}"></ha-icon-button>`),null===(t=this.value)||void 0===t?void 0:t.length,"M21 8H3V6H21V8M13.81 16H10V18H13.09C13.21 17.28 13.46 16.61 13.81 16M18 11H6V13H18V11M21.12 15.46L19 17.59L16.88 15.46L15.47 16.88L17.59 19L15.47 21.12L16.88 22.54L19 20.41L21.12 22.54L22.54 21.12L20.41 19L22.54 16.88L21.12 15.46Z",this._clearFilter):s.s6,this._shouldRender?(0,s.qy)(d||(d=g` <ha-list @selected="${0}" multi class="ha-scrollbar"> ${0} </ha-list> `),this._statesSelected,this.states.map(e=>{var t,a;return(0,s.qy)(h||(h=g`<ha-check-list-item .value="${0}" .selected="${0}" .graphic="${0}"> ${0} ${0} </ha-check-list-item>`),e.value,null!==(t=null===(a=this.value)||void 0===a?void 0:a.includes(e.value))&&void 0!==t&&t,i?"icon":null,e.icon?(0,s.qy)(u||(u=g`<ha-icon slot="graphic" .icon="${0}"></ha-icon>`),e.icon):s.s6,e.label)})):s.s6)}willUpdate(e){e.has("expanded")&&this.expanded&&(this._shouldRender=!0)}updated(e){(e.has("expanded")||e.has("states"))&&this.expanded&&setTimeout(async()=>{if(!this.expanded)return;const e=this._list;e&&(e.style.height=this.clientHeight-49+"px")},300)}_expandedWillChange(e){this._shouldRender=e.detail.expanded}_expandedChanged(e){this.expanded=e.detail.expanded}async _statesSelected(e){if(!e.detail.index.size)return(0,o.r)(this,"data-table-filter-changed",{value:[],items:void 0}),void(this.value=[]);const t=[];for(const i of e.detail.index){const e=this.states[i].value;t.push(e)}this.value=t,(0,o.r)(this,"data-table-filter-changed",{value:t,items:void 0})}_clearFilter(e){e.preventDefault(),this.value=void 0,(0,o.r)(this,"data-table-filter-changed",{value:void 0,items:void 0})}static get styles(){return[r.dp,(0,s.AH)(p||(p=g`:host{border-bottom:1px solid var(--divider-color)}:host([expanded]){flex:1;height:0}ha-expansion-panel{--ha-card-border-radius:var(--ha-border-radius-square);--expansion-panel-content-padding:0}.header{display:flex;align-items:center}.header ha-icon-button{margin-inline-start:auto;margin-inline-end:8px}.badge{display:inline-block;margin-left:8px;margin-inline-start:8px;margin-inline-end:0;min-width:16px;box-sizing:border-box;border-radius:var(--ha-border-radius-circle);font-size:var(--ha-font-size-xs);font-weight:var(--ha-font-weight-normal);background-color:var(--primary-color);line-height:var(--ha-line-height-normal);text-align:center;padding:0px 2px;color:var(--text-primary-color)}`))]}constructor(...e){super(...e),this.narrow=!1,this.expanded=!1,this._shouldRender=!1}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],v.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)()],v.prototype,"label",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],v.prototype,"value",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],v.prototype,"states",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean})],v.prototype,"narrow",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],v.prototype,"expanded",void 0),(0,a.Cg)([(0,n.wk)()],v.prototype,"_shouldRender",void 0),(0,a.Cg)([(0,n.P)("ha-list")],v.prototype,"_list",void 0),v=(0,a.Cg)([(0,n.EM)("ha-filter-states")],v)},6:function(e,t,i){i(62953);var a=i(40445),s=i(35949),n=i(38627),o=i(96196),r=i(77845),l=i(94333),c=i(1087);let d,h,u=e=>e;class p extends s.M{render(){const e={"mdc-form-field--align-end":this.alignEnd,"mdc-form-field--space-between":this.spaceBetween,"mdc-form-field--nowrap":this.nowrap};return(0,o.qy)(d||(d=u` <div class="mdc-form-field ${0}"> <slot></slot> <label class="mdc-label" @click="${0}"> <slot name="label">${0}</slot> </label> </div>`),(0,l.H)(e),this._labelClick,this.label)}_labelClick(){const e=this.input;if(e&&(e.focus(),!e.disabled))switch(e.tagName){case"HA-CHECKBOX":e.checked=!e.checked,(0,c.r)(e,"change");break;case"HA-RADIO":e.checked=!0,(0,c.r)(e,"change");break;default:e.click()}}constructor(...e){super(...e),this.disabled=!1}}p.styles=[n.R,(0,o.AH)(h||(h=u`:host(:not([alignEnd])) ::slotted(ha-switch){margin-right:10px;margin-inline-end:10px;margin-inline-start:inline}.mdc-form-field{align-items:var(--ha-formfield-align-items,center);gap:var(--ha-space-1)}.mdc-form-field>label{direction:var(--direction);margin-inline-start:0;margin-inline-end:auto;padding:0}:host([disabled]) label{color:var(--disabled-text-color)}`))],(0,a.Cg)([(0,r.MZ)({type:Boolean,reflect:!0})],p.prototype,"disabled",void 0),p=(0,a.Cg)([(0,r.EM)("ha-formfield")],p)},43661:function(e,t,i){i.r(t),i.d(t,{HaIconNext:function(){return r}});i(62953);var a=i(40445),s=i(77845),n=i(63091),o=i(67094);class r extends o.HaSvgIcon{constructor(...e){super(...e),this.path="rtl"===n.G.document.dir?"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z":"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}}(0,a.Cg)([(0,s.MZ)()],r.prototype,"path",void 0),r=(0,a.Cg)([(0,s.EM)("ha-icon-next")],r)},82988:function(e,t,i){i(3362);var a=i(40445),s=i(92153),n=i(87592),o=i(96196),r=i(77845);let l;class c extends s.g{async show(){super.show(),this.menu.hasOverflow=!1}}c.styles=[n.R,(0,o.AH)(l||(l=(e=>e)`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color);--md-sys-color-secondary-container:rgba(
          var(--rgb-primary-color),
          0.15
        );--md-sys-color-on-secondary-container:var(--text-primary-color);--mdc-icon-size:16px;--md-sys-color-on-primary-container:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color)}`))],c=(0,a.Cg)([(0,r.EM)("ha-sub-menu")],c)},59646:function(e,t,i){i(62953);var a=i(40445),s=i(4845),n=i(49065),o=i(96196),r=i(77845),l=i(88360);let c;class d extends s.U{firstUpdated(){super.firstUpdated(),this.addEventListener("change",()=>{this.haptic&&(0,l.j)(this,"light")})}constructor(...e){super(...e),this.haptic=!1}}d.styles=[n.R,(0,o.AH)(c||(c=(e=>e)`:host{--mdc-theme-secondary:var(--switch-checked-color)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{background-color:var(--switch-checked-button-color);border-color:var(--switch-checked-button-color)}.mdc-switch.mdc-switch--checked .mdc-switch__track{background-color:var(--switch-checked-track-color);border-color:var(--switch-checked-track-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:var(--switch-unchecked-button-color);border-color:var(--switch-unchecked-button-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{background-color:var(--switch-unchecked-track-color);border-color:var(--switch-unchecked-track-color)}`))],(0,a.Cg)([(0,r.MZ)({type:Boolean})],d.prototype,"haptic",void 0),d=(0,a.Cg)([(0,r.EM)("ha-switch")],d)},62351:function(e,t,i){i.d(t,{KC:function(){return d},Vy:function(){return l},ds:function(){return n},ew:function(){return r},g5:function(){return c},tl:function(){return o}});var a=i(82286),s=i(22675);const n=(e,t,i)=>e.connection.subscribeMessage(i,{type:"assist_satellite/intercept_wake_word",entity_id:t}),o=(e,t)=>e.callWS({type:"assist_satellite/test_connection",entity_id:t}),r=(e,t,i)=>e.callService("assist_satellite","announce",i,{entity_id:t}),l=(e,t)=>e.callWS({type:"assist_satellite/get_configuration",entity_id:t}),c=(e,t,i)=>e.callWS({type:"assist_satellite/set_wake_words",entity_id:t,wake_word_ids:i}),d=e=>e&&e.state!==s.Hh&&(0,a.$)(e,1)},82e3:function(e,t,i){i.d(t,{D5:function(){return a},Fy:function(){return h},Gk:function(){return g},Hg:function(){return s},TJ:function(){return o},UQ:function(){return d},Y_:function(){return v},ds:function(){return p},e0:function(){return n},ec:function(){return u},go:function(){return l},n2:function(){return c},sq:function(){return r}});i(74423),i(18111),i(61701),i(33110),i(3362);const a=14881==i.j?`${location.protocol}//${location.host}`:null,s=e=>e.map(e=>{if("string"!==e.type)return e;switch(e.name){case"username":return Object.assign(Object.assign({},e),{},{autocomplete:"username",autofocus:!0});case"password":return Object.assign(Object.assign({},e),{},{autocomplete:"current-password"});case"code":return Object.assign(Object.assign({},e),{},{autocomplete:"one-time-code",autofocus:!0});default:return e}}),n=(e,t)=>e.callWS({type:"auth/sign_path",path:t}),o=()=>fetch("/auth/providers",{credentials:"same-origin"}),r=(e,t,i)=>fetch("/auth/login_flow",{method:"POST",credentials:"same-origin",body:JSON.stringify({client_id:e,handler:i,redirect_uri:t})}),l=(e,t)=>fetch(`/auth/login_flow/${e}`,{method:"POST",credentials:"same-origin",body:JSON.stringify(t)}),c=e=>fetch(`/auth/login_flow/${e}`,{method:"DELETE",credentials:"same-origin"}),d=(e,t,i,a)=>{e.includes("?")?e.endsWith("&")||(e+="&"):e+="?",e+=`code=${encodeURIComponent(t)}`,i&&(e+=`&state=${encodeURIComponent(i)}`),a&&(e+="&storeToken=true"),document.location.assign(e)},h=async(e,t,i,a)=>e.callWS({type:"config/auth_provider/homeassistant/create",user_id:t,username:i,password:a}),u=(e,t,i)=>e.callWS({type:"config/auth_provider/homeassistant/change_password",current_password:t,new_password:i}),p=(e,t,i)=>e.callWS({type:"config/auth_provider/homeassistant/admin_change_password",user_id:t,password:i}),g=(e,t,i)=>e.callWS({type:"config/auth_provider/homeassistant/admin_change_username",user_id:t,username:i}),v=(e,t,i)=>e.callWS({type:"auth/delete_all_refresh_tokens",token_type:t,delete_current_token:i})},77001:function(e,t,i){i.d(t,{Dc:function(){return s},Y_:function(){return n},iS:function(){return a},jg:function(){return o}});i(74423),i(18111),i(7588),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(62953);const a=e=>{const t={};return Object.entries(e).forEach(([e,i])=>{t[e]={value:i.value,items:i.items instanceof Set?Array.from(i.items):i.items}}),t},s=e=>{const t={};return Object.entries(e).forEach(([e,i])=>{t[e]={value:i.value,items:Array.isArray(i.items)?new Set(i.items):i.items}}),t},n=(e,t,i)=>e===i&&Array.isArray(t.value)&&t.value.length,o=(e,t,i)=>(e===i||i.includes(e))&&t.items},96204:function(e,t,i){i.d(t,{Dh:function(){return a},It:function(){return o},WV:function(){return n},g9:function(){return s}});const a=e=>e.callWS({type:"diagnostics/list"}),s=(e,t)=>e.callWS({type:"diagnostics/get",domain:t}),n=e=>`/api/diagnostics/config_entry/${e}`,o=(e,t)=>`/api/diagnostics/config_entry/${e}/device/${t}`},86531:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{$O:function(){return f},a$:function(){return y},cj:function(){return u},dG:function(){return m},gM:function(){return _},gd:function(){return g},rc:function(){return b}});i(74423),i(3362),i(27495),i(25440),i(62953);var s=i(46190),n=i(71727),o=i(69093),r=i(22533),l=i(22675),c=i(25064),d=e([c]);c=(d.then?(await d)():d)[0];const h="ui.components.logbook.messages",u=["counter","proximity"],p={triggered_by_numeric_state_of:"numeric state of",triggered_by_state_of:"state of",triggered_by_event:"event",triggered_by_time_pattern:"time pattern",triggered_by_time:"time",triggered_by_homeassistant_stopping:"Home Assistant stopping",triggered_by_homeassistant_starting:"Home Assistant starting"},g=async(e,t,i)=>v(e,t,void 0,void 0,i),v=(e,t,i,a,s,n)=>{if((a||n)&&(!a||0===a.length)&&(!n||0===n.length))return Promise.resolve([]);const o={type:"logbook/get_events",start_time:t};return i&&(o.end_time=i),null!=a&&a.length&&(o.entity_ids=a),null!=n&&n.length&&(o.device_ids=n),s&&(o.context_id=s),e.callWS(o)},_=(e,t,i,a,s,n,o)=>{if((n||o)&&(!n||0===n.length)&&(!o||0===o.length))return Promise.reject("No entities or devices");const r={type:"logbook/event_stream",start_time:i,end_time:a};return null!=n&&n.length&&(r.entity_ids=n),null!=o&&o.length&&(r.device_ids=o),e.connection.subscribeMessage(e=>t(e,s),r)},m=(e,t)=>({entity_id:e.entity_id,state:t,attributes:{device_class:null==e?void 0:e.attributes.device_class,source_type:null==e?void 0:e.attributes.source_type,has_date:null==e?void 0:e.attributes.has_date,has_time:null==e?void 0:e.attributes.has_time,entity_picture_local:s.oL.has((0,n.m)(e.entity_id))||null==e?void 0:e.attributes.entity_picture_local,entity_picture:s.oL.has((0,n.m)(e.entity_id))||null==e?void 0:e.attributes.entity_picture}}),f=(e,t)=>{for(const i of Object.keys(p)){const a=p[i];if(t.startsWith(a))return t.replace(a,`${e(`ui.components.logbook.${i}`)}`)}return t},y=(e,t,i,a,n)=>{switch(n){case"device_tracker":case"person":return"not_home"===i?t(`${h}.was_away`):"home"===i?t(`${h}.was_at_home`):t(`${h}.was_at_state`,{state:i});case"sun":return t("above_horizon"===i?`${h}.rose`:`${h}.set`);case"binary_sensor":{const n=i===s.Or,o=i===s.qg,l=a.attributes.device_class;if(l&&(n||o))return t(`${h}.${n?"detected_device_classes":"cleared_device_classes"}.${l}`,{device_class:(0,r.i)(t(`component.binary_sensor.entity_component.${l}.name`)||l,e.language)})||t(`${h}.${n?"detected_device_class":"cleared_device_class"}`,{device_class:(0,r.i)(t(`component.binary_sensor.entity_component.${l}.name`)||l,e.language)});break}case"cover":switch(i){case"open":return t(`${h}.was_opened`);case"opening":return t(`${h}.is_opening`);case"closing":return t(`${h}.is_closing`);case"closed":return t(`${h}.was_closed`)}break;case"event":return t(`${h}.detected_event_no_type`);case"lock":switch(i){case"unlocked":return t(`${h}.was_unlocked`);case"locking":return t(`${h}.is_locking`);case"unlocking":return t(`${h}.is_unlocking`);case"opening":return t(`${h}.is_opening`);case"open":return t(`${h}.is_opened`);case"locked":return t(`${h}.was_locked`);case"jammed":return t(`${h}.is_jammed`)}}return i===s.Or?t(`${h}.turned_on`):i===s.qg?t(`${h}.turned_off`):i===l.HV?t(`${h}.became_unknown`):i===l.Hh?t(`${h}.became_unavailable`):e.localize(`${h}.changed_to_state`,{state:a?e.formatEntityState(a,i):i})},b=(e,t=[])=>{const i=(0,o.t)(e);return!(u.includes(i)||"sensor"===i&&(0,c.Fp)(i,e,void 0,t))};a()}catch(h){a(h)}})},53072:function(e,t,i){i.d(t,{$6:function(){return m},EC:function(){return v},ET:function(){return _},H1:function(){return g},HN:function(){return w},Im:function(){return k},QI:function(){return $},Un:function(){return y},Xm:function(){return b},ce:function(){return C},fh:function(){return A},ie:function(){return x},mm:function(){return f},vj:function(){return p}});i(44114);var a=i(47129),s=i(82286),n=i(22675),o=i(52069);const r="M11,14C12,14 13.05,14.16 14.2,14.44C13.39,15.31 13,16.33 13,17.5C13,18.39 13.25,19.23 13.78,20H3V18C3,16.81 3.91,15.85 5.74,15.12C7.57,14.38 9.33,14 11,14M11,12C9.92,12 9,11.61 8.18,10.83C7.38,10.05 7,9.11 7,8C7,6.92 7.38,6 8.18,5.18C9,4.38 9.92,4 11,4C12.11,4 13.05,4.38 13.83,5.18C14.61,6 15,6.92 15,8C15,9.11 14.61,10.05 13.83,10.83C13.05,11.61 12.11,12 11,12M18.5,10H20L22,10V12H20V17.5A2.5,2.5 0 0,1 17.5,20A2.5,2.5 0 0,1 15,17.5A2.5,2.5 0 0,1 17.5,15C17.86,15 18.19,15.07 18.5,15.21V10Z",l="M14,19H18V5H14M6,19H10V5H6V19Z",c="M8,5.14V19.14L19,12.14L8,5.14Z",d="M16.56,5.44L15.11,6.89C16.84,7.94 18,9.83 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12C6,9.83 7.16,7.94 8.88,6.88L7.44,5.44C5.36,6.88 4,9.28 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12C20,9.28 18.64,6.88 16.56,5.44M13,3H11V13H13",h="M18,18H6V6H18V18Z",u="M8.16,3L6.75,4.41L9.34,7H4C2.89,7 2,7.89 2,9V19C2,20.11 2.89,21 4,21H20C21.11,21 22,20.11 22,19V9C22,7.89 21.11,7 20,7H14.66L17.25,4.41L15.84,3L12,6.84L8.16,3M4,9H17V19H4V9M19.5,9A1,1 0 0,1 20.5,10A1,1 0 0,1 19.5,11A1,1 0 0,1 18.5,10A1,1 0 0,1 19.5,9M19.5,12A1,1 0 0,1 20.5,13A1,1 0 0,1 19.5,14A1,1 0 0,1 18.5,13A1,1 0 0,1 19.5,12Z";var p=function(e){return e[e.PAUSE=1]="PAUSE",e[e.SEEK=2]="SEEK",e[e.VOLUME_SET=4]="VOLUME_SET",e[e.VOLUME_MUTE=8]="VOLUME_MUTE",e[e.PREVIOUS_TRACK=16]="PREVIOUS_TRACK",e[e.NEXT_TRACK=32]="NEXT_TRACK",e[e.TURN_ON=128]="TURN_ON",e[e.TURN_OFF=256]="TURN_OFF",e[e.PLAY_MEDIA=512]="PLAY_MEDIA",e[e.VOLUME_STEP=1024]="VOLUME_STEP",e[e.SELECT_SOURCE=2048]="SELECT_SOURCE",e[e.STOP=4096]="STOP",e[e.CLEAR_PLAYLIST=8192]="CLEAR_PLAYLIST",e[e.PLAY=16384]="PLAY",e[e.SHUFFLE_SET=32768]="SHUFFLE_SET",e[e.SELECT_SOUND_MODE=65536]="SELECT_SOUND_MODE",e[e.BROWSE_MEDIA=131072]="BROWSE_MEDIA",e[e.REPEAT_SET=262144]="REPEAT_SET",e[e.GROUPING=524288]="GROUPING",e}({});const g="browser",v={album:{icon:"M12,11A1,1 0 0,0 11,12A1,1 0 0,0 12,13A1,1 0 0,0 13,12A1,1 0 0,0 12,11M12,16.5C9.5,16.5 7.5,14.5 7.5,12C7.5,9.5 9.5,7.5 12,7.5C14.5,7.5 16.5,9.5 16.5,12C16.5,14.5 14.5,16.5 12,16.5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",layout:"grid"},app:{icon:"M21 2H3C1.9 2 1 2.9 1 4V20C1 21.1 1.9 22 3 22H21C22.1 22 23 21.1 23 20V4C23 2.9 22.1 2 21 2M21 7H3V4H21V7Z",layout:"grid",show_list_images:!0},artist:{icon:r,layout:"grid",show_list_images:!0},channel:{icon:u,thumbnail_ratio:"portrait",layout:"grid",show_list_images:!0},composer:{icon:"M11,4A4,4 0 0,1 15,8A4,4 0 0,1 11,12A4,4 0 0,1 7,8A4,4 0 0,1 11,4M11,6A2,2 0 0,0 9,8A2,2 0 0,0 11,10A2,2 0 0,0 13,8A2,2 0 0,0 11,6M11,13C12.1,13 13.66,13.23 15.11,13.69C14.5,14.07 14,14.6 13.61,15.23C12.79,15.03 11.89,14.9 11,14.9C8.03,14.9 4.9,16.36 4.9,17V18.1H13.04C13.13,18.8 13.38,19.44 13.76,20H3V17C3,14.34 8.33,13 11,13M18.5,10H20L22,10V12H20V17.5A2.5,2.5 0 0,1 17.5,20A2.5,2.5 0 0,1 15,17.5A2.5,2.5 0 0,1 17.5,15C17.86,15 18.19,15.07 18.5,15.21V10Z",layout:"grid",show_list_images:!0},contributing_artist:{icon:r,layout:"grid",show_list_images:!0},directory:{icon:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",layout:"grid",show_list_images:!0},episode:{icon:u,layout:"grid",thumbnail_ratio:"portrait",show_list_images:!0},game:{icon:"M7,6H17A6,6 0 0,1 23,12A6,6 0 0,1 17,18C15.22,18 13.63,17.23 12.53,16H11.47C10.37,17.23 8.78,18 7,18A6,6 0 0,1 1,12A6,6 0 0,1 7,6M6,9V11H4V13H6V15H8V13H10V11H8V9H6M15.5,12A1.5,1.5 0 0,0 14,13.5A1.5,1.5 0 0,0 15.5,15A1.5,1.5 0 0,0 17,13.5A1.5,1.5 0 0,0 15.5,12M18.5,9A1.5,1.5 0 0,0 17,10.5A1.5,1.5 0 0,0 18.5,12A1.5,1.5 0 0,0 20,10.5A1.5,1.5 0 0,0 18.5,9Z",layout:"grid",thumbnail_ratio:"portrait"},genre:{icon:"M8.11,19.45C5.94,18.65 4.22,16.78 3.71,14.35L2.05,6.54C1.81,5.46 2.5,4.4 3.58,4.17L13.35,2.1L13.38,2.09C14.45,1.88 15.5,2.57 15.72,3.63L16.07,5.3L20.42,6.23H20.45C21.5,6.47 22.18,7.53 21.96,8.59L20.3,16.41C19.5,20.18 15.78,22.6 12,21.79C10.42,21.46 9.08,20.61 8.11,19.45V19.45M20,8.18L10.23,6.1L8.57,13.92V13.95C8,16.63 9.73,19.27 12.42,19.84C15.11,20.41 17.77,18.69 18.34,16L20,8.18M16,16.5C15.37,17.57 14.11,18.16 12.83,17.89C11.56,17.62 10.65,16.57 10.5,15.34L16,16.5M8.47,5.17L4,6.13L5.66,13.94L5.67,13.97C5.82,14.68 6.12,15.32 6.53,15.87C6.43,15.1 6.45,14.3 6.62,13.5L7.05,11.5C6.6,11.42 6.21,11.17 6,10.81C6.06,10.2 6.56,9.66 7.25,9.5C7.33,9.5 7.4,9.5 7.5,9.5L8.28,5.69C8.32,5.5 8.38,5.33 8.47,5.17M15.03,12.23C15.35,11.7 16.03,11.42 16.72,11.57C17.41,11.71 17.91,12.24 18,12.86C17.67,13.38 17,13.66 16.3,13.5C15.61,13.37 15.11,12.84 15.03,12.23M10.15,11.19C10.47,10.66 11.14,10.38 11.83,10.53C12.5,10.67 13.03,11.21 13.11,11.82C12.78,12.34 12.11,12.63 11.42,12.5C10.73,12.33 10.23,11.8 10.15,11.19M11.97,4.43L13.93,4.85L13.77,4.05L11.97,4.43Z",layout:"grid",show_list_images:!0},image:{icon:"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",layout:"grid",show_list_images:!0},movie:{icon:"M18,4L20,8H17L15,4H13L15,8H12L10,4H8L10,8H7L5,4H4A2,2 0 0,0 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V4H18Z",thumbnail_ratio:"portrait",layout:"grid",show_list_images:!0},music:{icon:"M21,3V15.5A3.5,3.5 0 0,1 17.5,19A3.5,3.5 0 0,1 14,15.5A3.5,3.5 0 0,1 17.5,12C18.04,12 18.55,12.12 19,12.34V6.47L9,8.6V17.5A3.5,3.5 0 0,1 5.5,21A3.5,3.5 0 0,1 2,17.5A3.5,3.5 0 0,1 5.5,14C6.04,14 6.55,14.12 7,14.34V6L21,3Z",show_list_images:!0},playlist:{icon:"M15,6H3V8H15V6M15,10H3V12H15V10M3,16H11V14H3V16M17,6V14.18C16.69,14.07 16.35,14 16,14A3,3 0 0,0 13,17A3,3 0 0,0 16,20A3,3 0 0,0 19,17V8H22V6H17Z",layout:"grid",show_list_images:!0},podcast:{icon:"M17,18.25V21.5H7V18.25C7,16.87 9.24,15.75 12,15.75C14.76,15.75 17,16.87 17,18.25M12,5.5A6.5,6.5 0 0,1 18.5,12C18.5,13.25 18.15,14.42 17.54,15.41L16,14.04C16.32,13.43 16.5,12.73 16.5,12C16.5,9.5 14.5,7.5 12,7.5C9.5,7.5 7.5,9.5 7.5,12C7.5,12.73 7.68,13.43 8,14.04L6.46,15.41C5.85,14.42 5.5,13.25 5.5,12A6.5,6.5 0 0,1 12,5.5M12,1.5A10.5,10.5 0 0,1 22.5,12C22.5,14.28 21.77,16.39 20.54,18.11L19.04,16.76C19.96,15.4 20.5,13.76 20.5,12A8.5,8.5 0 0,0 12,3.5A8.5,8.5 0 0,0 3.5,12C3.5,13.76 4.04,15.4 4.96,16.76L3.46,18.11C2.23,16.39 1.5,14.28 1.5,12A10.5,10.5 0 0,1 12,1.5M12,9.5A2.5,2.5 0 0,1 14.5,12A2.5,2.5 0 0,1 12,14.5A2.5,2.5 0 0,1 9.5,12A2.5,2.5 0 0,1 12,9.5Z",layout:"grid"},season:{icon:u,layout:"grid",thumbnail_ratio:"portrait",show_list_images:!0},track:{icon:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M13,13H11V18A2,2 0 0,1 9,20A2,2 0 0,1 7,18A2,2 0 0,1 9,16C9.4,16 9.7,16.1 10,16.3V11H13V13M13,9V3.5L18.5,9H13Z"},tv_show:{icon:u,layout:"grid",thumbnail_ratio:"portrait"},url:{icon:"M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.93 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.65 9.66,10H14.34C14.43,10.65 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,8H5.08C6.03,6.34 7.57,5.06 9.4,4.44C8.8,5.55 8.35,6.75 8,8M5.08,16H8C8.35,17.25 8.8,18.45 9.4,19.56C7.57,18.93 6.03,17.65 5.08,16M4.26,14C4.1,13.36 4,12.69 4,12C4,11.31 4.1,10.64 4.26,10H7.64C7.56,10.66 7.5,11.32 7.5,12C7.5,12.68 7.56,13.34 7.64,14M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.07 17.96,6.34 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},video:{icon:"M17,10.5V7A1,1 0 0,0 16,6H4A1,1 0 0,0 3,7V17A1,1 0 0,0 4,18H16A1,1 0 0,0 17,17V13.5L21,17.5V6.5L17,10.5Z",layout:"grid",show_list_images:!0}},_=(e,t,i,a)=>e.callWS({type:"media_player/browse_media",entity_id:t,media_content_id:i,media_content_type:a}),m=e=>{let t=e.attributes.media_position;return"playing"!==e.state?t:(t+=(Date.now()-new Date(e.attributes.media_position_updated_at).getTime())/1e3,t<0?0:t)},f=e=>{let t;switch(e.attributes.media_content_type){case"music":case"image":t=e.attributes.media_artist;break;case"playlist":t=e.attributes.media_playlist||e.attributes.media_artist;break;case"tvshow":t=e.attributes.media_series_title,e.attributes.media_season&&(t+=" S"+e.attributes.media_season,e.attributes.media_episode&&(t+="E"+e.attributes.media_episode));break;case"channel":t=e.attributes.media_channel;break;default:t=e.attributes.app_name||""}return t},y=(e,t=!1)=>{if(!e)return;const i=e.state;if((0,n.g0)(i))return;if(!(0,a.a)(e))return(0,s.$)(e,128)?[{icon:d,action:"turn_on"}]:void 0;const o=[];(0,s.$)(e,256)&&o.push({icon:d,action:"turn_off"});const r=!0===e.attributes.assumed_state,u=e.attributes;return("playing"===i||"paused"===i||r)&&(0,s.$)(e,32768)&&t&&o.push({icon:!0===u.shuffle?"M14.83,13.41L13.42,14.82L16.55,17.95L14.5,20H20V14.5L17.96,16.54L14.83,13.41M14.5,4L16.54,6.04L4,18.59L5.41,20L17.96,7.46L20,9.5V4M10.59,9.17L5.41,4L4,5.41L9.17,10.58L10.59,9.17Z":"M16,4.5V7H5V9H16V11.5L19.5,8M16,12.5V15H5V17H16V19.5L19.5,16",action:"shuffle_set"}),("playing"===i||"paused"===i||r)&&(0,s.$)(e,16)&&o.push({icon:"M6,18V6H8V18H6M9.5,12L18,6V18L9.5,12Z",action:"media_previous_track"}),!r&&("playing"===i&&((0,s.$)(e,1)||(0,s.$)(e,4096))||("paused"===i||"idle"===i)&&(0,s.$)(e,16384)||"on"===i&&((0,s.$)(e,16384)||(0,s.$)(e,1)))&&o.push({icon:"on"===i?"M3,5V19L11,12M13,19H16V5H13M18,5V19H21V5":"playing"!==i?c:(0,s.$)(e,1)?l:h,action:"playing"!==i?"media_play":(0,s.$)(e,1)?"media_pause":"media_stop"}),r&&(0,s.$)(e,16384)&&o.push({icon:c,action:"media_play"}),r&&(0,s.$)(e,1)&&o.push({icon:l,action:"media_pause"}),r&&(0,s.$)(e,4096)&&o.push({icon:h,action:"media_stop"}),("playing"===i||"paused"===i||r)&&(0,s.$)(e,32)&&o.push({icon:"M16,18H18V6H16M6,18L14.5,12L6,6V18Z",action:"media_next_track"}),("playing"===i||"paused"===i||r)&&(0,s.$)(e,262144)&&t&&o.push({icon:"all"===u.repeat?"M17,17H7V14L3,18L7,22V19H19V13H17M7,7H17V10L21,6L17,2V5H5V11H7V7Z":"one"===u.repeat?"M13,15V9H12L10,10V11H11.5V15M17,17H7V14L3,18L7,22V19H19V13H17M7,7H17V10L21,6L17,2V5H5V11H7V7Z":"M2,5.27L3.28,4L20,20.72L18.73,22L15.73,19H7V22L3,18L7,14V17H13.73L7,10.27V11H5V8.27L2,5.27M17,13H19V17.18L17,15.18V13M17,5V2L21,6L17,10V7H8.82L6.82,5H17Z",action:"repeat_set"}),o.length>0?o:void 0},b=e=>{if(void 0===e||e===1/0)return"";const t=Math.max(0,Math.floor(e)),i=Math.floor(t/3600),a=Math.floor(t%3600/60),s=t%60,n=e=>e.toString().padStart(2,"0");return i>0?`${n(i)}:${n(a)}:${n(s)}`:`${n(a)}:${n(s)}`},w=e=>{if(!e)return;const t=e.indexOf("?authSig=");let i=t>0?e.slice(0,t):e;return i.startsWith("http")&&(i=decodeURIComponent(i.split("/").pop())),i},$=(e,t,i)=>e.callService("media_player","volume_set",{entity_id:t,volume_level:i}),C=(e,t,i)=>e.callService("media_player",i,"shuffle_set"===i?{entity_id:t.entity_id,shuffle:!t.attributes.shuffle}:"repeat_set"===i?{entity_id:t.entity_id,repeat:"all"===t.attributes.repeat?"one":"off"===t.attributes.repeat?"all":"off"}:{entity_id:t.entity_id}),x=(e,t,i,a,s={})=>(!s.enqueue&&void 0===s.announce&&(0,o.ni)(i)&&(s.announce=!0),e.callService("media_player","play_media",Object.assign({entity_id:t,media_content_id:i,media_content_type:a},s))),k=(e,t,i)=>e.callService("media_player","join",{group_members:i},{entity_id:t}),A=(e,t)=>e.callService("media_player","unjoin",{},{entity_id:t})},86973:function(e,t,i){i.d(t,{_:function(){return _}});i(18111),i(22489),i(7588),i(61701),i(3362),i(62953);var a=i(96196),s=(i(11382),i(65063)),n=i(59241);let o,r,l,c,d,h,u,p,g,v=e=>e;const _=async(e,t,i)=>{const _=await(0,n.BM)(t,i),m=Object.entries(_),f=m.filter(([e,t])=>t&&e!==t).map(([e,t])=>(0,a.qy)(o||(o=v`<tr> <td>${0}</td> <td>${0}</td> </tr>`),e,t)),y=m.filter(([e,t])=>null===t).map(([e])=>(0,a.qy)(r||(r=v`<li>${0}</li>`),e)),b=m.filter(([e,t])=>e===t).map(([e])=>(0,a.qy)(l||(l=v`<li>${0}</li>`),e));f.length?(0,s.dk)(e,{title:t.localize("ui.dialogs.recreate_entity_ids.confirm_rename_title"),text:(0,a.qy)(c||(c=v`${0} <br><br> <ha-expansion-panel outlined> <span slot="header">${0}</span> <div style="overflow:auto"> <table style="width:100%;text-align:var(--float-start)"> <tr> <th>${0}</th> <th>${0}</th> </tr> ${0} </table> </div> </ha-expansion-panel> ${0} ${0}`),t.localize("ui.dialogs.recreate_entity_ids.confirm_rename_warning"),t.localize("ui.dialogs.recreate_entity_ids.will_rename",{count:f.length}),t.localize("ui.dialogs.recreate_entity_ids.old"),t.localize("ui.dialogs.recreate_entity_ids.new"),f,y.length?(0,a.qy)(d||(d=v`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${0}</span> ${0} </ha-expansion-panel>`),t.localize("ui.dialogs.recreate_entity_ids.cant_rename",{count:y.length}),y):a.s6,b.length?(0,a.qy)(h||(h=v`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${0}</span> ${0} </ha-expansion-panel>`),t.localize("ui.dialogs.recreate_entity_ids.wont_change",{count:b.length}),b):a.s6),confirmText:t.localize("ui.common.update"),dismissText:t.localize("ui.common.cancel"),destructive:!0,confirm:()=>{m.filter(([e,t])=>t&&e!==t).forEach(([i,a])=>(0,n.G_)(t,i,{new_entity_id:a}).catch(a=>{(0,s.showAlertDialog)(e,{title:t.localize("ui.dialogs.recreate_entity_ids.update_entity_error",{entityId:i}),text:a.message})}))}}):(0,s.showAlertDialog)(e,{title:t.localize("ui.dialogs.recreate_entity_ids.confirm_no_renamable_entity_ids"),text:(0,a.qy)(u||(u=v`${0} ${0}`),y.length?(0,a.qy)(p||(p=v`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${0}</span> ${0} </ha-expansion-panel>`),t.localize("ui.dialogs.recreate_entity_ids.cant_rename",{count:y.length}),y):a.s6,b.length?(0,a.qy)(g||(g=v`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${0}</span> ${0} </ha-expansion-panel>`),t.localize("ui.dialogs.recreate_entity_ids.wont_change",{count:b.length}),b):a.s6)})}},81023:function(e,t,i){i.d(t,{L:function(){return n}});i(3362),i(62953);var a=i(1087);const s=()=>Promise.all([i.e("92769"),i.e("62453"),i.e("26767"),i.e("63577"),i.e("34995"),i.e("4939"),i.e("78312"),i.e("52980"),i.e("26233"),i.e("39005"),i.e("8851"),i.e("55076"),i.e("88598")]).then(i.bind(i,85027)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"ha-voice-assistant-setup-dialog",dialogImport:s,dialogParams:t})}},28794:function(e,t,i){i.a(e,async function(e,a){try{i.r(t);i(62953);var s=i(40445),n=i(96196),o=i(77845),r=i(91926),l=(i(90248),i(18350)),c=(i(2054),i(38962),e([l]));l=(c.then?(await c)():c)[0];let d,h,u,p,g,v=e=>e;class _ extends n.WF{render(){var e,t;return(0,n.qy)(d||(d=v` ${0} <div class="content"> <ha-alert alert-type="error">${0}</ha-alert> <slot> <ha-button appearance="plain" size="small" @click="${0}"> ${0} </ha-button> </slot> </div> `),this.toolbar?(0,n.qy)(h||(h=v`<div class="toolbar"> ${0} </div>`),this.rootnav||null!==(e=history.state)&&void 0!==e&&e.root?(0,n.qy)(u||(u=v` <ha-menu-button .hass="${0}" .narrow="${0}"></ha-menu-button> `),this.hass,this.narrow):(0,n.qy)(p||(p=v` <ha-icon-button-arrow-prev .hass="${0}" @click="${0}"></ha-icon-button-arrow-prev> `),this.hass,this._handleBack)):"",this.error,this._handleBack,null===(t=this.hass)||void 0===t?void 0:t.localize("ui.common.back"))}_handleBack(){(0,r.O)()}static get styles(){return[(0,n.AH)(g||(g=v`:host{display:block;height:100%;background-color:var(--primary-background-color)}.toolbar{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);padding:8px 12px;pointer-events:none;background-color:var(--app-header-background-color);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}ha-icon-button-arrow-prev{pointer-events:auto}.content{color:var(--primary-text-color);height:calc(100% - var(--header-height));display:flex;padding:16px;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}a{color:var(--primary-color)}ha-alert{margin-bottom:16px}`))]}constructor(...e){super(...e),this.toolbar=!0,this.rootnav=!1,this.narrow=!1}}(0,s.Cg)([(0,o.MZ)({attribute:!1})],_.prototype,"hass",void 0),(0,s.Cg)([(0,o.MZ)({type:Boolean})],_.prototype,"toolbar",void 0),(0,s.Cg)([(0,o.MZ)({type:Boolean})],_.prototype,"rootnav",void 0),(0,s.Cg)([(0,o.MZ)({type:Boolean})],_.prototype,"narrow",void 0),(0,s.Cg)([(0,o.MZ)()],_.prototype,"error",void 0),_=(0,s.Cg)([(0,o.EM)("hass-error-screen")],_),a()}catch(d){a(d)}})},81310:function(e,t,i){i(62953);var a=i(40445),s=i(96196),n=i(77845),o=i(94333),r=i(26218),l=i(91926),c=(i(90248),i(2054),i(14503));let d,h,u,p,g,v=e=>e;class _ extends s.WF{render(){var e;return(0,s.qy)(d||(d=v` <div class="toolbar ${0}"> <div class="toolbar-content"> ${0} <div class="main-title"> <slot name="header">${0}</slot> </div> <slot name="toolbar-icon"></slot> </div> </div> <div class="content ha-scrollbar" @scroll="${0}"> <slot></slot> </div> <div id="fab"> <slot name="fab"></slot> </div> `),(0,o.H)({narrow:this.narrow}),this.mainPage||null!==(e=history.state)&&void 0!==e&&e.root?(0,s.qy)(h||(h=v` <ha-menu-button .hass="${0}" .narrow="${0}"></ha-menu-button> `),this.hass,this.narrow):this.backPath?(0,s.qy)(u||(u=v` <a href="${0}"> <ha-icon-button-arrow-prev .hass="${0}"></ha-icon-button-arrow-prev> </a> `),this.backPath,this.hass):(0,s.qy)(p||(p=v` <ha-icon-button-arrow-prev .hass="${0}" @click="${0}"></ha-icon-button-arrow-prev> `),this.hass,this._backTapped),this.header,this._saveScrollPos)}_saveScrollPos(e){this._savedScrollPos=e.target.scrollTop}_backTapped(){this.backCallback?this.backCallback():(0,l.O)()}static get styles(){return[c.dp,(0,s.AH)(g||(g=v`:host{display:block;height:100%;background-color:var(--primary-background-color);overflow:hidden;position:relative}:host([narrow]){width:100%;position:fixed}.toolbar{background-color:var(--app-header-background-color);padding-top:var(--safe-area-inset-top);padding-right:var(--safe-area-inset-right)}:host([narrow]) .toolbar{padding-left:var(--safe-area-inset-left)}.toolbar-content{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box;padding:8px 12px}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{display:flex;align-items:center;pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{margin-inline-start:var(--ha-space-6);line-height:var(--ha-line-height-normal);min-width:0;flex-grow:1;overflow-wrap:break-word;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.narrow .main-title{margin-inline-start:var(--ha-space-2)}.content{position:relative;width:calc(100% - var(--safe-area-inset-right,0px));height:calc(100% - 1px - var(--header-height,0px) - var(--safe-area-inset-top,0px) - var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom,0px)));margin-bottom:var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom));margin-right:var(--safe-area-inset-right);overflow-y:auto;overflow:auto;-webkit-overflow-scrolling:touch}:host([narrow]) .content{width:calc(100% - var(--safe-area-inset-left,0px) - var(--safe-area-inset-right,0px));margin-left:var(--safe-area-inset-left)}#fab{position:absolute;right:calc(16px + var(--safe-area-inset-right,0px));inset-inline-end:calc(16px + var(--safe-area-inset-right,0px));inset-inline-start:initial;bottom:calc(16px + var(--safe-area-inset-bottom,0px));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:var(--ha-space-2)}:host([narrow]) #fab.tabs{bottom:calc(84px + var(--safe-area-inset-bottom,0px))}#fab[is-wide]{bottom:calc(24px + var(--safe-area-inset-bottom,0px));right:calc(24px + var(--safe-area-inset-right,0px));inset-inline-end:calc(24px + var(--safe-area-inset-right,0px));inset-inline-start:initial}`))]}constructor(...e){super(...e),this.mainPage=!1,this.narrow=!1}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],_.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)()],_.prototype,"header",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,attribute:"main-page"})],_.prototype,"mainPage",void 0),(0,a.Cg)([(0,n.MZ)({type:String,attribute:"back-path"})],_.prototype,"backPath",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],_.prototype,"backCallback",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],_.prototype,"narrow",void 0),(0,a.Cg)([(0,r.a)(".content")],_.prototype,"_savedScrollPos",void 0),(0,a.Cg)([(0,n.Ls)({passive:!0})],_.prototype,"_saveScrollPos",null),_=(0,a.Cg)([(0,n.EM)("hass-subpage")],_)},34023:function(e,t,i){i.d(t,{E:function(){return s},J:function(){return n}});i(3362),i(62953);var a=i(1087);const s=()=>Promise.all([i.e("73126"),i.e("44533"),i.e("92769"),i.e("62453"),i.e("85010"),i.e("80995"),i.e("10417"),i.e("42119"),i.e("26233"),i.e("39005"),i.e("8851"),i.e("66201"),i.e("21099"),i.e("99038"),i.e("35348"),i.e("53353")]).then(i.bind(i,39803)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-area-registry-detail",dialogImport:s,dialogParams:t})}},85728:function(e,t,i){i.a(e,async function(e,t){try{i(44114),i(18111),i(22489),i(7588),i(61701),i(3362),i(62953);var a=i(40445),s=i(96196),n=i(77845),o=i(94333),r=i(3890),l=i(81816),c=i(79461),d=i(18350),h=(i(76776),i(88945),i(8630),i(28732),i(59241)),u=i(85694),p=i(42269),g=i(55212),v=i(94225),_=i(12496),m=e([d,v,u]);[d,v,u]=m.then?(await m)():m;let f,y,b,w,$,C,x,k,A,L=e=>e;class M extends s.WF{shouldUpdate(e){return e.has("hass")&&1===e.size?(this._entityRows.forEach(e=>{e.hass=this.hass}),!1):(this._entityRows=[],!0)}render(){if(!this.entities.length)return(0,s.qy)(f||(f=L` <ha-card outlined .header="${0}"> <div class="empty card-content"> ${0} </div> </ha-card> `),this.header,this.hass.localize("ui.panel.config.devices.entities.none"));const e=[],t=[];return this.entities.forEach(i=>{i.disabled_by?this._extDisabledEntityEntries?t.push(this._extDisabledEntityEntries[i.entity_id]||i):t.push(i):e.push(i)}),(0,s.qy)(y||(y=L` <ha-card outlined .header="${0}"> ${0} ${0} <div class="card-actions"> <ha-button appearance="plain" @click="${0}"> ${0} </ha-button> </div> </ha-card> `),this.header,e.length?(0,s.qy)(b||(b=L` <div id="entities" class="move-up"> <ha-list> ${0} </ha-list> </div> `),e.map(e=>this.hass.states[e.entity_id]?this._renderEntity(e):this._renderEntry(e))):s.s6,t.length?(0,s.qy)(w||(w=L`<div class="${0}"> ${0} </div>`),(0,o.H)({"move-up":!e.length}),this.showHidden?(0,s.qy)(C||(C=L` <ha-list> ${0} </ha-list> <button class="show-more" @click="${0}"> ${0} </button> `),t.map(e=>this._renderEntry(e)),this._toggleShowHidden,this.hass.localize("ui.panel.config.devices.entities.show_less")):(0,s.qy)($||($=L` <button class="show-more" @click="${0}"> ${0} </button> `),this._toggleShowHidden,this.hass.localize("ui.panel.config.devices.entities.disabled_entities",{count:t.length}))):s.s6,this._addToLovelaceView,this.hass.localize("ui.panel.config.devices.entities.add_entities_lovelace"))}_toggleShowHidden(){if(this.showHidden=!this.showHidden,!this.showHidden||void 0!==this._extDisabledEntityEntries)return;this._extDisabledEntityEntries={};const e=this.entities.filter(e=>e.disabled_by),t=async()=>{if(0===e.length)return;const i=e.pop().entity_id,a=await(0,h.v)(this.hass,i);this._extDisabledEntityEntries[i]=a,this.requestUpdate("_extDisabledEntityEntries"),t()};t(),t(),t()}_renderEntity(e){const t={entity:e.entity_id},i=(0,v.T)(t);if(this.hass){i.hass=this.hass;const a=this.hass.states[e.entity_id];let s=(0,l.aH)(a,this.hass.entities,this.hass.devices)||this.deviceName;e.hidden_by&&(s+=` (${this.hass.localize("ui.panel.config.devices.entities.hidden")})`),t.name=s}return i.entry=e,this._entityRows.push(i),(0,s.qy)(x||(x=L` <div>${0}</div> `),i)}_renderEntry(e){const t=e.stateName||e.name||e.original_name,i=(0,r.T)((0,u.u7)(this.hass,e));return(0,s.qy)(k||(k=L` <ha-list-item graphic="icon" class="disabled-entry" .entry="${0}" @click="${0}"> <ha-icon slot="graphic" .icon="${0}"></ha-icon> <div class="name"> ${0} </div> </ha-list-item> `),e,this._openEditEntry,i,t?(0,c.p)(t,this.deviceName)||t:e.entity_id)}_openEditEntry(e){const t=e.currentTarget.entry;(0,p.p)(this,{entityId:t.entity_id})}_addToLovelaceView(){const e=this.entities.filter(e=>!e.disabled_by).map(e=>e.entity_id);(0,_.Q)(this,this.hass,(0,g.Bi)(this.hass,e,{title:this.deviceName}),(0,g.ZI)(e,{title:this.deviceName}),e)}constructor(...e){super(...e),this.showHidden=!1,this._entityRows=[]}}M.styles=(0,s.AH)(A||(A=L`:host{display:block}ha-icon{margin-left:-8px}.entity-id{color:var(--secondary-text-color)}.buttons{text-align:right;margin:0 0 0 8px}.disabled-entry{color:var(--secondary-text-color)}.move-up{margin-top:-13px}.move-up:has(> ha-list){margin-top:-24px}:not(.move-up)>ha-list{margin-top:-24px}.move-up+:not(:has(ha-list))>button.show-more,ha-list+button.show-more{margin-top:-12px}#entities>ha-list{margin:0 16px 0 8px}.name{font-size:var(--ha-font-size-m)}.name:dir(rtl){margin-inline-start:8px}.empty{text-align:center}button.show-more{color:var(--primary-color);text-align:left;cursor:pointer;background:0 0;border-width:initial;border-style:none;border-color:initial;border-image:initial;padding:16px;font:inherit}button.show-more:focus{outline:0;text-decoration:underline}ha-list>*{margin:8px 0px}ha-list-item{height:40px;--mdc-ripple-color:transparent}.card-actions{padding:4px 16px 4px 4px}`)),(0,a.Cg)([(0,n.MZ)()],M.prototype,"header",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],M.prototype,"deviceName",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],M.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],M.prototype,"entities",void 0),(0,a.Cg)([(0,n.MZ)({attribute:"show-hidden",type:Boolean})],M.prototype,"showHidden",void 0),(0,a.Cg)([(0,n.wk)()],M.prototype,"_extDisabledEntityEntries",void 0),M=(0,a.Cg)([(0,n.EM)("ha-device-entities-card")],M),t()}catch(f){t(f)}})},31005:function(e,t,i){i.a(e,async function(e,t){try{i(89463),i(74423),i(26910),i(18111),i(22489),i(61701),i(62953);var a=i(40445),s=i(96196),n=i(77845),o=i(22786),r=i(78870),l=i(36312),c=i(79),d=i(52220),h=i(31290),u=i(6030),p=(i(76776),i(88945),i(23430)),g=i(92557),v=i(54706),_=i(14503),m=e([p]);p=(m.then?(await m)():m)[0];let f,y,b,w,$,C,x,k,A,L,M,E,H,z,V,S,I,q=e=>e;class T extends((0,v.E)(s.WF)){hassSubscribe(){return[(0,g.o5)(this.hass.connection,e=>{this._labelRegistry=e})]}render(){const{map:e,ids:t}=this._labelsData(this._labelRegistry,this.device.labels,this.hass.locale.language);return(0,s.qy)(f||(f=q` <ha-card outlined .header="${0}"> <div class="card-content"> ${0} ${0} ${0} ${0} ${0} ${0} ${0} ${0} <slot></slot> </div> <slot name="actions"></slot> </ha-card> `),this.hass.localize("ui.panel.config.devices.device_info",{type:this.hass.localize(`ui.panel.config.devices.type.${this.device.entry_type||"device"}_heading`)}),this.device.model?(0,s.qy)(y||(y=q`<div class="model"> ${0} ${0} </div>`),this.device.model,this.device.model_id?(0,s.qy)(b||(b=q`(${0})`),this.device.model_id):""):this.device.model_id?(0,s.qy)(w||(w=q`<div class="model">${0}</div>`),this.device.model_id):"",this.device.manufacturer?(0,s.qy)($||($=q` <div class="manuf"> ${0} </div> `),this.hass.localize("ui.panel.config.integrations.config_entry.manuf",{manufacturer:this.device.manufacturer})):"",this.device.via_device_id?(0,s.qy)(C||(C=q` <div class="extra-info"> ${0} <span class="hub"><a href="/config/devices/device/${0}">${0}</a></span> </div> `),this.hass.localize("ui.panel.config.integrations.config_entry.via"),this.device.via_device_id,this._computeDeviceNameDisplay(this.device.via_device_id)):"",this.device.sw_version?(0,s.qy)(x||(x=q` <div class="extra-info"> ${0} </div> `),this.hass.localize("ui.panel.config.integrations.config_entry."+("service"!==this.device.entry_type||this.device.hw_version?"firmware":"version"),{version:this.device.sw_version})):"",this.device.hw_version?(0,s.qy)(k||(k=q` <div class="extra-info"> ${0} </div> `),this.hass.localize("ui.panel.config.integrations.config_entry.hardware",{version:this.device.hw_version})):"",this.device.serial_number?(0,s.qy)(A||(A=q` <div class="extra-info"> ${0} </div> `),this.hass.localize("ui.panel.config.integrations.config_entry.serial_number",{serial_number:this.device.serial_number})):"",this._getAddresses().map(([e,t])=>(0,s.qy)(L||(L=q` <div class="extra-info"> ${0} </div> `),"bluetooth"===e&&(0,l.x)(this.hass,"bluetooth")?(0,s.qy)(M||(M=q`${0}: <a href="/config/bluetooth/advertisement-monitor?${0}">${0}</a>`),(0,h.n)(e),(0,u.KH)({address:t}),t.toUpperCase()):"mac"===e&&(0,l.x)(this.hass,"dhcp")?(0,s.qy)(E||(E=q`MAC: <a href="/config/dhcp?${0}">${0}</a>`),(0,u.KH)({mac_address:t}),t.toUpperCase()):(0,s.qy)(H||(H=q`${0}: ${0}`),"mac"===e?"MAC":(0,h.n)(e),t.toUpperCase()))),t.length>0?(0,s.qy)(z||(z=q` <div class="extra-info labels"> ${0} </div> `),t.map(t=>{const i=e.get(t),a=null!=i&&i.color&&"string"==typeof i.color?(0,r.MP)(i.color):void 0;return(0,s.qy)(V||(V=q` <ha-label style="${0}" .description="${0}"> ${0} ${0} </ha-label> `),a?`--color: ${a}`:"",null==i?void 0:i.description,null!=i&&i.icon?(0,s.qy)(S||(S=q`<ha-icon slot="icon" .icon="${0}"></ha-icon>`),i.icon):s.s6,(null==i?void 0:i.name)||t)})):s.s6)}_getAddresses(){return this.device.connections.filter(e=>["mac","bluetooth","zigbee"].includes(e[0]))}_computeDeviceNameDisplay(e){const t=this.hass.devices[e];return t?(0,c.T)(t,this.hass):`<${this.hass.localize("ui.panel.config.integrations.config_entry.unknown_via_device")}>`}static get styles(){return[_.RF,(0,s.AH)(I||(I=q`:host{display:block}ha-card{flex:1 0 100%;min-width:0}.device{width:30%}.labels{display:flex;flex-wrap:wrap;gap:var(--ha-space-1);width:100%;max-width:100%}.labels ha-label{min-width:0;max-width:100%;flex:0 1 auto}ha-label{--ha-label-background-color:var(--color, var(--grey-color));--ha-label-background-opacity:0.5;--ha-label-text-color:var(--primary-text-color);--ha-label-icon-color:var(--primary-text-color)}.extra-info{margin-top:var(--ha-space-2);word-wrap:break-word}.manuf,.model{color:var(--secondary-text-color);word-wrap:break-word}`))]}constructor(...e){super(...e),this.narrow=!1,this._labelsData=(0,o.A)((e,t,i)=>{const a=e?new Map(e.map(e=>[e.label_id,e])):new Map,s=[...t].sort((e,t)=>{var s,n;return(0,d.xL)((null===(s=a.get(e))||void 0===s?void 0:s.name)||e,(null===(n=a.get(t))||void 0===n?void 0:n.name)||t,i)});return{map:a,ids:s}})}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],T.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],T.prototype,"device",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean})],T.prototype,"narrow",void 0),(0,a.Cg)([(0,n.wk)()],T.prototype,"_labelRegistry",void 0),T=(0,a.Cg)([(0,n.EM)("ha-device-info-card")],T),t()}catch(f){t(f)}})},97605:function(e,t,i){i(26910),i(18111),i(22489),i(61701),i(62953);var a=i(40445),s=i(96196),n=i(77845),o=i(22786),r=i(79),l=i(52220);i(76776),i(43661),i(28732);let c,d,h,u,p=e=>e;class g extends s.WF{render(){const e=this._viaDevices(this.deviceId,this.hass.devices);return 0===e.length?s.s6:(0,s.qy)(c||(c=p` <ha-card> <h1 class="card-header"> ${0} </h1> ${0} ${0} </ha-card> `),this.hass.localize("ui.panel.config.devices.connected_devices.heading"),(this._showAll?e:e.slice(0,10)).map(e=>(0,s.qy)(d||(d=p` <a href="${0}"> <ha-list-item hasMeta> ${0} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a> `),`/config/devices/device/${e.id}`,(0,r.T)(e,this.hass))),!this._showAll&&e.length>10?(0,s.qy)(h||(h=p` <button class="show-more" @click="${0}"> ${0} </button> `),this._toggleShowAll,this.hass.localize("ui.panel.config.devices.connected_devices.show_more",{count:e.length-10})):"")}_toggleShowAll(){this._showAll=!this._showAll}constructor(...e){super(...e),this._showAll=!1,this._viaDevices=(0,o.A)((e,t)=>Object.values(t).filter(t=>t.via_device_id===e).sort((e,t)=>(0,l.SH)((0,r.T)(e,this.hass),(0,r.T)(t,this.hass),this.hass.locale.language)))}}g.styles=(0,s.AH)(u||(u=p`:host{display:block}.card-header{padding-bottom:0}a{text-decoration:none;color:var(--primary-text-color)}button.show-more{color:var(--primary-color);text-align:left;cursor:pointer;background:0 0;border-width:initial;border-style:none;border-color:initial;border-image:initial;padding:16px;font:inherit}button.show-more:focus{outline:0;text-decoration:underline}`)),(0,a.Cg)([(0,n.MZ)({attribute:!1})],g.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],g.prototype,"deviceId",void 0),(0,a.Cg)([(0,n.wk)()],g.prototype,"_showAll",void 0),g=(0,a.Cg)([(0,n.EM)("ha-device-via-devices-card")],g)},49858:function(e,t,i){i.d(t,{V:function(){return n}});i(3362),i(62953);var a=i(1087);const s=()=>i.e("3507").then(i.bind(i,80830)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-device-automation",dialogImport:s,dialogParams:t})}},8872:function(e,t,i){i.d(t,{F:function(){return s},_:function(){return n}});i(3362),i(62953);var a=i(1087);const s=()=>Promise.all([i.e("92769"),i.e("62453"),i.e("40469"),i.e("26233"),i.e("39005"),i.e("66201"),i.e("11444")]).then(i.bind(i,22756)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-device-registry-detail",dialogImport:s,dialogParams:t})}},98129:function(e,t,i){i.a(e,async function(e,t){try{i(74423),i(44114),i(26910),i(18111),i(22489),i(20116),i(7588),i(61701),i(13579),i(3362),i(27495),i(25440),i(62953);var a=i(40445),s=(i(94422),i(16527)),n=i(96196),o=i(77845),r=i(32288),l=i(22786),c=i(36312),d=i(46190),h=i(79),u=i(71727),p=i(81816),g=i(69093),v=i(28978),_=i(52220),m=i(80880),f=i(5911),y=(i(72945),i(38962),i(18350)),b=i(29823),w=(i(70947),i(26300),i(43661),i(67094),i(34127)),$=i(62351),C=i(82e3),x=i(77423),k=i(38911),A=i(28989),L=i(96204),M=i(59241),E=i(95350),H=i(86973),z=i(34884),V=i(71606),S=i(65063),I=i(81023),q=i(28794),T=(i(81310),i(14503)),Z=i(44144),D=i(30039),O=i(89434),P=i(85728),j=i(31005),R=(i(97605),i(49858)),U=i(8872),F=e([y,b,w,q,O,P,j]);[y,b,w,q,O,P,j]=F.then?(await F)():F;let B,W,N,G,J,K,Y,Q,X,ee,te,ie,ae,se,ne,oe,re,le,ce,de,he,ue,pe,ge,ve,_e,me,fe,ye,be,we,$e,Ce,xe,ke,Ae,Le,Me=e=>e;const Ee="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",He="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",ze="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",Ve="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",Se="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z",Ie="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z",qe="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",Te="M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",Ze="M13,3A9,9 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3Z",De="M11,13.5V21.5H3V13.5H11M9,15.5H5V19.5H9V15.5M12,2L17.5,11H6.5L12,2M12,5.86L10.08,9H13.92L12,5.86M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13M17.5,15A2.5,2.5 0 0,0 15,17.5A2.5,2.5 0 0,0 17.5,20A2.5,2.5 0 0,0 20,17.5A2.5,2.5 0 0,0 17.5,15Z",Oe=3e4;class Pe extends n.WF{willUpdate(e){super.willUpdate(e),e.has("deviceId")&&(this._deviceActions=[],this._deviceAlerts=[],this._deleteButtons=[],this._diagnosticDownloadLinks=[]),(e.has("deviceId")||e.has("entries"))&&this._fetchData()}firstUpdated(e){super.firstUpdated(e),(0,U.F)()}updated(e){super.updated(e),e.has("deviceId")&&this._findRelated()}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this._deviceAlertsActionsTimeout)}render(){var e,t,i,a,s,o;if(!this.hass||!this.deviceId)return n.s6;const l=this.hass.devices[this.deviceId];if(!l)return(0,n.qy)(B||(B=Me` <hass-error-screen .hass="${0}" .error="${0}"></hass-error-screen> `),this.hass,this.hass.localize("ui.panel.config.devices.device_not_found"));const d=(0,h.T)(l,this.hass),u=this._integrations(l,this.entries,this.manifests),p=this._entities(this.deviceId,this._entityReg),_=this._entitiesByCategory(p),f=this._batteryEntity(p),y=this._batteryChargingEntity(p),b=f?this.hass.states[f.entity_id]:void 0,w=b?(0,g.t)(b):void 0,$=y?this.hass.states[y.entity_id]:void 0,C=l.area_id?this.hass.areas[l.area_id]:void 0,x=u.map(e=>{var t;return(0,n.qy)(W||(W=Me`<a slot="actions" href="${0}"> <ha-list-item graphic="icon" hasMeta> <img slot="graphic" alt="${0}" src="${0}" crossorigin="anonymous" referrerpolicy="no-referrer" @error="${0}" @load="${0}"> ${0} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a>`),`/config/integrations/integration/${e.domain}#config_entry=${e.entry_id}`,(0,E.p$)(this.hass.localize,e.domain),(0,Z.MR)({domain:e.domain,type:"icon",darkOptimized:null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode}),this._onImageError,this._onImageLoad,(0,E.p$)(this.hass.localize,e.domain))}),k=[...this._deviceActions||[]];Array.isArray(this._diagnosticDownloadLinks)&&k.push(...this._diagnosticDownloadLinks),this._deleteButtons&&k.push(...this._deleteButtons),k.sort((e,t)=>"warning"===e.classes&&"warning"!==t.classes?1:"warning"!==e.classes&&"warning"===t.classes?-1:0);const A=k.shift();l.disabled_by&&x.push((0,n.qy)(N||(N=Me` <ha-alert alert-type="warning"> ${0} </ha-alert> ${0} `),this.hass.localize("ui.panel.config.devices.enabled_cause",{type:this.hass.localize(`ui.panel.config.devices.type.${l.entry_type||"device"}`),cause:this.hass.localize(`ui.panel.config.devices.disabled_by.${l.disabled_by}`)}),"user"===l.disabled_by?(0,n.qy)(G||(G=Me` <div class="card-actions" slot="actions"> <ha-button variant="warning" size="small" @click="${0}"> ${0} </ha-button> </div> `),this._enableDevice,this.hass.localize("ui.common.enable")):"")),this._renderIntegrationInfo(l,u,x);const L=l.disabled_by?this.hass.localize("ui.panel.config.devices.add_prompt_disabled"):this.hass.localize("ui.panel.config.devices.add_prompt_enabled"),M=(0,c.x)(this.hass,"automation")?(0,n.qy)(J||(J=Me` <ha-card outlined> <h1 class="card-header"> ${0} <ha-icon-button @click="${0}" .disabled="${0}" .label="${0}" .path="${0}"></ha-icon-button> </h1> ${0} </ha-card> `),this.hass.localize("ui.panel.config.devices.automation.automations_heading"),this._showAutomationDialog,l.disabled_by,l.disabled_by?this.hass.localize("ui.panel.config.devices.automation.create_disable",{type:this.hass.localize(`ui.panel.config.devices.type.${l.entry_type||"device"}`)}):this.hass.localize("ui.panel.config.devices.automation.create",{type:this.hass.localize(`ui.panel.config.devices.type.${l.entry_type||"device"}`)}),Te,null!==(e=this._related)&&void 0!==e&&null!==(e=e.automation)&&void 0!==e&&e.length?(0,n.qy)(K||(K=Me` <div class="items"> ${0} </div> `),this._getRelated(this._related).automation.map(e=>{const t=e;return t?(0,n.qy)(Y||(Y=Me`<a href="${0}"> <ha-list-item hasMeta .automation="${0}"> ${0} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a>`),(0,r.J)(t.attributes.id?`/config/automation/edit/${encodeURIComponent(t.attributes.id)}`:`/config/automation/show/${t.entity_id}`),t,(0,v.u)(t)):n.s6})):(0,n.qy)(Q||(Q=Me` <div class="card-content"> ${0} ${0} </div> `),this.hass.localize("ui.panel.config.devices.add_prompt",{name:this.hass.localize("ui.panel.config.devices.automation.automations"),type:this.hass.localize(`ui.panel.config.devices.type.${l.entry_type||"device"}`)}),L)):"",H=(0,c.x)(this.hass,"scene")&&p.length?(0,n.qy)(X||(X=Me` <ha-card outlined> <h1 class="card-header"> ${0} <ha-icon-button @click="${0}" .disabled="${0}" .label="${0}" .path="${0}"></ha-icon-button> </h1> ${0} </ha-card> `),this.hass.localize("ui.panel.config.devices.scene.scenes_heading"),this._createScene,l.disabled_by,l.disabled_by?this.hass.localize("ui.panel.config.devices.scene.create_disable",{type:this.hass.localize(`ui.panel.config.devices.type.${l.entry_type||"device"}`)}):this.hass.localize("ui.panel.config.devices.scene.create",{type:this.hass.localize(`ui.panel.config.devices.type.${l.entry_type||"device"}`)}),Te,null!==(t=this._related)&&void 0!==t&&null!==(t=t.scene)&&void 0!==t&&t.length?(0,n.qy)(ee||(ee=Me` <div class="items"> ${0} </div> `),this._getRelated(this._related).scene.map(e=>{const t=e;return t&&t.attributes.id?(0,n.qy)(te||(te=Me` <a href="${0}"> <ha-list-item hasMeta .scene="${0}"> ${0} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a> `),`/config/scene/edit/${t.attributes.id}`,t,(0,v.u)(t)):(0,n.qy)(ie||(ie=Me` <ha-list-item .id="scene-${0}" hasMeta .scene="${0}"> ${0} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> <ha-tooltip .for="scene-${0}" placement="left"> ${0} </ha-tooltip> `),(0,m.Y)(t.entity_id),t,(0,v.u)(t),(0,m.Y)(t.entity_id),this.hass.localize("ui.panel.config.devices.cant_edit"))})):(0,n.qy)(ae||(ae=Me` <div class="card-content"> ${0} ${0} </div> `),this.hass.localize("ui.panel.config.devices.add_prompt",{name:this.hass.localize("ui.panel.config.devices.scene.scenes"),type:this.hass.localize(`ui.panel.config.devices.type.${l.entry_type||"device"}`)}),L)):"",z=(0,c.x)(this.hass,"script")?(0,n.qy)(se||(se=Me` <ha-card outlined> <h1 class="card-header"> ${0} <ha-icon-button @click="${0}" .disabled="${0}" .label="${0}" .path="${0}"></ha-icon-button> </h1> ${0} </ha-card> `),this.hass.localize("ui.panel.config.devices.script.scripts_heading"),this._showScriptDialog,l.disabled_by,l.disabled_by?this.hass.localize("ui.panel.config.devices.script.create_disable",{type:this.hass.localize(`ui.panel.config.devices.type.${l.entry_type||"device"}`)}):this.hass.localize("ui.panel.config.devices.script.create",{type:this.hass.localize(`ui.panel.config.devices.type.${l.entry_type||"device"}`)}),Te,null!==(i=this._related)&&void 0!==i&&null!==(i=i.script)&&void 0!==i&&i.length?(0,n.qy)(ne||(ne=Me` <div class="items"> ${0} </div> `),this._getRelated(this._related).script.map(e=>{const t=e,i=this._entityReg.find(t=>t.entity_id===e.entity_id);let a=`/config/script/show/${t.entity_id}`;return i&&(a=`/config/script/edit/${i.unique_id}`),t?(0,n.qy)(oe||(oe=Me` <a href="${0}"> <ha-list-item hasMeta .script="${0}"> ${0} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a> `),a,e,(0,v.u)(t)):""})):(0,n.qy)(re||(re=Me` <div class="card-content"> ${0} ${0} </div> `),this.hass.localize("ui.panel.config.devices.add_prompt",{name:this.hass.localize("ui.panel.config.devices.script.scripts"),type:this.hass.localize(`ui.panel.config.devices.type.${l.entry_type||"device"}`)}),L)):"";return(0,n.qy)(le||(le=Me`<hass-subpage .hass="${0}" .narrow="${0}" .header="${0}"> <ha-icon-button slot="toolbar-icon" .path="${0}" @click="${0}" .label="${0}"></ha-icon-button> <ha-dropdown slot="toolbar-icon" @wa-select="${0}"> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> <a href="${0}"> <ha-dropdown-item> <ha-svg-icon .path="${0}" slot="icon"></ha-svg-icon> ${0} <ha-icon-next slot="details"></ha-icon-next> </ha-dropdown-item> </a> <wa-divider></wa-divider> <ha-dropdown-item value="reset_entity_ids"> <ha-svg-icon slot="icon" .path="${0}"></ha-svg-icon> ${0} </ha-dropdown-item> </ha-dropdown> <div class="container"> <div class="header fullwidth"> ${0} <div class="header-right"> ${0} ${0} </div> </div> <div class="column"> ${0} <ha-device-info-card .hass="${0}" .device="${0}"> ${0} ${0} </ha-device-info-card> ${0} </div> <div class="column"> ${0} <ha-device-via-devices-card .hass="${0}" .deviceId="${0}"></ha-device-via-devices-card> </div> <div class="column"> ${0} ${0} </div> </div> </hass-subpage>`),this.hass,this.narrow,d,qe,this._showSettings,this.hass.localize("ui.panel.config.devices.edit_settings"),this._handleToolbarMenuAction,this.hass.localize("ui.common.menu"),ze,`/config/entities?historyBack=1&device=${this.deviceId}`,De,this.hass.localize("ui.panel.config.integrations.config_entry.entities",{count:p.length}),Ze,this.hass.localize("ui.panel.config.devices.restore_entity_ids"),C?(0,n.qy)(ce||(ce=Me`<div class="header-name"> <a href="/config/areas/area/${0}">${0}</a> </div>`),C.area_id,this.hass.localize("ui.panel.config.integrations.config_entry.area",{area:C.name||"Unnamed Area"})):"",!b||"binary_sensor"!==w&&isNaN(b.state)?"":(0,n.qy)(de||(de=Me` <div class="battery"> ${0} <ha-battery-icon .hass="${0}" .batteryStateObj="${0}" .batteryChargingStateObj="${0}"></ha-battery-icon> </div> `),"sensor"===w?this.hass.formatEntityState(b):n.s6,this.hass,b,$),u.length?(0,n.qy)(he||(he=Me` <img alt="${0}" src="${0}" crossorigin="anonymous" referrerpolicy="no-referrer" @load="${0}" @error="${0}"> `),(0,E.p$)(this.hass.localize,u[0].domain),(0,Z.MR)({domain:u[0].domain,type:"logo",darkOptimized:null===(a=this.hass.themes)||void 0===a?void 0:a.darkMode}),this._onImageLoad,this._onImageError):"",null!==(s=this._deviceAlerts)&&void 0!==s&&s.length?(0,n.qy)(ue||(ue=Me` <div> ${0} </div> `),this._deviceAlerts.map(e=>(0,n.qy)(pe||(pe=Me` <ha-alert .alertType="${0}"> ${0} </ha-alert> `),e.level,e.text))):"",this.hass,l,x,A||k.length?(0,n.qy)(ge||(ge=Me` <div class="card-actions" slot="actions"> <ha-button href="${0}" rel="${0}" appearance="plain" target="${0}" class="${0}" .variant="${0}" .action="${0}" @click="${0}"> ${0} ${0} ${0} </ha-button> ${0} </div> `),(0,r.J)(A.href),(0,r.J)(A.target?"noreferrer":void 0),(0,r.J)(A.target),(0,r.J)(A.classes),null!==(o=A.classes)&&void 0!==o&&o.includes("warning")?"danger":"brand",A.action,this._deviceActionClicked,A.label,A.icon?(0,n.qy)(ve||(ve=Me` <ha-svg-icon class="${0}" .path="${0}" slot="start"></ha-svg-icon> `),(0,r.J)(A.classes),A.icon):n.s6,A.trailingIcon?(0,n.qy)(_e||(_e=Me` <ha-svg-icon .path="${0}" slot="end"></ha-svg-icon> `),A.trailingIcon):n.s6,k.length?(0,n.qy)(me||(me=Me` <ha-dropdown @wa-select="${0}" placement="bottom-end"> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> ${0} </ha-dropdown> `),this._deviceActionSelected,this.hass.localize("ui.common.menu"),ze,k.map((e,t)=>{var i;const a=(0,n.qy)(fe||(fe=Me`<ha-dropdown-item .value="${0}" .data="${0}" .variant="${0}"> ${0} ${0} ${0} </ha-dropdown-item>`),t,e,null!==(i=e.classes)&&void 0!==i&&i.includes("warning")?"danger":"default",e.icon?(0,n.qy)(ye||(ye=Me` <ha-svg-icon .path="${0}" slot="icon"></ha-svg-icon> `),e.icon):"",e.label,e.trailingIcon?(0,n.qy)(be||(be=Me` <ha-svg-icon slot="details" .path="${0}"></ha-svg-icon> `),e.trailingIcon):"");return e.href?(0,n.qy)(we||(we=Me`<a href="${0}" target="${0}" rel="${0}">${0} </a>`),e.href,(0,r.J)(e.target),(0,r.J)(e.target?"noreferrer":void 0),a):a})):""):"",this.narrow?"":[M,H,z],["control","sensor","notify","event","assist","config","diagnostic"].map(e=>_[e].length>0||0===p.length&&"control"===e?(0,n.qy)($e||($e=Me` <ha-device-entities-card .hass="${0}" .header="${0}" .deviceName="${0}" .entities="${0}" .showHidden="${0}"> </ha-device-entities-card> `),this.hass,this.hass.localize(`ui.panel.config.devices.entities.${e}`),d,_[e],null!==l.disabled_by):""),this.hass,this.deviceId,this.narrow?[M,H,z]:"",(0,c.x)(this.hass,"logbook")?(0,n.qy)(Ce||(Ce=Me` <ha-card outlined> <h1 class="card-header"> ${0} </h1> <ha-logbook .hass="${0}" .time="${0}" .entityIds="${0}" .deviceIds="${0}" virtualize narrow no-icon></ha-logbook> </ha-card> `),this.hass.localize("panel.logbook"),this.hass,this._logbookTime,this._entityIds(p),this._deviceIdInList(this.deviceId)):"")}_fetchData(){this.deviceId&&this.entries.length&&(this._getDiagnosticButtons(),this._getDeleteActions(),clearTimeout(this._deviceAlertsActionsTimeout),this._getDeviceActions(),this._getDeviceAlerts())}async _getDiagnosticButtons(){const e=this.deviceId;if(!(0,c.x)(this.hass,"diagnostics"))return;const t=this.hass.devices[this.deviceId];if(!t)return;let i=await Promise.all(this._integrations(t,this.entries,this.manifests).map(async e=>{if("loaded"!==e.state)return!1;let t;try{t=await(0,L.g9)(this.hass,e.domain)}catch(i){if("not_found"===i.code)return!1;throw i}return!(!t.handlers.device&&!t.handlers.config_entry)&&{link:t.handlers.device?(0,L.It)(e.entry_id,this.deviceId):(0,L.WV)(e.entry_id),domain:e.domain}}));i=i.filter(Boolean),this.deviceId===e&&i.length>0&&(this._diagnosticDownloadLinks=i.map(e=>({href:e.link,icon:Ve,action:e=>this._signUrl(e),label:i.length>1?this.hass.localize("ui.panel.config.devices.download_diagnostics_integration",{integration:(0,E.p$)(this.hass.localize,e.domain)}):this.hass.localize("ui.panel.config.devices.download_diagnostics")})))}_getDeleteActions(){const e=this.deviceId,t=this.hass.devices[this.deviceId];if(!t)return;const i=[];this._integrations(t,this.entries,this.manifests).forEach(e=>{"loaded"===e.state&&e.supports_remove_device&&i.push({action:async()=>{if(await(0,S.dk)(this,{text:this._integrations(t,this.entries,this.manifests).length>1?this.hass.localize("ui.panel.config.devices.confirm_delete_integration",{integration:(0,E.p$)(this.hass.localize,e.domain)}):this.hass.localize("ui.panel.config.devices.confirm_delete"),confirmText:this.hass.localize("ui.common.delete"),dismissText:this.hass.localize("ui.common.cancel"),destructive:!0}))try{await(0,A.nO)(this.hass,this.deviceId,e.entry_id)}catch(i){(0,S.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.devices.error_delete"),text:i.message})}},classes:"warning",icon:He,label:this._integrations(t,this.entries,this.manifests).length>1?this.hass.localize("ui.panel.config.devices.delete_device_integration",{integration:(0,E.p$)(this.hass.localize,e.domain)}):this.hass.localize("ui.panel.config.devices.delete_device")})}),this.deviceId===e&&i.length>0&&(this._deleteButtons=i)}async _getDeviceActions(){var e;const t=this.deviceId,a=this.hass.devices[this.deviceId];if(!a)return;const s=[],n=(null===(e=a.configuration_url)||void 0===e?void 0:e.startsWith("homeassistant://"))||!1,o=n?a.configuration_url.replace("homeassistant://","/"):a.configuration_url;o&&s.push({href:o,target:n?void 0:"_blank",icon:Ee,label:this.hass.localize("ui.panel.config.devices.open_configuration_url"),trailingIcon:Ie});const r=this._entities(this.deviceId,this._entityReg).find(e=>"assist_satellite"===(0,u.m)(e.entity_id)),l=this._integrations(a,this.entries,this.manifests).map(e=>e.domain);if(!l.includes("voip")&&r&&(0,$.KC)(this.hass.states[r.entity_id])&&s.push({action:this._voiceAssistantSetup,label:this.hass.localize("ui.panel.config.devices.set_up_voice_assistant"),icon:Se}),l.includes("mqtt")){const e=(await i.e("36284").then(i.bind(i,95959))).getMQTTDeviceActions(this,a);s.push(...e)}if(l.includes("zha")){const e=await i.e("80913").then(i.bind(i,35848)),t=await e.getZHADeviceActions(this,this.hass,a);s.push(...t)}if(l.includes("zwave_js")){const e=await i.e("37471").then(i.bind(i,61026)),t=await e.getZwaveDeviceActions(this,this.hass,a);s.push(...t)}if(l.includes("esphome")){const e=await i.e("45923").then(i.bind(i,55374)),t=await e.getESPHomeDeviceActions(this,this.hass,a);s.push(...t)}if(l.includes("matter")){const e=await i.e("62602").then(i.bind(i,52433)),n=e.getMatterDeviceDefaultActions(this,this.hass,a);s.push(...n),e.getMatterDeviceActions(this,this.hass,a).then(e=>{this.deviceId===t&&(this._deviceActions=[...e,...this._deviceActions||[]])})}this.deviceId===t&&(this._deviceActions=s)}async _getDeviceAlerts(){const e=this.deviceId,t=this.hass.devices[this.deviceId];if(!t)return;const a=[];if(this._integrations(t,this.entries,this.manifests).map(e=>e.domain).includes("zwave_js")){const e=await i.e("19203").then(i.bind(i,10958)),s=await e.getZwaveDeviceAlerts(this.hass,t);a.push(...s)}this.deviceId===e&&(this._deviceAlerts=a,a.length&&(this._deviceAlertsActionsTimeout=window.setTimeout(()=>{this._getDeviceAlerts(),this._getDeviceActions()},Oe)))}_computeEntityName(e){const t=this.hass.devices[this.deviceId];return(0,p.cx)(e,this.hass.devices)||(0,h.T)(t,this.hass)}_onImageLoad(e){e.target.style.display="inline-block"}_onImageError(e){e.target.style.display="none"}async _findRelated(){this._related=await(0,V.f)(this.hass,"device",this.deviceId)}_createScene(){const e={};this._entities(this.deviceId,this._entityReg).forEach(t=>{e[t.entity_id]=""}),(0,z.Tx)({entities:e})}_showScriptDialog(){(0,R.V)(this,{device:this.hass.devices[this.deviceId],entityReg:this._entityReg,script:!0})}_showAutomationDialog(){(0,R.V)(this,{device:this.hass.devices[this.deviceId],entityReg:this._entityReg,script:!1})}_renderIntegrationInfo(e,t,a){const s=t.map(e=>e.domain);s.includes("zha")&&(i.e("88330").then(i.bind(i,39057)),a.push((0,n.qy)(xe||(xe=Me` <ha-device-info-zha .hass="${0}" .device="${0}"></ha-device-info-zha> `),this.hass,e))),s.includes("zwave_js")&&(i.e("314").then(i.bind(i,13153)),a.push((0,n.qy)(ke||(ke=Me` <ha-device-info-zwave_js .hass="${0}" .device="${0}"></ha-device-info-zwave_js> `),this.hass,e))),s.includes("matter")&&(i.e("28838").then(i.bind(i,59077)),a.push((0,n.qy)(Ae||(Ae=Me` <ha-device-info-matter .hass="${0}" .device="${0}"></ha-device-info-matter> `),this.hass,e)))}_handleToolbarMenuAction(e){var t;"reset_entity_ids"===(null===(t=e.detail)||void 0===t||null===(t=t.item)||void 0===t?void 0:t.value)&&this._resetEntityIds()}async _enableDevice(){await(0,A.FB)(this.hass,this.deviceId,{disabled_by:null})}async _signUrl(e){const t=e.currentTarget.getAttribute("href")?e.currentTarget:e.currentTarget.closest("a"),i=await(0,C.e0)(this.hass,t.getAttribute("href"));(0,D.R)(i.path)}_deviceActionSelected(e){var t;const i=null===(t=e.detail)||void 0===t||null===(t=t.item)||void 0===t?void 0:t.data;null!=i&&i.action&&i.action(e)}_deviceActionClicked(e){e.currentTarget.action&&(e.preventDefault(),e.currentTarget.action(e))}static get styles(){return[T.RF,(0,n.AH)(Le||(Le=Me`.container{display:flex;flex-wrap:wrap;margin:auto;max-width:1000px;margin-top:var(--ha-space-8);margin-bottom:var(--ha-space-8)}:host([narrow]) .container{margin-top:0}.card-header{display:flex;align-items:center;justify-content:space-between;padding-bottom:var(--ha-space-3)}.card-header ha-icon-button{margin-right:calc(var(--ha-space-2) * -1);margin-inline-end:calc(var(--ha-space-2) * -1);margin-inline-start:initial;color:var(--primary-color);height:auto;direction:var(--direction)}.device-info{padding:var(--ha-space-4)}h1{margin:0;font-family:var(--ha-font-family-body);-webkit-font-smoothing:var(--ha-font-smoothing);-moz-osx-font-smoothing:var(--ha-moz-osx-font-smoothing);font-size:var(--ha-font-size-2xl);font-weight:var(--ha-font-weight-normal);line-height:var(--ha-line-height-condensed);opacity:var(--dark-primary-opacity)}.header{display:flex;justify-content:space-between}.header-name{display:flex;align-items:center;padding-left:var(--ha-space-2);padding-inline-start:var(--ha-space-2);padding-inline-end:initial;direction:var(--direction)}.column,.fullwidth{padding:var(--ha-space-2);box-sizing:border-box}.column{width:33%;flex-grow:1}.fullwidth{width:100%;flex-grow:1}.header-right{align-self:center}.header-right img{height:30px}.header-right{display:flex}.header-right:first-child{width:100%;justify-content:flex-end}.header-right>:not(:first-child){margin-left:var(--ha-space-4);margin-inline-start:var(--ha-space-4);margin-inline-end:initial;direction:var(--direction)}.battery{align-self:center;align-items:center;display:flex;white-space:nowrap}.column>:not(:first-child){margin-top:var(--ha-space-4)}:host([narrow]) .column{width:100%}a{text-decoration:none;color:var(--primary-color)}ha-card a{color:var(--primary-text-color)}ha-svg-icon[slot=trailingIcon]{display:block;width:18px;height:18px;margin-inline-start:var(--ha-space-2);margin-inline-end:initial}ha-svg-icon[slot=meta]{width:18px;height:18px}.items{padding-bottom:var(--ha-space-4)}ha-card:has(ha-logbook){padding-bottom:var(--ha-card-border-radius,var(--ha-border-radius-lg))}ha-logbook{height:400px}:host([narrow]) ha-logbook{height:235px}.card-actions{display:flex;justify-content:space-between;align-items:center;padding:var(--ha-space-1) var(--ha-space-4) var(--ha-space-1) var(--ha-space-1)}`))]}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this.showAdvanced=!1,this._diagnosticDownloadLinks=[],this._deleteButtons=[],this._deviceActions=[],this._deviceAlerts=[],this._logbookTime={recent:86400},this._integrations=(0,l.A)((e,t,i)=>{const a={};for(const o of t)a[o.entry_id]=o;const s={};for(const o of i)s[o.domain]=o;const n=e.config_entries.filter(e=>e in a).map(e=>a[e]);return(0,x.JW)(n,e.primary_config_entry)}),this._entities=(0,l.A)((e,t)=>t.filter(t=>t.device_id===e).map(e=>Object.assign(Object.assign({},e),{},{stateName:this._computeEntityName(e)})).sort((e,t)=>(0,_.xL)(e.stateName||`zzz${e.entity_id}`,t.stateName||`zzz${t.entity_id}`,this.hass.locale.language))),this._getEntitiesSorted=e=>e.sort((e,t)=>(0,_.xL)(e.attributes.friendly_name||`zzz${e.entity_id}`,t.attributes.friendly_name||`zzz${t.entity_id}`,this.hass.locale.language)),this._getRelated=(0,l.A)(e=>{var t,i,a;return{automation:this._getEntitiesSorted((null!==(t=null==e?void 0:e.automation)&&void 0!==t?t:[]).map(e=>this.hass.states[e])),scene:this._getEntitiesSorted((null!==(i=null==e?void 0:e.scene)&&void 0!==i?i:[]).map(e=>this.hass.states[e])),script:this._getEntitiesSorted((null!==(a=null==e?void 0:e.script)&&void 0!==a?a:[]).map(e=>this.hass.states[e]))}}),this._deviceIdInList=(0,l.A)(e=>[e]),this._entityIds=(0,l.A)(e=>e.map(e=>e.entity_id)),this._entitiesByCategory=(0,l.A)(e=>{const t=(0,f.$)(e,e=>{const t=(0,u.m)(e.entity_id);return d.gt.includes(t)?"assist":"event"===t||"notify"===t?t:e.entity_category?e.entity_category:d.JF.includes(t)?"sensor":"control"});for(const i of["assist","config","control","diagnostic","event","notify","sensor"])i in t||(t[i]=[]);return t}),this._batteryEntity=(0,l.A)(e=>(0,M.Er)(this.hass,e)),this._batteryChargingEntity=(0,l.A)(e=>(0,M.DW)(this.hass,e)),this._resetEntityIds=()=>{const e=this._entities(this.deviceId,this._entityReg).map(e=>e.entity_id);(0,H._)(this,this.hass,e)},this._showSettings=async()=>{const e=this.hass.devices[this.deviceId];(0,U._)(this,{device:e,updateEntry:async t=>{const i=e.name_by_user||e.name,a=t.name_by_user;if("user"===t.disabled_by&&"user"!==e.disabled_by){for(const o of e.config_entries)if(!Object.values(this.hass.devices).some(t=>t.id!==e.id&&t.config_entries.includes(o))){const e=this.entries.find(e=>e.entry_id===o);if(e&&!e.disabled_by&&await(0,S.dk)(this,{title:this.hass.localize("ui.panel.config.devices.confirm_disable_config_entry_title"),text:this.hass.localize("ui.panel.config.devices.confirm_disable_config_entry_message",{name:e.title}),destructive:!0,confirmText:this.hass.localize("ui.common.yes"),dismissText:this.hass.localize("ui.common.no")})){let e;try{e=await(0,x.XQ)(this.hass,o)}catch(n){return void(0,S.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.integrations.config_entry.disable_error"),text:n.message})}e.require_restart&&(0,S.showAlertDialog)(this,{text:this.hass.localize("ui.panel.config.integrations.config_entry.disable_restart_confirm")}),delete t.disabled_by}}}else null!==t.disabled_by&&"user"!==t.disabled_by&&delete t.disabled_by;try{await(0,A.FB)(this.hass,this.deviceId,t)}catch(n){return void(0,S.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.devices.update_device_error"),text:n.message})}if(!i||!a||i===a)return;const s=this._entities(this.deviceId,this._entityReg).map(e=>{const t=e.name||e.stateName;let s;if(!e.has_entity_name||e.name){if(!e.has_entity_name||e.name!==i&&e.name!==a){if(!t||!t.includes(i))return;s=t.replace(i,a)}else s=null;return(0,M.G_)(this.hass,e.entity_id,{name:s})}});await Promise.all(s)}})},this._voiceAssistantSetup=()=>{(0,I.L)(this,{deviceId:this.deviceId})}}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],Pe.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],Pe.prototype,"entries",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],Pe.prototype,"manifests",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],Pe.prototype,"deviceId",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,reflect:!0})],Pe.prototype,"narrow",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"is-wide",type:Boolean})],Pe.prototype,"isWide",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],Pe.prototype,"showAdvanced",void 0),(0,a.Cg)([(0,o.wk)()],Pe.prototype,"_related",void 0),(0,a.Cg)([(0,o.wk)()],Pe.prototype,"_diagnosticDownloadLinks",void 0),(0,a.Cg)([(0,o.wk)()],Pe.prototype,"_deleteButtons",void 0),(0,a.Cg)([(0,o.wk)()],Pe.prototype,"_deviceActions",void 0),(0,a.Cg)([(0,o.wk)()],Pe.prototype,"_deviceAlerts",void 0),(0,a.Cg)([(0,o.wk)(),(0,s.Fg)({context:k.ih,subscribe:!0})],Pe.prototype,"_entityReg",void 0),Pe=(0,a.Cg)([(0,o.EM)("ha-config-device-page")],Pe),t()}catch(B){t(B)}})},99949:function(e,t,i){i.a(e,async function(e,t){try{i(89463),i(74423),i(44114),i(18111),i(81148),i(22489),i(20116),i(7588),i(61701),i(13579),i(3362),i(96167),i(27495),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(62953),i(48408),i(14603),i(47566),i(98721);var a=i(40445),s=(i(94422),i(16527)),n=i(96196),o=i(88696),r=i(77845),l=i(22786),c=i(78870),d=i(95747),h=i(93905),u=i(79),p=i(55931),g=i(69093),v=i(89020),_=i(91926),m=i(87710),f=i(86171),y=(i(72945),i(38962),i(58349),i(29823)),b=(i(70947),i(27661),i(52190),i(72644),i(63817)),w=i(138),$=(i(64263),i(26300),i(82988),i(53641)),C=i(77423),x=i(38911),k=i(77001),A=i(28989),L=i(59241),M=i(92557),E=i(65063),H=i(72553),z=i(54706),V=i(14503),S=i(44144),I=i(34023),q=i(25635),T=i(5317),Z=i(76559),D=i(69569),O=e([f,y,b,w,H,T,o,d]);[f,y,b,w,H,T,o,d]=O.then?(await O)():O;let P,j,R,U,F,B,W,N,G,J,K,Y,Q,X,ee,te,ie,ae,se,ne,oe,re,le,ce,de=e=>e;const he="M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z",ue="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",pe="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",ge="M7,10L12,15L17,10H7Z",ve="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",_e="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z";class me extends((0,z.E)(n.WF)){connectedCallback(){super.connectedCallback(),window.addEventListener("location-changed",this._locationChanged),window.addEventListener("popstate",this._popState)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("location-changed",this._locationChanged),window.removeEventListener("popstate",this._popState)}willUpdate(e){super.willUpdate(e),this.hasUpdated||this._setFiltersFromUrl(),e.has("_selected")&&(this._selectedCanDelete=this._selected.filter(e=>this.hass.devices[e].config_entries.some(e=>{var t;return null===(t=this.entries.find(t=>t.entry_id===e))||void 0===t?void 0:t.supports_remove_device})))}_setFiltersFromUrl(){var e,t;const i=this._searchParms.get("domain"),a=this._searchParms.get("config_entry"),s=this._searchParms.get("sub_entry"),n=this._searchParms.has("label");(i||a||n)&&(this._filter=(null===(e=history.state)||void 0===e?void 0:e.filter)||"",this._filters={"ha-filter-states":{value:[...(null===(t=this._filters["ha-filter-states"])||void 0===t?void 0:t.value)||[],"disabled"],items:void 0},"ha-filter-integrations":{value:i?[i]:[],items:void 0},config_entry:{value:a?[a]:[],items:void 0},sub_entry:{value:s?[s]:[],items:void 0}},this._filterLabel())}_filterLabel(){const e=this._searchParms.get("label");e&&(this._filters=Object.assign(Object.assign({},this._filters),{},{"ha-filter-labels":{value:[e],items:void 0}}))}_clearFilter(){this._filters={}}hassSubscribe(){return[(0,M.o5)(this.hass.connection,e=>{this._labels=e})]}render(){var e,t,i,a,s,o,r,l,c;const{devicesOutput:d}=this._devicesAndFilterDomains(this.hass.devices,this.entries,this.entities,this.hass.areas,this.manifests,this._filters,this.hass.localize,this._labels),h=this._sizeController.value&&this._sizeController.value<700||!this._sizeController.value&&"docked"===this.hass.dockedSidebar;return(0,n.qy)(P||(P=de` <hass-tabs-subpage-data-table .hass="${0}" .narrow="${0}" .backPath="${0}" .tabs="${0}" .route="${0}" .searchLabel="${0}" .columns="${0}" .data="${0}" selectable .selected="${0}" @selection-changed="${0}" .filter="${0}" has-filters .filters="${0}" .initialGroupColumn="${0}" .initialCollapsedGroups="${0}" .initialSorting="${0}" .columnOrder="${0}" .hiddenColumns="${0}" @columns-changed="${0}" @clear-filter="${0}" @search-changed="${0}" @sorting-changed="${0}" @grouping-changed="${0}" @collapsed-changed="${0}" @row-click="${0}" clickable has-fab class="${0}"> <ha-integration-overflow-menu .hass="${0}" slot="toolbar-icon"></ha-integration-overflow-menu> <ha-fab slot="fab" .label="${0}" extended @click="${0}"> <ha-svg-icon slot="icon" .path="${0}"></ha-svg-icon> </ha-fab> ${0} <ha-filter-floor-areas .hass="${0}" type="device" .value="${0}" @data-table-filter-changed="${0}" slot="filter-pane" .expanded="${0}" .narrow="${0}" @expanded-changed="${0}"></ha-filter-floor-areas> <ha-filter-integrations .hass="${0}" .value="${0}" @data-table-filter-changed="${0}" slot="filter-pane" .expanded="${0}" .narrow="${0}" @expanded-changed="${0}"></ha-filter-integrations> <ha-filter-states .hass="${0}" .value="${0}" .states="${0}" .label="${0}" @data-table-filter-changed="${0}" slot="filter-pane" .expanded="${0}" .narrow="${0}" @expanded-changed="${0}"></ha-filter-states> <ha-filter-labels .hass="${0}" .value="${0}" @data-table-filter-changed="${0}" slot="filter-pane" .expanded="${0}" .narrow="${0}" @expanded-changed="${0}"></ha-filter-labels> ${0} <ha-dropdown slot="selection-bar" @wa-select="${0}"> ${0} ${0} ${0} <ha-dropdown-item value="delete_selected" .disabled="${0}" variant="danger"> <ha-svg-icon slot="icon" .path="${0}"></ha-svg-icon> ${0} </ha-dropdown-item> </ha-dropdown> </hass-tabs-subpage-data-table> `),this.hass,this.narrow,this._searchParms.has("historyBack")?void 0:"/config",q.configSections.devices,this.route,this.hass.localize("ui.panel.config.devices.picker.search",{number:d.length}),this._columns(this.hass.localize),d,this._selected.length,this._handleSelectionChanged,this._filter,Object.values(this._filters).filter(e=>Array.isArray(e.value)?e.value.length:e.value&&Object.values(e.value).some(e=>Array.isArray(e)?e.length:e)).length,this._activeGrouping,this._activeCollapsed,this._activeSorting,this._activeColumnOrder,this._activeHiddenColumns,this._handleColumnsChanged,this._clearFilter,this._handleSearchChange,this._handleSortingChanged,this._handleGroupingChanged,this._handleCollapseChanged,this._handleRowClicked,this.narrow?"narrow":"",this.hass,this.hass.localize("ui.panel.config.devices.add_device"),this._addDevice,ve,Array.isArray(null===(e=this._filters.config_entry)||void 0===e?void 0:e.value)&&null!==(t=this._filters.config_entry)&&void 0!==t&&t.value.length?(0,n.qy)(j||(j=de`<ha-alert slot="filter-pane"> ${0} ${0}${0} </ha-alert>`),this.hass.localize("ui.panel.config.devices.filtering_by_config_entry"),(null===(i=this.entries)||void 0===i||null===(i=i.find(e=>e.entry_id===this._filters.config_entry.value[0]))||void 0===i?void 0:i.title)||this._filters.config_entry.value[0],1===this._filters.config_entry.value.length&&Array.isArray(null===(a=this._filters.sub_entry)||void 0===a?void 0:a.value)&&this._filters.sub_entry.value.length?(0,n.qy)(R||(R=de` (${0})`),(null===(s=this._subEntries)||void 0===s||null===(s=s.find(e=>e.subentry_id===this._filters.sub_entry.value[0]))||void 0===s?void 0:s.title)||this._filters.sub_entry.value[0]):n.s6):n.s6,this.hass,null===(o=this._filters["ha-filter-floor-areas"])||void 0===o?void 0:o.value,this._filterChanged,"ha-filter-floor-areas"===this._expandedFilter,this.narrow,this._filterExpanded,this.hass,null===(r=this._filters["ha-filter-integrations"])||void 0===r?void 0:r.value,this._filterChanged,"ha-filter-integrations"===this._expandedFilter,this.narrow,this._filterExpanded,this.hass,null===(l=this._filters["ha-filter-states"])||void 0===l?void 0:l.value,this._states(this.hass.localize),this.hass.localize("ui.panel.config.devices.picker.state"),this._filterChanged,"ha-filter-states"===this._expandedFilter,this.narrow,this._filterExpanded,this.hass,null===(c=this._filters["ha-filter-labels"])||void 0===c?void 0:c.value,this._filterChanged,"ha-filter-labels"===this._expandedFilter,this.narrow,this._filterExpanded,this.narrow?n.s6:(0,n.qy)(U||(U=de`<ha-dropdown slot="selection-bar" @wa-select="${0}"> <ha-assist-chip slot="trigger" .label="${0}"> <ha-svg-icon slot="trailing-icon" .path="${0}"></ha-svg-icon> </ha-assist-chip> ${0} </ha-dropdown> ${0}`),this._handleBulkLabel,this.hass.localize("ui.panel.config.automation.picker.bulk_actions.add_label"),ge,this._renderLabelItems(),h?n.s6:(0,n.qy)(F||(F=de`<ha-dropdown slot="selection-bar" @wa-select="${0}"> <ha-assist-chip slot="trigger" .label="${0}"> <ha-svg-icon slot="trailing-icon" .path="${0}"></ha-svg-icon> </ha-assist-chip> ${0} </ha-dropdown>`),this._handleBulkArea,this.hass.localize("ui.panel.config.devices.picker.bulk_actions.move_area"),ge,this._renderAreaItems())),this._handleBulkAction,this.narrow?(0,n.qy)(B||(B=de`<ha-assist-chip .label="${0}" slot="trigger"> <ha-svg-icon slot="trailing-icon" .path="${0}"></ha-svg-icon> </ha-assist-chip>`),this.hass.localize("ui.panel.config.automation.picker.bulk_action"),ge):(0,n.qy)(W||(W=de`<ha-icon-button .path="${0}" .label="${0}" slot="trigger"></ha-icon-button>`),pe,this.hass.localize("ui.panel.config.automation.picker.bulk_action")),this.narrow?(0,n.qy)(N||(N=de`<ha-dropdown-item> ${0} ${0} </ha-dropdown-item>`),this.hass.localize("ui.panel.config.automation.picker.bulk_actions.add_label"),this._renderLabelItems("submenu")):n.s6,h?(0,n.qy)(G||(G=de`<ha-dropdown-item> ${0} ${0} </ha-dropdown-item> <wa-divider></wa-divider>`),this.hass.localize("ui.panel.config.devices.picker.bulk_actions.move_area"),this._renderAreaItems("submenu")):n.s6,!this._selectedCanDelete.length,ue,this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.button"))}async _loadSubEntries(e){this._subEntries=await(0,C.t0)(this.hass,e)}_filterExpanded(e){e.detail.expanded?this._expandedFilter=e.target.localName:this._expandedFilter===e.target.localName&&(this._expandedFilter=void 0)}_filterChanged(e){const t=e.target.localName;this._filters=Object.assign(Object.assign({},this._filters),{},{[t]:e.detail})}_batteryEntity(e,t){const i=(0,L.Er)(this.hass,t[e]||[]);return i?i.entity_id:void 0}_batteryChargingEntity(e,t){const i=(0,L.DW)(this.hass,t[e]||[]);return i?i.entity_id:void 0}_handleRowClicked(e){const t=e.detail.id;this._ignoreLocationChange=!0,(0,_.o)(`/config/devices/device/${t}`)}_handleSearchChange(e){this._filter=e.detail.value,history.replaceState({filter:this._filter},"")}_addDevice(){const{filteredConfigEntry:e,filteredDomains:t}=this._devicesAndFilterDomains(this.hass.devices,this.entries,this.entities,this.hass.areas,this.manifests,this._filters,this.hass.localize,this._labels);1===t.size&&v.x.includes([...t][0])?(0,v.P)(this,this.hass,[...t][0],{config_entry:null==e?void 0:e.entry_id}):(0,Z.X)(this,{domain:this._searchParms.get("domain")||void 0,navigateToResult:!0})}_handleSelectionChanged(e){this._selected=e.detail.value}_handleBulkArea(e){const t=e.detail.item.value;"area_create"!==t?"area_no"!==t?this._bulkAddArea(t.substring(5)):this._bulkAddArea(null):this._bulkCreateArea()}async _bulkAddArea(e){const t=[];this._selected.forEach(i=>{t.push((0,A.FB)(this.hass,i,{area_id:e}))});const i=await Promise.allSettled(t);if((0,m.$)(i)){const e=(0,m.N)(i);(0,E.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.common.multiselect.failed",{number:e.length}),text:(0,n.qy)(J||(J=de`<pre>
${0}</pre>`),e.map(e=>e.reason.message||e.reason.code||e.reason).join("\r\n"))})}}async _handleBulkLabel(e){const t=e.detail.item.value;if("label_create"===t)return void this._bulkCreateLabel();if(!t)return;const i=e.detail.item.action;this._bulkLabel(t.substring(6),i)}async _bulkLabel(e,t){const i=[];this._selected.forEach(a=>{i.push((0,A.FB)(this.hass,a,{labels:"add"===t?this.hass.devices[a].labels.concat(e):this.hass.devices[a].labels.filter(t=>t!==e)}))});const a=await Promise.allSettled(i);if((0,m.$)(a)){const e=(0,m.N)(a);(0,E.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.common.multiselect.failed",{number:e.length}),text:(0,n.qy)(K||(K=de`<pre>
${0}</pre>`),e.map(e=>e.reason.message||e.reason.code||e.reason).join("\r\n"))})}}_clearSelection(){this._dataTable.clearSelection()}_handleSortingChanged(e){this._activeSorting=e.detail}_handleGroupingChanged(e){this._activeGrouping=e.detail.value}_handleCollapseChanged(e){this._activeCollapsed=e.detail.value}_handleColumnsChanged(e){this._activeColumnOrder=e.detail.columnOrder,this._activeHiddenColumns=e.detail.hiddenColumns}_handleBulkAction(e){const t=e.detail.item.value;t&&("delete_selected"===t&&this._deleteSelected(),t.startsWith("label_")?this._handleBulkLabel(e):t.startsWith("area_")&&this._handleBulkArea(e))}static get styles(){return[(0,n.AH)(Y||(Y=de`:host{display:block}hass-tabs-subpage-data-table{--data-table-row-height:60px}hass-tabs-subpage-data-table.narrow{--data-table-row-height:72px}.clear{color:var(--primary-color);padding-left:8px;padding-inline-start:8px;text-transform:uppercase;direction:var(--direction)}ha-assist-chip{--ha-assist-chip-container-shape:10px}ha-dropdown ha-assist-chip{--md-assist-chip-trailing-space:8px}ha-label{--ha-label-background-color:var(--color, var(--grey-color));--ha-label-background-opacity:0.5}`)),V.RF]}constructor(...e){var t;super(...e),this.narrow=!1,this.isWide=!1,this._searchParms=new URLSearchParams(window.location.search),this._selected=[],this._selectedCanDelete=[],this._filter=(null===(t=history.state)||void 0===t?void 0:t.filter)||"",this._filters={},this._sizeController=new o.P(this,{callback:e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.contentRect.width}}),this._ignoreLocationChange=!1,this._locationChanged=()=>{this._ignoreLocationChange?this._ignoreLocationChange=!1:window.location.search.substring(1)!==this._searchParms.toString()&&(this._searchParms=new URLSearchParams(window.location.search),this._setFiltersFromUrl())},this._popState=()=>{window.location.search.substring(1)!==this._searchParms.toString()&&(this._searchParms=new URLSearchParams(window.location.search),this._setFiltersFromUrl())},this._states=(0,l.A)(e=>[{value:"disabled",label:e("ui.panel.config.devices.data_table.disabled_by")}]),this._devicesAndFilterDomains=(0,l.A)((e,t,i,a,s,n,o,r)=>{var l;let c=Object.values(e).map(e=>Object.assign(Object.assign({},e),{},{label_entries:[]}));const d={};for(const u of i)u.device_id&&(u.device_id in d||(d[u.device_id]=[]),d[u.device_id].push(u));const h={};for(const u of t)h[u.entry_id]=u;const g={};for(const u of s)g[u.domain]=u;let v;const _=new Set;Object.entries(n).forEach(([e,i])=>{if("config_entry"===e&&Array.isArray(i.value)&&i.value.length){c=c.filter(e=>e.config_entries.some(e=>i.value.includes(e)));const e=t.filter(e=>e.entry_id&&i.value.includes(e.entry_id));e.forEach(e=>{_.add(e.domain)}),1===e.length&&(v=e[0])}else if("sub_entry"===e&&Array.isArray(i.value)&&i.value.length){var a;if(!Array.isArray(null===(a=this._filters.config_entry)||void 0===a?void 0:a.value)||1!==this._filters.config_entry.value.length)return;const e=this._filters.config_entry.value[0];c=c.filter(t=>t.config_entries_subentries[e]&&i.value.some(i=>t.config_entries_subentries[e].includes(i))),this._subEntries||this._loadSubEntries(e)}else if("ha-filter-integrations"===e&&Array.isArray(i.value)&&i.value.length){const e=t.filter(e=>i.value.includes(e.domain)).map(e=>e.entry_id);c=c.filter(t=>t.config_entries.some(t=>e.includes(t))),i.value.forEach(e=>_.add(e))}else"ha-filter-labels"===e&&Array.isArray(i.value)&&i.value.length?c=c.filter(e=>e.labels.some(e=>i.value.includes(e))):i.items&&(c=c.filter(e=>i.items.has(e.id)))});const m=null===(l=n["ha-filter-states"])||void 0===l?void 0:l.value;(null==m?void 0:m.length)&&m.includes("disabled")||(c=c.filter(e=>!e.disabled_by));return{devicesOutput:c.map(e=>{var t,i;const s=(0,C.JW)(e.config_entries.filter(e=>e in h).map(e=>h[e]),e.primary_config_entry),n=(r&&(null==e?void 0:e.labels)||[]).map(e=>r.find(t=>t.label_id===e));let l="";if(e.area_id&&null!==(t=a[e.area_id])&&void 0!==t&&t.floor_id&&this.hass.floors){const t=a[e.area_id].floor_id;this.hass.floors[t]&&(l=(0,p.X)(this.hass.floors[t]))}return Object.assign(Object.assign({},e),{},{name:(0,u.T)(e,this.hass,d[e.id]),model:e.model||`<${o("ui.panel.config.devices.data_table.unknown")}>`,manufacturer:e.manufacturer||`<${o("ui.panel.config.devices.data_table.unknown")}>`,area:e.area_id&&a[e.area_id]?a[e.area_id].name:void 0,floor:l,integration:s.length?s.map(e=>o(`component.${e.domain}.title`)||e.domain).join(", "):this.hass.localize("ui.panel.config.devices.data_table.no_integration"),domains:s.map(e=>e.domain),battery_entity:[this._batteryEntity(e.id,d),this._batteryChargingEntity(e.id,d)],battery_level:null===(i=this.hass.states[this._batteryEntity(e.id,d)||""])||void 0===i?void 0:i.state,label_entries:n})}),filteredConfigEntry:v,filteredDomains:_}}),this._columns=(0,l.A)(e=>({icon:{title:"",label:e("ui.panel.config.devices.data_table.icon"),type:"icon",moveable:!1,showNarrow:!0,template:e=>{var t;return e.domains.length?(0,n.qy)(Q||(Q=de`<img alt="" crossorigin="anonymous" referrerpolicy="no-referrer" src="${0}">`),(0,S.MR)({domain:e.domains[0],type:"icon",darkOptimized:null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode})):""}},name:{title:e("ui.panel.config.devices.data_table.device"),main:!0,sortable:!0,filterable:!0,direction:"asc",grows:!0,flex:2,minWidth:"150px",extraTemplate:e=>(0,n.qy)(X||(X=de` ${0} `),e.label_entries.length?(0,n.qy)(ee||(ee=de` <ha-data-table-labels .labels="${0}"></ha-data-table-labels> `),e.label_entries):n.s6)},area:{title:e("ui.panel.config.devices.data_table.area"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px",template:e=>e.area||""},floor:{title:e("ui.panel.config.devices.data_table.floor"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px",defaultHidden:!0},integration:{title:e("ui.panel.config.devices.data_table.integration"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px"},manufacturer:{title:e("ui.panel.config.devices.data_table.manufacturer"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px"},model:{title:e("ui.panel.config.devices.data_table.model"),sortable:!0,filterable:!0,minWidth:"120px"},battery_entity:{title:e("ui.panel.config.devices.data_table.battery"),showNarrow:!0,sortable:!0,type:"numeric",maxWidth:"101px",minWidth:"101px",valueColumn:"battery_level",template:e=>{const t=e.battery_entity,i=t&&t[0]?this.hass.states[t[0]]:void 0,a=i?(0,g.t)(i):void 0,s=t&&t[1]?this.hass.states[t[1]]:void 0;return!i||"binary_sensor"!==a&&isNaN(i.state)?"":(0,n.qy)(te||(te=de` ${0} <ha-battery-icon .hass="${0}" .batteryStateObj="${0}" .batteryChargingStateObj="${0}"></ha-battery-icon> `),"sensor"===a?this.hass.formatEntityState(i):n.s6,this.hass,i,s)}},created_at:{title:e("ui.panel.config.generic.headers.created_at"),defaultHidden:!0,sortable:!0,minWidth:"128px",template:e=>e.created_at?(0,d.ZS)(new Date(1e3*e.created_at),this.hass.locale,this.hass.config):""},modified_at:{title:e("ui.panel.config.generic.headers.modified_at"),defaultHidden:!0,sortable:!0,minWidth:"128px",template:e=>e.modified_at?(0,d.ZS)(new Date(1e3*e.modified_at),this.hass.locale,this.hass.config):""},disabled_by:{title:e("ui.panel.config.devices.picker.state"),type:"icon",defaultHidden:!0,sortable:!0,filterable:!0,minWidth:"80px",maxWidth:"80px",template:e=>e.disabled_by?(0,n.qy)(ie||(ie=de` <div tabindex="0" style="display:inline-block;position:relative"> <ha-svg-icon .id="svg-icon-${0}" .path="${0}"></ha-svg-icon> <ha-tooltip .for="svg-icon-${0}" placement="left"> ${0} </ha-tooltip> </div> `),e.id,he,e.id,this.hass.localize("ui.panel.config.entities.picker.status.disabled")):""},labels:{title:"",hidden:!0,filterable:!0,template:e=>e.label_entries.map(e=>e.name).join(" ")}})),this._renderAreaItems=(e="")=>(0,n.qy)(ae||(ae=de`${0} <ha-dropdown-item value="area_no" .slot="${0}"> ${0} </ha-dropdown-item> <wa-divider .slot="${0}"></wa-divider> <ha-dropdown-item value="area_create" .slot="${0}"> ${0} </ha-dropdown-item>`),Object.values(this.hass.areas).map(t=>(0,n.qy)(se||(se=de`<ha-dropdown-item .value="${0}" .slot="${0}"> ${0} ${0} </ha-dropdown-item>`),`area_${t.area_id}`,e,t.icon?(0,n.qy)(ne||(ne=de`<ha-icon slot="icon" .icon="${0}"></ha-icon>`),t.icon):(0,n.qy)(oe||(oe=de`<ha-svg-icon slot="icon" .path="${0}"></ha-svg-icon>`),_e),t.name)),e,this.hass.localize("ui.panel.config.devices.picker.bulk_actions.no_area"),e,e,this.hass.localize("ui.panel.config.devices.picker.bulk_actions.add_area")),this._renderLabelItems=(e="")=>{var t;return(0,n.qy)(re||(re=de`${0} <wa-divider .slot="${0}"></wa-divider> <ha-dropdown-item value="label_create" .slot="${0}"> ${0} </ha-dropdown-item>`),null===(t=this._labels)||void 0===t?void 0:t.map(t=>{const i=t.color?(0,c.MP)(t.color):void 0,a=this._selected.every(e=>{var i;return null===(i=this.hass.devices[e])||void 0===i?void 0:i.labels.includes(t.label_id)}),s=!a&&this._selected.some(e=>{var i;return null===(i=this.hass.devices[e])||void 0===i?void 0:i.labels.includes(t.label_id)});return(0,n.qy)(le||(le=de`<ha-dropdown-item .slot="${0}" .value="${0}" .action="${0}" keep-open> <ha-checkbox slot="icon" .checked="${0}" .indeterminate="${0}" reducedTouchTarget></ha-checkbox> <ha-label style="${0}" .description="${0}"> ${0} ${0} </ha-label> </ha-dropdown-item>`),e,`label_${t.label_id}`,a?"remove":"add",a,s,i?`--color: ${i}`:"",t.description||void 0,t.icon?(0,n.qy)(ce||(ce=de`<ha-icon slot="icon" .icon="${0}"></ha-icon>`),t.icon):n.s6,t.name)}),e,e,this.hass.localize("ui.panel.config.labels.add_label"))},this._bulkCreateArea=()=>{(0,I.J)(this,{createEntry:async e=>{const t=await(0,$.L3)(this.hass,e);return this._bulkAddArea(t.area_id),t}})},this._bulkCreateLabel=()=>{(0,D.f)(this,{createEntry:async e=>{const t=await(0,M._9)(this.hass,e);this._bulkLabel(t.label_id,"add")}})},this._deleteSelected=()=>{(0,E.dk)(this,{title:this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.confirm_title"),text:this._selectedCanDelete.length===this._selected.length?this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.confirm_text"):this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.confirm_partly_text",{deletable:this._selectedCanDelete.length,selected:this._selected.length}),confirmText:this.hass.localize("ui.common.delete"),dismissText:this.hass.localize("ui.common.cancel"),destructive:!0,confirm:async()=>{const e=[];this._selectedCanDelete.forEach(t=>{var i;(null===(i=this.hass.devices[t])||void 0===i?void 0:i.config_entries).forEach(i=>{var a;null!==(a=this.entries.find(e=>e.entry_id===i))&&void 0!==a&&a.supports_remove_device&&e.push((0,A.nO)(this.hass,t,i))})});const t=await Promise.allSettled(e);(0,m.$)(t)&&(0,E.showAlertDialog)(this,{text:this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.partial_failure"),title:this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.partial_failure_title")}),this._clearSelection()}})}}}(0,a.Cg)([(0,r.MZ)({attribute:!1})],me.prototype,"hass",void 0),(0,a.Cg)([(0,r.MZ)({type:Boolean})],me.prototype,"narrow",void 0),(0,a.Cg)([(0,r.MZ)({attribute:"is-wide",type:Boolean})],me.prototype,"isWide",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],me.prototype,"entries",void 0),(0,a.Cg)([(0,r.wk)()],me.prototype,"_subEntries",void 0),(0,a.Cg)([(0,r.wk)(),(0,s.Fg)({context:x.ih,subscribe:!0})],me.prototype,"entities",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],me.prototype,"manifests",void 0),(0,a.Cg)([(0,r.MZ)({attribute:!1})],me.prototype,"route",void 0),(0,a.Cg)([(0,r.wk)()],me.prototype,"_searchParms",void 0),(0,a.Cg)([(0,r.wk)()],me.prototype,"_selected",void 0),(0,a.Cg)([(0,r.P)("hass-tabs-subpage-data-table",!0)],me.prototype,"_dataTable",void 0),(0,a.Cg)([(0,r.wk)(),(0,h.I)({storage:"sessionStorage",key:"devices-table-search",state:!0,subscribe:!1})],me.prototype,"_filter",void 0),(0,a.Cg)([(0,r.wk)(),(0,h.I)({storage:"sessionStorage",key:"devices-table-filters-full",state:!0,subscribe:!1,serializer:k.iS,deserializer:k.Dc})],me.prototype,"_filters",void 0),(0,a.Cg)([(0,r.wk)()],me.prototype,"_expandedFilter",void 0),(0,a.Cg)([(0,r.wk)()],me.prototype,"_labels",void 0),(0,a.Cg)([(0,h.I)({key:"devices-table-sort",state:!1,subscribe:!1})],me.prototype,"_activeSorting",void 0),(0,a.Cg)([(0,h.I)({key:"devices-table-grouping",state:!1,subscribe:!1})],me.prototype,"_activeGrouping",void 0),(0,a.Cg)([(0,h.I)({key:"devices-table-collapsed",state:!1,subscribe:!1})],me.prototype,"_activeCollapsed",void 0),(0,a.Cg)([(0,h.I)({key:"devices-table-column-order",state:!1,subscribe:!1})],me.prototype,"_activeColumnOrder",void 0),(0,a.Cg)([(0,h.I)({key:"devices-table-hidden-columns",state:!1,subscribe:!1})],me.prototype,"_activeHiddenColumns",void 0),me=(0,a.Cg)([(0,r.EM)("ha-config-devices-dashboard")],me),t()}catch(P){t(P)}})},73692:function(e,t,i){i.a(e,async function(e,a){try{i.r(t);i(3362),i(62953);var s=i(40445),n=i(77845),o=i(77423),r=i(95350),l=i(324),c=i(98129),d=i(99949),h=e([c,d]);[c,d]=h.then?(await h)():h;class u extends l.a{firstUpdated(e){super.firstUpdated(e),this._loadData()}updatePageEl(e){e.hass=this.hass,"device"===this._currentPage&&(e.deviceId=this.routeTail.path.substr(1)),e.entries=this._configEntries,e.manifests=this._manifests,e.narrow=this.narrow,e.isWide=this.isWide,e.showAdvanced=this.showAdvanced,e.route=this.routeTail}async _loadData(){this._configEntries=await(0,o.VN)(this.hass),this._manifests=await(0,r.fK)(this.hass)}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this.showAdvanced=!1,this.routerOptions={defaultPage:"dashboard",routes:{dashboard:{tag:"ha-config-devices-dashboard",cache:!0},device:{tag:"ha-config-device-page"}}},this._configEntries=[],this._manifests=[]}}(0,s.Cg)([(0,n.MZ)({attribute:!1})],u.prototype,"hass",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean})],u.prototype,"narrow",void 0),(0,s.Cg)([(0,n.MZ)({attribute:"is-wide",type:Boolean})],u.prototype,"isWide",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1})],u.prototype,"showAdvanced",void 0),(0,s.Cg)([(0,n.wk)()],u.prototype,"_configEntries",void 0),(0,s.Cg)([(0,n.wk)()],u.prototype,"_manifests",void 0),u=(0,s.Cg)([(0,n.EM)("ha-config-devices")],u),a()}catch(u){a(u)}})},89434:function(e,t,i){i.a(e,async function(e,t){try{i(16280),i(74423),i(44114),i(94490),i(26910),i(18111),i(22489),i(7588),i(13579),i(3362),i(62953);var a=i(40445),s=i(96196),n=i(77845),o=i(36312),r=i(69093),l=i(77796),c=i(65829),d=i(86531),h=i(63625),u=i(28669),p=i(11184),g=e([c,p,d]);[c,p,d]=g.then?(await g)():g;let v,_,m,f,y,b=e=>e;const w=(e,t)=>new Date(e.getTime()-1e3*t).getTime()/1e3,$=(e,t)=>(void 0!==e||void 0!==t)&&(!e||!t||e.length!==t.length||e.some(e=>!t.includes(e))||t.some(t=>!e.includes(t)));class C extends s.WF{render(){return(0,o.x)(this.hass,"logbook")?this._error?(0,s.qy)(v||(v=b`<div class="no-entries"> ${0} </div>`),`${this.hass.localize("ui.components.logbook.retrieval_error")}: ${this._error}`):void 0===this._logbookEntries?(0,s.qy)(_||(_=b` <div class="progress-wrapper"> <ha-spinner></ha-spinner> </div> `)):0===this._logbookEntries.length?(0,s.qy)(m||(m=b`<div class="no-entries"> ${0} </div>`),this.hass.localize("ui.components.logbook.entries_not_found")):(0,s.qy)(f||(f=b` <ha-logbook-renderer .hass="${0}" .narrow="${0}" .virtualize="${0}" .noIcon="${0}" .noName="${0}" .showIndicator="${0}" .relativeTime="${0}" .entries="${0}" .traceContexts="${0}" .userIdToName="${0}" @hass-logbook-live="${0}"></ha-logbook-renderer> `),this.hass,this.narrow,this.virtualize,this.noIcon,this.noName,this.showIndicator,this.relativeTime,this._logbookEntries,this._traceContexts,this._userIdToName,this._handleLogbookLive):s.s6}async refresh(e=!1){(e||!this._unsubLogbook&&void 0!==this._logbookEntries)&&(this._throttleGetLogbookEntries.cancel(),this._updateTraceContexts.cancel(),this._updateUsers.cancel(),this._unsubscribe(!0),this._liveUpdatesEnabled=!0,e?this._getLogBookData():this._throttleGetLogbookEntries())}shouldUpdate(e){if(1!==e.size||!e.has("hass"))return!0;const t=e.get("hass");return!t||t.localize!==this.hass.localize}willUpdate(e){let t=e.has("time");for(const i of["entityIds","deviceIds","stateFilter"]){if(!e.has(i))continue;const a=e.get(i),s=this[i];if($(a,s)){t=!0;break}}t&&this.refresh(!0)}_handleLogbookLive(e){e.detail.enable&&!this._liveUpdatesEnabled&&(this._pendingStreamMessages.forEach(e=>this._processStreamMessage(e)),this._pendingStreamMessages=[]),this._liveUpdatesEnabled=e.detail.enable}get _filterAlwaysEmptyResults(){const e=this.entityIds,t=this.deviceIds;return Boolean(e||t)&&(!e||0===e.length)&&(!t||0===t.length)}_unsubscribe(e){this._unsubLogbook&&(this._unsubLogbook.then(e=>e()),this._unsubLogbook=void 0,this._logbookEntries=e?void 0:[],this._pendingStreamMessages=[])}connectedCallback(){super.connectedCallback(),this.hasUpdated&&this._subscribeLogbookPeriod(this._calculateLogbookPeriod())}disconnectedCallback(){super.disconnectedCallback(),this._unsubscribe(!0)}_calculateLogbookPeriod(){const e=new Date;if("range"in this.time)return{now:e,startTime:this.time.range[0],endTime:this.time.range[1],purgeBeforePythonTime:void 0};if("recent"in this.time){const t=w(e,this.time.recent);return{now:e,startTime:new Date(1e3*t),endTime:new Date(e.getTime()+31536e6),purgeBeforePythonTime:w(e,this.time.recent)}}throw new Error("Unexpected time specified")}async _subscribeLogbookPeriod(e){if(!this._unsubLogbook)try{this._logbookSubscriptionId++,this._unsubLogbook=(0,d.gM)(this.hass,(e,t)=>{t===this._logbookSubscriptionId&&this._processOrQueueStreamMessage(e)},e.startTime.toISOString(),e.endTime.toISOString(),this._logbookSubscriptionId,this.entityIds,this.deviceIds),await this._unsubLogbook}catch(t){this._unsubLogbook=void 0,this._error=t}}async _getLogBookData(){var e;if(this._error=void 0,this._filterAlwaysEmptyResults)return void this._unsubscribe(!1);const t=this._calculateLogbookPeriod();t.startTime>t.now?this._unsubscribe(!1):(this._updateUsers(),null!==(e=this.hass.user)&&void 0!==e&&e.is_admin&&this._updateTraceContexts(),this._subscribeLogbookPeriod(t))}static get styles(){return[(0,s.AH)(y||(y=b`:host{display:block}:host([virtualize]){height:100%}.no-entries{text-align:center;padding:16px;color:var(--secondary-text-color)}.progress-wrapper{display:flex;justify-content:center;height:100%;align-items:center}`))]}constructor(...e){super(...e),this.narrow=!1,this.virtualize=!1,this.noIcon=!1,this.noName=!1,this.showIndicator=!1,this.relativeTime=!1,this.showMoreLink=!0,this._traceContexts={},this._userIdToName={},this._liveUpdatesEnabled=!0,this._pendingStreamMessages=[],this._throttleGetLogbookEntries=(0,l.n)(()=>this._getLogBookData(),1e3),this._logbookSubscriptionId=0,this._nonExpiredRecords=e=>this._logbookEntries?e?this._logbookEntries.filter(t=>t.when>e):this._logbookEntries:[],this._processOrQueueStreamMessage=e=>{this._liveUpdatesEnabled?this._processStreamMessage(e):this._pendingStreamMessages.push(e)},this._processStreamMessage=e=>{const t="recent"in this.time?w(new Date,this.time.recent):void 0;let i;i=this.stateFilter&&this.stateFilter.length>0?e.events.filter(e=>{var t;return e.state&&(null===(t=this.stateFilter)||void 0===t?void 0:t.includes(e.state))}):[...e.events];const a=i.reverse();if(!this._logbookEntries||!this._logbookEntries.length)return void(this._logbookEntries=a);if(!a.length)return;const s=this._nonExpiredRecords(t);s.length?a[a.length-1].when>s[0].when?this._logbookEntries=a.concat(s):s[s.length-1].when>a[0].when?this._logbookEntries=s.concat(a):this._logbookEntries=s.concat(a).sort((e,t)=>t.when-e.when):this._logbookEntries=a},this._updateTraceContexts=(0,l.n)(async()=>{this._traceContexts=await(0,h.gq)(this.hass)},6e4),this._updateUsers=(0,l.n)(async()=>{var e;const t={},i=(null===(e=this.hass.user)||void 0===e?void 0:e.is_admin)&&(0,u.hU)(this.hass);for(const a of Object.values(this.hass.states))a.attributes.user_id&&"person"===(0,r.t)(a)&&(t[a.attributes.user_id]=a.attributes.friendly_name);if(i){const e=await i;for(const i of e)i.id in t||(t[i.id]=i.name)}this._userIdToName=t},6e4)}}(0,a.Cg)([(0,n.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],C.prototype,"time",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],C.prototype,"entityIds",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],C.prototype,"deviceIds",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],C.prototype,"stateFilter",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean})],C.prototype,"narrow",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],C.prototype,"virtualize",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,attribute:"no-icon"})],C.prototype,"noIcon",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,attribute:"no-name"})],C.prototype,"noName",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,attribute:"show-indicator"})],C.prototype,"showIndicator",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,attribute:"relative-time"})],C.prototype,"relativeTime",void 0),(0,a.Cg)([(0,n.MZ)({attribute:"show-more-link",type:Boolean})],C.prototype,"showMoreLink",void 0),(0,a.Cg)([(0,n.wk)()],C.prototype,"_logbookEntries",void 0),(0,a.Cg)([(0,n.wk)()],C.prototype,"_traceContexts",void 0),(0,a.Cg)([(0,n.wk)()],C.prototype,"_userIdToName",void 0),(0,a.Cg)([(0,n.wk)()],C.prototype,"_error",void 0),C=(0,a.Cg)([(0,n.EM)("ha-logbook")],C),t()}catch(v){t(v)}})},55212:function(e,t,i){i.d(t,{KT:function(){return m},Bi:function(){return _},ZI:function(){return v},Yp:function(){return f}});i(74423),i(44114),i(26910),i(13609),i(18111),i(22489),i(20116),i(7588),i(61701),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(42762),i(62953);var a=i(46190),s=i(71727),n=i(69093),o=i(28978);var r=i(79461),l=i(52220),c=i(95350),d=i(28669),h=i(24367),u=i(37642);const p=new Set(["ai_task","automation","configurator","device_tracker","event","geo_location","notify","persistent_notification","script","sun","tag","todo","zone",...a.gt]),g=new Set(["backup","mobile_app"]),v=(e,t)=>Object.assign({type:"grid",cards:e.map(e=>({type:"tile",entity:e,show_entity_picture:["camera","image","person"].includes((0,s.m)(e))||void 0}))},t),_=(e,t,i,n=!0)=>{const c=[],d=e.states,h=[],p=i.title?i.title.toLowerCase():void 0,g=[];for(const a of t){const e=d[a],t=(0,s.m)(a);if("alarm_control_panel"===t){const e={type:"alarm-panel",entity:a};c.push(e)}else if("camera"===t){const e={type:"picture-entity",entity:a};c.push(e)}else if("image"===t){const e={type:"picture",image_entity:a};c.push(e)}else if("climate"===t){var v,m,f;const e={type:"thermostat",entity:a,features:(null!==(v=null===(m=d[a])||void 0===m||null===(m=m.attributes)||void 0===m||null===(m=m.hvac_modes)||void 0===m?void 0:m.length)&&void 0!==v?v:0)>1?[{type:"climate-hvac-modes",hvac_modes:null===(f=d[a])||void 0===f||null===(f=f.attributes)||void 0===f?void 0:f.hvac_modes}]:void 0};c.push(e)}else if("humidifier"===t){const e={type:"humidifier",entity:a,features:[{type:"humidifier-toggle"}]};c.push(e)}else if("media_player"===t){const e={type:"media-control",entity:a};c.push(e)}else if("plant"===t){const e={type:"plant-status",entity:a};c.push(e)}else if("weather"===t){const e={type:"weather-forecast",entity:a,show_forecast:!1};c.push(e)}else if(!n||"scene"!==t&&"script"!==t){let t;const i=p&&e&&(t=(0,r.p)((0,o.u)(e),p))?{entity:a,name:t}:a;h.push(i)}else{const t={entity:a,show_icon:!0,show_name:!0};let i;p&&e&&(i=(0,r.p)((0,o.u)(e),p))&&(t.name=i),g.push(t)}}if(h.sort((t,i)=>{const n="string"==typeof t?t:t.entity,r="string"==typeof i?i:i.entity,c=a.JF.includes((0,s.m)(n))?"sensor":"control";return c!==(a.JF.includes((0,s.m)(r))?"sensor":"control")?"sensor"===c?1:-1:(0,l.xL)("string"==typeof t?d[t]?(0,o.u)(d[t]):"":d[t.entity]?(0,u.v)(e,d[t.entity],t.name):"","string"==typeof i?d[i]?(0,o.u)(d[i]):"":d[i.entity]?(0,u.v)(e,d[i.entity],i.name):"")}),0===h.length&&g.length>0)return _(e,t,i,!1);if(h.length>0||g.length>0){const e=Object.assign({type:"entities",entities:h},i);g.length>0&&(e.footer={type:"buttons",entities:g}),c.unshift(e)}return c.length<2?c:[{type:"grid",square:!1,columns:1,cards:c}]},m=(e,t)=>{const i=[];for(const a of t){const e={type:"entity",entity:a};i.push(e)}return i},f=(e,t,i,a,r,u)=>{const v=e.states,m=e.areas,f=e.devices,y=e.entities,b=((e,t)=>{const i={},a=new Set(Object.values(t).filter(e=>e.entity_category||e.platform&&g.has(e.platform)||e.hidden).map(e=>e.entity_id));for(const s of Object.keys(e)){const t=e[s];p.has((0,n.t)(t))||a.has(t.entity_id)||(i[s]=e[s])}return i})(v,y),w={};for(const s of Object.keys(b)){const e=b[s];e.attributes.order&&(w[s]=e.attributes.order)}const $=((e,t,i,a)=>{const s=Object.assign({},a),n={},o={};for(const l of Object.values(i)){var r;const i=l.area_id||l.device_id&&(null===(r=t[l.device_id])||void 0===r?void 0:r.area_id);i&&i in e&&l.entity_id in s?(i in n||(n[i]=[]),n[i].push(s[l.entity_id]),delete s[l.entity_id]):l.device_id&&l.device_id in t&&l.entity_id in s&&(l.device_id in o||(o[l.device_id]=[]),o[l.device_id].push(s[l.entity_id]),delete s[l.entity_id])}for(const[l,c]of Object.entries(o))1===c.length&&(s[c[0].entity_id]=c[0],delete o[l]);return{areasWithEntities:n,devicesWithEntities:o,otherEntities:s}})(m,f,y,b);if(null!=a&&a.hidden)for(const s of a.hidden)delete $.areasWithEntities[s];r&&($.devicesWithEntities={},$.otherEntities={});const C=(e=>{const t=[],i={};return Object.keys(e).forEach(a=>{const n=e[a];"group"===(0,s.m)(a)?t.push(n):i[a]=n}),t.forEach(e=>e.attributes.entity_id.forEach(e=>{delete i[e]})),{groups:t,ungrouped:i}})($.otherEntities);C.groups.sort((e,t)=>w[e.entity_id]-w[t.entity_id]);const x=[];for(const s of C.groups)x.push(..._(e,s.attributes.entity_id,{title:(0,o.u)(s),show_header_toggle:"hidden"!==s.attributes.control}));const k=((e,t,i,a,s,r)=>{const u={},{localize:p}=e;for(const o of Object.keys(r)){const e=r[o],t=(0,n.t)(e);t in u||(u[t]=[]),u[t].push(e.entity_id)}const g=[];if("person"in u){const e=[];if(1===u.person.length)g.push({type:"entities",entities:u.person});else{let t,i="";for(const a of u.person){const s=r[a];let n=s.attributes.entity_picture;if(!n){if(void 0===t){const e=getComputedStyle(document.body);t=encodeURIComponent(e.getPropertyValue("--light-primary-color").trim()),i=encodeURIComponent((e.getPropertyValue("--text-light-primary-color")||e.getPropertyValue("--primary-text-color")).trim())}n=`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:${t}'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='${i}' font-size='1.3em' dy='.3em'%3E${(0,d._2)(s.attributes.friendly_name||"")}%3C/text%3E%3C/g%3E%3C/svg%3E`}e.push({type:"picture-entity",entity:a,aspect_ratio:"1",show_name:!1,image:n})}g.push({type:"grid",square:!0,columns:3,cards:e})}delete u.person}const v=[];for(const n of h.L)n in u&&(v.push(...u[n]),delete u[n]);const m={};for(const n of Object.keys(u))m[n]=(0,c.p$)(p,n);v.length&&(u._helpers=v,m._helpers=p("ui.panel.lovelace.strategy.original-states.helpers")),Object.keys(u).sort((e,t)=>(0,l.xL)(m[e],m[t])).forEach(t=>{g.push(..._(e,u[t].sort((e,t)=>(0,l.xL)((0,o.u)(r[e]),(0,o.u)(r[t]))),{title:m[t]}))});const f={path:t,title:i,cards:g};return a&&(f.icon=a),s&&(f.show_icon_and_title=s),f})(e,"default_view","Home",void 0,void 0,C.ungrouped),A=[],L=Object.keys(m);if(null!=a&&a.order){const e=a.order;L.sort((0,l.u1)(e))}for(const s of L){if(!(s in $.areasWithEntities))continue;const t=$.areasWithEntities[s],i=m[s];A.push(..._(e,t.map(e=>e.entity_id),{title:i.name}))}const M=[],E=Object.entries($.devicesWithEntities).sort((e,t)=>{const i=f[e[0]],a=f[t[0]];return(0,l.xL)(i.name_by_user||i.name||"",a.name_by_user||a.name||"")});for(const[s,n]of E){const i=f[s];M.push(..._(e,n.map(e=>e.entity_id),{title:i.name_by_user||i.name||t("ui.panel.config.devices.unnamed_device",{type:t(`ui.panel.config.devices.type.${i.entry_type||"device"}`)})}))}let H;if(i&&!u){const e=i.energy_sources.find(e=>"grid"===e.type);e&&e.flow_from.length>0&&(H={title:t("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return k.cards.unshift(...A,...x,...H?[H]:[]),k.cards.push(...M),k}},34128:function(e,t,i){i.d(t,{G9:function(){return o},Ni:function(){return n},Ue:function(){return d},Vd:function(){return h},gh:function(){return u}});i(16280),i(74423),i(3362),i(62953);var a=i(1087),s=i(45291);const n=e=>{const t=document.createElement("hui-error-card");return customElements.get("hui-error-card")?t.setConfig(e):(Promise.resolve().then(i.bind(i,4397)),customElements.whenDefined("hui-error-card").then(()=>{customElements.upgrade(t),t.setConfig(e)})),t},o=(e,t)=>({type:"error",error:e,origConfig:t}),r=(e,t)=>{const i=document.createElement(e);return i.setConfig(t),i},l=(e,t,a)=>"badge"===e?(e=>{const t=document.createElement("hui-error-badge");return customElements.get("hui-error-badge")?t.setConfig(e):(Promise.all([i.e("92769"),i.e("62453"),i.e("63577"),i.e("72130"),i.e("85010"),i.e("89385"),i.e("99788"),i.e("86909"),i.e("60521"),i.e("11082"),i.e("26233"),i.e("39005"),i.e("34310"),i.e("21519"),i.e("67862"),i.e("12009"),i.e("94860"),i.e("36332"),i.e("15862"),i.e("82529"),i.e("99143"),i.e("99023"),i.e("3025"),i.e("66990"),i.e("58382"),i.e("8835"),i.e("77369")]).then(i.bind(i,50655)),customElements.whenDefined("hui-error-badge").then(()=>{customElements.upgrade(t),t.setConfig(e)})),t})(o(t,a)):"heading-badge"===e?(e=>{const t=document.createElement("hui-error-heading-badge");return customElements.get("hui-error-heading-badge")?t.setConfig(e):(Promise.all([i.e("92769"),i.e("62453"),i.e("63577"),i.e("72130"),i.e("85010"),i.e("89385"),i.e("99788"),i.e("86909"),i.e("60521"),i.e("88701"),i.e("26233"),i.e("39005"),i.e("34310"),i.e("21519"),i.e("67862"),i.e("12009"),i.e("94860"),i.e("36332"),i.e("15862"),i.e("82529"),i.e("99143"),i.e("99023"),i.e("3025"),i.e("66990"),i.e("58382"),i.e("8835"),i.e("87559")]).then(i.bind(i,13469)),customElements.whenDefined("hui-error-heading-badge").then(()=>{customElements.upgrade(t),t.setConfig(e)})),t})(((e,t)=>({type:"error",error:e,origConfig:t}))(t,a)):n({type:"error",message:t}),c=e=>(0,s.c8)(e)?(0,s.Iu)(e):void 0,d=(e,t,i,a,s,n)=>{try{return h(e,t,i,a,s,n)}catch(o){return console.error(e,t.type,o),l(e,o.message,t)}},h=(e,t,i,s,n,o)=>{if(!t||"object"!=typeof t)throw new Error("Config is not an object");if(!(t.type||o||n&&"entity"in t))throw new Error("No card type configured");const d=t.type?c(t.type):void 0;if(d)return((e,t,i)=>{if(customElements.get(t))return r(t,i);const s=l(e,`Custom element doesn't exist: ${t}.`,i);if(!t.includes("-"))return s;s.style.display="None";const n=window.setTimeout(()=>{s.style.display=""},2e3);return customElements.whenDefined(t).then(()=>{clearTimeout(n),(0,a.r)(s,"ll-rebuild")}),s})(e,d,t);let h;if(n&&!t.type&&t.entity){h=`${n[t.entity.split(".",1)[0]]||n._domain_not_found}-entity`}else h=t.type||o;if(void 0===h)throw new Error("No type specified");const u=`hui-${h}-${e}`;if(s&&h in s)return s[h](),((e,t)=>{if(customElements.get(e))return r(e,t);const i=document.createElement(e);return customElements.whenDefined(e).then(()=>{try{customElements.upgrade(i),(0,a.r)(i,"ll-upgrade"),i.setConfig(t)}catch(e){(0,a.r)(i,"ll-rebuild")}}),i})(u,t);if(i&&i.has(h))return r(u,t);throw new Error(`Unknown type encountered: ${h}`)},u=async(e,t,i,a)=>{const s=c(e);if(s){const e=customElements.get(s);if(e)return e;if(!s.includes("-"))throw new Error(`Custom element not found: ${s}`);return new Promise((e,t)=>{setTimeout(()=>t(new Error(`Custom element not found: ${s}`)),2e3),customElements.whenDefined(s).then(()=>e(customElements.get(s)))})}const n=`hui-${e}-${t}`,o=customElements.get(n);if(i&&i.has(e))return o;if(a&&e in a)return o||a[e]().then(()=>customElements.get(n));throw new Error(`Unknown type: ${e}`)}},94225:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{T:function(){return y},t:function(){return b}});i(3362),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(62953);var s=i(99799),n=i(29003),o=i(92055),r=i(19396),l=i(74323),c=i(51199),d=i(43721),h=i(65509),u=i(21659),p=i(82525),g=i(34128),v=e([s,n,o,r,l,c,d,h,u,p]);[s,n,o,r,l,c,d,h,u,p]=v.then?(await v)():v;const _=new Set(["media-player-entity","scene-entity","script-entity","sensor-entity","simple-entity","toggle-entity","button","call-service"]),m={"button-entity":()=>i.e("26846").then(i.bind(i,21869)),"climate-entity":()=>i.e("56995").then(i.bind(i,2798)),"cover-entity":()=>i.e("41243").then(i.bind(i,79734)),"date-entity":()=>i.e("17418").then(i.bind(i,75473)),"datetime-entity":()=>Promise.all([i.e("63577"),i.e("80557"),i.e("81767")]).then(i.bind(i,69690)),"event-entity":()=>Promise.resolve().then(i.bind(i,99799)),"group-entity":()=>i.e("68827").then(i.bind(i,53110)),"input-button-entity":()=>i.e("19825").then(i.bind(i,46472)),"humidifier-entity":()=>i.e("378").then(i.bind(i,53537)),"input-datetime-entity":()=>Promise.all([i.e("63577"),i.e("71748")]).then(i.bind(i,1391)),"input-number-entity":()=>i.e("17600").then(i.bind(i,58723)),"input-select-entity":()=>Promise.all([i.e("63577"),i.e("44325")]).then(i.bind(i,54596)),"input-text-entity":()=>i.e("8086").then(i.bind(i,51765)),"lock-entity":()=>i.e("28245").then(i.bind(i,49748)),"number-entity":()=>i.e("71523").then(i.bind(i,57198)),"select-entity":()=>Promise.all([i.e("63577"),i.e("9374")]).then(i.bind(i,78157)),"text-entity":()=>i.e("67973").then(i.bind(i,58212)),"time-entity":()=>Promise.all([i.e("63577"),i.e("61331")]).then(i.bind(i,87550)),"timer-entity":()=>i.e("94097").then(i.bind(i,6344)),"update-entity":()=>i.e("80275").then(i.bind(i,38238)),"valve-entity":()=>i.e("96654").then(i.bind(i,46493)),conditional:()=>Promise.all([i.e("86909"),i.e("6166")]).then(i.bind(i,80725)),"weather-entity":()=>Promise.all([i.e("12009"),i.e("55166")]).then(i.bind(i,80395)),divider:()=>i.e("45249").then(i.bind(i,38584)),section:()=>i.e("51255").then(i.bind(i,39082)),weblink:()=>i.e("69148").then(i.bind(i,65751)),cast:()=>i.e("10405").then(i.bind(i,96612)),buttons:()=>i.e("50777").then(i.bind(i,65728)),attribute:()=>Promise.resolve().then(i.bind(i,65509)),text:()=>i.e("95421").then(i.bind(i,3980))},f={_domain_not_found:"simple",alert:"toggle",automation:"toggle",button:"button",climate:"climate",cover:"cover",date:"date",datetime:"datetime",event:"event",fan:"toggle",group:"group",humidifier:"humidifier",input_boolean:"toggle",input_button:"input-button",input_datetime:"input-datetime",input_number:"input-number",input_select:"input-select",input_text:"input-text",light:"toggle",lock:"lock",media_player:"media-player",number:"number",remote:"toggle",scene:"scene",script:"script",select:"select",sensor:"sensor",siren:"toggle",switch:"toggle",text:"text",time:"time",timer:"timer",update:"update",vacuum:"toggle",valve:"valve",water_heater:"climate",weather:"weather"},y=e=>(0,g.Ue)("row",e,_,m,f,void 0),b=e=>(0,g.gh)(e,"row",_,m);a()}catch(_){a(_)}})},12496:function(e,t,i){i.d(t,{Q:function(){return l}});i(18111),i(22489),i(3362),i(62953);var a=i(35952),s=i(71730),n=i(65063),o=i(57150),r=i(85633);const l=async(e,t,i,l,c)=>{var d,h;t.loadFragmentTranslation("lovelace");const u=await(0,s.SJ)(t),p=u.filter(e=>"storage"===e.mode),g=null===(d=t.panels.lovelace)||void 0===d||null===(d=d.config)||void 0===d?void 0:d.mode;if("storage"!==g&&!p.length)return void(0,o.Q)(e,{cardConfig:i,entities:c,yaml:!0});let v,_=null;if("storage"===g)try{v=await(0,a.Dz)(t.connection,null,!1)}catch(m){}if(!v&&p.length)for(const s of p)try{v=await(0,a.Dz)(t.connection,s.url_path,!1),_=s.url_path;break}catch(m){}v?p.length||null!==(h=v.views)&&void 0!==h&&h.length?p.length||1!==v.views.length?(0,r.X)(e,{lovelaceConfig:v,urlPath:_,allowDashboardChange:!0,actionLabel:t.localize("ui.common.next"),dashboards:u,viewSelectedCallback:(s,n,r)=>{(0,o.Q)(e,{cardConfig:i,sectionConfig:l,lovelaceConfig:n,saveConfig:async e=>{try{await(0,a.ql)(t,s,e)}catch(i){alert(t.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[r],entities:c})}}):(0,o.Q)(e,{cardConfig:i,sectionConfig:l,lovelaceConfig:v,saveConfig:async e=>{try{await(0,a.ql)(t,null,e)}catch(m){alert(t.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[0],entities:c}):(0,n.showAlertDialog)(e,{text:"You don't have any Lovelace views, first create a view in Lovelace."}):u.length>p.length?(0,o.Q)(e,{cardConfig:i,sectionConfig:l,entities:c,yaml:!0}):(0,n.showAlertDialog)(e,{text:"You don't seem to be in control of any dashboard, please take control first."})}},57150:function(e,t,i){i.d(t,{Q:function(){return n}});i(3362),i(62953);var a=i(1087);const s=()=>Promise.all([i.e("92769"),i.e("62453"),i.e("93785"),i.e("63577"),i.e("8477"),i.e("72130"),i.e("85010"),i.e("62725"),i.e("89385"),i.e("74980"),i.e("99788"),i.e("21543"),i.e("86909"),i.e("60521"),i.e("56043"),i.e("26233"),i.e("39005"),i.e("34310"),i.e("44288"),i.e("30002"),i.e("21519"),i.e("67862"),i.e("12009"),i.e("94860"),i.e("55076"),i.e("36332"),i.e("15862"),i.e("82529"),i.e("468"),i.e("99023"),i.e("58382"),i.e("3142"),i.e("91915")]).then(i.bind(i,78305)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:s,dialogParams:t})}},85633:function(e,t,i){i.d(t,{X:function(){return s}});i(3362),i(62953);var a=i(1087);const s=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:()=>Promise.all([i.e("93785"),i.e("63577"),i.e("4939"),i.e("40901")]).then(i.bind(i,54564)),dialogParams:t})}},30039:function(e,t,i){i.d(t,{R:function(){return a}});const a=(e,t="")=>{const i=document.createElement("a");i.target="_blank",i.href=e,i.download=t,i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click")),document.body.removeChild(i)}}}]);
//# sourceMappingURL=53741.d0c64f7fcd278c99.js.map