"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["81152"],{91069:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{EO:function(){return S},Yq:function(){return b},_U:function(){return D},eE:function(){return O},fU:function(){return k},ol:function(){return p},xo:function(){return w}});var o=n(78016),s=n(31810),a=n(49134),r=n(81977),c=n(36307),l=n(35932),u=n(73983),h=n(6946),d=n(92913),f=n(83339),_=n(77972),m=n(31886),g=n(46927),y=t([m]);m=(y.then?(await y)():y)[0];const v=(t,e,n,i)=>{const o=n(new m.BB(t,e),i);return o instanceof Date?new Date(o.getTime()):o},p=(t,e,n,i,o)=>n.time_zone===g.Wj.server?v(t,i.time_zone,e,o):e(t,o),w=(t,e,n,i,o)=>n.time_zone===g.Wj.server?v(t,i.time_zone,e,o):e(t,o),S=(t,e,n,i,o)=>w(t,n,i,o,i.time_zone===g.Wj.server?new m.BB(e,o.time_zone):e),O=(t,e,n,i,m)=>{let g,y;if(w(t,o.e,i,m)&&w(e,s.c,i,m)){const o=(S(e,t,a.W,i,m)+1)*(n?1:-1);g=p(t,r.P,i,m,o),y=p(p(e,r.P,i,m,o),c.p,i,m)}else if(w(t,t=>(0,l.o)(t).getMilliseconds()===t.getMilliseconds(),i,m)&&w(e,t=>(0,u.D)(t).getMilliseconds()===t.getMilliseconds(),i,m)){const o=(S(e,t,h.c,i,m)+1)*(n?1:-1);g=p(t,d.f,i,m,o),y=p(e,d.f,i,m,o)}else{const o=S(e,t,f.b,i,m)*(n?1:-1);g=p(t,_.A,i,m,o),y=p(e,_.A,i,m,o)}return{start:g,end:y}},D=(t,e)=>{const n=new m.BB(t,e);return new Date(n.getTime())},b=(t,e)=>new m.BB(t,e).toISOString().split("T")[0],k=(t,e)=>new m.BB(t,e).toISOString().split("T")[1].split(".")[0];i()}catch(v){i(v)}})},46223:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{b:function(){return S}});var o=n(35932),s=n(73983),a=n(92913),r=n(52640),c=n(69137),l=n(35660),u=n(36307),h=n(11650),d=n(15797),f=n(33977),_=n(69748),m=n(55144),g=n(21828),y=n(66708),v=n(91069),p=n(380),w=t([p,v]);[p,v]=w.then?(await w)():w;const S=(t,e)=>{const n=new Date,i=(0,p.P)(t.locale);switch(e){case"today":return[(0,v.ol)(n,o.o,t.locale,t.config,{weekStartsOn:i}),(0,v.ol)(n,s.D,t.locale,t.config,{weekStartsOn:i})];case"yesterday":return[(0,v.ol)((0,a.f)(n,-1),o.o,t.locale,t.config,{weekStartsOn:i}),(0,v.ol)((0,a.f)(n,-1),s.D,t.locale,t.config,{weekStartsOn:i})];case"this_week":return[(0,v.ol)(n,r.k,t.locale,t.config,{weekStartsOn:i}),(0,v.ol)(n,c.$,t.locale,t.config,{weekStartsOn:i})];case"this_month":return[(0,v.ol)(n,l.w,t.locale,t.config),(0,v.ol)(n,u.p,t.locale,t.config)];case"this_quarter":return[(0,v.ol)(n,h.a,t.locale,t.config),(0,v.ol)(n,d.j,t.locale,t.config)];case"this_year":return[(0,v.ol)(n,f.D,t.locale,t.config),(0,v.ol)(n,_.Q,t.locale,t.config)];case"now-7d":return[(0,v.ol)(n,m.e,t.locale,t.config,7),(0,v.ol)(n,m.e,t.locale,t.config,0)];case"now-30d":return[(0,v.ol)(n,m.e,t.locale,t.config,30),(0,v.ol)(n,m.e,t.locale,t.config,0)];case"now-12m":return[(0,v.ol)(n,g.a,t.locale,t.config,12),(0,v.ol)(n,g.a,t.locale,t.config,0)];case"now-1h":return[(0,v.ol)(n,y.O,t.locale,t.config,1),(0,v.ol)(n,y.O,t.locale,t.config,0)];case"now-12h":return[(0,v.ol)(n,y.O,t.locale,t.config,12),(0,v.ol)(n,y.O,t.locale,t.config,0)];case"now-24h":return[(0,v.ol)(n,y.O,t.locale,t.config,24),(0,v.ol)(n,y.O,t.locale,t.config,0)]}return[n,n]};i()}catch(S){i(S)}})},23528:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{$3:function(){return y},$O:function(){return k},$j:function(){return v},ED:function(){return r},JE:function(){return C},OQ:function(){return W},PU:function(){return z},Ph:function(){return m},Uf:function(){return b},W1:function(){return g},Wr:function(){return d},Z:function(){return u},gF:function(){return p},iY:function(){return w},jU:function(){return c},nN:function(){return D},p3:function(){return h},pJ:function(){return _},r_:function(){return l},sz:function(){return f}});n(74423),n(18111),n(13579),n(62953);var o=n(28978),s=n(380),a=t([s]);s=(a.then?(await a)():a)[0];var r=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const c=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],l=["L","gal","ft³","m³","CCF","MCF"],u=t=>t.sendMessagePromise({type:"recorder/info"}),h=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),d=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),f=(t,e,n,i,o="hour",s,a)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==n?void 0:n.toISOString(),statistic_ids:i,period:o,units:s,types:a}),_=(t,e,n,i)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:i,fixed_period:n.fixed_period?{start_time:n.fixed_period.start instanceof Date?n.fixed_period.start.toISOString():n.fixed_period.start,end_time:n.fixed_period.end instanceof Date?n.fixed_period.end.toISOString():n.fixed_period.end}:void 0,calendar:n.calendar?Object.assign(Object.assign({},"week"===n.calendar.period?{first_weekday:(0,s.D)(t.locale).substring(0,3)}:{}),n.calendar):void 0,rolling_window:n.rolling_window}),m=t=>t.callWS({type:"recorder/validate_statistics"}),g=(t,e,n,i)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:n,unit_class:i}),y=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),v=t=>{let e=null;if(!t)return null;for(const n of t)null!==n.change&&void 0!==n.change&&(null===e?e=n.change:e+=n.change);return e},p=(t,e)=>{let n=null;for(const i of e){if(!(i in t))continue;const e=v(t[i]);null!==e&&(null===n?n=e:n+=e)}return n},w=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),S=["mean","min","max"],O=["sum","state","change"],D=(t,e)=>!(!S.includes(e)||0===t.mean_type)||!(!O.includes(e)||!t.has_sum),b=(t,e,n,i,o)=>{const s=new Date(n).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:s,adjustment:i,adjustment_unit_of_measurement:o})},k=(t,e,n)=>{const i=t.states[e];return i?(0,o.u)(i):(null==n?void 0:n.name)||e},C=(t,e,n)=>{let i;var o;e&&(i=null===(o=t.states[e])||void 0===o?void 0:o.attributes.unit_of_measurement);return void 0===i?null==n?void 0:n.statistics_unit_of_measurement:i},W=t=>t.includes(":"),z=t=>t.callWS({type:"recorder/update_statistics_issues"});i()}catch(c){i(c)}})},51687:function(t,e,n){n.a(t,async function(t,i){try{n.r(e),n.d(e,{HuiHomeSummaryCard:function(){return C}});n(18111),n(22489),n(61701),n(62953);var o=n(40445),s=n(35932),a=n(73983),r=n(96196),c=n(77845),l=n(6415),u=n(78870),h=n(91069),d=n(71727),f=n(4423),_=n(20058),m=(n(76776),n(22573),n(80933),n(32248),n(38114)),g=n(54706),y=n(37544),v=n(97176),p=n(8537),w=n(51989),S=t([h,_,m,p]);[h,_,m,p]=S.then?(await S)():S;let O,D,b=t=>t;const k={light:"amber",climate:"deep-orange",security:"blue-grey",media_players:"blue",energy:"amber"};class C extends((0,g.E)(r.WF)){hassSubscribe(){var t;if("energy"!==(null===(t=this._config)||void 0===t?void 0:t.summary))return[];const e=(0,m.tb)(this.hass,{key:"energy_home_dashboard"});return e.setPeriod((0,h.ol)(new Date,s.o,this.hass.locale,this.hass.config),(0,h.ol)(new Date,a.D,this.hass.locale,this.hass.config)),[e.subscribe(t=>{this._energyData=t})]}setConfig(t){this._config=t}getCardSize(){var t;return null!==(t=this._config)&&void 0!==t&&t.vertical?2:1}getGridOptions(){var t;let e=6,n=1;return null!==(t=this._config)&&void 0!==t&&t.vertical&&(n++,e=3),{columns:6,rows:n,min_columns:e,min_rows:n}}_handleAction(t){(0,y.$)(this,this.hass,this._config,t.detail.action)}get _hasCardAction(){var t,e,n;return(0,v.h)(null===(t=this._config)||void 0===t?void 0:t.tap_action)||(0,v.h)(null===(e=this._config)||void 0===e?void 0:e.hold_action)||(0,v.h)(null===(n=this._config)||void 0===n?void 0:n.double_tap_action)}_computeSummaryState(){if(!this._config||!this.hass)return"";const t=Object.keys(this.hass.states),e=Object.values(this.hass.areas);switch(this._config.summary){case"light":{const e=p.vV.light.map(t=>(0,f.r)(this.hass,t)),n=(0,f.B)(t,e).filter(t=>{var e;return"on"===(null===(e=this.hass.states[t])||void 0===e?void 0:e.state)});return n.length?this.hass.localize("ui.card.home-summary.count_lights_on",{count:n.length}):this.hass.localize("ui.card.home-summary.all_lights_off")}case"climate":{var n,i;const t=e.map(t=>t.temperature_entity_id).filter(Boolean).map(t=>{var e;return parseFloat(null===(e=this.hass.states[t])||void 0===e?void 0:e.state)||NaN}).filter(t=>!isNaN(t));if(0===t.length)return"";const o=Math.min(...t),s=Math.max(...t);if(isNaN(o)||isNaN(s))return"";const a=(0,_.ZV)(o,null===(n=this.hass)||void 0===n?void 0:n.locale,{minimumFractionDigits:1,maximumFractionDigits:1}),r=(0,_.ZV)(s,null===(i=this.hass)||void 0===i?void 0:i.locale,{minimumFractionDigits:1,maximumFractionDigits:1});return a===r?`${a}°`:`${a} - ${r}°`}case"security":{const e=p.vV.security.map(t=>(0,f.r)(this.hass,t)),n=(0,f.B)(t,e),i=n.filter(t=>"lock"===(0,d.m)(t)),o=n.filter(t=>"alarm_control_panel"===(0,d.m)(t)),s=o.filter(t=>{var e;return"disarmed"===(null===(e=this.hass.states[t])||void 0===e?void 0:e.state)});if(!i.length&&!o.length)return"";const a=i.filter(t=>{var e;const n=null===(e=this.hass.states[t])||void 0===e?void 0:e.state;return"unlocked"===n||"jammed"===n||"open"===n});return a.length?this.hass.localize("ui.card.home-summary.count_locks_unlocked",{count:a.length}):s.length?this.hass.localize("ui.card.home-summary.count_alarms_disarmed",{count:s.length}):this.hass.localize("ui.card.home-summary.all_secure")}case"media_players":{const e=p.vV.media_players.map(t=>(0,f.r)(this.hass,t)),n=(0,f.B)(t,e).filter(t=>{var e;return"playing"===(null===(e=this.hass.states[t])||void 0===e?void 0:e.state)});return n.length?this.hass.localize("ui.card.home-summary.count_media_playing",{count:n.length}):this.hass.localize("ui.card.home-summary.no_media_playing")}case"energy":{if(!this._energyData)return"";const{summedData:t}=(0,m.gv)(this._energyData),{consumption:e}=(0,m.DR)(t,void 0),n=e.total.used_total;return(0,m.n3)(this.hass,n,"kWh")}}return""}render(){if(!this._config||!this.hass)return r.s6;const t={"--tile-color":(0,u.MP)(k[this._config.summary])},e=this._computeSummaryState(),n=(0,p.rh)(this.hass.localize,this._config.summary),i=p.It[this._config.summary];return(0,r.qy)(O||(O=b` <ha-card style="${0}"> <ha-tile-container .vertical="${0}" .interactive="${0}" .actionHandlerOptions="${0}" @action="${0}"> <ha-tile-icon slot="icon" .icon="${0}"></ha-tile-icon> <ha-tile-info slot="info" .primary="${0}" .secondary="${0}"></ha-tile-info> </ha-tile-container> </ha-card> `),(0,l.W)(t),Boolean(this._config.vertical),this._hasCardAction,{hasHold:(0,v.h)(this._config.hold_action),hasDoubleClick:(0,v.h)(this._config.double_tap_action)},this._handleAction,i,n,e)}constructor(...t){super(...t),this.hassSubscribeRequiredHostProps=["_config"]}}C.styles=[w.c,(0,r.AH)(D||(D=b`:host{--tile-color:var(--state-inactive-color)}`))],(0,o.Cg)([(0,c.MZ)({attribute:!1})],C.prototype,"hass",void 0),(0,o.Cg)([(0,c.wk)()],C.prototype,"_config",void 0),(0,o.Cg)([(0,c.wk)()],C.prototype,"_energyData",void 0),C=(0,o.Cg)([(0,c.EM)("hui-home-summary-card")],C),i()}catch(O){i(O)}})},56434:function(t,e,n){n.d(e,{e:function(){return o}});var i=n(81977);function o(t,e,n){return(0,i.P)(t,12*e,n)}}}]);
//# sourceMappingURL=81152.b94c3e287722d590.js.map