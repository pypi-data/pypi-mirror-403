export const __rspack_esm_id="27800";export const __rspack_esm_ids=["27800"];export const __webpack_modules__={79(e,t,n){n.d(t,{Kh:()=>c,xn:()=>a,T:()=>r});n(18111),n(22489),n(61701);var i=n(22786);n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698);var o=n(28978);const a=e=>(e.name_by_user||e.name)?.trim(),r=(e,t,n)=>a(e)||n&&s(t,n)||t.localize("ui.panel.config.devices.unnamed_device",{type:t.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)}),s=(e,t)=>{for(const n of t||[]){const t="string"==typeof n?n:n.entity_id,i=e.states[t];if(i)return(0,o.u)(i)}},c=(0,i.A)(e=>function(e){const t=new Set,n=new Set;for(const i of e)n.has(i)?t.add(i):n.add(i);return t}(Object.values(e).map(e=>a(e)).filter(e=>void 0!==e)))},28978(e,t,n){n.d(t,{_:()=>o,u:()=>a});var i=n(68246);const o=(e,t)=>void 0===t.friendly_name?(0,i.Y)(e).replace(/_/g," "):(t.friendly_name??"").toString(),a=e=>o(e.entity_id,e.attributes)},28455(e,t,n){n.d(t,{j:()=>o,l:()=>i});const i=(e,t,n,i,a)=>{const r=t[e.entity_id];return r?o(r,t,n,i,a):{entity:null,device:null,area:null,floor:null}},o=(e,t,n,i,o)=>{const a=t[e.entity_id],r=e?.device_id,s=r?n[r]:void 0,c=e?.area_id||s?.area_id,l=c?i[c]:void 0,d=l?.floor_id;return{entity:a,device:s||null,area:l||null,floor:(d?o[d]:void 0)||null}}},4423(e,t,n){n.d(t,{B:()=>c,r:()=>s});n(44114),n(18111),n(13579),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698);var i=n(44537),o=n(71727),a=n(28455);const r=e=>{if(void 0!==e)return null===e?new Set([null]):new Set((0,i.e)(e))},s=(e,t)=>{const n=t.domain?new Set((0,i.e)(t.domain)):void 0,s=t.hidden_domains?new Set((0,i.e)(t.hidden_domains)):void 0,c=t.device_class?new Set((0,i.e)(t.device_class)):void 0,l=r(t.floor),d=r(t.area),u=r(t.device),p=t.entity_category?new Set((0,i.e)(t.entity_category)):void 0,_=t.label?new Set((0,i.e)(t.label)):void 0,m=t.hidden_platform?new Set((0,i.e)(t.hidden_platform)):void 0;return t=>{const i=e.states[t];if(!i)return!1;if(n||s){const e=(0,o.m)(t);if(n&&!n.has(e))return!1;if(s&&s.has(e))return!1}if(c){const e=i.attributes.device_class||"none";if(!c.has(e))return!1}const{area:r,floor:f,device:h,entity:v}=(0,a.l)(i,e.entities,e.devices,e.areas,e.floors);if(v&&v.hidden)return!1;if(l){const e=f?.floor_id??null;if(!l.has(e))return!1}if(d){const e=r?.area_id??null;if(!d.has(e))return!1}if(u){const e=h?.id??null;if(!u.has(e))return!1}if(_){if(!v)return!1;if(!v.labels.some(e=>_.has(e)))return!1}if(p){if(!v)return!1;const e=v?.entity_category||"none";if(!p.has(e))return!1}if(m){if(!v)return!1;if(v.platform&&m.has(v.platform))return!1}return!0}},c=(e,t)=>{const n=new Set,i=[];for(const o of t)for(const t of e)o(t)&&!n.has(t)&&(n.add(t),i.push(t));return i}},63004(e,t,n){n.d(t,{O:()=>o,q:()=>i});const i=(e,t,n)=>Math.min(Math.max(e,t),n),o=(e,t,n)=>{let i;return i=null!=t?Math.max(e,t):e,i=null!=n?Math.min(i,n):i,i}},24367(e,t,n){n.d(t,{L:()=>o,z:()=>a});var i=n(23832);const o=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],a=(0,i.g)(o)},48441(e,t,n){n.d(t,{B:()=>i});const i=[{area:null,hidden_platform:["automation","script","hassio","backup","mobile_app","zone","person"],hidden_domains:["ai_task","automation","configurator","device_tracker","event","geo_location","notify","persistent_notification","script","sun","tag","todo","zone",...n(46190).gt]}]},78859(e,t,n){n.r(t),n.d(t,{HomeOtherDevicesViewStrategy:()=>_});n(44114),n(18111),n(22489),n(61701);var i=n(62826),o=n(96196),a=n(44457),r=n(79),s=n(71727),c=n(28455),l=n(4423),d=n(63004),u=n(24367),p=n(48441);class _ extends o.mN{static async generate(e,t){const n=Object.keys(t.states),i=p.B.map(e=>(0,l.r)(t,e)),o=(0,l.B)(n,i),a=[],_={},m=[];for(const e of o){const n=t.states[e];if(!n)continue;const{device:i}=(0,c.l)(n,t.entities,t.devices,t.areas,t.floors);i?(i.id in _||(_[i.id]=[]),_[i.id].push(e)):m.push(e)}const f=Object.entries(_).map(([e,t])=>({device_id:e,entities:t})),h=m.filter(e=>{const t=(0,s.m)(e);return(0,u.z)(t)}),v=m.filter(e=>{const t=(0,s.m)(e);return!(0,u.z)(t)}),y=(0,l.r)(t,{domain:"sensor",device_class:"battery"}),g=(0,l.r)(t,{domain:"sensor",device_class:["energy","power"]}),b=(0,l.r)(t,{entity_category:"none"});for(const n of f){if(0===n.entities.length)continue;const i=n.entities.filter(e=>y(e)),o=n.entities.filter(e=>!y(e)&&!g(e)&&b(e));if(0===o.length)continue;const s=n.device_id,c=t.devices[s];let l="";c&&(l=(0,r.xn)(c)||t.localize("ui.panel.lovelace.strategy.home.unamed_device")),a.push({type:"grid",cards:[{type:"heading",heading:l,tap_action:c&&t.user?.is_admin?{action:"navigate",navigation_path:`/config/devices/device/${c.id}`}:{action:"none"},badges:[...i.slice(0,1).map(e=>({entity:e,type:"entity",tap_action:{action:"more-info"}})),...e.home_panel&&c&&t.user?.is_admin?[{type:"button",icon:"mdi:home-plus",text:t.localize("ui.panel.lovelace.strategy.home-other-devices.assign_area"),tap_action:{action:"fire-dom-event",home_panel:{type:"assign_area",device_id:c.id}}}]:[]]},...o.map(e=>({type:"tile",entity:e,name:{type:"entity"}}))]})}const w=(0,d.q)(a.length,2,3);return h.length&&a.push({type:"grid",column_span:w,cards:[{type:"heading",heading:t.localize("ui.panel.lovelace.strategy.home-other-devices.helpers")},...h.map(e=>({type:"tile",entity:e}))]}),v.length&&a.push({type:"grid",column_span:w,cards:[{type:"heading",heading:t.localize("ui.panel.lovelace.strategy.home-other-devices.entities")},...v.map(e=>({type:"tile",entity:e}))]}),0===a.length?{type:"panel",cards:[{type:"empty-state",icon:"mdi:check-all",icon_color:"primary",content_only:!0,title:t.localize("ui.panel.lovelace.strategy.home-other-devices.all_organized_title"),content:t.localize("ui.panel.lovelace.strategy.home-other-devices.all_organized_content")}]}:(1===a.length&&(a[0].column_span=2),{type:"sections",header:{badges_position:"bottom"},max_columns:w,sections:a})}}_=(0,i.Cg)([(0,a.EM)("home-other-devices-view-strategy")],_)}};
//# sourceMappingURL=27800.8a7fc8fb000f45c6.js.map