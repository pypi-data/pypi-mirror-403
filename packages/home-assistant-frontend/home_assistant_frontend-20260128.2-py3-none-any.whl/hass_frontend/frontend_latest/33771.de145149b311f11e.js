export const __rspack_esm_id="33771";export const __rspack_esm_ids=["33771"];export const __webpack_modules__={91069(e,t,i){i.a(e,async function(e,a){try{i.d(t,{EO:()=>w,Yq:()=>C,_U:()=>k,eE:()=>$,fU:()=>x,ol:()=>b,xo:()=>f});var s=i(78016),o=i(31810),n=i(49134),r=i(81977),l=i(36307),h=i(35932),d=i(73983),c=i(6946),p=i(92913),u=i(83339),m=i(77972),_=i(31886),v=i(46927),y=e([_]);_=(y.then?(await y)():y)[0];const g=(e,t,i,a)=>{const s=i(new _.BB(e,t),a);return s instanceof Date?new Date(s.getTime()):s},b=(e,t,i,a,s)=>i.time_zone===v.Wj.server?g(e,a.time_zone,t,s):t(e,s),f=(e,t,i,a,s)=>i.time_zone===v.Wj.server?g(e,a.time_zone,t,s):t(e,s),w=(e,t,i,a,s)=>f(e,i,a,s,a.time_zone===v.Wj.server?new _.BB(t,s.time_zone):t),$=(e,t,i,a,_)=>{let v,y;if(f(e,s.e,a,_)&&f(t,o.c,a,_)){const s=(w(t,e,n.W,a,_)+1)*(i?1:-1);v=b(e,r.P,a,_,s),y=b(b(t,r.P,a,_,s),l.p,a,_)}else if(f(e,e=>(0,h.o)(e).getMilliseconds()===e.getMilliseconds(),a,_)&&f(t,e=>(0,d.D)(e).getMilliseconds()===e.getMilliseconds(),a,_)){const s=(w(t,e,c.c,a,_)+1)*(i?1:-1);v=b(e,p.f,a,_,s),y=b(t,p.f,a,_,s)}else{const s=w(t,e,u.b,a,_)*(i?1:-1);v=b(e,m.A,a,_,s),y=b(t,m.A,a,_,s)}return{start:v,end:y}},k=(e,t)=>{const i=new _.BB(e,t);return new Date(i.getTime())},C=(e,t)=>new _.BB(e,t).toISOString().split("T")[0],x=(e,t)=>new _.BB(e,t).toISOString().split("T")[1].split(".")[0];a()}catch(e){a(e)}})},65522(e,t,i){i.d(t,{A:()=>a});const a=e=>e.name?.trim()},79(e,t,i){i.d(t,{Kh:()=>l,xn:()=>o,T:()=>n});i(18111),i(22489),i(61701);var a=i(22786);i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);var s=i(28978);const o=e=>(e.name_by_user||e.name)?.trim(),n=(e,t,i)=>o(e)||i&&r(t,i)||t.localize("ui.panel.config.devices.unnamed_device",{type:t.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)}),r=(e,t)=>{for(const i of t||[]){const t="string"==typeof i?i:i.entity_id,a=e.states[t];if(a)return(0,s.u)(a)}},l=(0,a.A)(e=>function(e){const t=new Set,i=new Set;for(const a of e)i.has(a)?t.add(a):i.add(a);return t}(Object.values(e).map(e=>o(e)).filter(e=>void 0!==e)))},81816(e,t,i){i.d(t,{aH:()=>n,cx:()=>r,es:()=>l});var a=i(79),s=i(28978),o=i(79461);const n=(e,t,i)=>{const a=t[e.entity_id];return a?r(a,i):(0,s.u)(e)},r=(e,t,i)=>{const n=e.name||("original_name"in e&&null!=e.original_name?String(e.original_name):void 0),r=e.device_id?t[e.device_id]:void 0;if(!r)return n||(i?(0,s.u)(i):void 0);const l=(0,a.xn)(r);return l!==n?l&&n&&(0,o.p)(n,l)||n:void 0},l=(e,t,i)=>!n(e,t,i)},74705(e,t,i){i.d(t,{Cf:()=>c,uU:()=>d});i(18111),i(81148),i(22489),i(61701),i(13579);if(66649!=i.j)var a=i(44537);var s=i(65522),o=i(79),n=i(81816),r=i(55931),l=i(28455);const h=66649!=i.j?[{type:"device"},{type:"entity"}]:null,d=(e,t,i,s,o,r,l)=>{let d=(0,a.e)(t||h);const p=l?.separator??" ";if(d.every(e=>"text"===e.type))return d.map(e=>e.text).join(p);if((0,n.es)(e,i,s)){d.some(e=>"device"===e.type)||(d=d.map(e=>"entity"===e.type?{type:"device"}:e))}const u=c(e,d,i,s,o,r);return 1===u.length?u[0]||"":u.filter(e=>e).join(p)},c=(e,t,i,a,h,d)=>{const{device:c,area:p,floor:u}=(0,l.l)(e,i,a,h,d);return t.map(t=>{switch(t.type){case"entity":return(0,n.aH)(e,i,a);case"device":return c?(0,o.xn)(c):void 0;case"area":return p?(0,s.A)(p):void 0;case"floor":return u?(0,r.X)(u):void 0;case"text":return t.text;default:return""}})}},55931(e,t,i){i.d(t,{X:()=>a});const a=e=>e.name?.trim()},79461(e,t,i){i.d(t,{p:()=>s});const a=[" ",": "," - "],s=(e,t)=>{const i=e.toLowerCase(),s=t.toLowerCase();for(const t of a){const a=`${s}${t}`;if(i.startsWith(a)){const t=e.substring(a.length);if(t.length)return o(t.substr(0,t.indexOf(" ")))?t:t[0].toUpperCase()+t.slice(1)}}},o=e=>e.toLowerCase()!==e},78649(e,t,i){i.d(t,{n:()=>s});const a=/^(\w+)\.(\w+)$/,s=e=>a.test(e)},77796(e,t,i){i.d(t,{n:()=>a});const a=(e,t,i=!0,a=!0)=>{let s,o=0;const n=(...n)=>{const r=()=>{o=!1===i?0:Date.now(),s=void 0,e(...n)},l=Date.now();o||!1!==i||(o=l);const h=t-(l-o);h<=0||h>t?(s&&(clearTimeout(s),s=void 0),o=l,e(...n)):s||!1===a||(s=window.setTimeout(r,h))};return n.cancel=()=>{clearTimeout(s),s=void 0,o=0},n}},5745(e,t,i){var a=i(62826),s=i(4720),o=i(44457);class n extends s.Y{}n=(0,a.Cg)([(0,o.EM)("ha-chip-set")],n)},82474(e,t,i){i.a(e,async function(e,t){try{i(18111),i(61701);var a=i(62826),s=i(96196),o=i(44457),n=i(22786),r=i(1087),l=i(74705),h=i(78649),d=i(15638),c=i(53756),p=i(95350),u=i(24367),m=i(19711),_=(i(75064),i(38508)),v=(i(67094),i(74281)),y=e([_,v]);[_,v]=y.then?(await y)():y;const g="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",b="M11,13.5V21.5H3V13.5H11M12,2L17.5,11H6.5L12,2M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13Z",f="___create-new-entity___";class w extends s.WF{firstUpdated(e){super.firstUpdated(e),this.hass.loadBackendTranslation("title")}get _showEntityId(){return this.showEntityId||this.hass.userData?.showEntityIdPicker}render(){const e=this.placeholder??this.hass.localize("ui.components.entity.entity-picker.placeholder");return s.qy` <ha-generic-picker .hass="${this.hass}" .disabled="${this.disabled}" .autofocus="${this.autofocus}" .allowCustomValue="${this.allowCustomEntity}" .required="${this.required}" .label="${this.label}" .placeholder="${e}" .helper="${this.helper}" .value="${this.addButton?void 0:this.value}" .searchLabel="${this.searchLabel}" .notFoundLabel="${this._notFoundLabel}" .rowRenderer="${this._rowRenderer}" .getItems="${this._getItems}" .getAdditionalItems="${this._getAdditionalItems}" .hideClearIcon="${this.hideClearIcon}" .searchFn="${this._searchFn}" .valueRenderer="${this._valueRenderer}" .searchKeys="${c.t}" use-top-label .addButtonLabel="${this.addButton?this.hass.localize("ui.components.entity.entity-picker.add"):void 0}" .unknownItemText="${this.hass.localize("ui.components.entity.entity-picker.unknown")}" @value-changed="${this._valueChanged}"> </ha-generic-picker> `}async open(){await this.updateComplete,await(this._picker?.open())}_valueChanged(e){e.stopPropagation();const t=e.detail.value;if(t){if(t.startsWith(f)){const e=t.substring(f.length);return void(0,m.$)(this,{domain:e,dialogClosedCallback:e=>{e.entityId&&this._setValue(e.entityId)}})}(0,h.n)(t)&&this._setValue(t)}else this._setValue(void 0)}_setValue(e){this.value=e,(0,r.r)(this,"value-changed",{value:e}),(0,r.r)(this,"change")}constructor(...e){super(...e),this.autofocus=!1,this.disabled=!1,this.required=!1,this.showEntityId=!1,this.hideClearIcon=!1,this.addButton=!1,this._valueRenderer=e=>{const t=e||"",i=this.hass.states[t];if(!i)return s.qy` <ha-svg-icon slot="start" .path="${b}" style="margin:0 4px"></ha-svg-icon> <span slot="headline">${t}</span> `;const[a,o,n]=(0,l.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],this.hass.entities,this.hass.devices,this.hass.areas,this.hass.floors),r=(0,d.qC)(this.hass),h=a||o||t,c=[n,a?o:void 0].filter(Boolean).join(r?" ◂ ":" ▸ ");return s.qy` <state-badge .hass="${this.hass}" .stateObj="${i}" slot="start"></state-badge> <span slot="headline">${h}</span> <span slot="supporting-text">${c}</span> `},this._rowRenderer=(e,t)=>{const i=this._showEntityId;return s.qy` <ha-combo-box-item type="button" compact="compact" .borderTop="${0!==t}"> ${e.icon_path?s.qy` <ha-svg-icon slot="start" style="margin:0 4px" .path="${e.icon_path}"></ha-svg-icon> `:s.qy` <state-badge slot="start" .stateObj="${e.stateObj}" .hass="${this.hass}"></state-badge> `} <span slot="headline">${e.primary}</span> ${e.secondary?s.qy`<span slot="supporting-text">${e.secondary}</span>`:s.s6} ${e.stateObj&&i?s.qy` <span slot="supporting-text" class="code"> ${e.stateObj.entity_id} </span> `:s.s6} ${e.domain_name&&!i?s.qy` <div slot="trailing-supporting-text" class="domain"> ${e.domain_name} </div> `:s.s6} </ha-combo-box-item> `},this._getAdditionalItems=()=>this._getCreateItems(this.hass.localize,this.createDomains),this._getCreateItems=(0,n.A)((e,t)=>t?.length?(this.hass.loadFragmentTranslation("config"),t.map(t=>{const i=e("ui.components.entity.entity-picker.create_helper",{domain:(0,u.z)(t)?e(`ui.panel.config.helpers.types.${t}`)||t:(0,p.p$)(e,t)});return{id:f+t,primary:i,secondary:e("ui.components.entity.entity-picker.new_entity"),icon_path:g}})):[]),this._getEntitiesMemoized=(0,n.A)(c.w),this._getItems=()=>this._getEntitiesMemoized(this.hass,this.includeDomains,this.excludeDomains,this.entityFilter,this.includeDeviceClasses,this.includeUnitOfMeasurement,this.includeEntities,this.excludeEntities,this.value),this._searchFn=(e,t)=>{const i=t.findIndex(t=>t.stateObj?.entity_id===e);if(-1===i)return t;const[a]=t.splice(i,1);return t.unshift(a),t},this._notFoundLabel=e=>this.hass.localize("ui.components.entity.entity-picker.no_match",{term:s.qy`<b>‘${e}’</b>`})}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],w.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean})],w.prototype,"autofocus",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean})],w.prototype,"disabled",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean})],w.prototype,"required",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,attribute:"allow-custom-entity"})],w.prototype,"allowCustomEntity",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,attribute:"show-entity-id"})],w.prototype,"showEntityId",void 0),(0,a.Cg)([(0,o.MZ)()],w.prototype,"label",void 0),(0,a.Cg)([(0,o.MZ)()],w.prototype,"value",void 0),(0,a.Cg)([(0,o.MZ)()],w.prototype,"helper",void 0),(0,a.Cg)([(0,o.MZ)()],w.prototype,"placeholder",void 0),(0,a.Cg)([(0,o.MZ)({type:String,attribute:"search-label"})],w.prototype,"searchLabel",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1,type:Array})],w.prototype,"createDomains",void 0),(0,a.Cg)([(0,o.MZ)({type:Array,attribute:"include-domains"})],w.prototype,"includeDomains",void 0),(0,a.Cg)([(0,o.MZ)({type:Array,attribute:"exclude-domains"})],w.prototype,"excludeDomains",void 0),(0,a.Cg)([(0,o.MZ)({type:Array,attribute:"include-device-classes"})],w.prototype,"includeDeviceClasses",void 0),(0,a.Cg)([(0,o.MZ)({type:Array,attribute:"include-unit-of-measurement"})],w.prototype,"includeUnitOfMeasurement",void 0),(0,a.Cg)([(0,o.MZ)({type:Array,attribute:"include-entities"})],w.prototype,"includeEntities",void 0),(0,a.Cg)([(0,o.MZ)({type:Array,attribute:"exclude-entities"})],w.prototype,"excludeEntities",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],w.prototype,"entityFilter",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"hide-clear-icon",type:Boolean})],w.prototype,"hideClearIcon",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"add-button",type:Boolean})],w.prototype,"addButton",void 0),(0,a.Cg)([(0,o.P)("ha-generic-picker")],w.prototype,"_picker",void 0),w=(0,a.Cg)([(0,o.EM)("ha-entity-picker")],w),t()}catch(e){t(e)}})},6(e,t,i){var a=i(62826),s=i(35949),o=i(38627),n=i(96196),r=i(44457),l=i(94333),h=i(1087);class d extends s.M{render(){const e={"mdc-form-field--align-end":this.alignEnd,"mdc-form-field--space-between":this.spaceBetween,"mdc-form-field--nowrap":this.nowrap};return n.qy` <div class="mdc-form-field ${(0,l.H)(e)}"> <slot></slot> <label class="mdc-label" @click="${this._labelClick}"> <slot name="label">${this.label}</slot> </label> </div>`}_labelClick(){const e=this.input;if(e&&(e.focus(),!e.disabled))switch(e.tagName){case"HA-CHECKBOX":e.checked=!e.checked,(0,h.r)(e,"change");break;case"HA-RADIO":e.checked=!0,(0,h.r)(e,"change");break;default:e.click()}}constructor(...e){super(...e),this.disabled=!1}}d.styles=[o.R,n.AH`:host(:not([alignEnd])) ::slotted(ha-switch){margin-right:10px;margin-inline-end:10px;margin-inline-start:inline}.mdc-form-field{align-items:var(--ha-formfield-align-items,center);gap:var(--ha-space-1)}.mdc-form-field>label{direction:var(--direction);margin-inline-start:0;margin-inline-end:auto;padding:0}:host([disabled]) label{color:var(--disabled-text-color)}`],(0,a.Cg)([(0,r.MZ)({type:Boolean,reflect:!0})],d.prototype,"disabled",void 0),d=(0,a.Cg)([(0,r.EM)("ha-formfield")],d)},38508(e,t,i){i.a(e,async function(e,t){try{i(18111),i(13579);var a=i(62826),s=i(61366),o=i(96196),n=i(44457),r=i(32288),l=i(57947),h=i(1087),d=i(77796),c=i(17894),p=i(22348),u=i(99611),m=i(18350),_=(i(75064),i(3449),i(49639),i(88285),i(67094),e([s,u,m]));[s,u,m]=_.then?(await _)():_;const v="M3 16H10V14H3M18 14V10H16V14H12V16H16V20H18V16H22V14M14 6H3V8H14M14 10H3V12H14V10Z";class y extends((0,c.c)(o.WF)){willUpdate(e){e.has("value")?this._setUnknownValue():e.has("hass")&&this._throttleUnknownValue()}setFieldValue(e){this._comboBox?this._comboBox.setFieldValue(e):this._initialFieldValue=e}render(){const e=this.useTopLabel&&this.value?void 0:this.label;return o.qy`<div class="container"> ${this.useTopLabel&&this.label?o.qy`<label ?disabled="${this.disabled}">${this.label}</label>`:o.s6} <div id="picker"> <slot name="field"> ${this.addButtonLabel&&!this.value?o.qy`<ha-button size="small" appearance="filled" @click="${this.open}" .disabled="${this.disabled}"> <ha-svg-icon .path="${v}" slot="start"></ha-svg-icon> ${this.addButtonLabel} </ha-button>`:o.qy`<ha-picker-field type="button" class="${this._opened?"opened":""}" compact="compact" .unknown="${this._unknownValue}" .unknownItemText="${this.unknownItemText}" aria-label="${(0,r.J)(this.label)}" @click="${this.open}" @clear="${this._clear}" .icon="${this.icon}" .image="${this.image}" .label="${e}" .placeholder="${this.placeholder}" .helper="${this.helper}" .value="${this.value}" .valueRenderer="${this.valueRenderer}" .required="${this.required}" .disabled="${this.disabled}" .invalid="${this.invalid}" .hideClearIcon="${this.hideClearIcon}"> <slot name="start"></slot> </ha-picker-field>`} </slot> </div> ${this._pickerWrapperOpen||this._opened?this._openedNarrow?o.qy` <ha-bottom-sheet flexcontent .open="${this._pickerWrapperOpen}" @wa-after-show="${this._dialogOpened}" @closed="${this._hidePicker}" role="dialog" aria-modal="true" aria-label="${this.label||"Select option"}"> ${this._renderComboBox(!0)} </ha-bottom-sheet> `:o.qy` <wa-popover .open="${this._pickerWrapperOpen}" style="--body-width:${this._popoverWidth}px" without-arrow distance="-4" .placement="${this.popoverPlacement}" for="picker" auto-size="vertical" auto-size-padding="16" @wa-after-show="${this._dialogOpened}" @wa-after-hide="${this._hidePicker}" trap-focus role="dialog" aria-modal="true" aria-label="${this.label||"Select option"}"> ${this._renderComboBox()} </wa-popover> `:o.s6} </div> ${this._renderHelper()}`}_renderComboBox(e=!1){return this._opened?o.qy` <ha-picker-combo-box id="combo-box" .hass="${this.hass}" .allowCustomValue="${this.allowCustomValue}" .label="${this.searchLabel}" .value="${this.value}" @value-changed="${this._valueChanged}" .rowRenderer="${this.rowRenderer}" .notFoundLabel="${this.notFoundLabel}" .emptyLabel="${this.emptyLabel}" .getItems="${this.getItems}" .getAdditionalItems="${this.getAdditionalItems}" .searchFn="${this.searchFn}" .mode="${e?"dialog":"popover"}" .sections="${this.sections}" .sectionTitleFunction="${this.sectionTitleFunction}" .selectedSection="${this.selectedSection}" .searchKeys="${this.searchKeys}" .customValueLabel="${this.customValueLabel}"></ha-picker-combo-box> `:o.s6}_renderHelper(){const e=this.invalid&&this.errorMessage,t=!e&&this.helper;return e||t?o.qy`<ha-input-helper-text .disabled="${this.disabled}"> ${e?this.errorMessage:this.helper} </ha-input-helper-text>`:o.s6}_hidePicker(e){e.stopPropagation(),this._newValue&&((0,h.r)(this,"value-changed",{value:this._newValue}),this._newValue=void 0),this._opened=!1,this._pickerWrapperOpen=!1,this._unsubscribeTinyKeys?.()}_valueChanged(e){e.stopPropagation();const t=e.detail.value;t&&(this._pickerWrapperOpen=!1,this._newValue=t)}_clear(e){e.stopPropagation(),this._setValue(void 0)}_setValue(e){this.value=e,(0,h.r)(this,"value-changed",{value:e})}async open(e){e?.stopPropagation(),this.disabled||(this._openedNarrow=this._narrow,this._popoverWidth=this._containerElement?.offsetWidth||250,this._pickerWrapperOpen=!0,this._unsubscribeTinyKeys=(0,l.Tc)(this,{Escape:this._handleEscClose}))}connectedCallback(){super.connectedCallback(),this._handleResize(),window.addEventListener("resize",this._handleResize)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._handleResize),this._unsubscribeTinyKeys?.()}static get styles(){return[o.AH`.container{position:relative;display:block;max-width:100%}label[disabled]{color:var(--mdc-text-field-disabled-ink-color,rgba(0,0,0,.6))}label{display:block;margin:0 0 8px}ha-input-helper-text{display:block;margin:var(--ha-space-2) 0 0}:host([invalid]) ha-input-helper-text{color:var(--mdc-theme-error,var(--error-color,#b00020))}wa-popover{--wa-space-l:0}wa-popover::part(body){width:max(var(--body-width),250px);max-width:var(--ha-generic-picker-max-width,max(var(--body-width),250px));max-height:500px;height:70vh;overflow:hidden}@media (max-height:1000px){wa-popover::part(body){max-height:400px}}ha-bottom-sheet{--ha-bottom-sheet-height:90vh;--ha-bottom-sheet-height:calc(100dvh - var(--ha-space-12));--ha-bottom-sheet-max-height:var(--ha-bottom-sheet-height);--ha-bottom-sheet-max-width:600px;--ha-bottom-sheet-padding:0;--ha-bottom-sheet-surface-background:var(--card-background-color);--ha-bottom-sheet-border-radius:var(--ha-border-radius-2xl)}ha-picker-field.opened{--mdc-text-field-idle-line-color:var(--primary-color)}`]}constructor(...e){super(...e),this.popoverPlacement="bottom-start",this.useTopLabel=!1,this._opened=!1,this._pickerWrapperOpen=!1,this._popoverWidth=0,this._openedNarrow=!1,this._unknownValue=!1,this._narrow=!1,this.invalid=!1,this._setUnknownValue=()=>{const e=this.getItems();!this.allowCustomValue&&void 0!==this.value&&null!==this.value&&""!==this.value&&e?this._unknownValue=!e.some(e=>"string"!=typeof e&&e.id===this.value):this._unknownValue=!1},this._throttleUnknownValue=(0,d.n)(this._setUnknownValue,1e3,!0,!1),this._dialogOpened=()=>{this._opened=!0,requestAnimationFrame(()=>{this._initialFieldValue&&(this._comboBox?.setFieldValue(this._initialFieldValue),this._initialFieldValue=void 0),this.hass&&(0,p.V)(this.hass)?this.hass.auth.external.fireMessage({type:"focus_element",payload:{element_id:"combo-box"}}):this._comboBox?.focus()})},this._handleResize=()=>{this._narrow=window.matchMedia("(max-width: 870px)").matches||window.matchMedia("(max-height: 500px)").matches,!this._openedNarrow&&this._pickerWrapperOpen&&(this._popoverWidth=this._containerElement?.offsetWidth||250)},this._handleEscClose=e=>{e.stopPropagation()}}}y.shadowRootOptions={...o.WF.shadowRootOptions,delegatesFocus:!0},(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,attribute:"allow-custom-value"})],y.prototype,"allowCustomValue",void 0),(0,a.Cg)([(0,n.MZ)({type:String,attribute:"search-label"})],y.prototype,"searchLabel",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"getItems",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1,type:Array})],y.prototype,"getAdditionalItems",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"rowRenderer",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"searchFn",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"searchKeys",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"notFoundLabel",void 0),(0,a.Cg)([(0,n.MZ)({attribute:"empty-label"})],y.prototype,"emptyLabel",void 0),(0,a.Cg)([(0,n.MZ)({attribute:"popover-placement"})],y.prototype,"popoverPlacement",void 0),(0,a.Cg)([(0,n.MZ)({attribute:"add-button-label"})],y.prototype,"addButtonLabel",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"sections",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],y.prototype,"sectionTitleFunction",void 0),(0,a.Cg)([(0,n.MZ)({attribute:"selected-section"})],y.prototype,"selectedSection",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,attribute:"use-top-label"})],y.prototype,"useTopLabel",void 0),(0,a.Cg)([(0,n.MZ)({attribute:"custom-value-label"})],y.prototype,"customValueLabel",void 0),(0,a.Cg)([(0,n.P)(".container")],y.prototype,"_containerElement",void 0),(0,a.Cg)([(0,n.P)("ha-picker-combo-box")],y.prototype,"_comboBox",void 0),(0,a.Cg)([(0,n.wk)()],y.prototype,"_opened",void 0),(0,a.Cg)([(0,n.wk)()],y.prototype,"_pickerWrapperOpen",void 0),(0,a.Cg)([(0,n.wk)()],y.prototype,"_popoverWidth",void 0),(0,a.Cg)([(0,n.wk)()],y.prototype,"_openedNarrow",void 0),(0,a.Cg)([(0,n.wk)()],y.prototype,"_unknownValue",void 0),(0,a.Cg)([(0,n.MZ)({attribute:"error-message"})],y.prototype,"errorMessage",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],y.prototype,"invalid",void 0),y=(0,a.Cg)([(0,n.EM)("ha-generic-picker")],y),t()}catch(e){t(e)}})},2846(e,t,i){i.d(t,{G:()=>h,J:()=>l});var a=i(62826),s=i(97154),o=i(82553),n=i(96196),r=i(44457);i(54276);const l=[o.R,n.AH`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color)}md-item{overflow:var(--md-item-overflow,hidden);align-items:var(--md-item-align-items,center);gap:var(--ha-md-list-item-gap,16px)}`];class h extends s.n{renderRipple(){return"text"===this.type?n.s6:n.qy`<ha-ripple part="ripple" for="item" ?disabled="${this.disabled&&"link"!==this.type}"></ha-ripple>`}}h.styles=l,h=(0,a.Cg)([(0,r.EM)("ha-md-list-item")],h)},88285(e,t,i){var a=i(62826),s=i(16527),o=i(96196),n=i(44457),r=i(32288),l=i(1087),h=i(38911),d=i(17894);i(75064),i(88945),i(26300);class c extends((0,d.c)(o.WF)){async focus(){await this.updateComplete,await(this.item?.focus())}render(){const e=!!this.value,t=!(!this.value||this.required||this.disabled||this.hideClearIcon),i=this.placeholder??this.label,a=this.label&&e?o.qy`<span slot="overline">${this.label}${this.required?" *":""}</span>`:o.s6,s=e?this.valueRenderer?this.valueRenderer(this.value??""):o.qy`<span slot="headline">${this.value}</span>`:i?o.qy`<span slot="headline" class="placeholder"> ${i}${this.required?" *":""} </span>`:o.s6;return o.qy` <ha-combo-box-item aria-label="${(0,r.J)(this.label||this.placeholder)}" .disabled="${this.disabled}" type="button" compact="compact"> ${this.image?o.qy`<img alt="${this.label??""}" slot="start" .src="${this.image}" crossorigin="anonymous" referrerpolicy="no-referrer">`:this.icon?o.qy`<ha-icon slot="start" .icon="${this.icon}"></ha-icon>`:o.qy`<slot name="start"></slot>`} ${a}${s} ${this.unknown?o.qy`<div slot="supporting-text" class="unknown"> ${this.unknownItemText||this.localize("ui.components.combo-box.unknown_item")} </div>`:o.s6} ${t?o.qy` <ha-icon-button class="clear" slot="end" @click="${this._clear}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}"></ha-icon-button> `:o.s6} <ha-svg-icon class="arrow" slot="end" .path="${"M7,10L12,15L17,10H7Z"}"></ha-svg-icon> </ha-combo-box-item> `}_clear(e){e.stopPropagation(),(0,l.r)(this,"clear")}static get styles(){return[o.AH`ha-combo-box-item[disabled]{background-color:var(--mdc-text-field-disabled-fill-color,#f5f5f5)}ha-combo-box-item{background-color:var(--mdc-text-field-fill-color,#f5f5f5);border-radius:var(--ha-border-radius-sm);border-end-end-radius:0;border-end-start-radius:0;--md-list-item-one-line-container-height:56px;--md-list-item-two-line-container-height:56px;--md-list-item-top-space:0px;--md-list-item-bottom-space:0px;--md-list-item-leading-space:var(--ha-space-4);--md-list-item-trailing-space:var(--ha-space-2);--ha-md-list-item-gap:var(--ha-space-2);--md-focus-ring-width:0px;--md-focus-ring-duration:0s}ha-combo-box-item[disabled]:after{background-color:var(--mdc-text-field-disabled-line-color,rgba(0,0,0,.42))}ha-combo-box-item:after{display:block;content:"";position:absolute;pointer-events:none;bottom:0;left:0;right:0;height:1px;width:100%;background-color:var(--mdc-text-field-idle-line-color,rgba(0,0,0,.42));transform:height 180ms ease-in-out,background-color 180ms ease-in-out}ha-combo-box-item:focus:after{height:2px;background-color:var(--mdc-theme-primary)}:host([unknown]) ha-combo-box-item{background-color:var(--ha-color-fill-warning-quiet-resting)}:host([invalid]) ha-combo-box-item:after{height:2px;background-color:var(--mdc-theme-error,var(--error-color,#b00020))}.clear{margin:0 -8px;--mdc-icon-button-size:32px;--mdc-icon-size:20px}.arrow{--mdc-icon-size:20px;width:32px}.placeholder{color:var(--secondary-text-color)}:host([invalid]) .placeholder{color:var(--mdc-theme-error,var(--error-color,#b00020))}.unknown{color:var(--ha-color-on-warning-normal)}`]}constructor(...e){super(...e),this.invalid=!1}}(0,a.Cg)([(0,n.MZ)({type:Boolean,reflect:!0})],c.prototype,"invalid",void 0),(0,a.Cg)([(0,n.P)("ha-combo-box-item",!0)],c.prototype,"item",void 0),(0,a.Cg)([(0,n.wk)(),(0,s.Fg)({context:h.$F,subscribe:!0})],c.prototype,"localize",void 0),c=(0,a.Cg)([(0,n.EM)("ha-picker-field")],c)},54276(e,t,i){var a=i(62826),s=i(76482),o=i(91382),n=i(96245),r=i(96196),l=i(44457);class h extends o.n{attach(e){super.attach(e),this.attachableTouchController.attach(e)}disconnectedCallback(){super.disconnectedCallback(),this.hovered=!1,this.pressed=!1}detach(){super.detach(),this.attachableTouchController.detach()}_onTouchControlChange(e,t){e?.removeEventListener("touchend",this._handleTouchEnd),t?.addEventListener("touchend",this._handleTouchEnd)}constructor(...e){super(...e),this.attachableTouchController=new s.i(this,this._onTouchControlChange.bind(this)),this._handleTouchEnd=()=>{this.disabled||super.endPressAnimation()}}}h.styles=[n.R,r.AH`:host{--md-ripple-hover-opacity:var(--ha-ripple-hover-opacity, 0.08);--md-ripple-pressed-opacity:var(--ha-ripple-pressed-opacity, 0.12);--md-ripple-hover-color:var(
          --ha-ripple-hover-color,
          var(--ha-ripple-color, var(--secondary-text-color))
        );--md-ripple-pressed-color:var(
          --ha-ripple-pressed-color,
          var(--ha-ripple-color, var(--secondary-text-color))
        )}`],h=(0,a.Cg)([(0,l.EM)("ha-ripple")],h)},59646(e,t,i){var a=i(62826),s=i(4845),o=i(49065),n=i(96196),r=i(44457),l=i(88360);class h extends s.U{firstUpdated(){super.firstUpdated(),this.addEventListener("change",()=>{this.haptic&&(0,l.j)(this,"light")})}constructor(...e){super(...e),this.haptic=!1}}h.styles=[o.R,n.AH`:host{--mdc-theme-secondary:var(--switch-checked-color)}.mdc-switch.mdc-switch--checked .mdc-switch__thumb{background-color:var(--switch-checked-button-color);border-color:var(--switch-checked-button-color)}.mdc-switch.mdc-switch--checked .mdc-switch__track{background-color:var(--switch-checked-track-color);border-color:var(--switch-checked-track-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb{background-color:var(--switch-unchecked-button-color);border-color:var(--switch-unchecked-button-color)}.mdc-switch:not(.mdc-switch--checked) .mdc-switch__track{background-color:var(--switch-unchecked-track-color);border-color:var(--switch-unchecked-track-color)}`],(0,a.Cg)([(0,r.MZ)({type:Boolean})],h.prototype,"haptic",void 0),h=(0,a.Cg)([(0,r.EM)("ha-switch")],h)},56304(e,t,i){var a=i(62826),s=i(11896),o=i(92347),n=i(75057),r=i(96196),l=i(44457);class h extends s.u{updated(e){super.updated(e),this.autogrow&&e.has("value")&&(this.mdcRoot.dataset.value=this.value+'=​"')}constructor(...e){super(...e),this.autogrow=!1}}h.styles=[o.R,n.R,r.AH`:host([autogrow]) .mdc-text-field{position:relative;min-height:74px;min-width:178px;max-height:200px}:host([autogrow]) .mdc-text-field:after{content:attr(data-value);margin-top:23px;margin-bottom:9px;line-height:var(--ha-line-height-normal);min-height:42px;padding:0px 32px 0 16px;letter-spacing:var(
          --mdc-typography-subtitle1-letter-spacing,
          .009375em
        );visibility:hidden;white-space:pre-wrap}:host([autogrow]) .mdc-text-field__input{position:absolute;height:calc(100% - 32px)}:host([autogrow]) .mdc-text-field.mdc-text-field--no-label:after{margin-top:16px;margin-bottom:16px}.mdc-floating-label{inset-inline-start:16px!important;inset-inline-end:initial!important;transform-origin:var(--float-start) top}@media only screen and (min-width:459px){:host([mobile-multiline]) .mdc-text-field__input{white-space:nowrap;max-height:16px}}`],(0,a.Cg)([(0,l.MZ)({type:Boolean,reflect:!0})],h.prototype,"autogrow",void 0),h=(0,a.Cg)([(0,l.EM)("ha-textarea")],h)},53756(e,t,i){i.d(t,{t:()=>l,w:()=>h});i(18111),i(22489),i(61701);var a=i(71727),s=i(74705),o=i(28978),n=i(15638),r=i(95350);const l=[{name:"search_labels.entityName",weight:10},{name:"search_labels.friendlyName",weight:8},{name:"search_labels.deviceName",weight:7},{name:"search_labels.areaName",weight:6},{name:"search_labels.domainName",weight:6},{name:"search_labels.entityId",weight:3}],h=(e,t,i,l,h,d,c,p,u,m="")=>{let _=[],v=Object.keys(e.states);return c&&(v=v.filter(e=>c.includes(e))),p&&(v=v.filter(e=>!p.includes(e))),t&&(v=v.filter(e=>t.includes((0,a.m)(e)))),i&&(v=v.filter(e=>!i.includes((0,a.m)(e)))),_=v.map(t=>{const i=e.states[t],l=(0,o.u)(i),[h,d,c]=(0,s.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],e.entities,e.devices,e.areas,e.floors),p=(0,r.p$)(e.localize,(0,a.m)(t)),u=(0,n.qC)(e),_=h||d||t,v=[c,h?d:void 0].filter(Boolean).join(u?" ◂ ":" ▸ ");return{id:`${m}${t}`,primary:_,secondary:v,domain_name:p,sorting_label:[_,v].filter(Boolean).join("_"),search_labels:{entityName:h||null,deviceName:d||null,areaName:c||null,domainName:p||null,friendlyName:l||null,entityId:t},stateObj:i}}),h&&(_=_.filter(e=>e.id===u||e.stateObj?.attributes.device_class&&h.includes(e.stateObj.attributes.device_class))),d&&(_=_.filter(e=>e.id===u||e.stateObj?.attributes.unit_of_measurement&&d.includes(e.stateObj.attributes.unit_of_measurement))),l&&(_=_.filter(e=>e.id===u||e.stateObj&&l(e.stateObj))),_}},17894(e,t,i){i.d(t,{c:()=>o});var a=i(62826),s=i(44457);const o=e=>{class t extends e{constructor(...e){super(...e),this.disabled=!1,this.required=!1,this.unknown=!1,this.hideClearIcon=!1}}return(0,a.Cg)([(0,s.MZ)({type:Boolean})],t.prototype,"disabled",void 0),(0,a.Cg)([(0,s.MZ)({type:Boolean})],t.prototype,"required",void 0),(0,a.Cg)([(0,s.MZ)()],t.prototype,"icon",void 0),(0,a.Cg)([(0,s.MZ)()],t.prototype,"image",void 0),(0,a.Cg)([(0,s.MZ)()],t.prototype,"label",void 0),(0,a.Cg)([(0,s.MZ)()],t.prototype,"placeholder",void 0),(0,a.Cg)([(0,s.MZ)()],t.prototype,"helper",void 0),(0,a.Cg)([(0,s.MZ)()],t.prototype,"value",void 0),(0,a.Cg)([(0,s.MZ)({type:Boolean,reflect:!0})],t.prototype,"unknown",void 0),(0,a.Cg)([(0,s.MZ)({attribute:"unknown-item-text"})],t.prototype,"unknownItemText",void 0),(0,a.Cg)([(0,s.MZ)({attribute:"hide-clear-icon",type:Boolean})],t.prototype,"hideClearIcon",void 0),(0,a.Cg)([(0,s.MZ)({attribute:!1})],t.prototype,"valueRenderer",void 0),t}},62938(e,t,i){i.a(e,async function(e,a){try{i.r(t);i(18111),i(20116);var s=i(62826),o=i(92913),n=i(71566),r=i(57279),l=i(83339),h=i(77972),d=i(96196),c=i(44457),p=i(22786),u=i(8480),m=i(1087),_=i(69093),v=i(82286),y=i(22682),g=i(82474),b=(i(38962),i(18350)),f=i(19463),w=i(72554),$=(i(6),i(59646),i(56304),i(75709),i(50286),i(55156)),k=i(14503),C=i(79757),x=i(36863),q=i(50954),M=i(91069),z=e([g,b,f,C,x,u,M]);[g,b,f,C,x,u,M]=z.then?(await z)():z;const Z=["calendar"];class D extends d.WF{showDialog(e){if(this._error=void 0,this._info=void 0,this._params=e,this._calendarId=e.calendarId||Object.values(this.hass.states).find(e=>"calendar"===(0,_.t)(e)&&(0,v.$)(e,$.at.CREATE_EVENT))?.entity_id,this._timeZone=(0,u.w)(this.hass.locale.time_zone,this.hass.config.time_zone),e.entry){const t=e.entry;this._allDay=(0,y.$)(t.dtstart),this._summary=t.summary,this._description=t.description,t.location&&(this._hasLocation=!0,this._location=t.location),this._rrule=t.rrule,this._allDay?(this._dtstart=new Date(t.dtstart+"T00:00:00"),this._dtend=(0,o.f)(new Date(t.dtend+"T00:00:00"),-1)):(this._dtstart=new Date(t.dtstart),this._dtend=new Date(t.dtend))}else this._allDay=!1,this._dtstart=(0,n.Q)(e.selectedDate?e.selectedDate:new Date),this._dtend=(0,r.L)(this._dtstart,1)}closeDialog(){this._params&&(this._calendarId=void 0,this._params=void 0,this._dtstart=void 0,this._dtend=void 0,this._summary="",this._description="",this._location="",this._hasLocation=!1,this._rrule=void 0,(0,m.r)(this,"dialog-closed",{dialog:this.localName}))}render(){if(!this._params)return d.s6;const e=void 0===this._params.entry,{startDate:t,startTime:i,endDate:a,endTime:s}=this._getLocaleStrings(this._dtstart,this._dtend);return d.qy` <ha-dialog open @closed="${this.closeDialog}" scrimClickAction escapeKeyAction .heading="${(0,w.l)(this.hass,this.hass.localize("ui.components.calendar.event."+(e?"add":"edit")))}"> <div class="content"> ${this._error?d.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} ${this._info?d.qy`<ha-alert alert-type="info" dismissable @alert-dismissed-clicked="${this._clearInfo}">${this._info}</ha-alert>`:""} <ha-textfield class="summary" name="summary" .label="${this.hass.localize("ui.components.calendar.event.summary")}" .value="${this._summary}" required @input="${this._handleSummaryChanged}" .validationMessage="${this.hass.localize("ui.common.error_required")}" dialogInitialFocus></ha-textfield> <ha-textfield class="location" name="location" .label="${this.hass.localize("ui.components.calendar.event.location")}" .value="${this._location}" @change="${this._handleLocationChanged}"></ha-textfield> <ha-textarea class="description" name="description" .label="${this.hass.localize("ui.components.calendar.event.description")}" .value="${this._description}" @change="${this._handleDescriptionChanged}" autogrow></ha-textarea> <ha-entity-picker name="calendar" .hass="${this.hass}" .label="${this.hass.localize("ui.components.calendar.label")}" .value="${this._calendarId}" .includeDomains="${Z}" .entityFilter="${this._isEditableCalendar}" .disabled="${!e}" required @value-changed="${this._handleCalendarChanged}"></ha-entity-picker> <ha-formfield .label="${this.hass.localize("ui.components.calendar.event.all_day")}"> <ha-switch id="all_day" .checked="${this._allDay}" @change="${this._allDayToggleChanged}"></ha-switch> </ha-formfield> <div> <span class="label">${this.hass.localize("ui.components.calendar.event.start")}:</span> <div class="flex"> <ha-date-input .value="${t}" .locale="${this.hass.locale}" @value-changed="${this._startDateChanged}"></ha-date-input> ${this._allDay?"":d.qy`<ha-time-input .value="${i}" .locale="${this.hass.locale}" @value-changed="${this._startTimeChanged}"></ha-time-input>`} </div> </div> <div> <span class="label">${this.hass.localize("ui.components.calendar.event.end")}:</span> <div class="flex"> <ha-date-input .value="${a}" .min="${t}" .locale="${this.hass.locale}" @value-changed="${this._endDateChanged}"></ha-date-input> ${this._allDay?"":d.qy`<ha-time-input .value="${s}" .locale="${this.hass.locale}" @value-changed="${this._endTimeChanged}"></ha-time-input>`} </div> </div> <ha-recurrence-rule-editor .hass="${this.hass}" .dtstart="${this._dtstart}" .allDay="${this._allDay}" .locale="${this.hass.locale}" .timezone="${this.hass.config.time_zone}" .value="${this._rrule||""}" @value-changed="${this._handleRRuleChanged}"> </ha-recurrence-rule-editor> </div> ${e?d.qy` <ha-button slot="primaryAction" @click="${this._createEvent}" .disabled="${this._submitting}"> ${this.hass.localize("ui.components.calendar.event.add")} </ha-button> `:d.qy` <ha-button slot="primaryAction" @click="${this._saveEvent}" .disabled="${this._submitting}"> ${this.hass.localize("ui.components.calendar.event.save")} </ha-button> ${this._params.canDelete?d.qy` <ha-button slot="secondaryAction" appearance="plain" variant="danger" @click="${this._deleteEvent}" .disabled="${this._submitting}"> ${this.hass.localize("ui.components.calendar.event.delete")} </ha-button> `:""} `} </ha-dialog> `}_clearInfo(){this._info=void 0}_handleSummaryChanged(e){this._summary=e.target.value}_handleDescriptionChanged(e){this._description=e.target.value}_handleLocationChanged(e){this._location=e.target.value}_handleRRuleChanged(e){this._rrule=e.detail.value}_allDayToggleChanged(e){this._allDay=e.target.checked,this._allDay&&this._dtstart&&this._dtend&&(this._dtstart=new Date((0,M.Yq)(this._dtstart,this._timeZone)+"T00:00:00"),this._dtend=new Date((0,M.Yq)(this._dtend,this._timeZone)+"T00:00:00"))}_startDateChanged(e){const t=(0,l.b)(this._dtend,this._dtstart);this._dtstart=(0,M._U)(`${e.detail.value}T${(0,M.fU)(this._dtstart,this._timeZone)}`,this._timeZone),this._dtend<=this._dtstart&&(this._dtend=(0,h.A)(this._dtstart,t),this._info=this.hass.localize("ui.components.calendar.event.end_auto_adjusted"))}_endDateChanged(e){this._dtend=(0,M._U)(`${e.detail.value}T${(0,M.fU)(this._dtend,this._timeZone)}`,this._timeZone)}_startTimeChanged(e){const t=(0,l.b)(this._dtend,this._dtstart);this._dtstart=(0,M._U)(`${(0,M.Yq)(this._dtstart,this._timeZone)}T${e.detail.value}`,this._timeZone),this._dtend<=this._dtstart&&(this._dtend=(0,h.A)(new Date(this._dtstart),t),this._info=this.hass.localize("ui.components.calendar.event.end_auto_adjusted"))}_endTimeChanged(e){this._dtend=(0,M._U)(`${(0,M.Yq)(this._dtend,this._timeZone)}T${e.detail.value}`,this._timeZone)}_calculateData(){const e={summary:this._summary,description:this._description,location:this._location||(this._hasLocation?"":void 0),rrule:this._rrule||void 0,dtstart:"",dtend:""};return this._allDay?(e.dtstart=(0,M.Yq)(this._dtstart,this._timeZone),e.dtend=(0,M.Yq)((0,o.f)(this._dtend,1),this._timeZone)):(e.dtstart=`${(0,M.Yq)(this._dtstart,this.hass.config.time_zone)}T${(0,M.fU)(this._dtstart,this.hass.config.time_zone)}`,e.dtend=`${(0,M.Yq)(this._dtend,this.hass.config.time_zone)}T${(0,M.fU)(this._dtend,this.hass.config.time_zone)}`),e}_handleCalendarChanged(e){this._calendarId=e.detail.value}_isValidStartEnd(){return this._allDay?this._dtend>=this._dtstart:this._dtend>this._dtstart}async _createEvent(){if(this._summary&&this._calendarId)if(this._isValidStartEnd()){this._submitting=!0;try{await(0,$.pO)(this.hass,this._calendarId,this._calculateData())}catch(e){return void(this._error=e?e.message:"Unknown error")}finally{this._submitting=!1}await this._params.updated(),this.closeDialog()}else this._error=this.hass.localize("ui.components.calendar.event.invalid_duration");else this._error=this.hass.localize("ui.components.calendar.event.not_all_required_fields")}async _saveEvent(){if(!this._summary||!this._calendarId)return void(this._error=this.hass.localize("ui.components.calendar.event.not_all_required_fields"));if(!this._isValidStartEnd())return void(this._error=this.hass.localize("ui.components.calendar.event.invalid_duration"));this._submitting=!0;const e=this._params.entry;let t=$.kt.THISEVENT;if(e.recurrence_id&&(t=await(0,q.Q)(this,{title:this.hass.localize("ui.components.calendar.event.confirm_update.update"),text:this.hass.localize("ui.components.calendar.event.confirm_update.recurring_prompt"),confirmText:this.hass.localize("ui.components.calendar.event.confirm_update.update_this"),confirmFutureText:this.hass.localize("ui.components.calendar.event.confirm_update.update_future")})),void 0===t)return void(this._submitting=!1);const i=this._calculateData();e.rrule&&i.rrule&&t===$.kt.THISEVENT&&(i.rrule=void 0);try{await(0,$._1)(this.hass,this._calendarId,e.uid,i,e.recurrence_id||"",t)}catch(e){return void(this._error=e?e.message:"Unknown error")}finally{this._submitting=!1}await this._params.updated(),this.closeDialog()}async _deleteEvent(){this._submitting=!0;const e=this._params.entry,t=await(0,q.Q)(this,{title:this.hass.localize("ui.components.calendar.event.confirm_delete.delete"),text:e.recurrence_id?this.hass.localize("ui.components.calendar.event.confirm_delete.recurring_prompt"):this.hass.localize("ui.components.calendar.event.confirm_delete.prompt"),confirmText:e.recurrence_id?this.hass.localize("ui.components.calendar.event.confirm_delete.delete_this"):this.hass.localize("ui.components.calendar.event.confirm_delete.delete"),confirmFutureText:e.recurrence_id?this.hass.localize("ui.components.calendar.event.confirm_delete.delete_future"):void 0});if(void 0!==t){try{await(0,$.At)(this.hass,this._calendarId,e.uid,e.recurrence_id||"",t)}catch(e){return void(this._error=e?e.message:"Unknown error")}finally{this._submitting=!1}await this._params.updated(),this.closeDialog()}else this._submitting=!1}static get styles(){return[k.nA,d.AH`@media all and (min-width:450px) and (min-height:500px){ha-dialog{--mdc-dialog-min-width:min(600px, 95vw);--mdc-dialog-max-width:min(600px, 95vw)}}state-info{line-height:40px}ha-alert{display:block;margin-bottom:16px}ha-textarea,ha-textfield{display:block}ha-textarea{margin-bottom:16px}ha-formfield{display:block;padding:16px 0}ha-date-input{flex-grow:1}ha-time-input{margin-left:16px;margin-inline-start:16px;margin-inline-end:initial}ha-recurrence-rule-editor{display:block;margin-top:16px}.flex{display:flex;justify-content:space-between}.label{font-size:var(--ha-font-size-s);font-weight:var(--ha-font-weight-medium);color:var(--input-label-ink-color)}.date-range-details-content{display:inline-block}ha-rrule{display:block}ha-svg-icon{width:40px;margin-right:8px;margin-inline-end:8px;margin-inline-start:initial;direction:var(--direction);vertical-align:top}ha-rrule{display:inline-block}.key{display:inline-block;vertical-align:top}.value{display:inline-block;vertical-align:top}`]}constructor(...e){super(...e),this._summary="",this._description="",this._location="",this._allDay=!1,this._submitting=!1,this._hasLocation=!1,this._isEditableCalendar=e=>(0,v.$)(e,$.at.CREATE_EVENT),this._getLocaleStrings=(0,p.A)((e,t)=>({startDate:(0,M.Yq)(e,this._timeZone),startTime:(0,M.fU)(e,this._timeZone),endDate:(0,M.Yq)(t,this._timeZone),endTime:(0,M.fU)(t,this._timeZone)}))}}(0,s.Cg)([(0,c.MZ)({attribute:!1})],D.prototype,"hass",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_error",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_info",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_params",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_calendarId",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_summary",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_description",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_location",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_rrule",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_allDay",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_dtstart",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_dtend",void 0),(0,s.Cg)([(0,c.wk)()],D.prototype,"_submitting",void 0),D=(0,s.Cg)([(0,c.EM)("dialog-calendar-event-editor")],D),a()}catch(e){a(e)}})},36863(e,t,i){i.a(e,async function(e,t){try{i(18111),i(61701),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);var a=i(62826),s=i(31886),o=i(96196),n=i(44457),r=i(41821),l=i(380),h=i(57237),d=(i(5745),i(32023),i(19463)),c=(i(28732),i(606),i(75709),i(55666)),p=i(91069),u=e([d,c,r,s,p]);[d,c,r,s,p]=u.then?(await u)():u;class m extends o.WF{willUpdate(e){if(super.willUpdate(e),e.has("locale")&&(this._allWeekdays=(0,c.cH)((0,l.P)(this.locale)).map(e=>e.toString())),e.has("dtstart")||e.has("_interval")){this._monthlyRepeatItems=this.dtstart?(0,c.jz)(this.hass,this._interval,this.dtstart):[],this._computeWeekday();const t=this._monthlyRepeatSelect;if(t){const i=t.index;t.select(-1),this.updateComplete.then(()=>{t.select(e.has("dtstart")?0:i)})}}if(!e.has("value")&&(e.has("dtstart")||e.has("timezone")||e.has("_freq")||e.has("_interval")||e.has("_weekday")||e.has("_monthlyRepeatWeekday")||e.has("_monthday")||e.has("_end")||e.has("_count")||e.has("_untilDay")))return void this._updateRule();if(this._computedRRule===this.value)return;if(this._interval=1,this._weekday.clear(),this._monthlyRepeat=void 0,this._monthday=void 0,this._monthlyRepeatWeekday=void 0,this._end="never",this._count=void 0,this._untilDay=void 0,this._computedRRule=this.value,""===this.value)return void(this._freq="none");let t;try{t=r.p3.parseString(this.value)}catch(e){return void(this._freq=void 0)}this._freq=(0,c.mH)(t.freq),t.interval&&(this._interval=t.interval),this._monthlyRepeatWeekday=(0,c.j9)(t),this._monthlyRepeatWeekday&&(this._monthlyRepeat=`BYDAY=${this._monthlyRepeatWeekday.toString()}`),this._monthday=(0,c.Wt)(t),this._monthday&&(this._monthlyRepeat=`BYMONTHDAY=${this._monthday}`),"weekly"===this._freq&&t.byweekday&&Array.isArray(t.byweekday)&&(this._weekday=new Set(t.byweekday.map(e=>e.toString()))),t.until?(this._end="on",this._untilDay=new Date(new s.BB(t.until,this.timezone).getTime())):t.count&&(this._end="after",this._count=t.count)}renderRepeat(){return o.qy` <ha-select id="freq" label="${this.hass.localize("ui.components.calendar.event.repeat.label")}" @selected="${this._onRepeatSelected}" @closed="${h.d}" fixedMenuPosition naturalMenuWidth .value="${this._freq}"> <ha-list-item value="none"> ${this.hass.localize("ui.components.calendar.event.repeat.freq.none")} </ha-list-item> <ha-list-item value="yearly"> ${this.hass.localize("ui.components.calendar.event.repeat.freq.yearly")} </ha-list-item> <ha-list-item value="monthly"> ${this.hass.localize("ui.components.calendar.event.repeat.freq.monthly")} </ha-list-item> <ha-list-item value="weekly"> ${this.hass.localize("ui.components.calendar.event.repeat.freq.weekly")} </ha-list-item> <ha-list-item value="daily"> ${this.hass.localize("ui.components.calendar.event.repeat.freq.daily")} </ha-list-item> </ha-select> `}renderMonthly(){return o.qy` ${this.renderInterval()} ${this._monthlyRepeatItems.length>0?o.qy`<ha-select id="monthly" label="${this.hass.localize("ui.components.calendar.event.repeat.monthly.label")}" @selected="${this._onMonthlyDetailSelected}" .value="${this._monthlyRepeat||this._monthlyRepeatItems[0]?.value}" @closed="${h.d}" fixedMenuPosition naturalMenuWidth> ${this._monthlyRepeatItems.map(e=>o.qy` <ha-list-item .value="${e.value}" .item="${e}"> ${e.label} </ha-list-item> `)} </ha-select>`:o.s6} `}renderWeekly(){return o.qy` ${this.renderInterval()} <ha-chip-set class="weekdays"> ${this._allWeekdays.map(e=>o.qy` <ha-filter-chip no-leading-icon .value="${e}" .selected="${this._weekday.has(e)}" @click="${this._onWeekdayToggle}" .label="${this.hass.localize(`ui.components.calendar.event.repeat.weekly.weekday.${e.toLowerCase()}`)}"> </ha-filter-chip> `)} </ha-chip-set> `}renderDaily(){return this.renderInterval()}renderInterval(){return o.qy` <ha-textfield id="interval" label="${this.hass.localize("ui.components.calendar.event.repeat.interval.label")}" type="number" min="1" .value="${this._interval}" .suffix="${this.hass.localize(`ui.components.calendar.event.repeat.interval.${this._freq}`)}" @change="${this._onIntervalChange}"></ha-textfield> `}renderEnd(){return o.qy` <ha-select id="end" label="${this.hass.localize("ui.components.calendar.event.repeat.end.label")}" .value="${this._end}" @selected="${this._onEndSelected}" @closed="${h.d}" fixedMenuPosition naturalMenuWidth> <ha-list-item value="never"> ${this.hass.localize("ui.components.calendar.event.repeat.end.never")} </ha-list-item> <ha-list-item value="after"> ${this.hass.localize("ui.components.calendar.event.repeat.end.after")} </ha-list-item> <ha-list-item value="on"> ${this.hass.localize("ui.components.calendar.event.repeat.end.on")} </ha-list-item> </ha-select> ${"after"===this._end?o.qy` <ha-textfield id="after" label="${this.hass.localize("ui.components.calendar.event.repeat.end_after.label")}" type="number" min="1" .value="${this._count}" suffix="${this.hass.localize("ui.components.calendar.event.repeat.end_after.ocurrences")}" @change="${this._onCountChange}"></ha-textfield> `:o.s6} ${"on"===this._end?o.qy` <ha-date-input id="on" label="${this.hass.localize("ui.components.calendar.event.repeat.end_on.label")}" .locale="${this.locale}" .value="${(0,p.Yq)(this._untilDay,this.timezone)}" @value-changed="${this._onUntilChange}"></ha-date-input> `:o.s6} `}render(){return o.qy` ${this.renderRepeat()} ${"monthly"===this._freq?this.renderMonthly():o.s6} ${"weekly"===this._freq?this.renderWeekly():o.s6} ${"daily"===this._freq?this.renderDaily():o.s6} ${"none"!==this._freq?this.renderEnd():o.s6} `}_onIntervalChange(e){this._interval=e.target.value}_onRepeatSelected(e){this._freq=e.target.value,"yearly"===this._freq&&(this._interval=1),"weekly"!==this._freq&&(this._weekday.clear(),this._computeWeekday()),e.stopPropagation()}_onMonthlyDetailSelected(e){e.stopPropagation();const t=this._monthlyRepeatItems[e.detail.index];t&&(this._monthlyRepeat=t.value,this._monthlyRepeatWeekday=t.byday,this._monthday=t.bymonthday)}_onWeekdayToggle(e){const t=e.currentTarget.value;this._weekday.has(t)?this._weekday.delete(t):this._weekday.add(t),this.requestUpdate("_weekday")}_onEndSelected(e){const t=e.target.value;if(t!==this._end){switch(this._end=t,this._end){case"after":this._count=c.et[this._freq],this._untilDay=void 0;break;case"on":this._count=void 0,this._untilDay=(0,c.AZ)(this._freq);break;default:this._count=void 0,this._untilDay=void 0}e.stopPropagation()}}_onCountChange(e){this._count=e.target.value}_onUntilChange(e){e.stopPropagation(),this._untilDay=new Date(new s.BB(e.detail.value+"T00:00:00",this.timezone).getTime())}_computeWeekday(){if(this.dtstart&&this._weekday.size<=1){const e=(0,c.VJ)(this.dtstart);this._weekday.clear(),this._weekday.add(new r.Bw(e).toString())}}_computeRRule(){if(void 0===this._freq||"none"===this._freq)return"";let e,t;"monthly"===this._freq&&void 0!==this._monthlyRepeatWeekday?e=[this._monthlyRepeatWeekday]:"monthly"===this._freq&&void 0!==this._monthday?t=this._monthday:"weekly"===this._freq&&(e=(0,c.OS)(this._weekday));const i={freq:(0,c.zw)(this._freq),interval:this._interval>1?this._interval:void 0,count:this._count,byweekday:e,bymonthday:t};let a=r.p3.optionsToString(i);if(this._untilDay){const e=new s.BB((0,p.Yq)(this._untilDay,this.timezone)+"T"+(0,p.fU)(this.dtstart,this.timezone),this.timezone);let t;t=this.allDay?e.toISOString().split("T")[0].replace(/-/g,""):e.toISOString().replace(/[-:]/g,"").split(".")[0],a+=`;UNTIL=${t}`}return a.slice(6)}_updateRule(){const e=this._computeRRule();e!==this._computedRRule&&(this._computedRRule=e,this.dispatchEvent(new CustomEvent("value-changed",{detail:{value:e}})))}constructor(...e){super(...e),this.disabled=!1,this.value="",this.allDay=!1,this._computedRRule="",this._freq="none",this._interval=1,this._weekday=new Set,this._end="never",this._monthlyRepeatItems=[]}}m.styles=o.AH`ha-select,ha-textfield{display:block;margin-bottom:16px}.weekdays{margin-bottom:16px}.weekdays:last-child,ha-select:last-child,ha-textfield:last-child{margin-bottom:0}`,(0,a.Cg)([(0,n.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,a.Cg)([(0,n.MZ)({type:Boolean})],m.prototype,"disabled",void 0),(0,a.Cg)([(0,n.MZ)()],m.prototype,"value",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],m.prototype,"dtstart",void 0),(0,a.Cg)([(0,n.MZ)({attribute:"all-day",type:Boolean})],m.prototype,"allDay",void 0),(0,a.Cg)([(0,n.MZ)({attribute:!1})],m.prototype,"locale",void 0),(0,a.Cg)([(0,n.MZ)()],m.prototype,"timezone",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_computedRRule",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_freq",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_interval",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_weekday",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_monthlyRepeat",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_monthlyRepeatWeekday",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_monthday",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_end",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_count",void 0),(0,a.Cg)([(0,n.wk)()],m.prototype,"_untilDay",void 0),(0,a.Cg)([(0,n.P)("#monthly")],m.prototype,"_monthlyRepeatSelect",void 0),m=(0,a.Cg)([(0,n.EM)("ha-recurrence-rule-editor")],m),t()}catch(e){t(e)}})},24367(e,t,i){i.d(t,{L:()=>s,z:()=>o});var a=i(23832);const s=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],o=(0,a.g)(s)},19711(e,t,i){i.d(t,{$:()=>o});var a=i(1087);const s=()=>Promise.all([i.e("26767"),i.e("93785"),i.e("12036"),i.e("18738"),i.e("81046")]).then(i.bind(i,79029)),o=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:s,dialogParams:t})}},85614(e,t,i){i.d(t,{i:()=>a});const a=async()=>{await Promise.all([i.e("22564"),i.e("22309")]).then(i.bind(i,42735))}}};
//# sourceMappingURL=33771.de145149b311f11e.js.map