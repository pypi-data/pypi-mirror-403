export const __rspack_esm_id="81152";export const __rspack_esm_ids=["81152"];export const __webpack_modules__={91069(t,e,s){s.a(t,async function(t,i){try{s.d(e,{EO:()=>v,Yq:()=>b,_U:()=>D,eE:()=>O,fU:()=>k,ol:()=>w,xo:()=>S});var a=s(78016),n=s(31810),o=s(49134),r=s(81977),c=s(36307),l=s(35932),h=s(73983),u=s(6946),_=s(92913),d=s(83339),m=s(77972),g=s(31886),f=s(46927),p=t([g]);g=(p.then?(await p)():p)[0];const y=(t,e,s,i)=>{const a=s(new g.BB(t,e),i);return a instanceof Date?new Date(a.getTime()):a},w=(t,e,s,i,a)=>s.time_zone===f.Wj.server?y(t,i.time_zone,e,a):e(t,a),S=(t,e,s,i,a)=>s.time_zone===f.Wj.server?y(t,i.time_zone,e,a):e(t,a),v=(t,e,s,i,a)=>S(t,s,i,a,i.time_zone===f.Wj.server?new g.BB(e,a.time_zone):e),O=(t,e,s,i,g)=>{let f,p;if(S(t,a.e,i,g)&&S(e,n.c,i,g)){const a=(v(e,t,o.W,i,g)+1)*(s?1:-1);f=w(t,r.P,i,g,a),p=w(w(e,r.P,i,g,a),c.p,i,g)}else if(S(t,t=>(0,l.o)(t).getMilliseconds()===t.getMilliseconds(),i,g)&&S(e,t=>(0,h.D)(t).getMilliseconds()===t.getMilliseconds(),i,g)){const a=(v(e,t,u.c,i,g)+1)*(s?1:-1);f=w(t,_.f,i,g,a),p=w(e,_.f,i,g,a)}else{const a=v(e,t,d.b,i,g)*(s?1:-1);f=w(t,m.A,i,g,a),p=w(e,m.A,i,g,a)}return{start:f,end:p}},D=(t,e)=>{const s=new g.BB(t,e);return new Date(s.getTime())},b=(t,e)=>new g.BB(t,e).toISOString().split("T")[0],k=(t,e)=>new g.BB(t,e).toISOString().split("T")[1].split(".")[0];i()}catch(t){i(t)}})},46223(t,e,s){s.a(t,async function(t,i){try{s.d(e,{b:()=>v});var a=s(35932),n=s(73983),o=s(92913),r=s(52640),c=s(69137),l=s(35660),h=s(36307),u=s(11650),_=s(15797),d=s(33977),m=s(69748),g=s(55144),f=s(21828),p=s(66708),y=s(91069),w=s(380),S=t([y]);y=(S.then?(await S)():S)[0];const v=(t,e)=>{const s=new Date,i=(0,w.P)(t.locale);switch(e){case"today":return[(0,y.ol)(s,a.o,t.locale,t.config,{weekStartsOn:i}),(0,y.ol)(s,n.D,t.locale,t.config,{weekStartsOn:i})];case"yesterday":return[(0,y.ol)((0,o.f)(s,-1),a.o,t.locale,t.config,{weekStartsOn:i}),(0,y.ol)((0,o.f)(s,-1),n.D,t.locale,t.config,{weekStartsOn:i})];case"this_week":return[(0,y.ol)(s,r.k,t.locale,t.config,{weekStartsOn:i}),(0,y.ol)(s,c.$,t.locale,t.config,{weekStartsOn:i})];case"this_month":return[(0,y.ol)(s,l.w,t.locale,t.config),(0,y.ol)(s,h.p,t.locale,t.config)];case"this_quarter":return[(0,y.ol)(s,u.a,t.locale,t.config),(0,y.ol)(s,_.j,t.locale,t.config)];case"this_year":return[(0,y.ol)(s,d.D,t.locale,t.config),(0,y.ol)(s,m.Q,t.locale,t.config)];case"now-7d":return[(0,y.ol)(s,g.e,t.locale,t.config,7),(0,y.ol)(s,g.e,t.locale,t.config,0)];case"now-30d":return[(0,y.ol)(s,g.e,t.locale,t.config,30),(0,y.ol)(s,g.e,t.locale,t.config,0)];case"now-12m":return[(0,y.ol)(s,f.a,t.locale,t.config,12),(0,y.ol)(s,f.a,t.locale,t.config,0)];case"now-1h":return[(0,y.ol)(s,p.O,t.locale,t.config,1),(0,y.ol)(s,p.O,t.locale,t.config,0)];case"now-12h":return[(0,y.ol)(s,p.O,t.locale,t.config,12),(0,y.ol)(s,p.O,t.locale,t.config,0)];case"now-24h":return[(0,y.ol)(s,p.O,t.locale,t.config,24),(0,y.ol)(s,p.O,t.locale,t.config,0)]}return[s,s]};i()}catch(t){i(t)}})},23528(t,e,s){s.d(e,{$3:()=>g,$O:()=>D,$j:()=>f,ED:()=>n,JE:()=>b,OQ:()=>k,PU:()=>C,Ph:()=>d,Uf:()=>O,W1:()=>m,Wr:()=>h,Z:()=>c,gF:()=>p,iY:()=>y,jU:()=>o,nN:()=>v,p3:()=>l,pJ:()=>_,r_:()=>r,sz:()=>u});s(18111),s(13579);var i=s(28978),a=s(380),n=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const o=["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"],r=["L","gal","ft³","m³","CCF","MCF"],c=t=>t.sendMessagePromise({type:"recorder/info"}),l=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),h=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),u=(t,e,s,i,a="hour",n,o)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:s?.toISOString(),statistic_ids:i,period:a,units:n,types:o}),_=(t,e,s,i)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:i,fixed_period:s.fixed_period?{start_time:s.fixed_period.start instanceof Date?s.fixed_period.start.toISOString():s.fixed_period.start,end_time:s.fixed_period.end instanceof Date?s.fixed_period.end.toISOString():s.fixed_period.end}:void 0,calendar:s.calendar?{..."week"===s.calendar.period?{first_weekday:(0,a.D)(t.locale).substring(0,3)}:{},...s.calendar}:void 0,rolling_window:s.rolling_window}),d=t=>t.callWS({type:"recorder/validate_statistics"}),m=(t,e,s,i)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:s,unit_class:i}),g=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),f=t=>{let e=null;if(!t)return null;for(const s of t)null!==s.change&&void 0!==s.change&&(null===e?e=s.change:e+=s.change);return e},p=(t,e)=>{let s=null;for(const i of e){if(!(i in t))continue;const e=f(t[i]);null!==e&&(null===s?s=e:s+=e)}return s},y=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),w=["mean","min","max"],S=["sum","state","change"],v=(t,e)=>!(!w.includes(e)||0===t.mean_type)||!(!S.includes(e)||!t.has_sum),O=(t,e,s,i,a)=>{const n=new Date(s).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:n,adjustment:i,adjustment_unit_of_measurement:a})},D=(t,e,s)=>{const a=t.states[e];return a?(0,i.u)(a):s?.name||e},b=(t,e,s)=>{let i;return e&&(i=t.states[e]?.attributes.unit_of_measurement),void 0===i?s?.statistics_unit_of_measurement:i},k=t=>t.includes(":"),C=t=>t.callWS({type:"recorder/update_statistics_issues"})},51687(t,e,s){s.a(t,async function(t,i){try{s.r(e),s.d(e,{HuiHomeSummaryCard:()=>D});s(18111),s(22489),s(61701);var a=s(62826),n=s(35932),o=s(73983),r=s(96196),c=s(44457),l=s(6415),h=s(78870),u=s(91069),_=s(71727),d=s(4423),m=s(20058),g=(s(76776),s(22573),s(80933),s(32248),s(38114)),f=s(54706),p=s(37544),y=s(97176),w=s(8537),S=s(51989),v=t([u,m,g,w]);[u,m,g,w]=v.then?(await v)():v;const O={light:"amber",climate:"deep-orange",security:"blue-grey",media_players:"blue",energy:"amber"};class D extends((0,f.E)(r.WF)){hassSubscribe(){if("energy"!==this._config?.summary)return[];const t=(0,g.tb)(this.hass,{key:"energy_home_dashboard"});return t.setPeriod((0,u.ol)(new Date,n.o,this.hass.locale,this.hass.config),(0,u.ol)(new Date,o.D,this.hass.locale,this.hass.config)),[t.subscribe(t=>{this._energyData=t})]}setConfig(t){this._config=t}getCardSize(){return this._config?.vertical?2:1}getGridOptions(){let t=6,e=1;return this._config?.vertical&&(e++,t=3),{columns:6,rows:e,min_columns:t,min_rows:e}}_handleAction(t){(0,p.$)(this,this.hass,this._config,t.detail.action)}get _hasCardAction(){return(0,y.h)(this._config?.tap_action)||(0,y.h)(this._config?.hold_action)||(0,y.h)(this._config?.double_tap_action)}_computeSummaryState(){if(!this._config||!this.hass)return"";const t=Object.keys(this.hass.states),e=Object.values(this.hass.areas);switch(this._config.summary){case"light":{const e=w.vV.light.map(t=>(0,d.r)(this.hass,t)),s=(0,d.B)(t,e).filter(t=>{const e=this.hass.states[t]?.state;return"on"===e});return s.length?this.hass.localize("ui.card.home-summary.count_lights_on",{count:s.length}):this.hass.localize("ui.card.home-summary.all_lights_off")}case"climate":{const t=e.map(t=>t.temperature_entity_id).filter(Boolean).map(t=>parseFloat(this.hass.states[t]?.state)||NaN).filter(t=>!isNaN(t));if(0===t.length)return"";const s=Math.min(...t),i=Math.max(...t);if(isNaN(s)||isNaN(i))return"";const a=(0,m.ZV)(s,this.hass?.locale,{minimumFractionDigits:1,maximumFractionDigits:1}),n=(0,m.ZV)(i,this.hass?.locale,{minimumFractionDigits:1,maximumFractionDigits:1});return a===n?`${a}°`:`${a} - ${n}°`}case"security":{const e=w.vV.security.map(t=>(0,d.r)(this.hass,t)),s=(0,d.B)(t,e),i=s.filter(t=>"lock"===(0,_.m)(t)),a=s.filter(t=>"alarm_control_panel"===(0,_.m)(t)),n=a.filter(t=>{const e=this.hass.states[t]?.state;return"disarmed"===e});if(!i.length&&!a.length)return"";const o=i.filter(t=>{const e=this.hass.states[t]?.state;return"unlocked"===e||"jammed"===e||"open"===e});return o.length?this.hass.localize("ui.card.home-summary.count_locks_unlocked",{count:o.length}):n.length?this.hass.localize("ui.card.home-summary.count_alarms_disarmed",{count:n.length}):this.hass.localize("ui.card.home-summary.all_secure")}case"media_players":{const e=w.vV.media_players.map(t=>(0,d.r)(this.hass,t)),s=(0,d.B)(t,e).filter(t=>{const e=this.hass.states[t]?.state;return"playing"===e});return s.length?this.hass.localize("ui.card.home-summary.count_media_playing",{count:s.length}):this.hass.localize("ui.card.home-summary.no_media_playing")}case"energy":{if(!this._energyData)return"";const{summedData:t}=(0,g.gv)(this._energyData),{consumption:e}=(0,g.DR)(t,void 0),s=e.total.used_total;return(0,g.n3)(this.hass,s,"kWh")}}return""}render(){if(!this._config||!this.hass)return r.s6;const t={"--tile-color":(0,h.MP)(O[this._config.summary])},e=this._computeSummaryState(),s=(0,w.rh)(this.hass.localize,this._config.summary),i=w.It[this._config.summary];return r.qy` <ha-card style="${(0,l.W)(t)}"> <ha-tile-container .vertical="${Boolean(this._config.vertical)}" .interactive="${this._hasCardAction}" .actionHandlerOptions="${{hasHold:(0,y.h)(this._config.hold_action),hasDoubleClick:(0,y.h)(this._config.double_tap_action)}}" @action="${this._handleAction}"> <ha-tile-icon slot="icon" .icon="${i}"></ha-tile-icon> <ha-tile-info slot="info" .primary="${s}" .secondary="${e}"></ha-tile-info> </ha-tile-container> </ha-card> `}constructor(...t){super(...t),this.hassSubscribeRequiredHostProps=["_config"]}}D.styles=[S.c,r.AH`:host{--tile-color:var(--state-inactive-color)}`],(0,a.Cg)([(0,c.MZ)({attribute:!1})],D.prototype,"hass",void 0),(0,a.Cg)([(0,c.wk)()],D.prototype,"_config",void 0),(0,a.Cg)([(0,c.wk)()],D.prototype,"_energyData",void 0),D=(0,a.Cg)([(0,c.EM)("hui-home-summary-card")],D),i()}catch(t){i(t)}})},56434(t,e,s){s.d(e,{e:()=>a});var i=s(81977);function a(t,e,s){return(0,i.P)(t,12*e,s)}}};
//# sourceMappingURL=81152.8c9fef9128266852.js.map