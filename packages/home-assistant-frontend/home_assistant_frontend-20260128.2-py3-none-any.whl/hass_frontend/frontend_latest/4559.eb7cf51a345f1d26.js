/*! For license information please see 4559.eb7cf51a345f1d26.js.LICENSE.txt */
export const __rspack_esm_id="4559";export const __rspack_esm_ids=["4559"];export const __webpack_modules__={72554(t,a,i){i.d(a,{l:()=>d});var e=i(62826),s=i(30728),o=i(47705),r=i(96196),n=i(44457);i(22444),i(26300);const l=["button","ha-list-item"],d=(t,a)=>r.qy` <div class="header_title"> <ha-icon-button .label="${t?.localize("ui.common.close")??"Close"}" .path="${"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}" dialogAction="close" class="header_button"></ha-icon-button> <span>${a}</span> </div> `;class c extends s.u{scrollToPos(t,a){this.contentElement?.scrollTo(t,a)}renderHeading(){return r.qy`<slot name="heading"> ${super.renderHeading()} </slot>`}firstUpdated(){super.firstUpdated(),this.suppressDefaultPressSelector=[this.suppressDefaultPressSelector,l].join(", "),this._updateScrolledAttribute(),this.contentElement?.addEventListener("scroll",this._onScroll,{passive:!0})}disconnectedCallback(){super.disconnectedCallback(),this.contentElement.removeEventListener("scroll",this._onScroll)}_updateScrolledAttribute(){this.contentElement&&this.toggleAttribute("scrolled",0!==this.contentElement.scrollTop)}constructor(...t){super(...t),this._onScroll=()=>{this._updateScrolledAttribute()}}}c.styles=[o.R,r.AH`:host([scrolled]) ::slotted(ha-dialog-header){border-bottom:1px solid var(--mdc-dialog-scroll-divider-color,rgba(0,0,0,.12))}.mdc-dialog{--mdc-dialog-scroll-divider-color:var(
          --dialog-scroll-divider-color,
          var(--divider-color)
        );z-index:var(--dialog-z-index,8);-webkit-backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter,none));backdrop-filter:var(--ha-dialog-scrim-backdrop-filter,var(--dialog-backdrop-filter,none));--mdc-dialog-box-shadow:var(--dialog-box-shadow, none);--mdc-typography-headline6-font-weight:var(--ha-font-weight-normal);--mdc-typography-headline6-font-size:1.574rem}.mdc-dialog__actions{justify-content:var(--justify-action-buttons,flex-end);padding:var(--ha-space-3) var(--ha-space-4) var(--ha-space-4) var(--ha-space-4)}.mdc-dialog__actions span:first-child{flex:var(--secondary-action-button-flex,unset)}.mdc-dialog__actions span:nth-child(2){flex:var(--primary-action-button-flex,unset)}.mdc-dialog__container{align-items:var(--vertical-align-dialog,center);padding:var(--dialog-container-padding,0)}.mdc-dialog__title{padding:var(--ha-space-4) var(--ha-space-4) 0 var(--ha-space-4)}.mdc-dialog__title:has(span){padding:var(--ha-space-3) var(--ha-space-3) 0}.mdc-dialog__title::before{content:unset}.mdc-dialog .mdc-dialog__content{position:var(--dialog-content-position,relative);padding:var(--dialog-content-padding,var(--ha-space-6))}:host([hideactions]) .mdc-dialog .mdc-dialog__content{padding-bottom:var(--dialog-content-padding,var(--ha-space-6))}.mdc-dialog .mdc-dialog__surface{position:var(--dialog-surface-position,relative);top:var(--dialog-surface-top);margin-top:var(--dialog-surface-margin-top);min-width:var(--mdc-dialog-min-width,auto);min-height:var(--mdc-dialog-min-height,auto);border-radius:var(--ha-dialog-border-radius,var(--ha-border-radius-3xl));-webkit-backdrop-filter:var(--ha-dialog-surface-backdrop-filter,none);backdrop-filter:var(--ha-dialog-surface-backdrop-filter,none);background:var(--ha-dialog-surface-background,var(--mdc-theme-surface,#fff));padding:var(--dialog-surface-padding,0)}:host([flexContent]) .mdc-dialog .mdc-dialog__content{display:flex;flex-direction:column}.header_title{display:flex;align-items:center;direction:var(--direction)}.header_title span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block;padding-left:var(--ha-space-1);padding-right:var(--ha-space-1);margin-right:var(--ha-space-3);margin-inline-end:var(--ha-space-3);margin-inline-start:initial}.header_button{text-decoration:none;color:inherit;inset-inline-start:initial;inset-inline-end:calc(var(--ha-space-3) * -1);direction:var(--direction)}.dialog-actions{inset-inline-start:initial!important;inset-inline-end:0!important;direction:var(--direction)}`],c=(0,e.Cg)([(0,n.EM)("ha-dialog")],c)},20873(t,a,i){i.d(a,{Jo:()=>o,MW:()=>r,vq:()=>n});var e=i(62384),s=i(47351);const o=async t=>(0,e.v)(t.config.version,2021,2,4)?t.callWS({type:"supervisor/api",endpoint:"/docker/registries",method:"get"}):(0,s.PS)(await t.callApi("GET","hassio/docker/registries")),r=async(t,a)=>{(0,e.v)(t.config.version,2021,2,4)?await t.callWS({type:"supervisor/api",endpoint:"/docker/registries",method:"post",data:a}):await t.callApi("POST","hassio/docker/registries",a)},n=async(t,a)=>{(0,e.v)(t.config.version,2021,2,4)?await t.callWS({type:"supervisor/api",endpoint:`/docker/registries/${a}`,method:"delete"}):await t.callApi("DELETE",`hassio/docker/registries/${a}`)}},81562(t,a,i){i.d(a,{CH:()=>n,Ci:()=>o,JQ:()=>r,oE:()=>s});var e=i(35541);const s=async t=>(0,e.X)(t,"/store"),o=async t=>(0,e.X)(t,"/store/repositories"),r=async(t,a)=>(0,e.X)(t,"/store/repositories",{method:"post",data:{repository:a}}),n=async(t,a)=>(0,e.X)(t,`/store/repositories/${a}`,{method:"delete"})},81310(t,a,i){var e=i(62826),s=i(96196),o=i(44457),r=i(94333),n=i(26218),l=i(91926),d=(i(90248),i(2054),i(14503));class c extends s.WF{render(){return s.qy` <div class="toolbar ${(0,r.H)({narrow:this.narrow})}"> <div class="toolbar-content"> ${this.mainPage||history.state?.root?s.qy` <ha-menu-button .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `:this.backPath?s.qy` <a href="${this.backPath}"> <ha-icon-button-arrow-prev .hass="${this.hass}"></ha-icon-button-arrow-prev> </a> `:s.qy` <ha-icon-button-arrow-prev .hass="${this.hass}" @click="${this._backTapped}"></ha-icon-button-arrow-prev> `} <div class="main-title"> <slot name="header">${this.header}</slot> </div> <slot name="toolbar-icon"></slot> </div> </div> <div class="content ha-scrollbar" @scroll="${this._saveScrollPos}"> <slot></slot> </div> <div id="fab"> <slot name="fab"></slot> </div> `}_saveScrollPos(t){this._savedScrollPos=t.target.scrollTop}_backTapped(){this.backCallback?this.backCallback():(0,l.O)()}static get styles(){return[d.dp,s.AH`:host{display:block;height:100%;background-color:var(--primary-background-color);overflow:hidden;position:relative}:host([narrow]){width:100%;position:fixed}.toolbar{background-color:var(--app-header-background-color);padding-top:var(--safe-area-inset-top);padding-right:var(--safe-area-inset-right)}:host([narrow]) .toolbar{padding-left:var(--safe-area-inset-left)}.toolbar-content{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box;padding:8px 12px}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{display:flex;align-items:center;pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{margin-inline-start:var(--ha-space-6);line-height:var(--ha-line-height-normal);min-width:0;flex-grow:1;overflow-wrap:break-word;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.narrow .main-title{margin-inline-start:var(--ha-space-2)}.content{position:relative;width:calc(100% - var(--safe-area-inset-right,0px));height:calc(100% - 1px - var(--header-height,0px) - var(--safe-area-inset-top,0px) - var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom,0px)));margin-bottom:var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom));margin-right:var(--safe-area-inset-right);overflow-y:auto;overflow:auto;-webkit-overflow-scrolling:touch}:host([narrow]) .content{width:calc(100% - var(--safe-area-inset-left,0px) - var(--safe-area-inset-right,0px));margin-left:var(--safe-area-inset-left)}#fab{position:absolute;right:calc(16px + var(--safe-area-inset-right,0px));inset-inline-end:calc(16px + var(--safe-area-inset-right,0px));inset-inline-start:initial;bottom:calc(16px + var(--safe-area-inset-bottom,0px));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:var(--ha-space-2)}:host([narrow]) #fab.tabs{bottom:calc(84px + var(--safe-area-inset-bottom,0px))}#fab[is-wide]{bottom:calc(24px + var(--safe-area-inset-bottom,0px));right:calc(24px + var(--safe-area-inset-right,0px));inset-inline-end:calc(24px + var(--safe-area-inset-right,0px));inset-inline-start:initial}`]}constructor(...t){super(...t),this.mainPage=!1,this.narrow=!1}}(0,e.Cg)([(0,o.MZ)({attribute:!1})],c.prototype,"hass",void 0),(0,e.Cg)([(0,o.MZ)()],c.prototype,"header",void 0),(0,e.Cg)([(0,o.MZ)({type:Boolean,attribute:"main-page"})],c.prototype,"mainPage",void 0),(0,e.Cg)([(0,o.MZ)({type:String,attribute:"back-path"})],c.prototype,"backPath",void 0),(0,e.Cg)([(0,o.MZ)({attribute:!1})],c.prototype,"backCallback",void 0),(0,e.Cg)([(0,o.MZ)({type:Boolean,reflect:!0})],c.prototype,"narrow",void 0),(0,e.Cg)([(0,n.a)(".content")],c.prototype,"_savedScrollPos",void 0),(0,e.Cg)([(0,o.Ls)({passive:!0})],c.prototype,"_saveScrollPos",null),c=(0,e.Cg)([(0,o.EM)("hass-subpage")],c)},97353(t,a,i){i.a(t,async function(t,e){try{i.r(a);i(18111),i(61701);var s=i(62826),o=i(96196),r=i(44457),n=i(18350),l=i(72554),d=(i(52763),i(26300),i(8034),i(67094),i(47351)),c=i(20873),h=i(65063),p=i(14503),g=t([n]);n=(g.then?(await g)():g)[0];const v="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",u="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",m=[{name:"registry",required:!0,selector:{text:{}}},{name:"username",required:!0,selector:{text:{}}},{name:"password",required:!0,selector:{text:{type:"password"}}}];class b extends o.WF{render(){return o.qy` <ha-dialog .open="${this._opened}" @closed="${this.closeDialog}" scrimClickAction escapeKeyAction hideActions .heading="${(0,l.l)(this.hass,this._addingRegistry?this.hass.localize("ui.panel.config.apps.dialog.registries.title_add"):this.hass.localize("ui.panel.config.apps.dialog.registries.title_manage"))}"> ${this._addingRegistry?o.qy` <ha-form .data="${this._input}" .schema="${m}" @value-changed="${this._valueChanged}" .computeLabel="${this._computeLabel}" dialogInitialFocus></ha-form> <div class="action"> <ha-button ?disabled="${Boolean(!this._input.registry||!this._input.username||!this._input.password)}" @click="${this._addNewRegistry}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${u}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.apps.dialog.registries.add_registry")} </ha-button> </div> `:o.qy`${this._registries?.length?this._registries.map(t=>o.qy` <ha-settings-row class="registry"> <span slot="heading"> ${t.registry} </span> <span slot="description"> ${this.hass.localize("ui.panel.config.apps.dialog.registries.username")}: ${t.username} </span> <ha-icon-button .entry="${t}" .label="${this.hass.localize("ui.panel.config.apps.dialog.registries.remove")}" .path="${v}" @click="${this._removeRegistry}"></ha-icon-button> </ha-settings-row> `):o.qy` <ha-alert> ${this.hass.localize("ui.panel.config.apps.dialog.registries.no_registries")} </ha-alert> `} <div class="action"> <ha-button @click="${this._addRegistry}" dialogInitialFocus appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${u}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.apps.dialog.registries.add_new_registry")} </ha-button> </div> `} </ha-dialog> `}_valueChanged(t){this._input=t.detail.value}async showDialog(){this._opened=!0,this._input={},await this._loadRegistries(),await this.updateComplete}closeDialog(){this._addingRegistry=!1,this._opened=!1,this._input={}}focus(){this.updateComplete.then(()=>this.shadowRoot?.querySelector("[dialogInitialFocus]")?.focus())}async _loadRegistries(){const t=await(0,c.Jo)(this.hass);this._registries=Object.keys(t.registries).map(a=>({registry:a,username:t.registries[a].username}))}_addRegistry(){this._addingRegistry=!0}async _addNewRegistry(){const t={};t[this._input.registry]={username:this._input.username,password:this._input.password};try{await(0,c.MW)(this.hass,t),await this._loadRegistries(),this._addingRegistry=!1,this._input={}}catch(t){(0,h.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.apps.dialog.registries.failed_to_add"),text:(0,d.VR)(t)})}}async _removeRegistry(t){const a=t.currentTarget.entry;try{await(0,c.vq)(this.hass,a.registry),await this._loadRegistries()}catch(t){(0,h.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.apps.dialog.registries.failed_to_remove"),text:(0,d.VR)(t)})}}static get styles(){return[p.RF,p.nA,o.AH`.registry{border:1px solid var(--divider-color);border-radius:var(--ha-border-radius-sm);margin-top:4px}.action{margin-top:24px;width:100%;display:flex;justify-content:flex-end}ha-icon-button{color:var(--error-color);margin-right:-10px;margin-inline-end:-10px;margin-inline-start:initial}`]}constructor(...t){super(...t),this._input={},this._opened=!1,this._addingRegistry=!1,this._computeLabel=t=>this.hass.localize(`ui.panel.config.apps.dialog.registries.${t.name}`)}}(0,s.Cg)([(0,r.MZ)({attribute:!1})],b.prototype,"hass",void 0),(0,s.Cg)([(0,r.wk)()],b.prototype,"_registries",void 0),(0,s.Cg)([(0,r.wk)()],b.prototype,"_input",void 0),(0,s.Cg)([(0,r.wk)()],b.prototype,"_opened",void 0),(0,s.Cg)([(0,r.wk)()],b.prototype,"_addingRegistry",void 0),b=(0,s.Cg)([(0,r.EM)("dialog-apps-registries")],b),e()}catch(t){e(t)}})},84373(t,a,i){i.a(t,async function(t,e){try{i.d(a,{t:()=>n});var s=i(1087),o=i(97353),r=t([o]);o=(r.then?(await r)():r)[0];const n=t=>{(0,s.r)(t,"show-dialog",{dialogTag:"dialog-apps-registries",dialogImport:()=>Promise.resolve().then(i.bind(i,97353)),dialogParams:{}})};e()}catch(t){e(t)}})},13937(t,a,i){i.a(t,async function(t,e){try{i.r(a);i(18111),i(22489),i(61701),i(13579);var s=i(62826),o=i(96196),r=i(44457),n=i(22786),l=i(1087),d=i(52220),c=(i(38962),i(18350)),h=i(72554),p=(i(26300),i(17308),i(2846),i(67094),i(75709),i(34127)),g=i(47351),v=i(81562),u=i(14503),m=t([c,p]);[c,p]=m.then?(await m)():m;const b="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",f="M2 5.27L3.28 4L5 5.72L5.28 6L6.28 7L18 18.72L20 20.72L18.73 22L17.27 20.54C16.93 20.83 16.5 21 16 21H8C6.9 21 6 20.1 6 19V9.27L2 5.27M19 4V6H7.82L5.82 4H8.5L9.5 3H14.5L15.5 4H19M18 7V16.18L8.82 7H18Z",_="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z";class y extends o.WF{async showDialog(t){this._dialogParams=t,this._addon=t.addon,this._opened=!0,await this._loadData(),await this.updateComplete}closeDialog(){this._dialogParams?.closeCallback?.(),this._dialogParams=void 0,this._opened=!1,this._error=""}render(){if(!this._addon||void 0===this._repositories)return o.s6;const t=this._filteredRepositories(this._repositories),a=this._filteredUsedRepositories(t,this._addon.addons);return o.qy` <ha-dialog .open="${this._opened}" @closed="${this.closeDialog}" scrimClickAction escapeKeyAction .heading="${(0,h.l)(this.hass,this.hass.localize("ui.panel.config.apps.dialog.repositories.title"))}"> ${this._error?o.qy`<ha-alert alert-type="error">${this._error}</ha-alert>`:""} <div class="form"> <ha-md-list> ${t.length?t.map(t=>o.qy` <ha-md-list-item class="option"> ${t.name} <div slot="supporting-text"> <div>${t.maintainer}</div> <div>${t.url}</div> </div> <ha-tooltip .for="icon-button-${t.slug}" class="delete" slot="end"> ${this.hass.localize(a.includes(t.slug)?"ui.panel.config.apps.dialog.repositories.used":"ui.panel.config.apps.dialog.repositories.remove")} </ha-tooltip> <div .id="icon-button-${t.slug}"> <ha-icon-button .disabled="${a.includes(t.slug)}" .slug="${t.slug}" .path="${a.includes(t.slug)?f:b}" @click="${this._removeRepository}"> </ha-icon-button> </div> </ha-md-list-item> `):o.qy`<ha-md-list-item>${this.hass.localize("ui.panel.config.apps.dialog.repositories.no_repositories")}</ha-md-list-item>`} </ha-md-list> <div class="layout horizontal bottom"> <ha-textfield class="flex-auto" id="repository_input" .value="${this._dialogParams?.url||""}" .label="${this.hass.localize("ui.panel.config.apps.dialog.repositories.add")}" @keydown="${this._handleKeyAdd}" dialogInitialFocus></ha-textfield> <ha-button .loading="${this._processing}" @click="${this._addRepository}" appearance="filled" size="small"> <ha-svg-icon slot="start" .path="${_}"></ha-svg-icon> ${this.hass.localize("ui.panel.config.apps.dialog.repositories.add")} </ha-button> </div> </div> <ha-button slot="primaryAction" @click="${this.closeDialog}"> ${this.hass.localize("ui.common.close")} </ha-button> </ha-dialog> `}static get styles(){return[u.RF,u.nA,o.AH`ha-dialog.button-left{--justify-action-buttons:flex-start}.form{color:var(--primary-text-color)}.option{border:1px solid var(--divider-color);border-radius:var(--ha-border-radius-sm);margin-top:4px}ha-button{margin-left:var(--ha-space-2);margin-inline-start:var(--ha-space-2);margin-inline-end:initial}div.delete ha-icon-button{color:var(--error-color)}ha-md-list-item{position:relative;--md-item-overflow:visible}`]}focus(){this.updateComplete.then(()=>this.shadowRoot?.querySelector("[dialogInitialFocus]")?.focus())}_handleKeyAdd(t){t.stopPropagation(),"Enter"===t.key&&this._addRepository()}async _loadData(){try{this._repositories=await(0,v.Ci)(this.hass),(0,l.r)(this,"apps-collection-refresh",{collection:"addon"})}catch(t){this._error=(0,g.VR)(t)}}async _addRepository(){const t=this._optionInput;if(t&&t.value){this._processing=!0;try{await(0,v.JQ)(this.hass,t.value),await this._loadData(),(0,l.r)(this,"apps-collection-refresh",{collection:"store"}),t.value=""}catch(t){this._error=(0,g.VR)(t)}this._processing=!1}}async _removeRepository(t){const a=t.currentTarget.slug;try{await(0,v.CH)(this.hass,a),await this._loadData(),(0,l.r)(this,"apps-collection-refresh",{collection:"store"})}catch(t){this._error=(0,g.VR)(t)}}constructor(...t){super(...t),this._opened=!1,this._processing=!1,this._filteredRepositories=(0,n.A)(t=>t.filter(t=>"core"!==t.slug&&"local"!==t.slug&&"a0d7b954"!==t.slug&&"5c53de3b"!==t.slug&&"d5369777"!==t.slug).sort((t,a)=>(0,d.SH)(t.name,a.name,this.hass.locale.language))),this._filteredUsedRepositories=(0,n.A)((t,a)=>t.filter(t=>a.some(a=>a.repository===t.slug)).map(t=>t.slug))}}(0,s.Cg)([(0,r.MZ)({attribute:!1})],y.prototype,"hass",void 0),(0,s.Cg)([(0,r.P)("#repository_input",!0)],y.prototype,"_optionInput",void 0),(0,s.Cg)([(0,r.wk)()],y.prototype,"_repositories",void 0),(0,s.Cg)([(0,r.wk)()],y.prototype,"_dialogParams",void 0),(0,s.Cg)([(0,r.wk)()],y.prototype,"_addon",void 0),(0,s.Cg)([(0,r.wk)()],y.prototype,"_opened",void 0),(0,s.Cg)([(0,r.wk)()],y.prototype,"_processing",void 0),(0,s.Cg)([(0,r.wk)()],y.prototype,"_error",void 0),y=(0,s.Cg)([(0,r.EM)("dialog-apps-repositories")],y),e()}catch(t){e(t)}})},51443(t,a,i){i.a(t,async function(t,e){try{i.d(a,{Q:()=>n});var s=i(1087),o=i(13937),r=t([o]);o=(r.then?(await r)():r)[0];const n=(t,a)=>{(0,s.r)(t,"show-dialog",{dialogTag:"dialog-apps-repositories",dialogImport:()=>Promise.resolve().then(i.bind(i,13937)),dialogParams:a})};e()}catch(t){e(t)}})},68702(t,a,i){i.a(t,async function(t,e){try{i.r(a),i.d(a,{HaConfigAppsAvailable:()=>$});i(18111),i(22489),i(61701);var s=i(62826),o=i(96196),r=i(44457),n=i(22786),l=i(91926),d=i(6030),c=i(29823),h=(i(70947),i(26300),i(3103),i(22130)),p=i(47351),g=i(81562),v=i(65063),u=i(28794),m=i(23296),b=(i(81310),i(84373)),f=i(51443),_=(i(58821),t([c,u,m,f,b]));[c,u,m,f,b]=_.then?(await _)():_;const y="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",w=(t,a)=>"local"===t.slug?-1:"local"===a.slug?1:"core"===t.slug?-1:"core"===a.slug?1:t.name.toUpperCase()<a.name.toUpperCase()?-1:1;class $ extends o.WF{connectedCallback(){super.connectedCallback(),this.addEventListener("apps-collection-refresh",this._handleCollectionRefresh)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("apps-collection-refresh",this._handleCollectionRefresh)}firstUpdated(t){super.firstUpdated(t);const a=(0,d.p9)("repository_url");(0,l.o)("/config/apps/available",{replace:!0}),this._loadData().then(()=>{a&&this._manageRepositories(a)}),this.addEventListener("hass-api-called",t=>this._apiCalled(t))}render(){if(this._error)return o.qy` <hass-error-screen .hass="${this.hass}" .error="${this._error}"></hass-error-screen> `;if(!this._store||!this._addon)return o.qy` <hass-loading-screen .hass="${this.hass}" .narrow="${this.narrow}"></hass-loading-screen> `;let t=[];return this._store.repositories&&(t=this._addonRepositories(this._store.repositories,this._store.addons,this._filter)),o.qy` <hass-subpage .hass="${this.hass}" .narrow="${this.narrow}" .route="${this.route}" back-path="/config/apps" .header="${this.hass.localize("ui.panel.config.apps.store.title")}"> <ha-dropdown slot="toolbar-icon" @wa-select="${this._handleAction}"> <ha-icon-button .label="${this.hass.localize("ui.common.menu")}" .path="${y}" slot="trigger"></ha-icon-button> <ha-dropdown-item value="check_updates"> ${this.hass.localize("ui.panel.config.apps.store.check_updates")} </ha-dropdown-item> <ha-dropdown-item value="repositories"> ${this.hass.localize("ui.panel.config.apps.store.repositories")} </ha-dropdown-item> ${this.hass.userData?.showAdvanced?o.qy`<ha-dropdown-item value="registries"> ${this.hass.localize("ui.panel.config.apps.store.registries")} </ha-dropdown-item>`:o.s6} </ha-dropdown> ${0===t.length?o.qy`<hass-loading-screen no-toolbar></hass-loading-screen>`:o.qy` <div class="search"> <search-input .hass="${this.hass}" .filter="${this._filter}" @value-changed="${this._filterChanged}"></search-input> </div> ${t} `} ${this.hass.userData?.showAdvanced?"":o.qy` <div class="advanced"> <a href="/profile" target="_top"> ${this.hass.localize("ui.panel.config.apps.store.missing_apps")} </a> </div> `} </hass-subpage> `}_handleAction(t){const a=t.detail.item.value;if(a)switch(a){case"check_updates":this._refreshData();break;case"repositories":this._manageRepositoriesClicked();break;case"registries":this._manageRegistries()}}async _refreshData(){try{await(0,h.ah)(this.hass)}catch(t){(0,v.showAlertDialog)(this,{text:(0,p.VR)(t)})}finally{this._loadData()}}_apiCalled(t){t.detail.success&&this._loadData()}_manageRepositoriesClicked(){this._manageRepositories()}_manageRepositories(t){(0,f.Q)(this,{addon:this._addon,url:t,closeCallback:()=>this._loadData()})}_manageRegistries(){(0,b.t)(this)}async _loadData(){try{const[t,a]=await Promise.all([(0,h.b3)(this.hass),(0,g.oE)(this.hass)]);this._addon=t,this._store=a}catch(t){this._error=t.message||this.hass.localize("ui.panel.config.apps.error_loading"),(0,v.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.apps.error_loading"),text:this._error})}}_filterChanged(t){this._filter=t.detail.value}constructor(...t){super(...t),this.narrow=!1,this._addonRepositories=(0,n.A)((t,a,i)=>t.sort(w).map(t=>{const e=a.filter(a=>a.repository===t.slug);return 0!==e.length?o.qy` <supervisor-apps-repository .hass="${this.hass}" .repo="${t}" .addons="${e}" .filter="${i}"></supervisor-apps-repository> `:o.s6})),this._handleCollectionRefresh=async t=>{const{collection:a}=t.detail;try{"addon"===a?this._addon=await(0,h.b3)(this.hass):"store"===a&&(this._store=await(0,g.oE)(this.hass))}catch(t){}}}}$.styles=o.AH`:host{display:block;height:100%;background-color:var(--primary-background-color)}supervisor-apps-repository{margin-top:24px}.search{position:sticky;top:0;z-index:2}search-input{display:block;--mdc-text-field-fill-color:var(--sidebar-background-color);--mdc-text-field-idle-line-color:var(--divider-color)}.advanced{padding:12px;display:flex;flex-wrap:wrap;color:var(--primary-text-color)}.advanced a{margin-left:.5em;margin-inline-start:.5em;margin-inline-end:initial;color:var(--primary-color)}`,(0,s.Cg)([(0,r.MZ)({attribute:!1})],$.prototype,"hass",void 0),(0,s.Cg)([(0,r.MZ)({type:Boolean})],$.prototype,"narrow",void 0),(0,s.Cg)([(0,r.MZ)({attribute:!1})],$.prototype,"route",void 0),(0,s.Cg)([(0,r.wk)()],$.prototype,"_store",void 0),(0,s.Cg)([(0,r.wk)()],$.prototype,"_addon",void 0),(0,s.Cg)([(0,r.wk)()],$.prototype,"_error",void 0),(0,s.Cg)([(0,r.wk)()],$.prototype,"_filter",void 0),$=(0,s.Cg)([(0,r.EM)("ha-config-apps-available")],$),e()}catch(t){e(t)}})},58821(t,a,i){i(18111),i(22489),i(61701);var e=i(62826),s=i(96196),o=i(44457),r=i(22786),n=i(91926),l=i(52220),d=(i(76776),i(80888),i(78648));var c=i(93560);class h extends s.WF{render(){const t=this.repo;let a=this.addons;this.hass.userData?.showAdvanced||(a=a.filter(t=>!t.advanced&&"stable"===t.stage));const i=this._getAddons(a,this.filter);return this.filter&&i.length<1?s.qy` <div class="content"> <p class="description"> ${this.hass.localize("ui.panel.config.apps.store.no_results_found",{repository:t.name})} </p> </div> `:s.qy` <div class="content"> <h1>${t.name}</h1> <div class="card-group"> ${i.map(t=>s.qy` <ha-card outlined .addon="${t}" class="${t.available?"":"not_available"}" @click="${this._addonTapped}"> <div class="card-content"> <supervisor-apps-card-content .hass="${this.hass}" .title="${t.name}" .description="${t.description}" .available="${t.available}" .icon="${t.installed&&t.update_available?"M12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22M12,7L7,12H10V16H14V12H17L12,7Z":"M20.5,11H19V7C19,5.89 18.1,5 17,5H13V3.5A2.5,2.5 0 0,0 10.5,1A2.5,2.5 0 0,0 8,3.5V5H4A2,2 0 0,0 2,7V10.8H3.5C5,10.8 6.2,12 6.2,13.5C6.2,15 5,16.2 3.5,16.2H2V20A2,2 0 0,0 4,22H7.8V20.5C7.8,19 9,17.8 10.5,17.8C12,17.8 13.2,19 13.2,20.5V22H17A2,2 0 0,0 19,20V16H20.5A2.5,2.5 0 0,0 23,13.5A2.5,2.5 0 0,0 20.5,11Z"}" .iconTitle="${t.installed?t.update_available?this.hass.localize("ui.panel.config.apps.state.update_available"):this.hass.localize("ui.panel.config.apps.state.installed"):t.available?this.hass.localize("ui.panel.config.apps.state.not_installed"):this.hass.localize("ui.panel.config.apps.state.not_available")}" .iconClass="${t.installed?t.update_available?"update":"installed":t.available?"":"not_available"}" .iconImage="${t.icon?`/api/hassio/addons/${t.slug}/icon`:void 0}" .showTopbar="${t.installed||!t.available}" .topbarClass="${t.installed?t.update_available?"update":"installed":t.available?"":"unavailable"}"></supervisor-apps-card-content> </div> </ha-card> `)} </div> </div> `}_addonTapped(t){(0,n.o)(`/config/app/${t.currentTarget.addon.slug}/info?store=true`)}static get styles(){return[c.g,s.AH`ha-card{cursor:pointer;overflow:hidden}.not_available{opacity:.6}a.repo{color:var(--primary-text-color)}`]}constructor(...t){super(...t),this._getAddons=(0,r.A)((t,a)=>a?function(t,a){const i={keys:["name","description","slug"],isCaseSensitive:!1,minMatchCharLength:Math.min(a.length,2),threshold:.2,ignoreDiacritics:!0};return new d.A(t,i).search(a).map(t=>t.item)}(t,a):t.sort((t,a)=>(0,l.SH)(t.name,a.name,this.hass.locale.language)))}}(0,e.Cg)([(0,o.MZ)({attribute:!1})],h.prototype,"hass",void 0),(0,e.Cg)([(0,o.MZ)({attribute:!1})],h.prototype,"repo",void 0),(0,e.Cg)([(0,o.MZ)({attribute:!1})],h.prototype,"addons",void 0),(0,e.Cg)([(0,o.MZ)()],h.prototype,"filter",void 0),h=(0,e.Cg)([(0,o.EM)("supervisor-apps-repository")],h)},25423(t,a,i){i.d(a,{U:()=>s,Z:()=>o});i(44114);var e=i(27525);const s={ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",Home:"Home",End:"End"};class o{get items(){const t=this.getPossibleItems(),a=[];for(const i of t){if(this.isItem(i)){a.push(i);continue}const t=i.item;t&&this.isItem(t)&&a.push(t)}return a}activateNextItem(){const t=this.items,a=(0,e.A6)(t,this.isActivatable);return a&&(a.item.tabIndex=-1),(0,e.wm)(t,a,this.isActivatable,this.wrapNavigation())}activatePreviousItem(){const t=this.items,a=(0,e.A6)(t,this.isActivatable);return a&&(a.item.tabIndex=-1),(0,e.u9)(t,a,this.isActivatable,this.wrapNavigation())}constructor(t){this.handleKeydown=t=>{const a=t.key;if(t.defaultPrevented||!this.isNavigableKey(a))return;const i=this.items;if(!i.length)return;const o=(0,e.A6)(i,this.isActivatable);t.preventDefault();const r=this.isRtl(),n=r?s.ArrowRight:s.ArrowLeft,l=r?s.ArrowLeft:s.ArrowRight;let d=null;switch(a){case s.ArrowDown:case l:d=(0,e.wm)(i,o,this.isActivatable,this.wrapNavigation());break;case s.ArrowUp:case n:d=(0,e.u9)(i,o,this.isActivatable,this.wrapNavigation());break;case s.Home:d=(0,e.zT)(i,this.isActivatable);break;case s.End:d=(0,e.RZ)(i,this.isActivatable)}d&&o&&o.item!==d&&(o.item.tabIndex=-1)},this.onDeactivateItems=()=>{const t=this.items;for(const a of t)this.deactivateItem(a)},this.onRequestActivation=t=>{this.onDeactivateItems();const a=t.target;this.activateItem(a),a.focus()},this.onSlotchange=()=>{const t=this.items;let a=!1;for(const i of t){!(!i.disabled&&i.tabIndex>-1)||a?i.tabIndex=-1:(a=!0,i.tabIndex=0)}if(a)return;const i=(0,e.c7)(t,this.isActivatable);i&&(i.tabIndex=0)};const{isItem:a,getPossibleItems:i,isRtl:o,deactivateItem:r,activateItem:n,isNavigableKey:l,isActivatable:d,wrapNavigation:c}=t;this.isItem=a,this.getPossibleItems=i,this.isRtl=o,this.deactivateItem=r,this.activateItem=n,this.isNavigableKey=l,this.isActivatable=d,this.wrapNavigation=c??(()=>!0)}}}};
//# sourceMappingURL=4559.eb7cf51a345f1d26.js.map