"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["43195"],{60543:function(t,e,i){i.r(e),i.d(e,{HaQrCode:function(){return g}});i(18111),i(61701),i(62953);var a=i(40445),r=i(96196),s=i(77845),o=i(81298),n=(i(38962),i(79468));let c,h,d,l=t=>t;class g extends r.WF{willUpdate(t){super.willUpdate(t),(t.has("data")||t.has("scale")||t.has("width")||t.has("margin")||t.has("maskPattern")||t.has("errorCorrectionLevel"))&&this._error&&(this._error=void 0)}updated(t){const e=this._canvas;if(e&&this.data&&(t.has("data")||t.has("scale")||t.has("width")||t.has("margin")||t.has("maskPattern")||t.has("errorCorrectionLevel")||t.has("centerImage"))){const t=getComputedStyle(this),i=t.getPropertyValue("--rgb-primary-text-color"),a=t.getPropertyValue("--rgb-card-background-color"),r=(0,n.v2)(i.split(",").map(t=>parseInt(t,10))),s=(0,n.v2)(a.split(",").map(t=>parseInt(t,10)));if(o.toCanvas(e,this.data,{errorCorrectionLevel:this.errorCorrectionLevel||(this.centerImage?"Q":"M"),width:this.width,scale:this.scale,margin:this.margin,maskPattern:this.maskPattern,color:{light:s,dark:r}}).catch(t=>{this._error=t.message}),this.centerImage){const t=this._canvas.getContext("2d"),i=new Image;i.src=this.centerImage,i.onload=()=>{null==t||t.drawImage(i,.375*e.width,.375*e.height,e.width/4,e.height/4)}}}}render(){return this.data?this._error?(0,r.qy)(c||(c=l`<ha-alert alert-type="error">${0}</ha-alert>`),this._error):(0,r.qy)(h||(h=l`<canvas></canvas>`)):r.s6}constructor(...t){super(...t),this.errorCorrectionLevel="medium",this.width=4,this.scale=4,this.margin=4}}g.styles=(0,r.AH)(d||(d=l`:host{display:block}`)),(0,a.Cg)([(0,s.MZ)()],g.prototype,"data",void 0),(0,a.Cg)([(0,s.MZ)({attribute:"error-correction-level"})],g.prototype,"errorCorrectionLevel",void 0),(0,a.Cg)([(0,s.MZ)({type:Number})],g.prototype,"width",void 0),(0,a.Cg)([(0,s.MZ)({type:Number})],g.prototype,"scale",void 0),(0,a.Cg)([(0,s.MZ)({type:Number})],g.prototype,"margin",void 0),(0,a.Cg)([(0,s.MZ)({attribute:!1,type:Number})],g.prototype,"maskPattern",void 0),(0,a.Cg)([(0,s.MZ)({attribute:"center-image"})],g.prototype,"centerImage",void 0),(0,a.Cg)([(0,s.wk)()],g.prototype,"_error",void 0),(0,a.Cg)([(0,s.P)("canvas")],g.prototype,"_canvas",void 0),g=(0,a.Cg)([(0,s.EM)("ha-qr-code")],g)},21288:function(t,e,i){i.a(t,async function(t,a){try{i.r(e);i(18111),i(61701),i(3362);var r=i(40445),s=i(96196),o=i(77845),n=i(1087),c=i(72554),h=(i(8630),i(28732),i(60543),i(65829)),d=i(20559),l=i(65063),g=i(14503),p=t([h]);h=(p.then?(await p)():p)[0];let f,m,_,v,u,b=t=>t;const y="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z";class w extends s.WF{async showDialog(t){this.device_id=t.device_id,this._fetchNodeDetails()}render(){return this.device_id?(0,s.qy)(f||(f=b` <ha-dialog open hideActions @closed="${0}" .heading="${0}"> <p> ${0} </p> ${0} </ha-dialog> `),this.closeDialog,(0,c.l)(this.hass,this.hass.localize("ui.panel.config.matter.manage_fabrics.title")),this.hass.localize("ui.panel.config.matter.manage_fabrics.fabrics"),this._nodeDiagnostics?(0,s.qy)(m||(m=b`<ha-list> ${0} </ha-list>`),this._nodeDiagnostics.active_fabrics.map(t=>(0,s.qy)(_||(_=b`<ha-list-item noninteractive .hasMeta="${0}">${0} <ha-icon-button @click="${0}" slot="meta" .fabric="${0}" .path="${0}"></ha-icon-button> </ha-list-item>`),this._nodeDiagnostics.available&&t.fabric_index!==this._nodeDiagnostics.active_fabric_index,t.vendor_name||t.fabric_label||t.vendor_id,this._removeFabric,t,y))):(0,s.qy)(v||(v=b`<div class="center"> <ha-spinner></ha-spinner> </div>`))):s.s6}async _fetchNodeDetails(){if(this.device_id)try{this._nodeDiagnostics=await(0,d.eB)(this.hass,this.device_id)}catch(t){this._nodeDiagnostics=void 0}}async _removeFabric(t){const e=t.target.fabric;if(this._nodeDiagnostics.active_fabric_index===e.fabric_index)return;const i=e.vendor_name||e.fabric_label||e.vendor_id.toString();if(await(0,l.dk)(this,{title:this.hass.localize("ui.panel.config.matter.manage_fabrics.remove_fabric_confirm_header",{fabric:i}),text:this.hass.localize("ui.panel.config.matter.manage_fabrics.remove_fabric_confirm_text",{fabric:i}),warning:!0}))try{await(0,d.vX)(this.hass,this.device_id,e.fabric_index),this._fetchNodeDetails()}catch(a){(0,l.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.matter.manage_fabrics.remove_fabric_failed_header",{fabric:i}),text:this.hass.localize("ui.panel.config.matter.manage_fabrics.remove_fabric_failed_text")})}}closeDialog(){this.device_id=void 0,this._nodeDiagnostics=void 0,(0,n.r)(this,"dialog-closed",{dialog:this.localName})}static get styles(){return[g.nA,(0,s.AH)(u||(u=b`ha-dialog{--dialog-content-padding:0;--mdc-list-side-padding:24px;--mdc-list-side-padding-right:16px;--mdc-list-item-meta-size:48px}p{margin:8px 24px}.center{display:flex;align-items:center;justify-content:center}`))]}}(0,r.Cg)([(0,o.MZ)({attribute:!1})],w.prototype,"hass",void 0),(0,r.Cg)([(0,o.wk)()],w.prototype,"device_id",void 0),(0,r.Cg)([(0,o.wk)()],w.prototype,"_nodeDiagnostics",void 0),w=(0,r.Cg)([(0,o.EM)("dialog-matter-manage-fabrics")],w),a()}catch(f){a(f)}})},54743:function(t,e,i){var a=i(46518),r=i(44576),s=i(66346),o=i(87633),n="ArrayBuffer",c=s[n];a({global:!0,constructor:!0,forced:r[n]!==c},{ArrayBuffer:c}),o(n)},11745:function(t,e,i){var a=i(46518),r=i(27476),s=i(79039),o=i(66346),n=i(28551),c=i(35610),h=i(18014),d=o.ArrayBuffer,l=o.DataView,g=l.prototype,p=r(d.prototype.slice),f=r(g.getUint8),m=r(g.setUint8);a({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:s(function(){return!new d(2).slice(1,void 0).byteLength})},{slice:function(t,e){if(p&&void 0===e)return p(n(this),t);for(var i=n(this).byteLength,a=c(t,i),r=c(void 0===e?i:e,i),s=new d(h(r-a)),o=new l(this),g=new l(s),_=0;a<r;)m(g,_++,f(o,a++));return s}})}}]);
//# sourceMappingURL=43195.dad91ed1ae0695a3.js.map