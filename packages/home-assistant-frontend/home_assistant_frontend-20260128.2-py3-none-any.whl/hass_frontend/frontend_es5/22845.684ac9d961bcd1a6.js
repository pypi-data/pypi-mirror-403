"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["22845"],{66033:function(e,t,i){i.d(t,{L:function(){return a}});const a=(e,t)=>{const i=e.floor_id;return{area:e,floor:(i?t[i]:void 0)||null}}},66086:function(e,t,i){i.a(e,async function(e,t){try{i(74423),i(18111),i(22489),i(61701),i(3362),i(62953);var a=i(40445),s=i(96196),o=i(77845),n=i(22786),r=i(1087),h=i(65522),l=i(55931),c=i(66033),d=i(49852),p=i(53641),u=i(65063),g=i(34023),_=(i(75064),i(38508)),y=(i(26300),i(67094),e([_]));_=(y.then?(await y)():y)[0];let v,m,b,f,$,C,k,w=e=>e;const M="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",A="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",V="___ADD_NEW___";class L extends s.WF{async open(){var e;await this.updateComplete,await(null===(e=this._picker)||void 0===e?void 0:e.open())}render(){var e;const t=null!==(e=this.label)&&void 0!==e?e:this.hass.localize("ui.components.area-picker.area"),i=this._computeValueRenderer(this.hass.areas);let a=t;if(this.value&&t){const e=this.hass.areas[this.value];if(e){const{floor:t}=(0,c.L)(e,this.hass.floors);t&&(a=void 0)}}return(0,s.qy)(v||(v=w` <ha-generic-picker .hass="${0}" .autofocus="${0}" .label="${0}" .helper="${0}" .notFoundLabel="${0}" .emptyLabel="${0}" .disabled="${0}" .required="${0}" .value="${0}" .getItems="${0}" .getAdditionalItems="${0}" .valueRenderer="${0}" .addButtonLabel="${0}" .searchKeys="${0}" .unknownItemText="${0}" @value-changed="${0}"> </ha-generic-picker> `),this.hass,this.autofocus,a,this.helper,this._notFoundLabel,this.hass.localize("ui.components.area-picker.no_areas"),this.disabled,this.required,this.value,this._getItems,this._getAdditionalItems,i,this.addButtonLabel,d.P,this.hass.localize("ui.components.area-picker.unknown"),this._valueChanged)}_valueChanged(e){e.stopPropagation();const t=e.detail.value;if(t){if(t.startsWith(V)){this.hass.loadFragmentTranslation("config");const e=t.substring(V.length);return void(0,g.J)(this,{suggestedName:e,createEntry:async e=>{try{const t=await(0,p.L3)(this.hass,e);this._setValue(t.area_id)}catch(t){(0,u.showAlertDialog)(this,{title:this.hass.localize("ui.components.area-picker.failed_create_area"),text:t.message})}}})}this._setValue(t)}else this._setValue(void 0)}_setValue(e){this.value=e,(0,r.r)(this,"value-changed",{value:e}),(0,r.r)(this,"change")}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._getAreasMemoized=(0,n.A)(d.j),this._computeValueRenderer=(0,n.A)(e=>e=>{const t=this.hass.areas[e];if(!t)return(0,s.qy)(m||(m=w` <ha-svg-icon slot="start" .path="${0}"></ha-svg-icon> <span slot="headline">${0}</span> `),A,t);const{floor:i}=(0,c.L)(t,this.hass.floors),a=t?(0,h.A)(t):void 0,o=i?(0,l.X)(i):void 0,n=t.icon;return(0,s.qy)(b||(b=w` ${0} <span slot="headline">${0}</span> ${0} `),n?(0,s.qy)(f||(f=w`<ha-icon slot="start" .icon="${0}"></ha-icon>`),n):(0,s.qy)($||($=w`<ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>`),A),a,o?(0,s.qy)(C||(C=w`<span slot="supporting-text">${0}</span>`),o):s.s6)}),this._getItems=()=>this._getAreasMemoized(this.hass.areas,this.hass.floors,this.hass.devices,this.hass.entities,this.hass.states,this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeAreas),this._allAreaNames=(0,n.A)(e=>Object.values(e).map(e=>{var t;return null===(t=(0,h.A)(e))||void 0===t?void 0:t.toLowerCase()}).filter(Boolean)),this._getAdditionalItems=e=>{if(this.noAdd)return[];const t=this._allAreaNames(this.hass.areas);return e&&!t.includes(e.toLowerCase())?[{id:V+e,primary:this.hass.localize("ui.components.area-picker.add_new_sugestion",{name:e}),icon_path:M}]:[{id:V,primary:this.hass.localize("ui.components.area-picker.add_new"),icon_path:M}]},this._notFoundLabel=e=>this.hass.localize("ui.components.area-picker.no_match",{term:(0,s.qy)(k||(k=w`<b>‘${0}’</b>`),e)})}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],L.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)()],L.prototype,"label",void 0),(0,a.Cg)([(0,o.MZ)()],L.prototype,"value",void 0),(0,a.Cg)([(0,o.MZ)()],L.prototype,"helper",void 0),(0,a.Cg)([(0,o.MZ)()],L.prototype,"placeholder",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,attribute:"no-add"})],L.prototype,"noAdd",void 0),(0,a.Cg)([(0,o.MZ)({type:Array,attribute:"include-domains"})],L.prototype,"includeDomains",void 0),(0,a.Cg)([(0,o.MZ)({type:Array,attribute:"exclude-domains"})],L.prototype,"excludeDomains",void 0),(0,a.Cg)([(0,o.MZ)({type:Array,attribute:"include-device-classes"})],L.prototype,"includeDeviceClasses",void 0),(0,a.Cg)([(0,o.MZ)({type:Array,attribute:"exclude-areas"})],L.prototype,"excludeAreas",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],L.prototype,"deviceFilter",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],L.prototype,"entityFilter",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean})],L.prototype,"disabled",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean})],L.prototype,"required",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"add-button-label"})],L.prototype,"addButtonLabel",void 0),(0,a.Cg)([(0,o.P)("ha-generic-picker")],L.prototype,"_picker",void 0),L=(0,a.Cg)([(0,o.EM)("ha-area-picker")],L),t()}catch(v){t(v)}})},59174:function(e,t,i){i.a(e,async function(e,t){try{var a=i(40445),s=i(96196),o=i(77845),n=i(3890),r=i(85694),h=i(44144),l=(i(88945),e([r]));r=(l.then?(await l)():l)[0];let c,d,p,u,g,_,y,v=e=>e;class m extends s.WF{render(){if(this.icon)return(0,s.qy)(c||(c=v`<ha-icon .icon="${0}"></ha-icon>`),this.icon);if(!this.domain)return s.s6;if(!this.hass)return this._renderFallback();const e=(0,r._4)(this.hass,this.domain,this.deviceClass,this.state).then(e=>e?(0,s.qy)(d||(d=v`<ha-icon .icon="${0}"></ha-icon>`),e):this._renderFallback());return(0,s.qy)(p||(p=v`${0}`),(0,n.T)(e))}_renderFallback(){if(this.domain&&this.domain in r.l)return(0,s.qy)(u||(u=v` <ha-svg-icon .path="${0}"></ha-svg-icon> `),r.l[this.domain]);if(this.brandFallback){var e;const t=(0,h.MR)({domain:this.domain,type:"icon",darkOptimized:null===(e=this.hass.themes)||void 0===e?void 0:e.darkMode});return(0,s.qy)(g||(g=v` <img alt="" src="${0}" crossorigin="anonymous" referrerpolicy="no-referrer"> `),t)}return(0,s.qy)(_||(_=v`<ha-svg-icon .path="${0}"></ha-svg-icon>`),r.lW)}}m.styles=(0,s.AH)(y||(y=v`img{width:var(--mdc-icon-size,24px)}`)),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)()],m.prototype,"domain",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"deviceClass",void 0),(0,a.Cg)([(0,o.MZ)({attribute:!1})],m.prototype,"state",void 0),(0,a.Cg)([(0,o.MZ)()],m.prototype,"icon",void 0),(0,a.Cg)([(0,o.MZ)({attribute:"brand-fallback",type:Boolean})],m.prototype,"brandFallback",void 0),m=(0,a.Cg)([(0,o.EM)("ha-domain-icon")],m),t()}catch(c){t(c)}})},49852:function(e,t,i){i.d(t,{P:function(){return l},j:function(){return h}});i(74423),i(18111),i(81148),i(22489),i(61701),i(13579);var a=i(65522),s=i(71727),o=i(55931),n=i(66033),r=i(28989);const h=(e,t,i,h,l,c,d,p,u,g,_,y="")=>{let v,m,b={};const f=Object.values(e),$=Object.values(i),C=Object.values(h);(c||d||p||u||g)&&(b=(0,r.g2)(C),v=$,m=C.filter(e=>e.area_id),c&&(v=v.filter(e=>{const t=b[e.id];return!(!t||!t.length)&&b[e.id].some(e=>c.includes((0,s.m)(e.entity_id)))}),m=m.filter(e=>c.includes((0,s.m)(e.entity_id)))),d&&(v=v.filter(e=>{const t=b[e.id];return!t||!t.length||C.every(e=>!d.includes((0,s.m)(e.entity_id)))}),m=m.filter(e=>!d.includes((0,s.m)(e.entity_id)))),p&&(v=v.filter(e=>{const t=b[e.id];return!(!t||!t.length)&&b[e.id].some(e=>{const t=l[e.entity_id];return!!t&&(t.attributes.device_class&&p.includes(t.attributes.device_class))})}),m=m.filter(e=>{const t=l[e.entity_id];return t.attributes.device_class&&p.includes(t.attributes.device_class)})),u&&(v=v.filter(e=>u(e))),g&&(v=v.filter(e=>{const t=b[e.id];return!(!t||!t.length)&&b[e.id].some(e=>{const t=l[e.entity_id];return!!t&&g(t)})}),m=m.filter(e=>{const t=l[e.entity_id];return!!t&&g(t)})));let k,w=f;v&&(k=v.filter(e=>e.area_id).map(e=>e.area_id)),m&&(k=(null!=k?k:[]).concat(m.filter(e=>e.area_id).map(e=>e.area_id))),k&&(w=w.filter(e=>k.includes(e.area_id))),_&&(w=w.filter(e=>!_.includes(e.area_id)));return w.map(e=>{const{floor:i}=(0,n.L)(e,t),s=i?(0,o.X)(i):void 0,r=(0,a.A)(e);return{id:`${y}${e.area_id}`,primary:r||e.area_id,secondary:s,icon:e.icon||void 0,icon_path:e.icon?void 0:"M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",search_labels:{areaId:e.area_id,aliases:e.aliases.join(" ")}}})},l=[{name:"primary",weight:10},{name:"search_labels.aliases",weight:8},{name:"secondary",weight:6},{name:"search_labels.domain",weight:4},{name:"search_labels.areaId",weight:2}]},16536:function(e,t,i){i.a(e,async function(e,t){try{i(74423),i(18111),i(22489),i(61701),i(3362),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(62953);var a=i(40445),s=i(96196),o=i(77845),n=i(22786),r=i(1087),h=i(38508),l=(i(67094),i(76570)),c=i(54706),d=i(90986),p=e([h]);h=(p.then?(await p)():p)[0];let u,g,_,y,v,m,b=e=>e;const f="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",$="M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z",C="___ADD_NEW___";class k extends((0,c.E)(s.WF)){async open(){var e;await this.updateComplete,await(null===(e=this._picker)||void 0===e?void 0:e.open())}hassSubscribe(){return[(0,l.Ar)(this.hass.connection,this.scope,e=>{this._categories=e})]}render(){const e=this._computeValueRenderer(this._categories);return(0,s.qy)(u||(u=b` <ha-generic-picker .hass="${0}" .autofocus="${0}" .label="${0}" .placeholder="${0}" .value="${0}" .notFoundLabel="${0}" .emptyLabel="${0}" .getItems="${0}" .getAdditionalItems="${0}" .valueRenderer="${0}" .unknownItemText="${0}" @value-changed="${0}"> </ha-generic-picker> `),this.hass,this.autofocus,this.label,this.placeholder,this.value,this._notFoundLabel,this.hass.localize("ui.components.category-picker.no_categories"),this._getItems,this._getAdditionalItems,e,this.hass.localize("ui.components.category-picker.unknown"),this._valueChanged)}_valueChanged(e){e.stopPropagation();const t=e.detail.value;if(t){if(t.startsWith(C)){this.hass.loadFragmentTranslation("config");const e=t.substring(C.length);return void(0,d.S)(this,{scope:this.scope,suggestedName:e,createEntry:async e=>{const t=await(0,l.s_)(this.hass,this.scope,e);return this._setValue(t.category_id),t}})}this._setValue(t)}else this._setValue(void 0)}_setValue(e){this.value=e,setTimeout(()=>{(0,r.r)(this,"value-changed",{value:e}),(0,r.r)(this,"change")},0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this.hassSubscribeRequiredHostProps=["scope"],this._categoryMap=(0,n.A)(e=>e?new Map(e.map(e=>[e.category_id,e])):new Map),this._computeValueRenderer=(0,n.A)(e=>t=>{const i=this._categoryMap(e).get(t);return i?(0,s.qy)(_||(_=b` ${0} <span slot="headline">${0}</span> `),i.icon?(0,s.qy)(y||(y=b`<ha-icon slot="start" .icon="${0}"></ha-icon>`),i.icon):(0,s.qy)(v||(v=b`<ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>`),$),i.name):(0,s.qy)(g||(g=b` <ha-svg-icon slot="start" .path="${0}"></ha-svg-icon> <span slot="headline">${0}</span> `),$,t)}),this._getCategories=(0,n.A)(e=>{if(!e)return;return e.map(e=>({id:e.category_id,primary:e.name,icon:e.icon||void 0,icon_path:e.icon?void 0:$,sorting_label:e.name}))}),this._getItems=()=>this._getCategories(this._categories),this._allCategoryNames=(0,n.A)(e=>e?[...new Set(e.map(e=>e.name.toLowerCase()).filter(Boolean))]:[]),this._getAdditionalItems=e=>{if(this.noAdd)return[];const t=this._allCategoryNames(this._categories);return e&&!t.includes(e.toLowerCase())?[{id:C+e,primary:this.hass.localize("ui.components.category-picker.add_new_sugestion",{name:e}),icon_path:f}]:[{id:C,primary:this.hass.localize("ui.components.category-picker.add_new"),icon_path:f}]},this._notFoundLabel=e=>this.hass.localize("ui.components.category-picker.no_match",{term:(0,s.qy)(m||(m=b`<b>‘${0}’</b>`),e)})}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],k.prototype,"hass",void 0),(0,a.Cg)([(0,o.MZ)()],k.prototype,"scope",void 0),(0,a.Cg)([(0,o.MZ)()],k.prototype,"label",void 0),(0,a.Cg)([(0,o.MZ)()],k.prototype,"value",void 0),(0,a.Cg)([(0,o.MZ)()],k.prototype,"helper",void 0),(0,a.Cg)([(0,o.MZ)()],k.prototype,"placeholder",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,attribute:"no-add"})],k.prototype,"noAdd",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean})],k.prototype,"disabled",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean})],k.prototype,"required",void 0),(0,a.Cg)([(0,o.wk)()],k.prototype,"_categories",void 0),(0,a.Cg)([(0,o.P)("ha-generic-picker")],k.prototype,"_picker",void 0),k=(0,a.Cg)([(0,o.EM)("ha-category-picker")],k),t()}catch(u){t(u)}})},63254:function(e,t,i){i.a(e,async function(e,a){try{i.r(t);i(89463),i(74423),i(3362),i(42762),i(62953);var s=i(40445),o=i(96196),n=i(77845),r=i(1087),h=(i(34296),i(5745),i(38962),i(66086)),l=i(59174),c=i(64138),d=i(50176),p=(i(63891),i(67094),i(75709),i(45331)),u=i(18350),g=(i(93444),i(16536)),_=i(14503),y=i(36215),v=i(97268),m=e([h,l,c,d,p,u,g,y]);[h,l,c,d,p,u,g,y]=m.then?(await m)():m;let b,f,$,C,k,w,M,A,V,L,q=e=>e;const Z="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",H={name:!0,categories:!0,labels:!0};class O extends o.WF{showDialog(e){var t,i,a;this._open=!0,this._params=e,this._error=!1,this._newIcon=e.config.icon,this._newName=e.config.name||this.hass.localize(`ui.panel.config.${this._params.domain}.editor.default_name`),this._entryUpdates=e.entityRegistryUpdate||{area:(null===(t=e.entityRegistryEntry)||void 0===t?void 0:t.area_id)||"",labels:(null===(i=e.entityRegistryEntry)||void 0===i?void 0:i.labels)||[],category:(null===(a=e.entityRegistryEntry)||void 0===a||null===(a=a.categories)||void 0===a?void 0:a[e.domain])||""},this._visibleOptionals=[this._entryUpdates.category?"category":"",this._entryUpdates.labels.length>0?"labels":""].filter(Boolean)}closeDialog(){this._open=!1,this._error=!1}_dialogClosed(){var e,t;this._open=!1,this._error=!1,null===(e=(t=this._params).onClose)||void 0===e||e.call(t),this._visibleOptionals=[],(0,r.r)(this,"dialog-closed",{dialog:this.localName})}_renderOptionalChip(e,t){return this._visibleOptionals.includes(e)?o.s6:(0,o.qy)(b||(b=q` <ha-assist-chip id="${0}" @click="${0}" label="${0}"> <ha-svg-icon slot="icon" .path="${0}"></ha-svg-icon> </ha-assist-chip> `),e,this._addOptional,t,Z)}_renderInputs(){return this._params.hideInputs?o.s6:(0,o.qy)(f||(f=q` <ha-textfield dialogInitialFocus .value="${0}" .placeholder="${0}" .label="${0}" required type="string" @input="${0}"></ha-textfield> <ha-icon-picker .hass="${0}" .label="${0}" .value="${0}" @value-changed="${0}"> <ha-domain-icon slot="start" domain="${0}" .hass="${0}"> </ha-domain-icon> </ha-icon-picker> <ha-area-picker id="area" .hass="${0}" .value="${0}" @value-changed="${0}"></ha-area-picker> ${0} ${0} <ha-chip-set> ${0} ${0} </ha-chip-set> `),this._newName,this.hass.localize(`ui.panel.config.${this._params.domain}.editor.default_name`),this.hass.localize("ui.panel.config.scene.editor.name"),this._valueChanged,this.hass,this.hass.localize("ui.panel.config.scene.editor.icon"),this._newIcon,this._iconChanged,this._params.domain,this.hass,this.hass,this._entryUpdates.area,this._registryEntryChanged,this._visibleOptionals.includes("category")?(0,o.qy)($||($=q` <ha-category-picker id="category" .hass="${0}" .scope="${0}" .label="${0}" .value="${0}" @value-changed="${0}"></ha-category-picker>`),this.hass,this._params.domain,this.hass.localize("ui.components.category-picker.category"),this._entryUpdates.category,this._registryEntryChanged):o.s6,this._visibleOptionals.includes("labels")?(0,o.qy)(C||(C=q` <ha-labels-picker id="labels" .hass="${0}" .value="${0}" @value-changed="${0}"></ha-labels-picker>`),this.hass,this._entryUpdates.labels,this._registryEntryChanged):o.s6,this._renderOptionalChip("category",this.hass.localize("ui.panel.config.scene.editor.dialog.add_category")),this._renderOptionalChip("labels",this.hass.localize("ui.panel.config.scene.editor.dialog.add_labels")))}render(){if(!this._params)return o.s6;const e=this.hass.localize(this._params.config.id?"ui.panel.config.scene.editor.rename":"ui.common.save");return(0,o.qy)(k||(k=q` <ha-wa-dialog .hass="${0}" .open="${0}" header-title="${0}" @closed="${0}"> ${0} ${0} ${0} ${0} <ha-dialog-footer slot="footer"> ${0} <ha-button slot="secondaryAction" appearance="plain" @click="${0}"> ${0} </ha-button> <ha-button slot="primaryAction" @click="${0}"> ${0} </ha-button> </ha-dialog-footer> </ha-wa-dialog> `),this.hass,this._open,this._params.title||e,this._dialogClosed,this._params.hideInputs?o.s6:(0,o.qy)(w||(w=q` <ha-suggest-with-ai-button slot="headerActionItems" .hass="${0}" .generateTask="${0}" @suggestion="${0}"></ha-suggest-with-ai-button>`),this.hass,this._generateTask,this._handleSuggestion),this._error?(0,o.qy)(M||(M=q`<ha-alert alert-type="error">${0}</ha-alert>`),this.hass.localize("ui.panel.config.scene.editor.missing_name")):"",this._params.description?(0,o.qy)(A||(A=q`<p>${0}</p>`),this._params.description):o.s6,this._renderInputs(),this._params.onDiscard?(0,o.qy)(V||(V=q` <ha-button slot="secondaryAction" variant="danger" appearance="plain" @click="${0}"> ${0} </ha-button> `),this._handleDiscard,this.hass.localize("ui.common.dont_save")):o.s6,this.closeDialog,this.hass.localize("ui.common.cancel"),this._save,this.hass.localize(this._params.config.id&&!this._params.onDiscard?"ui.panel.config.scene.editor.rename":"ui.common.save"))}_addOptional(e){e.stopPropagation();const t=e.target.id;this._visibleOptionals=[...this._visibleOptionals,t]}_registryEntryChanged(e){e.stopPropagation();const t=e.target.id,i=e.detail.value;this._entryUpdates=Object.assign(Object.assign({},this._entryUpdates),{},{[t]:i})}_iconChanged(e){e.stopPropagation(),this._newIcon=e.detail.value||void 0}_valueChanged(e){e.stopPropagation(),this._newName=e.target.value,this._error&&this._newName.trim()&&(this._error=!1)}_handleDiscard(){var e,t;null===(e=(t=this._params).onDiscard)||void 0===e||e.call(t),this.closeDialog()}async _handleSuggestion(e){var t;const i=e.detail,a=await(0,y.Fn)(this.hass.connection,"scene",i,H);a.name&&(this._newName=a.name,this._error&&this._newName.trim()&&(this._error=!1)),a.category&&(this._entryUpdates=Object.assign(Object.assign({},this._entryUpdates),{},{category:a.category}),this._visibleOptionals.includes("category")||(this._visibleOptionals=[...this._visibleOptionals,"category"])),null!==(t=a.labels)&&void 0!==t&&t.length&&(this._entryUpdates=Object.assign(Object.assign({},this._entryUpdates),{},{labels:a.labels}),this._visibleOptionals.includes("labels")||(this._visibleOptionals=[...this._visibleOptionals,"labels"]))}async _save(){this._newName?(await this._params.updateConfig(Object.assign(Object.assign({},this._params.config),{},{name:this._newName,icon:this._newIcon}),this._entryUpdates),this.closeDialog()):this._error=!0}static get styles(){return[_.nA,(0,o.AH)(L||(L=q`ha-area-picker,ha-category-picker,ha-icon-picker,ha-labels-picker,ha-textfield{display:block}ha-area-picker,ha-category-picker,ha-chip-set:has(> ha-assist-chip),ha-icon-picker,ha-labels-picker{margin-top:var(--ha-space-4)}ha-alert{display:block;margin-bottom:var(--ha-space-4)}ha-suggest-with-ai-button{margin:var(--ha-space-2) var(--ha-space-4)}`))]}constructor(...e){super(...e),this._open=!1,this._error=!1,this._visibleOptionals=[],this._generateTask=async()=>(0,y.q3)(this.hass.connection,this.hass.language,"scene",this._params.config,await(0,v.m)(this.hass.connection,this.hass.states,"scene"),H)}}(0,s.Cg)([(0,n.MZ)({attribute:!1})],O.prototype,"hass",void 0),(0,s.Cg)([(0,n.wk)()],O.prototype,"_open",void 0),(0,s.Cg)([(0,n.wk)()],O.prototype,"_error",void 0),(0,s.Cg)([(0,n.wk)()],O.prototype,"_visibleOptionals",void 0),(0,s.Cg)([(0,n.wk)()],O.prototype,"_entryUpdates",void 0),(0,s.Cg)([(0,n.wk)()],O.prototype,"_newName",void 0),O=(0,s.Cg)([(0,n.EM)("ha-dialog-scene-save")],O),a()}catch(b){a(b)}})},54743:function(e,t,i){var a=i(46518),s=i(44576),o=i(66346),n=i(87633),r="ArrayBuffer",h=o[r];a({global:!0,constructor:!0,forced:s[r]!==h},{ArrayBuffer:h}),n(r)},11745:function(e,t,i){var a=i(46518),s=i(27476),o=i(79039),n=i(66346),r=i(28551),h=i(35610),l=i(18014),c=n.ArrayBuffer,d=n.DataView,p=d.prototype,u=s(c.prototype.slice),g=s(p.getUint8),_=s(p.setUint8);a({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o(function(){return!new c(2).slice(1,void 0).byteLength})},{slice:function(e,t){if(u&&void 0===t)return u(r(this),e);for(var i=r(this).byteLength,a=h(e,i),s=h(void 0===t?i:t,i),o=new c(l(s-a)),n=new d(this),p=new d(o),y=0;a<s;)_(p,y++,g(n,a++));return o}})}}]);
//# sourceMappingURL=22845.684ac9d961bcd1a6.js.map