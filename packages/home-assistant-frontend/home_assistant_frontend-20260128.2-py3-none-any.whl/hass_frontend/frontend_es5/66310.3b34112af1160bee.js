"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["66310"],{63130:function(t,i,e){e.d(i,{l:function(){return s}});e(3362);const s=async(t,i)=>{if(navigator.clipboard)try{return void(await navigator.clipboard.writeText(t))}catch(o){}const e=null!=i?i:document.body,s=document.createElement("textarea");s.value=t,e.appendChild(s),s.select(),document.execCommand("copy"),e.removeChild(s)}},60543:function(t,i,e){e.r(i),e.d(i,{HaQrCode:function(){return m}});e(18111),e(61701),e(62953);var s=e(40445),o=e(96196),a=e(77845),r=e(81298),n=(e(38962),e(79468));let c,l,h,d=t=>t;class m extends o.WF{willUpdate(t){super.willUpdate(t),(t.has("data")||t.has("scale")||t.has("width")||t.has("margin")||t.has("maskPattern")||t.has("errorCorrectionLevel"))&&this._error&&(this._error=void 0)}updated(t){const i=this._canvas;if(i&&this.data&&(t.has("data")||t.has("scale")||t.has("width")||t.has("margin")||t.has("maskPattern")||t.has("errorCorrectionLevel")||t.has("centerImage"))){const t=getComputedStyle(this),e=t.getPropertyValue("--rgb-primary-text-color"),s=t.getPropertyValue("--rgb-card-background-color"),o=(0,n.v2)(e.split(",").map(t=>parseInt(t,10))),a=(0,n.v2)(s.split(",").map(t=>parseInt(t,10)));if(r.toCanvas(i,this.data,{errorCorrectionLevel:this.errorCorrectionLevel||(this.centerImage?"Q":"M"),width:this.width,scale:this.scale,margin:this.margin,maskPattern:this.maskPattern,color:{light:a,dark:o}}).catch(t=>{this._error=t.message}),this.centerImage){const t=this._canvas.getContext("2d"),e=new Image;e.src=this.centerImage,e.onload=()=>{null==t||t.drawImage(e,.375*i.width,.375*i.height,i.width/4,i.height/4)}}}}render(){return this.data?this._error?(0,o.qy)(c||(c=d`<ha-alert alert-type="error">${0}</ha-alert>`),this._error):(0,o.qy)(l||(l=d`<canvas></canvas>`)):o.s6}constructor(...t){super(...t),this.errorCorrectionLevel="medium",this.width=4,this.scale=4,this.margin=4}}m.styles=(0,o.AH)(h||(h=d`:host{display:block}`)),(0,s.Cg)([(0,a.MZ)()],m.prototype,"data",void 0),(0,s.Cg)([(0,a.MZ)({attribute:"error-correction-level"})],m.prototype,"errorCorrectionLevel",void 0),(0,s.Cg)([(0,a.MZ)({type:Number})],m.prototype,"width",void 0),(0,s.Cg)([(0,a.MZ)({type:Number})],m.prototype,"scale",void 0),(0,s.Cg)([(0,a.MZ)({type:Number})],m.prototype,"margin",void 0),(0,s.Cg)([(0,a.MZ)({attribute:!1,type:Number})],m.prototype,"maskPattern",void 0),(0,s.Cg)([(0,a.MZ)({attribute:"center-image"})],m.prototype,"centerImage",void 0),(0,s.Cg)([(0,a.wk)()],m.prototype,"_error",void 0),(0,s.Cg)([(0,a.P)("canvas")],m.prototype,"_canvas",void 0),m=(0,s.Cg)([(0,a.EM)("ha-qr-code")],m)},50543:function(t,i,e){e.a(t,async function(t,s){try{e.r(i);e(3362);var o=e(40445),a=e(96196),r=e(77845),n=e(1087),c=e(63130),l=e(18350),h=e(72554),d=(e(60543),e(65829)),m=e(95350),p=e(20559),g=e(14503),u=e(44144),v=t([l,d]);[l,d]=v.then?(await v)():v;let _,y,f,w,b,C,x,$=t=>t;const k="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z";class L extends a.WF{async showDialog(t){this.device_id=t.device_id}render(){var t;return this.device_id?(0,a.qy)(_||(_=$` <ha-dialog open @closed="${0}" .heading="${0}"> ${0} </ha-dialog> `),this.closeDialog,(0,h.l)(this.hass,this.hass.localize("ui.panel.config.matter.open_commissioning_window.title")),this._commissionParams?(0,a.qy)(y||(y=$` <p> ${0} <br> ${0} </p> <div class="sharing-code-container"> <div class="sharing-code"> <img crossorigin="anonymous" referrerpolicy="no-referrer" alt="${0}" src="${0}"> <ha-qr-code .data="${0}" errorCorrectionLevel="quartile" scale="6" margin="1"></ha-qr-code> <span class="code">${0}-${0}-${0}</span> </div> </div> <ha-button slot="primaryAction" @click="${0}"> ${0} </ha-button> `),this.hass.localize("ui.panel.config.matter.open_commissioning_window.success"),this.hass.localize("ui.panel.config.matter.open_commissioning_window.scan_code"),(0,m.p$)(this.hass.localize,"matter"),(0,u.MR)({domain:"matter",type:"logo",darkOptimized:null===(t=this.hass.themes)||void 0===t?void 0:t.darkMode}),this._commissionParams.setup_qr_code,this._commissionParams.setup_manual_code.substring(0,4),this._commissionParams.setup_manual_code.substring(4,7),this._commissionParams.setup_manual_code.substring(7),this._copyCode,this.hass.localize("ui.panel.config.matter.open_commissioning_window.copy_code")):"started"===this._status?(0,a.qy)(f||(f=$` <div class="flex-container"> <ha-spinner></ha-spinner> <div class="status"> <p> <b> ${0} </b> </p> </div> </div> <ha-button slot="primaryAction" @click="${0}"> ${0} </ha-button> `),this.hass.localize("ui.panel.config.matter.open_commissioning_window.in_progress"),this.closeDialog,this.hass.localize("ui.common.close")):"failed"===this._status?(0,a.qy)(w||(w=$` <div class="flex-container"> <ha-svg-icon .path="${0}" class="failed"></ha-svg-icon> <div class="status"> <p> ${0} </p> </div> </div> <ha-button slot="primaryAction" @click="${0}"> ${0} </ha-button> `),k,this.hass.localize("ui.panel.config.matter.open_commissioning_window.failed"),this.closeDialog,this.hass.localize("ui.common.close")):(0,a.qy)(b||(b=$` <p> ${0} </p> <p class="note"> ${0} </p> <ha-button slot="primaryAction" @click="${0}"> ${0} </ha-button> `),this.hass.localize("ui.panel.config.matter.open_commissioning_window.description",{startCommissioning:(0,a.qy)(C||(C=$`<b>${0}</b>`),this.hass.localize("ui.panel.config.matter.open_commissioning_window.start_commissioning"))}),this.hass.localize("ui.panel.config.matter.open_commissioning_window.prevent_misuse_description"),this._start,this.hass.localize("ui.panel.config.matter.open_commissioning_window.start_commissioning"))):a.s6}async _start(){if(this.hass){this._status="started",this._commissionParams=void 0;try{this._commissionParams=await(0,p.nc)(this.hass,this.device_id)}catch(t){this._status="failed"}}}async _copyCode(){this._commissionParams&&(await(0,c.l)(this._commissionParams.setup_manual_code),this.closeDialog())}closeDialog(){this.device_id=void 0,this._status=void 0,this._commissionParams=void 0,(0,n.r)(this,"dialog-closed",{dialog:this.localName})}static get styles(){return[g.nA,(0,a.AH)(x||(x=$`.success{color:var(--success-color)}.failed{color:var(--error-color)}.flex-container{display:flex;align-items:center}.stages{margin-top:16px}.stage ha-svg-icon{width:16px;height:16px}.stage{padding:8px}ha-svg-icon{width:68px;height:48px}ha-qr-code{text-align:center}.flex-container ha-spinner,.flex-container ha-svg-icon{margin-right:20px}.sharing-code-container{display:flex;justify-content:center;padding-top:16px}.sharing-code{display:flex;flex-direction:column;align-items:center;border:2px solid;border-radius:var(--ha-border-radius-xl);padding:16px}.sharing-code img{width:160px;margin-bottom:8px}.code{font-family:var(--ha-font-family-code)}.note{color:var(--secondary-text-color);font-size:.9em}`))]}}(0,o.Cg)([(0,r.MZ)({attribute:!1})],L.prototype,"hass",void 0),(0,o.Cg)([(0,r.wk)()],L.prototype,"device_id",void 0),(0,o.Cg)([(0,r.wk)()],L.prototype,"_status",void 0),(0,o.Cg)([(0,r.wk)()],L.prototype,"_commissionParams",void 0),L=(0,o.Cg)([(0,r.EM)("dialog-matter-open-commissioning-window")],L),s()}catch(_){s(_)}})},54743:function(t,i,e){var s=e(46518),o=e(44576),a=e(66346),r=e(87633),n="ArrayBuffer",c=a[n];s({global:!0,constructor:!0,forced:o[n]!==c},{ArrayBuffer:c}),r(n)},11745:function(t,i,e){var s=e(46518),o=e(27476),a=e(79039),r=e(66346),n=e(28551),c=e(35610),l=e(18014),h=r.ArrayBuffer,d=r.DataView,m=d.prototype,p=o(h.prototype.slice),g=o(m.getUint8),u=o(m.setUint8);s({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:a(function(){return!new h(2).slice(1,void 0).byteLength})},{slice:function(t,i){if(p&&void 0===i)return p(n(this),t);for(var e=n(this).byteLength,s=c(t,e),o=c(void 0===i?e:i,e),a=new h(l(o-s)),r=new d(this),m=new d(a),v=0;s<o;)u(m,v++,g(r,s++));return a}})}}]);
//# sourceMappingURL=66310.3b34112af1160bee.js.map