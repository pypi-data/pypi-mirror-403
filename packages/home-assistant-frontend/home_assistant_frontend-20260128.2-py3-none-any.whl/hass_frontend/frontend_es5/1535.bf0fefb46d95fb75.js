"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["1535"],{77122:function(e,t,i){i.a(e,async function(e,t){try{i(74423),i(18111),i(22489),i(61701),i(3362),i(62953);var s=i(40445),a=i(96196),n=i(77845),o=i(22786),r=i(1087),l=i(78649),d=(i(85938),i(82474)),c=e([d]);d=(c.then?(await c)():c)[0];let h,u,p,y,v,m=e=>e;const g="M21 11H3V9H21V11M21 13H3V15H21V13Z";class b extends a.WF{render(){if(!this.hass)return a.s6;const e=this._currentEntities;return(0,a.qy)(h||(h=m` ${0} <ha-sortable .disabled="${0}" handle-selector=".entity-handle" @item-moved="${0}"> <div class="list"> ${0} </div> </ha-sortable> <div> <ha-entity-picker .hass="${0}" .includeDomains="${0}" .excludeDomains="${0}" .includeEntities="${0}" .excludeEntities="${0}" .includeDeviceClasses="${0}" .includeUnitOfMeasurement="${0}" .entityFilter="${0}" .placeholder="${0}" .helper="${0}" .disabled="${0}" .createDomains="${0}" .required="${0}" @value-changed="${0}" .addButton="${0}"></ha-entity-picker> </div> `),this.label?(0,a.qy)(u||(u=m`<label>${0}</label>`),this.label):a.s6,!this.reorder||this.disabled,this._entityMoved,e.map(e=>(0,a.qy)(p||(p=m` <div class="entity"> <ha-entity-picker .curValue="${0}" .hass="${0}" .includeDomains="${0}" .excludeDomains="${0}" .includeEntities="${0}" .excludeEntities="${0}" .includeDeviceClasses="${0}" .includeUnitOfMeasurement="${0}" .entityFilter="${0}" .value="${0}" .disabled="${0}" .createDomains="${0}" @value-changed="${0}"></ha-entity-picker> ${0} </div> `),e,this.hass,this.includeDomains,this.excludeDomains,this.includeEntities,this.excludeEntities,this.includeDeviceClasses,this.includeUnitOfMeasurement,this.entityFilter,e,this.disabled,this.createDomains,this._entityChanged,this.reorder?(0,a.qy)(y||(y=m` <ha-svg-icon class="entity-handle" .path="${0}"></ha-svg-icon> `),g):a.s6)),this.hass,this.includeDomains,this.excludeDomains,this.includeEntities,this._excludeEntities(this.value,this.excludeEntities),this.includeDeviceClasses,this.includeUnitOfMeasurement,this.entityFilter,this.placeholder,this.helper,this.disabled,this.createDomains,this.required&&!e.length,this._addEntity,e.length>0)}_entityMoved(e){e.stopPropagation();const{oldIndex:t,newIndex:i}=e.detail,s=this._currentEntities,a=s[t],n=[...s];n.splice(t,1),n.splice(i,0,a),this._updateEntities(n)}get _currentEntities(){return this.value||[]}async _updateEntities(e){this.value=e,(0,r.r)(this,"value-changed",{value:e})}_entityChanged(e){e.stopPropagation();const t=e.currentTarget.curValue,i=e.detail.value;if(i===t||void 0!==i&&!(0,l.n)(i))return;const s=this._currentEntities;i&&!s.includes(i)?this._updateEntities(s.map(e=>e===t?i:e)):this._updateEntities(s.filter(e=>e!==t))}async _addEntity(e){e.stopPropagation();const t=e.detail.value;if(!t)return;if(e.currentTarget.value="",!t)return;const i=this._currentEntities;i.includes(t)||this._updateEntities([...i,t])}constructor(...e){super(...e),this.disabled=!1,this.required=!1,this.reorder=!1,this._excludeEntities=(0,o.A)((e,t)=>void 0===e?t:[...t||[],...e])}}b.styles=(0,a.AH)(v||(v=m`div{margin-top:8px}label{display:block;margin:0 0 8px}.entity{display:flex;flex-direction:row;align-items:center}.entity ha-entity-picker{flex:1}.entity-handle{padding:8px;cursor:move;cursor:grab}`)),(0,s.Cg)([(0,n.MZ)({attribute:!1})],b.prototype,"hass",void 0),(0,s.Cg)([(0,n.MZ)({type:Array})],b.prototype,"value",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean})],b.prototype,"disabled",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean})],b.prototype,"required",void 0),(0,s.Cg)([(0,n.MZ)()],b.prototype,"label",void 0),(0,s.Cg)([(0,n.MZ)()],b.prototype,"placeholder",void 0),(0,s.Cg)([(0,n.MZ)()],b.prototype,"helper",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-domains"})],b.prototype,"includeDomains",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"exclude-domains"})],b.prototype,"excludeDomains",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-device-classes"})],b.prototype,"includeDeviceClasses",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-unit-of-measurement"})],b.prototype,"includeUnitOfMeasurement",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-entities"})],b.prototype,"includeEntities",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"exclude-entities"})],b.prototype,"excludeEntities",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1})],b.prototype,"entityFilter",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1,type:Array})],b.prototype,"createDomains",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean})],b.prototype,"reorder",void 0),b=(0,s.Cg)([(0,n.EM)("ha-entities-picker")],b),t()}catch(h){t(h)}})},82474:function(e,t,i){i.a(e,async function(e,t){try{i(13609),i(18111),i(61701),i(3362),i(62953);var s=i(40445),a=i(96196),n=i(77845),o=i(22786),r=i(1087),l=i(74705),d=i(78649),c=i(15638),h=i(53756),u=i(95350),p=i(24367),y=i(19711),v=(i(75064),i(38508)),m=(i(67094),i(74281)),g=e([v,m]);[v,m]=g.then?(await g)():g;let b,$,_,C,f,M,x,E,Z,w,k=e=>e;const D="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",I="M11,13.5V21.5H3V13.5H11M12,2L17.5,11H6.5L12,2M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13Z",q="___create-new-entity___";class A extends a.WF{firstUpdated(e){super.firstUpdated(e),this.hass.loadBackendTranslation("title")}get _showEntityId(){var e;return this.showEntityId||(null===(e=this.hass.userData)||void 0===e?void 0:e.showEntityIdPicker)}render(){var e;const t=null!==(e=this.placeholder)&&void 0!==e?e:this.hass.localize("ui.components.entity.entity-picker.placeholder");return(0,a.qy)(b||(b=k` <ha-generic-picker .hass="${0}" .disabled="${0}" .autofocus="${0}" .allowCustomValue="${0}" .required="${0}" .label="${0}" .placeholder="${0}" .helper="${0}" .value="${0}" .searchLabel="${0}" .notFoundLabel="${0}" .rowRenderer="${0}" .getItems="${0}" .getAdditionalItems="${0}" .hideClearIcon="${0}" .searchFn="${0}" .valueRenderer="${0}" .searchKeys="${0}" use-top-label .addButtonLabel="${0}" .unknownItemText="${0}" @value-changed="${0}"> </ha-generic-picker> `),this.hass,this.disabled,this.autofocus,this.allowCustomEntity,this.required,this.label,t,this.helper,this.addButton?void 0:this.value,this.searchLabel,this._notFoundLabel,this._rowRenderer,this._getItems,this._getAdditionalItems,this.hideClearIcon,this._searchFn,this._valueRenderer,h.t,this.addButton?this.hass.localize("ui.components.entity.entity-picker.add"):void 0,this.hass.localize("ui.components.entity.entity-picker.unknown"),this._valueChanged)}async open(){var e;await this.updateComplete,await(null===(e=this._picker)||void 0===e?void 0:e.open())}_valueChanged(e){e.stopPropagation();const t=e.detail.value;if(t){if(t.startsWith(q)){const e=t.substring(q.length);return void(0,y.$)(this,{domain:e,dialogClosedCallback:e=>{e.entityId&&this._setValue(e.entityId)}})}(0,d.n)(t)&&this._setValue(t)}else this._setValue(void 0)}_setValue(e){this.value=e,(0,r.r)(this,"value-changed",{value:e}),(0,r.r)(this,"change")}constructor(...e){super(...e),this.autofocus=!1,this.disabled=!1,this.required=!1,this.showEntityId=!1,this.hideClearIcon=!1,this.addButton=!1,this._valueRenderer=e=>{const t=e||"",i=this.hass.states[t];if(!i)return(0,a.qy)($||($=k` <ha-svg-icon slot="start" .path="${0}" style="margin:0 4px"></ha-svg-icon> <span slot="headline">${0}</span> `),I,t);const[s,n,o]=(0,l.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],this.hass.entities,this.hass.devices,this.hass.areas,this.hass.floors),r=(0,c.qC)(this.hass),d=s||n||t,h=[o,s?n:void 0].filter(Boolean).join(r?" ◂ ":" ▸ ");return(0,a.qy)(_||(_=k` <state-badge .hass="${0}" .stateObj="${0}" slot="start"></state-badge> <span slot="headline">${0}</span> <span slot="supporting-text">${0}</span> `),this.hass,i,d,h)},this._rowRenderer=(e,t)=>{const i=this._showEntityId;return(0,a.qy)(C||(C=k` <ha-combo-box-item type="button" compact="compact" .borderTop="${0}"> ${0} <span slot="headline">${0}</span> ${0} ${0} ${0} </ha-combo-box-item> `),0!==t,e.icon_path?(0,a.qy)(f||(f=k` <ha-svg-icon slot="start" style="margin:0 4px" .path="${0}"></ha-svg-icon> `),e.icon_path):(0,a.qy)(M||(M=k` <state-badge slot="start" .stateObj="${0}" .hass="${0}"></state-badge> `),e.stateObj,this.hass),e.primary,e.secondary?(0,a.qy)(x||(x=k`<span slot="supporting-text">${0}</span>`),e.secondary):a.s6,e.stateObj&&i?(0,a.qy)(E||(E=k` <span slot="supporting-text" class="code"> ${0} </span> `),e.stateObj.entity_id):a.s6,e.domain_name&&!i?(0,a.qy)(Z||(Z=k` <div slot="trailing-supporting-text" class="domain"> ${0} </div> `),e.domain_name):a.s6)},this._getAdditionalItems=()=>this._getCreateItems(this.hass.localize,this.createDomains),this._getCreateItems=(0,o.A)((e,t)=>null!=t&&t.length?(this.hass.loadFragmentTranslation("config"),t.map(t=>{const i=e("ui.components.entity.entity-picker.create_helper",{domain:(0,p.z)(t)?e(`ui.panel.config.helpers.types.${t}`)||t:(0,u.p$)(e,t)});return{id:q+t,primary:i,secondary:e("ui.components.entity.entity-picker.new_entity"),icon_path:D}})):[]),this._getEntitiesMemoized=(0,o.A)(h.w),this._getItems=()=>this._getEntitiesMemoized(this.hass,this.includeDomains,this.excludeDomains,this.entityFilter,this.includeDeviceClasses,this.includeUnitOfMeasurement,this.includeEntities,this.excludeEntities,this.value),this._searchFn=(e,t)=>{const i=t.findIndex(t=>{var i;return(null===(i=t.stateObj)||void 0===i?void 0:i.entity_id)===e});if(-1===i)return t;const[s]=t.splice(i,1);return t.unshift(s),t},this._notFoundLabel=e=>this.hass.localize("ui.components.entity.entity-picker.no_match",{term:(0,a.qy)(w||(w=k`<b>‘${0}’</b>`),e)})}}(0,s.Cg)([(0,n.MZ)({attribute:!1})],A.prototype,"hass",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean})],A.prototype,"autofocus",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean})],A.prototype,"disabled",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean})],A.prototype,"required",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean,attribute:"allow-custom-entity"})],A.prototype,"allowCustomEntity",void 0),(0,s.Cg)([(0,n.MZ)({type:Boolean,attribute:"show-entity-id"})],A.prototype,"showEntityId",void 0),(0,s.Cg)([(0,n.MZ)()],A.prototype,"label",void 0),(0,s.Cg)([(0,n.MZ)()],A.prototype,"value",void 0),(0,s.Cg)([(0,n.MZ)()],A.prototype,"helper",void 0),(0,s.Cg)([(0,n.MZ)()],A.prototype,"placeholder",void 0),(0,s.Cg)([(0,n.MZ)({type:String,attribute:"search-label"})],A.prototype,"searchLabel",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1,type:Array})],A.prototype,"createDomains",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-domains"})],A.prototype,"includeDomains",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"exclude-domains"})],A.prototype,"excludeDomains",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-device-classes"})],A.prototype,"includeDeviceClasses",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-unit-of-measurement"})],A.prototype,"includeUnitOfMeasurement",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"include-entities"})],A.prototype,"includeEntities",void 0),(0,s.Cg)([(0,n.MZ)({type:Array,attribute:"exclude-entities"})],A.prototype,"excludeEntities",void 0),(0,s.Cg)([(0,n.MZ)({attribute:!1})],A.prototype,"entityFilter",void 0),(0,s.Cg)([(0,n.MZ)({attribute:"hide-clear-icon",type:Boolean})],A.prototype,"hideClearIcon",void 0),(0,s.Cg)([(0,n.MZ)({attribute:"add-button",type:Boolean})],A.prototype,"addButton",void 0),(0,s.Cg)([(0,n.P)("ha-generic-picker")],A.prototype,"_picker",void 0),A=(0,s.Cg)([(0,n.EM)("ha-entity-picker")],A),t()}catch(b){t(b)}})},53756:function(e,t,i){i.d(t,{t:function(){return l},w:function(){return d}});i(74423),i(18111),i(22489),i(61701),i(62953);var s=i(71727),a=i(74705),n=i(28978),o=i(15638),r=i(95350);const l=[{name:"search_labels.entityName",weight:10},{name:"search_labels.friendlyName",weight:8},{name:"search_labels.deviceName",weight:7},{name:"search_labels.areaName",weight:6},{name:"search_labels.domainName",weight:6},{name:"search_labels.entityId",weight:3}],d=(e,t,i,l,d,c,h,u,p,y="")=>{let v=[],m=Object.keys(e.states);return h&&(m=m.filter(e=>h.includes(e))),u&&(m=m.filter(e=>!u.includes(e))),t&&(m=m.filter(e=>t.includes((0,s.m)(e)))),i&&(m=m.filter(e=>!i.includes((0,s.m)(e)))),v=m.map(t=>{const i=e.states[t],l=(0,n.u)(i),[d,c,h]=(0,a.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],e.entities,e.devices,e.areas,e.floors),u=(0,r.p$)(e.localize,(0,s.m)(t)),p=(0,o.qC)(e),v=d||c||t,m=[h,d?c:void 0].filter(Boolean).join(p?" ◂ ":" ▸ ");return{id:`${y}${t}`,primary:v,secondary:m,domain_name:u,sorting_label:[v,m].filter(Boolean).join("_"),search_labels:{entityName:d||null,deviceName:c||null,areaName:h||null,domainName:u||null,friendlyName:l||null,entityId:t},stateObj:i}}),d&&(v=v.filter(e=>{var t;return e.id===p||(null===(t=e.stateObj)||void 0===t?void 0:t.attributes.device_class)&&d.includes(e.stateObj.attributes.device_class)})),c&&(v=v.filter(e=>{var t;return e.id===p||(null===(t=e.stateObj)||void 0===t?void 0:t.attributes.unit_of_measurement)&&c.includes(e.stateObj.attributes.unit_of_measurement)})),l&&(v=v.filter(e=>e.id===p||e.stateObj&&l(e.stateObj))),v}},19711:function(e,t,i){i.d(t,{$:function(){return n}});i(3362),i(62953);var s=i(1087);const a=()=>Promise.all([i.e("26767"),i.e("93785"),i.e("12036"),i.e("18738"),i.e("81046")]).then(i.bind(i,79029)),n=(e,t)=>{(0,s.r)(e,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:a,dialogParams:t})}}}]);
//# sourceMappingURL=1535.bf0fefb46d95fb75.js.map