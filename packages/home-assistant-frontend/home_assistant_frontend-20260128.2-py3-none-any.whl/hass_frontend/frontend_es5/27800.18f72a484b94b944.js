"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["27800"],{79:function(e,t,n){n.d(t,{Kh:function(){return l},xn:function(){return a},T:function(){return r}});n(18111),n(22489),n(61701),n(42762),n(62953);var i=n(22786);n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698);var o=n(28978);const a=e=>{var t;return null===(t=e.name_by_user||e.name)||void 0===t?void 0:t.trim()},r=(e,t,n)=>a(e)||n&&s(t,n)||t.localize("ui.panel.config.devices.unnamed_device",{type:t.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)}),s=(e,t)=>{for(const n of t||[]){const t="string"==typeof n?n:n.entity_id,i=e.states[t];if(i)return(0,o.u)(i)}},l=(0,i.A)(e=>function(e){const t=new Set,n=new Set;for(const i of e)n.has(i)?t.add(i):n.add(i);return t}(Object.values(e).map(e=>a(e)).filter(e=>void 0!==e)))},28455:function(e,t,n){n.d(t,{j:function(){return o},l:function(){return i}});const i=(e,t,n,i,a)=>{const r=t[e.entity_id];return r?o(r,t,n,i,a):{entity:null,device:null,area:null,floor:null}},o=(e,t,n,i,o)=>{const a=t[e.entity_id],r=null==e?void 0:e.device_id,s=r?n[r]:void 0,l=(null==e?void 0:e.area_id)||(null==s?void 0:s.area_id),c=l?i[l]:void 0,d=null==c?void 0:c.floor_id;return{entity:a,device:s||null,area:c||null,floor:(d?o[d]:void 0)||null}}},4423:function(e,t,n){n.d(t,{B:function(){return l},r:function(){return s}});n(44114),n(18111),n(13579),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698),n(62953);var i=n(44537),o=n(71727),a=n(28455);const r=e=>{if(void 0!==e)return null===e?new Set([null]):new Set((0,i.e)(e))},s=(e,t)=>{const n=t.domain?new Set((0,i.e)(t.domain)):void 0,s=t.hidden_domains?new Set((0,i.e)(t.hidden_domains)):void 0,l=t.device_class?new Set((0,i.e)(t.device_class)):void 0,c=r(t.floor),d=r(t.area),u=r(t.device),f=t.entity_category?new Set((0,i.e)(t.entity_category)):void 0,v=t.label?new Set((0,i.e)(t.label)):void 0,p=t.hidden_platform?new Set((0,i.e)(t.hidden_platform)):void 0;return t=>{const i=e.states[t];if(!i)return!1;if(n||s){const e=(0,o.m)(t);if(n&&!n.has(e))return!1;if(s&&s.has(e))return!1}if(l){const e=i.attributes.device_class||"none";if(!l.has(e))return!1}const{area:r,floor:h,device:_,entity:m}=(0,a.l)(i,e.entities,e.devices,e.areas,e.floors);if(m&&m.hidden)return!1;if(c){var y;const e=null!==(y=null==h?void 0:h.floor_id)&&void 0!==y?y:null;if(!c.has(e))return!1}if(d){var g;const e=null!==(g=null==r?void 0:r.area_id)&&void 0!==g?g:null;if(!d.has(e))return!1}if(u){var b;const e=null!==(b=null==_?void 0:_.id)&&void 0!==b?b:null;if(!u.has(e))return!1}if(v){if(!m)return!1;if(!m.labels.some(e=>v.has(e)))return!1}if(f){if(!m)return!1;const e=(null==m?void 0:m.entity_category)||"none";if(!f.has(e))return!1}if(p){if(!m)return!1;if(m.platform&&p.has(m.platform))return!1}return!0}},l=(e,t)=>{const n=new Set,i=[];for(const o of t)for(const t of e)o(t)&&!n.has(t)&&(n.add(t),i.push(t));return i}},63004:function(e,t,n){n.d(t,{O:function(){return o},q:function(){return i}});const i=(e,t,n)=>Math.min(Math.max(e,t),n),o=(e,t,n)=>{let i;return i=null!=t?Math.max(e,t):e,i=null!=n?Math.min(i,n):i,i}},24367:function(e,t,n){n.d(t,{L:function(){return o},z:function(){return a}});var i=n(23832);const o=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer","schedule"],a=(0,i.g)(o)},48441:function(e,t,n){n.d(t,{B:function(){return i}});n(62953);const i=[{area:null,hidden_platform:["automation","script","hassio","backup","mobile_app","zone","person"],hidden_domains:["ai_task","automation","configurator","device_tracker","event","geo_location","notify","persistent_notification","script","sun","tag","todo","zone",...n(46190).gt]}]},78859:function(e,t,n){n.r(t),n.d(t,{HomeOtherDevicesViewStrategy:function(){return v}});n(44114),n(18111),n(22489),n(61701),n(3362),n(62953);var i=n(40445),o=n(96196),a=n(77845),r=n(79),s=n(71727),l=n(28455),c=n(4423),d=n(63004),u=n(24367),f=n(48441);class v extends o.mN{static async generate(e,t){const n=Object.keys(t.states),i=f.B.map(e=>(0,c.r)(t,e)),o=(0,c.B)(n,i),a=[],v={},p=[];for(const r of o){const e=t.states[r];if(!e)continue;const{device:n}=(0,l.l)(e,t.entities,t.devices,t.areas,t.floors);n?(n.id in v||(v[n.id]=[]),v[n.id].push(r)):p.push(r)}const h=Object.entries(v).map(([e,t])=>({device_id:e,entities:t})),_=p.filter(e=>{const t=(0,s.m)(e);return(0,u.z)(t)}),m=p.filter(e=>{const t=(0,s.m)(e);return!(0,u.z)(t)}),y=(0,c.r)(t,{domain:"sensor",device_class:"battery"}),g=(0,c.r)(t,{domain:"sensor",device_class:["energy","power"]}),b=(0,c.r)(t,{entity_category:"none"});for(const s of h){var w,z;if(0===s.entities.length)continue;const n=s.entities.filter(e=>y(e)),i=s.entities.filter(e=>!y(e)&&!g(e)&&b(e));if(0===i.length)continue;const o=s.device_id,l=t.devices[o];let c="";l&&(c=(0,r.xn)(l)||t.localize("ui.panel.lovelace.strategy.home.unamed_device")),a.push({type:"grid",cards:[{type:"heading",heading:c,tap_action:l&&null!==(w=t.user)&&void 0!==w&&w.is_admin?{action:"navigate",navigation_path:`/config/devices/device/${l.id}`}:{action:"none"},badges:[...n.slice(0,1).map(e=>({entity:e,type:"entity",tap_action:{action:"more-info"}})),...e.home_panel&&l&&null!==(z=t.user)&&void 0!==z&&z.is_admin?[{type:"button",icon:"mdi:home-plus",text:t.localize("ui.panel.lovelace.strategy.home-other-devices.assign_area"),tap_action:{action:"fire-dom-event",home_panel:{type:"assign_area",device_id:l.id}}}]:[]]},...i.map(e=>({type:"tile",entity:e,name:{type:"entity"}}))]})}const S=(0,d.q)(a.length,2,3);return _.length&&a.push({type:"grid",column_span:S,cards:[{type:"heading",heading:t.localize("ui.panel.lovelace.strategy.home-other-devices.helpers")},..._.map(e=>({type:"tile",entity:e}))]}),m.length&&a.push({type:"grid",column_span:S,cards:[{type:"heading",heading:t.localize("ui.panel.lovelace.strategy.home-other-devices.entities")},...m.map(e=>({type:"tile",entity:e}))]}),0===a.length?{type:"panel",cards:[{type:"empty-state",icon:"mdi:check-all",icon_color:"primary",content_only:!0,title:t.localize("ui.panel.lovelace.strategy.home-other-devices.all_organized_title"),content:t.localize("ui.panel.lovelace.strategy.home-other-devices.all_organized_content")}]}:(1===a.length&&(a[0].column_span=2),{type:"sections",header:{badges_position:"bottom"},max_columns:S,sections:a})}}v=(0,i.Cg)([(0,a.EM)("home-other-devices-view-strategy")],v)}}]);
//# sourceMappingURL=27800.18f72a484b94b944.js.map