"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["11868"],{65522:function(t,e,i){i.d(e,{A:function(){return n}});const n=t=>{var e;return null===(e=t.name)||void 0===e?void 0:e.trim()}},79:function(t,e,i){i.d(e,{Kh:function(){return l},xn:function(){return s},T:function(){return o}});i(18111),i(22489),i(61701),i(42762),i(62953);var n=i(22786);i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698);var a=i(28978);const s=t=>{var e;return null===(e=t.name_by_user||t.name)||void 0===e?void 0:e.trim()},o=(t,e,i)=>s(t)||i&&r(e,i)||e.localize("ui.panel.config.devices.unnamed_device",{type:e.localize(`ui.panel.config.devices.type.${t.entry_type||"device"}`)}),r=(t,e)=>{for(const i of e||[]){const e="string"==typeof i?i:i.entity_id,n=t.states[e];if(n)return(0,a.u)(n)}},l=(0,n.A)(t=>function(t){const e=new Set,i=new Set;for(const n of t)i.has(n)?e.add(n):i.add(n);return e}(Object.values(t).map(t=>s(t)).filter(t=>void 0!==t)))},81816:function(t,e,i){i.d(e,{aH:function(){return o},cx:function(){return r},es:function(){return l}});var n=i(79),a=i(28978),s=i(79461);const o=(t,e,i)=>{const n=e[t.entity_id];return n?r(n,i):(0,a.u)(t)},r=(t,e,i)=>{const o=t.name||("original_name"in t&&null!=t.original_name?String(t.original_name):void 0),r=t.device_id?e[t.device_id]:void 0;if(!r)return o||(i?(0,a.u)(i):void 0);const l=(0,n.xn)(r);return l!==o?l&&o&&(0,s.p)(o,l)||o:void 0},l=(t,e,i)=>!o(t,e,i)},74705:function(t,e,i){i.d(e,{Cf:function(){return u},uU:function(){return d}});i(18111),i(81148),i(22489),i(61701),i(13579);if(66649!=i.j)var n=i(44537);var a=i(65522),s=i(79),o=i(81816),r=i(55931),l=i(28455);const c=66649!=i.j?[{type:"device"},{type:"entity"}]:null,d=(t,e,i,a,s,r,l)=>{var d;let h=(0,n.e)(e||c);const p=null!==(d=null==l?void 0:l.separator)&&void 0!==d?d:" ";if(h.every(t=>"text"===t.type))return h.map(t=>t.text).join(p);if((0,o.es)(t,i,a)){h.some(t=>"device"===t.type)||(h=h.map(t=>"entity"===t.type?{type:"device"}:t))}const y=u(t,h,i,a,s,r);return 1===y.length?y[0]||"":y.filter(t=>t).join(p)},u=(t,e,i,n,c,d)=>{const{device:u,area:h,floor:p}=(0,l.l)(t,i,n,c,d);return e.map(e=>{switch(e.type){case"entity":return(0,o.aH)(t,i,n);case"device":return u?(0,s.xn)(u):void 0;case"area":return h?(0,a.A)(h):void 0;case"floor":return p?(0,r.X)(p):void 0;case"text":return e.text;default:return""}})}},55931:function(t,e,i){i.d(e,{X:function(){return n}});i(42762);const n=t=>{var e;return null===(e=t.name)||void 0===e?void 0:e.trim()}},79461:function(t,e,i){i.d(e,{p:function(){return a}});i(62953);const n=[" ",": "," - "],a=(t,e)=>{const i=t.toLowerCase(),a=e.toLowerCase();for(const o of n){const e=`${a}${o}`;if(i.startsWith(e)){const i=t.substring(e.length);if(i.length)return s(i.substr(0,i.indexOf(" ")))?i:i[0].toUpperCase()+i.slice(1)}}},s=t=>t.toLowerCase()!==t},82474:function(t,e,i){i.a(t,async function(t,e){try{i(13609),i(18111),i(61701),i(3362),i(62953);var n=i(40445),a=i(96196),s=i(77845),o=i(22786),r=i(1087),l=i(74705),c=i(78649),d=i(15638),u=i(53756),h=i(95350),p=i(24367),y=i(19711),g=(i(75064),i(38508)),v=(i(67094),i(74281)),f=t([g,v]);[g,v]=f.then?(await f)():f;let _,m,b,$,C,w,j,k,M,q,x=t=>t;const I="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",O="M11,13.5V21.5H3V13.5H11M12,2L17.5,11H6.5L12,2M17.5,13C20,13 22,15 22,17.5C22,20 20,22 17.5,22C15,22 13,20 13,17.5C13,15 15,13 17.5,13Z",Z="___create-new-entity___";class V extends a.WF{firstUpdated(t){super.firstUpdated(t),this.hass.loadBackendTranslation("title")}get _showEntityId(){var t;return this.showEntityId||(null===(t=this.hass.userData)||void 0===t?void 0:t.showEntityIdPicker)}render(){var t;const e=null!==(t=this.placeholder)&&void 0!==t?t:this.hass.localize("ui.components.entity.entity-picker.placeholder");return(0,a.qy)(_||(_=x` <ha-generic-picker .hass="${0}" .disabled="${0}" .autofocus="${0}" .allowCustomValue="${0}" .required="${0}" .label="${0}" .placeholder="${0}" .helper="${0}" .value="${0}" .searchLabel="${0}" .notFoundLabel="${0}" .rowRenderer="${0}" .getItems="${0}" .getAdditionalItems="${0}" .hideClearIcon="${0}" .searchFn="${0}" .valueRenderer="${0}" .searchKeys="${0}" use-top-label .addButtonLabel="${0}" .unknownItemText="${0}" @value-changed="${0}"> </ha-generic-picker> `),this.hass,this.disabled,this.autofocus,this.allowCustomEntity,this.required,this.label,e,this.helper,this.addButton?void 0:this.value,this.searchLabel,this._notFoundLabel,this._rowRenderer,this._getItems,this._getAdditionalItems,this.hideClearIcon,this._searchFn,this._valueRenderer,u.t,this.addButton?this.hass.localize("ui.components.entity.entity-picker.add"):void 0,this.hass.localize("ui.components.entity.entity-picker.unknown"),this._valueChanged)}async open(){var t;await this.updateComplete,await(null===(t=this._picker)||void 0===t?void 0:t.open())}_valueChanged(t){t.stopPropagation();const e=t.detail.value;if(e){if(e.startsWith(Z)){const t=e.substring(Z.length);return void(0,y.$)(this,{domain:t,dialogClosedCallback:t=>{t.entityId&&this._setValue(t.entityId)}})}(0,c.n)(e)&&this._setValue(e)}else this._setValue(void 0)}_setValue(t){this.value=t,(0,r.r)(this,"value-changed",{value:t}),(0,r.r)(this,"change")}constructor(...t){super(...t),this.autofocus=!1,this.disabled=!1,this.required=!1,this.showEntityId=!1,this.hideClearIcon=!1,this.addButton=!1,this._valueRenderer=t=>{const e=t||"",i=this.hass.states[e];if(!i)return(0,a.qy)(m||(m=x` <ha-svg-icon slot="start" .path="${0}" style="margin:0 4px"></ha-svg-icon> <span slot="headline">${0}</span> `),O,e);const[n,s,o]=(0,l.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],this.hass.entities,this.hass.devices,this.hass.areas,this.hass.floors),r=(0,d.qC)(this.hass),c=n||s||e,u=[o,n?s:void 0].filter(Boolean).join(r?" ◂ ":" ▸ ");return(0,a.qy)(b||(b=x` <state-badge .hass="${0}" .stateObj="${0}" slot="start"></state-badge> <span slot="headline">${0}</span> <span slot="supporting-text">${0}</span> `),this.hass,i,c,u)},this._rowRenderer=(t,e)=>{const i=this._showEntityId;return(0,a.qy)($||($=x` <ha-combo-box-item type="button" compact="compact" .borderTop="${0}"> ${0} <span slot="headline">${0}</span> ${0} ${0} ${0} </ha-combo-box-item> `),0!==e,t.icon_path?(0,a.qy)(C||(C=x` <ha-svg-icon slot="start" style="margin:0 4px" .path="${0}"></ha-svg-icon> `),t.icon_path):(0,a.qy)(w||(w=x` <state-badge slot="start" .stateObj="${0}" .hass="${0}"></state-badge> `),t.stateObj,this.hass),t.primary,t.secondary?(0,a.qy)(j||(j=x`<span slot="supporting-text">${0}</span>`),t.secondary):a.s6,t.stateObj&&i?(0,a.qy)(k||(k=x` <span slot="supporting-text" class="code"> ${0} </span> `),t.stateObj.entity_id):a.s6,t.domain_name&&!i?(0,a.qy)(M||(M=x` <div slot="trailing-supporting-text" class="domain"> ${0} </div> `),t.domain_name):a.s6)},this._getAdditionalItems=()=>this._getCreateItems(this.hass.localize,this.createDomains),this._getCreateItems=(0,o.A)((t,e)=>null!=e&&e.length?(this.hass.loadFragmentTranslation("config"),e.map(e=>{const i=t("ui.components.entity.entity-picker.create_helper",{domain:(0,p.z)(e)?t(`ui.panel.config.helpers.types.${e}`)||e:(0,h.p$)(t,e)});return{id:Z+e,primary:i,secondary:t("ui.components.entity.entity-picker.new_entity"),icon_path:I}})):[]),this._getEntitiesMemoized=(0,o.A)(u.w),this._getItems=()=>this._getEntitiesMemoized(this.hass,this.includeDomains,this.excludeDomains,this.entityFilter,this.includeDeviceClasses,this.includeUnitOfMeasurement,this.includeEntities,this.excludeEntities,this.value),this._searchFn=(t,e)=>{const i=e.findIndex(e=>{var i;return(null===(i=e.stateObj)||void 0===i?void 0:i.entity_id)===t});if(-1===i)return e;const[n]=e.splice(i,1);return e.unshift(n),e},this._notFoundLabel=t=>this.hass.localize("ui.components.entity.entity-picker.no_match",{term:(0,a.qy)(q||(q=x`<b>‘${0}’</b>`),t)})}}(0,n.Cg)([(0,s.MZ)({attribute:!1})],V.prototype,"hass",void 0),(0,n.Cg)([(0,s.MZ)({type:Boolean})],V.prototype,"autofocus",void 0),(0,n.Cg)([(0,s.MZ)({type:Boolean})],V.prototype,"disabled",void 0),(0,n.Cg)([(0,s.MZ)({type:Boolean})],V.prototype,"required",void 0),(0,n.Cg)([(0,s.MZ)({type:Boolean,attribute:"allow-custom-entity"})],V.prototype,"allowCustomEntity",void 0),(0,n.Cg)([(0,s.MZ)({type:Boolean,attribute:"show-entity-id"})],V.prototype,"showEntityId",void 0),(0,n.Cg)([(0,s.MZ)()],V.prototype,"label",void 0),(0,n.Cg)([(0,s.MZ)()],V.prototype,"value",void 0),(0,n.Cg)([(0,s.MZ)()],V.prototype,"helper",void 0),(0,n.Cg)([(0,s.MZ)()],V.prototype,"placeholder",void 0),(0,n.Cg)([(0,s.MZ)({type:String,attribute:"search-label"})],V.prototype,"searchLabel",void 0),(0,n.Cg)([(0,s.MZ)({attribute:!1,type:Array})],V.prototype,"createDomains",void 0),(0,n.Cg)([(0,s.MZ)({type:Array,attribute:"include-domains"})],V.prototype,"includeDomains",void 0),(0,n.Cg)([(0,s.MZ)({type:Array,attribute:"exclude-domains"})],V.prototype,"excludeDomains",void 0),(0,n.Cg)([(0,s.MZ)({type:Array,attribute:"include-device-classes"})],V.prototype,"includeDeviceClasses",void 0),(0,n.Cg)([(0,s.MZ)({type:Array,attribute:"include-unit-of-measurement"})],V.prototype,"includeUnitOfMeasurement",void 0),(0,n.Cg)([(0,s.MZ)({type:Array,attribute:"include-entities"})],V.prototype,"includeEntities",void 0),(0,n.Cg)([(0,s.MZ)({type:Array,attribute:"exclude-entities"})],V.prototype,"excludeEntities",void 0),(0,n.Cg)([(0,s.MZ)({attribute:!1})],V.prototype,"entityFilter",void 0),(0,n.Cg)([(0,s.MZ)({attribute:"hide-clear-icon",type:Boolean})],V.prototype,"hideClearIcon",void 0),(0,n.Cg)([(0,s.MZ)({attribute:"add-button",type:Boolean})],V.prototype,"addButton",void 0),(0,n.Cg)([(0,s.P)("ha-generic-picker")],V.prototype,"_picker",void 0),V=(0,n.Cg)([(0,s.EM)("ha-entity-picker")],V),e()}catch(_){e(_)}})},53756:function(t,e,i){i.d(e,{t:function(){return l},w:function(){return c}});i(74423),i(18111),i(22489),i(61701),i(62953);var n=i(71727),a=i(74705),s=i(28978),o=i(15638),r=i(95350);const l=[{name:"search_labels.entityName",weight:10},{name:"search_labels.friendlyName",weight:8},{name:"search_labels.deviceName",weight:7},{name:"search_labels.areaName",weight:6},{name:"search_labels.domainName",weight:6},{name:"search_labels.entityId",weight:3}],c=(t,e,i,l,c,d,u,h,p,y="")=>{let g=[],v=Object.keys(t.states);return u&&(v=v.filter(t=>u.includes(t))),h&&(v=v.filter(t=>!h.includes(t))),e&&(v=v.filter(t=>e.includes((0,n.m)(t)))),i&&(v=v.filter(t=>!i.includes((0,n.m)(t)))),g=v.map(e=>{const i=t.states[e],l=(0,s.u)(i),[c,d,u]=(0,a.Cf)(i,[{type:"entity"},{type:"device"},{type:"area"}],t.entities,t.devices,t.areas,t.floors),h=(0,r.p$)(t.localize,(0,n.m)(e)),p=(0,o.qC)(t),g=c||d||e,v=[u,c?d:void 0].filter(Boolean).join(p?" ◂ ":" ▸ ");return{id:`${y}${e}`,primary:g,secondary:v,domain_name:h,sorting_label:[g,v].filter(Boolean).join("_"),search_labels:{entityName:c||null,deviceName:d||null,areaName:u||null,domainName:h||null,friendlyName:l||null,entityId:e},stateObj:i}}),c&&(g=g.filter(t=>{var e;return t.id===p||(null===(e=t.stateObj)||void 0===e?void 0:e.attributes.device_class)&&c.includes(t.stateObj.attributes.device_class)})),d&&(g=g.filter(t=>{var e;return t.id===p||(null===(e=t.stateObj)||void 0===e?void 0:e.attributes.unit_of_measurement)&&d.includes(t.stateObj.attributes.unit_of_measurement)})),l&&(g=g.filter(t=>t.id===p||t.stateObj&&l(t.stateObj))),g}},19711:function(t,e,i){i.d(e,{$:function(){return s}});i(3362),i(62953);var n=i(1087);const a=()=>Promise.all([i.e("26767"),i.e("93785"),i.e("12036"),i.e("18738"),i.e("81046")]).then(i.bind(i,79029)),s=(t,e)=>{(0,n.r)(t,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:a,dialogParams:e})}},87031:function(t,e,i){i.a(t,async function(t,n){try{i.r(e),i.d(e,{HuiGraphFooterEditor:function(){return f}});var a=i(40445),s=i(96196),o=i(77845),r=i(63533),l=i(1087),c=i(82474),d=(i(6),i(59646),i(75709),i(30345)),u=i(7382),h=t([c]);c=(h.then?(await h)():h)[0];let p,y,g=t=>t;const v=["sensor"];class f extends s.WF{setConfig(t){(0,r.vA)(t,d.oe),this._config=t}get _entity(){return this._config.entity||""}get _detail(){var t;return null!==(t=this._config.detail)&&void 0!==t?t:1}get _hours_to_show(){return this._config.hours_to_show||24}render(){return this.hass&&this._config?(0,s.qy)(p||(p=g` <div class="card-config"> <ha-entity-picker .label="${0}" .hass="${0}" .value="${0}" .configValue="${0}" .includeDomains="${0}" .required="${0}" @value-changed="${0}"></ha-entity-picker> <div class="side-by-side"> <ha-formfield label="${0}"> <ha-switch .checked="${0}" .configValue="${0}" @change="${0}"></ha-switch> </ha-formfield> <ha-textfield type="number" .label="${0} (${0})" .value="${0}" min="1" .configValue="${0}" @input="${0}"></ha-textfield> </div> </div> `),this.hass.localize("ui.panel.lovelace.editor.card.generic.entity"),this.hass,this._entity,"entity",v,!0,this._valueChanged,this.hass.localize("ui.panel.lovelace.editor.card.sensor.show_more_detail"),2===this._detail,"detail",this._change,this.hass.localize("ui.panel.lovelace.editor.card.generic.hours_to_show"),this.hass.localize("ui.panel.lovelace.editor.card.config.optional"),this._hours_to_show,"hours_to_show",this._valueChanged):s.s6}_change(t){if(!this._config||!this.hass)return;const e=t.target.checked?2:1;this._detail!==e&&(this._config=Object.assign(Object.assign({},this._config),{},{detail:e}),(0,l.r)(this,"config-changed",{config:this._config}))}_valueChanged(t){if(!this._config||!this.hass)return;const e=t.target;if(this[`_${e.configValue}`]!==e.value){if(e.configValue)if(""===e.value||"number"===e.type&&isNaN(Number(e.value)))this._config=Object.assign({},this._config),delete this._config[e.configValue];else{let t=e.value;"number"===e.type&&(t=Number(t)),this._config=Object.assign(Object.assign({},this._config),{},{[e.configValue]:t})}(0,l.r)(this,"config-changed",{config:this._config})}}static get styles(){return[u.U,(0,s.AH)(y||(y=g`.card-config ha-switch{margin:1px 0}`))]}}(0,a.Cg)([(0,o.MZ)({attribute:!1})],f.prototype,"hass",void 0),(0,a.Cg)([(0,o.wk)()],f.prototype,"_config",void 0),f=(0,a.Cg)([(0,o.EM)("hui-graph-footer-editor")],f),n()}catch(p){n(p)}})},55904:function(t,e,i){i.d(e,{J:function(){return s}});var n=i(63533),a=i(91408);const s=(0,n.Ik)({entity:(0,n.Yj)(),name:(0,n.lq)((0,n.Yj)()),icon:(0,n.lq)((0,n.Yj)()),image:(0,n.lq)((0,n.Yj)()),show_name:(0,n.lq)((0,n.zM)()),show_icon:(0,n.lq)((0,n.zM)()),tap_action:(0,n.lq)(a.kn),hold_action:(0,n.lq)(a.kn),double_tap_action:(0,n.lq)(a.kn)})},30345:function(t,e,i){i.d(e,{oe:function(){return l},zb:function(){return c}});var n=i(63533),a=i(91408),s=i(55904);const o=(0,n.Ik)({type:(0,n.Yj)(),image:(0,n.Yj)(),tap_action:(0,n.lq)(a.kn),hold_action:(0,n.lq)(a.kn),double_tap_action:(0,n.lq)(a.kn),alt_text:(0,n.lq)((0,n.Yj)())}),r=(0,n.Ik)({type:(0,n.Yj)(),entities:(0,n.YO)(s.J)}),l=(0,n.Ik)({type:(0,n.Yj)(),entity:(0,n.Yj)(),detail:(0,n.lq)((0,n.ai)()),hours_to_show:(0,n.lq)((0,n.ai)())}),c=(0,n.OR)(t=>{if(t&&"object"==typeof t&&"type"in t)switch(t.type){case"buttons":return r;case"graph":return l;case"picture":return o}return(0,n.KC)([r,l,o])})}}]);
//# sourceMappingURL=11868.86515946bc4b869d.js.map