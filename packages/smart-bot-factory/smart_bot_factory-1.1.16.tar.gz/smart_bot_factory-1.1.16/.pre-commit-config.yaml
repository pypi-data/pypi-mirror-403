repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.6.0
    hooks:
      - id: ruff
        args: ["--fix", "--exclude", "tests/"]
      - id: ruff-format
        args: ["--exclude", "tests/"]
      - id: ruff
        name: ruff (import sorting)
        args: ["--select", "I", "--fix", "--exclude", "tests/"]
  
  - repo: local
    hooks:
      - id: pytest
        name: pytest
        entry: uv run pytest
        language: system
        types: [python]
        args: ["-q", "--tb=line", "-x", "--maxfail=1", "-m", "not slow", "--rootdir", "."]
        pass_filenames: false
        always_run: true
        description: "Запускает быстрые тесты перед коммитом. Коммит будет заблокирован при ошибках."