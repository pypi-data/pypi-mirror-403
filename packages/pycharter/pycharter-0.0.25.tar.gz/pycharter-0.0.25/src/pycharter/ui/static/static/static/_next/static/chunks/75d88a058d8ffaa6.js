(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81704,e=>{"use strict";let t;var n=e.i(43476),r=e.i(71645);function i(e,t="Assertion error"){if(!e)throw Error(t)}function a({group:e}){let{orientation:t,panels:n}=e;return n.reduce((e,n)=>e+="horizontal"===t?n.element.offsetWidth:n.element.offsetHeight,0)}function l(e,t){return t.sort("horizontal"===e?o:s)}function o(e,t){let n=e.element.offsetLeft-t.element.offsetLeft;return 0!==n?n:e.element.offsetWidth-t.element.offsetWidth}function s(e,t){let n=e.element.offsetTop-t.element.offsetTop;return 0!==n?n:e.element.offsetHeight-t.element.offsetHeight}function d(e){return null!==e&&"object"==typeof e&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}function u(e,t){return{x:e.x>=t.left&&e.x<=t.right?0:Math.min(Math.abs(e.x-t.left),Math.abs(e.x-t.right)),y:e.y>=t.top&&e.y<=t.bottom?0:Math.min(Math.abs(e.y-t.top),Math.abs(e.y-t.bottom))}}function c(e){let{element:t,orientation:n,panels:r,separators:o}=e,s=l(n,Array.from(t.children).filter(d).map(e=>({element:e}))).map(({element:e})=>e),c=[],f=!1,p,m=[];for(let t of s)if(t.hasAttribute("data-panel")){let l=r.find(e=>e.element===t);if(l){if(p){let r,o=p.element.getBoundingClientRect(),s=t.getBoundingClientRect();if(f){let e="horizontal"===n?new DOMRect(o.right,o.top,0,o.height):new DOMRect(o.left,o.bottom,o.width,0),t="horizontal"===n?new DOMRect(s.left,s.top,0,s.height):new DOMRect(s.left,s.top,s.width,0);switch(m.length){case 0:r=[e,t];break;case 1:{let a=m[0],l=function({orientation:e,rects:t,targetRect:n}){let r={x:n.x+n.width/2,y:n.y+n.height/2},a,l=Number.MAX_VALUE;for(let n of t){let{x:t,y:i}=u(r,n),o="horizontal"===e?t:i;o<l&&(l=o,a=n)}return i(a,"No rect found"),a}({orientation:n,rects:[o,s],targetRect:a.element.getBoundingClientRect()});r=[a,l===o?t:e];break}default:r=m}}else r=m.length?m:["horizontal"===n?new DOMRect(o.right,s.top,s.left-o.right,s.height):new DOMRect(s.left,o.bottom,s.width,s.top-o.bottom)];for(let t of r)c.push({group:e,groupSize:a({group:e}),panels:[p,l],separator:"width"in t?void 0:t,rect:"width"in t?t:t.element.getBoundingClientRect()})}f=!1,p=l,m=[]}}else if(t.hasAttribute("data-separator")){let e=o.find(e=>e.element===t);e?m.push(e):(p=void 0,m=[])}else f=!0;return c}function f({groupSize:e,panelElement:t,styleProp:n}){let r,[i,a]=function(e){switch(typeof e){case"number":return[e,"px"];case"string":{let t=parseFloat(e);return e.endsWith("%")?[t,"%"]:e.endsWith("px")?[t,"px"]:e.endsWith("rem")?[t,"rem"]:e.endsWith("em")?[t,"em"]:e.endsWith("vh")?[t,"vh"]:e.endsWith("vw")?[t,"vw"]:[t,"%"]}}}(n);switch(a){case"%":r=i/100*e;break;case"px":r=i;break;case"rem":r=i*parseFloat(getComputedStyle(t.ownerDocument.body).fontSize);break;case"em":r=i*parseFloat(getComputedStyle(t).fontSize);break;case"vh":r=i/100*window.innerHeight;break;case"vw":r=i/100*window.innerWidth}return r}function p(e){return parseFloat(e.toFixed(3))}function m(e){let{panels:t}=e,n=a({group:e});return 0===n?t.map(e=>({collapsedSize:0,collapsible:!0===e.panelConstraints.collapsible,defaultSize:void 0,minSize:0,maxSize:100,panelId:e.id})):t.map(e=>{let t,{element:r,panelConstraints:i}=e,a=0;void 0!==i.collapsedSize&&(a=p(f({groupSize:n,panelElement:r,styleProp:i.collapsedSize})/n*100)),void 0!==i.defaultSize&&(t=p(f({groupSize:n,panelElement:r,styleProp:i.defaultSize})/n*100));let l=0;void 0!==i.minSize&&(l=p(f({groupSize:n,panelElement:r,styleProp:i.minSize})/n*100));let o=100;return void 0!==i.maxSize&&(o=p(f({groupSize:n,panelElement:r,styleProp:i.maxSize})/n*100)),{collapsedSize:a,collapsible:!0===i.collapsible,defaultSize:t,minSize:l,maxSize:o,panelId:e.id}})}function h(e,t,n=0){return Math.abs(p(e)-p(t))<=n}let g={cursorFlags:0,interactionState:{state:"inactive"},mountedGroups:new Map},x=new class{#e={};addListener(e,t){let n=this.#e[e];return void 0===n?this.#e[e]=[t]:n.includes(t)||n.push(t),()=>{this.removeListener(e,t)}}emit(e,t){let n=this.#e[e];if(void 0!==n)if(1===n.length)n[0].call(null,t);else{let e=!1,r=null,i=Array.from(n);for(let n=0;n<i.length;n++){let a=i[n];try{a.call(null,t)}catch(t){null===r&&(e=!0,r=t)}}if(e)throw r}}removeAllListeners(){this.#e={}}removeListener(e,t){let n=this.#e[e];if(void 0!==n){let e=n.indexOf(t);e>=0&&n.splice(e,1)}}};function y(e){let t="function"==typeof e?e(g):e;if(g===t)return g;let n=g;return g={...g,...t},void 0!==t.cursorFlags&&x.emit("cursorFlagsChange",g.cursorFlags),void 0!==t.interactionState&&x.emit("interactionStateChange",g.interactionState),void 0!==t.mountedGroups&&(g.mountedGroups.forEach((e,t)=>{e.derivedPanelConstraints.forEach(r=>{if(r.collapsible){let{layout:i}=n.mountedGroups.get(t)??{};if(i){let n=h(r.collapsedSize,e.layout[r.panelId]),a=h(r.collapsedSize,i[r.panelId]);n&&!a&&(t.inMemoryLastExpandedPanelSizes[r.panelId]=i[r.panelId])}}})}),x.emit("mountedGroupsChange",g.mountedGroups)),g}function v(e,t){return h(e,t)?0:e>t?1:-1}function b({panelConstraints:e,size:t}){let{collapsedSize:n=0,collapsible:r,maxSize:i=100,minSize:a=0}=e;return 0>v(t,a)&&(t=r&&0>v(t,(n+a)/2)?n:a),p(t=Math.min(i,t))}function S({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:a,trigger:l}){if(h(e,0))return t;let o=Object.values(t),s=Object.values(a),d=[...o],[u,c]=r;i(null!=u,"Invalid first pivot index"),i(null!=c,"Invalid second pivot index");let f=0;if("keyboard"===l){{let t=e<0?c:u,r=n[t];i(r,`Panel constraints not found for index ${t}`);let{collapsedSize:a=0,collapsible:l,minSize:s=0}=r;if(l){let n=o[t];if(i(null!=n,`Previous layout not found for panel index ${t}`),h(n,a)){let t=s-n;v(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{let t=e<0?u:c,r=n[t];i(r,`No panel constraints found for index ${t}`);let{collapsedSize:a=0,collapsible:l,minSize:s=0}=r;if(l){let n=o[t];if(i(null!=n,`Previous layout not found for panel index ${t}`),h(n,s)){let t=n-a;v(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{let t=e<0?1:-1,r=e<0?c:u,a=0;for(;;){let e=o[r];if(i(null!=e,`Previous layout not found for panel index ${r}`),a+=b({panelConstraints:n[r],size:100})-e,(r+=t)<0||r>=n.length)break}let l=Math.min(Math.abs(e),Math.abs(a));e=e<0?0-l:l}{let t=e<0?u:c;for(;t>=0&&t<n.length;){let r=Math.abs(e)-Math.abs(f),a=o[t];i(null!=a,`Previous layout not found for panel index ${t}`);let l=a-r,s=b({panelConstraints:n[t],size:l});if(!h(a,s)&&(f+=a-s,d[t]=s,f.toFixed(3).localeCompare(Math.abs(e).toFixed(3),void 0,{numeric:!0})>=0))break;e<0?t--:t++}}if(function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}(s,d))return a;{let t=e<0?c:u,r=o[t];i(null!=r,`Previous layout not found for panel index ${t}`);let a=r+f,l=b({panelConstraints:n[t],size:a});if(d[t]=l,!h(l,a)){let t=a-l,r=e<0?c:u;for(;r>=0&&r<n.length;){let a=d[r];i(null!=a,`Previous layout not found for panel index ${r}`);let l=a+t,o=b({panelConstraints:n[r],size:l});if(h(a,o)||(t-=o-a,d[r]=o),h(t,0))break;e>0?r--:r++}}}if(!h(Object.values(d).reduce((e,t)=>t+e,0),100,.1))return a;let p=Object.keys(a);return d.reduce((e,t,n)=>(e[p[n]]=t,e),{})}function j(e){let{mountedGroups:t}=g;for(let[n]of t)if(n.separators.some(t=>t.element===e))return n;throw Error("Could not find parent Group for separator element")}function w(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(void 0===t[n]||0!==v(e[n],t[n]))return!1;return!0}function C({layout:e,panelConstraints:t}){let n=[...Object.values(e)],r=n.reduce((e,t)=>e+t,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(e=>`${e}%`).join(", ")}`);if(!h(r,100)&&n.length>0)for(let e=0;e<t.length;e++){let t=n[e];i(null!=t,`No layout data found for index ${e}`);let a=100/r*t;n[e]=a}let a=0;for(let e=0;e<t.length;e++){let r=n[e];i(null!=r,`No layout data found for index ${e}`);let l=b({panelConstraints:t[e],size:r});r!=l&&(a+=r-l,n[e]=l)}if(!h(a,0))for(let e=0;e<t.length;e++){let r=n[e];i(null!=r,`No layout data found for index ${e}`);let l=r+a,o=b({panelConstraints:t[e],size:l});if(r!==o&&(a-=o-r,n[e]=o,h(a,0)))break}let l=Object.keys(e);return n.reduce((e,t,n)=>(e[l[n]]=t,e),{})}function z({groupId:e}){let t=()=>{let{mountedGroups:t}=g;for(let[n,r]of t)if(n.id===e)return{group:n,...r};throw Error(`Could not find Group with id "${e}"`)};return{getLayout(){let{defaultLayoutDeferred:e,layout:n}=t();return e?{}:n},setLayout(e){let{defaultLayoutDeferred:n,derivedPanelConstraints:r,group:i,layout:a,separatorToPanels:l}=t(),o=C({layout:e,panelConstraints:r});return n?a:(w(a,o)||y(e=>({mountedGroups:new Map(e.mountedGroups).set(i,{defaultLayoutDeferred:n,derivedPanelConstraints:r,layout:o,separatorToPanels:l})})),o)}}}function k(e){let{mountedGroups:t}=g,n=t.get(e);return i(n,`Mounted Group ${e.id} not found`),n}function N(e,t){let n=j(e),r=k(n),a=n.separators.find(t=>t.element===e);i(a,"Matching separator not found");let l=r.separatorToPanels.get(a);i(l,"Matching panels not found");let o=l.map(e=>n.panels.indexOf(e)),s=z({groupId:n.id}).getLayout(),d=C({layout:S({delta:t,initialLayout:s,panelConstraints:r.derivedPanelConstraints,pivotIndices:o,prevLayout:s,trigger:"keyboard"}),panelConstraints:r.derivedPanelConstraints});w(s,d)||y(e=>({mountedGroups:new Map(e.mountedGroups).set(n,{defaultLayoutDeferred:r.defaultLayoutDeferred,derivedPanelConstraints:r.derivedPanelConstraints,layout:d,separatorToPanels:r.separatorToPanels})}))}function L(e){if(e.defaultPrevented)return;let t=e.currentTarget,n=j(t);if(!n.disabled)switch(e.key){case"ArrowDown":e.preventDefault(),"vertical"===n.orientation&&N(t,5);break;case"ArrowLeft":e.preventDefault(),"horizontal"===n.orientation&&N(t,-5);break;case"ArrowRight":e.preventDefault(),"horizontal"===n.orientation&&N(t,5);break;case"ArrowUp":e.preventDefault(),"vertical"===n.orientation&&N(t,-5);break;case"End":e.preventDefault(),N(t,100);break;case"Enter":{e.preventDefault();let n=j(t),{derivedPanelConstraints:r,layout:a,separatorToPanels:l}=k(n),o=n.separators.find(e=>e.element===t);i(o,"Matching separator not found");let s=l.get(o);i(s,"Matching panels not found");let d=s[0],u=r.find(e=>e.panelId===d.id);if(i(u,"Panel metadata not found"),u.collapsible){let e=a[d.id];N(t,(u.collapsedSize===e?n.inMemoryLastExpandedPanelSizes[d.id]??u.minSize:u.collapsedSize)-e)}break}case"F6":{e.preventDefault();let n=j(t).separators.map(e=>e.element),r=Array.from(n).findIndex(t=>t===e.currentTarget);i(null!==r,"Index not found");let a=e.shiftKey?r>0?r-1:n.length-1:r+1<n.length?r+1:0;n[a].focus();break}case"Home":e.preventDefault(),N(t,-100)}}let P=e=>e,R=()=>{},M=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function I(e){let t=e.length;for(;t--;){let n=e[t];if(i(n,"Missing node"),function(e){let t,n=getComputedStyle(e);return!!("fixed"===n.position||"auto"!==n.zIndex&&("static"!==n.position||"flex"===(t=getComputedStyle(T(e)??e).display)||"inline-flex"===t)||1>+n.opacity||"transform"in n&&"none"!==n.transform||"webkitTransform"in n&&"none"!==n.webkitTransform||"mixBlendMode"in n&&"normal"!==n.mixBlendMode||"filter"in n&&"none"!==n.filter||"webkitFilter"in n&&"none"!==n.webkitFilter||"isolation"in n&&"isolate"===n.isolation||M.test(n.willChange)||"touch"===n.webkitOverflowScrolling)}(n))return n}return null}function E(e){return e&&Number(getComputedStyle(e).zIndex)||0}function D(e){let t=[];for(;e;)t.push(e),e=T(e);return t}function T(e){let{parentNode:t}=e;return null!==t&&"object"==typeof t&&"nodeType"in t&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.host:t}function O(e,n){let r=[];return n.forEach((n,a)=>{if(a.disabled)return;let l=(void 0===t&&(t="function"==typeof matchMedia&&!!matchMedia("(pointer:coarse)").matches),t)?10:5,o=c(a),s=function(e,t,n){let r,i={x:1/0,y:1/0};for(let a of t){let t=u(n,a.rect);switch(e){case"horizontal":t.x<=i.x&&(r=a,i=t);break;case"vertical":t.y<=i.y&&(r=a,i=t)}}return r?{distance:i,hitRegion:r}:void 0}(a.orientation,o,{x:e.clientX,y:e.clientY});s&&s.distance.x<=l&&s.distance.y<=l&&function({groupElement:e,hitRegion:t,pointerEventTarget:n}){if(!d(n)||n.contains(e)||e.contains(n))return!0;if(function(e,t){let n;if(e===t)throw Error("Cannot compare node with itself");let r={a:D(e),b:D(t)};for(;r.a.at(-1)===r.b.at(-1);)e=r.a.pop(),t=r.b.pop(),n=e;i(n,"Stacking order can only be calculated for elements with a common ancestor");let a={a:E(I(r.a)),b:E(I(r.b))};if(a.a===a.b){let e=n.childNodes,t={a:r.a.at(-1),b:r.b.at(-1)},i=e.length;for(;i--;){let n=e[i];if(n===t.a)return 1;if(n===t.b)return -1}}return Math.sign(a.a-a.b)}(n,e)>0){let i=n;for(;i;){var r;if(i.contains(e))break;if(r=i.getBoundingClientRect(),r.x<t.x+t.width&&r.x+r.width>t.x&&r.y<t.y+t.height&&r.y+r.height>t.y)return!1;i=i.parentElement}}return!0}({groupElement:a.element,hitRegion:s.hitRegion.rect,pointerEventTarget:e.target})&&r.push(s.hitRegion)}),r}function _(e){if(e.defaultPrevented||"mouse"===e.pointerType&&e.button>0)return;let{mountedGroups:t}=g,n=O(e,t),r=new Set,i=new Set,a=new Set,l=new Map,o=!1;n.forEach(e=>{r.add(e.group),e.panels.forEach(e=>{i.add(e)}),e.separator&&(a.add(e.separator),o||(o=!0,e.separator.element.focus()));let n=t.get(e.group);n&&l.set(e.group,n.layout)}),y({interactionState:{hitRegions:n,initialLayoutMap:l,pointerDownAtPoint:{x:e.clientX,y:e.clientY},state:"active"}}),n.length&&e.preventDefault()}let F=new WeakMap;function G(e){if(null===e.defaultView||void 0===e.defaultView)return;let{prevStyle:t,styleSheet:n}=F.get(e)??{};void 0===n&&(n=new e.defaultView.CSSStyleSheet,e.adoptedStyleSheets=[n]);let{cursorFlags:r,interactionState:i}=g;switch(i.state){case"active":case"hover":{let e=function({cursorFlags:e,groups:t,state:n}){let r=0,i=0;switch(n){case"active":case"hover":t.forEach(e=>{if(!e.disableCursor)switch(e.orientation){case"horizontal":r++;break;case"vertical":i++}})}if(0===r&&0===i)return null;if("active"===n){let t=(4&e)!=0,n=(8&e)!=0;if(e){if((1&e)!=0)return t?"se-resize":n?"ne-resize":"e-resize";if((2&e)!=0)return t?"sw-resize":n?"nw-resize":"w-resize";if(t)return"s-resize";if(n)return"n-resize"}}return r>0&&i>0?"move":r>0?"ew-resize":"ns-resize"}({cursorFlags:r,groups:i.hitRegions.map(e=>e.group),state:i.state}),a=`*{cursor: ${e} !important; ${"active"===i.state?"touch-action: none;":""} }`;if(t===a)return;t=a,e?0===n.cssRules.length?n.insertRule(a):n.replaceSync(a):1===n.cssRules.length&&n.deleteRule(0);break}case"inactive":t=void 0,1===n.cssRules.length&&n.deleteRule(0)}F.set(e,{prevStyle:t,styleSheet:n})}function W({document:e,event:t,hitRegions:n,initialLayoutMap:r,mountedGroups:i,pointerDownAtPoint:a}){let l=0,o=new Map(i);n.forEach(e=>{let{group:n,groupSize:s}=e,{disableCursor:d,orientation:u,panels:c}=n,f=0;f=a?"horizontal"===u?(t.clientX-a.x)/s*100:(t.clientY-a.y)/s*100:"horizontal"===u?t.clientX<0?-100:100:t.clientY<0?-100:100;let p=r.get(n),{defaultLayoutDeferred:m,derivedPanelConstraints:h,layout:g,separatorToPanels:x}=i.get(n)??{defaultLayoutDeferred:!1};if(h&&p&&g&&x){let t=S({delta:f,initialLayout:p,panelConstraints:h,pivotIndices:e.panels.map(e=>c.indexOf(e)),prevLayout:g,trigger:"mouse-or-touch"});if(w(t,g)){if(0!==f&&!d)switch(u){case"horizontal":l|=f<0?1:2;break;case"vertical":l|=f<0?4:8}}else{o.set(e.group,{defaultLayoutDeferred:m,derivedPanelConstraints:h,layout:t,separatorToPanels:x});let n=e.group.panels.map(({id:e})=>e).join(",");e.group.inMemoryLayouts[n]=t}}}),y({cursorFlags:l,mountedGroups:o}),G(e)}function A(e){let{interactionState:t,mountedGroups:n}=g;"active"===t.state&&W({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n})}function $(e){if(e.defaultPrevented)return;let{interactionState:t,mountedGroups:n}=g;if("active"===t.state){if(0===e.buttons){y(e=>"inactive"===e.interactionState.state?e:{cursorFlags:0,interactionState:{state:"inactive"}}),y(e=>({mountedGroups:new Map(e.mountedGroups)}));return}W({document:e.currentTarget,event:e,hitRegions:t.hitRegions,initialLayoutMap:t.initialLayoutMap,mountedGroups:n,pointerDownAtPoint:t.pointerDownAtPoint})}else{let r=O(e,n);0===r.length?"inactive"!==t.state&&y({interactionState:{state:"inactive"}}):y({interactionState:{hitRegions:r,state:"hover"}}),G(e.currentTarget)}}function B(e){if(e.defaultPrevented||"mouse"===e.pointerType&&e.button>0)return;let{interactionState:t}=g;"active"===t.state&&(y({cursorFlags:0,interactionState:{state:"inactive"}}),t.hitRegions.length>0&&(G(e.currentTarget),y(e=>({mountedGroups:new Map(e.mountedGroups)})),e.preventDefault()))}function V(e){let t=0,n=0,r={};for(let i of e)if(void 0!==i.defaultSize){t++;let e=p(i.defaultSize);n+=e,r[i.panelId]=e}else r[i.panelId]=void 0;let i=e.length-t;if(0!==i){let t=p((100-n)/i);for(let n of e)void 0===n.defaultSize&&(r[n.panelId]=t)}return r}let J=new Map;function H(){let[e,t]=(0,r.useState)({});return[e,(0,r.useCallback)(()=>t({}),[])]}function U(e){let t=(0,r.useId)();return`${e??t}`}let q=r.useLayoutEffect;function X(e){let t=(0,r.useRef)(e);return q(()=>{t.current=e},[e]),(0,r.useCallback)((...e)=>t.current?.(...e),[t])}function K(...e){return X(t=>{e.forEach(e=>{if(e)switch(typeof e){case"function":e(t);break;case"object":e.current=t}})})}let Y=(0,r.createContext)(null);function Q({children:e,className:t,defaultLayout:o,disableCursor:s,disabled:d,elementRef:u,groupRef:f,id:h,onLayoutChange:v,onLayoutChanged:b,orientation:S="horizontal",style:j,...k}){var N;let R,M,I=(0,r.useRef)({onLayoutChange:{},onLayoutChanged:{}}),E=X(e=>{w(I.current.onLayoutChange,e)||(I.current.onLayoutChange=e,v?.(e))}),D=X(e=>{w(I.current.onLayoutChanged,e)||(I.current.onLayoutChanged=e,b?.(e))}),T=U(h),O=(0,r.useRef)(null),[F,G]=H(),W=(0,r.useRef)({lastExpandedPanelSizes:{},layouts:{},panels:[],separators:[]}),Q=K(O,u);R=(0,r.useRef)({getLayout:()=>({}),setLayout:P}),(0,r.useImperativeHandle)(f,()=>R.current,[]),q(()=>{Object.assign(R.current,z({groupId:T}))});let Z=X((e,t)=>{let{interactionState:n,mountedGroups:r}=g;for(let i of r.keys())if(i.id===e){let e=r.get(i);if(e){let r=!1;return"active"===n.state&&(r=n.hitRegions.some(e=>e.group===i)),{flexGrow:e.layout[t]??1,pointerEvents:r?"none":void 0}}}return{flexGrow:o?.[t]??1}}),ee=(0,r.useMemo)(()=>({getPanelStyles:Z,id:T,orientation:S,registerPanel:e=>{let t=W.current;return t.panels=l(S,[...t.panels,e]),G(),()=>{t.panels=t.panels.filter(t=>t!==e),G()}},registerSeparator:e=>{let t=W.current;return t.separators=l(S,[...t.separators,e]),G(),()=>{t.separators=t.separators.filter(t=>t!==e),G()}}}),[Z,T,G,S]),et=(N={defaultLayout:o,disableCursor:s},M=(0,r.useRef)({...N}),q(()=>{for(let e in N)M.current[e]=N[e]},[N]),M.current),en=(0,r.useRef)(null);return q(()=>{let e,t,n,r,l,o,s,u,f,h,v,b,j=O.current;if(null===j)return;let z=W.current,k={defaultLayout:et.defaultLayout,disableCursor:!!et.disableCursor,disabled:!!d,element:j,id:T,inMemoryLastExpandedPanelSizes:W.current.lastExpandedPanelSizes,inMemoryLayouts:W.current.layouts,orientation:S,panels:z.panels,separators:z.separators};en.current=k;let N=(e=!0,i(k.element.ownerDocument.defaultView,"Cannot register an unmounted Group"),t=k.element.ownerDocument.defaultView.ResizeObserver,n=new Set,r=new Set,(l=new t(t=>{for(let n of t){let{borderBoxSize:t,target:r}=n;if(r===k.element){if(e){if(0===a({group:k}))return;y(e=>{let t=e.mountedGroups.get(k);if(t){let n=m(k),r=t.defaultLayoutDeferred?V(n):t.layout,i=C({layout:r,panelConstraints:n});return!t.defaultLayoutDeferred&&w(r,i)&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(e[n]!==t[n])return!1;return!0}(t.derivedPanelConstraints,n)?e:{mountedGroups:new Map(e.mountedGroups).set(k,{defaultLayoutDeferred:!1,derivedPanelConstraints:n,layout:i,separatorToPanels:t.separatorToPanels})}}return e})}}else!function(e,t,n){if(!n[0])return;let r=e.panels.find(e=>e.element===t);if(!r||!r.onResize)return;let i=a({group:e}),l="horizontal"===e.orientation?r.element.offsetWidth:r.element.offsetHeight,o=r.mutableValues.prevSize,s={asPercentage:p(l/i*100),inPixels:l};r.mutableValues.prevSize=s,r.onResize(s,r.id,o)}(k,r,t)}})).observe(k.element),k.panels.forEach(e=>{i(!n.has(e.id),`Panel ids must be unique; id "${e.id}" was used more than once`),n.add(e.id),e.onResize&&l.observe(e.element)}),o=a({group:k}),s=m(k),u=k.panels.map(({id:e})=>e).join(","),(f=k.defaultLayout)&&(function(e,t){let n=e.map(e=>e.id),r=Object.keys(t);if(n.length!==r.length)return!1;for(let e of n)if(!r.includes(e))return!1;return!0}(k.panels,f)||(f=void 0)),h=C({layout:k.inMemoryLayouts[u]??f??V(s),panelConstraints:s}),v=c(k),b=k.element.ownerDocument,y(e=>{let t=new Map;return J.set(b,(J.get(b)??0)+1),v.forEach(e=>{e.separator&&t.set(e.separator,e.panels)}),{mountedGroups:new Map(e.mountedGroups).set(k,{defaultLayoutDeferred:0===o,derivedPanelConstraints:s,layout:h,separatorToPanels:t})}}),k.separators.forEach(e=>{i(!r.has(e.id),`Separator ids must be unique; id "${e.id}" was used more than once`),r.add(e.id),e.element.addEventListener("keydown",L)}),1===J.get(b)&&(b.addEventListener("pointerdown",_,!0),b.addEventListener("pointerleave",A),b.addEventListener("pointermove",$),b.addEventListener("pointerup",B,!0)),function(){e=!1,J.set(b,Math.max(0,(J.get(b)??0)-1)),y(e=>{let t=new Map(e.mountedGroups);return t.delete(k),{mountedGroups:t}}),k.separators.forEach(e=>{e.element.removeEventListener("keydown",L)}),J.get(b)||(b.removeEventListener("pointerdown",_,!0),b.removeEventListener("pointerleave",A),b.removeEventListener("pointermove",$),b.removeEventListener("pointerup",B,!0)),l.disconnect()}),P=g.mountedGroups.get(k);if(P){let{defaultLayoutDeferred:e,derivedPanelConstraints:t,layout:n}=P;!e&&t.length>0&&(E(n),D(n),z.panels.forEach(e=>{e.scheduleUpdate()}))}let R=x.addListener("interactionStateChange",()=>{z.panels.forEach(e=>{e.scheduleUpdate()})}),M=x.addListener("mountedGroupsChange",e=>{let t=e.get(k);if(t){let{defaultLayoutDeferred:e,derivedPanelConstraints:n,layout:r}=t;if(e||0===n.length)return;let{interactionState:i}=g,a="active"!==i.state;E(r),a&&D(r),z.panels.forEach(e=>{e.scheduleUpdate()})}});return()=>{en.current=null,N(),R(),M()}},[d,T,D,E,S,F,et]),(0,r.useEffect)(()=>{let e=en.current;e&&(e.defaultLayout=o,e.disableCursor=!!s)}),(0,n.jsx)(Y.Provider,{value:ee,children:(0,n.jsx)("div",{...k,"aria-orientation":S,className:t,"data-group":!0,"data-testid":T,id:T,ref:Q,style:{height:"100%",width:"100%",overflow:"hidden",...j,display:"flex",flexDirection:"horizontal"===S?"row":"column",flexWrap:"nowrap"},children:e})})}function Z(){let e=(0,r.useContext)(Y);return i(e,"Group Context not found; did you render a Panel or Separator outside of a Group?"),e}function ee({children:e,className:t,collapsedSize:i="0%",collapsible:l=!1,defaultSize:o,elementRef:s,id:d,maxSize:u="100%",minSize:c="0%",onResize:f,panelRef:m,style:x,...v}){let b=!!d,j=U(d),z=(0,r.useRef)(null),k=K(z,s),[,N]=H(),{getPanelStyles:L,id:P,registerPanel:M}=Z(),I=null!==f,E=X((e,t,n)=>{f?.(e,d,n)});q(()=>{let e=z.current;if(null!==e)return M({element:e,id:j,idIsStable:b,mutableValues:{expandToSize:void 0,prevSize:void 0},onResize:I?E:void 0,panelConstraints:{collapsedSize:i,collapsible:l,defaultSize:o,maxSize:u,minSize:c},scheduleUpdate:N})},[i,l,o,N,I,j,b,u,c,E,M]),function(e,t){let{id:n}=Z(),i=(0,r.useRef)({collapse:R,expand:R,getSize:()=>({asPercentage:0,inPixels:0}),isCollapsed:()=>!1,resize:R});(0,r.useImperativeHandle)(t,()=>i.current,[]),q(()=>{Object.assign(i.current,function({groupId:e,panelId:t}){let n=()=>{let{mountedGroups:t}=g;for(let[n,{defaultLayoutDeferred:r,derivedPanelConstraints:i,layout:a,separatorToPanels:l}]of t)if(n.id===e)return{defaultLayoutDeferred:r,derivedPanelConstraints:i,group:n,layout:a,separatorToPanels:l};throw Error(`Group ${e} not found`)},r=()=>{let e=n().derivedPanelConstraints.find(e=>e.panelId===t);if(void 0!==e)return e;throw Error(`Panel constraints not found for Panel ${t}`)},i=()=>{let e=n().group.panels.find(e=>e.id===t);if(void 0!==e)return e;throw Error(`Layout not found for Panel ${t}`)},l=()=>{let e=n().layout[t];if(void 0!==e)return e;throw Error(`Layout not found for Panel ${t}`)},o=e=>{let r=l();if(e===r)return;let{defaultLayoutDeferred:i,derivedPanelConstraints:a,group:o,layout:s,separatorToPanels:d}=n(),u=o.panels.findIndex(e=>e.id===t),c=u===o.panels.length-1,f=C({layout:S({delta:c?r-e:e-r,initialLayout:s,panelConstraints:a,pivotIndices:c?[u-1,u]:[u,u+1],prevLayout:s,trigger:"imperative-api"}),panelConstraints:a});w(s,f)||y(e=>({mountedGroups:new Map(e.mountedGroups).set(o,{defaultLayoutDeferred:i,derivedPanelConstraints:a,layout:f,separatorToPanels:d})}))};return{collapse:()=>{let{collapsible:e,collapsedSize:t}=r(),{mutableValues:n}=i(),a=l();e&&a!==t&&(n.expandToSize=a,o(t))},expand:()=>{let{collapsible:e,collapsedSize:t,minSize:n}=r(),{mutableValues:a}=i(),s=l();if(e&&s===t){let e=a.expandToSize??n;0===e&&(e=1),o(e)}},getSize:()=>{let{group:e}=n(),t=l(),{element:r}=i();return{asPercentage:t,inPixels:"horizontal"===e.orientation?r.offsetWidth:r.offsetHeight}},isCollapsed:()=>{let{collapsible:e,collapsedSize:t}=r(),n=l();return e&&h(t,n)},resize:e=>{if(l()!==e){let t;switch(typeof e){case"number":{let{group:r}=n();t=p(e/a({group:r})*100);break}case"string":t=parseFloat(e)}o(t)}}}}({groupId:n,panelId:e}))})}(j,m);let D=L(P,j);return(0,n.jsx)("div",{...v,"data-panel":!0,"data-testid":j,id:j,ref:k,style:{...et,flexBasis:0,flexShrink:1,overflow:"hidden",...D},children:(0,n.jsx)("div",{className:t,style:{width:"100%",height:"100%",...x},children:e})})}Q.displayName="Group",ee.displayName="Panel";let et={minHeight:0,maxHeight:"100%",height:"auto",minWidth:0,maxWidth:"100%",width:"auto",border:"none",borderWidth:0,padding:0,margin:0};function en({children:e,className:t,elementRef:i,id:a,style:l,...o}){let s=U(a),[d,u]=(0,r.useState)({}),[c,f]=(0,r.useState)("inactive"),p=(0,r.useRef)(null),m=K(p,i),{id:h,orientation:g,registerSeparator:y}=Z();return q(()=>{let e=p.current;if(null!==e){let t={element:e,id:s},n=y(t),r=x.addListener("interactionStateChange",e=>{f("inactive"!==e.state&&e.hitRegions.some(e=>e.separator===t)?e.state:"inactive")}),i=x.addListener("mountedGroupsChange",e=>{e.forEach(({derivedPanelConstraints:e,layout:n,separatorToPanels:r},i)=>{if(i.id===h){let a=r.get(t);if(a){let t=a[0],r=i.panels.indexOf(t);u(function({layout:e,panelConstraints:t,panelId:n,panelIndex:r}){let i,a,l=e[n],o=t.find(e=>e.panelId===n);if(o){let s=o.maxSize,d=a=o.collapsible?o.collapsedSize:o.minSize,u=[r,r+1];a=C({layout:S({delta:d-l,initialLayout:e,panelConstraints:t,pivotIndices:u,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n],i=C({layout:S({delta:s-l,initialLayout:e,panelConstraints:t,pivotIndices:u,prevLayout:e,trigger:"keyboard"}),panelConstraints:t})[n]}return{valueControls:n,valueMax:i,valueMin:a,valueNow:l}}({layout:n,panelConstraints:e,panelId:t.id,panelIndex:r}))}}})});return()=>{r(),i(),n()}}},[h,s,y]),(0,n.jsx)("div",{...o,"aria-controls":d.valueControls,"aria-orientation":"horizontal"===g?"vertical":"horizontal","aria-valuemax":d.valueMax,"aria-valuemin":d.valueMin,"aria-valuenow":d.valueNow,children:e,className:t,"data-separator":c,"data-testid":s,id:s,ref:m,role:"separator",style:{flexBasis:"auto",...l,flexGrow:0,flexShrink:0},tabIndex:0})}function er({contracts:e,selectedContractId:t,onContractChange:r,strictMode:i,onStrictModeChange:a,batchMode:l,onBatchModeChange:o}){return(0,n.jsxs)("div",{className:"border-b border-border px-4 py-1.5",style:{flexShrink:0},children:[(0,n.jsxs)("div",{className:"flex items-end gap-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("label",{htmlFor:"contract-select",className:"block text-sm font-medium mb-0.5",children:"Select Contract"}),(0,n.jsxs)("select",{id:"contract-select",value:t,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-input rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[(0,n.jsx)("option",{value:"",children:"Choose a contract..."}),e.map(e=>(0,n.jsxs)("option",{value:e.id,children:[e.name," (v",e.version,")"]},e.id))]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4 pb-0.5",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",id:"batch-mode",checked:l,onChange:e=>o(e.target.checked),className:"h-4 w-4 rounded border-input text-primary focus:ring-2 focus:ring-ring"}),(0,n.jsx)("label",{htmlFor:"batch-mode",className:"text-sm font-medium cursor-pointer",children:"Batch Mode"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("input",{type:"checkbox",id:"strict-mode",checked:i,onChange:e=>a(e.target.checked),className:"h-4 w-4 rounded border-input text-primary focus:ring-2 focus:ring-ring"}),(0,n.jsx)("label",{htmlFor:"strict-mode",className:"text-sm font-medium cursor-pointer",children:"Strict Mode"})]})]})]}),(l||i)&&(0,n.jsxs)("div",{className:"flex gap-4 mt-1",children:[l&&(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Batch mode: Enter an array of objects to validate multiple records at once"}),i&&(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Strict mode: Raises exceptions on validation errors instead of returning error details"})]})]})}en.displayName="Separator";var ei=e.i(78583),ea=e.i(39616),el=e.i(98919),eo=e.i(52571),es=e.i(56909),ed=e.i(9165);let eu=[{id:"schema",label:"Schema",icon:(0,n.jsx)(ei.FileText,{className:"h-4 w-4"})},{id:"coercion",label:"Coercion",icon:(0,n.jsx)(ea.Settings,{className:"h-4 w-4"})},{id:"validation",label:"Validation",icon:(0,n.jsx)(el.Shield,{className:"h-4 w-4"})},{id:"metadata",label:"Metadata",icon:(0,n.jsx)(eo.Info,{className:"h-4 w-4"})}],ec=(0,r.memo)(function({contract:e,onChange:t,contractId:i,schemaId:a,onSave:l}){let[o,s]=(0,r.useState)("schema"),[d,u]=(0,r.useState)({schema:"",coercion:"",validation:"",metadata:""}),[c,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),[h,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&u({schema:JSON.stringify(e.schema||{},null,2),coercion:JSON.stringify(e.coercion_rules||{},null,2),validation:JSON.stringify(e.validation_rules||{},null,2),metadata:JSON.stringify(e.metadata||{},null,2)})},[e]);let x=async()=>{if(!e||!a)return void m("Contract or schema ID is missing");f(!0),m(null),g(!1);try{let t={schema:JSON.parse(d.schema),coercion:JSON.parse(d.coercion),validation:JSON.parse(d.validation),metadata:JSON.parse(d.metadata)},n=t.metadata?.version||e.metadata?.version||"1.0.0";await Promise.all([ed.api.metadata.storeCoercionRules({schema_id:a,coercion_rules:t.coercion,version:n}),ed.api.metadata.storeValidationRules({schema_id:a,validation_rules:t.validation,version:n}),ed.api.metadata.storeMetadata({schema_id:a,metadata:t.metadata,version:n})]),g(!0),setTimeout(()=>g(!1),3e3),l&&l()}catch(e){e instanceof ed.ApiError?m(e.message||"Failed to save contract"):e instanceof Error?m(e.message):m("Failed to save contract")}finally{f(!1)}},y=d[o];return(0,n.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",minWidth:0,minHeight:0,overflow:"hidden"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",borderBottom:"1px solid #e5e7eb",height:"3rem",flexShrink:0,minWidth:0,overflow:"hidden"},children:[(0,n.jsx)("div",{style:{flex:1,display:"flex",height:"3rem",overflow:"hidden",minWidth:0},children:eu.map(t=>(0,n.jsx)("button",{onClick:()=>s(t.id),disabled:!e,style:{flex:"1 1 0%",padding:"0 0.5rem",height:"3rem",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:500,transition:"colors",borderBottom:o===t.id?"2px solid #3b82f6":"none",borderTop:"none",borderLeft:"none",borderRight:"none",backgroundColor:"transparent",color:o===t.id?"inherit":"#6b7280",cursor:e?"pointer":"not-allowed",opacity:e?1:.5,minWidth:0,overflow:"hidden",outline:"none"},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:0},children:[t.icon,(0,n.jsx)("span",{children:t.label})]})},t.id))}),(0,n.jsxs)("div",{style:{padding:"0 0.5rem",display:"flex",alignItems:"center",gap:"0.5rem",borderLeft:"1px solid #e5e7eb",flexShrink:0},children:[p&&(0,n.jsx)("span",{style:{fontSize:"0.75rem",color:"#dc2626",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis"},children:p}),h&&(0,n.jsx)("span",{style:{fontSize:"0.75rem",color:"#16a34a"},children:"Saved!"}),(0,n.jsxs)("button",{onClick:x,disabled:c||!a||!e,style:{height:"2rem",padding:"0 0.75rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem",backgroundColor:"transparent",cursor:!c&&a&&e?"pointer":"not-allowed",opacity:!c&&a&&e?1:.5,display:"flex",alignItems:"center",fontSize:"0.875rem",minWidth:0},children:[(0,n.jsx)(es.Save,{className:"h-3 w-3",style:{marginRight:"0.25rem"}}),(0,n.jsx)("span",{children:"Save"})]})]})]}),(0,n.jsx)("div",{style:{flex:1,overflow:"hidden",position:"relative",minWidth:0,minHeight:0},children:e?(0,n.jsx)("textarea",{value:y,onChange:n=>((n,r)=>{if(u(e=>({...e,[n]:r})),e)try{let i=JSON.parse(r),a={};switch(n){case"schema":a.schema=i;break;case"coercion":a.coercion_rules=i;break;case"validation":a.validation_rules=i;break;case"metadata":a.metadata=i}t({...e,...a})}catch{}})(o,n.target.value),style:{width:"100%",height:"100%",padding:"1rem",fontFamily:"monospace",fontSize:"0.875rem",border:"none",outline:"none",resize:"none",backgroundColor:"transparent",color:"inherit",boxSizing:"border-box"},placeholder:`Enter ${eu.find(e=>e.id===o)?.label.toLowerCase()}...`,spellCheck:!1}):(0,n.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)(ei.FileText,{style:{height:"3rem",width:"3rem",margin:"0 auto 1rem",opacity:.5}}),(0,n.jsx)("p",{children:i?"Loading contract...":"Select a contract to edit"})]})})})]})});var ef=e.i(69074);function ep({value:e,onChange:t,isValidating:i,hasErrors:a,batchMode:l=!1}){let o=(0,r.useRef)(null),s=(0,r.useCallback)(e=>{let n=e.target.files?.[0];if(!n)return;let r=new FileReader;r.onload=e=>{let n=e.target?.result;try{let e=JSON.parse(n);t(JSON.stringify(e,null,2))}catch{t(n)}},r.readAsText(n)},[t]),d=(0,r.useCallback)(()=>{l?t(JSON.stringify([{name:"John Doe",age:30,email:"john@example.com"},{name:"Jane Smith",age:25,email:"jane@example.com"}],null,2)):t(JSON.stringify({name:"John Doe",age:30,email:"john@example.com"},null,2))},[l,t]);return(0,n.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",minWidth:0,minHeight:0,overflow:"hidden"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",height:"3rem",borderBottom:"1px solid #e5e7eb",flexShrink:0,minWidth:0},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,n.jsx)(ei.FileText,{style:{height:"1rem",width:"1rem",color:"#6b7280"}}),(0,n.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:500},children:"Sample Data"}),i&&(0,n.jsx)("span",{style:{fontSize:"0.75rem",color:"#6b7280",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:"Validating..."})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,n.jsx)("button",{onClick:d,style:{height:"1.75rem",fontSize:"0.75rem",padding:"0 0.5rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem",backgroundColor:"transparent",cursor:"pointer"},children:"Example"}),(0,n.jsxs)("button",{onClick:()=>o.current?.click(),style:{height:"1.75rem",fontSize:"0.75rem",padding:"0 0.5rem",border:"1px solid #e5e7eb",borderRadius:"0.375rem",backgroundColor:"transparent",cursor:"pointer",display:"flex",alignItems:"center"},children:[(0,n.jsx)(ef.Upload,{style:{height:"0.75rem",width:"0.75rem",marginRight:"0.25rem"}}),"Upload"]}),(0,n.jsx)("input",{ref:o,type:"file",accept:".json,.txt",onChange:s,style:{display:"none"}})]})]}),(0,n.jsxs)("div",{style:{flex:1,overflow:"hidden",position:"relative",minWidth:0,minHeight:0},children:[(0,n.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),style:{width:"100%",height:"100%",padding:"1rem",fontFamily:"monospace",fontSize:"0.875rem",border:"none",outline:"none",resize:"none",backgroundColor:"transparent",color:"inherit",boxSizing:"border-box"},placeholder:l?'[{"field1": "value1"}, {"field2": "value2"}]':'{"field1": "value1", "field2": "value2"}',spellCheck:!1}),a&&(0,n.jsx)("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem"},children:(0,n.jsx)("div",{style:{height:"0.5rem",width:"0.5rem",backgroundColor:"#dc2626",borderRadius:"50%",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"}})})]})]})}var em=e.i(95468),eh=e.i(73884),eg=e.i(63209);let ex=(0,e.i(75254).default)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);var ey=e.i(19455);function ev({error:e,onFixInContract:t,onFixInData:r}){return(0,n.jsx)("div",{className:"border border-destructive/50 rounded-lg p-4 bg-destructive/5",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)(eg.AlertCircle,{className:"h-5 w-5 text-destructive flex-shrink-0 mt-0.5"}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsx)("span",{className:"font-semibold text-destructive",children:e.field}),void 0!==e.input_value&&(0,n.jsxs)("span",{className:"text-xs text-muted-foreground font-mono",children:["(",JSON.stringify(e.input_value),")"]})]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:e.message}),(t||r)&&(0,n.jsxs)("div",{className:"flex gap-2",children:[t&&(0,n.jsxs)(ey.Button,{variant:"outline",size:"sm",onClick:t,className:"h-7 text-xs",children:[(0,n.jsx)(ei.FileText,{className:"h-3 w-3 mr-1"}),"Fix in Contract"]}),r&&(0,n.jsxs)(ey.Button,{variant:"outline",size:"sm",onClick:r,className:"h-7 text-xs",children:[(0,n.jsx)(ex,{className:"h-3 w-3 mr-1"}),"Fix in Data"]})]})]})]})})}function eb(e){if(null===e)return{type:"null"};let t=typeof e;return"number"===t?Number.isInteger(e)?{type:"integer"}:{type:"number"}:"boolean"===t?{type:"boolean"}:"string"===t?{type:"string"}:Array.isArray(e)?{type:"array",items:e.length>0?eb(e[0]):{}}:"object"===t?{type:"object",properties:{}}:{type:"string"}}let eS=(0,r.memo)(function({result:e,isValidating:t,contract:i,sampleData:a,onContractChange:l,onDataChange:o}){let s=(0,r.useCallback)(e=>{if(!i)return;let t=((e,t,n)=>{try{let r=JSON.parse(n),i={...e};i.schema||(i.schema={type:"object",properties:{},required:[]}),i.schema.properties||(i.schema.properties={}),i.schema.required||(i.schema.required=[]);let a=t.field,l=void 0!==r[a]?r[a]:t.input_value;if(i.schema.properties[a]){let e=i.schema.properties[a];if(t.message.includes("required")||t.message.includes("missing"))i.schema.required?.includes(a)&&(i.schema.required=i.schema.required.filter(e=>e!==a));else if(t.message.includes("type"))i.schema.properties[a]={...e,...eb(l)};else if(t.message.includes("minimum")||t.message.includes("greater than")){let n=t.message.match(/should be (greater than|at least) ([\d.]+)/);n&&"number"===e.type&&(e.minimum=parseFloat(n[2])-.1)}else if(t.message.includes("maximum")||t.message.includes("less than")){let n=t.message.match(/should be (less than|at most) ([\d.]+)/);n&&"number"===e.type&&(e.maximum=parseFloat(n[2])+.1)}}else i.schema.properties[a]=eb(l);return i}catch{return null}})(i,e,a);t&&l(t)},[i,a,l]),d=(0,r.useCallback)(e=>{try{let t=JSON.parse(a),n=((e,t,n)=>{let r={...e},i=t.field;if(!n?.schema?.properties?.[i])return null;let a=n.schema.properties[i],l=r[i];if(t.message.includes("type"))if("number"===a.type&&"string"==typeof l){let e=parseFloat(l);isNaN(e)||(r[i]=e)}else if("integer"===a.type&&"string"==typeof l){let e=parseInt(l,10);isNaN(e)||(r[i]=e)}else"boolean"===a.type&&"string"==typeof l&&(r[i]="true"===l.toLowerCase());return(t.message.includes("required")||t.message.includes("missing"))&&(void 0!==a.default?r[i]=a.default:r[i]=function(e){switch(e){case"string":return"";case"number":case"integer":return 0;case"boolean":return!1;case"array":return[];case"object":return{};default:return null}}(a.type)),t.message.includes("minimum")&&"number"==typeof l?void 0!==a.minimum&&(r[i]=a.minimum):t.message.includes("maximum")&&"number"==typeof l&&void 0!==a.maximum&&(r[i]=a.maximum),r})(t,e,i);n&&o(JSON.stringify(n,null,2))}catch{}},[a,i,o]),u=e=>e&&"results"in e&&"total_count"in e,c=t?{backgroundColor:"#f3f4f6",icon:(0,n.jsx)("div",{style:{animation:"spin 1s linear infinite",borderRadius:"50%",height:"1.25rem",width:"1.25rem",borderBottom:"2px solid #3b82f6",borderTop:"2px solid transparent",borderLeft:"2px solid transparent",borderRight:"2px solid transparent",flexShrink:0}}),text:"Validating...",color:"#6b7280"}:e?u(e)?0===e.invalid_count?{backgroundColor:"#f0fdf4",icon:(0,n.jsx)(em.CheckCircle2,{style:{height:"1.25rem",width:"1.25rem",color:"#16a34a",flexShrink:0}}),text:`All Valid (${e.valid_count}/${e.total_count})`,color:"#16a34a"}:{backgroundColor:"#fef2f2",icon:(0,n.jsx)(eh.XCircle,{style:{height:"1.25rem",width:"1.25rem",color:"#dc2626",flexShrink:0}}),text:`${e.invalid_count} Invalid, ${e.valid_count} Valid (${e.total_count} total)`,color:"#dc2626"}:e.is_valid?{backgroundColor:"#f0fdf4",icon:(0,n.jsx)(em.CheckCircle2,{style:{height:"1.25rem",width:"1.25rem",color:"#16a34a",flexShrink:0}}),text:"Valid",color:"#16a34a"}:{backgroundColor:"#fef2f2",icon:(0,n.jsx)(eh.XCircle,{style:{height:"1.25rem",width:"1.25rem",color:"#dc2626",flexShrink:0}}),text:`Invalid (${e.error_count} error${1!==e.error_count?"s":""})`,color:"#dc2626"}:{backgroundColor:"#f3f4f6",icon:(0,n.jsx)(eg.AlertCircle,{style:{height:"1.25rem",width:"1.25rem",color:"#6b7280",flexShrink:0}}),text:"Waiting for validation",color:"#6b7280"};return(0,n.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",minWidth:0,minHeight:0,overflow:"hidden"},children:[(0,n.jsx)("div",{style:{padding:"0 1rem",height:"3rem",display:"flex",alignItems:"center",borderBottom:"1px solid #e5e7eb",backgroundColor:c.backgroundColor,flexShrink:0,minWidth:0},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.icon,(0,n.jsx)("div",{style:{minWidth:0},children:(0,n.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:600,color:c.color,overflow:"hidden",textOverflow:"ellipsis"},children:c.text})})]})}),(0,n.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"1rem",minWidth:0,minHeight:0},children:[t&&(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#6b7280"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("div",{style:{animation:"spin 1s linear infinite",borderRadius:"50%",height:"2rem",width:"2rem",borderBottom:"2px solid #3b82f6",borderTop:"2px solid transparent",borderLeft:"2px solid transparent",borderRight:"2px solid transparent",margin:"0 auto 0.5rem"}}),(0,n.jsx)("p",{style:{fontSize:"0.875rem",color:"#6b7280"},children:"Validating..."})]})}),!t&&!e&&(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#6b7280"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)(eg.AlertCircle,{style:{height:"3rem",width:"3rem",margin:"0 auto 1rem",opacity:.5}}),(0,n.jsx)("p",{children:"Enter data to validate"})]})}),!t&&e&&u(e)&&(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,n.jsxs)("div",{style:{padding:"0.75rem",backgroundColor:"#f3f4f6",borderRadius:"0.375rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:600},children:"Batch Summary:"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"1rem",fontSize:"0.875rem"},children:[(0,n.jsxs)("span",{style:{color:"#16a34a",fontWeight:600},children:[e.valid_count," Valid"]}),(0,n.jsxs)("span",{style:{color:"#dc2626",fontWeight:600},children:[e.invalid_count," Invalid"]}),(0,n.jsxs)("span",{style:{color:"#6b7280"},children:[e.total_count," Total"]})]})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,n.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:600},children:"Results:"}),e.results.map((e,t)=>(0,n.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:"0.375rem",padding:"0.75rem",backgroundColor:e.is_valid?"#f0fdf4":"#fef2f2"},children:[(0,n.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:500},children:e.is_valid?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(em.CheckCircle2,{style:{height:"1rem",width:"1rem",color:"#16a34a"}}),(0,n.jsxs)("span",{style:{color:"#16a34a"},children:["Record ",t+1,": Valid"]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eh.XCircle,{style:{height:"1rem",width:"1rem",color:"#dc2626"}}),(0,n.jsxs)("span",{style:{color:"#dc2626"},children:["Record ",t+1,": Invalid (",e.error_count," error",1!==e.error_count?"s":"",")"]})]})}),e.is_valid&&null!=e.data?(0,n.jsx)("div",{style:{marginTop:"0.5rem"},children:(0,n.jsx)("pre",{style:{backgroundColor:"#ffffff",padding:"0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",overflow:"auto",margin:0,border:"1px solid #e5e7eb"},children:JSON.stringify(e.data,null,2)})}):null,!e.is_valid&&e.errors&&e.errors.length>0&&(0,n.jsx)("div",{style:{marginTop:"0.5rem",display:"flex",flexDirection:"column",gap:"0.5rem"},children:e.errors.map((e,t)=>(0,n.jsx)(ev,{error:e,onFixInContract:()=>s(e),onFixInData:()=>d(e)},t))})]},t))]})]}),!t&&e&&!u(e)&&e.is_valid&&null!=e.data&&(0,n.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:600,marginBottom:"0.5rem"},children:"Validated Data:"}),(0,n.jsx)("pre",{style:{backgroundColor:"#f3f4f6",padding:"0.75rem",borderRadius:"0.375rem",fontSize:"0.75rem",overflow:"auto",margin:0},children:JSON.stringify(e.data,null,2)})]}),!t&&e&&!u(e)&&!e.is_valid&&e.errors&&e.errors.length>0&&(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[(0,n.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:600},children:"Errors:"}),e.errors.map((e,t)=>(0,n.jsx)(ev,{error:e,onFixInContract:()=>s(e),onFixInData:()=>d(e)},t))]})]})]})});var ej=e.i(46652);function ew(){let{contracts:e,loading:t}=(0,ej.useContracts)(),[i,a]=(0,r.useState)(""),[l,o]=(0,r.useState)(!1),[s,d]=(0,r.useState)(!1),[u,c]=(0,r.useState)(null),[f,p]=(0,r.useState)(null),[m,h]=(0,r.useState)("{}"),[g,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!i){c(null),p(null);return}(async()=>{x(!0);try{let[e,t]=await Promise.all([ed.api.contracts.get(i),ed.api.contracts.buildFromId(i,{include_metadata:!0,include_ownership:!0,include_governance:!0})]);p(e.schema_id||null),c(t.contract)}catch(e){console.error("Failed to load contract:",e),c(null),p(null)}finally{x(!1)}})()},[i]);let{result:y,isValidating:v,error:b}=function(e,t,n={}){let{debounceMs:i=500,enabled:a=!0,strict:l=!1,batchMode:o=!1}=n,[s,d]=(0,r.useState)(null),[u,c]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),m=(0,r.useCallback)(async()=>{if(!e||!t||!a){d(null),p(null);return}c(!0),p(null);try{let n=JSON.parse(t),r=Array.isArray(n);if(o||r){let t=r?n:[n];if(0===t.length){d(null),p(null),c(!1);return}console.log("Calling batch validation API",{hasContract:!!e,hasSchema:!!e?.schema,recordCount:t.length,strict:l});let i=await ed.api.validation.validateBatch({contract:e,data_list:t,strict:l});console.log("Batch validation response:",i),d(i)}else{if(0===Object.keys(n).length&&n.constructor===Object){d(null),p(null),c(!1);return}console.log("Calling validation API",{hasContract:!!e,hasSchema:!!e?.schema,dataKeys:Object.keys(n||{}),strict:l});let t=await ed.api.validation.validate({contract:e,data:n,strict:l});console.log("Validation response:",t),d(t)}}catch(t){if(console.error("Validation error:",t),t.message?.includes("JSON")||t.message?.includes("Unexpected token")){d(null),p(null),c(!1);return}let e=t.response?.detail||t.message||"Validation failed";l?o?d({results:[{is_valid:!1,data:null,errors:[{field:"validation",message:e}],error_count:1}],total_count:1,valid_count:0,invalid_count:1}):d({is_valid:!1,data:null,errors:[{field:"validation",message:e}],error_count:1}):(p(e),d(null))}finally{c(!1)}},[e,t,a,l,o]);return(0,r.useEffect)(()=>{let n;if(!e||!t||!a){d(null),p(null);return}try{if(n=JSON.parse(t),Array.isArray(n)){if(0===n.length){d(null),p(null);return}}else if(0===Object.keys(n).length&&n.constructor===Object){d(null),p(null);return}}catch{d(null),p(null);return}console.log("Triggering validation",{hasContract:!!e,hasSchema:!!e?.schema,hasData:!!n,batchMode:o,contractKeys:e?Object.keys(e):[]});let r=setTimeout(()=>{m()},i);return()=>clearTimeout(r)},[e,t,i,a,o,m]),{result:s,isValidating:u,error:f,validate:m}}(u,m,{debounceMs:500,enabled:!!u&&!!m&&""!==m.trim()&&"{}"!==m,strict:l,batchMode:s}),S=(0,r.useCallback)(e=>{c(e)},[]),j=(0,r.useCallback)(async()=>{if(i){x(!0);try{let[e,t]=await Promise.all([ed.api.contracts.get(i),ed.api.contracts.buildFromId(i,{include_metadata:!0,include_ownership:!0,include_governance:!0})]);p(e.schema_id||null),c(t.contract)}catch(e){console.error("Failed to reload contract:",e)}finally{x(!1)}}},[i]);return t?(0,n.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,n.jsx)("div",{className:"text-gray-500",children:"Loading contracts..."})}):(0,n.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,n.jsx)(er,{contracts:e,selectedContractId:i,onContractChange:a,strictMode:l,onStrictModeChange:o,batchMode:s,onBatchModeChange:d}),(0,n.jsxs)(Q,{orientation:"horizontal",className:"flex-1",children:[(0,n.jsx)(ee,{defaultSize:30,minSize:15,children:(0,n.jsx)("div",{className:"flex flex-col h-full",children:(0,n.jsx)(ec,{contract:g?null:u,onChange:S,contractId:i,schemaId:f,onSave:j})})}),(0,n.jsx)(en,{className:"w-1 bg-gray-300 hover:bg-blue-500 transition-colors"}),(0,n.jsx)(ee,{defaultSize:40,minSize:20,children:(0,n.jsx)("div",{className:"flex flex-col h-full",children:(0,n.jsx)(ep,{value:m,onChange:h,isValidating:v,hasErrors:!!y&&("is_valid"in y?!y.is_valid:y.invalid_count>0),batchMode:s})})}),(0,n.jsx)(en,{className:"w-1 bg-gray-300 hover:bg-blue-500 transition-colors"}),(0,n.jsx)(ee,{defaultSize:30,minSize:15,children:(0,n.jsx)("div",{className:"flex flex-col h-full",children:(0,n.jsx)(eS,{result:y,isValidating:v,contract:u,sampleData:m,onContractChange:S,onDataChange:h})})})]})]})}function eC(){return(0,n.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-6 pb-1",children:(0,n.jsxs)("div",{className:"mb-1",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-1",children:"Validation"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Test and validate data against contracts and schemas"})]})}),(0,n.jsx)("div",{className:"w-full px-2",style:{height:"calc(100vh - 6rem)"},children:(0,n.jsx)(ew,{})})]})}e.s(["default",()=>eC],81704)}]);