(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55824,16370,e=>{"use strict";var t=e.i(43476);function a({title:e,description:a,actions:s}){return(0,t.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-1",children:e}),a&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:a})]}),s&&(0,t.jsx)("div",{className:"flex gap-2",children:s})]})}e.s(["PageHeader",()=>a],16370),e.s([],55824)},61246,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function s({className:e,...s}){return(0,t.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...s})}function i({size:e="md",className:s}){return(0,t.jsx)("div",{className:(0,a.cn)("flex items-center justify-center",s),children:(0,t.jsx)("div",{className:(0,a.cn)("animate-spin rounded-full border-2 border-muted border-t-primary",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[e])})})}function r({message:e="Loading..."}){return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(i,{size:"lg",className:"mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:e})]})})}function l(){return(0,t.jsxs)("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:[(0,t.jsx)(s,{className:"h-6 w-3/4"}),(0,t.jsx)(s,{className:"h-4 w-full"}),(0,t.jsx)(s,{className:"h-4 w-5/6"}),(0,t.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,t.jsx)(s,{className:"h-9 w-20"}),(0,t.jsx)(s,{className:"h-9 w-20"})]})]})}function d({rows:e=5}){return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(s,{className:"h-10 w-full"}),Array.from({length:e}).map((e,a)=>(0,t.jsx)(s,{className:"h-12 w-full"},a))]})}e.s(["CardSkeleton",()=>l,"PageLoading",()=>r,"TableSkeleton",()=>d,"default",()=>i],61246)},43668,e=>{"use strict";var t=e.i(47167);let a="pycharter_settings",s={apiServer:{url:t.default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000"},database:{enabled:!1},dlq:{enabled:!1}};function i(){try{let e=localStorage.getItem(a);if(e){let t=JSON.parse(e);return{...s,...t,apiServer:{...s.apiServer,...t.apiServer},database:{...s.database,...t.database},dlq:{...s.dlq,...t.dlq}}}}catch(e){console.error("Failed to load settings:",e)}return s}function r(e){try{localStorage.setItem(a,JSON.stringify(e))}catch(e){throw console.error("Failed to save settings:",e),e}}function l(){return i().apiServer.url||s.apiServer.url}e.s(["getApiBaseUrl",()=>l,"getSettings",()=>i,"saveSettings",()=>r])},9165,e=>{"use strict";var t=e.i(43668);class a extends Error{status;response;constructor(e,t,a){super(e),this.status=t,this.response=a,this.name="ApiError"}}async function s(e,s){let i=`${(0,t.getApiBaseUrl)()}${e}`;try{let e=await fetch(i,{...s,headers:{"Content-Type":"application/json",...s?.headers}});if(!e.ok){let t;try{t=await e.json()}catch{t={detail:e.statusText}}let s=t.detail||`API request failed: ${e.statusText}`;throw 422===e.status&&t.details&&Array.isArray(t.details)&&(s=t.details.map(e=>{let t=e.loc?.join(".")||e.field||"field",a=e.msg||e.message||"validation error";return`${t}: ${a}`}).join("; ")||s),new a(s,e.status,t)}let t=e.headers.get("content-type");if(t&&t.includes("application/json"))return e.json();return e.text()}catch(s){if(s instanceof TypeError&&"Failed to fetch"===s.message){let s=(0,t.getApiBaseUrl)();throw new a(`Unable to connect to API server at ${s}. Please ensure the API server is running and the URL is correct.`,0,{originalError:"NetworkError",apiUrl:s,endpoint:e,suggestion:"Check your API server settings in the Settings page"})}throw s}}async function i(e){return s(e,{method:"GET"})}async function r(e,t){return s(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async function l(e,t){return s(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async function d(e,s){let i=`${(0,t.getApiBaseUrl)()}${e}`,r=await fetch(i,{method:"POST",body:s});if(!r.ok){let e;try{e=await r.json()}catch{e={detail:r.statusText}}throw new a(e.detail||`API request failed: ${r.statusText}`,r.status,e)}let l=r.headers.get("content-type");return l&&l.includes("application/json")?r.json():r.text()}async function n(e){let s=`${(0,t.getApiBaseUrl)()}${e}`,i=await fetch(s,{method:"GET"});if(!i.ok){let e;try{e=await i.json()}catch{e={detail:i.statusText}}throw new a(e.detail||`API request failed: ${i.statusText}`,i.status,e)}return i.blob()}e.s(["ApiError",()=>a,"api",0,{contracts:{list:()=>i("/api/v1/contracts"),get:e=>i(`/api/v1/contracts/${e}`),parse:e=>r("/api/v1/contracts/parse",{contract:e}),parseFile:(e,t)=>{let a=new FormData;return a.append("file",e),void 0!==t&&a.append("validate",String(t)),d("/api/v1/contracts/parse/upload",a)},build:e=>r("/api/v1/contracts/build",e),buildFromId:(e,t)=>{let a=new URLSearchParams;t?.include_metadata!==void 0&&a.append("include_metadata",String(t.include_metadata)),t?.include_ownership!==void 0&&a.append("include_ownership",String(t.include_ownership)),t?.include_governance!==void 0&&a.append("include_governance",String(t.include_governance));let s=a.toString();return r(`/api/v1/contracts/${e}/build${s?`?${s}`:""}`,{})},createFromArtifacts:e=>r("/api/v1/contracts/create-from-artifacts",e),createMixed:e=>r("/api/v1/contracts/create-mixed",e),update:(e,t)=>l(`/api/v1/contracts/${e}`,t)},metadata:{listSchemas:()=>i("/api/v1/metadata/schemas"),getSchema:(e,t)=>{let a=t?`?version=${t}`:"";return i(`/api/v1/metadata/schemas/${e}${a}`)},getCompleteSchema:(e,t)=>{let a=t?`?version=${t}`:"";return i(`/api/v1/metadata/schemas/${e}/complete${a}`)},storeSchema:e=>r("/api/v1/metadata/schemas",e),getMetadata:(e,t)=>{let a=t?`?version=${t}`:"";return i(`/api/v1/metadata/metadata/${e}${a}`)},storeMetadata:e=>r("/api/v1/metadata/metadata",e),getCoercionRules:(e,t)=>{let a=t?`?version=${t}`:"";return i(`/api/v1/metadata/coercion-rules/${e}${a}`)},storeCoercionRules:e=>r("/api/v1/metadata/coercion-rules",e),getValidationRules:(e,t)=>{let a=t?`?version=${t}`:"";return i(`/api/v1/metadata/validation-rules/${e}${a}`)},storeValidationRules:e=>r("/api/v1/metadata/validation-rules",e),getEntityList:e=>i(`/api/v1/metadata/${e}`),createEntity:(e,t)=>r(`/api/v1/metadata/${e}`,t),updateEntity:(e,t,a)=>l(`/api/v1/metadata/${e}/${t}`,a),listArtifacts:()=>i("/api/v1/metadata/artifacts")},validation:{validate:e=>r("/api/v1/validation/validate",e),validateBatch:e=>r("/api/v1/validation/validate-batch",e)},schemas:{generate:e=>r("/api/v1/schemas/generate",e),convert:e=>r("/api/v1/schemas/convert",e)},quality:{listMetrics:e=>{let t=new URLSearchParams;e?.schema_id&&t.append("schema_id",e.schema_id),e?.limit&&t.append("limit",e.limit.toString()),e?.offset&&t.append("offset",e.offset.toString());let a=t.toString();return i(`/api/v1/quality/metrics${a?`?${a}`:""}`)},getMetric:e=>i(`/api/v1/quality/metrics/${e}`),getReport:(e,t)=>{let a=new URLSearchParams;t?.data_source&&a.append("data_source",t.data_source),t?.limit&&a.append("limit",t.limit.toString());let s=a.toString();return i(`/api/v1/quality/reports/${e}${s?`?${s}`:""}`)},check:e=>r("/api/v1/quality/check",e),checkUpload:(e,t)=>{let a=new FormData;return a.append("file",e),t.schema_id&&a.append("schema_id",t.schema_id),t.contract&&a.append("contract",t.contract),void 0!==t.record_violations&&a.append("record_violations",String(t.record_violations)),void 0!==t.calculate_metrics&&a.append("calculate_metrics",String(t.calculate_metrics)),void 0!==t.check_thresholds&&a.append("check_thresholds",String(t.check_thresholds)),t.thresholds&&a.append("thresholds",t.thresholds),void 0!==t.include_field_metrics&&a.append("include_field_metrics",String(t.include_field_metrics)),void 0!==t.sample_size&&a.append("sample_size",String(t.sample_size)),t.data_source&&a.append("data_source",t.data_source),t.data_version&&a.append("data_version",t.data_version),d("/api/v1/quality/check/upload",a)},queryViolations:e=>r("/api/v1/quality/violations",e)},templates:{downloadSchema:()=>n("/api/v1/templates/schema"),downloadContractArtifacts:()=>n("/api/v1/templates/contract-artifacts")},settings:{testDatabase:e=>r("/api/v1/settings/test-database",e),testDlq:e=>r("/api/v1/settings/test-dlq",e),getDlqStats:e=>r("/api/v1/settings/dlq-stats",e)}}])},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},95113,e=>{"use strict";var t=e.i(43476),a=e.i(63209),s=e.i(9165),i=e.i(75157);function r({error:e,title:r="Error",className:l}){if(!e)return null;let d=e instanceof s.ApiError,n=d?e.message:e.message||"An unexpected error occurred";return(0,t.jsx)("div",{className:(0,i.cn)("rounded-lg border border-destructive/50 bg-destructive/10 p-4",l),children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(a.AlertCircle,{className:"h-5 w-5 text-destructive flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-destructive",children:r}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-destructive/90",children:[(0,t.jsx)("p",{children:n}),d&&e.status&&(0,t.jsxs)("p",{className:"mt-1 text-xs opacity-75",children:["Status: ",e.status]})]})]})]})})}e.s(["default",()=>r])},78583,e=>{"use strict";let t=(0,e.i(75254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},46652,e=>{"use strict";var t=e.i(71645),a=e.i(9165);function s(){let[e,s]=(0,t.useState)([]),[i,r]=(0,t.useState)(!0),[l,d]=(0,t.useState)(null),n=(0,t.useCallback)(async()=>{try{r(!0),d(null);let e=await a.api.contracts.list();s(e.contracts)}catch(t){let e="Failed to load contracts";t instanceof a.ApiError&&(e=0===t.status||t.message.includes("Unable to connect")?"API server is not running. Please start it with: pycharter api":t.message),d(e),console.error("Error loading contracts:",t)}finally{r(!1)}},[]);return(0,t.useEffect)(()=>{n()},[n]),{contracts:e,loading:i,error:l,refetch:n}}e.s(["useContracts",()=>s])},69074,e=>{"use strict";let t=(0,e.i(75254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],69074)},42009,50398,80428,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);e.s(["Award",()=>a],42009);var s=e.i(43476),i=e.i(71645);let r=(0,t.default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),l=(0,t.default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var d=e.i(64659);let n=(0,t.default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function c({sections:e,defaultCollapsed:t=!1,onItemClick:a,onSectionClick:c,selectedSection:o,headerTitle:m="Navigation"}){let[u,h]=(0,i.useState)(t),[x,p]=(0,i.useState)(new Set(e.map(e=>e.id)));return(0,s.jsxs)("div",{className:`flex flex-col bg-background border-r border-border/50 shadow-sm transition-all duration-300 ${u?"w-16":"w-64"}`,style:{height:"100%",overflow:"hidden"},children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border/50 bg-muted/30",children:[!u&&(0,s.jsx)("h2",{className:"text-sm font-semibold text-foreground tracking-wide",children:m}),(0,s.jsx)("button",{onClick:()=>{h(!u)},className:"p-1.5 rounded-md hover:bg-muted transition-all duration-200 hover:scale-105 active:scale-95","aria-label":u?"Expand sidebar":"Collapse sidebar",children:u?(0,s.jsx)(l,{className:"h-4 w-4 text-muted-foreground"}):(0,s.jsx)(r,{className:"h-4 w-4 text-muted-foreground"})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-2 py-3",style:{maxHeight:"100%"},children:(0,s.jsx)("div",{className:"space-y-1",children:e.map(e=>{let t=x.has(e.id);return(0,s.jsxs)("div",{className:"mb-1",children:[(0,s.jsx)("button",{onClick:()=>{var t;c&&c(e.id),t=e.id,p(e=>{let a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a})},className:`w-full flex items-center justify-between px-3 py-2.5 rounded-lg transition-all duration-200 ${u?"justify-center hover:bg-muted/50":o===e.id?"bg-primary/10 text-primary hover:bg-primary/15":"hover:bg-muted/50 hover:shadow-sm"}`,title:u?e.title:void 0,children:u?e.icon?(0,s.jsx)(e.icon,{className:`h-5 w-5 transition-colors ${o===e.id?"text-primary":"text-muted-foreground"}`}):(0,s.jsx)("span",{className:`text-xs font-semibold ${o===e.id?"text-primary":"text-muted-foreground"}`,children:e.title.charAt(0).toUpperCase()}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2.5",children:[e.icon&&(0,s.jsx)(e.icon,{className:`h-4 w-4 transition-colors ${o===e.id?"text-primary":"text-muted-foreground"}`}),(0,s.jsx)("span",{className:`text-sm font-medium ${o===e.id?"text-primary":"text-foreground"}`,children:e.title})]}),t?(0,s.jsx)(n,{className:"h-3.5 w-3.5 text-muted-foreground transition-transform duration-200"}):(0,s.jsx)(d.ChevronDown,{className:"h-3.5 w-3.5 text-muted-foreground transition-transform duration-200"})]})}),!u&&t&&(0,s.jsx)("div",{className:"ml-1 mt-1 space-y-0.5 pl-2 border-l-2 border-muted",children:e.items.map(t=>(0,s.jsx)("button",{onClick:()=>{var s,i;return s=e.id,i=t.id,void(t.onClick&&t.onClick(),a&&a(s,i))},className:"w-full text-left px-3 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded-md transition-all duration-200 hover:translate-x-0.5",children:t.label},t.id))})]},e.id)})})})]})}e.s(["CollapsibleSidebar",()=>c],50398),e.s([],80428)},42033,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(15288),i=e.i(19455);e.i(55824);var r=e.i(16370),l=e.i(9165),d=e.i(61246),n=e.i(95113),c=e.i(46652),o=e.i(69074),m=e.i(78583),u=e.i(42009),h=e.i(75254);let x=(0,h.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),p=(0,h.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),v=(0,h.default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var g=e.i(39616);e.i(80428);var f=e.i(50398);function j(){let[e,h]=(0,a.useState)([]),[j,y]=(0,a.useState)(!0),[b,N]=(0,a.useState)(null),[k,w]=(0,a.useState)(0),[_,C]=(0,a.useState)(null),[S,$]=(0,a.useState)([]),[q,A]=(0,a.useState)(!1),[T,F]=(0,a.useState)(!1),[R,P]=(0,a.useState)(null),[U,V]=(0,a.useState)("json"),[B,E]=(0,a.useState)(null),[D,O]=(0,a.useState)(""),[M,I]=(0,a.useState)(!1),[L,H]=(0,a.useState)("metrics"),{contracts:z,loading:J}=(0,c.useContracts)(),Q=[{id:"metrics",title:"Quality Metrics",icon:x,items:[{id:"overview",label:"Overview",onClick:()=>H("metrics")},{id:"by_schema",label:"By Schema",onClick:()=>H("metrics")},{id:"by_source",label:"By Data Source",onClick:()=>H("metrics")},{id:"trends",label:"Trends",onClick:()=>H("metrics")}]},{id:"violations",title:"Violations",icon:p,items:[{id:"all_violations",label:"All Violations",onClick:()=>H("violations")},{id:"open_violations",label:"Open Violations",onClick:()=>H("violations")},{id:"resolved_violations",label:"Resolved Violations",onClick:()=>H("violations")},{id:"by_severity",label:"By Severity",onClick:()=>H("violations")}]},{id:"checks",title:"Quality Checks",icon:u.Award,items:[{id:"run_check",label:"Run Quality Check",onClick:()=>H("checks")},{id:"check_history",label:"Check History",onClick:()=>H("checks")},{id:"scheduled_checks",label:"Scheduled Checks",onClick:()=>H("checks")}]},{id:"thresholds",title:"Thresholds",icon:v,items:[{id:"configure_thresholds",label:"Configure Thresholds",onClick:()=>H("thresholds")},{id:"threshold_breaches",label:"Threshold Breaches",onClick:()=>H("thresholds")}]},{id:"settings",title:"Settings",icon:g.Settings,items:[{id:"quality_config",label:"Quality Configuration",onClick:()=>H("settings")},{id:"notification_settings",label:"Notification Settings",onClick:()=>H("settings")}]}];(0,a.useEffect)(()=>{K()},[]);let K=async()=>{try{y(!0),N(null);let e=await l.api.quality.listMetrics({limit:100});h(e.metrics),w(e.total)}catch(e){N(e.message||"Failed to load quality metrics"),console.error("Error loading quality metrics:",e)}finally{y(!1)}},G=async e=>{try{A(!0),N(null);let t=await l.api.quality.queryViolations({schema_id:e});$(t.violations||[])}catch(e){N(e.message||"Failed to load violations"),console.error("Error loading violations:",e)}finally{A(!1)}},X=async e=>{if(e.preventDefault(),"file"===U){if(!B)return void N("Please select a file to upload");if(!D)return void N("Please select a contract");try{N(null),I(!0);let e=z.find(e=>e.id===D);if(!e)return void N("Selected contract not found");let t=e.schema_id;if(t||(t=(await l.api.contracts.get(D)).schema_id),!t)return void N("Contract does not have an associated schema");let a=await l.api.quality.checkUpload(B,{schema_id:t,record_violations:!0,calculate_metrics:!0,include_field_metrics:!0,data_source:B.name});P(a),F(!1),E(null),O(""),await K()}catch(e){N(e.message||"Failed to run quality check"),console.error("Error running quality check:",e)}finally{I(!1)}}else{let t=new FormData(e.currentTarget),a=t.get("schema_id"),s=t.get("data");try{N(null);let e=JSON.parse(s),t=await l.api.quality.check({schema_id:a,data:Array.isArray(e)?e:[e],record_violations:!0,calculate_metrics:!0,include_field_metrics:!0});P(t),F(!1),await K()}catch(e){N(e.message||"Failed to run quality check"),console.error("Error running quality check:",e)}}},Y=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleString()}catch{return e}},Z=e=>`${(100*e).toFixed(2)}%`,W=e=>e>=90?"text-green-600 dark:text-green-400":e>=75?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",ee=Object.values(e.reduce((e,t)=>{let a=`${t.schema_id}::${t.data_source||"unknown"}`;return(!e[a]||new Date(t.check_timestamp||0)>new Date(e[a].check_timestamp||0))&&(e[a]=t),e},{}));return(0,t.jsxs)("div",{className:"flex h-full bg-background",style:{height:"calc(100vh - 4rem)",overflow:"hidden"},children:[(0,t.jsx)("div",{className:"flex-shrink-0",style:{height:"100%",overflow:"hidden"},children:(0,t.jsx)(f.CollapsibleSidebar,{sections:Q,defaultCollapsed:!1,headerTitle:"Quality",selectedSection:L,onSectionClick:H})}),(0,t.jsx)("div",{className:"flex-1 min-w-0",style:{height:"100%",overflowY:"auto",overflowX:"hidden"},"data-content-area":!0,children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,t.jsx)(r.PageHeader,{title:"Quality Reports",description:"View quality metrics and reports for different data feeds",actions:(0,t.jsx)(i.Button,{onClick:()=>F(!T),children:T?"Cancel":"Run Quality Check"})}),j&&(0,t.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,t.jsx)(d.default,{})}),b&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)(n.default,{error:Error(b),title:"Error"}),(0,t.jsx)(i.Button,{onClick:K,variant:"outline",className:"mt-4",children:"Retry"})]}),T&&(0,t.jsxs)(s.Card,{className:"mb-6",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:"Run Quality Check"}),(0,t.jsx)(s.CardDescription,{children:"Run a quality check against a data contract. Upload a file (CSV/JSON) or provide JSON data directly."})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("form",{onSubmit:X,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,t.jsxs)(i.Button,{type:"button",variant:"json"===U?"default":"outline",onClick:()=>V("json"),className:"flex items-center gap-2",children:[(0,t.jsx)(m.FileText,{className:"h-4 w-4"}),"JSON Data"]}),(0,t.jsxs)(i.Button,{type:"button",variant:"file"===U?"default":"outline",onClick:()=>V("file"),className:"flex items-center gap-2",children:[(0,t.jsx)(o.Upload,{className:"h-4 w-4"}),"Upload File"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"contract_id",className:"block text-sm font-medium mb-2",children:["Data Contract ","file"===U&&"*"]}),J?(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading contracts..."}):(0,t.jsxs)("select",{id:"contract_id",value:D,onChange:e=>O(e.target.value),className:"w-full px-3 py-2 border rounded-md",required:"file"===U,children:[(0,t.jsx)("option",{value:"",children:"Select a contract..."}),z.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (v",e.version,")"]},e.id))]}),"json"===U&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Or enter schema_id directly in the field below"})]}),"file"===U?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"file",className:"block text-sm font-medium mb-2",children:"Data File (CSV or JSON) *"}),(0,t.jsx)("input",{type:"file",id:"file",accept:".json,.csv",onChange:e=>{let t=e.target.files?.[0];if(t){let e=t.name.split(".").pop()?.toLowerCase();if("json"!==e&&"csv"!==e)return void N("Please select a JSON or CSV file");E(t),N(null)}},className:"w-full px-3 py-2 border rounded-md",required:!0}),B&&(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["Selected: ",B.name," (",(B.size/1024).toFixed(2)," KB)"]})]}),(0,t.jsx)(i.Button,{type:"submit",disabled:M||!B||!D,children:M?"Running Check...":"Run Quality Check"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"schema_id",className:"block text-sm font-medium mb-2",children:"Schema ID"}),(0,t.jsx)("input",{type:"text",id:"schema_id",name:"schema_id",className:"w-full px-3 py-2 border rounded-md",placeholder:"schema_id",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"data",className:"block text-sm font-medium mb-2",children:"Data (JSON array or object)"}),(0,t.jsx)("textarea",{id:"data",name:"data",rows:8,className:"w-full px-3 py-2 border rounded-md font-mono text-sm",placeholder:'[{"field1": "value1"}, {"field1": "value2"}]',required:!0})]}),(0,t.jsx)(i.Button,{type:"submit",children:"Run Check"})]})]})})]}),R&&(0,t.jsxs)(s.Card,{className:"mb-6",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:"Quality Check Result"}),(0,t.jsxs)(s.CardDescription,{children:["Schema: ",R.schema_id," •",R.passed?" ✓ Passed":" ✗ Failed"]})]}),(0,t.jsxs)(s.CardContent,{children:[R.quality_score&&(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Overall Score"}),(0,t.jsx)("div",{className:`text-2xl font-bold ${W(R.quality_score.overall_score)}`,children:R.quality_score.overall_score.toFixed(1)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Valid Records"}),(0,t.jsxs)("div",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:[R.valid_count," / ",R.record_count]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Violations"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:R.violation_count})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Completeness"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:Z(R.quality_score.completeness)})]})]}),(0,t.jsx)("pre",{className:"bg-muted p-4 rounded-md overflow-auto text-sm max-h-96",children:JSON.stringify(R,null,2)})]})]}),!j&&!b&&(0,t.jsx)(t.Fragment,{children:0===ee.length?(0,t.jsxs)(s.Card,{children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:"No Quality Metrics Found"}),(0,t.jsx)(s.CardDescription,{children:"No quality check results are currently available. Run quality checks to see metrics here."})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)(i.Button,{onClick:()=>F(!0),children:"Run Quality Check"})})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[ee.length," data feed",1!==ee.length?"s":""," with quality metrics",k>ee.length&&` (${k} total checks)`]}),(0,t.jsx)(i.Button,{onClick:K,variant:"outline",children:"Refresh"})]}),(0,t.jsx)("div",{className:"grid gap-6",children:ee.map(e=>(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(s.CardTitle,{className:"text-lg",children:[e.schema_id,e.schema_version&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground ml-2",children:["v",e.schema_version]})]}),(0,t.jsxs)(s.CardDescription,{children:[e.data_source||"Unknown source",e.data_version&&` • Version: ${e.data_version}`]})]}),e.passed?(0,t.jsx)("span",{className:"px-2 py-1 rounded text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"✓ Passed"}):(0,t.jsx)("span",{className:"px-2 py-1 rounded text-xs bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"✗ Failed"})]})}),(0,t.jsxs)(s.CardContent,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Overall Score"}),(0,t.jsx)("div",{className:`text-2xl font-bold ${W(e.overall_score)}`,children:e.overall_score.toFixed(1)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Accuracy"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:Z(e.accuracy)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Completeness"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:Z(e.completeness)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Violation Rate"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:Z(e.violation_rate)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 pt-4 border-t",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Records"}),(0,t.jsx)("div",{className:"text-lg font-semibold",children:e.record_count})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Valid"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:e.valid_count})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Invalid"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-red-600 dark:text-red-400",children:e.invalid_count})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Violations"}),(0,t.jsx)("div",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400",children:e.violation_count})]})]}),e.threshold_breaches&&e.threshold_breaches.length>0&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-orange-600 dark:text-orange-400 mb-2",children:"Threshold Breaches:"}),(0,t.jsx)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:e.threshold_breaches.map((e,a)=>(0,t.jsx)("li",{children:e},a))})]}),(0,t.jsx)("div",{className:"mt-4 pt-4 border-t flex gap-2",children:(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{C(e),G(e.schema_id)},disabled:q,children:q&&_?.id===e.id?"Loading...":"View Violations"})}),(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{children:["Last Check: ",Y(e.check_timestamp)]}),e.data_fingerprint&&(0,t.jsxs)("div",{className:"mt-1",children:["Fingerprint: ",e.data_fingerprint.substring(0,16),"..."]})]})]})]},e.id))})]})}),_&&S.length>0&&(0,t.jsxs)(s.Card,{className:"mt-6",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(s.CardTitle,{children:["Violations for ",_.schema_id]}),(0,t.jsxs)(s.CardDescription,{children:[S.length," violation",1!==S.length?"s":""," found"]})]}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{C(null),$([])},children:"Close"})]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4 max-h-96 overflow-auto",children:S.map(e=>(0,t.jsxs)("div",{className:"border rounded-md p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-semibold",children:["Record ID: ",e.record_id]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:Y(e.timestamp)})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs ${"critical"===e.severity?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":"warning"===e.severity?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}`,children:e.severity}),(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs ${"resolved"===e.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"}`,children:e.status})]})]}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold mb-1",children:"Field Violations:"}),(0,t.jsx)("ul",{className:"list-disc list-inside text-sm text-muted-foreground space-y-1",children:e.field_violations.map((e,a)=>(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"font-medium",children:e.field||"unknown"}),": ",e.message||e.error||"Validation error"]},a))})]})]},e.id))})})]})]})})]})}e.s(["default",()=>j],42033)}]);