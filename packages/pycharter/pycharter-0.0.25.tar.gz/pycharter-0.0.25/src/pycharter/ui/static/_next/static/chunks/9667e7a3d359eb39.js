(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55824,16370,e=>{"use strict";var t=e.i(43476);function a({title:e,description:a,actions:s}){return(0,t.jsxs)("div",{className:"mb-4 flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground mb-1",children:e}),a&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:a})]}),s&&(0,t.jsx)("div",{className:"flex gap-2",children:s})]})}e.s(["PageHeader",()=>a],16370),e.s([],55824)},61246,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function s({className:e,...s}){return(0,t.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...s})}function r({size:e="md",className:s}){return(0,t.jsx)("div",{className:(0,a.cn)("flex items-center justify-center",s),children:(0,t.jsx)("div",{className:(0,a.cn)("animate-spin rounded-full border-2 border-muted border-t-primary",{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[e])})})}function i({message:e="Loading..."}){return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(r,{size:"lg",className:"mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:e})]})})}function l(){return(0,t.jsxs)("div",{className:"rounded-lg border bg-card p-6 space-y-4",children:[(0,t.jsx)(s,{className:"h-6 w-3/4"}),(0,t.jsx)(s,{className:"h-4 w-full"}),(0,t.jsx)(s,{className:"h-4 w-5/6"}),(0,t.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,t.jsx)(s,{className:"h-9 w-20"}),(0,t.jsx)(s,{className:"h-9 w-20"})]})]})}function n({rows:e=5}){return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(s,{className:"h-10 w-full"}),Array.from({length:e}).map((e,a)=>(0,t.jsx)(s,{className:"h-12 w-full"},a))]})}e.s(["CardSkeleton",()=>l,"PageLoading",()=>i,"TableSkeleton",()=>n,"default",()=>r],61246)},43668,e=>{"use strict";var t=e.i(47167);let a="pycharter_settings",s={apiServer:{url:t.default.env.NEXT_PUBLIC_API_URL||"http://localhost:8000"},database:{enabled:!1},dlq:{enabled:!1}};function r(){try{let e=localStorage.getItem(a);if(e){let t=JSON.parse(e);return{...s,...t,apiServer:{...s.apiServer,...t.apiServer},database:{...s.database,...t.database},dlq:{...s.dlq,...t.dlq}}}}catch(e){console.error("Failed to load settings:",e)}return s}function i(e){try{localStorage.setItem(a,JSON.stringify(e))}catch(e){throw console.error("Failed to save settings:",e),e}}function l(){return r().apiServer.url||s.apiServer.url}e.s(["getApiBaseUrl",()=>l,"getSettings",()=>r,"saveSettings",()=>i])},9165,e=>{"use strict";var t=e.i(43668);class a extends Error{status;response;constructor(e,t,a){super(e),this.status=t,this.response=a,this.name="ApiError"}}async function s(e,s){let r=`${(0,t.getApiBaseUrl)()}${e}`;try{let e=await fetch(r,{...s,headers:{"Content-Type":"application/json",...s?.headers}});if(!e.ok){let t;try{t=await e.json()}catch{t={detail:e.statusText}}let s=t.detail||`API request failed: ${e.statusText}`;throw 422===e.status&&t.details&&Array.isArray(t.details)&&(s=t.details.map(e=>{let t=e.loc?.join(".")||e.field||"field",a=e.msg||e.message||"validation error";return`${t}: ${a}`}).join("; ")||s),new a(s,e.status,t)}let t=e.headers.get("content-type");if(t&&t.includes("application/json"))return e.json();return e.text()}catch(s){if(s instanceof TypeError&&"Failed to fetch"===s.message){let s=(0,t.getApiBaseUrl)();throw new a(`Unable to connect to API server at ${s}. Please ensure the API server is running and the URL is correct.`,0,{originalError:"NetworkError",apiUrl:s,endpoint:e,suggestion:"Check your API server settings in the Settings page"})}throw s}}async function r(e){return s(e,{method:"GET"})}async function i(e,t){return s(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async function l(e,t){return s(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async function n(e,s){let r=`${(0,t.getApiBaseUrl)()}${e}`,i=await fetch(r,{method:"POST",body:s});if(!i.ok){let e;try{e=await i.json()}catch{e={detail:i.statusText}}throw new a(e.detail||`API request failed: ${i.statusText}`,i.status,e)}let l=i.headers.get("content-type");return l&&l.includes("application/json")?i.json():i.text()}async function c(e){let s=`${(0,t.getApiBaseUrl)()}${e}`,r=await fetch(s,{method:"GET"});if(!r.ok){let e;try{e=await r.json()}catch{e={detail:r.statusText}}throw new a(e.detail||`API request failed: ${r.statusText}`,r.status,e)}return r.blob()}e.s(["ApiError",()=>a,"api",0,{contracts:{list:()=>r("/api/v1/contracts"),get:e=>r(`/api/v1/contracts/${e}`),parse:e=>i("/api/v1/contracts/parse",{contract:e}),parseFile:(e,t)=>{let a=new FormData;return a.append("file",e),void 0!==t&&a.append("validate",String(t)),n("/api/v1/contracts/parse/upload",a)},build:e=>i("/api/v1/contracts/build",e),buildFromId:(e,t)=>{let a=new URLSearchParams;t?.include_metadata!==void 0&&a.append("include_metadata",String(t.include_metadata)),t?.include_ownership!==void 0&&a.append("include_ownership",String(t.include_ownership)),t?.include_governance!==void 0&&a.append("include_governance",String(t.include_governance));let s=a.toString();return i(`/api/v1/contracts/${e}/build${s?`?${s}`:""}`,{})},createFromArtifacts:e=>i("/api/v1/contracts/create-from-artifacts",e),createMixed:e=>i("/api/v1/contracts/create-mixed",e),update:(e,t)=>l(`/api/v1/contracts/${e}`,t)},metadata:{listSchemas:()=>r("/api/v1/metadata/schemas"),getSchema:(e,t)=>{let a=t?`?version=${t}`:"";return r(`/api/v1/metadata/schemas/${e}${a}`)},getCompleteSchema:(e,t)=>{let a=t?`?version=${t}`:"";return r(`/api/v1/metadata/schemas/${e}/complete${a}`)},storeSchema:e=>i("/api/v1/metadata/schemas",e),getMetadata:(e,t)=>{let a=t?`?version=${t}`:"";return r(`/api/v1/metadata/metadata/${e}${a}`)},storeMetadata:e=>i("/api/v1/metadata/metadata",e),getCoercionRules:(e,t)=>{let a=t?`?version=${t}`:"";return r(`/api/v1/metadata/coercion-rules/${e}${a}`)},storeCoercionRules:e=>i("/api/v1/metadata/coercion-rules",e),getValidationRules:(e,t)=>{let a=t?`?version=${t}`:"";return r(`/api/v1/metadata/validation-rules/${e}${a}`)},storeValidationRules:e=>i("/api/v1/metadata/validation-rules",e),getEntityList:e=>r(`/api/v1/metadata/${e}`),createEntity:(e,t)=>i(`/api/v1/metadata/${e}`,t),updateEntity:(e,t,a)=>l(`/api/v1/metadata/${e}/${t}`,a),listArtifacts:()=>r("/api/v1/metadata/artifacts")},validation:{validate:e=>i("/api/v1/validation/validate",e),validateBatch:e=>i("/api/v1/validation/validate-batch",e)},schemas:{generate:e=>i("/api/v1/schemas/generate",e),convert:e=>i("/api/v1/schemas/convert",e)},quality:{listMetrics:e=>{let t=new URLSearchParams;e?.schema_id&&t.append("schema_id",e.schema_id),e?.limit&&t.append("limit",e.limit.toString()),e?.offset&&t.append("offset",e.offset.toString());let a=t.toString();return r(`/api/v1/quality/metrics${a?`?${a}`:""}`)},getMetric:e=>r(`/api/v1/quality/metrics/${e}`),getReport:(e,t)=>{let a=new URLSearchParams;t?.data_source&&a.append("data_source",t.data_source),t?.limit&&a.append("limit",t.limit.toString());let s=a.toString();return r(`/api/v1/quality/reports/${e}${s?`?${s}`:""}`)},check:e=>i("/api/v1/quality/check",e),checkUpload:(e,t)=>{let a=new FormData;return a.append("file",e),t.schema_id&&a.append("schema_id",t.schema_id),t.contract&&a.append("contract",t.contract),void 0!==t.record_violations&&a.append("record_violations",String(t.record_violations)),void 0!==t.calculate_metrics&&a.append("calculate_metrics",String(t.calculate_metrics)),void 0!==t.check_thresholds&&a.append("check_thresholds",String(t.check_thresholds)),t.thresholds&&a.append("thresholds",t.thresholds),void 0!==t.include_field_metrics&&a.append("include_field_metrics",String(t.include_field_metrics)),void 0!==t.sample_size&&a.append("sample_size",String(t.sample_size)),t.data_source&&a.append("data_source",t.data_source),t.data_version&&a.append("data_version",t.data_version),n("/api/v1/quality/check/upload",a)},queryViolations:e=>i("/api/v1/quality/violations",e)},templates:{downloadSchema:()=>c("/api/v1/templates/schema"),downloadContractArtifacts:()=>c("/api/v1/templates/contract-artifacts")},settings:{testDatabase:e=>i("/api/v1/settings/test-database",e),testDlq:e=>i("/api/v1/settings/test-dlq",e),getDlqStats:e=>i("/api/v1/settings/dlq-stats",e)}}])},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},95113,e=>{"use strict";var t=e.i(43476),a=e.i(63209),s=e.i(9165),r=e.i(75157);function i({error:e,title:i="Error",className:l}){if(!e)return null;let n=e instanceof s.ApiError,c=n?e.message:e.message||"An unexpected error occurred";return(0,t.jsx)("div",{className:(0,r.cn)("rounded-lg border border-destructive/50 bg-destructive/10 p-4",l),children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(a.AlertCircle,{className:"h-5 w-5 text-destructive flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-destructive",children:i}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-destructive/90",children:[(0,t.jsx)("p",{children:c}),n&&e.status&&(0,t.jsxs)("p",{className:"mt-1 text-xs opacity-75",children:["Status: ",e.status]})]})]})]})})}e.s(["default",()=>i])},88511,e=>{"use strict";let t=(0,e.i(75254).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],88511)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},65937,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(15288),r=e.i(19455),i=e.i(61246),l=e.i(95113);e.i(55824);var n=e.i(16370),c=e.i(9165),d=e.i(75157),o=e.i(40160),m=e.i(88511);let h=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function u(){let{schemas:e,loading:u,error:p,refetch:x}=function(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(!0),[i,l]=(0,a.useState)(null),n=(0,a.useCallback)(async()=>{try{r(!0),l(null);let e=await c.api.metadata.listSchemas();t(e.schemas||[])}catch(t){let e=t instanceof c.ApiError||t instanceof Error?t.message:"Failed to load schemas";l(e),console.error("Error loading schemas:",t),t instanceof c.ApiError&&0===t.status&&console.warn("API server connection issue:",e)}finally{r(!1)}},[]);return(0,a.useEffect)(()=>{n()},[n]),{schemas:e,loading:s,error:i,refetch:n}}(),[v,g]=(0,a.useState)(null),[f,j]=(0,a.useState)(null),[y,b]=(0,a.useState)(!1),[N,S]=(0,a.useState)(null),[w,_]=(0,a.useState)(!1),[C,$]=(0,a.useState)(null),[k,A]=(0,a.useState)(!1);if(u)return(0,t.jsx)(i.PageLoading,{message:"Loading schemas..."});let E=async e=>{try{b(!0),S(null);let t=await c.api.metadata.getSchema(e.id,e.version);j(t),g(e)}catch(e){S(e.message||"Failed to load schema details"),console.error("Error loading schema details:",e)}finally{b(!1)}},P=async e=>{e.preventDefault();let t=new FormData(e.currentTarget),a=t.get("schema_json"),s=t.get("model_name")||"DynamicModel";try{let e=JSON.parse(a),t=await c.api.schemas.generate({schema:e,model_name:s});$(t),_(!1),await x()}catch(e){console.error("Error generating schema:",e),alert(e.message||"Failed to generate schema")}},T=async()=>{try{A(!0);let e=await c.api.templates.downloadSchema();(0,d.downloadBlob)(e,"template_schema.yaml")}catch(e){console.error("Error downloading schema template:",e),alert(e.message||"Failed to download schema template")}finally{A(!1)}};return u?(0,t.jsx)(i.PageLoading,{message:"Loading schemas..."}):(0,t.jsx)("div",{className:"min-h-screen bg-background",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,t.jsx)(n.PageHeader,{title:"Schemas",description:"Manage your data schemas",actions:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.Button,{variant:"outline",onClick:T,disabled:k,title:"Download schema template",children:[(0,t.jsx)(o.Download,{className:`h-4 w-4 mr-2 ${k?"animate-pulse":""}`}),k?"Downloading...":"Download Template"]}),(0,t.jsx)(r.Button,{onClick:()=>_(!w),children:w?"Cancel":"Generate Schema"})]})}),p&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)(l.default,{error:Error(p),title:"Failed to load schemas"}),(0,t.jsx)(r.Button,{onClick:x,variant:"outline",className:"mt-4",children:"Retry"})]}),w&&(0,t.jsxs)(s.Card,{className:"mb-6",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsx)(s.CardTitle,{children:"Generate Schema from JSON Schema"}),(0,t.jsx)(s.CardDescription,{children:"Provide a JSON Schema definition to generate a Pydantic model"})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"model_name",className:"block text-sm font-medium mb-2",children:"Model Name"}),(0,t.jsx)("input",{type:"text",id:"model_name",name:"model_name",defaultValue:"DynamicModel",className:"w-full px-3 py-2 border rounded-md",placeholder:"DynamicModel"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"schema_json",className:"block text-sm font-medium mb-2",children:"JSON Schema"}),(0,t.jsx)("textarea",{id:"schema_json",name:"schema_json",rows:10,className:"w-full px-3 py-2 border rounded-md font-mono text-sm",placeholder:'{"type": "object", "properties": {"name": {"type": "string"}}}',required:!0})]}),(0,t.jsx)(r.Button,{type:"submit",children:"Generate"})]})})]}),C&&(0,t.jsxs)(s.Card,{className:"mb-6",children:[(0,t.jsxs)(s.CardHeader,{children:[(0,t.jsxs)(s.CardTitle,{children:["Generated Model: ",C.model_name]}),(0,t.jsx)(s.CardDescription,{children:C.message})]}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("pre",{className:"bg-muted p-4 rounded-md overflow-auto text-sm",children:JSON.stringify(C.schema_json,null,2)})})]}),0===e.length&&!u&&!p&&(0,t.jsx)(s.Card,{children:(0,t.jsxs)(s.CardContent,{className:"text-center py-12",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"No schemas found"}),(0,t.jsx)(r.Button,{onClick:()=>_(!0),children:"Generate Schema"})]})}),e.length>0&&(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(s.CardTitle,{children:"Schemas"}),(0,t.jsx)(r.Button,{onClick:()=>_(!w),size:"sm",children:"Generate Schema"})]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full border-collapse",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b bg-muted/50",children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-foreground",children:"ID"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-foreground",children:"Title"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-foreground",children:"Version"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-semibold text-foreground w-32",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,t.jsx)("td",{className:"px-4 py-2 text-sm border-b",children:(0,t.jsx)("span",{className:"font-mono text-xs",children:e.id})}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm border-b",children:e.title||e.id}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm border-b",children:e.version||"N/A"}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm border-b",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>E(e),disabled:y&&v?.id===e.id,className:"h-8 w-8 p-0",title:"View Details",children:(0,t.jsx)(h,{className:"h-4 w-4"})}),(0,t.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>{console.log("Edit schema:",e)},className:"h-8 w-8 p-0",title:"Edit",children:(0,t.jsx)(m.Edit,{className:"h-4 w-4"})})]})})]},e.id))})]})})})]}),v&&(0,t.jsxs)(s.Card,{children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(s.CardTitle,{children:["Schema Details: ",v.title||v.id]}),(0,t.jsxs)(s.CardDescription,{children:["Version: ",v.version||"N/A"]})]}),(0,t.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{g(null),j(null),S(null)},children:"Close"})]})}),(0,t.jsxs)(s.CardContent,{children:[N&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)(l.default,{error:Error(N),title:"Failed to load schema details"}),(0,t.jsx)(r.Button,{onClick:()=>E(v),variant:"outline",className:"mt-4",children:"Retry"})]}),y&&(0,t.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,t.jsx)(i.PageLoading,{message:"Loading schema details..."})}),f&&!y&&!N&&(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Schema Definition"}),(0,t.jsx)("pre",{className:"bg-muted p-4 rounded-md overflow-auto text-sm max-h-96",children:JSON.stringify(f.schema,null,2)})]})})]})]})]})})}e.s(["default",()=>u],65937)}]);