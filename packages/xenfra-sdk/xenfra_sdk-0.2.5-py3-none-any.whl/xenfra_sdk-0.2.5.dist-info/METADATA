Metadata-Version: 2.3
Name: xenfra-sdk
Version: 0.2.5
Summary: Xenfra SDK: Core engine and utilities for the Xenfra platform.
Author: xenfra-cloud
Author-email: xenfra-cloud <xenfracloud@gmail.com>
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: Topic :: Software Development :: Build Tools
Classifier: Topic :: System :: Systems Administration
Requires-Dist: fabric>=3.2.2
Requires-Dist: python-digitalocean>=1.17.0
Requires-Dist: python-dotenv>=1.2.1
Requires-Dist: rich>=14.2.0
Requires-Dist: sqlmodel>=0.0.16
Requires-Dist: pyyaml>=6.0.1
Requires-Dist: httpx>=0.27.0
Requires-Dist: jinja2>=3.1.3
Requires-Dist: python-jose[cryptography]>=3.3.0
Requires-Dist: passlib>=1.7.4
Requires-Dist: cryptography>=41.0.0
Requires-Dist: pytest>=8.0.0 ; extra == 'dev'
Requires-Dist: pytest-mock>=3.12.0 ; extra == 'dev'
Requires-Dist: pytest-cov>=4.0.0 ; extra == 'dev'
Requires-Dist: pytest-asyncio>=0.21.0 ; extra == 'dev'
Requires-Python: >=3.11
Project-URL: Homepage, https://github.com/xenfra-cloud/xenfra-sdk
Project-URL: Issues, https://github.com/xenfra-cloud/xenfra-sdk/issues
Provides-Extra: dev
Description-Content-Type: text/markdown

# Xenfra SDK (The Engine) üì¶

[![PyPI](https://img.shields.io/pypi/v/xenfra-sdk)](https://pypi.org/project/xenfra-sdk/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python](https://img.shields.io/pypi/pyversions/xenfra-sdk.svg)](https://pypi.org/project/xenfra-sdk/)

The core infrastructure automation engine behind **Xenfra** (The Sovereign Cloud OS). This SDK provides the primitives for deploying, managing, and diagnosing applications on DigitalOcean with "Zen Mode" auto-healing.

## üöÄ Features

- **InfraEngine**: A robust 9-phase deployment pipeline (Setup -> Asset Gen -> Droplet -> Code -> Build -> Health).
- **Dockerizer**: Deterministic Dockerfile and Compose generation using Jinja2 templates.
- **Zen Mode**: Utilities to automatically heal common failures (e.g., locked dpkg, exhausted ports).
- **Privacy-First**: Built-in PII scrubbing for logs before they touch any AI services.
- **Security**: Fernet encryption for tokens and RS256 JWT validation helpers.

## üì¶ Installation

```bash
pip install xenfra-sdk
# or with uv
uv add xenfra-sdk
```

## üõ†Ô∏è Usage

### 1. Initialize the Engine

```python
from xenfra_sdk import XenfraClient, InfraEngine

# Authenticate (Token usually comes from the CLI)
client = XenfraClient(token="xenfra_...")
engine = InfraEngine(client)
```

### 2. Deploy a Project

```python
project_path = "/path/to/my-fastapi-app"

# The engine handles detection (Python/Node), dockerization, and provisioning
deployment = await engine.deploy(
    path=project_path,
    project_id="proj_123",
    env_vars={"DATABASE_URL": "..."}
)

print(f"üöÄ Deployed successfully to: http://{deployment.ip_address}")
```

### 3. Diagnose a Failure

```python
from xenfra_sdk.intelligence import diagnose_failure

logs = client.deployments.get_logs(deployment.id)
analysis = await diagnose_failure(logs)

print(f"Diagnosis: {analysis.root_cause}")
print(f"Suggested Fix: {analysis.suggestion}")
```

## üîó The Xenfra Ecosystem

This SDK is the "Body" of the Xenfra Open Core architecture:

- **[xenfra-cli](https://github.com/xenfracloud/xenfra-cli)**: The Terminal Interface (Uses this SDK).
- **[xenfra-mcp](https://github.com/xenfracloud/xenfra-mcp)**: The AI Agent Interface (Uses this SDK).
- **xenfra-platform**: The Private SaaS Backend (Uses this SDK).

## ü§ù Contributing

We welcome contributions! Please see [CONTRIBUTING.md](CONTRIBUTING.md) for details.

1.  Clone: `git clone https://github.com/xenfracloud/xenfra-sdk`
2.  Install: `uv sync`
3.  Test: `pytest`

## üìÑ License

MIT ¬© [Xenfra Cloud](https://xenfra.tech)
