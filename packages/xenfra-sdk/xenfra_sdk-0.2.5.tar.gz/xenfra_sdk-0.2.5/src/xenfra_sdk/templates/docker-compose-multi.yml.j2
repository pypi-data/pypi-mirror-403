# docker-compose.yml template for multi-service deployments
# Generated by Xenfra for microservices

services:
{% for service in services %}
  {{ service.name }}:
    build: {{ service.path }}
    ports:
      - "{{ service.port }}:{{ service.port }}"
{% if service.command %}
    command: {{ service.command }}
{% elif service.entrypoint %}
{% if service.framework == 'fastapi' %}
    command: uvicorn {{ service.entrypoint }} --host 0.0.0.0 --port {{ service.port }}
{% elif service.framework == 'flask' %}
    command: gunicorn {{ service.entrypoint }} -b 0.0.0.0:{{ service.port }}
{% elif service.framework == 'django' %}
    command: gunicorn {{ service.entrypoint }} --bind 0.0.0.0:{{ service.port }}
{% endif %}
{% endif %}
{% if service.env %}
    environment:
{% for key, value in service.env.items() %}
      - {{ key }}={{ value }}
{% endfor %}
{% endif %}
    restart: unless-stopped

{% endfor %}
