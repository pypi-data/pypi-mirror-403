Metadata-Version: 2.4
Name: py-vreport
Version: 0.2.0
Summary: A modern Python parser and CLI tool for Vector CANoe XML test reports with rich terminal output
Project-URL: Homepage, https://github.com/MohamedHamed19m/py_vreport
Project-URL: Repository, https://github.com/MohamedHamed19m/py_vreport
Project-URL: Bug Tracker, https://github.com/MohamedHamed19m/py_vreport/issues
Project-URL: Documentation, https://github.com/MohamedHamed19m/py_vreport#readme
Project-URL: Changelog, https://github.com/MohamedHamed19m/py_vreport/releases
Project-URL: Source Code, https://github.com/MohamedHamed19m/py_vreport
Author-email: MohamedHamed19m <mohamedahamed1915@gmail.com>
Maintainer-email: MohamedHamed19m <mohamedahamed1915@gmail.com>
License: MIT
Keywords: automotive,can,canoe,cli,diagnostic,ecu,parser,test-analysis,test-automation,test-report,test-results,testing,uds,vector,vector-canoe,xml
Classifier: Development Status :: 4 - Beta
Classifier: Environment :: Console
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Manufacturing
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: MacOS
Classifier: Operating System :: Microsoft :: Windows
Classifier: Operating System :: OS Independent
Classifier: Operating System :: POSIX :: Linux
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Programming Language :: Python :: Implementation :: CPython
Classifier: Topic :: Software Development :: Quality Assurance
Classifier: Topic :: Software Development :: Testing
Classifier: Topic :: System :: Hardware :: Universal Serial Bus (USB)
Classifier: Topic :: Utilities
Classifier: Typing :: Typed
Requires-Python: >=3.11
Requires-Dist: lxml>=6.0.2
Requires-Dist: pandas>=3.0.0
Requires-Dist: rich>=13.0.0
Requires-Dist: typer[all]>=0.12.0
Provides-Extra: dev
Requires-Dist: black>=23.0.0; extra == 'dev'
Requires-Dist: commitizen; extra == 'dev'
Requires-Dist: hypothesis>=6.82.0; extra == 'dev'
Requires-Dist: mypy>=1.7.0; extra == 'dev'
Requires-Dist: pytest-cov>=4.1.0; extra == 'dev'
Requires-Dist: pytest-mock>=3.11.0; extra == 'dev'
Requires-Dist: pytest>=7.4.0; extra == 'dev'
Requires-Dist: ruff>=0.1.0; extra == 'dev'
Requires-Dist: syrupy>=4.0.0; extra == 'dev'
Provides-Extra: test
Requires-Dist: hypothesis>=6.82.0; extra == 'test'
Requires-Dist: pytest-cov>=4.1.0; extra == 'test'
Requires-Dist: pytest-mock>=3.11.0; extra == 'test'
Requires-Dist: pytest>=7.4.0; extra == 'test'
Requires-Dist: syrupy>=4.0.0; extra == 'test'
Description-Content-Type: text/markdown

# py_vreport

**py_vreport** is a modern Python tool designed to parse, analyze, and summarize **Vector CANoe XML Test Reports**.

It provides a powerful command-line interface (CLI) using Typer and Rich to quickly extract test results, identify failures, and view detailed diagnostic contextâ€”all from your terminal, without needing to open the full HTML/XML report in a browser.

![py_vreport description](docs/vreport_desc.png)

## âœ¨ Features

- **ğŸš€ Fast Parsing**: Efficiently parses large CANoe XML report files
- **ğŸ“Š Summary Views**: Get quick overviews of test modules, total tests, and pass/fail counts
- **ğŸ” Detailed Failure Analysis**:
  - View failure context (logs leading up to the failure)
  - Inspect diagnostic data (UDS requests/responses) associated with failures
  - See exactly where and why tests failed
- **ğŸ”¬ Detailed Test Case Inspection**: View every test step, its result, and associated diagnostic data for specific test cases
- **ğŸ“ Multi-file Support**: Process multiple report files in a single batch operation
- **ğŸ¨ Rich Terminal Output**: Beautifully formatted output with colors, tables, and panels powered by Rich
- **ğŸ“¦ Clean Architecture**: Separated parser library from CLI for programmatic use
- **ğŸ¤– AI-Agent Integration**: Designed to work seamlessly with AI agents (like Gemini CLI). You can pipe report data directly into an LLM to:


## ğŸ“‹ Requirements

- **Python 3.11+**
- Dependencies managed via `uv` (recommended) or `pip`

## ğŸ”§ Installation

### Using uv (Recommended)

```bash
# Clone the repository
git clone <repository-url>
cd py_vreport

# Install using uv
uv tool install .
```

## ğŸš€ Usage

After installation, you can use the `vreport` command directly from your terminal.

### ğŸ“Š Basic Summary

Get a high-level overview of one or more test reports:

```bash
vreport summary path/to/report.xml
```

**Output includes:**
- Module name and file path
- Test start time
- Total number of tests
- Number of failures
- List of failed test titles

### âŒ Detailed Failure Analysis

See **why** tests failed, with context logs and diagnostic tables:

```bash
vreport failures path/to/report.xml
```

**Features:**
- Complete failure messages
- Context logs (up to 5 most recent log entries before failure)
- Diagnostic data tables (UDS parameters, values, raw bytes)
- Color-coded output for easy scanning

### ğŸ”¬ Detailed Test Case Inspection

Inspect the full execution logs for specific test cases by searching with a term:

```bash
vreport inspect path/to/report.xml --test-case "Check_Door_Lock_Status"

# Using short flag
vreport inspect path/to/report.xml -t "DTC_Check"
```

**Features:**
- Case-insensitive search
- Shows all matching test cases
- Complete step-by-step execution timeline
- Timestamps, results, and descriptions for each step
- Inline diagnostic data display
- Duration and verdict information

### ğŸ“ Processing Multiple Files

Process multiple XML files in a single command:

```bash
# Summary for multiple files
vreport summary report1.xml report2.xml report3.xml

# Failures across multiple reports
vreport failures tests/*.xml

# Inspect across multiple files
vreport inspect module1.xml module2.xml -t "Voltage_Check"
```

## ğŸ“– Command Reference

### `vreport summary`

Display high-level summary of test results.

```bash
vreport summary [FILES...]
```

**Arguments:**
- `FILES`: One or more paths to CANoe XML report files

### `vreport failures`

Show detailed failure information with context and diagnostics.

```bash
vreport failures [FILES...]
```

**Arguments:**
- `FILES`: One or more paths to CANoe XML report files

### `vreport inspect`

Inspect detailed logs for specific test cases.

```bash
vreport inspect [FILES...] --test-case SEARCH_TERM
vreport inspect [FILES...] -t SEARCH_TERM
```

**Arguments:**
- `FILES`: One or more paths to CANoe XML report files

**Options:**
- `-t, --test-case TEXT`: Search term for test case title (case-insensitive) **[required]**

## ğŸ“ Project Structure

```
py_vreport/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ py_vreport/
â”‚       â”œâ”€â”€ __init__.py          # Package exports
â”‚       â”œâ”€â”€ models.py            # Data models (TestModule, TestCase, etc.)
â”‚       â”œâ”€â”€ parser.py            # Pure parsing logic (library)
â”‚       â”œâ”€â”€ cli.py               # Typer CLI implementation
â”‚       â””â”€â”€ formatters.py        # Rich formatting for terminal output
â”œâ”€â”€ tests/                       # Unit tests
â”œâ”€â”€ pyproject.toml              # Project configuration
â””â”€â”€ README.md                   # This file
```

### Architecture

**Separation of Concerns:**
- **`models.py`**: Dataclasses defining the report structure (TestModule, TestGroup, TestCase, TestStep, FailureContext)
- **`parser.py`**: Pure library logic for parsing XMLâ€”can be imported and used programmatically
- **`cli.py`**: Typer-based CLI commands and argument handling
- **`formatters.py`**: Rich formatting logic for beautiful terminal output (tables, panels, colors)

This clean separation allows `py_vreport` to be used both as a CLI tool and as a Python library in your own scripts.

## ğŸ Programmatic Usage

You can also use py_vreport as a Python library:

```python
from py_vreport.parser import CanoeReportParser

# Parse a report
parser = CanoeReportParser("path/to/report.xml")
report = parser.parse()

# Access data
print(f"Module: {report.name}")
print(f"Total tests: {len(report.get_all_test_cases())}")

# Get failures
failures = report.get_all_failures()
for failure in failures:
    print(f"Failed: {failure.title}")
    print(f"Reason: {failure.failure_reason}")
    
    # Access rich failure context
    for ctx in failure.rich_failure:
        print(f"Context logs: {ctx.context_logs}")
        print(f"Diagnostic data: {ctx.diagnostic_table}")

# Export to pandas DataFrame
df = report.to_pandas()
print(df.head())
```

## ğŸ¨ Output Examples

### Summary Output
```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Module: ECU_Tests â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Property    â”‚ Value                                      â”‚
â”‚ File        â”‚ /path/to/report.xml                        â”‚
â”‚ Start Time  â”‚ 2024-01-25T10:30:00                       â”‚
â”‚ Total Tests â”‚ 45                                         â”‚
â”‚ Failures    â”‚ 3                                          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

Failed Tests:
  â€¢ Check_DTC_Status: Expected DTC 0x123456, got 0x000000
  â€¢ Voltage_Range_Check: Voltage out of range
  â€¢ Door_Lock_Response: Timeout waiting for response
```

### Failure Output
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ECU_Tests - Found 3 failures                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ– Check_DTC_Status
  Expected DTC 0x123456, got 0x000000

Context:
  - I-001: Sending diagnostic session control
  - I-002: Session changed to extended
  - I-003: Reading DTC memory
  - I-004: DTC request: 19 02 FF
  - I-005: Expected response: 59 02 01 23 45 67

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Diagnostic Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parameter      â”‚ Value    â”‚ Raw      â”‚
â”‚ Request        â”‚ 19 02 FF â”‚ 0x1902FF â”‚
â”‚ Response       â”‚ 59 02 00 â”‚ 0x590200 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ERROR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Expected DTC 0x123456, got 0x000000  â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
```