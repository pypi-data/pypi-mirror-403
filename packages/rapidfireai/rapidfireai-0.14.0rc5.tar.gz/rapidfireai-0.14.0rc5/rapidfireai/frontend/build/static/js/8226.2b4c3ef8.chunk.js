"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[8226],{2515:function(e,a,s){s.d(a,{Dy:function(){return t},UG:function(){return l},VZ:function(){return n},cC:function(){return o}});let l=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.FUNCTION="FUNCTION",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.MEMORY="MEMORY",e.UNKNOWN="UNKNOWN",e}({}),t=function(e){return e.MODELS="models",e.DOCUMENT="document",e.CONNECT="connect",e.SEARCH="search",e.SORT="sort",e.UNKNOWN="unknown",e.FUNCTION="function",e.CODE="code",e.NUMBERS="numbers",e.WRENCH="wrench",e.AGENT="agent",e.CHAIN="chain",e.USER="user",e.SYSTEM="system",e.SAVE="save",e}({}),n=function(e){return e.LLM="LLM",e.CHAIN="CHAIN",e.AGENT="AGENT",e.TOOL="TOOL",e.CHAT_MODEL="CHAT_MODEL",e.RETRIEVER="RETRIEVER",e.PARSER="PARSER",e.EMBEDDING="EMBEDDING",e.RERANKER="RERANKER",e.MEMORY="MEMORY",e.UNKNOWN="UNKNOWN",e}({}),o=function(e){return e.JSON="json",e.TEXT="text",e.MARKDOWN="markdown",e}({})},6219:function(e,a,s){s.d(a,{t:function(){return h}});var l=s(64819),t=s(32256),n=s(37733),o=s(76998),r=s(86288),i=s(29332),d=s(61660),c=s(51391);const{Paragraph:u}=n.T;var m={name:"zjik7",styles:"display:flex"},g={name:"1ff36h2",styles:"flex-grow:1"};const p=o.memo(e=>{const{theme:a}=(0,n.u)();return(0,c.Y)(i.d,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagfullviewmodal.tsx_17",title:"Tag: "+e.tagKey,visible:e.isKeyValueTagFullViewModalVisible,onCancel:()=>e.setIsKeyValueTagFullViewModalVisible(!1),children:(0,c.FD)("div",{css:m,children:[(0,c.Y)(u,{css:g,children:(0,c.Y)("pre",{css:(0,l.AH)({backgroundColor:a.colors.backgroundPrimary,marginTop:a.spacing.sm,whiteSpace:"pre-wrap",wordBreak:"break-all"},""),children:e.tagValue})}),(0,c.Y)("div",{css:(0,l.AH)({marginTop:a.spacing.sm},""),children:(0,c.Y)(d.i,{copyText:e.tagValue,showLabel:!1,icon:(0,c.Y)(t.CopyIcon,{}),"aria-label":"Copy"})})]})})});function f(e=!0){return e?{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"}}const h=({isClosable:e=!1,onClose:a,tag:s,enableFullViewModal:i=!1,charLimit:d=30,maxWidth:u=300,className:m})=>{const g=(0,r.A)(),[h,v]=(0,o.useState)(!1),{shouldTruncateKey:y,shouldTruncateValue:T}=function(e,a=30){const{key:s,value:l}=e,t=s.length+l.length,n=s.length>l.length,o=n?l.length:s.length;return t<=a?{shouldTruncateKey:!1,shouldTruncateValue:!1}:o>a/2?{shouldTruncateKey:!0,shouldTruncateValue:!0}:{shouldTruncateKey:n,shouldTruncateValue:!n}}(s,d),M=i&&(y||T),_=g.formatMessage({id:"ZXUtU8",defaultMessage:"Click to see more"});return(0,c.FD)("div",{children:[(0,c.Y)(t.Tag,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetag.tsx_60",closable:e,onClose:a,title:s.key,className:m,children:(0,c.Y)(t.LegacyTooltip,{title:M?_:"",children:(0,c.FD)("span",{css:(0,l.AH)({maxWidth:u,display:"inline-flex"},""),onClick:()=>M?v(!0):void 0,children:[(0,c.Y)(n.T.Text,{bold:!0,title:s.key,css:f(y),children:s.key}),s.value&&(0,c.FD)(n.T.Text,{title:s.value,css:f(T),children:[": ",s.value]})]})})}),(0,c.Y)("div",{children:h&&(0,c.Y)(p,{tagKey:s.key,tagValue:s.value,isKeyValueTagFullViewModalVisible:h,setIsKeyValueTagFullViewModalVisible:v})})]})}},45543:function(e,a,s){s.d(a,{a8:function(){return A},VZ:function(){return C.VZ}});var l=s(64819),t=s(76998),n=s(34515),o=s(37733),r=s(32256),i=s(49818),d=s(93745),c=s(61520),u=s(76117),m=s(74260),g=s(36420),p=s(84918),f=s(30553),h=s(40143),v=s(90367),y=s(51391);var T={name:"13y2nry",styles:"display:flex;flex-direction:column;height:100%;overflow:hidden"},M={name:"1kyojz6",styles:"& > div:first-of-type{margin-bottom:0;flex-shrink:0;}display:flex;flex-direction:column;height:100%;overflow:hidden"},_={name:"l2hjmg",styles:"display:flex;flex-direction:column;flex:1;min-height:0"},k={name:"l2hjmg",styles:"display:flex;flex-direction:column;flex:1;min-height:0"};const w=({modelTrace:e,className:a,selectedSpanId:s,onSelectSpan:t})=>{const{theme:n}=(0,o.u)(),c=(0,d.wO)(),{activeView:m,setActiveView:g}=(0,p.nJ)();return c?(0,y.FD)(r.Tabs.Root,{componentId:"model-trace-explorer",value:m,onValueChange:e=>g(e),css:M,children:[(0,y.Y)("div",{css:(0,l.AH)({paddingLeft:n.spacing.md,paddingBottom:n.spacing.md},""),children:(0,y.Y)(v.i,{modelTrace:e})}),(0,y.FD)(r.Tabs.List,{css:(0,l.AH)({paddingLeft:n.spacing.md,flexShrink:0},""),children:[(0,y.Y)(r.Tabs.Trigger,{value:"summary",children:(0,y.Y)(i.sA,{id:"paolVF",defaultMessage:"Summary"})}),(0,y.Y)(r.Tabs.Trigger,{value:"detail",children:(0,y.Y)(i.sA,{id:"Wh+aKq",defaultMessage:"Details & Timeline"})})]}),(0,y.Y)(r.Tabs.Content,{value:"summary",css:_,children:(0,y.Y)(h.b,{modelTrace:e})}),(0,y.Y)(r.Tabs.Content,{value:"detail",css:k,children:(0,y.Y)(u._,{modelTrace:e,className:a,selectedSpanId:s,onSelectSpan:t})})]}):(0,y.Y)("div",{css:T,children:(0,y.Y)(u._,{modelTrace:e,className:a,selectedSpanId:s,onSelectSpan:t})})},E=({children:e})=>(0,y.Y)(n.tH,{fallbackRender:m.T,children:e}),A=({modelTrace:e,className:a,initialActiveView:s="summary",selectedSpanId:l,onSelectSpan:n})=>{const[o,r]=(0,t.useState)(e),[i,d]=(0,t.useState)(!0),u=(0,c.MF)(e);return(0,f.T)({traceId:u,setModelTrace:r,setAssessmentsPaneEnabled:d}),(0,t.useEffect)(()=>{r(e)},[u]),(0,y.Y)(E,{traceId:u,children:(0,y.Y)(p.DK,{modelTrace:o,initialActiveView:s,selectedSpanIdOnRender:l,assessmentsPaneEnabled:i,children:(0,y.Y)(w,{modelTrace:o,className:a,selectedSpanId:l,onSelectSpan:n})})})};A.Skeleton=g.F;var C=s(2515)},64874:function(e,a,s){s.d(a,{$:function(){return r}});var l=s(66860),t=s(35368),n=s(76998),o=s(65278);const r=({onSuccess:e,existingTagKeys:a=[],useV3Apis:s})=>{const{showEditTagsModal:r,EditTagsModal:i}=(0,l.Q)({saveTagsHandler:async(e,a,l)=>{if(!e.traceRequestId)return;const n=e.traceRequestId,o=l.filter(({key:e,value:s})=>!a.some(({key:a,value:l})=>a===e&&s===l)),r=a.filter(({key:e})=>!l.some(({key:a})=>e===a));return Promise.all([...o.map(({key:e,value:a})=>s?t.x.setExperimentTraceTagV3(n,e,a):t.x.setExperimentTraceTag(n,e,a)),...r.map(({key:e})=>s?t.x.deleteExperimentTraceTagV3(n,e):t.x.deleteExperimentTraceTag(n,e))])},valueRequired:!0,allAvailableTags:a.filter(e=>e&&!e.startsWith(o.nt)),onSuccess:e});return{showEditTagsModalForTrace:(0,n.useCallback)(e=>{var a;if(!e.request_id)return;const s=(null===(a=e.tags)||void 0===a?void 0:a.filter(({key:e})=>e&&!e.startsWith(o.nt)))||[];r({traceRequestId:e.request_id,tags:s||[]})},[r]),EditTagsModal:i}}},66860:function(e,a,s){s.d(a,{Q:function(){return k}});var l=s(64819),t=s(45901),n=s(76998),o=s(37733),r=s(29332),i=s(32256),d=s(86288),c=s(34139),u=s(75523),m=s(51391);var g={name:"4zleql",styles:"display:block"};function p(e){return a=>function(e,a){const s=(0,d.A)(),{theme:r}=(0,o.u)(),c=e.props.searchValue.toLowerCase();return(0,n.useMemo)(()=>{if(!c)return e;if((0,t.sortedIndexOf)(a,c)>=0)return e;const o=/^[^,.:/=\-\s]+$/.test(c);return n.cloneElement(e,{flattenOptions:[{data:{value:c,disabled:!o,style:{color:o?r.colors.actionTertiaryTextDefault:r.colors.actionDisabledText},children:(0,m.Y)(i.LegacyTooltip,{title:o?void 0:s.formatMessage({id:"fWEvZL",defaultMessage:", . : / - = and blank spaces are not allowed"}),placement:"right",children:(0,m.FD)("span",{css:g,children:[(0,m.Y)(i.PlusIcon,{css:(0,l.AH)({marginRight:r.spacing.sm},"")}),s.formatMessage({id:"IJbauF",defaultMessage:'Add tag "{tagKey}"'},{tagKey:c})]})})},key:c,groupOption:!1},...e.props.flattenOptions]})},[a,e,c,s,r])}(a,e)}var f={name:"1d3w5wq",styles:"width:100%"};function h({allAvailableTags:e,control:a,onKeyChangeCallback:s}){const l=(0,d.A)(),[t,o]=(0,n.useState)(!1),r=(0,n.useRef)(null),{field:c,fieldState:g}=(0,u.as)({control:a,name:"key",rules:{required:{message:l.formatMessage({id:"RlBbjb",defaultMessage:"A tag key is required"}),value:!0}}});return(0,m.Y)(i.LegacySelect,{allowClear:!0,ref:r,dangerouslySetAntdProps:{showSearch:!0,dropdownRender:p(e)},css:f,placeholder:l.formatMessage({id:"8ALhnh",defaultMessage:"Type a key"}),value:c.value,defaultValue:c.value,open:t,onDropdownVisibleChange:e=>{o(e)},filterOption:(e,a)=>null===a||void 0===a?void 0:a.value.toLowerCase().includes(e.toLowerCase()),onSelect:e=>{c.onChange(e),null===s||void 0===s||s(e)},onClear:()=>{c.onChange(void 0),null===s||void 0===s||s(void 0)},validationState:g.error?"error":void 0,children:e.map(e=>(0,m.Y)(i.LegacySelect.Option,{value:e,children:e},e))})}var v=s(6219),y=s(42142);function T(e){return new Map(e.map(e=>[e.key,e]))}var M={name:"82a6rk",styles:"flex:1"},_={name:"82a6rk",styles:"flex:1"};const k=({onSuccess:e,saveTagsHandler:a,allAvailableTags:s,valueRequired:g=!1,title:p})=>{const f=(0,n.useRef)(),[k,w]=(0,n.useState)(""),{theme:A}=(0,o.u)(),[C,x]=(0,n.useState)(new Map),[Y,S]=(0,n.useState)(new Map),[R,b]=(0,n.useState)(!1),N=(0,u.mN)({defaultValues:{key:void 0,value:""}}),I=()=>b(!1),V=(0,n.useCallback)(e=>{f.current=e,x(T(e.tags||[])),S(T(e.tags||[])),N.reset(),b(!0)},[N]),O=async()=>{f.current&&(w(""),H(!0),a(f.current,Array.from(C.values()),Array.from(Y.values())).then(()=>{I(),null===e||void 0===e||e(),H(!1)}).catch(e=>{var a;H(!1),w(e instanceof y.s?null===(a=e.getUserVisibleError())||void 0===a?void 0:a.message:e.message)}))},F=(0,d.A)(),L=N.watch(),[D,H]=(0,n.useState)(!1),K=(0,n.useMemo)(()=>!(0,t.isEqual)((0,t.sortBy)(Array.from(C.values()),"key"),(0,t.sortBy)(Array.from(Y.values()),"key")),[C,Y]),U=L.key||L.value,B=K&&U;return{EditTagsModal:(0,m.FD)(r.d,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_135",destroyOnClose:!0,visible:R,title:null!==p&&void 0!==p?p:(0,m.Y)(c.A,{id:"TBX+Gs",defaultMessage:"Add/Edit tags"}),onCancel:I,footer:(0,m.FD)(o.x,{children:[(0,m.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147",dangerouslyUseFocusPseudoClass:!0,onClick:I,css:(0,l.AH)({marginRight:K?0:A.spacing.sm},""),children:F.formatMessage({id:"2a/rR8",defaultMessage:"Cancel"})}),B?(0,m.Y)(E,{formValues:L,isLoading:D,onSaveTask:O}):(0,m.Y)(i.LegacyTooltip,{title:K?void 0:F.formatMessage({id:"16onEc",defaultMessage:"Please add or remove one or more tags before saving"}),children:(0,m.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174",dangerouslyUseFocusPseudoClass:!0,disabled:!K,loading:D,type:"primary",onClick:O,children:F.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})})]}),children:[(0,m.FD)("form",{onSubmit:N.handleSubmit(()=>{if(g&&!L.value.trim())return;const e=new Map(Y);e.set(L.key,L),S(e),N.reset()}),css:(0,l.AH)({display:"flex",alignItems:"flex-end",gap:A.spacing.md},""),children:[(0,m.FD)("div",{css:(0,l.AH)({minWidth:0,display:"flex",gap:A.spacing.md,flex:1},""),children:[(0,m.FD)("div",{css:M,children:[(0,m.Y)(i.FormUI.Label,{htmlFor:"key",children:F.formatMessage({id:"crTWax",defaultMessage:"Key"})}),(0,m.Y)(h,{allAvailableTags:s||[],control:N.control,onKeyChangeCallback:e=>{var a;const s=e?Y.get(e):void 0;N.setValue("value",null!==(a=null===s||void 0===s?void 0:s.value)&&void 0!==a?a:"")}})]}),(0,m.FD)("div",{css:_,children:[(0,m.Y)(i.FormUI.Label,{htmlFor:"value",children:g?F.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):F.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"})}),(0,m.Y)(i.RHFControlledComponents.Input,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_223",name:"value",control:N.control,"aria-label":g?F.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):F.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"}),placeholder:F.formatMessage({id:"FFe+Ug",defaultMessage:"Type a value"})})]})]}),(0,m.Y)(i.LegacyTooltip,{title:F.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,m.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248",htmlType:"submit","aria-label":F.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,m.Y)(i.PlusIcon,{})})})]}),k&&(0,m.Y)(i.FormUI.Message,{type:"error",message:k}),(0,m.Y)("div",{css:(0,l.AH)({display:"flex",rowGap:A.spacing.xs,flexWrap:"wrap",marginTop:A.spacing.sm},""),children:Array.from(Y.values()).map(e=>(0,m.Y)(v.t,{isClosable:!0,tag:e,onClose:()=>(({key:e})=>{S(a=>(a.delete(e),new Map(a)))})(e)},e.key))})]}),showEditTagsModal:V,isLoading:D}};var w={name:"1y0ex1",styles:"max-width:400px"};function E({isLoading:e,formValues:a,onSaveTask:s}){const n=(0,d.A)(),{theme:r}=(0,o.u)(),i=`${`${(0,t.truncate)(a.key,{length:20})||"_"}`}${a.value?`:${(0,t.truncate)(a.value,{length:20})}`:""}`,c=n.formatMessage({id:"wcSVYI",defaultMessage:'Are you sure you want to save and close without adding "{tag}"'},{tag:i});return(0,m.FD)(o.aw.Root,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_309",children:[(0,m.Y)(o.aw.Trigger,{asChild:!0,children:(0,m.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306",dangerouslyUseFocusPseudoClass:!0,loading:e,type:"primary",children:n.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})}),(0,m.FD)(o.aw.Content,{align:"end","aria-label":c,children:[(0,m.Y)(o.T.Paragraph,{css:w,children:c}),(0,m.Y)(o.aw.Close,{asChild:!0,children:(0,m.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316",onClick:s,children:n.formatMessage({id:"mv6CY3",defaultMessage:"Yes, save and close"})})}),(0,m.Y)(o.aw.Close,{asChild:!0,children:(0,m.Y)(o.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324",type:"primary",css:(0,l.AH)({marginLeft:r.spacing.sm},""),children:n.formatMessage({id:"geizp1",defaultMessage:"Cancel"})})}),(0,m.Y)(o.aw.Arrow,{})]})]})}}}]);
//# sourceMappingURL=8226.2b4c3ef8.chunk.js.map