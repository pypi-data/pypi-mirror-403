{"version":3,"file":"static/js/1456.4b21d469.chunk.js","mappings":"+MAMA,MAAMA,EAAoB,CACxBC,UAAW,UACXC,cAAe,UACfC,OAAQ,KA4DV,UAnD8BC,EAAGC,UAASC,OAAMC,cAAcC,EAAAA,OAC5D,MAAMC,GAAeC,EAAAA,EAAAA,QAA8B,OAC5CC,EAAYC,IAAiBC,EAAAA,EAAAA,UAA4B,OAEzDC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAChCG,EAAOC,IAAYJ,EAAAA,EAAAA,WAAkB,IAE5CK,EAAAA,EAAAA,WAAU,KACR,IAAKT,EAAaU,QAAS,OAE3B,MAAMC,EAAKC,EAAAA,EAAWC,OAAO,CAC3BC,eAAe,EACfC,UAAWf,EAAaU,WACrBnB,EACHyB,KAAKC,EAAAA,EAAAA,IAAuBpB,EAAMD,KAapC,OAVAe,EAAGO,GAAG,QAAS,KACbZ,GAAW,KAGbK,EAAGO,GAAG,QAAS,KACbV,GAAS,KAGXL,EAAcQ,GAEP,KACLA,EAAGQ,YAEJ,CAACnB,EAAcH,EAAMD,IAExB,MAAMwB,EAAcf,IAAYE,EAEhC,OACEc,EAAAA,EAAAA,IAAA,OAAK,cAAY,yBAAwBC,SAAA,CACtCF,IAAeG,EAAAA,EAAAA,GAACC,EAAAA,EAAoB,IACpCjB,IAASgB,EAAAA,EAAAA,GAACE,EAAAA,EAAsB,KAEjCF,EAAAA,EAAAA,GAAA,OACEG,KAAGC,EAAAA,EAAAA,IAAE,CACHC,QAASvB,GAAWE,EAAQ,OAAS,QACrCsB,QAAS,IACV,IAACP,UAEFC,EAAAA,EAAAA,GAAA,OAAKO,IAAK9B,S","sources":["experiment-tracking/components/artifact-view-components/ShowArtifactAudioView.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport WaveSurfer from 'wavesurfer.js';\nimport { getArtifactBlob, getArtifactLocationUrl } from '../../../common/utils/ArtifactUtils';\nimport { ArtifactViewErrorState } from './ArtifactViewErrorState';\nimport { ArtifactViewSkeleton } from './ArtifactViewSkeleton';\n\nconst waveSurferStyling = {\n  waveColor: '#1890ff',\n  progressColor: '#0b3574',\n  height: 500,\n};\n\nexport type ShowArtifactAudioViewProps = {\n  runUuid: string;\n  path: string;\n  getArtifact?: (...args: any[]) => any;\n};\n\nconst ShowArtifactAudioView = ({ runUuid, path, getArtifact = getArtifactBlob }: ShowArtifactAudioViewProps) => {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const [waveSurfer, setWaveSurfer] = useState<WaveSurfer | null>(null);\n\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    const ws = WaveSurfer.create({\n      mediaControls: true,\n      container: containerRef.current,\n      ...waveSurferStyling,\n      url: getArtifactLocationUrl(path, runUuid),\n    });\n\n    ws.on('ready', () => {\n      setLoading(false);\n    });\n\n    ws.on('error', () => {\n      setError(true);\n    });\n\n    setWaveSurfer(ws);\n\n    return () => {\n      ws.destroy();\n    };\n  }, [containerRef, path, runUuid]);\n\n  const showLoading = loading && !error;\n\n  return (\n    <div data-testid=\"audio-artifact-preview\">\n      {showLoading && <ArtifactViewSkeleton />}\n      {error && <ArtifactViewErrorState />}\n      {/* This div is always rendered, but its visibility is controlled by the loading and error states */}\n      <div\n        css={{\n          display: loading || error ? 'none' : 'block',\n          padding: 20,\n        }}\n      >\n        <div ref={containerRef} />\n      </div>\n    </div>\n  );\n};\n\nexport default ShowArtifactAudioView;\n"],"names":["waveSurferStyling","waveColor","progressColor","height","ShowArtifactAudioView","runUuid","path","getArtifact","getArtifactBlob","containerRef","useRef","waveSurfer","setWaveSurfer","useState","loading","setLoading","error","setError","useEffect","current","ws","WaveSurfer","create","mediaControls","container","url","getArtifactLocationUrl","on","destroy","showLoading","_jsxs","children","_jsx","ArtifactViewSkeleton","ArtifactViewErrorState","css","_css","display","padding","ref"],"ignoreList":[],"sourceRoot":""}