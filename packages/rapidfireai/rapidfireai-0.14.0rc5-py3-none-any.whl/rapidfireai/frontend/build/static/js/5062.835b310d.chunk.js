"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[5062],{201:function(e,r,t){t.d(r,{YQ:function(){return a},d7:function(){return i}});var n=t(76998);function a(e,r,a,o){var i=this,s=(0,n.useRef)(null),l=(0,n.useRef)(0),u=(0,n.useRef)(0),c=(0,n.useRef)(null),d=(0,n.useRef)([]),m=(0,n.useRef)(),f=(0,n.useRef)(),g=(0,n.useRef)(e),p=(0,n.useRef)(!0),v=(0,n.useRef)(),h=(0,n.useRef)();g.current=e;var y="undefined"!=typeof window,P=!r&&0!==r&&y;if("function"!=typeof e)throw new TypeError("Expected a function");r=+r||0;var w=!!(a=a||{}).leading,M=!("trailing"in a)||!!a.trailing,Y=!!a.flushOnExit&&M,x="maxWait"in a,T="debounceOnServer"in a&&!!a.debounceOnServer,b=x?Math.max(+a.maxWait||0,r):null,R=(0,n.useMemo)(function(){var e=function(e){var r=d.current,t=m.current;return d.current=m.current=null,l.current=e,u.current=u.current||e,f.current=g.current.apply(t,r)},n=function(e,r){P&&cancelAnimationFrame(c.current),c.current=P?requestAnimationFrame(e):setTimeout(e,r)},a=function(e){if(!p.current)return!1;var t=e-s.current;return!s.current||t>=r||t<0||x&&e-l.current>=b},R=function(r){return c.current=null,M&&d.current?e(r):(d.current=m.current=null,f.current)},A=function e(){var t=Date.now();if(w&&u.current===l.current&&F(),a(t))return R(t);if(p.current){var o=r-(t-s.current),i=x?Math.min(o,b-(t-l.current)):o;n(e,i)}},F=function(){o&&o({})},k=function(){if(y||T){var o,u=Date.now(),g=a(u);if(d.current=[].slice.call(arguments),m.current=i,s.current=u,Y&&!v.current&&(v.current=function(){var e;"hidden"===(null==(e=t.g.document)?void 0:e.visibilityState)&&h.current.flush()},null==(o=t.g.document)||null==o.addEventListener||o.addEventListener("visibilitychange",v.current)),g){if(!c.current&&p.current)return l.current=s.current,n(A,r),w?e(s.current):f.current;if(x)return n(A,r),e(s.current)}return c.current||n(A,r),f.current}};return k.cancel=function(){var e=c.current;e&&(P?cancelAnimationFrame(c.current):clearTimeout(c.current)),l.current=0,d.current=s.current=m.current=c.current=null,e&&o&&o({})},k.isPending=function(){return!!c.current},k.flush=function(){return c.current?R(Date.now()):f.current},k},[w,x,r,b,M,Y,P,y,T,o]);return h.current=R,(0,n.useEffect)(function(){return p.current=!0,function(){var e;Y&&h.current.flush(),v.current&&(null==(e=t.g.document)||null==e.removeEventListener||e.removeEventListener("visibilitychange",v.current),v.current=null),p.current=!1}},[Y]),R}function o(e,r){return e===r}function i(e,r,t){var i=t&&t.equalityFn||o,s=(0,n.useRef)(e),l=(0,n.useState)({})[1],u=a((0,n.useCallback)(function(e){s.current=e,l({})},[l]),r,t,l),c=(0,n.useRef)(e);return i(c.current,e)||(u(e),c.current=e),[s.current,u]}},7538:function(e,r,t){t.d(r,{i:function(){return l}});var n=t(69608),a=t(66860),o=t(1552),i=t(76998),s=t(65278);const l=({onSuccess:e})=>{const r=(0,n.n)({mutationFn:async({toAdd:e,toDelete:r,promptId:t})=>Promise.all([...e.map(({key:e,value:r})=>o.M.setRegisteredPromptTag(t,e,r)),...r.map(({key:e})=>o.M.deleteRegisteredPromptTag(t,e))])}),{EditTagsModal:t,showEditTagsModal:l,isLoading:u}=(0,a.Q)({valueRequired:!0,saveTagsHandler:(t,n,a)=>{const{addedOrModifiedTags:o,deletedTags:i}=(0,s.Rf)(n,a);return new Promise((n,a)=>{if(!t.name)return a();r.mutate({promptId:t.name,toAdd:o,toDelete:i},{onSuccess:()=>{n(),null===e||void 0===e||e()},onError:a})})}});return{EditTagsModal:t,showEditPromptTagsModal:(0,i.useCallback)(e=>l({name:e.name,tags:e.tags.filter(e=>(0,s.oD)(e.key))}),[l]),isLoading:u}}},32618:function(e,r,t){t.d(r,{q:function(){return i}});var n=t(37733),a=t(34139),o=t(51391);const i=({row:{original:e},getValue:r})=>{const t=r();return t?(0,o.Y)(n.T.Text,{children:(0,o.Y)(a.A,{id:"sM0MBJ",defaultMessage:"Version {version}",values:{version:t}})}):null}},48538:function(e,r,t){t.d(r,{u:function(){return u}});var n=t(32256),a=t(37733),o=t(34139),i=t(78533),s=t(51391);var l={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"};const u=({error:e})=>{var r;return(0,s.Y)(i.m,{css:l,children:(0,s.Y)(n.Empty,{"data-testid":"fallback",title:(0,s.Y)(o.A,{id:"AOoWxS",defaultMessage:"Error"}),description:null!==(r=null===e||void 0===e?void 0:e.message)&&void 0!==r?r:(0,s.Y)(o.A,{id:"zmMR5p",defaultMessage:"An error occurred while rendering this component."}),image:(0,s.Y)(a.k,{})})})}},75062:function(e,r,t){t.r(r),t.d(r,{default:function(){return H}});var n=t(78533),a=t(13843),o=t(76998),i=t(1552);const s=({queryKey:e})=>{const[,{searchFilter:r,pageToken:t}]=e;return i.M.listRegisteredPrompts(r,t)};var l=t(29332),u=t(32256),c=t(37733),d=t(34139),m=t(51391);const f=({searchFilter:e,onSearchFilterChange:r})=>(0,m.Y)(u.TableFilterLayout,{children:(0,m.Y)(u.TableFilterInput,{placeholder:"Search prompts by name",componentId:"mlflow.prompts.list.search",value:e,onChange:e=>r(e.target.value)})});var g=t(64819),p=t(60600),v=t(32038),h=t(86288),y=t(65278),P=t(6219);var w={name:"zjik7",styles:"display:flex"},M={name:"tyk0n8",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex"},Y={name:"14cnl6e",styles:"flex-shrink:0;opacity:0;[role=row]:hover &{opacity:1;}[role=row]:focus-within &{opacity:1;}"};const x=({row:{original:e},table:{options:{meta:r}}})=>{var t;const n=(0,h.A)(),{onEditTags:a}=r,o=(null===e||void 0===e||null===(t=e.tags)||void 0===t?void 0:t.filter(e=>(0,y.oD)(e.key)))||[],i=o.length>0;return(0,m.FD)("div",{css:w,children:[(0,m.Y)("div",{css:M,children:null===o||void 0===o?void 0:o.map(e=>(0,m.Y)(P.t,{tag:e},e.key))}),(0,m.Y)(c.B,{componentId:"mlflow.prompts.list.tag.add",size:"small",icon:i?(0,m.Y)(u.PencilIcon,{}):void 0,onClick:()=>null===a||void 0===a?void 0:a(e),"aria-label":n.formatMessage({id:"lA8QO2",defaultMessage:"Edit tags"}),children:i?void 0:(0,m.Y)(d.A,{id:"iDpAK8",defaultMessage:"Add tags"}),css:Y,type:"tertiary"})]})};var T=t(98512),b=t(89105);const R=({row:{original:e},getValue:r})=>{const t=r();return e.name?(0,m.Y)(T.N_,{to:b.Ay.getPromptDetailsPageRoute(encodeURIComponent(e.name)),children:t}):t};var A=t(71146),F=t(32618),k=t(45901);var E={name:"1h3rtzg",styles:"align-items:center"};const C=({prompts:e,hasNextPage:r,hasPreviousPage:t,isLoading:n,isFiltered:a,onNextPage:i,onPreviousPage:s,onEditTags:l})=>{const{theme:f}=(0,c.u)(),y=(()=>{const e=(0,h.A)();return(0,o.useMemo)(()=>[{header:e.formatMessage({id:"tzA/LZ",defaultMessage:"Name"}),accessorKey:"name",id:"name",cell:R},{header:e.formatMessage({id:"bmd4rb",defaultMessage:"Latest version"}),cell:F.q,accessorFn:({latest_versions:e})=>{var r;return null===(r=(0,k.first)(e))||void 0===r?void 0:r.version},id:"latestVersion"},{header:e.formatMessage({id:"FiKsFK",defaultMessage:"Last modified"}),id:"lastModified",accessorFn:({last_updated_timestamp:r})=>A.A.formatTimestamp(r,e)},{header:e.formatMessage({id:"KMVqUP",defaultMessage:"Tags"}),accessorKey:"tags",id:"tags",cell:x}],[e])})(),P=(0,p.N4)({data:null!==e&&void 0!==e?e:[],columns:y,getCoreRowModel:(0,v.HT)(),getRowId:(e,r)=>{var t;return null!==(t=e.name)&&void 0!==t?t:r.toString()},meta:{onEditTags:l}});return(0,m.FD)(u.Table,{scrollable:!0,pagination:(0,m.Y)(u.CursorPagination,{hasNextPage:r,hasPreviousPage:t,onNextPage:i,onPreviousPage:s,componentId:"mlflow.prompts.list.pagination"}),empty:(()=>{const r=!n&&(0,k.isEmpty)(e);return r&&a?(0,m.Y)(u.Empty,{image:(0,m.Y)(u.NoIcon,{}),title:(0,m.Y)(d.A,{id:"hlpNRa",defaultMessage:"No prompts found"}),description:null}):r?(0,m.Y)(u.Empty,{title:(0,m.Y)(d.A,{id:"/fwKFW",defaultMessage:"No prompts created"}),description:(0,m.Y)(d.A,{id:"WM5IeI",defaultMessage:'Use "Create prompt" button in order to create a new prompt'})}):null})(),children:[(0,m.Y)(u.TableRow,{isHeader:!0,children:P.getLeafHeaders().map(e=>(0,m.Y)(u.TableHeader,{componentId:"mlflow.prompts.list.table.header",children:(0,p.Kv)(e.column.columnDef.header,e.getContext())},e.id))}),n?(0,m.Y)(u.TableSkeletonRows,{table:P}):P.getRowModel().rows.map(e=>(0,m.Y)(u.TableRow,{css:(0,g.AH)({height:f.general.buttonHeight},""),children:e.getAllCells().map(e=>(0,m.Y)(u.TableCell,{css:E,children:(0,p.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))]})};var S=t(7538),N=t(78089),D=t(97709),I=t(28976),L=t(48538),_=t(201);var K={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},q={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"};var H=(0,D.X)(I.A.mlflowServices.EXPERIMENTS,()=>{const[e,r]=(0,o.useState)(""),t=(0,T.Zp)(),[i]=(0,_.d7)(e,500),{data:g,error:p,refetch:v,hasNextPage:h,hasPreviousPage:y,isLoading:P,onNextPage:w,onPreviousPage:M}=(({searchFilter:e}={})=>{var r,t,n,i;const l=(0,o.useRef)([]),[u,c]=(0,o.useState)(void 0),d=(0,a.I)(["prompts_list",{searchFilter:e,pageToken:u}],{queryFn:s,retry:!1}),m=(0,o.useCallback)(()=>{var e;l.current.push(u),c(null===(e=d.data)||void 0===e?void 0:e.next_page_token)},[null===(r=d.data)||void 0===r?void 0:r.next_page_token,u]),f=(0,o.useCallback)(()=>{const e=l.current.pop();c(e)},[]);return{data:null===(t=d.data)||void 0===t?void 0:t.registered_models,error:null!==(n=d.error)&&void 0!==n?n:void 0,isLoading:d.isLoading,hasNextPage:void 0!==(null===(i=d.data)||void 0===i?void 0:i.next_page_token),hasPreviousPage:Boolean(u),onNextPage:m,onPreviousPage:f,refetch:d.refetch}})({searchFilter:i}),{EditTagsModal:Y,showEditPromptTagsModal:x}=(0,S.i)({onSuccess:v}),{CreatePromptModal:R,openModal:A}=(0,N.z)({mode:N.v.CreatePrompt,onSuccess:({promptName:e})=>t(b.Ay.getPromptDetailsPageRoute(e))});return(0,m.FD)(n.m,{css:K,children:[(0,m.Y)(l.S,{shrinks:!1}),(0,m.Y)(u.Header,{title:(0,m.Y)(d.A,{id:"aLRRam",defaultMessage:"Prompts"}),buttons:(0,m.Y)(c.B,{componentId:"mlflow.prompts.list.create",type:"primary",onClick:A,children:(0,m.Y)(d.A,{id:"7x6xu8",defaultMessage:"Create prompt"})})}),(0,m.Y)(l.S,{shrinks:!1}),(0,m.FD)("div",{css:q,children:[(0,m.Y)(f,{searchFilter:e,onSearchFilterChange:r}),(null===p||void 0===p?void 0:p.message)&&(0,m.FD)(m.FK,{children:[(0,m.Y)(u.Alert,{type:"error",message:p.message,componentId:"mlflow.prompts.list.error",closable:!1}),(0,m.Y)(l.S,{})]}),(0,m.Y)(C,{prompts:g,error:p,hasNextPage:h,hasPreviousPage:y,isLoading:P,isFiltered:Boolean(e),onNextPage:w,onPreviousPage:M,onEditTags:x})]}),Y,R]})},void 0,L.u)}}]);
//# sourceMappingURL=5062.835b310d.chunk.js.map