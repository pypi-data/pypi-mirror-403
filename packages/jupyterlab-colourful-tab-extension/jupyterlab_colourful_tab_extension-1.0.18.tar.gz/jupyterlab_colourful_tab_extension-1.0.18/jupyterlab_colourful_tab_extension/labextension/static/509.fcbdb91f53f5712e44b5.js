"use strict";(self.webpackChunkjupyterlab_colourful_tab_extension=self.webpackChunkjupyterlab_colourful_tab_extension||[]).push([[509],{509:(t,e,o)=>{o.r(e),o.d(e,{default:()=>g});var a=o(400),s=o(391);const n=[{name:"Red",id:"rose",cssClass:"jp-colourful-tab-rose"},{name:"Orange",id:"peach",cssClass:"jp-colourful-tab-peach"},{name:"Yellow",id:"lemon",cssClass:"jp-colourful-tab-lemon"},{name:"Green",id:"mint",cssClass:"jp-colourful-tab-mint"},{name:"Blue",id:"sky",cssClass:"jp-colourful-tab-sky"},{name:"Purple",id:"lavender",cssClass:"jp-colourful-tab-lavender"}],l="jupyterlab-colourful-tab-colours",c=new Map;function r(){try{const t={};c.forEach((e,o)=>{t[o]=e}),localStorage.setItem(l,JSON.stringify(t))}catch(t){console.warn("Colourful Tab: Failed to save colours to storage",t)}}let i=null,u=null;function d(t,e){n.forEach(e=>t.classList.remove(e.cssClass)),e>=0&&e<n.length&&t.classList.add(n[e].cssClass)}function m(t){const e=t.getAttribute("title"),o=t.dataset.id;if(e&&e.includes("Path:")){const t=e.match(/Path:\s*(.+?)(?:\n|$)/);if(t&&t[1])return t[1].trim()}if(o){return function(){const t=new Map;return u&&u.forEach(e=>{var o,a;const s=null===(o=e.content)||void 0===o?void 0:o.session;(null===(a=null==s?void 0:s.model)||void 0===a?void 0:a.name)&&t.set(e.id,`terminal:${s.model.name}`)}),t}().get(o)||o}return null}function b(){const t=new Map;return document.querySelectorAll("#jp-main-dock-panel .lm-TabBar-tab").forEach(e=>{const o=e,a=m(o);a&&t.set(a,o)}),t}function f(){const t=b();c.forEach((e,o)=>{const a=t.get(o);a&&!a.classList.contains(n[e].cssClass)&&d(a,e)}),function(){const t=b(),e=[];c.forEach((o,a)=>{t.has(a)||e.push(a)}),e.length>0&&(e.forEach(t=>c.delete(t)),r())}()}let p=null;function h(){const t=document.querySelector("#jp-main-dock-panel .lm-TabBar-tab.lm-mod-current");if(!t)return;const e=m(t);if(!e)return;const o=c.get(e);if(document.querySelectorAll("jp-toolbar").forEach(t=>{n.forEach(e=>t.classList.remove(e.cssClass))}),void 0!==o&&o>=0&&o<n.length){const t=document.querySelector("#jp-main-dock-panel .lm-DockPanel-widget:not(.lm-mod-hidden) jp-toolbar");t&&t.classList.add(n[o].cssClass)}}const g={id:"jupyterlab_colourful_tab_extension:plugin",description:"JupyterLab extension that makes tabs coloured using pastel colours to help identify them when many are open",autoStart:!0,optional:[a.ITerminalTracker],activate:(t,e)=>{console.log("JupyterLab extension jupyterlab_colourful_tab_extension is activated!"),u=e,function(){try{const t=localStorage.getItem(l);if(t){const e=JSON.parse(t);Object.entries(e).forEach(([t,e])=>{c.set(t,e)})}}catch(t){console.warn("Colourful Tab: Failed to load colours from storage",t)}}();const{commands:o}=t;document.addEventListener("contextmenu",t=>{const e=t.target.closest("#jp-main-dock-panel .lm-DockPanel-tabBar .lm-TabBar-tab");e&&e.classList.contains("lm-TabBar-tab")&&(i=e)},!0),n.forEach((t,e)=>{const a=function(t){const e=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" class="jp-colourful-tab-icon-${t}">\n    <rect x="2" y="2" width="12" height="12" rx="2" class="jp-colourful-tab-icon-rect" stroke="#888" stroke-width="1"/>\n  </svg>`;return new s.LabIcon({name:`colourful-tab:icon-${t}`,svgstr:e})}(t.id);o.addCommand(`colourful-tab:set-${t.id}`,{label:t.name,icon:a,caption:`Set tab colour to ${t.name}`,execute:()=>{if(i&&i.classList.contains("lm-TabBar-tab")){const t=m(i);t&&(c.set(t,e),r(),d(i,e),h())}}})}),o.addCommand("colourful-tab:clear",{label:"Clear",caption:"Remove tab colour",execute:()=>{if(i&&i.classList.contains("lm-TabBar-tab")){const e=m(i);e&&(t=i,n.forEach(e=>t.classList.remove(e.cssClass)),c.delete(e),r(),h())}var t}}),t.restored.then(()=>{const t=new MutationObserver(t=>{t.some(t=>{if("attributes"===t.type&&"class"===t.attributeName)return t.target.classList.contains("lm-TabBar-tab");if("childList"===t.type){const e=t.target;return e.classList.contains("lm-TabBar-content")||null!==e.closest(".lm-TabBar")}return!1})&&(p&&clearTimeout(p),p=setTimeout(()=>{f(),h(),p=null},50))}),e=document.getElementById("jp-main-dock-panel");e&&(t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),f(),h())})}}}}]);