# Content Core main configuration
# Copy this file to your project root or set CCORE_CONFIG_PATH to its location

speech_to_text:
  provider: openai
  model_name: gpt-4o-transcribe-diarize
  timeout: 3600  # 1 hour - for processing very long audio files

default_model:
  provider: openai
  model_name: gpt-4o-mini
  config:
    temperature: 0.5
    top_p: 1
    max_tokens: 2000
    timeout: 300  # 5 minutes - for general language model operations

cleanup_model:
  provider: openai
  model_name: gpt-4o-mini
  config:
    temperature: 0
    max_tokens: 8000
    output_format: json
    timeout: 600  # 10 minutes - for complex content cleaning with large inputs

summary_model:
  provider: openai
  model_name: gpt-4o-mini
  config:
    temperature: 0
    top_p: 1
    max_tokens: 2000
    timeout: 300  # 5 minutes - for content summarization

extraction:
  document_engine: auto  # auto | simple | docling - for files/documents
  url_engine: auto  # auto | simple | firecrawl | jina | crawl4ai | docling - for URLs
  audio:
    concurrency: 3              # Number of concurrent audio transcriptions (1-10)
  firecrawl:
    api_url: null  # Custom API URL for self-hosted Firecrawl (e.g., "http://localhost:3002")
                   # Environment variable FIRECRAWL_API_BASE_URL takes precedence
  docling:
    output_format: markdown  # markdown | html | json
  pymupdf:
    enable_formula_ocr: false    # Enable OCR for formula-heavy pages (requires Tesseract)
    formula_threshold: 3         # Minimum formulas per page to trigger OCR
    ocr_fallback: true          # Gracefully fallback to standard extraction if OCR fails

youtube_transcripts:
  preferred_languages: ["en", "es", "pt"]

# Retry configuration for transient failures
# Each operation type can be configured independently
# Environment variables override these settings (e.g., CCORE_YOUTUBE_MAX_RETRIES)
retry:
  youtube:
    max_attempts: 5       # Number of retry attempts (YouTube has aggressive rate limiting)
    base_delay: 2         # Base delay in seconds for exponential backoff
    max_delay: 60         # Maximum delay between retries
  url_api:
    max_attempts: 3       # For API-based URL extraction (Jina, Firecrawl) and Crawl4AI
    base_delay: 1
    max_delay: 30
  url_network:
    max_attempts: 3       # For network-only operations (BeautifulSoup, HEAD requests)
    base_delay: 0.5
    max_delay: 10
  audio:
    max_attempts: 3       # For speech-to-text API calls
    base_delay: 2
    max_delay: 30
  llm:
    max_attempts: 3       # For LLM API calls (summary, cleanup)
    base_delay: 1
    max_delay: 30
  download:
    max_attempts: 3       # For remote file downloads
    base_delay: 1
    max_delay: 15
