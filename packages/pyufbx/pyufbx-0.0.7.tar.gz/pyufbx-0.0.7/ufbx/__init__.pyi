from __future__ import annotations

from collections.abc import Iterator
from enum import IntEnum
from typing import Any

import numpy as np

__version__: str

class UfbxError(Exception): ...
class UfbxFileNotFoundError(UfbxError, FileNotFoundError): ...
class UfbxIOError(UfbxError): ...
class UfbxOutOfMemoryError(UfbxError): ...

class RotationOrder(IntEnum):
    ROTATION_ORDER_XYZ: int
    ROTATION_ORDER_XZY: int
    ROTATION_ORDER_YZX: int
    ROTATION_ORDER_YXZ: int
    ROTATION_ORDER_ZXY: int
    ROTATION_ORDER_ZYX: int
    ROTATION_ORDER_SPHERIC: int

class ElementType(IntEnum):
    ELEMENT_UNKNOWN: int
    ELEMENT_NODE: int
    ELEMENT_MESH: int
    ELEMENT_LIGHT: int
    ELEMENT_CAMERA: int
    ELEMENT_MATERIAL: int
    ELEMENT_BONE: int

class PropType(IntEnum):
    PROP_UNKNOWN: int
    PROP_BOOLEAN: int
    PROP_INTEGER: int
    PROP_FLOAT: int
    PROP_STRING: int

class PropFlags(IntEnum):
    PROP_FLAG_NONE: int
    PROP_FLAG_ANIMATABLE: int

class InheritMode(IntEnum):
    INHERIT_MODE_NORMAL: int
    INHERIT_MODE_IGNORE_PARENT: int

class MirrorAxis(IntEnum):
    MIRROR_AXIS_X: int
    MIRROR_AXIS_Y: int
    MIRROR_AXIS_Z: int

class CoordinateAxis(IntEnum):
    COORDINATE_AXIS_POSITIVE_X: int
    COORDINATE_AXIS_NEGATIVE_X: int
    COORDINATE_AXIS_POSITIVE_Y: int
    COORDINATE_AXIS_NEGATIVE_Y: int
    COORDINATE_AXIS_POSITIVE_Z: int
    COORDINATE_AXIS_NEGATIVE_Z: int
    COORDINATE_AXIS_UNKNOWN: int

class CoordinateAxes:
    """Scene coordinate axes (right, up, front)."""

    right: CoordinateAxis
    up: CoordinateAxis
    front: CoordinateAxis
    def __init__(self, right: int, up: int, front: int) -> None: ...
    def __repr__(self) -> str: ...

class SubdivisionDisplayMode(IntEnum):
    SUBDIVISION_DISPLAY_MODE_OFF: int
    SUBDIVISION_DISPLAY_MODE_ON: int

class SubdivisionBoundary(IntEnum):
    SUBDIVISION_BOUNDARY_SHARP: int
    SUBDIVISION_BOUNDARY_SMOOTH: int

class LightType(IntEnum):
    LIGHT_POINT: int
    LIGHT_DIRECTIONAL: int
    LIGHT_SPOT: int
    LIGHT_AREA: int

class LightDecay(IntEnum):
    LIGHT_DECAY_NONE: int
    LIGHT_DECAY_LINEAR: int
    LIGHT_DECAY_QUADRATIC: int

class LightAreaShape(IntEnum):
    LIGHT_AREA_SHAPE_RECTANGLE: int
    LIGHT_AREA_SHAPE_SPHERE: int

class ProjectionMode(IntEnum):
    PROJECTION_MODE_PERSPECTIVE: int
    PROJECTION_MODE_ORTHOGRAPHIC: int

class AspectMode(IntEnum):
    ASPECT_MODE_FIXED: int
    ASPECT_MODE_WINDOW_SIZE: int

class ApertureMode(IntEnum):
    APERTURE_MODE_VERTICAL: int
    APERTURE_MODE_HORIZONTAL: int

class ShaderType(IntEnum):
    SHADER_FBX_LAMBERT: int
    SHADER_FBX_PHONG: int

class TextureType(IntEnum):
    TEXTURE_TYPE_DIFFUSE: int
    TEXTURE_TYPE_NORMAL: int

class BlendMode(IntEnum):
    BLEND_MODE_REPLACE: int
    BLEND_MODE_ADD: int

class WrapMode(IntEnum):
    WRAP_MODE_REPEAT: int
    WRAP_MODE_CLAMP: int

class Interpolation(IntEnum):
    INTERPOLATION_CONSTANT_PREV: int
    INTERPOLATION_CONSTANT_NEXT: int
    INTERPOLATION_LINEAR: int
    INTERPOLATION_CUBIC: int

class ExtrapolationMode(IntEnum):
    EXTRAPOLATION_MODE_CONSTANT: int
    EXTRAPOLATION_MODE_LINEAR: int

class ConstraintType(IntEnum):
    CONSTRAINT_AIM: int
    CONSTRAINT_PARENT: int

class ErrorType(IntEnum):
    ERROR_NONE: int
    ERROR_FILE_NOT_FOUND: int
    ERROR_OUT_OF_MEMORY: int

class Vec2:
    x: float
    y: float
    def __init__(self, x: float = 0.0, y: float = 0.0) -> None: ...
    def __iter__(self) -> Iterator[float]: ...
    def __getitem__(self, index: int) -> float: ...

class Vec3:
    x: float
    y: float
    z: float
    def __init__(self, x: float = 0.0, y: float = 0.0, z: float = 0.0) -> None: ...
    def __iter__(self) -> Iterator[float]: ...
    def __getitem__(self, index: int) -> float: ...
    def normalize(self) -> Vec3: ...

class Vec4:
    x: float
    y: float
    z: float
    w: float
    def __init__(self, x: float = 0.0, y: float = 0.0, z: float = 0.0, w: float = 0.0) -> None: ...
    def __iter__(self) -> Iterator[float]: ...
    def __getitem__(self, index: int) -> float: ...

class Quat:
    x: float
    y: float
    z: float
    w: float
    def __init__(self, x: float = 0.0, y: float = 0.0, z: float = 0.0, w: float = 1.0) -> None: ...
    def __mul__(self, other: Quat) -> Quat: ...
    def normalize(self) -> Quat: ...

class Matrix:
    m: list[list[float]]
    def __init__(self) -> None: ...

class Transform:
    translation: Vec3
    rotation: Quat
    scale: Vec3
    def __init__(self) -> None: ...
    def to_matrix(self) -> Matrix: ...

class Element: ...

class Light(Element):
    @property
    def name(self) -> str: ...
    @property
    def color(self) -> Vec3: ...
    @property
    def intensity(self) -> float: ...
    @property
    def local_direction(self) -> Vec3: ...
    @property
    def type(self) -> LightType: ...
    @property
    def decay(self) -> LightDecay: ...
    @property
    def area_shape(self) -> LightAreaShape: ...
    @property
    def inner_angle(self) -> float: ...
    @property
    def outer_angle(self) -> float: ...
    @property
    def cast_light(self) -> bool: ...
    @property
    def cast_shadows(self) -> bool: ...

class Camera(Element):
    @property
    def name(self) -> str: ...
    @property
    def projection_mode(self) -> ProjectionMode: ...
    @property
    def resolution(self) -> Vec2: ...
    @property
    def resolution_is_pixels(self) -> bool: ...
    @property
    def field_of_view_deg(self) -> Vec2: ...
    @property
    def field_of_view_tan(self) -> Vec2: ...
    @property
    def orthographic_extent(self) -> float: ...
    @property
    def orthographic_size(self) -> Vec2: ...
    @property
    def aspect_ratio(self) -> float: ...
    @property
    def near_plane(self) -> float: ...
    @property
    def far_plane(self) -> float: ...

class Bone(Element):
    @property
    def name(self) -> str: ...
    @property
    def radius(self) -> float: ...
    @property
    def relative_length(self) -> float: ...
    @property
    def is_root(self) -> bool: ...

class Texture(Element):
    @property
    def name(self) -> str: ...
    @property
    def type(self) -> TextureType: ...
    @property
    def filename(self) -> str: ...
    @property
    def absolute_filename(self) -> str: ...
    @property
    def relative_filename(self) -> str: ...
    @property
    def content(self) -> bytes | None: ...
    @property
    def has_file(self) -> bool: ...
    @property
    def uv_set(self) -> str: ...
    @property
    def wrap_u(self) -> WrapMode: ...
    @property
    def wrap_v(self) -> WrapMode: ...

class AnimStack(Element):
    @property
    def name(self) -> str: ...
    @property
    def time_begin(self) -> float: ...
    @property
    def time_end(self) -> float: ...
    @property
    def layers(self) -> list[AnimLayer]: ...

class AnimLayer(Element):
    @property
    def name(self) -> str: ...
    @property
    def weight(self) -> float: ...
    @property
    def weight_is_animated(self) -> bool: ...
    @property
    def blended(self) -> bool: ...
    @property
    def additive(self) -> bool: ...
    @property
    def compose_rotation(self) -> bool: ...
    @property
    def compose_scale(self) -> bool: ...

class AnimCurve(Element):
    @property
    def name(self) -> str: ...
    @property
    def num_keyframes(self) -> int: ...
    @property
    def min_value(self) -> float: ...
    @property
    def max_value(self) -> float: ...
    @property
    def min_time(self) -> float: ...
    @property
    def max_time(self) -> float: ...

class Anim(Element): ...

class SkinDeformer(Element):
    @property
    def name(self) -> str: ...
    @property
    def clusters(self) -> list[SkinCluster]: ...

class SkinCluster(Element):
    @property
    def name(self) -> str: ...
    @property
    def num_weights(self) -> int: ...

class BlendDeformer(Element):
    @property
    def name(self) -> str: ...
    @property
    def channels(self) -> list[BlendChannel]: ...

class BlendChannel(Element):
    @property
    def name(self) -> str: ...
    @property
    def weight(self) -> float: ...

class BlendShape(Element):
    @property
    def name(self) -> str: ...
    @property
    def num_offsets(self) -> int: ...

class Constraint(Element):
    @property
    def name(self) -> str: ...
    @property
    def type(self) -> ConstraintType: ...
    @property
    def weight(self) -> float: ...
    @property
    def active(self) -> bool: ...

class MaterialMap:
    """Material property map (value + optional texture)"""
    @property
    def value_vec4(self) -> tuple[float, float, float, float]: ...
    @property
    def value_int(self) -> int: ...
    @property
    def has_value(self) -> bool: ...
    @property
    def texture(self) -> Texture | None: ...
    @property
    def texture_enabled(self) -> bool: ...
    @property
    def feature_disabled(self) -> bool: ...
    @property
    def value_components(self) -> int: ...

class MaterialFeatures:
    """Material features flags"""
    @property
    def pbr(self) -> bool: ...
    @property
    def metalness(self) -> bool: ...
    @property
    def diffuse(self) -> bool: ...
    @property
    def specular(self) -> bool: ...
    @property
    def emission(self) -> bool: ...
    @property
    def transmission(self) -> bool: ...
    @property
    def coat(self) -> bool: ...
    @property
    def sheen(self) -> bool: ...
    @property
    def opacity(self) -> bool: ...
    @property
    def ambient_occlusion(self) -> bool: ...
    @property
    def matte(self) -> bool: ...
    @property
    def unlit(self) -> bool: ...
    @property
    def ior(self) -> bool: ...
    @property
    def diffuse_roughness(self) -> bool: ...
    @property
    def transmission_roughness(self) -> bool: ...
    @property
    def thin_walled(self) -> bool: ...
    @property
    def caustics(self) -> bool: ...
    @property
    def exit_to_background(self) -> bool: ...
    @property
    def internal_reflections(self) -> bool: ...
    @property
    def double_sided(self) -> bool: ...
    @property
    def roughness(self) -> bool: ...
    @property
    def glossiness(self) -> bool: ...
    @property
    def coat_roughness(self) -> bool: ...

class MaterialTexture:
    """Material texture mapping"""
    @property
    def material_prop(self) -> str: ...
    @property
    def shader_prop(self) -> str: ...
    @property
    def texture(self) -> Texture | None: ...

class Metadata:
    """Scene metadata"""
    @property
    def ascii(self) -> bool: ...
    @property
    def version(self) -> int: ...
    @property
    def file_format(self) -> int: ...
    @property
    def creator(self) -> str: ...
    @property
    def big_endian(self) -> bool: ...
    @property
    def filename(self) -> str: ...
    @property
    def relative_root(self) -> str: ...

class SceneSettings:
    """Scene settings"""
    @property
    def axes(self) -> CoordinateAxes: ...
    @property
    def unit_meters(self) -> float: ...
    @property
    def frames_per_second(self) -> float: ...
    @property
    def ambient_color(self) -> tuple[float, float, float]: ...
    @property
    def default_camera(self) -> str: ...
    @property
    def time_mode(self) -> int: ...
    @property
    def time_protocol(self) -> int: ...
    @property
    def snap_mode(self) -> int: ...
    @property
    def original_axis_up(self) -> int: ...
    @property
    def original_unit_meters(self) -> float: ...

class Empty(Element):
    """Empty node (null object)"""
    @property
    def name(self) -> str: ...

class Unknown(Element):
    """Unknown element type"""
    @property
    def name(self) -> str: ...

class Scene:
    @classmethod
    def load_file(cls, filename: str) -> Scene: ...
    @classmethod
    def load_memory(cls, data: bytes) -> Scene: ...
    def close(self) -> None: ...
    def __enter__(self) -> Scene: ...
    def __exit__(self, exc_type: type[BaseException] | None, exc_val: BaseException | None, exc_tb: Any | None) -> None: ...
    @property
    def metadata(self) -> Metadata: ...
    @property
    def settings(self) -> SceneSettings: ...
    @property
    def nodes(self) -> list[Node]: ...
    @property
    def meshes(self) -> list[Mesh]: ...
    @property
    def materials(self) -> list[Material]: ...
    @property
    def lights(self) -> list[Light]: ...
    @property
    def cameras(self) -> list[Camera]: ...
    @property
    def bones(self) -> list[Bone]: ...
    @property
    def empties(self) -> list[Empty]: ...
    @property
    def unknowns(self) -> list[Unknown]: ...
    @property
    def textures(self) -> list[Texture]: ...
    @property
    def anim_stacks(self) -> list[AnimStack]: ...
    @property
    def anim_curves(self) -> list[AnimCurve]: ...
    @property
    def skin_deformers(self) -> list[SkinDeformer]: ...
    @property
    def blend_deformers(self) -> list[BlendDeformer]: ...
    @property
    def blend_shapes(self) -> list[BlendShape]: ...
    @property
    def constraints(self) -> list[Constraint]: ...
    @property
    def root_node(self) -> Node | None: ...
    @property
    def axes(self) -> CoordinateAxes: ...
    def find_node(self, name: str) -> Node | None: ...
    def find_material(self, name: str) -> Material | None: ...

class Node(Element):
    @property
    def name(self) -> str: ...
    @property
    def children(self) -> list[Node]: ...
    @property
    def parent(self) -> Node | None: ...
    @property
    def mesh(self) -> Mesh | None: ...
    @property
    def light(self) -> Light | None: ...
    @property
    def camera(self) -> Camera | None: ...
    @property
    def bone(self) -> Bone | None: ...
    @property
    def is_root(self) -> bool: ...
    @property
    def world_transform(self) -> np.ndarray[Any, Any]: ...
    @property
    def local_transform(self) -> np.ndarray[Any, Any]: ...
    @property
    def node_to_world(self) -> np.ndarray[Any, Any]: ...
    @property
    def node_to_parent(self) -> np.ndarray[Any, Any]: ...
    @property
    def geometry_transform(self) -> Transform: ...
    @property
    def attrib_type(self) -> ElementType: ...
    @property
    def inherit_mode(self) -> InheritMode: ...
    @property
    def visible(self) -> bool: ...
    @property
    def euler_rotation(self) -> Vec3: ...

class Mesh(Element):
    @property
    def name(self) -> str: ...
    @property
    def num_vertices(self) -> int: ...
    @property
    def num_indices(self) -> int: ...
    @property
    def num_faces(self) -> int: ...
    @property
    def num_triangles(self) -> int: ...
    @property
    def vertex_positions(self) -> np.ndarray[Any, Any] | None: ...
    @property
    def vertex_normals(self) -> np.ndarray[Any, Any] | None: ...
    @property
    def vertex_uvs(self) -> np.ndarray[Any, Any] | None: ...
    @property
    def vertex_tangent(self) -> np.ndarray[Any, Any] | None: ...
    @property
    def vertex_bitangent(self) -> np.ndarray[Any, Any] | None: ...
    @property
    def vertex_color(self) -> np.ndarray[Any, Any] | None: ...
    @property
    def indices(self) -> np.ndarray[Any, Any] | None: ...
    @property
    def materials(self) -> list[Material]: ...
    @property
    def faces(self) -> list[tuple[int, int]]: ...
    @property
    def face_material(self) -> np.ndarray[Any, Any] | None: ...
    @property
    def skin_deformers(self) -> list[SkinDeformer]: ...
    @property
    def blend_deformers(self) -> list[BlendDeformer]: ...
    @property
    def edge_crease(self) -> np.ndarray[Any, Any] | None: ...
    @property
    def vertex_crease(self) -> np.ndarray[Any, Any] | None: ...
    def triangulate_face(self, face_index: int) -> None: ...

class Material(Element):
    @property
    def name(self) -> str: ...
    @property
    def shader_type(self) -> ShaderType: ...
    @property
    def shading_model_name(self) -> str: ...
    @property
    def features(self) -> MaterialFeatures: ...
    @property
    def textures(self) -> list[MaterialTexture]: ...

    # PBR material maps
    @property
    def pbr_base_factor(self) -> MaterialMap: ...
    @property
    def pbr_base_color(self) -> MaterialMap: ...
    @property
    def pbr_roughness(self) -> MaterialMap: ...
    @property
    def pbr_metalness(self) -> MaterialMap: ...
    @property
    def pbr_diffuse_roughness(self) -> MaterialMap: ...
    @property
    def pbr_specular_factor(self) -> MaterialMap: ...
    @property
    def pbr_specular_color(self) -> MaterialMap: ...
    @property
    def pbr_specular_ior(self) -> MaterialMap: ...
    @property
    def pbr_specular_anisotropy(self) -> MaterialMap: ...
    @property
    def pbr_specular_rotation(self) -> MaterialMap: ...
    @property
    def pbr_transmission_factor(self) -> MaterialMap: ...
    @property
    def pbr_transmission_color(self) -> MaterialMap: ...
    @property
    def pbr_transmission_depth(self) -> MaterialMap: ...
    @property
    def pbr_transmission_scatter(self) -> MaterialMap: ...
    @property
    def pbr_transmission_scatter_anisotropy(self) -> MaterialMap: ...
    @property
    def pbr_transmission_dispersion(self) -> MaterialMap: ...
    @property
    def pbr_transmission_roughness(self) -> MaterialMap: ...
    @property
    def pbr_transmission_extra_roughness(self) -> MaterialMap: ...
    @property
    def pbr_transmission_priority(self) -> MaterialMap: ...
    @property
    def pbr_transmission_enable_in_aov(self) -> MaterialMap: ...
    @property
    def pbr_subsurface_factor(self) -> MaterialMap: ...
    @property
    def pbr_subsurface_color(self) -> MaterialMap: ...
    @property
    def pbr_subsurface_radius(self) -> MaterialMap: ...
    @property
    def pbr_subsurface_scale(self) -> MaterialMap: ...
    @property
    def pbr_subsurface_anisotropy(self) -> MaterialMap: ...
    @property
    def pbr_subsurface_tint_color(self) -> MaterialMap: ...
    @property
    def pbr_subsurface_type(self) -> MaterialMap: ...
    @property
    def pbr_sheen_factor(self) -> MaterialMap: ...
    @property
    def pbr_sheen_color(self) -> MaterialMap: ...
    @property
    def pbr_sheen_roughness(self) -> MaterialMap: ...
    @property
    def pbr_coat_factor(self) -> MaterialMap: ...
    @property
    def pbr_coat_color(self) -> MaterialMap: ...
    @property
    def pbr_coat_roughness(self) -> MaterialMap: ...
    @property
    def pbr_coat_ior(self) -> MaterialMap: ...
    @property
    def pbr_coat_anisotropy(self) -> MaterialMap: ...
    @property
    def pbr_coat_rotation(self) -> MaterialMap: ...
    @property
    def pbr_coat_normal(self) -> MaterialMap: ...
    @property
    def pbr_coat_affect_base_color(self) -> MaterialMap: ...
    @property
    def pbr_coat_affect_base_roughness(self) -> MaterialMap: ...
    @property
    def pbr_thin_film_factor(self) -> MaterialMap: ...
    @property
    def pbr_thin_film_thickness(self) -> MaterialMap: ...
    @property
    def pbr_thin_film_ior(self) -> MaterialMap: ...
    @property
    def pbr_emission_factor(self) -> MaterialMap: ...
    @property
    def pbr_emission_color(self) -> MaterialMap: ...
    @property
    def pbr_opacity(self) -> MaterialMap: ...
    @property
    def pbr_indirect_diffuse(self) -> MaterialMap: ...
    @property
    def pbr_indirect_specular(self) -> MaterialMap: ...
    @property
    def pbr_normal_map(self) -> MaterialMap: ...
    @property
    def pbr_tangent_map(self) -> MaterialMap: ...
    @property
    def pbr_displacement_map(self) -> MaterialMap: ...
    @property
    def pbr_matte_factor(self) -> MaterialMap: ...
    @property
    def pbr_matte_color(self) -> MaterialMap: ...
    @property
    def pbr_ambient_occlusion(self) -> MaterialMap: ...
    @property
    def pbr_glossiness(self) -> MaterialMap: ...
    @property
    def pbr_coat_glossiness(self) -> MaterialMap: ...
    @property
    def pbr_transmission_glossiness(self) -> MaterialMap: ...

    # FBX material maps
    @property
    def fbx_diffuse_factor(self) -> MaterialMap: ...
    @property
    def fbx_diffuse_color(self) -> MaterialMap: ...
    @property
    def fbx_specular_factor(self) -> MaterialMap: ...
    @property
    def fbx_specular_color(self) -> MaterialMap: ...
    @property
    def fbx_specular_exponent(self) -> MaterialMap: ...
    @property
    def fbx_reflection_factor(self) -> MaterialMap: ...
    @property
    def fbx_reflection_color(self) -> MaterialMap: ...
    @property
    def fbx_transparency_factor(self) -> MaterialMap: ...
    @property
    def fbx_transparency_color(self) -> MaterialMap: ...
    @property
    def fbx_emission_factor(self) -> MaterialMap: ...
    @property
    def fbx_emission_color(self) -> MaterialMap: ...
    @property
    def fbx_ambient_factor(self) -> MaterialMap: ...
    @property
    def fbx_ambient_color(self) -> MaterialMap: ...
    @property
    def fbx_normal_map(self) -> MaterialMap: ...
    @property
    def fbx_bump(self) -> MaterialMap: ...
    @property
    def fbx_bump_factor(self) -> MaterialMap: ...
    @property
    def fbx_displacement_factor(self) -> MaterialMap: ...
    @property
    def fbx_displacement(self) -> MaterialMap: ...
    @property
    def fbx_vector_displacement_factor(self) -> MaterialMap: ...
    @property
    def fbx_vector_displacement(self) -> MaterialMap: ...

def load_file(filename: str) -> Scene: ...
def load_memory(data: bytes) -> Scene: ...
