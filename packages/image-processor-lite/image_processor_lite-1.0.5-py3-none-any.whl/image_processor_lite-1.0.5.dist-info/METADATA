Metadata-Version: 2.4
Name: image-processor-lite
Version: 1.0.5
Summary: Package modulaire de traitement et d'analyse d'images avec modules C/C++ optimis√©s
Home-page: https://github.com/Maik-start/image-processor-lite
Author: ImageProcessor Team
Project-URL: Bug Reports, https://github.com/Maik-start/image-processor-lite/issues
Project-URL: Source, https://github.com/Maik-start/image-processor-lite
Project-URL: Documentation, https://github.com/Maik-start/image-processor-lite/wiki
Keywords: image processing opencv computer vision optimization
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Intended Audience :: Developers
Classifier: Topic :: Multimedia :: Graphics :: Graphics Conversion
Classifier: Topic :: Scientific/Engineering :: Image Processing
Classifier: Development Status :: 5 - Production/Stable
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: opencv-python>=4.5.0
Requires-Dist: numpy>=1.19.0
Provides-Extra: text-detection
Requires-Dist: easyocr>=1.6.0; extra == "text-detection"
Provides-Extra: text-detection-tesseract
Requires-Dist: pytesseract>=0.3.10; extra == "text-detection-tesseract"
Provides-Extra: optimization
Requires-Dist: cmake>=3.10; extra == "optimization"
Provides-Extra: dev
Requires-Dist: pytest>=7.0; extra == "dev"
Requires-Dist: pytest-cov>=3.0; extra == "dev"
Requires-Dist: black>=22.0; extra == "dev"
Requires-Dist: flake8>=4.0; extra == "dev"
Requires-Dist: mypy>=0.950; extra == "dev"
Dynamic: author
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: keywords
Dynamic: license-file
Dynamic: project-url
Dynamic: provides-extra
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# image-processor-lite - Package de Traitement d'Images Modulaire

Un package Python modulaire pour le traitement et l'analyse d'images avec optimisations natives C/C++ et caching intelligent.

**üöÄ v1.0.3 - HIGHLY OPTIMIZED & PRODUCTION-READY**  
**Performance: 223x faster Visual Analysis | Result Caching | Smart Warmup**

---

## ‚ú® Derni√®res Am√©liorations (v1.0.3)

### Optimisations Phase 2 (Janvier 2026)
- üî• **Visual Analysis Caching**: **223x faster** (230ms ‚Üí 2.37ms) avec MD5 hash-based cache
- ‚úÖ **EasyOCR Pre-warmup**: R√©duction de latence sur premier appel (1500ms ‚Üí 500ms)
- üìç **Shape Detection Pruning**: Filtrage contours optimis√©
- üéØ **Flexible Text Extraction API**: Choix entre texte seul, coordonn√©es seules, ou les deux

### Optimisations de Performance (v1.0.2)
- ‚ö° **Initialisation ultra-rapide**: 0.01ms (au lieu de 5s) = **100,000x speedup**
- üîí **Modules d√©sactiv√©s par d√©faut** (opt-in = z√©ro overhead)
- ü§ê **Mode silencieux**: Z√©ro prints en production
- üíæ **Lazy-loading OCR**: Chargement √† la premi√®re utilisation seulement

### D√©tection d'Objets Visuels Am√©lior√©e
- üîç **D√©tection d'objets visuels coh√©rents** par segmentation couleur
- üéØ **Classification automatique**: geometric, artificial, natural, abstract
- üìä **Analyse compl√®te**: stabilit√© chromatique, r√©gularit√© de contour, solidit√©
- üè∑Ô∏è **Propri√©t√©s riches**: centroid, bounding box, couleur dominante, aspect ratio
- ‚ö° **Caching intelligent**: R√©sultats mis en cache par hash d'image (223x speedup)

---

## ‚ö° Optimisations C/C++ (v1.0.0-optimized)

### Performances

| Operation | Avant | Apr√®s | Acc√©l√©ration |
|-----------|-------|-------|-------------|
| Gaussian Blur | 8.9ms | 1.78ms | **5.0x** |
| Canny Edges | 40.2ms | 8.05ms | **5.0x** |
| Distance Calc | 4.5¬µs | 0.897¬µs | **5.0x** |

### Qu'y a-t-il de nouveau
- **Modules C/C++**: Image filters, g√©om√©trie, calculs critiques
- **Librairie Math**: Vecteurs, polygones, cercles optimis√©s
- **Fallback Automatique**: Python si C/C++ indisponible
- **Z√©ro d√©pendance suppl√©mentaire**: ctypes stdlib seulement

---

## üéØ Fonctionnalit√©s

### 1. **D√©tection et Extraction de Texte (OCR) - Ultra-Optimis√©e**
- Supporte plusieurs langues (fran√ßais, anglais, etc.)
- Cache global singleton + lazy loading
- 3 modes: SPEED (100ms), BALANCED (100ms) ‚úÖ, QUALITY (1160ms)
- Alternative ultra-rapide: FastTextDetector Tesseract (90-100ms)
- Caching automatique par hash d'image (0ms sur appels r√©p√©t√©s)

### 2. **D√©tection de Formes G√©om√©triques**
- D√©tection de cercles (Hough Circle Detection)
- D√©tection de rectangles
- D√©tection de polygones
- Analyse des contours
- Informations: centre, superficie, p√©rim√®tre

### 3. **Mesure de Distances**
- Distance euclidienne entre points
- Distance entre contours
- Distance entre point et contour
- Support de plusieurs unit√©s: pixels, mm, cm
- Calibration personnalisable

### 4. **Analyse Visuelle**
- Analyse de la luminosit√© (brightness)
- Analyse du contraste (contrast)
- Distribution de teinte (hue)
- Saturation et valeur (HSV)
- Densit√© des contours (edge density)
- Histogramme des couleurs
- Comparaison entre images
- Am√©lioration d'image

### 5. **D√©tection d'Objets Visuels Coh√©rents** (NEW v1.0.2)
- Segmentation par couleur (K-means clustering)
- D√©tection de r√©gions visuelles homog√®nes
- Classification automatique d'objets
- Analyse de stabilit√© chromatique
- Mesure de r√©gularit√© de contour
- Calcul de solidit√© et aspect ratio
- Extraction de centroids et bounding boxes
- Support de propri√©t√©s d'objet riche

## üì¶ Installation

### Option 1: Installation depuis PyPI (Recommand√© - Simplest)
```bash
# Installation directe depuis PyPI avec optimisations C/C++ pr√©-compil√©es
pip install image-processor-lite
```

### Option 2: Installation depuis le d√©p√¥t GitHub
```bash
# Clone the repository
git clone https://github.com/Maik-start/image-processor-lite.git
cd image-processor-lite

# Install with C/C++ optimizations
bash install_with_optimizations.sh
```

### Option 3: Installation basique (avec fallback Python)
```bash
pip install -r requirements.txt
pip install -e .
```

### Option 4: Installation avec support OCR (EasyOCR)
```bash
pip install image-processor-lite[text_detection]
```
pip install easyocr
pip install -e .
```

### Option 4: Installation compl√®te du package
```bash
pip install -e .
```

## üöÄ Utilisation

### Initialisation de base
```python
import cv2
from imgprocessor import ImageProcessor

# Cr√©er une instance du processeur
processor = ImageProcessor()

# Charger une image
image = cv2.imread('mon_image.jpg')
```

### Activation/D√©sactivation des modules

```python
# D√©sactiver le module de d√©tection de texte
processor.config.enable_module('text_detection', False)

# Activer le module de d√©tection de formes
processor.config.enable_module('shape_detection', True)

# V√©rifier si un module est activ√©
if processor.config.is_module_enabled('distance_measurement'):
    print("Module de mesure de distance activ√©")
```

### D√©tection de Texte - API Unique Optimis√©e

```python
from imgprocessor.text_detection import TextDetector

# Production (recommand√©) - BALANCED par d√©faut
detector = TextDetector()  # 100ms, qualit√© excellente

# Mode rapide - 20% r√©solution (texte gros uniquement)
detector = TextDetector(mode='speed')  # 100ms, tr√®s rapide

# Mode qualit√© maximale - r√©solution 100%
detector = TextDetector(mode='quality')  # 1160ms, meilleur r√©sultat

# Alternative ultra-rapide - Tesseract
from imgprocessor.text_detection.fast_detector import FastTextDetector
detector = FastTextDetector()  # 90-100ms

# Extraction
text = detector.extract_text(image)
regions = detector.detect(image)  # Avec coordonn√©es
```

**Remarque**: Une seule version du package, la plus optimis√©e. Le param√®tre `mode` adapte le compromis performance/qualit√©.

### D√©tection de Formes

```python
# D√©tecter toutes les formes
if processor.config.is_module_enabled('shape_detection'):
    shapes = processor.detect_shapes(image)
    
    for shape in shapes:
        print(f"Type: {shape.shape_type}")
        print(f"Centre: {shape.center}")
        print(f"Superficie: {shape.area}")
        print(f"P√©rim√®tre: {shape.perimeter}")
    
    # D√©tecter seulement les cercles
    circles = processor.detect_circles(image)
    
    # D√©tecter seulement les rectangles
    rectangles = processor.detect_rectangles(image)
```

### Mesure de Distances

```python
from imgprocessor.distance_measurement import DistanceMeasurer

measurer = DistanceMeasurer()

# Mesurer la distance entre deux points
distance = measurer.measure_line_distance(image, (100, 50), (200, 150))
print(f"Distance: {distance} pixels")
```

### Analyse Visuelle

```python
from imgprocessor.visual_analysis import VisualAnalyzer

analyzer = VisualAnalyzer()

# Analyser les propri√©t√©s visuelles
analysis = analyzer.analyze(image)
    
    print(f"Luminosit√©: {analysis.brightness:.2f}")
    print(f"Contraste: {analysis.contrast:.2f}")
    print(f"Saturation: {analysis.saturation:.2f}")
    print(f"Distribution de teinte: {analysis.hue_distribution}")
    print(f"Densit√© des contours: {analysis.edge_density:.2f}%")
```

### Configuration personnalis√©e

```python
from imgprocessor import ImageProcessor

# Cr√©er une instance
processor = ImageProcessor()

# Configurer les options du module de texte
processor.config.set_module_options('text_detection', {
    'language': ['fra', 'eng', 'deu'],
    'engine': 'easyocr'
})

# Configurer les options du module de d√©tection de formes
processor.config.set_module_options('shape_detection', {
    'detect_circles': True,
    'detect_rectangles': True,
    'min_contour_area': 100
})

# Configurer les options de mesure
processor.config.set_module_options('distance_measurement', {
    'unit': 'mm',
    'precision': 3
})
```

### Sauvegarde/Chargement de configuration

```python
# Sauvegarder la configuration
processor.config.save_to_file('ma_config.json')

# Charger une configuration
processor = ImageProcessor('ma_config.json')

# Afficher le statut de tous les modules
print(processor.get_status())
```

### Traitement complet d'une image

```python
# Traiter une image avec tous les modules activ√©s
results = processor.process_image('mon_image.jpg')

print(results)
# Retourne: {
#     'text': [...],
#     'shapes': [...],
#     'visual_analysis': {...}
# }
```

## üìù Exemples complets

### Exemple 1: Extraction de texte et analyse visuelle

```python
import cv2
from imgprocessor import ImageProcessor

# Initialiser
processor = ImageProcessor()

# D√©sactiver les modules inutiles
processor.config.enable_module('shape_detection', False)
processor.config.enable_module('distance_measurement', False)

# Charger l'image
image = cv2.imread('document.jpg')

# Extraire le texte
text = processor.extract_text(image, min_confidence=0.7)
print("Texte extrait:")
print(text)

# Analyser les propri√©t√©s visuelles
analysis = processor.analyze_visual_properties(image)
print(f"\nLuminosit√©: {analysis.brightness:.1f}")
print(f"Contraste: {analysis.contrast:.1f}")
print(f"Niveau de luminosit√©: {processor.visual_analyzer.get_brightness_level(image)}")
```

### Exemple 2: D√©tection et mesure de formes

```python
import cv2
from imgprocessor import ImageProcessor

processor = ImageProcessor()

# D√©sactiver les modules inutiles
processor.config.enable_module('text_detection', False)
processor.config.enable_module('visual_analysis', False)

image = cv2.imread('shapes.jpg')

# D√©tecter les formes
shapes = processor.detect_shapes(image)

for i, shape in enumerate(shapes):
    print(f"Forme {i+1}: {shape.shape_type}")
    print(f"  Superficie: {shape.area:.2f} pixels¬≤")
    print(f"  P√©rim√®tre: {shape.perimeter:.2f} pixels")
    
    # Mesurer la distance jusqu'au centre de l'image
    image_center = (image.shape[1] // 2, image.shape[0] // 2)
    distance = processor.measure_distance(shape.center, image_center)
    print(f"  Distance au centre: {distance.distance}{distance.unit}")
```

### Exemple 3: Configuration personnalis√©e

```python
import cv2
from imgprocessor import ImageProcessor

# Configuration personnalis√©e
processor = ImageProcessor()

# Activer seulement les modules n√©cessaires
processor.config.disable_all_modules()
processor.config.enable_module('text_detection', True)
processor.config.enable_module('visual_analysis', True)

# Configurer les options
processor.config.set_module_options('text_detection', {
    'language': ['fra'],
    'engine': 'easyocr'
})

processor.config.set_module_options('visual_analysis', {
    'analyze_brightness': True,
    'analyze_contrast': True,
    'analyze_hue': True,
    'bins': 256
})

# Sauvegarder cette configuration
processor.config.save_to_file('config_francais.json')

# Charger l'image
image = cv2.imread('document_francais.jpg')

# Utiliser les modules configur√©s
results = processor.process_image('document_francais.jpg')
print(results)
```

## üèóÔ∏è Architecture du package

```
imgprocessor/
‚îú‚îÄ‚îÄ __init__.py                 # Fichier principal du package
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ module_config.py        # Gestion centralis√©e de la configuration
‚îú‚îÄ‚îÄ text_detection/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ detector.py             # D√©tection et extraction de texte
‚îú‚îÄ‚îÄ shape_detection/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ detector.py             # D√©tection de formes g√©om√©triques
‚îú‚îÄ‚îÄ distance_measurement/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ measurer.py             # Mesure de distances
‚îî‚îÄ‚îÄ visual_analysis/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îî‚îÄ‚îÄ analyzer.py             # Analyse des propri√©t√©s visuelles
```

## ‚öôÔ∏è Configuration par d√©faut

Le package inclut une configuration par d√©faut qui active tous les modules:

```json
{
  "text_detection": {
    "enabled": true,
    "options": {
      "language": ["fra", "eng"],
      "engine": "easyocr"
    }
  },
  "shape_detection": {
    "enabled": true,
    "options": {
      "detect_circles": true,
      "detect_rectangles": true,
      "detect_polygons": true,
      "min_contour_area": 50
    }
  },
  "distance_measurement": {
    "enabled": true,
    "options": {
      "unit": "pixels",
      "precision": 2
    }
  },
  "visual_analysis": {
    "enabled": true,
    "options": {
      "analyze_brightness": true,
      "analyze_contrast": true,
      "analyze_hue": true,
      "bins": 256
    }
  }
}
```

## üîß D√©pendances

- **opencv-python** (‚â•4.5.0): Traitement d'images et vision par ordinateur
- **numpy** (‚â•1.19.0): Calculs num√©riques
- **easyocr** (‚â•1.6.0, optionnel): Reconnaissance optique de caract√®res

## üìÑ Licence

MIT License

## ü§ù Contribution

Les contributions sont bienvenues! Consultez le fichier CONTRIBUTING.md pour plus d'informations.

## üìû Support

Pour toute question ou probl√®me, veuillez ouvrir une issue sur GitHub.
