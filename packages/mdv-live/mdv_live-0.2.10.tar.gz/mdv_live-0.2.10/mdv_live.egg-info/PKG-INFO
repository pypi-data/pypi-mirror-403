Metadata-Version: 2.4
Name: mdv-live
Version: 0.2.10
Summary: Markdown Viewer - File tree + Live preview + Hot reload
Author-email: PanHouse <hirono.okamoto@panhouse.jp>
License: MIT
Project-URL: Homepage, https://github.com/panhouse/mdv
Project-URL: Repository, https://github.com/panhouse/mdv
Keywords: markdown,viewer,live-reload,preview,hot-reload
Classifier: Development Status :: 4 - Beta
Classifier: Environment :: Console
Classifier: Environment :: Web Environment
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Text Processing :: Markup :: Markdown
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: fastapi>=0.104.0
Requires-Dist: uvicorn>=0.24.0
Requires-Dist: websockets>=12.0
Requires-Dist: markdown-it-py>=3.0.0
Requires-Dist: mdit-py-plugins>=0.4.0
Requires-Dist: python-multipart>=0.0.6

# MDV - Markdown Viewer

ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼ + ãƒ©ã‚¤ãƒ–ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ + ãƒ•ã‚¡ã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶æ©Ÿèƒ½ä»˜ããƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ“ãƒ¥ãƒ¼ã‚¢

## Features

- ğŸ“ å·¦å´ã«ãƒ•ã‚©ãƒ«ãƒ€ãƒ„ãƒªãƒ¼è¡¨ç¤º
- ğŸ“„ ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚’HTMLã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- ğŸ”„ ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°æ™‚ã«è‡ªå‹•ãƒªãƒ­ãƒ¼ãƒ‰ï¼ˆWebSocketï¼‰
- ğŸ¨ ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆï¼ˆhighlight.jsï¼‰
- ğŸ“Š Mermaidå›³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¯¾å¿œ
- ğŸŒ™ ãƒ€ãƒ¼ã‚¯/ãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆ
- âœï¸ ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ï¼ˆCmd+Eï¼‰
- ğŸ“¥ PDFå‡ºåŠ›ï¼ˆCmd+Pï¼‰
- ğŸ¬ å‹•ç”»/éŸ³å£°ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

### ãƒ•ã‚¡ã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶æ©Ÿèƒ½

- å³ã‚¯ãƒªãƒƒã‚¯ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼
  - ãƒ•ã‚¡ã‚¤ãƒ«ï¼šé–‹ãã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€åå‰å¤‰æ›´ã€ãƒ‘ã‚¹ã‚³ãƒ”ãƒ¼ã€å‰Šé™¤
  - ãƒ•ã‚©ãƒ«ãƒ€ï¼šæ–°è¦ãƒ•ã‚©ãƒ«ãƒ€ã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€åå‰å¤‰æ›´ã€ãƒ‘ã‚¹ã‚³ãƒ”ãƒ¼ã€å‰Šé™¤
- ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—
  - ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ•ã‚©ãƒ«ãƒ€ã‚’ãƒ•ã‚©ãƒ«ãƒ€ã¸ç§»å‹•
  - å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
  - Delete/Backspaceï¼šé¸æŠã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤
  - F2ï¼šåå‰å¤‰æ›´

## Installation

```bash
# PyPIã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰
pip install mdv-live

# ã¾ãŸã¯é–‹ç™ºç‰ˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
git clone https://github.com/panhouse/mdv.git
cd mdv
pip install -e .
```

## Usage

```bash
# ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¡¨ç¤º
mdv

# ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¡¨ç¤º
mdv ./project/

# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
mdv README.md

# ãƒãƒ¼ãƒˆæŒ‡å®š
mdv -p 9000

# ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è‡ªå‹•ã§é–‹ã‹ãªã„
mdv --no-browser

# Markdownã‚’PDFã«å¤‰æ›
mdv --pdf README.md
mdv --pdf README.md -o output.pdf

# ã‚µãƒ¼ãƒãƒ¼ç®¡ç†
mdv -l        # ç¨¼åƒä¸­ã®ã‚µãƒ¼ãƒãƒ¼ä¸€è¦§
mdv -k -a     # å…¨ã‚µãƒ¼ãƒãƒ¼åœæ­¢
mdv -k <PID>  # ç‰¹å®šã‚µãƒ¼ãƒãƒ¼åœæ­¢
```

## Keyboard Shortcuts

| ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ | æ©Ÿèƒ½ |
|---------------|------|
| Cmd/Ctrl + B | ã‚µã‚¤ãƒ‰ãƒãƒ¼è¡¨ç¤ºåˆ‡æ›¿ |
| Cmd/Ctrl + E | ç·¨é›†ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ |
| Cmd/Ctrl + S | ä¿å­˜ï¼ˆç·¨é›†ãƒ¢ãƒ¼ãƒ‰æ™‚ï¼‰ |
| Cmd/Ctrl + P | PDFå‡ºåŠ› |
| Cmd/Ctrl + W | ã‚¿ãƒ–ã‚’é–‰ã˜ã‚‹ |
| Delete/Backspace | ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ•ã‚©ãƒ«ãƒ€å‰Šé™¤ |
| F2 | åå‰å¤‰æ›´ |

## Architecture

```
mdv/
â”œâ”€â”€ __init__.py           # ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
â”œâ”€â”€ __main__.py           # ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ cli.py                # CLIã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ»PDFå¤‰æ›
â”œâ”€â”€ server.py             # FastAPIãƒ«ãƒ¼ãƒˆå®šç¾©ãƒ»ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ models.py             # Pydanticãƒ¢ãƒ‡ãƒ«
â”œâ”€â”€ file_types.py         # ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—åˆ¤å®šï¼ˆãƒ¬ã‚¸ã‚¹ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
â”œâ”€â”€ state.py              # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†
â”œâ”€â”€ websocket_manager.py  # WebSocketæ¥ç¶šç®¡ç†
â”œâ”€â”€ rendering.py          # Markdown/ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
â”œâ”€â”€ file_tree.py          # ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼æ§‹ç¯‰
â”œâ”€â”€ path_security.py      # ãƒ‘ã‚¹æ¤œè¨¼ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
â”œâ”€â”€ file_response.py      # APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ
â”œâ”€â”€ media_streaming.py    # ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ï¼ˆRangeå¯¾å¿œï¼‰
â”œâ”€â”€ watcher.py            # ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ï¼ˆãƒãƒ¼ãƒªãƒ³ã‚°ï¼‰
â””â”€â”€ static/
    â”œâ”€â”€ index.html        # HTMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
    â”œâ”€â”€ styles.css        # CSSã‚¹ã‚¿ã‚¤ãƒ«
    â””â”€â”€ app.js            # JavaScriptã‚¢ãƒ—ãƒª
```

## Requirements

- Python 3.9+
- FastAPI
- uvicorn
- markdown-it-py
- python-multipart

## Advanced: macOS Finder Integration

macOSã§`.md`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¦MDVã§é–‹ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹è¨­å®šã§ã™ã€‚

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰

```bash
# mdvãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
which mdv

# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
curl -fsSL https://raw.githubusercontent.com/panhouse/mdv/main/scripts/setup-macos-app.sh | bash
```

ã¾ãŸã¯ã€ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ã„ã‚‹å ´åˆï¼š

```bash
./scripts/setup-macos-app.sh
```

### æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

<details>
<summary>ã‚¯ãƒªãƒƒã‚¯ã—ã¦å±•é–‹</summary>

1. mdvã®ãƒ‘ã‚¹ã‚’ç¢ºèªï¼š
```bash
which mdv
# ä¾‹: /usr/local/bin/mdv
```

2. AppleScriptãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆ`~/MDV.applescript`ï¼‰ï¼š
```applescript
on open theFiles
    repeat with theFile in theFiles
        set filePath to POSIX path of theFile
        -- â†“ è‡ªåˆ†ã®mdvãƒ‘ã‚¹ã«ç½®ãæ›ãˆã‚‹
        do shell script "nohup /usr/local/bin/mdv " & quoted form of filePath & " > /dev/null 2>&1 &"
    end repeat
end open

on run
    display dialog "MDV Markdown Viewer" buttons {"OK"} default button "OK"
end run
```

3. ã‚¢ãƒ—ãƒªã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ï¼š
```bash
osacompile -o /tmp/MDV.app ~/MDV.applescript
```

4. Info.plistã‚’è¨­å®šï¼ˆ`/tmp/MDV.app/Contents/Info.plist`ï¼‰ï¼š
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleIdentifier</key>
    <string>com.mdv.viewer</string>
    <key>CFBundleDocumentTypes</key>
    <array>
        <dict>
            <key>CFBundleTypeName</key>
            <string>Markdown Document</string>
            <key>CFBundleTypeRole</key>
            <string>Viewer</string>
            <key>LSItemContentTypes</key>
            <array>
                <string>net.daringfireball.markdown</string>
            </array>
            <key>CFBundleTypeExtensions</key>
            <array>
                <string>md</string>
                <string>markdown</string>
            </array>
        </dict>
    </array>
    <key>CFBundleExecutable</key>
    <string>droplet</string>
    <key>CFBundleName</key>
    <string>MDV</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleVersion</key>
    <string>1.0</string>
</dict>
</plist>
```

5. ç½²åã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼š
```bash
codesign --force --deep --sign - /tmp/MDV.app
sudo mv /tmp/MDV.app /Applications/
/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -f /Applications/MDV.app
```

</details>

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¢ãƒ—ãƒªã«è¨­å®š

1. Finderã§ä»»æ„ã®`.md`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å³ã‚¯ãƒªãƒƒã‚¯
2. ã€Œæƒ…å ±ã‚’è¦‹ã‚‹ã€ã‚’é¸æŠ
3. ã€Œã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§é–‹ãã€ã§ã€ŒMDVã€ã‚’é¸æŠ
4. ã€Œã™ã¹ã¦ã‚’å¤‰æ›´...ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
