[project]
name = "libb-util"
version = "0.0.29"
readme = "README.md"
description = "libb utility modules for python"
authors = [{name = "bissli", email = "bissli@xyz.org"}]
license = {text = "0BSD"}
requires-python = ">=3.9"
dependencies = [
    "numpy",
    "backoff",
    "regex",
    "titlecase>=2.4.1",
    "more-itertools",
    "wrapt",
    "psutil",
    "requests",
    "tqdm",
    "trace-dkey==0.0.6",
    "platformdirs",
    "typing-extensions",
]
classifiers = [
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
]

[project.optional-dependencies]
math = ["matplotlib"]
text = ["ftfy", "rapidfuzz", "chardet"]
pandas = ["pyarrow", "pandas", "pandas-downcast==1.2.4", "numexpr"]
web = ["Twisted", "service-identity", "web.py", "Flask"]
twd = ["Twisted", "service-identity"]
test = ["asserts", "pytest", "pytest-mock", "pytest-runner", "pytest-benchmark", "unittest2", "WebTest", "maturin>=1.0,<2.0", "exceptiongroup", "jinja2"]
deploy = ["bump2version"]
docs = ["Sphinx", "sphinx-rtd-theme", "sphinx-autodoc-typehints", "myst-parser", "sphinx-copybutton"]

[tool.poetry]
name = "libb-util"
version = "0.0.29"
readme = "README.md"
description = "libb utility modules for python"
authors = ["bissli"]
license = "0BSD"
packages = [{ include = "libb", from = "src" }]
package-mode = false

[tool.poetry.dependencies]
python = "^3.9"

numpy = "*"
backoff = "*"
matplotlib = { version = "*", optional = true }
# == text
regex = "*"
titlecase = "^2.4.1"
chardet = { version = "^5.2.0", optional = true }
rapidfuzz = { version = "^3.6.1", optional = true }
ftfy = { version = "^6.1.3", optional = true }
# == general
more-itertools = "*"
wrapt = "*"
psutil = "*"
requests = "*"
tqdm = "*"
trace-dkey = "0.0.6"
platformdirs = "*"
typing-extensions = "*"
# == pandas
pandas-downcast = { version = "1.2.4", optional = true }
pyarrow = { version = "*", optional = true }
pandas = { version = "*", optional = true }
numexpr = { version = "*", optional = true }
# == mimetypes
python-magic = { version = ">=0.4.12", optional = true }
python-magic-bin = { version = ">=0.4.12", markers = "sys_platform == 'win32'", optional = true }
# == web
Flask = { version = "^3.0.2", optional = true }
"web.py" = { version = "*", optional = true }
# == twisted
Twisted = { version = "^23.8.0", optional = true }
service-identity = { version = "*", optional = true }
# == test
asserts = { version = "*", optional = true }
pytest = { version = "*", optional = true }
pytest-mock = { version = "*", optional = true }
pytest-runner = { version = "*", optional = true }
unittest2 = { version = "*", optional = true }
WebTest = { version = "*", extras = ["web"], optional = true }
maturin = { version = ">=1.0,<2.0", optional = true }
exceptiongroup = { version = "*", python = "<3.11", optional = true }
jinja2 = { version = "*", optional = true }
# == deploy
bump2version = { version = "^1.0.1", optional = true }
# == docs
Sphinx = { version = "^7.0", optional = true }
sphinx-rtd-theme = { version = "^2.0", optional = true }
sphinx-autodoc-typehints = { version = "^2.0", optional = true }
myst-parser = { version = "^3.0", optional = true }
sphinx-copybutton = { version = "^0.5", optional = true }

[tool.poetry.extras]
math = ["matplotlib"]
text = [
  "ftfy",
  "rapidfuzz",
  "chardet",
]
pandas = [
  "pyarrow",
  "pandas",
  "numpy",
  "pandas-downcast",
  "numexpr",
]
web = [
  "Twisted",
  "service-identity",
  "web.py",
  "Flask",
]
twd = [
  "Twisted",
  "service-identity",
]
test = [
  "asserts",
  "pytest",
  "pytest-mock",
  "pytest-runner",
  "pytest-benchmark",
  "unittest2",
  "WebTest",
  "maturin",
  "exceptiongroup",
  "jinja2",
]
deploy = ["bump2version"]
docs = [
  "Sphinx",
  "sphinx-rtd-theme",
  "sphinx-autodoc-typehints",
  "myst-parser",
  "sphinx-copybutton",
]

[tool.coverage.run]
source = ["src/libb"]
omit = ["src/libb/chart.py"]

[tool.coverage.report]
exclude_lines = [
  "pragma: no cover",
  "if __name__ == .__main__.:",
  "raise NotImplementedError",
  "if TYPE_CHECKING:",
]

[build-system]
requires = ["maturin>=1.0,<2.0"]
build-backend = "maturin"

[tool.maturin]
module-name = "libb._libb"
features = ["pyo3/extension-module"]
python-packages = ["libb"]
python-source = "src"
manifest-path = "rust/Cargo.toml"
include = ["LICENSE"]
