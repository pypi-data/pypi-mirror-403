[package]
name = "formualizer-eval"
version = "0.3.0"
edition = "2024"
description = "High-performance Arrow-backed Excel formula engine with dependency graph and incremental recalculation"
homepage.workspace = true
license.workspace = true
repository.workspace = true
readme = "README.md"
keywords = ["excel", "formula", "engine", "arrow", "spreadsheet"]
categories = ["data-structures", "mathematics"]

[lints.rust]
unused_variables = "allow"
dead_code = "allow"

[lints.rust.unexpected_cfgs]
level = "allow"
check-cfg = ['cfg(skip_until_transaction_context_impl)']

[lints.clippy]
too_many_arguments = "allow"
only_used_in_recursion = "allow"

[dependencies]
formualizer-parse = { workspace = true }
formualizer-macros  = { workspace = true }
formualizer-common = { workspace = true }
once_cell = { workspace = true }
rustc-hash = { workspace = true }
rand = { version = "0.8.5", features = ["small_rng"] }
rayon = "1.8"
dashmap = "6.1.0"
chrono = { workspace = true }
bitflags = "2.9.1"
bumpalo = { version = "3.16", features = ["collections"] }
smallvec = { workspace = true }
web-time = { workspace = true }

# Arrow (per-crate) â€” pinned to 56.x series
arrow-array = "56"
arrow-buffer = "56"
arrow-schema = "56"
arrow-select = "56"
arrow-cast = "56"
arrow = "56"

[dependencies.tracing]
version = "0.1"
optional = true
default-features = false
features = ["std", "attributes"]

[dependencies.tracing-subscriber]
version = "0.3"
optional = true
default-features = false
features = ["std", "fmt", "env-filter"]

[dependencies.tracing-chrome]
version = "0.7"
optional = true

[dev-dependencies]
serde = { version = "1.0", features = ["derive"] }
serde_json = { workspace = true }
glob = "0.3"

[features]
default = []
tracing = ["dep:tracing", "dep:tracing-subscriber"]
tracing_chrome = ["tracing", "dep:tracing-chrome"]
