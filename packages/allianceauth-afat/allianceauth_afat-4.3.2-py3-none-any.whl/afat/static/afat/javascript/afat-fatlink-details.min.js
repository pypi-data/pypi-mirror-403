$(document).ready(()=>{'use strict';const t=$('#fleet-edit-fat-list'),e=$('#fleet-edit-ship-types'),a=t=>{console.log('Updating ship type counts...',t);const a={};t.forEach(t=>{a[t.ship_type]=(a[t.ship_type]||0)+1}),e.find('tbody').empty(),Object.entries(a).forEach(([t,a])=>{const o=_convertStringToSlug(t);e.append(`<tr class="shiptype-${o}"><td class="ship-type">${t}</td><td class="ship-type-count text-end">${a}</td></tr>`)}),_sortTable(e,'asc')},o=e=>{new DataTable(t,{...afatSettings.dataTables,data:e,columns:[{data:'character_name'},{data:'system'},{data:'ship_type'},{data:'actions'}],columnDefs:[{target:3,columnControl:_removeColumnControl(),createdCell:t=>{$(t).addClass('text-end')},orderable:!1,width:50}],order:[[0,'asc']],initComplete:()=>{a(e)}})};if(fetchGet({url:afatSettings.url}).then(o).catch(t=>{console.error('Error fetching FAT list:',t)}),!0===afatSettings.reloadDatatable){const e=15e3;let o=Date.now()+e;const n=()=>{const s=Date.now()-o;if(s>e){const t=window.location.pathname+window.location.search+window.location.hash;if(t.startsWith('/'))return void window.location.replace(t);console.error('Invalid redirect URL')}fetchGet({url:afatSettings.url}).then(e=>{t.DataTable().clear().rows.add(e).draw(),a(e)}).catch(t=>{console.error('Error reloading data:',t)}),o+=e,setTimeout(n,Math.max(0,e-s))};setTimeout(n,e)}new ClipboardJS('.copy-btn').on('success',()=>{$('.copy-btn').tooltip('show')}),[afatSettings.modal.cancelEsiFleetModal.element,afatSettings.modal.deleteFatModal.element,afatSettings.modal.reopenFatLinkModal.element].forEach(t=>{_manageModal($(t))})});
//# sourceMappingURL=afat-fatlink-details.min.js.map