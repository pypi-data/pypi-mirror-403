# Implementation Plan Rules

> How we break down features into actionable tasks.

## Document Structure

An implementation plan should have:

1. **Overview** - 1-2 sentences of what we're building and approach
2. **Reviewer** - Code owner (person with most commits to affected files)
3. **Blockers** - Only if there are actual blockers (open PRs, unclear requirements)
4. **Tasks** - Numbered list of specific, single-file tasks
5. **Testing Notes** - What needs testing (if applicable)

## Task Design Principles

Each task should be:

- **Single-prompt executable** - An LLM can complete it in one go
- **One file focus** - Primarily touches ONE file
- **Pattern-based** - References similar existing code ("do it like X")
- **Specific** - Exact file paths and line numbers, not vague directions

## What to Explore First

Before writing tasks:
- Find similar PRs to learn team patterns
- Use get_file_history to find the CODE OWNER (most commits, not PR similarity)
- Check for open PRs that might conflict
- Map which files need changes

## Example Format

```markdown
# Implementation Plan: Feature Name

## Overview
Brief description of what and how.

## Reviewer
Name - top contributor to `affected/files/` (X commits)

## Blockers
- PR #123 touches same files (wait or coordinate)

## Tasks

### 1. Add the new handler
**File**: `src/handlers/newHandler.js`

Create a new handler following the pattern in `src/handlers/existingHandler.js:20-50`.
It should accept X input and return Y output.

**Done when**:
- [ ] Handler exports correctly
- [ ] Follows existing error handling pattern

---

### 2. Wire up to agent
**File**: `src/agent/flow.js`

Import and register newHandler. Follow how otherHandler is registered on line 65.

**Done when**:
- [ ] New handler is called in the agent flow

## Testing Notes
If adding tests: use patterns from `src/__tests__/handlers/` folder.
Code eval will be run on demand to verify behavior.
```

## Things to Avoid

- Time estimates (no "2-3 hours")
- Vague tasks ("improve error handling")
- Tasks that touch many files
- Sections listing "what I found" - synthesize into tasks
- Guessing where code should go - explore more if unsure