# Specification Rules

> How we write feature specifications for Wix Vibe code generation CLI.

## Document Structure

A spec should have these sections:

1. **Title & Summary** - Feature name with a one-sentence description
2. **The Problem** - What's broken or missing (1-2 sentences)
3. **What We're Building** - Plain English solution description
4. **Agent Flow** - How the CLI agent(s) interact with this feature
5. **Stability & Risk** - Breaking changes, backward compatibility concerns
6. **Similar Patterns** - Reference existing similar features we already do
7. **Related Code** - File paths that are relevant

## Writing Style

- Write like explaining to a colleague over coffee
- Short paragraphs (2-3 sentences max)
- Be specific about behavior - no hand-waving
- Use actual file paths from the project
- No implementation details - focus on WHAT, not HOW

## What to Explore First

Before writing the spec:
- Read PROJECT.md to learn the vocabulary
- Search for similar existing features in the codebase
- Look at how the team solved similar problems
- Check related code generation patterns we already handle

## Example Format

```markdown
# Feature Name

> One sentence: what is this and why does it matter?

## The Problem

What's broken or missing today? Keep it to 1-2 sentences.

## What We're Building

Plain English description of the solution.

## Agent Flow

How does the CLI agent interact with this? What decisions does it make?

Example: "Agent receives X input → validates against Y → generates Z component"

## Stability & Risk

What could break? Are there backward compatibility concerns?

- **Breaking change**: Changing how X is generated
- **Risk**: Existing code generation for Y might be affected

## Similar Patterns

What do we already do like this?

Reference existing features: "Similar to how we handle [existing pattern] in `path/to/file`"

## Related Code

- `path/to/file.js` — Why it's relevant
```

## Things to Avoid

- JSON or code schemas in the spec
- Implementation details (that's for tasks.md)
- Vague descriptions like "handle errors appropriately"
- Time estimates
- Over-designing - keep it minimal