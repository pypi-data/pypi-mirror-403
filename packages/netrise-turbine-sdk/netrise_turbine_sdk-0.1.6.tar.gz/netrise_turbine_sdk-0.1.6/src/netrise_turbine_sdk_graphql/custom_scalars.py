# Generated by ariadne-codegen

from __future__ import annotations

import datetime as _dt
from typing import Any


def parse_datetime(value: Any) -> _dt.datetime:
    """Parse ISO-8601 datetime values returned by the API.

    Accepts strings like:
    - 2025-12-11T10:11:12Z
    - 2025-12-11T10:11:12+00:00
    - 2025-12-11T10:11:12.123456Z
    """
    if isinstance(value, _dt.datetime):
        return value

    if not isinstance(value, str):
        raise TypeError(f"DateTime must be str or datetime, got {type(value)!r}")

    s = value.strip()
    if s.endswith("Z"):
        s = s[:-1] + "+00:00"

    # datetime.fromisoformat supports offsets, but not a bare trailing 'Z'.
    dt = _dt.datetime.fromisoformat(s)

    # Normalize to timezone-aware if offset provided; otherwise keep naive.
    return dt


def serialize_datetime(value: Any) -> str:
    """Serialize datetime inputs to ISO-8601 strings for requests."""
    if isinstance(value, str):
        return value

    if not isinstance(value, _dt.datetime):
        raise TypeError(f"DateTime must be str or datetime, got {type(value)!r}")

    # If aware and UTC, prefer Z for compactness.
    if value.tzinfo is not None:
        offset = value.utcoffset()
        if offset is not None and offset.total_seconds() == 0:
            return (
                value.replace(tzinfo=_dt.timezone.utc)
                .isoformat()
                .replace("+00:00", "Z")
            )

    return value.isoformat()
