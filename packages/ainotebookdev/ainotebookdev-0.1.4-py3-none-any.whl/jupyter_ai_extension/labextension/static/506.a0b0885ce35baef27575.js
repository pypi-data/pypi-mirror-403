"use strict";(self.webpackChunk_jupyter_ai_jupyterlab_extension=self.webpackChunk_jupyter_ai_jupyterlab_extension||[]).push([[506,576],{506(e,t,o){o.r(t),o.d(t,{DevConfigTab:()=>c});var r=o(3345),a=o.n(r),n=o(1576),l=o(1260),i=o(5835),s=o(2985);const c=({config:e,loading:t=!1,error:o=null,onProfileChange:c})=>{const{logout:d}=(0,s.A)(),p=(0,r.useMemo)(()=>Object.keys(e.profiles??{}),[e.profiles]),[u,f]=(0,r.useState)(e.activeProfile??p[0]??""),[g,x]=(0,r.useState)(null),[v,m]=(0,r.useState)("info"),[y,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!u&&p.length>0&&f(p[0])},[p,u]),(0,r.useEffect)(()=>{e.activeProfile&&e.activeProfile!==u&&f(e.activeProfile)},[e.activeProfile,u]);const w=(e.profiles??{})[u]??{},E="string"==typeof w.orchestrator_url?w.orchestrator_url:"",b="string"==typeof w.auth0_domain?w.auth0_domain:"",S=Boolean(w.orchestrator_token);return t?a().createElement("div",{style:{padding:"16px 20px",color:i.w.colors.textMuted,fontSize:"12px"}},"Loading dev config..."):o?a().createElement("div",{style:{padding:"16px 20px",color:i.w.colors.danger,fontSize:"12px"}},o):0===p.length?a().createElement("div",{style:{padding:"16px 20px",color:i.w.colors.textMuted,fontSize:"12px"}},"No dev profiles configured."):a().createElement("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"16px"}},a().createElement("div",null,a().createElement("h3",{style:{fontSize:"14px",fontWeight:600,color:i.w.colors.text,margin:"0 0 8px 0"}},"Dev Connector Profile"),a().createElement("p",{style:{fontSize:"12px",color:i.w.colors.textMuted,margin:0}},"Switch the connector between SaaS and local orchestrators. This only applies to dev builds.")),a().createElement("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"}},a().createElement("label",{style:{fontSize:"12px",color:i.w.colors.textMuted}},"Profile"),a().createElement("select",{value:u,onChange:e=>f(e.target.value),style:{padding:"6px 10px",fontSize:"12px",borderRadius:"6px",border:`1px solid ${i.w.colors.border}`,background:i.w.colors.bg}},p.map(e=>a().createElement("option",{key:e,value:e},e))),a().createElement(l.$n,{variant:"primary",size:"sm",onClick:()=>{(async()=>{if(!u||u===e.activeProfile)return m("info"),void x("Profile already active.");h(!0),x(null);try{const e=await n.devClient.setDevProfile(u);if("ok"!==e.status)throw new Error(e.error||"Failed to update profile");await d().catch(()=>{}),c?.(u),m("success"),x(`Active profile: ${e.activeProfile??u}. Reload recommended.`)}catch(e){m("error"),x(e instanceof Error?e.message:"Failed to update profile.")}finally{h(!1)}})()},disabled:y||u===e.activeProfile},y?"Applying...":"Apply"),a().createElement(l.$n,{variant:"secondary",size:"sm",onClick:()=>{window.location.reload()}},"Reload")),a().createElement("div",{style:{fontSize:"12px",color:i.w.colors.textMuted,display:"grid",gap:"6px"}},a().createElement("div",null,a().createElement("strong",null,"Orchestrator:")," ",E||"Not set"),a().createElement("div",null,a().createElement("strong",null,"Auth0:")," ",b||"Disabled"),a().createElement("div",null,a().createElement("strong",null,"Service token:")," ",S?"Set":"Not set")),g&&a().createElement("div",{style:{fontSize:"12px",color:"error"===v?i.w.colors.danger:i.w.colors.textMuted,background:"success"===v?"#eef9f1":"transparent",padding:"success"===v?"8px 10px":0,borderRadius:"6px"}},g))}},1576(e,t,o){o.r(t),o.d(t,{DevConfigError:()=>a,devClient:()=>i});var r=o(4526);class a extends Error{status;payload;constructor(e,t,o){super(e),this.status=t,this.payload=o}}const n=()=>{const e=document.cookie.match(/\b_xsrf=([^;]*)/);return e?e[1]:""},l=e=>r.URLExt.join(r.PageConfig.getBaseUrl(),e),i={getDevConfig:async()=>{const e=await fetch(l("ai/dev/config"),{credentials:"same-origin",headers:{Accept:"application/json"}});if(404===e.status)return null;const t=(e.headers.get("content-type")||"").includes("application/json")?await e.json():await e.text();if(!e.ok)throw new a(e.statusText||"Request failed",e.status,t);const o=t;return o&&o.enabled?o:null},setDevProfile:async e=>(async(e,t={})=>{const o=await fetch(l(e),{credentials:"same-origin",...t,headers:{Accept:"application/json",...t.headers||{}}}),r=(o.headers.get("content-type")||"").includes("application/json")?await o.json():await o.text();if(!o.ok){const e="object"==typeof r&&null!==r&&"message"in r?String(r.message):o.statusText;throw new a(e||"Request failed",o.status,r)}return r})("ai/dev/config",{method:"POST",headers:{"Content-Type":"application/json","X-XSRFToken":n()},body:JSON.stringify({profile:e})})}}}]);