import{d as k,o as D,f as o,j as e,v as a,F as S,r as R,L as h,G as F,H as M,q,D as c,m as n}from"./vue-vendor-w28tHAkY.js";import{e as A,f as N}from"./index-BYCcWbA5.js";const V={class:"space-y-6"},B={class:"card"},H={class:"space-y-4"},L={class:"grid grid-cols-2 gap-4"},P={class:"font-medium"},T={class:"font-mono"},j={class:"font-medium"},E={class:"font-medium"},G={class:"font-medium"},O={class:"font-medium"},U={key:0},$={class:"flex flex-wrap gap-2"},z={class:"card"},I={class:"space-y-4"},J={class:"flex items-center justify-between p-4 bg-gray-50 rounded"},K={class:"flex items-center space-x-2"},Q=["disabled"],W={key:0,class:"p-4 bg-green-50 text-green-700 rounded"},ee=k({__name:"Settings",setup(X){const s=c(null),i=c(24),d=c(!1),r=c(null),C=async()=>{try{s.value=await A()}catch(l){console.error("Failed to fetch config:",l)}},w=async()=>{if(confirm(`Are you sure you want to delete records older than ${i.value} hours?`)){d.value=!0,r.value=null;try{const l=await N(i.value);r.value=l}catch(l){console.error("Cleanup failed:",l),alert("Cleanup failed")}finally{d.value=!1}}};return D(()=>{C()}),(l,t)=>{var m,v,p,x,g,f,y,b,_;return n(),o("div",V,[e("div",B,[t[8]||(t[8]=e("h2",{class:"text-lg font-semibold mb-4"},"Configuration",-1)),e("div",H,[e("div",L,[e("div",null,[t[1]||(t[1]=e("div",{class:"text-sm text-gray-500"},"App Name",-1)),e("div",P,a(((m=s.value)==null?void 0:m.app_name)||"-"),1)]),e("div",null,[t[2]||(t[2]=e("div",{class:"text-sm text-gray-500"},"Route Prefix",-1)),e("div",T,a(((v=s.value)==null?void 0:v.prefix)||"-"),1)]),e("div",null,[t[3]||(t[3]=e("div",{class:"text-sm text-gray-500"},"Storage Type",-1)),e("div",j,a(((p=s.value)==null?void 0:p.storage_type)||"-"),1)]),e("div",null,[t[4]||(t[4]=e("div",{class:"text-sm text-gray-500"},"Max Requests",-1)),e("div",E,a(((g=(x=s.value)==null?void 0:x.max_requests)==null?void 0:g.toLocaleString())||"-"),1)]),e("div",null,[t[5]||(t[5]=e("div",{class:"text-sm text-gray-500"},"Retention Hours",-1)),e("div",G,a(((f=s.value)==null?void 0:f.retention_hours)||"-")+" hours",1)]),e("div",null,[t[6]||(t[6]=e("div",{class:"text-sm text-gray-500"},"Sample Rate",-1)),e("div",O,a(((((y=s.value)==null?void 0:y.sample_rate)||0)*100).toFixed(0))+"%",1)])]),(_=(b=s.value)==null?void 0:b.exclude_paths)!=null&&_.length?(n(),o("div",U,[t[7]||(t[7]=e("div",{class:"text-sm text-gray-500 mb-2"},"Excluded Paths",-1)),e("div",$,[(n(!0),o(S,null,R(s.value.exclude_paths,u=>(n(),o("span",{key:u,class:"px-2 py-1 text-sm bg-gray-100 text-gray-600 rounded font-mono"},a(u),1))),128))])])):h("",!0)])]),e("div",z,[t[11]||(t[11]=e("h2",{class:"text-lg font-semibold mb-4"},"Data Management",-1)),e("div",I,[e("div",J,[t[10]||(t[10]=e("div",null,[e("div",{class:"font-medium"},"Cleanup Old Data"),e("div",{class:"text-sm text-gray-500"},"Remove request records older than specified hours")],-1)),e("div",K,[F(e("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>i.value=u),type:"number",min:"1",max:"168",class:"w-20 px-2 py-1 border rounded text-sm"},null,512),[[M,i.value,void 0,{number:!0}]]),t[9]||(t[9]=e("span",{class:"text-sm text-gray-500"},"hours",-1)),e("button",{onClick:w,disabled:d.value,class:"px-4 py-2 bg-red-500 text-white rounded text-sm hover:bg-red-600 disabled:opacity-50"},a(d.value?"Cleaning...":"Cleanup"),9,Q)])]),r.value?(n(),o("div",W," ✓ Successfully deleted "+a(r.value.deleted)+" records ",1)):h("",!0)])]),t[12]||(t[12]=e("div",{class:"card"},[e("h2",{class:"text-lg font-semibold mb-4"},"About"),e("div",{class:"space-y-2 text-sm text-gray-600"},[e("p",null,[e("strong",null,"Fabric Monitor"),q(" v0.1.0")]),e("p",null,"A lightweight monitoring framework for Python backend services."),e("p",null,[e("a",{href:"https://github.com/yourusername/fabric",target:"_blank",class:"text-primary-600 hover:underline"}," Documentation & Source Code → ")])])],-1))])}}});export{ee as default};
