[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.wheel]
packages = ["neva"]

[project]
name = "python-neva"
version = "0.6.0.dev5"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.12"
dependencies = [
  "cryptography>=46.0.3",
  "dishka>=1.7.2",
  "fastapi[all]>=0.124.0",
  "flexmock>=0.13.0",
  "pwdlib[argon2,bcrypt]>=0.3.0",
  "pyinstrument>=5.1.1",
  "structlog>=25.5.0",
  "tortoise-orm[accel]>=0.25.3",
  "typer>=0.21.1",
]

[project.optional-dependencies]
testing = ["pytest>=9.0.2", "pytest-asyncio>=0.25.3"]

[project.scripts]
neva = "neva.console.runner:main"

[dependency-groups]
dev = [
  "bandit>=1.9.2",
  "poethepoet>=0.38.0",
  "polyfactory>=3.1.0",
  "pre-commit>=4.5.0",
  "pytest>=9.0.2",
  "pytest-asyncio>=0.25.3",
  "pytest-benchmark>=5.2.3",
  "pytest-cov>=7.0.0",
  "ruff>=0.14.8",
  "ty>=0.0.8",
]

[tool.pytest.ini_options]
asyncio_mode = "auto"
asyncio_default_fixture_loop_scope = "function"
testpaths = ["tests"]

[tool.poe.tasks]
# Code quality
lint = "ruff check"
fmt = "ruff format"
tc = "ty check"

# Testing
test = "pytest"
test-cov = "test --cov=neva --cov-report=term-missing"
test-full = "test-cov tests/"
