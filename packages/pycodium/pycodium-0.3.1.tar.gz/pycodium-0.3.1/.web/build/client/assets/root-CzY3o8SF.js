import{r as e}from"./rolldown-runtime-CkEfyhlV.js";import{A as t,a as n,d as r,i,j as a,r as o,s,u as c}from"./chunk-JMJ3UQ3L-Cy1y8aTa.js";import"./react-dom-WWniO_zt.js";import{C as l,E as u,S as d,T as f,b as p,c as m,d as h,k as g,m as _,p as v,t as y,v as b,w as x,y as S}from"./esm-B4NWxpFo.js";import{n as C,t as w}from"./emotion-react.browser.esm-DhKrZlEN.js";var T=e(a(),1),E=(0,T.createContext)(null),D={didCatch:!1,error:null},O=class extends T.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=D}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){let{error:e}=this.state;if(e!==null){var t,n,r=[...arguments];(t=(n=this.props).onReset)==null||t.call(n,{args:r,reason:`imperative-api`}),this.setState(D)}}componentDidCatch(e,t){var n,r;(n=(r=this.props).onError)==null||n.call(r,e,t)}componentDidUpdate(e,t){let{didCatch:n}=this.state,{resetKeys:r}=this.props;if(n&&t.error!==null&&k(e.resetKeys,r)){var i,a;(i=(a=this.props).onReset)==null||i.call(a,{next:r,prev:e.resetKeys,reason:`keys`}),this.setState(D)}}render(){let{children:e,fallbackRender:t,FallbackComponent:n,fallback:r}=this.props,{didCatch:i,error:a}=this.state,o=e;if(i){let e={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof t==`function`)o=t(e);else if(n)o=(0,T.createElement)(n,e);else if(r!==void 0)o=r;else throw a}return(0,T.createElement)(E.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},o)}};function k(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((e,n)=>!Object.is(e,t[n]))}var A=(0,T.createContext)({theme:x,resolvedTheme:x,setTheme:()=>{}});function j({children:e,defaultTheme:t=`system`}){let[n,r]=(0,T.useState)(t),[i,a]=(0,T.useState)(t===`system`?`light`:t),[o,s]=(0,T.useState)(!1),c=(0,T.useRef)(!0);(0,T.useEffect)(()=>{c.current&&(c.current=!1,r(localStorage.getItem(`theme`)||t),s(!0))});let l=(0,T.useMemo)(()=>n===`system`?i:n,[n,i]);return(0,T.useEffect)(()=>{let e=window.matchMedia(`(prefers-color-scheme: dark)`),t=()=>{a(e.matches?`dark`:`light`)};return t(),e.addEventListener(`change`,t),()=>{e.removeEventListener(`change`,t)}}),(0,T.useEffect)(()=>{let e=localStorage.getItem(`theme`);!o&&e!==null||localStorage.setItem(`theme`,n)},[n]),(0,T.useEffect)(()=>{if(!o)return;let e=window.document.documentElement;e.classList.remove(`light`,`dark`),e.classList.add(l),e.style.colorScheme=l},[l,o]),(0,T.createElement)(A.Provider,{value:{theme:n,resolvedTheme:l,setTheme:r}},e)}function M(){return(0,T.useContext)(A)}function N({children:e}){let{theme:t,resolvedTheme:n,setTheme:r}=M();return(0,T.useEffect)(()=>{let e=document.querySelector(`.radix-themes[data-is-root-theme="true"]`);e&&(e.classList.remove(`light`,`dark`),e.classList.add(n))},[n]),(0,T.createElement)(b.Provider,{value:{rawColorMode:t,resolvedColorMode:n,toggleColorMode:()=>{r(n===`light`?`dark`:`light`)},setColorMode:e=>{[`light`,`dark`,`system`].includes(e)||(console.error(`Invalid color mode "${e}". Defaulting to "${x}".`),e=x),r(e)}}},e)}var P={styles:{global:{":root":{},body:{}}}},F=`/assets/__reflex_global_styles-Djy-KIkS.css`;function I({children:e}){return C(`html`,{lang:`en`,suppressHydrationWarning:!0},C(`head`,{},C(`script`,{},`
// Only run in browser environment, not during SSR
if (typeof document !== 'undefined') {
    try {
        const theme = localStorage.getItem("theme") || "system";
        const systemPreference = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
        const resolvedTheme = theme === "system" ? systemPreference : theme;

        // Apply theme immediately - blocks until complete
        // Use classList to avoid overwriting other classes
        document.documentElement.classList.remove("light", "dark");
        document.documentElement.classList.add(resolvedTheme);
        document.documentElement.style.colorScheme = resolvedTheme;

    } catch (e) {
        // Fallback to system preference on any error (resolve "system" to actual theme)
        const fallbackTheme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
        document.documentElement.classList.remove("light", "dark");
        document.documentElement.classList.add(fallbackTheme);
        document.documentElement.style.colorScheme = fallbackTheme;
    }
}
`),C(`meta`,{charSet:`utf-8`}),C(`meta`,{content:`width=device-width, initial-scale=1`,name:`viewport`}),C(n,{}),C(`link`,{href:F,rel:`stylesheet`,type:`text/css`}),C(i,{})),C(`body`,{},e,C(r,{}),C(c,{})))}function L({children:e}){let[t,n]=(0,T.useContext)(S);return C(T.StrictMode,{},C(O,{fallbackRender:e=>C(`div`,{css:{height:`100%`,width:`100%`,position:`absolute`,backgroundColor:`#fff`,color:`#000`,display:`flex`,alignItems:`center`,justifyContent:`center`}},C(`div`,{css:{display:`flex`,flexDirection:`column`,gap:`0.5rem`,maxWidth:`min(80ch, 90vw)`,borderRadius:`0.25rem`,padding:`1rem`}},C(`div`,{css:{opacity:`0.5`,display:`flex`,gap:`4vmin`,alignItems:`center`}},C(`svg`,{className:`lucide lucide-frown-icon lucide-frown`,fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,viewBox:`0 0 24 24`,width:`25vmin`,xmlns:`http://www.w3.org/2000/svg`},C(`circle`,{cx:`12`,cy:`12`,r:`10`}),C(`path`,{d:`M16 16s-1.5-2-4-2-4 2-4 2`}),C(`line`,{x1:`9`,x2:`9.01`,y1:`9`,y2:`9`}),C(`line`,{x1:`15`,x2:`15.01`,y1:`9`,y2:`9`})),C(`h2`,{css:{fontSize:`5vmin`,fontWeight:`bold`}},`An error occurred while rendering this page.`)),C(`p`,{css:{opacity:`0.75`,marginBlock:`1rem`}},`This is an error with the application itself. Refreshing the page might help.`),C(`div`,{css:{width:`100%`,background:`color-mix(in srgb, currentColor 5%, transparent)`,maxHeight:`15rem`,overflow:`auto`,borderRadius:`0.4rem`}},C(`div`,{css:{padding:`0.5rem`}},C(`pre`,{css:{wordBreak:`break-word`,whiteSpace:`pre-wrap`}},e.error.name+`: `+e.error.message+`
`+e.error.stack))),C(`button`,{css:{padding:`0.35rem 1.35rem`,marginBlock:`0.5rem`,marginInlineStart:`auto`,background:`color-mix(in srgb, currentColor 15%, transparent)`,borderRadius:`0.4rem`,width:`fit-content`,"&:hover":{background:`color-mix(in srgb, currentColor 25%, transparent)`},"&:active":{background:`color-mix(in srgb, currentColor 35%, transparent)`}},onClick:n=>t([u(`_call_function`,{function:()=>navigator?.clipboard?.writeText(e.error.name+`: `+e.error.message+`
`+e.error.stack),callback:null},{})],[n],{})},`Copy`),C(`hr`,{css:{borderColor:`currentColor`,opacity:`0.25`}}),C(o,{to:`https://reflex.dev`},C(`div`,{css:{display:`flex`,alignItems:`baseline`,justifyContent:`center`,fontFamily:`monospace`,"--default-font-family":`monospace`,gap:`0.5rem`}},`Built with `,C(`svg`,{"aria-label":`Reflex`,css:{fill:`currentColor`},height:`12`,role:`img`,width:`56`,xmlns:`http://www.w3.org/2000/svg`},C(`path`,{d:`M0 11.5999V0.399902H8.96V4.8799H6.72V2.6399H2.24V4.8799H6.72V7.1199H2.24V11.5999H0ZM6.72 11.5999V7.1199H8.96V11.5999H6.72Z`}),C(`path`,{d:`M11.2 11.5999V0.399902H17.92V2.6399H13.44V4.8799H17.92V7.1199H13.44V9.3599H17.92V11.5999H11.2Z`}),C(`path`,{d:`M20.16 11.5999V0.399902H26.88V2.6399H22.4V4.8799H26.88V7.1199H22.4V11.5999H20.16Z`}),C(`path`,{d:`M29.12 11.5999V0.399902H31.36V9.3599H35.84V11.5999H29.12Z`}),C(`path`,{d:`M38.08 11.5999V0.399902H44.8V2.6399H40.32V4.8799H44.8V7.1199H40.32V9.3599H44.8V11.5999H38.08Z`}),C(`path`,{d:`M47.04 4.8799V0.399902H49.28V4.8799H47.04ZM53.76 4.8799V0.399902H56V4.8799H53.76ZM49.28 7.1199V4.8799H53.76V7.1199H49.28ZM47.04 11.5999V7.1199H49.28V11.5999H47.04ZM53.76 11.5999V7.1199H56V11.5999H53.76Z`}),C(`title`,{},`Reflex`)))))),onError:(e,n)=>t([u(`reflex___state____state.reflex___state____frontend_event_exception_state.handle_frontend_exception`,{info:e?.name+`: `+e?.message+`
`+e?.stack,component_stack:n?.componentStack},{})],[e,n],{})},C(N,{},C(T.Fragment,{},C(v,{}),C(m,{css:{...P.styles.global[`:root`],...P.styles.global.body}},C(T.Fragment,{},C(h,{}),C(T.Fragment,{},e)))))))}function R({children:e}){return(0,T.useEffect)(()=>{let e={react:T,"@radix-ui/themes":y,"@emotion/react":w,"$/utils/context":l,"$/utils/state":g,"$/utils/components":_};window.__reflex=e},[]),C(I,{},C(j,{defaultTheme:x,attribute:`class`},C(d,{},C(p,{},C(L,{},e)))))}var z=t(function(){return C(s,{})});export{R as Layout,z as default};