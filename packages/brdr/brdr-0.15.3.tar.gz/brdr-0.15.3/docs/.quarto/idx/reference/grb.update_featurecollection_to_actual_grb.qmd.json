{"title":"grb.update_featurecollection_to_actual_grb","markdown":{"headingText":"grb.update_featurecollection_to_actual_grb","headingAttr":{"id":"brdr.be.grb.grb.update_featurecollection_to_actual_grb","classes":[],"keyvalue":[]},"containsRefs":false,"markdown":"\n```python\nbe.grb.grb.update_featurecollection_to_actual_grb(\n    featurecollection,\n    id_theme_fieldname=None,\n    base_metadata_field=METADATA_FIELD_NAME,\n    grb_type=GRBType.ADP,\n    max_distance_for_actualisation=2.0,\n    max_predictions=-1,\n    full_reference_strategy=FullReferenceStrategy.NO_FULL_REFERENCE,\n    multi_to_best_prediction=True,\n    feedback=None,\n    crs=DEFAULT_CRS,\n    attributes=True,\n    max_workers=None,\n)\n```\n\nUpdate a thematic feature collection to the most recent version of the GRB.\n\nThis function automates the alignment process by first identifying which\nfeatures are 'affected' by changes in the GRB reference layer within a\nspecific timeframe. It then calculates and evaluates new alignment\npredictions for those affected features.\n\n## Parameters {.doc-section .doc-section-parameters}\n\n| Name                           | Type                                                        | Description                                                                                                                                                                            | Default                                    |\n|--------------------------------|-------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n| featurecollection              | [Dict](`typing.Dict`)\\[[str](`str`), [Any](`typing.Any`)\\]  | The thematic data as a GeoJSON-like dictionary.                                                                                                                                        | _required_                                 |\n| id_theme_fieldname             | [str](`str`)                                                | The property field name containing the unique ID for each feature.                                                                                                                     | `None`                                     |\n| base_metadata_field            | [str](`str`)                                                | Name of the attribute field that stores the existing alignment observation (JSON string). This is used to determine the last version date.                                             | `OBSERVATION_FIELD_NAME`                   |\n| grb_type                       | [GRBType](`brdr.be.grb.enums.GRBType`)                      | The type of GRB reference data to align against.                                                                                                                                       | `GRBType.ADP`                              |\n| max_distance_for_actualisation | [float](`float`)                                            | Maximum distance (in meters) to search for potential alignments. The function checks intervals of 0.1m up to this value.                                                               | `2.0`                                      |\n| max_predictions                | [int](`int`)                                                | Maximum number of alignment predictions to return. -1 returns all.                                                                                                                     | `-1`                                       |\n| full_reference_strategy        | [FullReferenceStrategy](`brdr.enums.FullReferenceStrategy`) | Determines the prediction score when evaluating predictions, so predictions that are based on full-reference-geometries can be preferred.                                              | `NO_FULL_REFERENCE`                        |\n| multi_to_best_prediction       | [bool](`bool`)                                              | If True, the prediction with the best prediction score is returned when multiple predictions are found If False, the original geometry is returned when multiple predictions are found | `True. Only useful when max_predictions=1` |\n| feedback                       | [Any](`typing.Any`)                                         | Feedback object (e.g., QgsFeedback) for progress reporting and logging (in QGIS).                                                                                                      | `None`                                     |\n| crs                            | [str](`str`)                                                | The Coordinate Reference System for processing.                                                                                                                                        | `DEFAULT_CRS`                              |\n| attributes                     | [bool](`bool`)                                              | Whether to include the original thematic attributes in the result.                                                                                                                     | `True`                                     |\n| max_workers                    | [int](`int`)                                                | The number of parallel threads to use for processing.                                                                                                                                  | `None`                                     |\n\n## Returns {.doc-section .doc-section-returns}\n\n| Name   | Type                                                       | Description                                                                                        |\n|--------|------------------------------------------------------------|----------------------------------------------------------------------------------------------------|\n|        | [Dict](`typing.Dict`)\\[[str](`str`), [Any](`typing.Any`)\\] | A GeoJSON-like dictionary containing the evaluated predictions and updated alignment observations. |\n\n## Notes {.doc-section .doc-section-notes}\n\nThe function follows a specific lifecycle to optimize performance:\n\n1. **Initialization**: Loads thematic data and the actual GRB reference data.\n2. **Temporal Analysis**: Extracts the `last_version_date` from the features'\n   observations to determine the relevant GRB change-window.\n3. **Spatial Filtering**: Uses `get_affected_by_grb_change` to isolate only\n   those geometries where the underlying GRB has actually changed.\n4. **Alignment**: Executes the `Aligner.evaluate` logic only on 'affected'\n   features.\n\n## Raises {.doc-section .doc-section-raises}\n\n| Name   | Type                       | Description                                                                |\n|--------|----------------------------|----------------------------------------------------------------------------|\n|        | [ValueError](`ValueError`) | If the CRS is unsupported or if the input feature collection is malformed. |","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","highlight-style":"github-dark","embed-resources":false,"toc":true,"output-file":"grb.update_featurecollection_to_actual_grb.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.26","quartodoc":{"dir":"../reference","render_interlinks":true,"package":"brdr","sidebar":"../reference/_sidebar.yml","css":"../reference/_styles-quartodoc.css","sections":[{"title":"Aligner","package":"brdr.aligner","desc":"Aligner class of the brdr package.","contents":["Aligner","AlignerResult"]},{"title":"AlignerFeatures","package":"brdr.feature_data","desc":"Classes for the thematic and reference data to be used by the Aligner","contents":["AlignerFeatureCollection","AlignerFeature"]},{"title":"Loaders","package":"brdr.loader","desc":"Loaders to load data","contents":["Loader","DictLoader","GeoJsonLoader","GeoJsonFileLoader","GeoJsonUrlLoader","OGCFeatureAPIReferenceLoader","WFSReferenceLoader"]},{"title":"Processors","package":"brdr.processor","desc":"Processor algorithms","contents":["BaseProcessor","AlignerGeometryProcessor","DieussaertGeometryProcessor","NetworkGeometryProcessor","SnapGeometryProcessor","TopologyProcessor"]},{"title":"Enumerators","package":"brdr.enums","desc":"Enums used in the brdr package.","contents":["FullReferenceStrategy","AlignerResultType","OpenDomainStrategy","DiffMetric","ProcessRemark","Evaluation","SnapStrategy","PredictionStrategy","ProcessorID"]},{"title":"Typings","package":"brdr.typings","desc":"Typings used in 'brdr'","contents":["ProcessResult"]},{"title":"Configs","package":"brdr.configs","desc":"Configs used in 'brdr' Aligner & Processor","contents":["ProcessorConfig","AlignerConfig"]},{"title":"GRB (Flanders-specific)","package":"brdr.be.grb","desc":"GRB (Flanders-specific) classes,methods, enumerators,...","contents":[{"name":"loader.GRBActualLoader"},{"name":"loader.GRBFiscalParcelLoader"},{"name":"loader.GRBSpecificDateParcelLoader"},{"name":"grb.update_featurecollection_to_actual_grb"},{"name":"utils.is_grb_changed"},{"name":"utils.get_affected_ids_by_grb_change"},{"name":"enums.GRBType"}]},{"title":"OSM","package":"brdr.osm","desc":"OpenStreetMap (OSM) classes,methods, enumerators,...","contents":[{"name":"loader.OSMLoader"}]},{"title":"Visualization-functions (optional by pip install brdr[viz])","package":"brdr.viz","desc":"OpenStreetMap (OSM) classes,methods, enumerators,...","contents":[{"name":"show_map"},{"name":"plot_difference_by_relevant_distance"},{"name":"animated_map"},{"name":"print_observation_of_aligner_results"}]}]},"theme":["../static/custom.scss"],"toc-location":"right"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}