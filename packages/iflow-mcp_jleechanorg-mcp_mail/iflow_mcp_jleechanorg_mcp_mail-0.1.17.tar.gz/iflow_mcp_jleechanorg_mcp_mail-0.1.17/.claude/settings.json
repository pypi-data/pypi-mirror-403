{
  "_comment": "Run ./scripts/integrate_claude_code.sh to generate auth token and embed it in headers (recommended)",
  "mcpServers": {
    "mcp-agent-mail": {
      "type": "http",
      "url": "http://127.0.0.1:8765/mcp/",
      "core": true,
      "headers": {
        "_note": "Authentication required - run ./scripts/integrate_claude_code.sh to embed token"
      },
      "options": {
        "timeoutSeconds": 180,
        "initTimeoutSeconds": 30
      }
    }
  },
  "hooks": {
    "SessionStart": [
      {
        "matcher": {},
        "hooks": [
          {
            "type": "command",
            "command": "bash -lc 'repo_root=\"$(git rev-parse --show-toplevel 2>/dev/null || pwd)\"; if [[ -f \"$repo_root/scripts/auto_register_agent.sh\" ]]; then \"$repo_root/scripts/auto_register_agent.sh\" --program claude-code --model sonnet --nonfatal --force-reclaim; fi'"
          }
        ]
      }
    ],
    "PreToolUse": [],
    "PostToolUse": []
  },
  "_exampleHooks": {
    "_instructions": "Uncomment and customize these hooks after registering your project and agent. If your server requires auth, generate a local config with an embedded token via ./scripts/integrate_claude_code.sh (recommended) instead of committing secrets.",
    "SessionStart_example": [
      {
        "matcher": {},
        "hooks": [
          { "type": "command", "command": "uv run python -m mcp_agent_mail.cli file_reservations active YOUR_PROJECT_NAME" },
          { "type": "command", "command": "uv run python -m mcp_agent_mail.cli acks pending YOUR_AGENT_NAME --limit 20" }
        ]
      }
    ],
    "PreToolUse_example": [
      {
        "matcher": "Edit",
        "hooks": [
          { "type": "command", "command": "uv run python -m mcp_agent_mail.cli file_reservations soon YOUR_PROJECT_NAME --minutes 10" }
        ]
      }
    ],
    "PostToolUse_example": [
      {
        "matcher": "mcp__mcp-agent-mail__send_message",
        "hooks": [
          { "type": "command", "command": "uv run python -m mcp_agent_mail.cli list-acks --agent YOUR_AGENT_NAME --limit 10" }
        ]
      },
      {
        "matcher": "mcp__mcp-agent-mail__call_extended_tool",
        "hooks": [
          { "type": "command", "command": "uv run python -m mcp_agent_mail.cli file_reservations list YOUR_PROJECT_NAME" }
        ]
      }
    ]
  }
}