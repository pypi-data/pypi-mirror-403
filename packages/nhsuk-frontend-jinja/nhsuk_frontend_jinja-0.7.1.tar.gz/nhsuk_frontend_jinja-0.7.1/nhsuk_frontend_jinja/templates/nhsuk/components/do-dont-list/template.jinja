{% from "nhsuk/macros/attributes.jinja" import nhsukAttributes %}
{% from "nhsuk/macros/icon.jinja" import nhsukIcon %}

{#- Jinja compatibility - avoid referencing params.items directly
  as it clashes with dict.items() -#}
{% set items = params["items"] if "items" in params else [] %}

{%- set type = "cross" if params.type == "cross" else "tick" %}
{%- set headingLevel = params.headingLevel if params.headingLevel else 3 %}

{%- macro _listItem(params, data, type) %}
  {% set item = {
    "text": data.item if data.item is string,
    "html": data.item if data.item is escaped
  } if data.item else data -%}

  {{ nhsukIcon(type) | trim }}
  {% if not params.hidePrefix and (params.prefixText or type == "cross") %}
    {{- (params.prefixText if params.prefixText else "do not") ~ " " -}}
  {% endif %}
  {{- item.html | safe | trim | indent(6) if item.html else item.text }}
{% endmacro -%}

<div {%- if params.id %} id="{{ params.id }}"{% endif %} class="nhsuk-do-dont-list
  {%- if params.classes %} {{ params.classes }}{% endif %}"
  {{- nhsukAttributes(params.attributes) }}>
  <h{{ headingLevel }} class="nhsuk-do-dont-list__label">{{ params.title }}</h{{ headingLevel }}>
  <ul class="nhsuk-list nhsuk-list--{{ type }}" role="list">
{% for data in items %}
  {% if data %}
    <li>
      {{ _listItem(params, data, type) | trim | indent(6) }}
    </li>
  {% endif %}
{% endfor %}
  </ul>
</div>
