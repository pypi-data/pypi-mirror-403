{% from "nhsuk/macros/attributes.jinja" import nhsukAttributes %}

{#- Set classes for this component #}
{%- set classNames = "nhsuk-contents-list" -%}

{%- if params.classes %}
  {% set classNames = classNames ~ " " ~ params.classes %}
{% endif -%}

{#- Jinja compatibility - avoid referencing params.items directly
  as it clashes with dict.items() -#}
{% set items = params["items"] if "items" in params else [] %}

<nav {%- if params.id %} id="{{ params.id }}"{% endif %} class="{{ classNames }}" role="navigation" aria-label="{{ params.landmarkLabel | default("Pages in this guide", true) }}"
  {{- nhsukAttributes(params.attributes) }}>
  <h2 class="nhsuk-u-visually-hidden">
    {{- params.visuallyHiddenText | default("Contents", true) -}}
  </h2>
  <ol class="nhsuk-contents-list__list">
{% for item in items %}
  {% if item %}
    <li class="nhsuk-contents-list__item" {%- if item.current %} aria-current="page" {%- endif %}>
    {% if item.current %}
      <span class="nhsuk-contents-list__current {%- if item.classes %} {{ item.classes }}{% endif %}" {{- nhsukAttributes(item.attributes) }}>
        {{- item.html | safe | trim | indent(6) if item.html else item.text -}}
      </span>
    {% else %}
      <a class="nhsuk-contents-list__link {%- if item.classes %} {{ item.classes }}{% endif %}" href="{{ item.href }}" {{- nhsukAttributes(item.attributes) }}>
        {{- item.html | safe | trim | indent(6) if item.html else item.text -}}
      </a>
    {% endif %}
    </li>
  {% endif %}
{% endfor %}
  </ol>
</nav>
