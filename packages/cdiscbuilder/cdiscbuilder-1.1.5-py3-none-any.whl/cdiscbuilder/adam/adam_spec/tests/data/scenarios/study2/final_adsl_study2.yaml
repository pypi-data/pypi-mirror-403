domain: ADSL
key:
- USUBJID
schema: ../schema.yaml
columns:
- name: DOMAIN
  type: str
  label: Domain Abbreviation
  core: org-required
  derivation:
    constant: ADSL
  validation:
    maximum_missing_percentage: 0
    allowed_values:
    - ADSL
- name: STUDYID
  type: str
  label: Study Identifier
  core: cdisc-required
  derivation:
    source: DM.STUDYID
    constant: study-993
  validation:
    maximum_missing_percentage: 0
- name: USUBJID
  type: str
  label: Unique Subject Identifier
  core: cdisc-required
  derivation:
    source: DM.USUBJID
  validation:
    maximum_missing_percentage: 0
    unique: true
- name: SUBJID
  type: str
  label: Subject Identifier for the Study
  core: cdisc-required
  derivation:
    source: DM.SUBJID
  validation:
    maximum_missing_percentage: 0
- name: TRTSDT
  type: str
  label: Date of First Exposure to Treatment
  core: org-required
  derivation:
    source: DM.RFSTDTC
  validation:
    format: date
- name: AGE
  type: int
  label: Age
  core: cdisc-required
  derivation:
    source: DM.AGE
  validation:
    maximum_missing_percentage: 5
    min: 18
    max: 80
- name: AGEGRP1
  type: str
  label: Age Group
  core: optional
  derivation:
    source: AGE
    cut:
      <18: < 18
      '>=18 and <65': '>= 18 & <65'
      '>=65': '>= 65'
      '>=18 and <30': '>= 18 & <30'
      '>=30 and <65': '>= 30 & <65'
  validation:
    maximum_missing_percentage: 5
- name: AGEU
  type: str
  label: Age Units
  core: cdisc-required
  derivation:
    source: DM.AGEU
  validation:
    maximum_missing_percentage: 5
    allowed_values:
    - YEARS
- name: SEX
  type: str
  label: Sex
  core: cdisc-required
  derivation:
    source: DM.SEX
    mapping:
      F: Female
      M: Male
      ? ''
      : null
  validation:
    maximum_missing_percentage: 0
    allowed_values:
    - Male
    - Female
    - Unknown
- name: WEIGHT
  type: float
  label: Weight (kg)
  core: org-required
  derivation:
    source: VS.VSORRES
    filter: VS.VSTESTCD == "WEIGHT" & VS.VSDTC < DM.RFSTDTC
    aggregation:
      function: closest
      target: DM.RFSTDTC
  validation:
    maximum_missing_percentage: 5
- name: HEIGHT
  type: float
  label: Height (cm)
  core: org-required
  derivation:
    source: VS.VSORRES
    filter: VS.VSTESTCD == "HEIGHT" & VS.VSDTC < DM.RFSTDTC
    aggregation:
      function: closest
      target: DM.RFSTDTC
  validation:
    maximum_missing_percentage: 5
- name: BMI
  type: float
  label: BMI (kg/m^2)
  core: org-required
  derivation:
    function: adamyaml.adam_derivation.functions.get_bmi.get_bmi
    height: HEIGHT
    weight: WEIGHT
  validation:
    maximum_missing_percentage: 5
dir:
  sdtm: ../../data/sdtm
  adam: ../../data/adam_study2
