# This config has a circular _instance_ dependency
# training.log references evaluation.log and evaluation.log references training.log
_target_: trainer_app
logger:
  _target_: logger
  level: INFO
  output_dir: /tmp/logs
dataset:
  _target_: dataset
  name: cifar10
  root: /data
  batch_size: 32
  num_workers: 4
  augmentation:
    _target_: augmentation
model:
  _target_: resnet
  layers: 50
  pretrained: false
  optimizer:
    _target_: optimizer
    type: adam
    learning_rate: 0.01
    weight_decay: 0.0001
    betas: [0.9, 0.999]
  scheduler:
    _target_: scheduler
    type: cosine
    warmup_epochs: 5
    min_lr: 0.00001
training:
  _target_: trainingconfig
  epochs: 100
  save_every: 10
  log:
    _instance_: evaluation.log  # Points to evaluation.log which points back here
evaluation:
  _target_: evalconfig
  metrics: [accuracy]
  log:
    _instance_: training.log  # Creates circular reference!
  data:
    _instance_: dataset
