[build-system]
build-backend = "hatchling.build"
requires = ["hatchling"]

[tool.hatch.build.targets.wheel]
packages = ["rconfig"]
include = ["rconfig/**/*.lark"]

[project]
authors = [{ name = "Rene Ebertowski", email = "r.ebertowski@gmx.de" }]
description = "A Python configuration library that turns YAML, JSON, and TOML files into Python objects"
name = "ReausoConfig"
readme = "README.md"
license = "MIT"
requires-python = ">= 3.11"
version = "0.1.0"
dependencies = [
    "ruamel.yaml>=0.18.7,<0.19",
    "lark>=1.1.0,<2.0",
    "tomli_w>=1.0.0,<2.0",
]

[project.urls]
Documentation = "https://reauso.github.io/ReausoConfig/"
Repository = "https://github.com/reauso/ReausoConfig"
Issues = "https://github.com/reauso/ReausoConfig/issues"

[project.optional-dependencies]
test = [
    "pytest>=9.0.0,<10.0",
    "coverage>=7.0.0,<8.0",
    "parameterized>=0.9.0,<1.0",
    "pydantic>=2.0.0,<3.0",
    "attrs>=24.0.0,<25.0",
]
docs = [
    "mkdocs-material>=9.0.0,<10.0",
]

[tool.pixi.workspace]
channels = ["conda-forge"]
platforms = ["linux-64", "win-64", "osx-64"]

[tool.pixi.dependencies]
pixi-pycharm = "*"

[tool.pixi.pypi-dependencies]
ReausoConfig = { path = ".", editable = true }

[tool.pixi.tasks]


[tool.pixi.environments]
test = ["test"]
docs = ["docs"]

[tool.pixi.feature.test.pypi-dependencies]
ReausoConfig = { path = ".", editable = true, extras = ["test"] }

[tool.pixi.feature.test.tasks]
test = "coverage run -m pytest"
coverage = { cmd = [
    "coverage", "report",
    "&&", "coverage", "html"
], depends-on = ["test"] }

[tool.pixi.feature.docs.pypi-dependencies]
ReausoConfig = { path = ".", editable = true, extras = ["docs"] }

[tool.pixi.feature.docs.tasks]
docs-serve = "mkdocs serve"
docs-build = "mkdocs build --strict"

[tool.coverage.run]
source = ["rconfig"]
omit = [
  "*/*_test.py",
  "*/lib/python*/unittest/*",
  "*/Lib/unittest/*"
]

[tool.coverage.report]
show_missing = true
#skip_covered = true
