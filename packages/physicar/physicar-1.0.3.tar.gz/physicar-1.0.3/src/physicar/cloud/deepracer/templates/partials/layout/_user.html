<div class="nav-item dropdown">
  <a href="#" class="nav-link d-flex lh-1 p-0 px-2" data-bs-toggle="dropdown" aria-label="Open user menu">
    <span class="avatar avatar-sm" 
          {% if user and user.avatar %}style="background-image: url('{{ user.avatar }}')"{% endif %}></span>
    <div class="d-none d-xl-block ps-2">
      <div>{{ user.name | default('Guest') }}</div>
      <div class="mt-1 small text-secondary">{{ user.role | default('') }}</div>
    </div>
  </a>
  <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
    {% if user %}
    <a href="/profile" class="dropdown-item">Profile</a>
    <a href="/settings" class="dropdown-item">Settings</a>
    <div class="dropdown-divider"></div>
    <a href="/logout" class="dropdown-item">Logout</a>
    {% else %}
    <a href="/login" class="dropdown-item">Login</a>
    <a href="/register" class="dropdown-item">Register</a>
    {% endif %}
  </div>
</div>
