<style>
  .track-title {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    /* 최대 2줄 */
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    min-height: 2.5em;
    /* 2줄 높이 고정 */
    font-size: 0.85rem;
  }
  #modal-report .form-imagecheck {
    width: 100%;
  }
  #modal-report .form-imagecheck-figure {
    width: 100%;
  }
</style>


<div class="modal modal-blur fade" id="modal-report" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tracks</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="form-selectgroup-boxes row mb-0">
          <div class="col-lg-12">
              <div class="row g-1">
                {% for track_id, track_info in tracks_info.items() %}
                <div class="col-6 col-sm-3 mb-2">
                  <label class="form-imagecheck mb-1 w-100">
                    <input name="form-imagecheck-radio" type="radio" data-track-name="{{ track_info['track_name'] }}"
                      value="{{track_id}}" 
                      data-track-direction="{{ track_info['track_direction'] | join(',') }}"
                      data-track-width="{{ track_info['track_width'] }}"
                      data-track-length="{{ track_info['track_length'] }}"
                      data-track-description="{{ _('tracks_description.%s' | format(track_id)) }}"
                      class="form-imagecheck-input"
                      >
                    <span class="form-imagecheck-figure w-100">
                      <!-- 이미지 -->
                      <div style="width: 100%; height: 120px; overflow: hidden;">
                        <img src="/static/img/tracks_thumbnail/{{ track_info['thumbnail'] }}"
                          alt="{{ track_info['track_name'] }}" class="form-imagecheck-image"
                          style="width: 100%; height: 100%; object-fit: contain;">
                      </div>

                    </span>
                  </label>

                  <!-- 텍스트 정보 -->
                  <div class="form-imagecheck-info">
                    <div class="track-title">
                      <strong>{{ track_info['track_name'] }}</strong>
                    </div>
                  </div>

                </div>
                {% endfor %}
              </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
    window.addEventListener('load', () => {
      // 라디오 버튼 change 이벤트 처리
      document.querySelectorAll('input[name="form-imagecheck-radio"]').forEach(radio => {
        radio.addEventListener('change', function() {
          // 모든 라디오 버튼의 부모 label에서 active 클래스 제거
          document.querySelectorAll('label.form-imagecheck').forEach(label => {
            label.classList.remove('active');
          });
          
          // 선택된 라디오 버튼의 부모 label에 active 클래스 추가
          if (this.checked) {
            const parentLabel = this.closest('label.form-imagecheck');
            if (parentLabel) {
              parentLabel.classList.add('active');
            }
          }
        });
      });
    });
</script>