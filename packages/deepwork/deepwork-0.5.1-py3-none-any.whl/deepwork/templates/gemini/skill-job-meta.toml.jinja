{#
Template: skill-job-meta.toml.jinja
Purpose: Generates the job overview skill file for Gemini CLI

Template Variables:
  - job_name: string - Job identifier (e.g., "competitive_research")
  - job_summary: string - Short one-line summary of the job
  - job_description: string|null - Full description (optional)
  - total_steps: int - Number of steps in the job
  - steps: list - Array of step objects:
      - id: string - Step identifier
      - name: string - Human-readable step name
      - description: string - What the step does
      - command_name: string - Slash command (e.g., "job_name:step_id")
      - dependencies: list[string]|null - Required prior steps

Note: Gemini uses TOML format with description + prompt fields.
      Commands use colon separator (/job_name:step_id) not period.
#}
# {{ job_name }}
#
# {{ job_summary }}
#
# Generated by DeepWork - do not edit manually

description = "{{ job_summary | replace('"', '\\"') }}"

prompt = """
# {{ job_name }}

**Multi-step workflow**: {{ job_summary }}

> **NOTE**: Gemini CLI requires manual command invocation. After each step, tell the user which command to run next.

{% if job_description %}
{{ job_description }}
{% endif %}

## Available Steps

{% for step in steps %}
{{ loop.index }}. **{{ step.id }}** - {{ step.description }}{% if step.dependencies %} (requires: {{ step.dependencies | join(', ') }}){% endif %}

   Command: `/{{ step.command_name }}`
{% endfor %}

## Execution Instructions

### Step 1: Analyze Intent

Parse any text following `/{{ job_name }}` to determine user intent:
{% for step in steps %}
- "{{ step.id }}" or related terms â†’ start at `/{{ step.command_name }}`
{% endfor %}

### Step 2: Direct User to Starting Step

Tell the user which command to run:
```
/{{ steps[0].command_name }}
```

### Step 3: Guide Through Workflow

After each step completes, tell the user the next command to run until workflow is complete.

### Handling Ambiguous Intent

If user intent is unclear:
- Present available steps as numbered options
- Ask user to select the starting point

## Reference

- Job definition: `.deepwork/jobs/{{ job_name }}/job.yml`
"""
