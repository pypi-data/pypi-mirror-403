{#
Template: skill-job-meta.md.jinja
Purpose: Generates the job overview skill file for Claude Code

Template Variables:
  - job_name: string - Job identifier (e.g., "competitive_research")
  - job_summary: string - Short one-line summary of the job
  - job_description: string|null - Full description (optional)
  - total_steps: int - Number of steps in the job
  - steps: list - Array of step objects:
      - id: string - Step identifier
      - name: string - Human-readable step name
      - description: string - What the step does
      - command_name: string - Slash command (e.g., "job_name.step_id")
      - dependencies: list[string]|null - Required prior steps
#}
---
name: {{ job_name }}
description: "{{ job_summary }}"
---

# {{ job_name }}

**Multi-step workflow**: {{ job_summary }}

> **CRITICAL**: Always invoke steps using the Skill tool. Never copy/paste step instructions directly.

{% if job_description %}
{{ job_description }}
{% endif %}

## Available Steps

{% for step in steps %}
{{ loop.index }}. **{{ step.id }}** - {{ step.description }}{% if step.dependencies %} (requires: {{ step.dependencies | join(', ') }}){% endif %}

{% endfor %}

## Execution Instructions

### Step 1: Analyze Intent

Parse any text following `/{{ job_name }}` to determine user intent:
{% for step in steps %}
- "{{ step.id }}" or related terms â†’ start at `{{ step.command_name }}`
{% endfor %}

### Step 2: Invoke Starting Step

Use the Skill tool to invoke the identified starting step:
```
Skill tool: {{ steps[0].command_name }}
```

### Step 3: Continue Workflow Automatically

After each step completes:
1. Check if there's a next step in the sequence
2. Invoke the next step using the Skill tool
3. Repeat until workflow is complete or user intervenes

### Handling Ambiguous Intent

If user intent is unclear, use AskUserQuestion to clarify:
- Present available steps as numbered options
- Let user select the starting point

## Guardrails

- Do NOT copy/paste step instructions directly; always use the Skill tool to invoke steps
- Do NOT skip steps in the workflow unless the user explicitly requests it
- Do NOT proceed to the next step if the current step's outputs are incomplete
- Do NOT make assumptions about user intent; ask for clarification when ambiguous

## Context Files

- Job definition: `.deepwork/jobs/{{ job_name }}/job.yml`
