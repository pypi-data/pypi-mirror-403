# Paude proxy configuration
# Allowlist for Google Cloud / Vertex AI access only

# Basic settings
http_port 3128
access_log none
cache_log /dev/null
cache deny all

# DNS settings
# Use system resolv.conf (populated by podman with working DNS)

# Allowlisted domains for Vertex AI and Google Auth
acl allowed_domains dstdomain .googleapis.com
acl allowed_domains dstdomain .google.com
acl allowed_domains dstdomain accounts.google.com
acl allowed_domains dstdomain oauth2.googleapis.com
acl allowed_domains dstdomain .gstatic.com
acl allowed_domains dstdomain .cloudresourcemanager.googleapis.com

# SSL/CONNECT ports
acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 443
acl CONNECT method CONNECT

# Access rules
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow allowed_domains
http_access deny all

# Security headers
via off
forwarded_for delete
