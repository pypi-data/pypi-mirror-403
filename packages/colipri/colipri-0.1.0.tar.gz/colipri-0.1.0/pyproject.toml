[project]
name = "colipri"
version = "0.1.0"
description = "Vision-language encoder for chest CT scans and reports."
readme = "README.md"
authors = [
    { name = "Microsoft Health Futures", email = "innereyedev@microsoft.com" },
]
requires-python = ">=3.10"
dependencies = [
    "accelerate",
    "dynamic-network-architectures>=0.4.3",
    "huggingface-hub",
    "hydra-core",
    "jaxtyping",
    "safetensors",
    "timm<1.0.23",  # RuntimeError related to position embeddings in 1.0.23
    "torchio>=0.21.1",
    "tqdm",
    "transformers",
    "typer",
]

[project.urls]
Homepage = "https://huggingface.co/microsoft/colipri"
Source = "https://huggingface.co/microsoft/colipri"
"Issue tracker" = "https://huggingface.co/microsoft/colipri/discussions/new"
Documentation = "https://huggingface.co/microsoft/colipri/blob/main/README.md"

[project.optional-dependencies]
demo = [
    "lovely-tensors",
    "matplotlib",
    "scikit-learn",
    "torchinfo",
]

[dependency-groups]
dev = [
    "ipykernel",
    "ipywidgets",
]
types = ["ty"]

[build-system]
requires = ["uv_build"]
build-backend = "uv_build"

[tool.ruff.lint]
# Defaults from https://docs.astral.sh/ruff/linter/#rule-selection
select = [
    # pycodestyle
    "E",
    # Pyflakes
    "F",
    # pyupgrade
    "UP",
    # flake8-bugbear
    "B",
    # flake8-simplify
    "SIM",
    # isort
    "I",
]
ignore = [
    "F722", # https://docs.kidger.site/jaxtyping/faq/#flake8-or-ruff-are-throwing-an-error
]

[tool.ruff.lint.isort]
force-single-line = true
