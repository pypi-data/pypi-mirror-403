[project]
name = "kiko"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
authors = [
    { name = "crlotwhite", email = "crlotwhite@gmail.com" }
]
requires-python = ">=3.12"
dependencies = [
    "jsonlines>=4.0.0",
    "prompt-toolkit>=3.0.52",
    "rich>=14.2.0",
    "typer>=0.21.1",
]
license = "Apache-2.0"
license-files = ["LICEN[CS]E*"]

[project.scripts]
kiko = "kiko.cli:cli"

[build-system]
requires = ["uv_build>=0.9.15,<0.10.0"]
build-backend = "uv_build"

[dependency-groups]
dev = [
    "ruff>=0.14.14",
    "mypy>=1.10",
]

[tool.ruff]
target-version = "py312"

# Google Python Style Guide: 기본 80 columns
line-length = 80

# (선택) 자주 제외하는 경로
extend-exclude = [
  ".venv",
  "build",
  "dist",
]

[tool.ruff.lint]
select = [
  "E",    # pycodestyle errors
  "W",    # pycodestyle warnings (공백/줄바꿈 등)
  "F",    # Pyflakes (미사용 import/변수 등)
  "I",    # import 정렬 (isort 대체)
  "UP",   # pyupgrade
  "B",    # flake8-bugbear
  "C4",   # 컴프리헨션 개선
  "ARG",  # 미사용 인자
  "N",    # pep8-naming (Google naming과 결이 비슷함)
  "D",    # pydocstyle (Google docstring 규칙 적용)
  "RUF022",
  "DOC",
]
preview = true

ignore = [
  # formatter(ruff format)와 충돌/중복되는 항목은 보통 무시
  "E501",  # 라인 길이는 formatter가 처리하도록(단, 아래 안내 참고)
  "E203",  # formatter와 충돌 가능
]

# (추천) __init__.py에서는 re-export 때문에 F401(미사용 import)을 허용하는 경우가 많음
[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401"]

# Google 스타일의 import 구분(표준/서드파티/로컬)을 명확히.
[tool.ruff.lint.isort]
known-first-party = ["kiko"]

# Google-style docstring 규칙 활성화
[tool.ruff.lint.pydocstyle]
convention = "google"

[tool.ruff.format]
# Google 스타일: 문자열은 보통 single quotes 선호
quote-style = "single"
indent-style = "space"
skip-magic-trailing-comma = false

# docstring 안의 코드 블록도 포맷
docstring-code-format = true
docstring-code-line-length = 80

[tool.mypy]
python_version = "3.12"
files = ["src"]
warn_unused_configs = true
warn_redundant_casts = true
warn_unused_ignores = true
show_error_codes = true
pretty = true
ignore_missing_imports = true
