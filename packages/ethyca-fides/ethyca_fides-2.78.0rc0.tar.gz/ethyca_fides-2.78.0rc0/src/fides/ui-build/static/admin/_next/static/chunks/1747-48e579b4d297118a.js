(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1747],{77213:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var i=t(24246),s=t(36010),a=t(88038),r=t.n(a),o=t(86677);t(27378);var l=t(25980),c=t(90867),d=t(42478),u=t(77830),g=()=>{let e=(0,o.useRouter)();return(0,i.jsx)(s.TJV,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(s.TJV,{children:[(0,i.jsxs)(s.EO$,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(s.Bjg,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(s.zxk,{onClick:()=>{e.push(u.AD)},children:"Configure"})]}),(0,i.jsxs)(s.Bjg,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=e=>{let{children:n,title:t,padded:a=!0,mainProps:u}=e,m=(0,l.hz)(),f=(0,o.useRouter)(),p="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,h=!(m.flags.messagingConfiguration&&p),{data:v}=(0,d.JE)(void 0,{skip:h}),{data:x}=(0,c.PW)(void 0,{skip:h}),y=m.flags.messagingConfiguration&&(!v||!x)&&p;return(0,i.jsxs)(s.ad9,{"data-testid":t,direction:"column",h:"100vh",children:[(0,i.jsxs)(r(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(s.ad9,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...u,children:[y?(0,i.jsx)(g,{}):null,n]})]})}},54762:function(e,n,t){"use strict";t.d(n,{l:function(){return o}});var i=t(24246),s=t(36010),a=t(62165),r=t(60240);let o=e=>{let{consentStatus:n}=e,{flags:t}=(0,a.hz)(),{assetConsentStatusLabels:o}=t;return o&&(null==n?void 0:n.status)===r.pF.ALERT?(0,i.jsx)(s.ua7,{title:null==n?void 0:n.message,"data-testid":"discovery-status-icon-alert-tooltip",children:(0,i.jsx)("div",{className:"mb-px","data-testid":"discovery-status-icon-alert",children:(0,i.jsx)(s.PJP.OdJ,{style:{color:"var(--fidesui-error)"}})})}):null}},42478:function(e,n,t){"use strict";t.d(n,{FU:function(){return c},JE:function(){return s},Ki:function(){return u},SU:function(){return g},W:function(){return m},h9:function(){return a},jc:function(){return i},qt:function(){return l},sn:function(){return d}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:s,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:r,useGetMessagingConfigurationDetailsQuery:o,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:c,useUpdateMessagingConfigurationByKeyMutation:d,useUpdateMessagingConfigurationSecretsByKeyMutation:u,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:m}=t(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,n,t,i)=>{let s=await i({url:"messaging/default/active"});return s.error&&404===s.error.status?{data:null}:s},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})},80363:function(e,n,t){"use strict";t.r(n),t.d(n,{ROOT_ACTION_CENTER_CONFIG:function(){return et},default:function(){return ei}});var i=t(24246),s=t(59849),a=t(25980),r=t(77830),o=t(37059),l=t(9431),c=t(15878),d=t(36010),u=t(27378),g=t(16134),m=t(91317),f=t(9270),p=t(49744),h=t(62080),v=t(79894),x=t.n(v),y=t(16125),j=t(1315);let C=()=>{var e,n,t,s;let a=(0,y.v9)(m.dy),{data:o}=(0,j.xF)((null==a?void 0:a.id)?{data_stewards:[a.username],page:1,size:3}:h.CN),l=(null!==(t=null==o?void 0:o.total)&&void 0!==t?t:0)-((null==o?void 0:null===(e=o.items)||void 0===e?void 0:e.length)||0),[c,u]=function(e){var n;let[t,i]=(n=Math.max(e.length-1,1),[e.toSpliced(n,e.length),e.toSpliced(0,n)]);return[t,i[0]]}([...null!==(s=null==o?void 0:null===(n=o.items)||void 0===n?void 0:n.map(e=>{let{name:n}=e;return n}))&&void 0!==s?s:[],...l>0?["".concat(l," more.")]:[]]);return(0,i.jsx)(d.HYy,{image:(0,i.jsxs)(d.kCb,{align:"center",justify:"center",children:[(0,i.jsxs)("div",{className:"size-20",children:[(0,i.jsxs)(d.X2j,{align:"middle",justify:"center",children:[(0,i.jsx)(d.JXS,{span:8}),(0,i.jsx)(d.JXS,{span:8,children:(0,i.jsx)(d.Eep,{rootClassName:"flex",src:"/images/connector-logos/bigquery.svg",preview:!1,alt:""})}),(0,i.jsx)(d.JXS,{span:8})]}),(0,i.jsxs)(d.X2j,{align:"middle",justify:"center",children:[(0,i.jsx)(d.JXS,{span:8,children:(0,i.jsx)(d.Eep,{rootClassName:"flex",src:"/images/connector-logos/okta.svg",preview:!1,alt:""})}),(0,i.jsx)(d.JXS,{span:8}),(0,i.jsx)(d.JXS,{span:8,children:(0,i.jsx)(d.Eep,{rootClassName:"flex",src:"/images/connector-logos/snowflake.svg",preview:!1,alt:""})})]}),(0,i.jsxs)(d.X2j,{align:"middle",justify:"center",children:[(0,i.jsx)(d.JXS,{span:8}),(0,i.jsx)(d.JXS,{span:8,children:(0,i.jsx)(d.Eep,{rootClassName:"flex",src:"/images/connector-logos/generic.svg",preview:!1,alt:""})}),(0,i.jsx)(d.JXS,{span:8})]})]}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(d.Eep,{rootClassName:"flex",src:"/images/service.svg",preview:!1,alt:""}),(0,i.jsx)("div",{className:"absolute left-0 top-0 size-full",children:(0,i.jsx)(d.kCb,{className:"h-full",justify:"center",align:"center",children:(0,i.jsx)(d.xvT,{children:"Monitors"})})})]}),(0,i.jsx)("div",{children:d.HYy.PRESENTED_IMAGE_SIMPLE})]}),description:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Dxz,{children:"Nothing To Review"}),(0,i.jsxs)(d.nvN,{children:["You’re a steward on systems that currently have no active monitor results.",(0,i.jsx)("br",{}),"When monitors detect changes in those systems, they’ll appear here automatically."]}),c.length>0&&(0,i.jsx)(d.nvN,{children:"You’re a steward on the following systems: ".concat([c.join(", "),...u?[u]:[]].join(", and "))})]}),children:(0,i.jsx)(x(),{href:r.So,passHref:!0,legacyBehavior:!0,children:(0,i.jsx)(d.zxk,{type:"primary",children:"View inventory"})})})};var w=t(40431),T=e=>{let{queryState:n,initialValues:t,translate:i}=e,[s,a]=(0,w.XI)(n,{history:"push"}),[r]=d.l09.useForm();return{form:r,onFieldsChange:()=>r.submit(),onFinish:e=>{a(Object.fromEntries(Object.entries(e).map(e=>{let[n,t]=e;return[n,void 0===t?"":t]})))},initialValues:{...t,...s},requestData:i(s)}},b=t(40262),E=t(3124),_=t.n(E),S=t(16394),N=t(41337),k=t(83158),I=t(9110),M=t(62678),R=t(31883),O=t(99824),A=t(99089),q=t(63537);let D=e=>{let n=(0,d.ddY)(),[t]=(0,A.rL)(),i=(0,d.UD8)();return{confirmAll:async(s,a)=>{let r=M.FieldActionType.PROMOTE,o=Date.now();if(!await n.confirm((0,q.nB)(O.Me[r],O.e_[r](a))))return;i.open({key:o,type:"loading",content:"".concat(O.T0[r]," ").concat(a," ").concat((0,S._6)(a,"field","fields"),"..."),duration:0});let l=await t({query:{confidence_bucket:[s]},path:{monitor_config_id:e,action_type:r},body:{excluded_resource_urns:[]}});if((0,R.D4)(l)){i.open({key:o,type:"error",content:(0,q.v_)(r),duration:5});return}i.open({key:o,type:"success",content:"".concat(a," ").concat((0,S._6)(a,"field","fields")," approved — stronger governance, less busywork."),duration:10})}}},F=e=>{let{item:n,reviewHref:t,onConfirmAll:s}=e,a=[(0,i.jsx)(x(),{href:{pathname:t,query:{confidenceBucket:n.severity}},passHref:!0,children:(0,i.jsx)(d.zxk,{type:"text",size:"small",icon:(0,i.jsx)(d.PJP.ejL,{}),"aria-label":"Review ".concat(n.label," fields"),children:"Review"})},n.label)];return n.severity===k.$.HIGH&&s&&a.push((0,i.jsx)(d.zxk,{type:"text",size:"small",icon:(0,i.jsx)(d.PJP.WzW,{}),"aria-label":"Approve all ".concat(n.label," fields"),onClick:s,children:"Approve"},"confirm")),a},z=e=>{let{item:n,reviewHref:t,monitorId:s}=e,a=(0,q.Oq)(n.severity),{confirmAll:r}=D(s);return(0,i.jsx)(d.Zbd,{size:"small",styles:{body:{display:"none"}},title:(0,i.jsxs)(d.TaI,{children:[(0,i.jsx)(d.qEK,{size:24,icon:(0,i.jsx)(d.QMR,{color:"black"})}),(0,i.jsxs)(d.xvT,{type:"secondary",className:"font-normal",children:[(0,S.pF)(n.count)," ",(0,S._6)(n.count,"field","fields")]}),(0,i.jsx)(d.xvT,{children:n.label}),a&&(0,i.jsx)(I.D,{severity:a,format:()=>null})]}),actions:F({item:n,reviewHref:t,onConfirmAll:()=>{r(n.severity,n.count)}})})};var P=t(98145);let J=e=>{let{confidenceCounts:n,reviewHref:t,monitorId:s,...a}=e,r=(0,u.useMemo)(()=>[{label:P.bI.HIGH,count:n.highConfidenceCount,severity:k.$.HIGH},{label:P.bI.MEDIUM,count:n.mediumConfidenceCount,severity:k.$.MEDIUM},{label:P.bI.LOW,count:n.lowConfidenceCount,severity:k.$.LOW}].filter(e=>e.count>0),[n]);return(0,i.jsx)(d.nxd,{dataSource:r,itemKey:e=>e.severity,columns:3,gutter:4,renderItem:e=>(0,i.jsx)(z,{item:e,reviewHref:t,monitorId:s}),...a})};var U=t(54762),H=t(42905),X=t.n(H);let B=(e,n)=>{let t=P.v8.get(e);return t?(0,S._6)(n,t[0],t[1]):e},W=e=>{let{updates:n,isAssetList:t}=e,s=(0,u.useMemo)(()=>n?Object.entries(n).filter(e=>{let[n,t]=e;return null!==t&&t>0&&!P.EP.includes(n)}).sort((e,n)=>{let t=P.H6.indexOf(e[0]),i=P.H6.indexOf(n[0]);return -1===t&&-1===i?0:-1===t?1:-1===i?-1:t-i}).map(e=>{let[n,t]=e;return"".concat((0,S.pF)(null!=t?t:0)," ").concat(B(n,null!=t?t:0))}):[],[n]);if(!n)return null;if(t){let e=s.join(", ");return(0,i.jsxs)("span",{children:[e," detected."]})}let a=s.join(", ");return(0,i.jsx)("span",{children:a})};var V=t(71985);let{Text:L}=d.Typography,K={[V.w.WEBSITE]:["asset","assets"],[V.w.DATASTORE]:["field","fields"],[V.w.INFRASTRUCTURE]:["system","systems"]},Y=e=>{let n,{monitorSummary:t,href:s,...r}=e,{flags:o}=(0,a.hz)(),{heliosV2:l}=o,{name:c,consent_status:g,total_updates:m,updates:f,last_monitored:p,secrets:h,key:v,connection_type:y,saas_config:j,monitorType:C,isTestMonitor:w,stewards:T}=t;if(C===V.w.DATASTORE){var E,k,I;n={highConfidenceCount:null!==(E=null==f?void 0:f.classified_high_confidence)&&void 0!==E?E:0,mediumConfidenceCount:null!==(k=null==f?void 0:f.classified_medium_confidence)&&void 0!==k?k:0,lowConfidenceCount:null!==(I=null==f?void 0:f.classified_low_confidence)&&void 0!==I?I:0}}let[M,R]=(0,u.useState)(!1),O=!!n&&(n.highConfidenceCount>0||n.mediumConfidenceCount>0||n.lowConfidenceCount>0),A=C===V.w.DATASTORE&&O&&!!v,q=p?(0,S.p6)(new Date(p)):void 0,D=p?(0,b.H)(new Date(p),new Date,{addSuffix:!0}):void 0,F=(0,S._6)(null!=m?m:0,K[C][0],K[C][1]);return(0,i.jsx)(d.aVo.Item,{"data-testid":"monitor-result-".concat(v),...r,children:(0,i.jsxs)(d.kCb,{vertical:!0,className:"grow",children:[(0,i.jsxs)(d.X2j,{gutter:{xs:6,lg:12},className:"items-center",children:[(0,i.jsx)(d.JXS,{span:l?14:17,children:(0,i.jsx)(d.aVo.Item.Meta,{avatar:(0,i.jsx)(N.ZP,{data:{kind:N.hY.CONNECTION,connectionType:y,name:c,key:v,saasType:null==j?void 0:j.type,websiteUrl:null==h?void 0:h.url}}),title:(0,i.jsxs)(d.kCb,{align:"center",gap:4,className:X()["monitor-result__title"],children:[(0,i.jsx)(x(),{href:s,"data-testid":"monitor-link",children:c}),(0,i.jsxs)(L,{type:"secondary",children:[(0,S.pF)(null!=m?m:0)," ",F]}),g&&(0,i.jsx)(U.l,{consentStatus:g}),w&&(0,i.jsx)(d.Vp9,{color:"nectar",children:"test monitor"})]}),description:!!f&&(0,i.jsx)(W,{updates:f,isAssetList:C===V.w.WEBSITE})})}),(0,i.jsx)(d.JXS,{span:2,className:"flex justify-end",children:!!T&&(0,i.jsx)(d.qEK.Group,{max:{count:5,style:{background:_().FIDESUI_NEUTRAL_700}},children:T.map(e=>{var n,t;return(0,i.jsx)(d.ua7,{title:(0,S.gJ)(e),children:(0,i.jsxs)(d.qEK,{style:{background:_().FIDESUI_MINOS},children:[null===(n=e.first_name)||void 0===n?void 0:n.charAt(0),null===(t=e.last_name)||void 0===t?void 0:t.charAt(0)]})},e.id)})})}),(0,i.jsx)(d.JXS,{span:3,className:"flex justify-end",children:!!D&&(0,i.jsx)(d.ua7,{title:q,children:(0,i.jsxs)(L,{type:"secondary","data-testid":"monitor-date",children:[(0,i.jsx)("span",{className:"hidden lg:inline",children:"Last scan: "}),D]})})}),(0,i.jsxs)(d.JXS,{span:l?5:2,className:"flex items-center justify-end",children:[l&&A&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.zxk,{type:"link",className:"p-0",icon:(0,i.jsx)(d.CHo,{isOpen:M}),iconPosition:"end",onClick:()=>R(!M),"aria-haspopup":"true","aria-expanded":M,"aria-controls":"confidence-row-".concat(v),"aria-label":"".concat(M?"Collapse":"Expand"," findings"),children:(0,i.jsxs)(d.TaI,{children:[(0,i.jsx)(d.QMR,{}),"Findings"]})}),(0,i.jsx)(d.izJ,{type:"vertical",orientationMargin:0})]}),(0,i.jsx)(x(),{href:s,passHref:!0,legacyBehavior:!0,children:(0,i.jsx)(d.zxk,{type:"link",className:"p-0","data-testid":"review-button-".concat(t.key),children:"Review"})},"review")]})]}),l&&A&&n&&(0,i.jsx)(d.RrR,{isExpanded:M,motionKey:"confidence-row-".concat(v),children:(0,i.jsx)(J,{confidenceCounts:n,reviewHref:s,monitorId:v,className:"mt-6",id:"confidence-row-".concat(v)})})]})})};var G=t(26917),Z=t(31793);let $={[V.w.DATASTORE]:"Data store monitors",[V.w.WEBSITE]:"Website monitors",[V.w.INFRASTRUCTURE]:"Infrastructure monitors"};var Q=e=>{let{form:n,availableMonitorTypes:t,...s}=e,{data:a,isLoading:r}=(0,Z.wv)({page:1,size:100,include_external:!1,exclude_approvers:!0}),o=((null==a?void 0:a.items)||[]).map(e=>({label:(0,S.gJ)(e),value:e.id}));return(0,i.jsxs)(d.l09,{form:n,...s,layout:"inline",className:"flex grow gap-4",children:[(0,i.jsx)(d.kCb,{className:"grow justify-between self-stretch",children:(0,i.jsx)(d.l09.Item,{name:"search",className:"self-end",children:(0,i.jsx)(G.Z,{})})}),(0,i.jsx)(d.l09.Item,{name:"monitor_type",className:"self-end",children:(0,i.jsx)(d.PhF,{options:t.map(e=>({value:e,label:$[e]})),className:"w-auto min-w-[200px]",placeholder:"Monitor type",allowClear:!0,"data-testid":"monitor-type-filter","aria-label":"Filter by monitor type"})}),(0,i.jsx)(d.l09.Item,{name:"steward_key",className:"self-end",children:(0,i.jsx)(d.PhF,{options:o,loading:r,popupMatchSelectWidth:!0,placeholder:"Data steward",allowClear:!0,"aria-label":"Filter by data steward",className:"min-w-[220px]"})})]})};let ee=(e,n)=>({search:w.Oi.withDefault(""),monitor_type:(0,w.jx)(e),steward_key:n?w.Oi.withDefault(n).withOptions({clearOnDefault:!1}):w.Oi});var en=()=>{var e,n,t,s;let l=(0,d.p8r)(),{flags:{webMonitor:c,heliosV2:h,oktaMonitor:v}}=(0,a.hz)(),{paginationProps:x,pageIndex:y,pageSize:j,resetPagination:w}=(0,f.S)(),b=[...c?[V.w.WEBSITE]:[],...h?[V.w.DATASTORE]:[],...v?[V.w.INFRASTRUCTURE]:[]],E=(0,g.C)(m.dy),{requestData:_,...S}=T({queryState:ee([...b],(null==E?void 0:E.isRootUser)?void 0:null==E?void 0:E.id),initialValues:{steward_key:(null==E?void 0:E.isRootUser)?null:null!==(s=null==E?void 0:E.id)&&void 0!==s?s:null},translate:e=>{let{steward_key:n,search:t,monitor_type:i}=e;return{search:t||void 0,monitor_type:i?[i]:void 0,steward_user_id:void 0!==n&&n?[n]:[]}}}),{data:N,isError:k,isLoading:I}=(0,o.Ud)({..."object"==typeof _?_:{},page:y,size:j});(0,u.useEffect)(()=>{k&&l({title:"Error fetching data",description:"Please try again later",status:"error"})},[k,l]);let M=(null==N?void 0:null===(e=N.items)||void 0===e?void 0:e.flatMap(e=>e.key&&void 0!==e.key?[e]:[]))||[];return c||h||v?(0,i.jsxs)(d.kCb,{className:"h-[calc(100%-48px)] overflow-hidden",gap:"middle",vertical:!0,children:[(0,i.jsx)(Q,{...S,onFieldsChange:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];w(),S.onFieldsChange(...n)},availableMonitorTypes:b}),(0,i.jsx)(d.aVo,{loading:I,dataSource:M,locale:{emptyText:(0,i.jsx)(C,{})},className:"h-full overflow-y-auto overflow-x-clip",renderItem:e=>{let n=e.key&&e.monitorType?"".concat(r.vi,"/").concat(e.monitorType,"/").concat(e.key):"";return!!(null==e?void 0:e.key)&&(0,i.jsx)(Y,{monitorSummary:e,href:n},e.key)}}),(0,i.jsx)(d.tlE,{...x,total:(null==N?void 0:N.total)||0,showSizeChanger:{suffixIcon:(0,i.jsx)(d.PJP._ME,{})},hideOnSinglePage:(null===(n=x.pageSize)||void 0===n?void 0:n.toString())===(null===(t=x.pageSizeOptions)||void 0===t?void 0:t[0])})]}):(0,i.jsx)(p.n,{})};let et={[c.em.ACTIVITY]:r.Bp,[c.em.ATTENTION_REQUIRED]:r.vi};var ei=()=>{let{flags:e}=(0,a.hz)(),{webMonitor:n,heliosV2:t}=e,r=[...n?[V.w.WEBSITE]:[],...t?[V.w.DATASTORE]:[]],{error:c}=(0,o.Ud)({page:1,size:20,monitor_type:r.length>0?r:void 0});return c?(0,i.jsx)(s.Z,{error:c,defaultMessage:"A problem occurred while fetching your monitor results"}):(0,i.jsx)(l.Z,{routeConfig:et,children:(0,i.jsx)(en,{})})}},42905:function(e){e.exports={"monitor-result__title":"MonitorResult_monitor-result__title__Wqv_l"}}}]);