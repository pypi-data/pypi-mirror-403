[build-system]
requires = ["setuptools>=69", "setuptools_scm[toml]>=7.0", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "pythtb"
dynamic = ["version"]
description = "Python library for constructing and analyzing tight-binding models."
readme = { file = "README.md", content-type = "text/markdown" } 
requires-python = ">=3.12"
authors = [
  { name = "Trey Cole", email = "trey@treycole.me" },
  { name = "Sinisa Coh", email = "sinisacoh@gmail.com" },
  { name = "David Vanderbilt", email = "dhv@physics.rutgers.edu" }
]
maintainers = [
  { name = "Trey Cole", email = "trey@treycole.me" },
  { name = "David Vanderbilt", email = "dhv@physics.rutgers.edu" }
]
license = "GPL-3.0-or-later"
license-files = ["LICENSE"] 
keywords = ["physics", "tight binding", "solid state physics", "condensed matter physics", "materials science"]
classifiers = [
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.12",
  "Programming Language :: Python :: 3.13",
  "Operating System :: OS Independent",
  "Intended Audience :: Science/Research",
  "Topic :: Scientific/Engineering :: Physics",
]
dependencies = [
  "numpy>=2.0",
  "matplotlib>=3.9"
]

[project.optional-dependencies]
docs = [
  "sphinx",
  "pydata-sphinx-theme",
  "sphinx-copybutton",
  "myst-nb",
  "sphinxcontrib-programoutput",
  "nbconvert",
  "sphinx-design",
  "sphinx-gallery",
  "numpydoc",
  "sphinx-togglebutton",
  "sphinx-notfound-page"
]
tests = ["pytest"]
dev = [
  "pytest",
  "black",
  "pre-commit",
  "ruff",
  "nbstripout",
] 
plotting = [
  "plotly",
]
speedup = [
  "tensorflow"
]
notebooks = [
  "jupyter",
  "jupyterlab",
  "notebook>=7.0",
  "ipykernel",
  "ipython>=8.17",
]

[project.urls]
homepage = "https://www.physics.rutgers.edu/pythtb/"
documentation = "https://pythtb.readthedocs.io/en/latest/"
source = "https://github.com/pythtb/pythtb"
issues = "https://github.com/pythtb/pythtb/issues"
changelog = "https://github.com/pythtb/pythtb/blob/main/CHANGELOG.md"

[tool.setuptools_scm]
version_scheme = "guess-next-dev"
local_scheme = "no-local-version"
fallback_version = "0.0.0"

[tool.setuptools.packages.find]
where = ["."]
include = ["pythtb*"]
exclude = ["tests*", "docs*"]

[tool.pytest.ini_options]
minversion = "7.0"
testpaths = ["tests"]

[tool.ruff]
extend-exclude = [
  "docs/v1.8.0/**",
  "docs/source/examples/**",
  "docs/source/examples_py/**",
  "docs/.jupyter_cache/**",
]

[tool.ruff.lint.extend-per-file-ignores]
"pythtb/__init__.py" = ["E402", "F403"]
"tests/test_examples/**.py" = ["F403", "F405"]
"tests/test_visualize/**.py" = ["F403", "F405"]
"tests/test_w90/**.py" = ["F403", "F405"]
