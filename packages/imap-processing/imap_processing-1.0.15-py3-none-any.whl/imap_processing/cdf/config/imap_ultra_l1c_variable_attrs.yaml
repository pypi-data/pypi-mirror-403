float_32_fillval: &float_32_fillval -1.0e31
min_int: &min_int -9223372036854775808
max_int: &max_int 9223372036854775807
min_float: &min_float -3.4028235e+38
max_float: &max_float 3.4028235e+38

default_attrs: &default
  # Assumed values for all variable attrs unless overwritten
  DEPEND_0: epoch
  DISPLAY_TYPE: time_series
  FILLVAL: *min_int
  FORMAT: I12
  VALIDMIN: *min_int
  VALIDMAX: *max_int
  VAR_TYPE: data
  UNITS: " "

default_float32_attrs: &default_float32
  <<: *default
  FILLVAL: *float_32_fillval
  FORMAT: F12.6
  VALIDMIN: *min_float
  VALIDMAX: *max_float
  dtype: float32

default_uint16_attrs: &default_uint16
  <<: *default
  FILLVAL: 65535
  FORMAT: I5
  VALIDMIN: 0
  VALIDMAX: 65535
  dtype: uint16

energy_dependent_attrs: &energy_dependent
  <<: *default_float32
  DEPEND_1: energy_bin_geometric_mean
  DEPEND_2: pixel_index

latitude:
  <<: *default_float32
  CATDESC: Latitude bin center corresponding to healpix index with range [-90, 90].
  DEPEND_1: pixel_index
  FIELDNAM: latitude
  LABLAXIS: latitude
  UNITS: degrees

longitude:
  <<: *default_float32
  CATDESC: Longitude bin center corresponding to healpix index with range [0, 360].
  DEPEND_1: pixel_index
  FIELDNAM: longitude
  LABLAXIS: longitude
  UNITS: degrees

species_bin:
  <<: *default
  CATDESC: Species bin defined by central location.
  FIELDNAM: species_bin
  LABLAXIS: species bin
  # TODO: come back to format
  UNITS: " "

dead_time_ratio:
  <<: *default_float32
  CATDESC: Dead time correction ratios for each spin phase step (1ms resolution).
  DEPEND_1: spin_phase_step
  FIELDNAM: dead_time_ratios
  LABLAXIS: Dead Time Ratio
  UNITS: " "
  VALIDMIN: 0.0

sensitivity:
  <<: *energy_dependent
  CATDESC: Averaged instrument sensitive area.
  FIELDNAM: sensitivity
  LABLAXIS: sensitivity
  # TODO: come back to format
  UNITS: cm^2

geometric_function:
  <<: *energy_dependent
  CATDESC: Averaged aperture area as seen by the backstop.
  FIELDNAM: geometric_function
  LABLAXIS: Geometric Factor
  UNITS: cm^2
  VALIDMIN: 0.0

efficiency:
  <<: *energy_dependent
  CATDESC: Efficiency of the instrument in converting ENAs to valid events.
  FIELDNAM: efficiency
  LABLAXIS: Efficiency
  UNITS: " "
  VALIDMIN: 0.0
  VALIDMAX: 1.0

exposure_factor:
  <<: *energy_dependent
  DEPEND_0: epoch
  CATDESC: Exposure time with the deadtime correction applied for a pointing.
  FIELDNAM: exposure_factor
  LABLAXIS: exposure factor
  # TODO: come back to format
  UNITS: seconds

helio_exposure_factor:
  <<: *energy_dependent
  CATDESC: Exposure time with the deadtime correction applied for a pointing.
  FIELDNAM: exposure_factor
  LABLAXIS: exposure factor
  DEPEND_0: epoch
  # TODO: come back to format
  UNITS: seconds

scatter_theta:
  <<: *energy_dependent
  CATDESC: Scattering theta values for a pointing (reported as gaussian uncertainty).
  FIELDNAM: scatter_theta
  LABLAXIS: scatter theta
  UNITS: degrees

scatter_phi:
  <<: *energy_dependent
  CATDESC: Scattering phi values for a pointing (reported as gaussian uncertainty).
  FIELDNAM: scatter_phi
  LABLAXIS: scatter phi
  UNITS: degrees

scatter_threshold:
  <<: *energy_dependent
  CATDESC: Scattering threshold values for each energy bin for a pointing.
  FIELDNAM: scatter_threshold
  LABLAXIS: scatter threshold
  UNITS: degrees

counts:
  <<: *default
  CATDESC: Counts for a spin.
  DEPEND_1: energy_bin_geometric_mean
  DEPEND_2: pixel_index
  FIELDNAM: counts
  LABLAXIS: counts
  # TODO: come back to format
  UNITS: counts


quality_flags:
  <<: *default_uint16
  CATDESC: Spin filter derived from Ultra ena rates. Bitwise flagging used to filter the spin.
  FIELDNAM: quality_ena_rates
  LABLAXIS: quality_ena_rates
  DEPEND_0: epoch
  DEPEND_1: spin_number
  DEPEND_2: energy_bin_geometric_mean
  UNITS: " "

background_rates:
  <<: *default_float32
  CATDESC: Background rates. Background dominated by accidentals caused by a combination of UV light and misregistered low energy ENA events.
  FIELDNAM: background_rates
  LABLAXIS: background rates
  # TODO: come back to format
  UNITS: counts/second

sid:
  <<: *default
  CATDESC: Science ID (always totals 8).
  FIELDNAM: sid
  LABLAXIS: sid
  # TODO: come back to format
  UNITS: " "

shcoarse:
  <<: *default
  CATDESC: CCSDS packet timestamp.
  FIELDNAM: shcoarse
  LABLAXIS: shcoarse
  # TODO: come back to format
  UNITS: seconds

epoch_delta:
  <<: *default
  CATDESC: Number of nanoseconds in spacecraft pointing covered by this pointing set product
  FIELDNAM: epoch delta
  UNITS: ns
  VAR_TYPE: support_data
  DISPLAY_TYPE: no_plot
  TIME_SCALE: Terrestrial Time
  SCALE_TYPE: linear
  FORMAT: I20
  dtype: int64

energy_bin_delta:
  <<: *default_float32
  CATDESC: Difference between the energy bin edges.
  DEPEND_1: energy_bin_geometric_mean
  FIELDNAM: energy_bin_delta
  LABLAXIS: energy bin delta
  UNITS: keV

energy_delta_minus:
  <<: *default_float32
  VAR_TYPE: support_data
  CATDESC: Difference between the energy bin center and lower edge.
  LABLAXIS: energy
  UNITS: KeV
  FIELDNAM: energy_bin_delta_minus
  DISPLAY_TYPE: no_plot
  DEPEND_1: energy_bin_geometric_mean

energy_delta_plus:
  <<: *default_float32
  VAR_TYPE: support_data
  CATDESC: Difference between the energy bin center and upper edge.
  LABLAXIS: energy
  UNITS: KeV
  FIELDNAM: energy_bin_delta_plus
  DISPLAY_TYPE: no_plot
  DEPEND_1: energy_bin_geometric_mean


# COORDS
energy_bin_geometric_mean:
  FILLVAL: *float_32_fillval
  CATDESC: Geometric mean energy of each energy bin.
  DISPLAY_TYPE: no_plot
  FIELDNAM: energy_bin_geometric_mean
  FORMAT: F12.6
  LABLAXIS: Energy
  UNITS: keV
  VALIDMIN: *min_float
  VALIDMAX: *max_float
  VAR_TYPE: support_data

pixel_index:
  FILLVAL: *min_int
  CATDESC: HEALPix pixel index.
  DISPLAY_TYPE: no_plot
  FIELDNAM: pixel_index
  FORMAT: I12
  LABLAXIS: Pixel Index
  UNITS: " "
  VALIDMIN: *min_int
  VALIDMAX: *max_int
  VAR_TYPE: support_data

spin_phase_step:
  FILLVAL: *min_int
  CATDESC: Spin phase step index (1ms resolution).
  DISPLAY_TYPE: no_plot
  FIELDNAM: spin_phase_step
  FORMAT: I12
  LABLAXIS: Spin Phase Step
  UNITS: " "
  VALIDMIN: *min_int
  VALIDMAX: *max_int
  VAR_TYPE: support_data