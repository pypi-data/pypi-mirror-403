Metadata-Version: 2.4
Name: validkit-py
Version: 1.0.1
Summary: A simple and powerful validation library for Python.
Project-URL: Homepage, https://github.com/disnana/ValidKit
Author: disnana
License: MIT
License-File: LICENSE
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.9
Description-Content-Type: text/markdown

# ValidKit

[![CI](https://github.com/disnana/ValidKit/actions/workflows/ci.yml/badge.svg)](https://github.com/disnana/ValidKit/actions/workflows/ci.yml)
[![PyPI](https://img.shields.io/pypi/v/validkit-py?label=PyPI)](https://pypi.org/project/validkit-py/)
[![License: MIT](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

ValidKit ã¯ã€**è¾æ›¸ãƒ™ãƒ¼ã‚¹ã§ç°¡æ½”ã«å®šç¾©ã§ãã€æ—¥æœ¬èªã‚­ãƒ¼ã‚„è¤‡é›‘ãªãƒã‚¹ãƒˆã«å¯¾å¿œã—ãŸ Python ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**ã§ã™ã€‚Pydantic ã‚ˆã‚Šè»½é‡ã§ã€Discord ãƒœãƒƒãƒˆã®è¨­å®šç®¡ç†ã‚„è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œè¨¼ãªã©ã€å®Ÿç”¨çš„ã‹ã¤å†ç¾æ€§ã®é«˜ã„ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚

---

## ç›®æ¬¡

* [æ¦‚è¦](#æ¦‚è¦)
* [ã‚µãƒ—ãƒ©ã‚¤ãƒã‚§ãƒ¼ãƒ³ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£](#ã‚µãƒ—ãƒ©ã‚¤ãƒã‚§ãƒ¼ãƒ³ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£)
* [å“è³ªç®¡ç†ãƒ»ãƒ†ã‚¹ãƒˆ](#å“è³ªç®¡ç†ãƒ†ã‚¹ãƒˆ)
* [ç‰¹å¾´](#ç‰¹å¾´)
* [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«)
* [ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ](#ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ)
* [API ä¾‹ï¼ˆã‚ˆãä½¿ã†é–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ï¼‰](#api-ä¾‹ã‚ˆãä½¿ã†é–¢æ•°ãƒ¡ã‚½ãƒƒãƒ‰)
* [é«˜åº¦ãªä½¿ã„æ–¹](#é«˜åº¦ãªä½¿ã„æ–¹)

  * [éƒ¨åˆ†æ›´æ–°ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®ãƒãƒ¼ã‚¸](#éƒ¨åˆ†æ›´æ–°ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®ãƒãƒ¼ã‚¸)
  * [ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³](#ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)
  * [SLSA / in-toto provenance ã®æ¤œè¨¼](#slsa--in-toto-provenance-ã®æ¤œè¨¼)
* [CI / ãƒªãƒªãƒ¼ã‚¹ã®èª¬æ˜ï¼ˆç°¡æ½”ï¼‰](#ci--ãƒªãƒªãƒ¼ã‚¹ã®èª¬æ˜ç°¡æ½”)
* [è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](#è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³)
* [ãƒ©ã‚¤ã‚»ãƒ³ã‚¹](#ãƒ©ã‚¤ã‚»ãƒ³ã‚¹)

---

## æ¦‚è¦

ValidKit ã¯ã€**ã‚·ãƒ³ãƒ—ãƒ«ãªè¾æ›¸ã‚¹ã‚­ãƒ¼ãƒ**ã‚’ç”¨ã„ã‚‹ã“ã¨ã§ã€ç´ æ—©ãå …ç‰¢ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œãˆã‚‹ã‚ˆã†è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚ä¸»ãªå¯¾è±¡ã¯è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆYAML/JSONï¼‰ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã€å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼ã§ã™ã€‚

è¨­è¨ˆæ–¹é‡ï¼š

* æœ€å°é™ã®ä¾å­˜ã§é«˜é€Ÿã«å‹•ä½œã™ã‚‹ã“ã¨
* èª­ã¿ã‚„ã™ãç›´æ„Ÿçš„ãªã‚¹ã‚­ãƒ¼ãƒè¨˜è¿°
* æ—¥æœ¬èªã‚­ãƒ¼ã‚„æ··åœ¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¸ã®å¯¾å¿œ
* CI ã«ã‚ˆã‚‹è‡ªå‹•æ¤œè¨¼ãƒ»æ¥æ­´è¨¼æ˜ï¼ˆprovenanceï¼‰ã¨ã®è¦ªå’Œæ€§

---

## ã‚µãƒ—ãƒ©ã‚¤ãƒã‚§ãƒ¼ãƒ³ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ GitHub Actions ãŠã‚ˆã³ PyPI Trusted Publishing ã‚’åˆ©ç”¨ã—ã€ã™ã¹ã¦ã®ãƒªãƒªãƒ¼ã‚¹ã«å¯¾ã—ã¦ **in-toto / SLSA v3 æº–æ‹ ã® provenanceï¼ˆæ¥æ­´è¨¼æ˜ï¼‰** ã‚’å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚

**ãƒã‚¤ãƒ³ãƒˆ**

* PyPI å´ã® `multiple.intoto.jsonl` ã‚’å«ã‚€ attestation ã‚’ç”Ÿæˆãƒ»ä¿å­˜ã—ã¦ã„ã¾ã™ã€‚
* GitHub å´ã§ã¯ SLSA provenanceï¼ˆ`*.intoto.jsonl`ï¼‰ã‚’ç”Ÿæˆã—ã€Release assets ã«æ·»ä»˜ã—ã¦ã„ã¾ã™ã€‚
* ã“ã‚Œã«ã‚ˆã‚Šã€é…å¸ƒç‰©ãŒã€Œã©ã®ã‚³ãƒŸãƒƒãƒˆï¼ã©ã® workflowï¼ã©ã®ç’°å¢ƒã€ã§ä½œã‚‰ã‚ŒãŸã‹ã‚’æ¤œè¨¼ã§ãã¾ã™ã€‚

**æ¤œè¨¼ä¾‹**ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã§æ¤œè¨¼ã™ã‚‹å ´åˆï¼‰

```bash
# slsa-verifier ã‚’ä½¿ã£ãŸä¸€ä¾‹ï¼ˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ï¼‰
# wheel ãƒ•ã‚¡ã‚¤ãƒ«ã¨ provenance ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨ã„ã¦æ¤œè¨¼
slsa-verifier verify-artifact dist/validkit-1.2.3-py3-none-any.whl \
  --provenance multiple.intoto.jsonl \
  --source-uri github.com/disnana/ValidKit
```

â€» å®Ÿé‹ç”¨ã§ã¯ CI ã« `slsa-verifier` ã‚’çµ„ã¿è¾¼ã‚“ã§è‡ªå‹•æ¤œè¨¼ã‚’è¡Œã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚

---

## å“è³ªç®¡ç†ãƒ»ãƒ†ã‚¹ãƒˆ

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä»¥ä¸‹ã‚’ CI ã«ã¦å¿…é ˆåŒ–ã—ã¦ã„ã¾ã™ï¼š

* **Ruff** ã«ã‚ˆã‚‹ lintï¼ˆè‡ªå‹•ä¿®æ­£æ¨å¥¨ï¼‰
* **mypy** ã«ã‚ˆã‚‹é™çš„å‹ãƒã‚§ãƒƒã‚¯
* **pytest** ã«ã‚ˆã‚‹å˜ä½“ãƒ†ã‚¹ãƒˆ

ã“ã‚Œã‚‰ã¯ã™ã¹ã¦ GitHub Actions ã«çµ±åˆã•ã‚Œã€Pull Request / main ãƒ–ãƒ©ãƒ³ãƒã¸ã® push ã®éš›ã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚README ä¸Šéƒ¨ã® CI ãƒãƒƒã‚¸ã‹ã‚‰å®Ÿè¡ŒçŠ¶æ³ã‚’ç¢ºèªã§ãã¾ã™ã€‚

---

## ç‰¹å¾´

* ğŸ“ **è¾æ›¸ãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚­ãƒ¼ãƒ** â€” ã‚¯ãƒ©ã‚¹å®šç¾©ä¸è¦ã§ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢ã«åˆã‚ã›ã¦ãã®ã¾ã¾ã‚¹ã‚­ãƒ¼ãƒåŒ–ã§ãã¾ã™ã€‚
* ğŸŒ **æ—¥æœ¬èªã‚­ãƒ¼å¯¾å¿œ** â€” æ—¥æœ¬èªã®ã‚­ãƒ¼åã‚’æ‰±ãˆã‚‹ãŸã‚ã€ãƒ­ãƒ¼ã‚«ãƒ«å‘ã‘è¨­å®šã‚„æ—¢å­˜ã®æ—¥æœ¬èªãƒ‡ãƒ¼ã‚¿ã¨ã®è¦ªå’Œæ€§ãŒé«˜ã„ã§ã™ã€‚
* ğŸ”— **ãƒã‚§ã‚¤ãƒ³å¯èƒ½ãªãƒãƒªãƒ‡ãƒ¼ã‚¿** â€” `v.int().range(1, 10)` ã®ã‚ˆã†ã«ç›´æ„Ÿçš„ã«è¨˜è¿°ã§ãã¾ã™ã€‚
* ğŸ”„ **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½** â€” å¤ã„å½¢å¼ã®ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œè¨¼ã¨åŒæ™‚ã«å¤‰æ›ã§ãã¾ã™ã€‚
* ğŸ› ï¸ **éƒ¨åˆ†æ›´æ–°ãƒ»ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤** â€” éƒ¨åˆ†çš„ãªæ›´æ–°ï¼ˆpartialï¼‰ã‚„ base ã«ã‚ˆã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ã‚¸ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
* ğŸ” **è©³ç´°ãªã‚¨ãƒ©ãƒ¼åé›†** â€” å…¨ã‚¨ãƒ©ãƒ¼ã‚’ä¸€æ‹¬ã§åé›†ã—ã€ã‚¨ãƒ©ãƒ¼ç®‡æ‰€ã®ãƒ‘ã‚¹ã‚’åˆ†ã‹ã‚Šã‚„ã™ãè¡¨ç¤ºã—ã¾ã™ã€‚

---

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install validkit-py
```

> ç¾æ™‚ç‚¹ã§ã¯ãƒ—ãƒ¬ãƒªãƒªãƒ¼ã‚¹ç‰ˆã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ­£å¼ç‰ˆã¯ PyPI ã®ãƒšãƒ¼ã‚¸ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚

---

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

```python
from validkit import v, validate, ValidationError

SCHEMA = {
    "ãƒ¦ãƒ¼ã‚¶ãƒ¼å": v.str().regex(r"^\w{3,15}$"),
    "ãƒ¬ãƒ™ãƒ«": v.int().range(1, 100),
    "ã‚¹ã‚­ãƒ«": v.list(v.oneof(["ç«", "æ°´", "é¢¨"])),
    "è¨­å®š": {
        "é€šçŸ¥": v.bool(),
        "è¨€èª": v.oneof(["æ—¥æœ¬èª", "English"])
    }
}

data = {
    "ãƒ¦ãƒ¼ã‚¶ãƒ¼å": "nana_kit",
    "ãƒ¬ãƒ™ãƒ«": 50,
    "ã‚¹ã‚­ãƒ«": ["ç«", "é¢¨"],
    "è¨­å®š": {"é€šçŸ¥": True, "è¨€èª": "æ—¥æœ¬èª"}
}

try:
    validated = validate(data, SCHEMA)
    print("æ¤œè¨¼æˆåŠŸï¼", validated)
except ValidationError as e:
    print(f"ã‚¨ãƒ©ãƒ¼: {e.path} - {e.message}")
```

---

## API ä¾‹ï¼ˆã‚ˆãä½¿ã†é–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ï¼‰

> ã“ã“ã§ã¯ä»£è¡¨çš„ãªé–¢æ•°ãƒ»ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’ç°¡æ½”ã«ç¤ºã—ã¾ã™ã€‚å®Ÿéš›ã®ã‚·ã‚°ãƒãƒãƒ£ã‚„è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆ/docsï¼‰ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

* `v.str()`, `v.int()`, `v.bool()`, `v.list(subschema)`, `v.oneof([...])` â€” åŸºæœ¬ãƒãƒªãƒ‡ãƒ¼ã‚¿
* é€£é–ãƒ¡ã‚½ãƒƒãƒ‰ï¼š`.range(min, max)`, `.regex(pattern)`, `.optional()`, `.default(value)` ãªã©
* `validate(data, schema, *, partial=False, base=None, migrate=None)` â€” ä¸»é–¢æ•°

  * `partial=True`ï¼šä¸è¶³ã‚­ãƒ¼ã‚’è¨±å®¹ã—éƒ¨åˆ†æ›´æ–°ã‚’è¡Œã†
  * `base=<dict>`ï¼šæ—¢å­˜ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ãƒãƒ¼ã‚¸ã™ã‚‹
  * `migrate=<dict|callable>`ï¼šæ—§ã‚­ãƒ¼â†’æ–°ã‚­ãƒ¼ãƒãƒƒãƒ—ã‚„å¤‰æ›é–¢æ•°
* `ValidationError` â€” ä¾‹å¤–ã€‚`path` / `message` / `errors` ã‚’æŒã¤

---

## é«˜åº¦ãªä½¿ã„æ–¹

### éƒ¨åˆ†æ›´æ–°ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®ãƒãƒ¼ã‚¸

```python
DEFAULT_CONFIG = {"è¨€èª": "English", "éŸ³é‡": 50}
partial_input = {"éŸ³é‡": 80}

updated = validate(
    partial_input,
    SCHEMA,
    partial=True,  # ä¸è¶³ã‚­ãƒ¼ã‚’è¨±å¯
    base=DEFAULT_CONFIG  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ãƒãƒ¼ã‚¸
)
```

### ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

```python
old_data = {"æ—§ã‚­ãƒ¼": "å€¤", "timeout": 30}

migrated = validate(
    old_data,
    SCHEMA,
    migrate={
        "æ—§ã‚­ãƒ¼": "æ–°ã‚­ãƒ¼",
        "timeout": lambda v: f"{v}s"
    }
)
```

### SLSA / in-toto provenance ã®æ¤œè¨¼

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯è‡ªå‹•ã§ provenance ã‚’ç”Ÿæˆã—ã¾ã™ãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚„ä¼æ¥­å†…ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§æ¤œè¨¼ã™ã‚‹ã«ã¯ `slsa-verifier` ç­‰ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

```bash
# ä¾‹: wheel ã¨ provenance ã‚’ä½¿ã£ãŸæ¤œè¨¼
slsa-verifier verify-artifact dist/validkit-1.2.3-py3-none-any.whl \
  --provenance multiple.intoto.jsonl \
  --source-uri github.com/disnana/ValidKit
```

---

## CI / ãƒªãƒªãƒ¼ã‚¹ã®èª¬æ˜ï¼ˆç°¡æ½”ï¼‰

* `ci.yml` ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã„ã¾ã™ï¼šLintï¼ˆRuffï¼‰ã€Type checkï¼ˆmypyï¼‰ã€Testï¼ˆpytestï¼‰
* main ãƒ–ãƒ©ãƒ³ãƒã§æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¤œå‡ºæ™‚ã¯è‡ªå‹•ã§ãƒ“ãƒ«ãƒ‰ãƒ»provenance ç”Ÿæˆãƒ»PyPI å…¬é–‹ãƒ»GitHub Release ä½œæˆã¾ã§è¡Œã„ã¾ã™ã€‚
* Publish ã‚¸ãƒ§ãƒ–ã¯ `environment: pypi` ã‚’åˆ©ç”¨ã—ãŸ Trusted Publishingï¼ˆOIDCï¼‰ã§ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ã›ãšå®‰å…¨ã«ç½²åä»˜ãã§å…¬é–‹ã—ã¾ã™ã€‚

---

## è²¢çŒ®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

1. Issue ã‚’ç«‹ã¦ã‚‹ / ç›¸è«‡ã™ã‚‹
2. Fork â†’ branch ã‚’åˆ‡ã‚‹
3. ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ï¼ˆè©²å½“ã™ã‚‹å ´åˆï¼‰
4. PR ã‚’ä½œæˆï¼šå¤‰æ›´ç†ç”±ã¨é–¢é€£ Issue ã‚’è¨˜è¼‰
5. CI ãŒå…¨ã¦é€šã‚‹ã“ã¨

PR ã¯å¿…ãš Lint / mypy / pytest ãŒé€šã‚‹ã“ã¨ã‚’æ¡ä»¶ã¨ã—ã¾ã™ã€‚

---

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT
