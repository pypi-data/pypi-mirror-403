# Visual Reference: Consolidated Diagrams

This document provides all key diagrams in one place for easy reference.

---

## 1. The Core Problem

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    THE ACCOUNTABILITY PROBLEM                           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│                                                                         │
│   WITHOUT EATP:                                                         │
│   ─────────────                                                         │
│                                                                         │
│   ┌─────────┐      ┌─────────┐      ┌─────────┐      ┌─────────┐       │
│   │  Human  │ ───► │ Agent A │ ───► │ Agent B │ ───► │ Agent C │       │
│   └─────────┘      └─────────┘      └─────────┘      └─────────┘       │
│                                                                         │
│                    "Who authorized Agent C's action?"                   │
│                                    ▼                                    │
│                               ┌───────┐                                │
│                               │   ?   │                                │
│                               └───────┘                                │
│                                                                         │
│   ═══════════════════════════════════════════════════════════════════  │
│                                                                         │
│   WITH EATP:                                                            │
│   ──────────                                                            │
│                                                                         │
│   ┌─────────┐      ┌─────────┐      ┌─────────┐      ┌─────────┐       │
│   │  Human  │ ───► │ Agent A │ ───► │ Agent B │ ───► │ Agent C │       │
│   │ (Alice) │      │         │      │         │      │         │       │
│   └─────────┘      └─────────┘      └─────────┘      └─────────┘       │
│        │                │                │                │             │
│        └────────────────┴────────────────┴────────────────┘             │
│                              │                                          │
│                    ┌─────────▼─────────┐                               │
│                    │  root_source:     │                               │
│                    │  "alice@corp.com" │                               │
│                    └───────────────────┘                               │
│                                                                         │
│   Every action traceable. Complete accountability.                     │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 2. Trust Lineage Chain (TLC)

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    TRUST LINEAGE CHAIN                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │                                                                 │  │
│   │   ┌─────────────────────────────────────────────────────────┐  │  │
│   │   │  1. GENESIS RECORD                                      │  │  │
│   │   │     WHO granted the agent the right to exist?           │  │  │
│   │   │     • authority_id: "org-integrum-global"               │  │  │
│   │   │     • authority_type: ORGANIZATION                      │  │  │
│   │   └─────────────────────────────────────────────────────────┘  │  │
│   │                              │                                  │  │
│   │                              ▼                                  │  │
│   │   ┌─────────────────────────────────────────────────────────┐  │  │
│   │   │  2. CAPABILITY ATTESTATIONS                             │  │  │
│   │   │     WHAT is the agent allowed to do?                    │  │  │
│   │   │     • capability: "read_financial_data"                 │  │  │
│   │   │     • capability: "generate_reports"                    │  │  │
│   │   └─────────────────────────────────────────────────────────┘  │  │
│   │                              │                                  │  │
│   │                              ▼                                  │  │
│   │   ┌─────────────────────────────────────────────────────────┐  │  │
│   │   │  3. DELEGATION RECORDS                                  │  │  │
│   │   │     WHO passed authority and from WHERE?                │  │  │
│   │   │     • root_source: "alice@corp.com" ◄── CRITICAL       │  │  │
│   │   │     • delegation_chain: [alice, mgr, worker]            │  │  │
│   │   └─────────────────────────────────────────────────────────┘  │  │
│   │                              │                                  │  │
│   │                              ▼                                  │  │
│   │   ┌─────────────────────────────────────────────────────────┐  │  │
│   │   │  4. CONSTRAINT ENVELOPE                                 │  │  │
│   │   │     WHAT limits apply?                                  │  │  │
│   │   │     • cost_limit: $1,000                                │  │  │
│   │   │     • time_window: 09:00-17:00                          │  │  │
│   │   │     • resources: invoices/*                             │  │  │
│   │   └─────────────────────────────────────────────────────────┘  │  │
│   │                              │                                  │  │
│   │                              ▼                                  │  │
│   │   ┌─────────────────────────────────────────────────────────┐  │  │
│   │   │  5. AUDIT ANCHORS                                       │  │  │
│   │   │     WHAT has the agent done?                            │  │  │
│   │   │     • Immutable, append-only chain                      │  │  │
│   │   │     • Each anchor links to previous                     │  │  │
│   │   │     • Includes root_source for traceability             │  │  │
│   │   └─────────────────────────────────────────────────────────┘  │  │
│   │                                                                 │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 3. The Four EATP Operations

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    THE FOUR EATP OPERATIONS                             │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌───────────────────────────────────────────────────────────────┐    │
│   │                                                               │    │
│   │   1. ESTABLISH                    2. DELEGATE                 │    │
│   │   ────────────                    ───────────                 │    │
│   │                                                               │    │
│   │   ┌─────────┐      ┌─────────┐    ┌─────────┐   ┌─────────┐  │    │
│   │   │Authority│ ───► │  Agent  │    │ Agent A │──►│ Agent B │  │    │
│   │   └─────────┘trust └─────────┘    │ $10,000 │   │ $1,000  │  │    │
│   │                                   └─────────┘   └─────────┘  │    │
│   │   Creates initial                 Transfers with             │    │
│   │   trust chain                     tightened constraints      │    │
│   │                                                               │    │
│   └───────────────────────────────────────────────────────────────┘    │
│                                                                         │
│   ┌───────────────────────────────────────────────────────────────┐    │
│   │                                                               │    │
│   │   3. VERIFY                       4. AUDIT                    │    │
│   │   ─────────                       ────────                    │    │
│   │                                                               │    │
│   │   ┌─────────┐   ┌─────────┐       ┌─────────┐   ┌─────────┐  │    │
│   │   │  Agent  │──►│ VERIFY  │──►✅   │  Agent  │──►│  AUDIT  │  │    │
│   │   │         │   │         │or ❌   │         │   │  ▼▼▼▼   │  │    │
│   │   └─────────┘   └─────────┘       └─────────┘   └─────────┘  │    │
│   │                                                               │    │
│   │   Before ANY action               After EVERY action         │    │
│   │   (QUICK <1ms, FULL <50ms)        (immutable trail)          │    │
│   │                                                               │    │
│   └───────────────────────────────────────────────────────────────┘    │
│                                                                         │
│   ┌───────────────────────────────────────────────────────────────┐    │
│   │                                                               │    │
│   │   THE TRUST SANDWICH (Every Agent Action)                     │    │
│   │   ───────────────────────────────────────                     │    │
│   │                                                               │    │
│   │             ┌─────────┐                                       │    │
│   │             │ VERIFY  │  ◄── First: Can I do this?            │    │
│   │             └────┬────┘                                       │    │
│   │                  │                                            │    │
│   │                  ▼                                            │    │
│   │             ┌─────────┐                                       │    │
│   │             │ EXECUTE │  ◄── Then: Do it                      │    │
│   │             └────┬────┘                                       │    │
│   │                  │                                            │    │
│   │                  ▼                                            │    │
│   │             ┌─────────┐                                       │    │
│   │             │  AUDIT  │  ◄── Finally: Record it               │    │
│   │             └─────────┘                                       │    │
│   │                                                               │    │
│   └───────────────────────────────────────────────────────────────┘    │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 4. Agent Taxonomy

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    AGENT TAXONOMY                                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│                          ┌─────────────────┐                           │
│                          │  PSEUDO AGENT   │                           │
│                          │  (Human Facade) │                           │
│                          │                 │                           │
│                          │  Always the     │                           │
│                          │  root_source    │                           │
│                          └────────┬────────┘                           │
│                                   │                                     │
│           ┌───────────────────────┼───────────────────────┐            │
│           │                       │                       │             │
│           ▼                       ▼                       ▼             │
│   ┌───────────────┐       ┌───────────────┐       ┌───────────────┐    │
│   │ MANAGER AGENT │       │ MANAGER AGENT │       │ MANAGER AGENT │    │
│   │               │       │               │       │               │    │
│   │ Orchestrates  │       │ Orchestrates  │       │ Orchestrates  │    │
│   │ Can delegate  │       │ Can delegate  │       │ Can delegate  │    │
│   └───────┬───────┘       └───────┬───────┘       └───────────────┘    │
│           │                       │                                     │
│     ┌─────┴─────┐           ┌─────┴─────┐                              │
│     │           │           │           │                               │
│     ▼           ▼           ▼           ▼                               │
│ ┌────────┐ ┌────────┐  ┌────────┐ ┌────────┐                           │
│ │SPECIAL-│ │SPECIAL-│  │SPECIAL-│ │SPECIAL-│                           │
│ │IST     │ │IST     │  │IST     │ │IST     │                           │
│ │        │ │        │  │        │ │        │                           │
│ │Executes│ │Executes│  │Executes│ │Executes│                           │
│ │Leaf    │ │Leaf    │  │Leaf    │ │Leaf    │                           │
│ └───┬────┘ └────────┘  └───┬────┘ └────────┘                           │
│     │                      │                                            │
│     ▼                      ▼                                            │
│ ┌────────┐            ┌────────┐                                       │
│ │  ESA   │            │  ESA   │                                       │
│ │        │            │        │                                       │
│ │Database│            │  API   │                                       │
│ │Wrapper │            │Wrapper │                                       │
│ └────────┘            └────────┘                                       │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 5. System Architecture

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    SYSTEM ARCHITECTURE                                  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │                    KAIZEN STUDIO (UI)                           │  │
│   │                                                                 │  │
│   │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐          │  │
│   │  │  Login   │ │Delegation│ │  Trust   │ │  Audit   │          │  │
│   │  │  Flow    │ │  Wizard  │ │  Viewer  │ │  Search  │          │  │
│   │  └──────────┘ └──────────┘ └──────────┘ └──────────┘          │  │
│   │                                                                 │  │
│   └───────────────────────────┬─────────────────────────────────────┘  │
│                               │ REST API                               │
│                               ▼                                        │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │                 KAILASH-KAIZEN SDK (Core)                       │  │
│   │                                                                 │  │
│   │  ┌─────────────────────────────────────────────────────────┐   │  │
│   │  │  LAYER 3: ORCHESTRATION                                 │   │  │
│   │  │  TrustedAgent, TrustedSupervisorAgent, AgentRegistry    │   │  │
│   │  │  PseudoAgentFactory                                     │   │  │
│   │  └─────────────────────────────────────────────────────────┘   │  │
│   │                               │                                 │  │
│   │  ┌─────────────────────────────────────────────────────────┐   │  │
│   │  │  LAYER 2: TRUST OPERATIONS                              │   │  │
│   │  │  ESTABLISH, DELEGATE, VERIFY, AUDIT                     │   │  │
│   │  │  ConstraintValidator, CascadeRevocation                 │   │  │
│   │  └─────────────────────────────────────────────────────────┘   │  │
│   │                               │                                 │  │
│   │  ┌─────────────────────────────────────────────────────────┐   │  │
│   │  │  LAYER 1: DATA STRUCTURES                               │   │  │
│   │  │  HumanOrigin, ExecutionContext, TrustLineageChain       │   │  │
│   │  │  DelegationRecord, AuditAnchor                          │   │  │
│   │  └─────────────────────────────────────────────────────────┘   │  │
│   │                               │                                 │  │
│   │  ┌─────────────────────────────────────────────────────────┐   │  │
│   │  │  LAYER 0: INFRASTRUCTURE                                │   │  │
│   │  │  TrustStore, AuditStore, CryptoProvider                 │   │  │
│   │  └─────────────────────────────────────────────────────────┘   │  │
│   │                                                                 │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                               │                                        │
│                               ▼                                        │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │                       DATABASE                                  │  │
│   │  delegations, audit_anchors, trust_chains, agents              │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 6. Cascade Revocation

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    CASCADE REVOCATION                                   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   SCENARIO: Bob leaves the company                                     │
│                                                                         │
│   BEFORE REVOCATION:                                                    │
│   ──────────────────                                                    │
│                                                                         │
│       ┌──────────────┐                                                 │
│       │  👤 Bob      │ ◄── Account disabled                           │
│       └──────┬───────┘                                                 │
│              │                                                          │
│     ┌────────┼────────┐                                                │
│     │        │        │                                                 │
│     ▼        ▼        ▼                                                 │
│  ┌──────┐ ┌──────┐ ┌──────┐                                           │
│  │ 🤖 A │ │ 🤖 B │ │ 🤖 C │                                           │
│  └──┬───┘ └──────┘ └──────┘                                           │
│     │                                                                   │
│     ▼                                                                   │
│  ┌──────┐                                                              │
│  │ 🤖 D │                                                              │
│  └──────┘                                                              │
│                                                                         │
│   ═══════════════════════════════════════════════════════════════════  │
│                                                                         │
│   AFTER CASCADE REVOCATION:                                             │
│   ─────────────────────────                                             │
│                                                                         │
│       ┌──────────────┐                                                 │
│       │  👤 Bob      │ ❌ REVOKED                                      │
│       └──────┬───────┘                                                 │
│              │                                                          │
│     ┌────────┼────────┐                                                │
│     │        │        │                                                 │
│     ▼        ▼        ▼                                                 │
│  ┌──────┐ ┌──────┐ ┌──────┐                                           │
│  │ 🤖 A │ │ 🤖 B │ │ 🤖 C │                                           │
│  │  ❌  │ │  ❌  │ │  ❌  │                                           │
│  └──┬───┘ └──────┘ └──────┘                                           │
│     │                                                                   │
│     ▼                                                                   │
│  ┌──────┐                                                              │
│  │ 🤖 D │ ◄── Also revoked (cascade from A)                           │
│  │  ❌  │                                                              │
│  └──────┘                                                              │
│                                                                         │
│   All 4 agents revoked in parallel. Time: <1 second.                   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 7. Constraint Tightening

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    CONSTRAINT TIGHTENING RULE                           │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   RULE: Delegations can only TIGHTEN constraints, never LOOSEN.        │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │                                                                 │  │
│   │   Manager Agent                      Worker Agent               │  │
│   │   ══════════════                     ════════════               │  │
│   │                                                                 │  │
│   │   cost_limit: $10,000      ──────►   cost_limit: $1,000  ✅    │  │
│   │                                      (REDUCED = OK)             │  │
│   │                                                                 │  │
│   │   time_window: 09:00-17:00 ──────►   time_window: 10:00-16:00 ✅│  │
│   │                                      (NARROWED = OK)            │  │
│   │                                                                 │  │
│   │   resources: invoices/*    ──────►   resources: invoices/small/*│  │
│   │                                      (SUBSET = OK)          ✅  │  │
│   │                                                                 │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │   INVALID (REJECTED):                                          │  │
│   │                                                                 │  │
│   │   cost_limit: $10,000      ──────►   cost_limit: $50,000  ❌   │  │
│   │                                      (INCREASED = DENIED)       │  │
│   │                                                                 │  │
│   │   time_window: 09:00-17:00 ──────►   time_window: 00:00-23:59 ❌│  │
│   │                                      (EXPANDED = DENIED)        │  │
│   │                                                                 │  │
│   │   resources: invoices/*    ──────►   resources: *          ❌  │  │
│   │                                      (EXPANDED = DENIED)        │  │
│   │                                                                 │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 8. Implementation Summary

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    IMPLEMENTATION SUMMARY                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   SDK (Kailash-Kaizen)                 Studio (Kaizen Studio)          │
│   ════════════════════                 ════════════════════            │
│                                                                         │
│   NEW FILES (3):                       NEW PAGES (5):                  │
│   ├── execution_context.py             ├── /login                      │
│   ├── pseudo_agent.py                  ├── /dashboard                  │
│   └── constraint_validator.py          ├── /delegations                │
│                                        ├── /audit                      │
│   MODIFIED FILES (4):                  └── /admin                      │
│   ├── chain.py                                                         │
│   ├── operations.py                    NEW COMPONENTS (6):             │
│   ├── trusted_agent.py                 ├── TrustChainVisualization    │
│   └── __init__.py                      ├── DelegationWizard           │
│                                        ├── ConstraintEditor           │
│   ~670 new lines                       ├── AuditTrailSearch           │
│                                        ├── HumanOriginBadge           │
│                                        └── CascadeRevocationModal     │
│                                                                         │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   WHAT'S BUILT          │    WHAT'S MISSING                           │
│   ══════════════════════│══════════════════════════════════            │
│                         │                                              │
│   ✅ Trust Lineage Chain│    ❌ root_source in DelegationRecord       │
│   ✅ 4 EATP Operations  │    ❌ PseudoAgent                           │
│   ✅ Trust Sandwich     │    ❌ Cascade Revocation                    │
│   ✅ ESA Pattern        │    ❌ Constraint Validator                  │
│   ✅ Agent Registry     │    ❌ SLA Monitoring                        │
│   ✅ Policy Engine      │    ❌ Studio UI                             │
│   ✅ A2A Protocol       │                                              │
│                         │                                              │
│   70% Complete          │    30% Remaining                            │
│                         │                                              │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 9. The EATP Mental Model

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    THE EATP MENTAL MODEL                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │                                                                 │  │
│   │   1. EVERY agent action traces to a HUMAN (root_source)        │  │
│   │                                                                 │  │
│   │   2. Trust flows DOWN the hierarchy, never UP                  │  │
│   │                                                                 │  │
│   │   3. Constraints can only TIGHTEN through delegation           │  │
│   │                                                                 │  │
│   │   4. Every action is VERIFIED before and AUDITED after         │  │
│   │                                                                 │  │
│   │   5. Revocation CASCADES through all delegations               │  │
│   │                                                                 │  │
│   │   6. Legacy systems are wrapped with ESAs that enforce EATP    │  │
│   │                                                                 │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │                                                                 │  │
│   │          "If you can't trace an agent's action to a human,     │  │
│   │           that action should not happen."                       │  │
│   │                                                                 │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
│   ┌─────────────────────────────────────────────────────────────────┐  │
│   │                                                                 │  │
│   │   EATP is to enterprise agent governance                       │  │
│   │   what PKI is to internet trust.                               │  │
│   │                                                                 │  │
│   └─────────────────────────────────────────────────────────────────┘  │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```
