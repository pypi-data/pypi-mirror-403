[build-system]
build-backend = "hatchling.build"
requires = [ "hatch-nodejs-version==0.4.0", "hatchling==1.28.0" ]

[project]
name = "horizon-data-core"
description = "Horizonâ€™s core data SDK"
readme = "README.md"
keywords = [
  "Horizon",
  "SDK",
  "Spear AI",
]
authors = [ { name = "Spear AI", email = "org@spear.ai" } ]
requires-python = "<3.13,>=3.12"
classifiers = [
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.12",
]
dynamic = [ "version" ]
dependencies = [
  "confluent-kafka>=2.12.2",
  "dagster>=1.6.1",
  "dagster-aws>=0.22.1",
  "dagster-iceberg>=0.3.3",
  "dagster-pandera>=0.22.1",
  "geojson>=3",
  "pandas>=2",
  "pandera[mypy]>=0.18",
  "polars>=1.33.1",
  "psycopg2-binary>=2.9.10",
  "pyarrow>=21.0.0",
  "pydantic>=2.5",
  "pydantic-settings>=2.12.0",
  "pyiceberg[s3fs,pyarrow]>=0.10",
  "s3path>=0.6",
  "sqlalchemy[mypy]>=2.0.36",
  "structlog>=25.4.0",
  "turfpy>=0.0.7",
]

optional-dependencies.testing = [
  "pytest>=8.3",
]

[dependency-groups]
dev = [
  "boto3-stubs[s3]>=1.34.29",
  "mypy>=1.8",
  "pandas-stubs>=2",
  "pyarrow-stubs>=20.0.0.20250928",
  "pyproject-fmt>=2.6",
  "pytest>=7",
  "pytest-cov>=4",
  "ruff>=0.6.4",
  "types-confluent-kafka>=1.4.0",
  "types-pillow>=10",
]

[tool.hatch.version]
source = "nodejs"

[tool.pytest.ini_options]
addopts = "--cov=src --cov-report html --cov-fail-under=90"
testpaths = [ "." ]

[tool.pyright]
venvPath = "."
venv = ".venv"
