const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CloudLayoutView-DcJahVzI.js","./_plugin-vue_export-helper-Ckv1EJQX.js","./rolldown-runtime-BKYq3fBv.js","./vendor-primevue-Cg-HmKZY.js","./vendor-other-BQ5HftVH.js","./vendor-three-J548ptDO.js","./vendor-tiptap-B3MquJdf.js","./vendor-vue-J4jYbuLn.js","./vendor-other-CaaUC6Qe.css","./GlobalToast-DWuj7PXn.js","./dialogService-BJDTj7su.js","./vendor-reka-ui-C5bN2j5U.js","./vendor-xterm-CLifWSRJ.js","./vendor-xterm-kHJ-D0s7.css","./PanelTemplate-B87Qym7Z.js","./api-Dwy4NIr-.js","./i18n-iveDrznX.js","./widget-D00AxrDc.js","./colorUtil-DZPpB8qI.js","./tailwindUtil-B1qIgpoz.js","./Button-B4OHW57I.js","./Slider-IryJc9AU.js","./useErrorHandling-D82ZFYUs.js","./remoteConfig-CyTTjg6h.js","./userStore-C65Cn7r8.js","./widgetTypes-B2p76Yu_.js","./markdownRendererUtil-cjiB75V3.js","./dialogService-DwOUltBv.css","./BaseViewTemplate-Ct4m105v.js","./CloudLayoutView-CRIL4g5f.css","./CloudLoginView-Bo0hydZ7.js","./previousFullPath-DduifVgM.js","./CloudLoginView-1gcQ_jIf.css","./useCurrentUser-B7wH1MmG.js","./CloudSignupView-BbcUrU0a.js","./CloudSignupView-YgrB8UJ5.css","./CloudForgotPasswordView-CeWnQeAP.js","./CloudForgotPasswordView-BSMBvT-Y.css","./CloudSurveyView-CnNBDCwY.js","./auth-DMXNSc0x.js","./CloudSurveyView-BS7kjG6B.css","./UserCheckView-YDn9ihJc.js","./CloudSorryContactSupportView-CbqgwoUp.js","./CloudSorryContactSupportView-cvR6d1qS.css","./CloudAuthTimeoutView-DKNA6rFq.js","./CloudSubscriptionRedirectView-D4kjyFBi.js","./subscriptionCheckoutUtil-CZU-dK4F.js","./GraphView-7dRFGV25.js","./LazyImage-vT8AwZKN.js","./UserAvatar-BHBnMJq5.js","./Load3DControls-B2d3emQh.js","./TopbarBadge-CiU-LUy7.js","./WidgetWithControl-C1eDmmuE.js","./keybindingService-azBNra8Y.js","./SubscribeButton-Cpoh9Mp-.js","./SubscribeToRun-23pN9xWG.js","./useSubscriptionDialog-DGobcegg.js","./config-mtTya6dB.js","./releaseStore-BCuHmKYf.js","./WidgetInputNumber-D5Eh3KA1.js","./WidgetLayoutField-CT5_Im7H.js","./layout-C2z6q0qB.js","./widgetPropFilter-DCbbPFyl.js","./WidgetInputNumber-rqpFMwbY.css","./bootstrapStore-C9-nFu6X.js","./serverConfigStore-Dy5kYS-L.js","./graphHasMissingNodes-BGr9Ua4D.js","./GraphView-DzknqxNx.css","./UserSelectView-wh5xuLd3.js","./auth-CiH6gNDi.js","./refreshRemoteConfig-CAlf7u7T.js","./refreshRemoteConfig-DL7sZqZW.js"])))=>i.map(i=>d[i]);
import{i as e,n as t}from"./rolldown-runtime-BKYq3fBv.js";import{$n as n,An as r,Cn as i,Cr as a,Dn as o,Dr as ee,Er as te,Et as ne,Gn as s,Gt as re,Jt as ie,Kt as ae,Ln as oe,Nn as c,On as se,Qn as l,Rr as u,Sn as ce,Tr as le,Tt as ue,Xn as d,Xr as de,Zn as fe,ai as f,ar as p,bn as m,br as h,er as g,fi as _,hi as pe,hr as v,kn as me,kr as y,mi as he,nr as ge,pi as _e,qt as ve,sr as b,ui as ye,wn as be,xn as xe,yn as x}from"./vendor-primevue-Cg-HmKZY.js";import{Ar as Se,Ct as Ce,Dr as we,Er as Te,Tn as Ee,Tr as De,Un as Oe,Zn as S,an as ke,ar as Ae,fn as C,in as je,jt as Me,kr as Ne,on as Pe,or as Fe,sn as Ie,sr as Le}from"./vendor-other-BQ5HftVH.js";import{i as w,r as T,t as Re}from"./vendor-vue-J4jYbuLn.js";import{dn as E,fn as D,on as O,sn as k,un as ze}from"./api-Dwy4NIr-.js";import{i as Be,n as Ve}from"./remoteConfig-CyTTjg6h.js";import{n as He,r as Ue}from"./i18n-iveDrznX.js";import{i as A,r as j}from"./useErrorHandling-D82ZFYUs.js";import{B as We,Bo as M,H as Ge,V as Ke,at as qe,c as Je,d as Ye,da as Xe,hn as N,it as Ze,l as P,m as Qe,mn as $e,n as et,p as tt,s as nt,t as rt,u as it,ua as at,z as ot,zo as F}from"./dialogService-BJDTj7su.js";import{n as st,t as ct}from"./userStore-C65Cn7r8.js";import{n as lt,t as ut}from"./refreshRemoteConfig-DL7sZqZW.js";import{n as dt,t as ft}from"./bootstrapStore-C9-nFu6X.js";var pt=t((()=>{(function polyfill(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))processPreload(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&processPreload(e)}).observe(document,{childList:!0,subtree:!0});function getFetchOpts(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function processPreload(e){if(e.ep)return;e.ep=!0;let t=getFetchOpts(e);fetch(e.href,t)}})()})),mt=t((()=>{}));function getFirebaseConfig(){return k?Be.value.firebase_config??I:I}var I,ht=t((()=>{O(),Ve(),I={apiKey:`AIzaSyC2-fomLqgCjb7ELwta1I9cEarPK8ziTGs`,authDomain:`dreamboothy.firebaseapp.com`,databaseURL:`https://dreamboothy-default-rtdb.firebaseio.com`,projectId:`dreamboothy`,storageBucket:`dreamboothy.appspot.com`,messagingSenderId:`357148958219`,appId:`1:357148958219:web:f5917f72e5f36a2015310e`,measurementId:`G-3ZBD3MBTG4`}})),gt=t((()=>{})),L,R,z,B,V=t((()=>{c(),C(),T(),re(),j(),O(),ut(),nt(),F(),L={key:1,class:`fixed inset-0 z-[1100] flex items-center justify-center bg-[var(--p-mask-background)]`},R=16e3,z=1e4,B=b({__name:`WorkspaceAuthGate`,setup(e){let t=de(!k);async function initialize(){if(!k)return;let{isInitialized:e,currentUser:n}=w(M());try{if(e.value||await S(e).toBe(!0,{timeout:R}),!n.value){t.value=!0;return}try{await Promise.race([lt({useAuth:!0}),Oe(z).then(()=>{throw Error(`Config refresh timeout`)})])}catch(e){console.warn(`[WorkspaceAuthGate] Failed to refresh remote config:`,e)}let{flags:r}=A();if(!r.teamWorkspacesEnabled){t.value=!0;return}await initializeWorkspaceMode()}catch(e){console.error(`[WorkspaceAuthGate] Initialization failed:`,e)}finally{t.value=!0}}async function initializeWorkspaceMode(){try{let e=Je();e.initState===`uninitialized`&&await e.initialize()}catch(e){console.warn(`[WorkspaceAuthGate] Failed to initialize workspace store:`,e)}}return h(()=>{initialize()}),(e,n)=>t.value?te(e.$slots,`default`,{key:0}):(a(),g(`div`,L,[p(f(ae))]))}})})),H,_t=t((()=>{V(),V(),H=B})),vt,U,W=t((()=>{c(),C(),_t(),vt={class:`relative h-full w-full overflow-hidden`},U=b({__name:`LayoutDefault`,setup(e){return Ee(`/assets/favicon.ico`),(e,t)=>{let n=ee(`router-view`);return a(),l(H,null,{default:u(()=>[fe(`main`,vt,[p(n)])]),_:1})}}})})),G,yt=t((()=>{W(),W(),G=U})),installPreservedQueryTracker,bt=t((()=>{Qe(),installPreservedQueryTracker=(e,t)=>{let n=t.map(e=>({...e}));e.beforeEach((e,t,r)=>{let i=new Set(Object.keys(e.query));n.forEach(({namespace:t,keys:n})=>{tt(t),n.some(e=>i.has(e))&&Ye(t,e.query,n)}),r()})}})),K,xt=t((()=>{m(),K=[{path:`/cloud`,component:()=>x(()=>import(`./CloudLayoutView-DcJahVzI.js`),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]),import.meta.url),children:[{path:`login`,name:`cloud-login`,component:()=>x(()=>import(`./CloudLoginView-Bo0hydZ7.js`),__vite__mapDeps([30,1,2,3,10,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,31,32]),import.meta.url),beforeEnter:async(e,t,n)=>{if(!e.query.switchAccount){let{useCurrentUser:e}=await x(async()=>{let{useCurrentUser:e}=await import(`./useCurrentUser-B7wH1MmG.js`);return{useCurrentUser:e}},__vite__mapDeps([33,10,1,2,3,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url),{isLoggedIn:t}=e();if(t.value)return n({name:`cloud-user-check`})}n()}},{path:`signup`,name:`cloud-signup`,component:()=>x(()=>import(`./CloudSignupView-BbcUrU0a.js`),__vite__mapDeps([34,1,2,3,10,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,31,35]),import.meta.url)},{path:`forgot-password`,name:`cloud-forgot-password`,component:()=>x(()=>import(`./CloudForgotPasswordView-CeWnQeAP.js`),__vite__mapDeps([36,1,2,3,10,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,37]),import.meta.url)},{path:`survey`,name:`cloud-survey`,component:()=>x(()=>import(`./CloudSurveyView-CnNBDCwY.js`),__vite__mapDeps([38,1,2,3,10,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,39,40]),import.meta.url),meta:{requiresAuth:!0}},{path:`user-check`,name:`cloud-user-check`,component:()=>x(()=>import(`./UserCheckView-YDn9ihJc.js`),__vite__mapDeps([41,3,2,4,5,6,7,8,20,11,19,22,15,16,17,18,23,39]),import.meta.url),meta:{requiresAuth:!0}},{path:`sorry-contact-support`,name:`cloud-sorry-contact-support`,component:()=>x(()=>import(`./CloudSorryContactSupportView-CbqgwoUp.js`),__vite__mapDeps([42,1,2,3,4,5,6,7,8,43]),import.meta.url)},{path:`auth-timeout`,name:`cloud-auth-timeout`,component:()=>x(()=>import(`./CloudAuthTimeoutView-DKNA6rFq.js`),__vite__mapDeps([44,3,2,10,1,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),import.meta.url),props:!0},{path:`subscribe`,name:`cloud-subscribe`,component:()=>x(()=>import(`./CloudSubscriptionRedirectView-D4kjyFBi.js`),__vite__mapDeps([45,3,2,10,1,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,46]),import.meta.url),meta:{requiresAuth:!0}}]}]}));function getBasePath(){return D()?`/`:k?`./`:window.location.pathname}var q,J,Y,X,St=t((()=>{if(C(),T(),Ie(),j(),O(),rt(),F(),ct(),E(),yt(),bt(),it(),xt(),m(),q=window.location.protocol===`file:`,J=getBasePath(),Y=je({history:q?ke():Pe(J),routes:[...k?K:[],{path:`/`,component:G,children:[{path:``,name:`GraphView`,component:()=>x(()=>import(`./GraphView-7dRFGV25.js`),__vite__mapDeps([47,1,2,3,10,4,5,6,7,8,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,48,49,50,9,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67]),import.meta.url),beforeEnter:async(e,t,n)=>{let r=st();await r.initialize(),r.needsLogin?n(`/user-select`):n()}},{path:`user-select`,name:`UserSelectView`,component:()=>x(()=>import(`./UserSelectView-wh5xuLd3.js`),__vite__mapDeps([68,3,2,4,5,6,7,8,20,11,19,24,15,16,17,18,28]),import.meta.url)}]}],scrollBehavior(e,t,n){return n||{top:0}}}),installPreservedQueryTracker(Y,[{namespace:P.TEMPLATE,keys:[`template`,`source`,`mode`]},{namespace:P.INVITE,keys:[`invite`]}]),k){let{flags:e}=A(),t=new Set([`cloud-login`,`cloud-signup`,`cloud-forgot-password`,`cloud-sorry-contact-support`]),n=new Set([`/cloud/login`,`/cloud/signup`,`/cloud/forgot-password`,`/cloud/sorry-contact-support`]);function isPublicRoute(e){let r=String(e.name);if(t.has(r))return!0;let i=e.path;return n.has(i)}Y.beforeEach(async(t,n,r)=>{let i=M();if(!i.isInitialized)try{let{isInitialized:e}=w(i);await S(e).toBe(!0,{timeout:16e3})}catch(e){return console.error(`Auth initialization failed:`,e),r({name:`cloud-auth-timeout`})}let a=!!await i.getAuthHeader();if(isPublicRoute(t))return r();if(t.name===`cloud-user-check`)return t.meta.requiresAuth&&!a?r({name:`cloud-login`}):r();if(n.name===`cloud-user-check`&&t.path===`/`)return r();let o=t.fullPath===`/`?void 0:{previousFullPath:encodeURIComponent(t.fullPath)};if(t.meta.requiresAuth&&!a)return r({name:`cloud-login`,query:o});if(!a)return D()?await et().showSignInDialog()?r():r(!1):r({name:`cloud-login`,query:o});if(!D()&&a&&t.path===`/`){if(!e.onboardingSurveyEnabled)return r();let{getSurveyCompletedStatus:t}=await x(async()=>{let{getSurveyCompletedStatus:e}=await import(`./auth-CiH6gNDi.js`);return{getSurveyCompletedStatus:e}},__vite__mapDeps([69,39,4,3,2,5,6,7,8,15,16,17,18]),import.meta.url);try{if(!await t())return r({name:`cloud-survey`})}catch(e){return console.error(`Failed to check user status:`,e),r({name:`cloud-user-check`})}}return r()})}X=Y})),Ct,Z,wt,Tt=t((()=>{c(),Ce(),ve(),j(),O(),at(),Ct={key:0},Z=[`id`],wt=b({__name:`GlobalDialog`,setup(e){let{flags:t}=A(),r=d(()=>k&&t.teamWorkspacesEnabled),i=Xe();function getDialogPt(e){let t=e.key===`global-settings`&&r.value,n=e.dialogComponentProps.pt||{};return t?Me(n,{mask:{class:`p-8`}}):n}return(e,t)=>(a(!0),g(s,null,le(f(i).dialogStack,e=>(a(),l(f(ie),v({key:e.key,visible:e.visible,"onUpdate:visible":t=>e.visible=t,class:[`global-dialog`,e.key===`global-settings`&&r.value?`settings-dialog-workspace`:``],ref_for:!0},e.dialogComponentProps,{pt:getDialogPt(e),"aria-labelledby":e.key}),ge({header:u(()=>[e.dialogComponentProps?.headless?n(``,!0):(a(),g(`div`,Ct,[e.headerComponent?(a(),l(y(e.headerComponent),v({key:0,ref_for:!0},e.headerProps,{id:e.key}),null,16,[`id`])):(a(),g(`h3`,{key:1,id:e.key},ye(e.title||` `),9,Z))]))]),default:u(()=>[(a(),l(y(e.component),v({ref_for:!0},e.contentProps,{maximized:e.dialogComponentProps.maximized}),null,16,[`maximized`]))]),_:2},[e.footerComponent?{name:`footer`,fn:u(()=>[(a(),l(y(e.footerComponent),v({ref_for:!0},e.footerProps),null,16))]),key:`0`}:void 0]),1040,[`visible`,`onUpdate:visible`,`class`,`pt`,`aria-labelledby`]))),128))}})})),Et=t((()=>{})),Dt,Ot=t((()=>{Tt(),Tt(),Et(),Dt=wt})),kt,At=t((()=>{c(),ue(),re(),Ot(),Ge(),$e(),ot(),E(),qe(),kt=b({__name:`App`,setup(e){let t=N();Ze.extensionManager=N();let r=We(),i=d(()=>t.spinner),showContextMenu=e=>{let{target:t}=e;switch(!0){case t instanceof HTMLTextAreaElement:case t instanceof HTMLInputElement&&t.type===`text`:ze()?.showContextMenu({type:`text`});return}};return h(()=>{window.__COMFYUI_FRONTEND_VERSION__=Ke.app_version,D()&&document.addEventListener(`contextmenu`,showContextMenu),window.addEventListener(`vite:preloadError`,e=>{e.preventDefault(),console.error(`[vite:preloadError]`,e.payload)}),r.initializeConflictDetection()}),(e,t)=>{let r=ee(`router-view`);return a(),g(s,null,[p(r),i.value?(a(),l(f(ae),{key:0,class:`absolute inset-0 flex h-[unset] items-center justify-center`})):n(``,!0),p(Dt),p(f(ne),{"full-screen":``,blocked:i.value},null,8,[`blocked`])],64)}}})})),jt,Mt=t((()=>{At(),At(),jt=kt})),Nt=t((()=>{})),Pt,Ft,Q,$,It=t((async()=>{if(he(),_e(),Ne(),Te(),T(),De(),me(),se(),be(),ce(),c(),Le(),ht(),gt(),St(),ft(),Mt(),Nt(),Ue(),O(),m(),k){let{refreshRemoteConfig:e}=await x(async()=>{let{refreshRemoteConfig:e}=await import(`./refreshRemoteConfig-CAlf7u7T.js`);return{refreshRemoteConfig:e}},__vite__mapDeps([70,71,15,3,2,4,5,6,7,8,16,17,18,23]),import.meta.url);await e({useAuth:!1})}Pt=pe(_,{semantic:{primary:_.primitive.blue}}),Ft=we(getFirebaseConfig()),Q=oe(jt),$=Re(),Se({app:Q,dsn:`https://e2d0c0bd392ffdce48e856c2a055f437@o4507954455314432.ingest.us.sentry.io/4508621568475136`,enabled:!0,release:`1.39.2`,normalizeDepth:8,tracesSampleRate:k?1:0,replaysSessionSampleRate:0,replaysOnErrorSampleRate:0,...k?{}:{integrations:[],autoSessionTracking:!1,defaultIntegrations:!1}}),Q.directive(`tooltip`,xe),Q.use(X).use(r,{theme:{preset:Pt,options:{prefix:`p`,cssLayer:{name:`primevue`,order:`theme, base, primevue`},darkModeSelector:`.dark-theme, :root:has(.dark-theme)`}}}).use(o).use(i).use($).use(He).use(Ae,{firebaseApp:Ft,modules:[Fe()]}),dt($).startStoreBootstrap(),Q.mount(`#vue-app`)}));await t((async()=>{pt(),mt(),await It()}))();
//# sourceMappingURL=index-BNfgfqdL.js.map