function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderTemplateEditor-B4ZgT2C_.js","./index-C1IizHaQ.js","./index-BFl0hGbo.css","./WdsDropdownMenu-Ba7OuweF.js","./WdsCheckbox-BYkw_Bvq.js","./WdsCheckbox-DKvpPA4D.css","./WdsDropdownMenu-CzzPN9Wg.css","./WdsTabs-CJTYrdrm.js","./WdsTabs-DKj7BqI0.css","./WdsFieldWrapper-aazsDYxB.js","./WdsFieldWrapper-CS1B2KEf.css","./useKeyValueEditor-6fUhwaEz.js","./BuilderTemplateEditor-CYSDeWgV.css","./BuilderEmbeddedCodeEditor-CY65_X2M.js","./BuilderEmbeddedCodeEditor-DwW24RYH.css","./BuilderGraphSelect-8RLB_vrG.js","./useListResources-DfxCJj_q.js","./BuilderGraphSelect-D7B61d5s.css","./BuilderApplicationSelect-C8Tb3ZRM.js","./BuilderApplicationSelect-XaM1D5fv.css","./BuilderModelSelect-Dy55EZP4.js","./BuilderModelSelect-Dc4IPLp2.css","./BuilderSettingsArtifactAPITriggerDetails-DAhAKY9C.js","./BuilderSettingsArtifactAPITriggerDetails-DnX66iRg.css","./BuilderSettingsHandlers-C79-kk9h.js","./BuilderApp-DhqlqS0y.js","./marked.esm-273vDTCT.js","./BuilderApp-BvTsxBsN.css","./useBlueprintRun-DWmMgV1z.js","./BuilderSettingsHandlers-DJPeASfz.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{c as k,b4 as Be,R as y,$ as Le,b5 as et,C as tt,d as W,i as R,a as P,r as N,b6 as Ne,o as i,b as V,au as nt,z as q,x as $,W as H,aq as oe,y as z,ax as Ce,an as ue,ap as we,aJ as A,at as re,f as C,D as L,g as B,S as F,E as Z,_ as K,ao as X,Q,m as U,q as ie,G as me,b7 as ze,K as Je,s as pe,a6 as ot,a_ as lt,w as fe,b8 as at,a8 as Ge,b9 as it,L as le,ba as st,bb as rt,aC as J,bc as ge,Z as ut,bd as Se,a7 as ye,A as ae,a3 as Oe,t as Y,l as Ee,aw as ee,v as be,be as Te,bf as dt,X as ct,a1 as We,bg as Fe,bh as D,bi as pt,bj as vt,bk as mt,bl as ft,aI as Ye,F as G,J as yt,bm as gt,a4 as He,b2 as _t,u as Me,bn as Xe,bo as Ve,aO as ve,b3 as ht,bp as bt,aK as kt,bq as St,br as It,a2 as Bt}from"./index-C1IizHaQ.js";import{W as Ie,a as Ct}from"./WdsDropdownMenu-Ba7OuweF.js";import{W as se}from"./WdsTabs-CJTYrdrm.js";import{W as te}from"./WdsFieldWrapper-aazsDYxB.js";import{W as qe}from"./WdsCheckbox-BYkw_Bvq.js";import{u as wt}from"./useKeyValueEditor-6fUhwaEz.js";function*Et(t,r){const n=new Set;function*v(s){var a;if(n.has(s))return;n.add(s);const l=t.getComponentById(s);if(l)for(const u of t.getComponentsNested(l.parentId))(a=u.outs)!=null&&a.some(f=>f.toNodeId===s)&&(yield u,yield*v(u.id))}yield*v(r)}function xt(t,r=void 0,n=Le()){const v=k(()=>new Set(Be(t.userStateInitial.value))),s=k(()=>{try{return Ft(t,v.value)}catch(u){return n.error("Cannot compute blueprintsSetStates",u),{}}}),l=k(()=>{try{return Tt(t,v.value)}catch(u){return n.error("Cannot compute bindings",u),{}}}),a=k(()=>{try{return $t(t,y(r))}catch(u){return n.error("Cannot compute blueprintsResults",u),{}}});return{blueprintsSetStates:s,bindings:l,blueprintsResults:a}}function $t(t,r,n=new Set){var s;const v={};for(const l of Et(t,r)){const a=l.type,u=t.getComponentDefinition(l.type);if(!u||!(l.type&&!et.has(a)&&l.type.startsWith("blueprints_")&&((s=u==null?void 0:u.outs)==null?void 0:s.success)!==void 0))continue;const m=`results.${l.id}`;m&&!n.has(m)&&(v[m]??(v[m]={components:[]}),v[m].components.push(l))}return v}function Tt(t,r=new Set){var v;const n={};for(const s of tt)for(const l of t.getComponentsNested(s)){const a=(v=l.binding)==null?void 0:v.stateRef;a&&!r.has(a)&&(n[a]??(n[a]={components:[]}),n[a].components.push(l))}return n}function Ft(t,r=new Set){var s;function*n(){for(const l of t.getComponentsNested("blueprints_root"))l.type==="blueprints_setstate"&&l.content&&(yield l)}const v={};for(const l of n()){const a=(s=l.content)==null?void 0:s.element;!a||typeof a!="string"||r.has(a)||(v[a]??(v[a]={components:[]}),v[a].components.push(l))}return v}const xe=W({__name:"BuilderStateSelectorDropdownComponent",props:{componentId:{type:String,required:!0},path:{type:String,required:!0},selected:{type:Boolean,required:!1}},setup(t){const r=t,n=R(P.core),v=R(P.builderManager),s=N(!1),l=k(()=>n.getComponentById(r.componentId)),{name:a,possibleImageUrls:u,previewText:f}=Ne(n,l),m=k(()=>({icon:u.value,label:r.path,detail:f.value||a.value,value:r.path})),{goToComponentParentPage:I}=Ce(n,v);async function b(){await I(r.componentId),v.setSelection(r.componentId)}return(p,c)=>(i(),V(Ie,{class:"BuilderStateSelectorDropdownItemComponent",option:m.value,selected:t.selected,"show-custom-action":"",onMousemove:c[1]||(c[1]=g=>s.value=!0),onMouseout:c[2]||(c[2]=g=>s.value=!1)},nt({_:2},[s.value?{name:"action",fn:q(()=>[$(H,{variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:oe(b,["prevent"]),onMousemove:c[0]||(c[0]=g=>s.value=!0)},{default:q(()=>[$(z,{name:"square-dashed-mouse-pointer"})]),_:1})]),key:"0"}:void 0]),1032,["option","selected"]))}}),Vt={class:"BuilderStateSelectorDropdown"},Ot={key:1,class:"BuilderStateSelectorDropdown__empty"},Mt={key:2,class:"BuilderStateSelectorDropdown__section"},qt={key:3,class:"BuilderStateSelectorDropdown__section"},At={key:4,class:"BuilderStateSelectorDropdown__section"},Dt={key:5,class:"BuilderStateSelectorDropdown__section"},Rt={key:6,class:"BuilderStateSelectorDropdown__section"},Pt=W({__name:"BuilderStateSelectorDropdown",props:ue({componentId:{type:String,required:!1,default:void 0},query:{type:String,required:!1,default:""},allowCreate:{type:Boolean,required:!1},hideSecrets:{type:Boolean,required:!1},hideBlueprintResults:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const r=t,n=R(P.core),v=R(P.secretsManager),s=we(t,"modelValue"),l=xt(n,A(r,"componentId")),a=k(()=>{const g=[];for(const h of Be(n.userStateInitial.value))r.query&&!h.includes(r.query)||g.push({value:h,label:h,icon:"code",iconBgColor:re.Green2});return g.sort((h,S)=>h.label.localeCompare(S.label))}),u=k(()=>{if(r.hideSecrets)return[];const g=[];for(const h of Be(v.secrets.value)){const S=`vault.${h}`;r.query&&!S.includes(r.query)||g.push({value:`vault.${h}`,label:h,icon:"key-round",iconBgColor:re.Yellow2})}return g.sort((h,S)=>h.label.localeCompare(S.label))}),f=k(()=>b(l.bindings.value)),m=k(()=>b(l.blueprintsSetStates.value)),I=k(()=>r.hideBlueprintResults?[]:b(l.blueprintsResults.value));function b(g){return Object.entries(g).map(([h,{components:S}])=>{for(const O of S)if(O.id!==r.componentId)return{componentId:O.id,path:h}}).filter(h=>!(!h||r.query&&!h.path.includes(r.query)))}const p=k(()=>!r.allowCreate||!r.query||r.query.endsWith(".")?!1:!(a.value.some(h=>h.value===r.query)||u.value.some(h=>h.value===r.query)||I.value.some(h=>h.path===r.query)||f.value.some(h=>h.path===r.query))),c=k(()=>!!(a.value.length||m.value.length||f.value.length||I.value.length||u.value.length));return(g,h)=>(i(),C("div",Vt,[p.value?(i(),C(L,{key:0},[h[1]||(h[1]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," Add new variable ",-1)),$(Ie,{option:{value:t.query,label:t.query,icon:"plus",iconBgColor:y(re).Blue4,iconColor:y(re).White},onClick:h[0]||(h[0]=oe(S=>s.value=t.query,["stop"]))},null,8,["option"])],64)):c.value?F("",!0):(i(),C("div",Ot," No result ")),m.value.length?(i(),C("div",Mt,[h[2]||(h[2]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," Set states ",-1)),(i(!0),C(L,null,Z(m.value,S=>(i(),V(xe,{key:S.path,path:S.path,"component-id":S.componentId,selected:S.path===s.value,onClick:oe(O=>s.value=S.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):F("",!0),f.value.length?(i(),C("div",qt,[h[3]||(h[3]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," Interface variables ",-1)),(i(!0),C(L,null,Z(f.value,S=>(i(),V(xe,{key:S.path,path:S.path,"component-id":S.componentId,selected:S.path===s.value,onClick:oe(O=>s.value=S.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):F("",!0),!t.hideBlueprintResults&&I.value.length?(i(),C("div",At,[h[4]||(h[4]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," block results ",-1)),(i(!0),C(L,null,Z(I.value,S=>(i(),V(xe,{key:S.path,path:S.path,"component-id":S.componentId,selected:S.path===s.value,onClick:oe(O=>s.value=S.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):F("",!0),!t.hideSecrets&&u.value.length?(i(),C("div",Dt,[h[5]||(h[5]=B("p",{class:"BuilderStateSelectorDropdown__section__title"},"Secrets",-1)),(i(!0),C(L,null,Z(u.value,S=>(i(),V(Ie,{key:S.value,option:S,selected:S.value===s.value,onClick:oe(O=>s.value=S.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):F("",!0),a.value.length?(i(),C("div",Rt,[h[6]||(h[6]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," main.py variables ",-1)),(i(!0),C(L,null,Z(a.value,S=>(i(),V(Ie,{key:S.value,option:S,selected:S.value===s.value,onClick:oe(O=>s.value=S.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):F("",!0)]))}}),Wt=K(Pt,[["__scopeId","data-v-d28f7ad6"]]),Ut=W({__name:"BuilderTemplateInputTemplate",props:ue({leftIcon:{type:String,required:!1,default:void 0},rightIcon:{type:String,required:!1,default:void 0},invalid:{type:Boolean,required:!1},variant:{type:String,default:void 0},autofocus:{type:Boolean},multiline:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:ue({rightIconClick:()=>!0,input:t=>!!t},["update:modelValue"]),setup(t,{expose:r,emit:n}){const v=X({loader:()=>Q(()=>import("./BuilderTemplateEditor-B4ZgT2C_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)}),s=we(t,"modelValue"),l=t,a=n;r({focus:p,getSelection:b,value:s,setSelectionEnd:I,setSelectionStart:m});const u=U("input");ie(()=>{l.autofocus&&p()});async function f(c){s.value=c,a("input",{target:{value:c}})}function m(c){var g;(g=u.value)==null||g.setSelectionStart(c)}function I(c){var g;(g=u.value)==null||g.setSelectionEnd(c)}function b(){var c;return(c=u.value)==null?void 0:c.getSelection()}function p(){var c;(c=u.value)==null||c.focus()}return(c,g)=>(i(),V(ze,{"left-icon":t.leftIcon,"right-icon":t.rightIcon,invalid:t.invalid,variant:t.variant,class:me(["BuilderTemplateInputTemplate",{"BuilderTemplateInputTemplate--singleline":!t.multiline,"BuilderTemplateInputTemplate--multiline":t.multiline}]),onRightIconClick:g[0]||(g[0]=h=>c.$emit("rightIconClick")),onClick:p},{default:q(()=>[$(y(v),{ref_key:"input",ref:u,class:"BuilderTemplateInputTemplate__input",multiline:t.multiline,"model-value":s.value,"onUpdate:modelValue":f},null,8,["multiline","model-value"])]),_:1},8,["left-icon","right-icon","invalid","variant","class"]))}}),Kt=K(Ut,[["__scopeId","data-v-2789dd2e"]]),jt={class:"BuilderTemplateInputState__content"},Lt=W({__name:"BuilderTemplateInputState",props:ue({rightIcon:{type:String,required:!1,default:void 0}},{modelValue:{type:String},modelModifiers:{}}),emits:ue({rightIconClick:()=>!0},["update:modelValue"]),setup(t,{expose:r}){r({focus:p,setSelectionStart:m,setSelectionEnd:I,getSelection:b});const n=R(P.core),v=U("input"),s=we(t,"modelValue"),l=N(!1),a=k(()=>!s.value&&!l.value),u=k(()=>new Set(Be(n.userStateInitial.value))),f=k(()=>({opacity:a.value?0:void 0,backgroundColor:u.value.has(s.value)?re.Green2:re.Gray1}));function m(c){v.value&&(v.value.selectionStart=c)}function I(c){v.value&&(v.value.selectionEnd=c)}function b(){var c,g;return{selectionStart:(c=v.value)==null?void 0:c.selectionStart,selectionEnd:(g=v.value)==null?void 0:g.selectionEnd}}function p(){var c;(c=v.value)==null||c.focus()}return(c,g)=>(i(),V(ze,{class:"BuilderTemplateInputState","left-icon":a.value?"at-sign":void 0,"right-icon":t.rightIcon,onRightIconClick:g[3]||(g[3]=h=>c.$emit("rightIconClick")),onClick:g[4]||(g[4]=h=>y(v).focus())},{default:q(()=>[B("div",jt,[B("div",{class:"BuilderTemplateInputState__content__tag",style:Je(f.value)},[g[5]||(g[5]=B("span",null,"@",-1)),pe(B("input",{ref_key:"input",ref:v,"onUpdate:modelValue":g[0]||(g[0]=h=>s.value=h),type:"text",onFocus:g[1]||(g[1]=h=>l.value=!0),onBlur:g[2]||(g[2]=h=>l.value=!1)},null,544),[[ot,s.value]])],4)])]),_:1},8,["left-icon","right-icon"]))}}),Nt=K(Lt,[["__scopeId","data-v-f03927da"]]);function zt(t,r){const n=t.lastIndexOf("@");if(n!==-1){let v=n;const l=t.slice(n).indexOf("{");return l!==-1&&(v+=l+1),t.indexOf("}",v)!==-1?t.substring(0,n)+`@{${r}}`:t.slice(0,n)+`@{${r}}`}return t+`@{${r}}`}function Jt(t){const r=t.lastIndexOf("@");if(r===-1)return"";const n=t.slice(r);return n.includes("}")||n.includes(`
`)||!n.startsWith("@{")&&n.includes(" ")?"":n.replace(/^@{?/,"")}function Gt(t,r){return function(v){var f;if(!t.value)return;let s=0;if(v.key==="ArrowDown"?s=1:v.key==="ArrowUp"&&(s=-1),s===0)return;const l=Array.from(t.value.querySelectorAll("button")).filter(m=>!m.hasAttribute("disabled")&&m.offsetParent!==null);let a=s===1?l[0]:l.at(-1);const u=l.indexOf(document.activeElement);u!==-1&&(a=l[u+s]),a?(a.focus(),v.preventDefault()):(f=r==null?void 0:r.nextFocusNotFound)==null||f.call(r)}}const Yt=W({__name:"BuilderTemplateInput",props:{inputId:{type:String,required:!1,default:void 0},componentId:{type:String,required:!1,default:void 0},value:{type:String,required:!1,default:void 0},multiline:{type:Boolean,required:!1},variant:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:"template"},options:{type:Object,required:!1,default:void 0},placeholder:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},readonly:{type:Boolean}},emits:["input","update:value"],setup(t,{expose:r,emit:n}){const v=t,s=n,l=U("root"),a=U("input"),u=U("dropdown"),f=N(),{floatingStyles:m,update:I}=lt(l,u,{placement:"bottom-start",middleware:[st(),rt({apply({rects:o,elements:e}){Object.assign(e.floating.style,{minWidth:`${o.reference.width}px`,maxWidth:`${o.reference.width}px`})}})],strategy:"fixed"});b();function b(){let o;function e(){o&&o(),o=void 0}fe(u,()=>{e(),u.value&&(o=at(a,u.value,I))}),Ge(()=>e())}r({focus:()=>{var o;return(o=a.value)==null?void 0:o.focus()}});const p=k(()=>v.options?Object.entries(v.options).reduce((o,[e,T])=>(e.includes(v.value)&&o.push({value:e,label:T}),o),[]):[]),c=Gt(u,{nextFocusNotFound:()=>{var o;f.value=void 0,(o=a.value)==null||o.focus()}});function g(){p.value.length>0&&(f.value="static")}const h=k(()=>{var M,w;if(v.type==="state")return v.value;let o=((M=a.value)==null?void 0:M.value)??"";if(!o)return"";const{selectionStart:e}=((w=a.value)==null?void 0:w.getSelection())??{},T=o.slice(0,e);return Jt(T)}),S=it(l);fe(S,async()=>{S.value||(await le(),setTimeout(()=>{f.value=void 0},300))});async function O(o){var E,j;let e=((E=a.value)==null?void 0:E.value)??"";const{selectionStart:T,selectionEnd:M}=((j=a.value)==null?void 0:j.getSelection())??{};let w=T??e.length;if(v.type==="template"){const de=e.slice(0,T),he=e.slice(M).replace(/^(\})+/,""),ce=zt(de,o);e=`${ce}${he}`,w=ce.length}else e=o,w=o.length;s("input",{target:{value:e}}),s("update:value",e),a.value&&(a.value.focus(),f.value=void 0,await le(),a.value.setSelectionStart(w))}async function x(o){s("input",{target:{value:o}}),s("update:value",o),a.value&&(a.value.focus(),f.value=void 0,await le(),a.value.setSelectionStart(o.length))}function _(o){d({target:{value:o}})}function d(o){var E;let e=String(o.target.value??"");if(s("input",o),s("update:value",e),v.type==="state"){f.value="template";return}if(p.value.some(j=>j.value.includes(e))){f.value="static";return}const{selectionStart:T}=((E=a.value)==null?void 0:E.getSelection())??{},M=e.slice(0,T),w=!!M.match(/@\{([^}{@]*)$/)||M.endsWith("@")||!!h.value;f.value=w?"template":void 0}return(o,e)=>(i(),C("div",{ref_key:"root",ref:l,class:"BuilderTemplateInput",onKeydown:e[2]||(e[2]=oe((...T)=>y(c)&&y(c)(...T),["stop"]))},[t.type==="template"?(i(),V(Kt,{key:0,ref_key:"input",ref:a,"model-value":v.value,placeholder:v.placeholder,list:v.options?`list-${v.inputId}`:void 0,invalid:t.error!==void 0,autofocus:t.autofocus,readonly:t.readonly,multiline:t.multiline,onInput:d,onClick:g},null,8,["model-value","placeholder","list","invalid","autofocus","readonly","multiline"])):F("",!0),t.type==="state"?(i(),V(Nt,{key:1,ref_key:"input",ref:a,"right-icon":f.value?"chevron-up":"chevron-down","model-value":v.value,onRightIconClick:e[0]||(e[0]=T=>f.value=f.value?void 0:"template"),"onUpdate:modelValue":_,onClick:e[1]||(e[1]=T=>y(a).focus())},null,8,["right-icon","model-value"])):F("",!0),f.value?(i(),C("div",{key:2,ref_key:"dropdown",ref:u,class:"BuilderTemplateInput__dropdown",style:Je(y(m))},[f.value==="template"?(i(),V(Wt,{key:0,"hide-secrets":t.type==="state","hide-blueprint-results":t.type==="state","allow-create":t.type==="state",query:h.value,"component-id":t.componentId,"onUpdate:modelValue":O},null,8,["hide-secrets","hide-blueprint-results","allow-create","query","component-id"])):p.value.length?(i(),V(Ct,{key:1,options:p.value,onSelect:x},null,8,["options"])):F("",!0)],4)):F("",!0)],544))}}),ne=K(Yt,[["__scopeId","data-v-8594b4ef"]]),_e=Object.freeze([{label:"Default",value:"default"},{label:"CSS",value:"css"},{label:"Pick",value:"pick"}]),Ht=["data-automation-key"],Xt={key:0,class:"main"},Qt={key:0,class:"pickerContainer"},Zt=W({__name:"BuilderFieldsAlign",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},direction:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-C1IizHaQ.js").then(_=>_.bJ),__vite__mapDeps([1,2]),import.meta.url)}),n=U("rootEl"),v=U("pickerEl"),s=U("freehandInputEl"),l=[{key:"start",label:"Left",match:_=>_=="start",default:"start",icon:"align-left"},{key:"center",label:"Center",match:_=>_=="center",default:"center",icon:"align-center"},{key:"end",label:"Right",match:_=>_=="end",default:"end",icon:"align-right"}],a=[{key:"start",label:"Top",match:_=>_=="start",default:"start",icon:"arrow-up-to-line"},{key:"center",label:"Center",match:_=>_=="center",default:"center",icon:"fold-vertical"},{key:"end",label:"Bottom",match:_=>_=="end",default:"end",icon:"arrow-down-to-line"}],u={pick:v,css:s,default:null},f=t,m=J({componentId:A(f,"componentId"),fieldKey:A(f,"fieldKey")}),I=k(()=>f.direction=="vertical"?a:f.direction=="horizontal"?l:a),b=k(()=>I.value.map(_=>({value:_.key,label:_.label,icon:_.icon}))),p=k(()=>{const _=m.value;for(const d in I.value)if(_&&I.value[d].match(_))return I.value[d].key;return null}),g=N((()=>{if(!m.value)return"default";for(const _ in I.value)if(I.value[_].match(m.value))return"pick";return"css"})()),h=()=>{var d;const _=(d=u[g.value])==null?void 0:d.value;_&&(_.focus(),typeof _.selectionStart=="number"&&(_.selectionStart=_.selectionEnd=_.value.length))},S=async _=>{g.value!=_&&(g.value=_,await le(),h(),_==="default"&&(m.value=""))},O=_=>{for(const d in I.value)I.value[d].key==_&&(m.value=I.value[d].default)},x=_=>{m.value=_.target.value};return ie(()=>{n.value.addEventListener("focus",h)}),ge(()=>{n.value.removeEventListener("focus",h)}),(_,d)=>(i(),C("div",{ref_key:"rootEl",ref:n,class:"BuilderFieldsAlign",tabindex:"-1","data-automation-key":f.fieldKey},[$(se,{tabs:y(_e),"model-value":g.value,"onUpdate:modelValue":S},null,8,["tabs","model-value"]),g.value=="pick"||g.value=="css"?(i(),C("div",Xt,[g.value=="pick"?(i(),C("div",Qt,[$(y(r),{ref_key:"pickerEl",ref:v,"model-value":p.value,options:b.value,"onUpdate:modelValue":O},null,8,["model-value","options"])])):F("",!0),g.value=="css"?(i(),V(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:y(m),error:t.error,onInput:x},null,8,["value","error"])):F("",!0)])):F("",!0)],8,Ht))}}),Ue=K(Zt,[["__scopeId","data-v-6a36fb0b"]]),en=["data-automation-key"],tn={key:0,class:"main"},nn={key:0,class:"pickerContainer"},on=["value"],ln=W({__name:"BuilderFieldsColor",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=U("rootEl"),n=U("pickerEl"),v=U("freehandInputEl"),s={pick:n,css:v,default:null},l=t,a=J({componentId:A(l,"componentId"),fieldKey:A(l,"fieldKey")}),f=N((()=>{const p=a.value;return p?/#[A-Fa-f0-9]{6}/.test(p)?"pick":"css":"default"})()),m=()=>{var c;const p=(c=s[f.value])==null?void 0:c.value;p&&(p.focus(),typeof p.selectionStart=="number"&&(p.selectionStart=p.selectionEnd=p.value.length))},I=async p=>{f.value!=p&&(f.value=p,await le(),m(),p==="default"&&(a.value=""))},b=p=>a.value=p.target.value;return ie(()=>{r.value.addEventListener("focus",m)}),ge(()=>{r.value.removeEventListener("focus",m)}),(p,c)=>(i(),C("div",{ref_key:"rootEl",ref:r,class:"BuilderFieldsColor",tabindex:"-1","data-automation-key":t.fieldKey},[$(se,{tabs:y(_e),"model-value":f.value,"onUpdate:modelValue":I},null,8,["tabs","model-value"]),f.value=="pick"||f.value=="css"?(i(),C("div",tn,[f.value=="pick"?(i(),C("div",nn,[B("input",{ref_key:"pickerEl",ref:n,type:"color",value:y(a),onInput:b},null,40,on)])):F("",!0),f.value=="css"?(i(),V(ne,{key:1,ref_key:"freehandInputEl",ref:v,value:y(a),error:t.error,onInput:b},null,8,["value","error"])):F("",!0)])):F("",!0)],8,en))}}),an=K(ln,[["__scopeId","data-v-5432e5c5"]]);function $e(t){return typeof t=="string"&&t.startsWith("@{")&&t.endsWith("}")}function Qe({fieldViewModel:t}){const r=N($e(t.value)),n=N({binding:$e(t.value)?t.value:"",noneBinding:r.value?"":t.value});function v(){r.value?($e(t.value)&&(n.value.binding=t.value),t.value=n.value.noneBinding,r.value=!1):(n.value.noneBinding=t.value,t.value=n.value.binding,r.value=!0)}return{isBindingMode:ut(r),toggleBindingMode:v}}const sn=["data-automation-key"],rn=W({__name:"BuilderFieldsText",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},fieldControl:{type:String,required:!1,default:Se.Text},defaultValue:{type:String,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},type:{type:String,required:!1,default:"template"}},setup(t){const r=R(P.core),n=t,v=J({componentId:A(n,"componentId"),fieldKey:A(n,"fieldKey"),defaultValue:A(n,"defaultValue")}),s=k(()=>`${n.componentId}-${n.fieldKey}`),l={uiComponents:()=>{const p=r.getComponents(void 0,{sortedByPosition:!0}).filter(g=>r.isChildOf("root",g.id)),c={};return p.forEach(g=>{c[g.id]=g.id}),c},uiComponentsWithEvents:()=>r.getComponents(void 0,{sortedByPosition:!0}).filter(p=>r.isChildOf("root",p.id)).filter(p=>!!r.getComponentDefinition(p.type).events).reduce((p,c)=>(p[c.id]=c.id,p),{}),eventTypes:(p,c)=>{var x;const g=(x=p.getComponentById(c).content)==null?void 0:x.refComponentId,h=r.getComponentById(g);if(!h)return{};const S=p.getComponentDefinition(h.type);return Object.fromEntries(Object.keys(S.events??{}).map(_=>[_,_]))}},a=k(()=>{const p=r.getComponentById(n.componentId),g=r.getComponentDefinition(p.type).fields[n.fieldKey];return g.options?typeof g.options=="function"?g.options(r,n.componentId):typeof g.options=="string"?l==null?void 0:l[g.options](r,n.componentId):g.options:{}}),u=k(()=>["state","state-template"].includes(n.type)?"state":"template"),f=k(()=>b(v.value)),m=p=>{v.value=I(p.target.value)};function I(p){return typeof p!="string"?"":n.type==="state-template"?`@{${p}}`:p}function b(p){return typeof p!="string"?"":n.type==="state-template"?p.replace(/^@{/,"").replace(/}$/,""):p}return(p,c)=>(i(),C("div",{class:"BuilderFieldsText","data-automation-key":n.fieldKey},[t.fieldControl==y(Se).Text?(i(),V(ne,{key:0,class:"content","component-id":t.componentId,"input-id":s.value,value:f.value,placeholder:t.defaultValue,type:u.value,options:a.value,error:t.error,autofocus:t.autofocus,onInput:m},null,8,["component-id","input-id","value","placeholder","type","options","error","autofocus"])):t.fieldControl==y(Se).Textarea?(i(),V(ne,{key:1,multiline:"",variant:"text",class:"content","input-id":s.value,"component-id":t.componentId,value:f.value,placeholder:t.defaultValue,type:u.value,error:t.error,autofocus:t.autofocus,onInput:m},null,8,["input-id","component-id","value","placeholder","type","error","autofocus"])):F("",!0)],8,sn))}}),Ae=K(rn,[["__scopeId","data-v-aa053130"]]),un=["data-automation-key"],dn=W({__name:"BuilderFieldsCheckbox",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,default:void 0},unit:{type:String,default:void 0},hint:{type:String,default:void 0},error:{type:String,default:void 0}},setup(t){const r=t,n=J({componentId:A(r,"componentId"),fieldKey:A(r,"fieldKey")}),{isBindingMode:v,toggleBindingMode:s}=Qe({fieldViewModel:n}),l=k({get:()=>n.value==="yes",set:a=>{n.value=a?"yes":"no"}});return(a,u)=>y(v)?(i(),V(te,{key:0,"is-binding-button-shown":"","is-binding-enabled":y(v),label:t.label,unit:t.unit,hint:t.hint,error:t.error,"data-automation-key":r.fieldKey,"onUpdate:isBindingEnabled":y(s)},{default:q(()=>[$(Ae,{type:"state-template","component-id":t.componentId,"field-key":t.fieldKey,error:t.error,"default-value":""},null,8,["component-id","field-key","error"])]),_:1},8,["is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"])):(i(),C("div",{key:1,class:"BuilderFieldsCheckbox","data-automation-key":r.fieldKey},[$(qe,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=f=>l.value=f),label:t.label,detail:t.hint,invalid:!!t.error},null,8,["modelValue","label","detail","invalid"]),$(H,{size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Bind to a variable",onClick:y(s)},{default:q(()=>[$(z,{name:"at-sign"})]),_:1},8,["onClick"])],8,un))}}),cn=K(dn,[["__scopeId","data-v-d540f2ac"]]),pn={key:1,class:"BuilderFieldsKeyValueModal__assistedEntries"},vn={key:0,class:"BuilderFieldsKeyValueModal__assistedEntries__form"},mn=W({__name:"BuilderFieldsKeyValueModal",props:{data:{type:String,required:!0}},emits:{submit:t=>typeof t=="string",close:()=>!0},setup(t,{emit:r}){const n=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-CY65_X2M.js").then(O=>O.B),__vite__mapDeps([13,1,2,14]),import.meta.url)}),v=t,{mode:s,assistedEntries:l,freehandValue:a,isValid:u,currentValue:f,addAssistedEntry:m,updateAssistedEntryValue:I,updateAssistedEntryKey:b,removeAssistedEntry:p,getAssistedEntryError:c}=wt(v.data),g=r,h=k(()=>[{desc:"Save",fn:()=>g("submit",f.value),disabled:v.data===f.value||!u.value}]),S=[{label:"List",value:"assisted"},{label:"JSON",value:"freehand"}];return(O,x)=>(i(),V(Oe,{title:"Category key values","display-close-button":"",actions:h.value,onClose:x[2]||(x[2]=_=>O.$emit("close"))},{titleActions:q(()=>[$(se,{modelValue:y(s),"onUpdate:modelValue":x[0]||(x[0]=_=>ye(s)?s.value=_:null),class:"BuilderFieldsKeyValueModal__tabs",tabs:S},null,8,["modelValue"])]),default:q(()=>[y(s)==="freehand"?(i(),V(y(n),{key:0,modelValue:y(a),"onUpdate:modelValue":x[1]||(x[1]=_=>ye(a)?a.value=_:null),class:"BuilderFieldsKeyValueModal__freehand",variant:"minimal",language:"json"},null,8,["modelValue"])):F("",!0),y(s)==="assisted"?(i(),C("div",pn,[y(s)==="assisted"?(i(),C("div",vn,[x[3]||(x[3]=B("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelKey"}," Key ",-1)),x[4]||(x[4]=B("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelValue"}," Value ",-1)),(i(!0),C(L,null,Z(y(l),(_,d)=>(i(),C(L,{key:d},[$(te,{error:y(c)(d)},{default:q(()=>[$(ne,{placeholder:"Type a key...",value:_.key,error:y(c)(d),"onUpdate:value":o=>y(b)(d,o)},null,8,["value","error","onUpdate:value"])]),_:2},1032,["error"]),$(te,null,{default:q(()=>[$(ne,{placeholder:"Type a value...",value:_.value,"onUpdate:value":o=>y(I)(d,o)},null,8,["value","onUpdate:value"])]),_:2},1024),B("div",null,[$(H,{variant:"neutral",size:"smallIcon",class:"BuilderFieldsKeyValueModal__assistedEntries__form__deleteBtn",onClick:o=>y(p)(d)},{default:q(()=>[$(z,{name:"trash-2"})]),_:2},1032,["onClick"])])],64))),128))])):F("",!0),$(H,{variant:"special",size:"small",onClick:y(m)},{default:q(()=>[$(z,{name:"plus"}),x[5]||(x[5]=ae(" Add a pair "))]),_:1},8,["onClick"])])):F("",!0)]),_:1},8,["actions"]))}}),fn=K(mn,[["__scopeId","data-v-4e74be91"]]),yn=["data-automation-key"],gn={class:"BuilderFieldsKeyValue__toolbar"},_n={key:1,class:"BuilderFieldsKeyValue__listEmpty"},hn={key:2,class:"BuilderFieldsKeyValue__list"},bn=["data-writer-tooltip"],kn=["data-writer-tooltip"],Sn=W({__name:"BuilderFieldsKeyValue",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},instancePath:{type:Array,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=t,n=J({componentId:A(r,"componentId"),fieldKey:A(r,"fieldKey")}),v=R(P.core),s=R(P.secretsManager),{getEvaluatedFields:l}=Ee(v,s),a=N(!1),u=k(()=>{var I;return((I=l(r.instancePath))==null?void 0:I[r.fieldKey].value)??{}}),f=k(()=>n.value||JSON.stringify(u.value));function m(I){a.value=!1,n.value=I}return(I,b)=>(i(),C("div",{class:"BuilderFieldsKeyValue",tabindex:"-1","data-automation-key":r.fieldKey},[B("div",gn,[$(H,{variant:"neutral",size:"smallIcon","data-automation-key":"openAssistedMode",onClick:b[0]||(b[0]=p=>a.value=!0)},{default:q(()=>[$(z,{name:"pencil"})]),_:1})]),a.value?(i(),V(fn,{key:0,data:f.value,onSubmit:m,onClose:b[1]||(b[1]=p=>a.value=!1)},null,8,["data"])):F("",!0),Object.keys(u.value).length===0?(i(),C("div",_n,[b[4]||(b[4]=B("p",null,"There are no key value categories defined",-1)),$(H,{variant:"special",size:"small",onClick:b[2]||(b[2]=p=>a.value=!0)},{default:q(()=>[$(z,{name:"pencil"}),b[3]||(b[3]=ae(" Edit "))]),_:1})])):(i(),C("ul",hn,[(i(!0),C(L,null,Z(u.value,(p,c)=>(i(),C("li",{key:c,class:"BuilderFieldsKeyValue__list__item"},[B("p",{class:"BuilderFieldsKeyValue__list__item__key","data-writer-tooltip":c,"data-writer-tooltip-strategy":"overflow"},Y(c),9,bn),B("p",{class:"BuilderFieldsKeyValue__list__item__value","data-writer-tooltip":p,"data-writer-tooltip-strategy":"overflow"},Y(p||"<empty value>"),9,kn)]))),128))]))],8,yn))}}),In=K(Sn,[["__scopeId","data-v-43bf3550"]]),Bn=W({__name:"BuilderFieldsObject",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},defaultValue:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0}},setup(t){const r=t,n=J({componentId:A(r,"componentId"),fieldKey:A(r,"fieldKey"),defaultValue:A(r,"defaultValue")}),v=s=>{n.value=s.target.value};return(s,l)=>(i(),V(ne,{class:"BuilderFieldsObject","data-automation-key":r.fieldKey,multiline:"",variant:"code",value:y(n),placeholder:t.defaultValue,error:t.error,onInput:v},null,8,["data-automation-key","value","placeholder","error"]))}}),Cn=K(Bn,[["__scopeId","data-v-efbda4e8"]]),wn=["data-automation-key"],En={key:0,class:"main"},xn={key:0,class:"pickerContainer"},$n={class:"BuilderFieldsPadding__options"},Tn=W({__name:"BuilderFieldsPadding",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-C1IizHaQ.js").then(o=>o.bJ),__vite__mapDeps([1,2]),import.meta.url)}),n=U("rootEl"),v=U("pickerEl"),s=U("freehandInputEl"),l=U("fixedEl"),a=[{key:"all_sides",label:"All sides",match:o=>o.split(" ").length==1&&o.endsWith("px"),default:()=>c.value?c.value[0]:"0px"},{key:"XY sides",label:"XY sides",match:o=>o.split(" ").length==2&&o.endsWith("px"),default:()=>c.value?c.value[2]+" "+c.value[0]:"0px 0px"},{key:"Per side",label:"Per side",match:o=>o.split(" ").length==4&&o.endsWith("px"),default:()=>c.value?[c.value[3],c.value[1],c.value[2],c.value[0]].join(" "):"0px 0px 0px 0px"}],u={pick:v,css:s,default:null},f=t,m=J({componentId:A(f,"componentId"),fieldKey:A(f,"fieldKey")}),I=k(()=>a.map(o=>({value:o.key,label:o.label,icon:"panel-top-dashed"}))),b=k(()=>{const o=m.value;for(const e in a)if(o&&a[e].match(o))return a[e].key;return null}),p=k(()=>{const o=c.value;return o?[o[0].substring(0,o[0].length-2),o[1].substring(0,o[1].length-2),o[2].substring(0,o[2].length-2),o[3].substring(0,o[3].length-2)]:["0","0","0","0"]}),c=k(()=>{const o=m.value;if(o){const e=o.split(" ");if(e.length==1&&e[0].endsWith("px"))return[e[0],e[0],e[0],e[0]];if(e.length==2&&e[0].endsWith("px")&&e[0].endsWith("px"))return[e[1],e[1],e[0],e[0]];if(e.length==4&&e[0].endsWith("px")&&e[1].endsWith("px")&&e[2].endsWith("px")&&e[3].endsWith("px"))return[e[3],e[1],e[0],e[2]]}else return null;return null}),h=N((()=>{if(!m.value)return"default";for(const o in a)if(a[o].match(m.value))return"pick";return"css"})()),S=()=>{var e;const o=(e=u[h.value])==null?void 0:e.value;o&&(o.focus(),typeof o.selectionStart=="number"&&(o.selectionStart=o.selectionEnd=o.value.length))},O=async o=>{h.value!=o&&(h.value=o,await le(),S(),o==="default"&&(m.value=""))},x=o=>{for(const e in a)a[e].key==o&&(m.value=a[e].default());le(()=>{var e;(e=l.value)==null||e.focus()})},_=o=>{m.value=o.target.value},d=(o,e,T)=>{const M=Number(o),w=m.value;if(e=="all_sides")m.value=M+"px";else if(e=="XY sides"){const E=w.split(" ");T=="x"?E[1]=M+"px":T=="y"&&(E[0]=M+"px"),m.value=E.join(" ")}else if(e=="Per side"){const E=w.split(" ");T=="top"?E[0]=M+"px":T=="right"?E[1]=M+"px":T=="bottom"?E[2]=M+"px":T=="left"&&(E[3]=M+"px"),m.value=E.join(" ")}};return ie(()=>{n.value.addEventListener("focus",S)}),ge(()=>{n.value.removeEventListener("focus",S)}),(o,e)=>(i(),C("div",{ref_key:"rootEl",ref:n,class:"BuilderFieldsPadding",tabindex:"-1","data-automation-key":f.fieldKey},[$(se,{tabs:y(_e),"model-value":h.value,"onUpdate:modelValue":O},null,8,["tabs","model-value"]),h.value=="pick"||h.value=="css"?(i(),C("div",En,[h.value=="pick"?(i(),C("div",xn,[$(y(r),{ref_key:"pickerEl",ref:v,"model-value":b.value,options:I.value,"onUpdate:modelValue":x},null,8,["model-value","options"]),B("div",$n,[b.value=="all_sides"?(i(),C(L,{key:0},[e[7]||(e[7]=B("i",null,"All",-1)),$(ee,{ref_key:"fixedEl",ref:l,type:"number","model-value":p.value[0],"onUpdate:modelValue":e[0]||(e[0]=T=>d(T,b.value))},null,8,["model-value"]),e[8]||(e[8]=B("div",null,"px",-1))],64)):F("",!0),b.value=="XY sides"?(i(),C(L,{key:1},[e[9]||(e[9]=B("i",null,"X",-1)),$(ee,{type:"number","model-value":p.value[0],"onUpdate:modelValue":e[1]||(e[1]=T=>d(T,b.value,"x"))},null,8,["model-value"]),e[10]||(e[10]=B("div",null,"px",-1)),e[11]||(e[11]=B("i",null,"Y",-1)),$(ee,{type:"number","model-value":p.value[2],"onUpdate:modelValue":e[2]||(e[2]=T=>d(T,b.value,"y"))},null,8,["model-value"]),e[12]||(e[12]=B("div",null,"px",-1))],64)):F("",!0),b.value=="Per side"?(i(),C(L,{key:2},[e[13]||(e[13]=B("i",null,"Left",-1)),$(ee,{type:"number","model-value":p.value[0],"onUpdate:modelValue":e[3]||(e[3]=T=>d(T,b.value,"left"))},null,8,["model-value"]),e[14]||(e[14]=B("div",null,"px",-1)),e[15]||(e[15]=B("i",null,"Right",-1)),$(ee,{type:"number","model-value":p.value[1],"onUpdate:modelValue":e[4]||(e[4]=T=>d(T,b.value,"right"))},null,8,["model-value"]),e[16]||(e[16]=B("div",null,"px",-1)),e[17]||(e[17]=B("i",null,"Top",-1)),$(ee,{type:"number","model-value":p.value[2],"onUpdate:modelValue":e[5]||(e[5]=T=>d(T,b.value,"top"))},null,8,["model-value"]),e[18]||(e[18]=B("div",null,"px",-1)),e[19]||(e[19]=B("i",null,"Bottom",-1)),$(ee,{type:"number","model-value":p.value[3],"onUpdate:modelValue":e[6]||(e[6]=T=>d(T,b.value,"bottom"))},null,8,["model-value"]),e[20]||(e[20]=B("div",null,"px",-1))],64)):F("",!0)])])):F("",!0),h.value=="css"?(i(),V(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:y(m),error:t.error,onInput:_},null,8,["value","error"])):F("",!0)])):F("",!0)],8,wn))}}),Fn=K(Tn,[["__scopeId","data-v-e122e664"]]),Vn=["data-automation-key"],On={key:0,class:"main"},Mn={key:0,class:"pickerContainer"},qn={class:"param"},An={class:"header"},Dn=["value"],Rn={class:"param"},Pn={class:"header"},Wn=["value"],Un={class:"param"},Kn={class:"header"},jn=["value"],Ln={class:"param"},Nn={class:"header"},zn=["value"],Jn={class:"param"},Gn=["value"],Yn=W({__name:"BuilderFieldsShadow",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=U("rootEl"),n=U("freehandInputEl"),v=U("paramOffsetXEl"),s=U("paramOffsetYEl"),l=U("paramBlurRadiusEl"),a=U("paramSpreadRadiusEl"),u=U("paramColorEl"),f={pick:v,css:n,default:null},m=t,I=J({componentId:A(m,"componentId"),fieldKey:A(m,"fieldKey")}),b=/^(?<offsetX>[0-9]+)px (?<offsetY>[0-9]+)px (?<blurRadius>[0-9]+)px (?<spreadRadius>[0-9-]+)px (?<color>#[A-Fa-f0-9]{6})$/,c=N((()=>{const _=I.value;return _?b.test(_)?"pick":"css":"default"})()),g=()=>{var d;const _=(d=f[c.value])==null?void 0:d.value;_&&(_.focus(),typeof _.selectionStart=="number"&&(_.selectionStart=_.selectionEnd=_.value.length))},h=async _=>{c.value!=_&&(c.value=_,await le(),g(),_==="default"&&(I.value=""))},S=()=>{const _=v.value.value,d=s.value.value,o=l.value.value,e=a.value.value,T=u.value.value,M=`${_}px ${d}px ${o}px ${e}px ${T}`;I.value=M},O=_=>{I.value=_.target.value},x=k(()=>{const _=I.value.match(b);return(_==null?void 0:_.groups)??{}});return ie(()=>{r.value.addEventListener("focus",g)}),ge(()=>{r.value.removeEventListener("focus",g)}),(_,d)=>{var o,e,T,M,w,E,j,de,he,ce,De,Re,Pe;return i(),C("div",{ref_key:"rootEl",ref:r,class:"BuilderFieldsShadow",tabindex:"-1","data-automation-key":m.fieldKey},[$(se,{tabs:y(_e),"model-value":c.value,"onUpdate:modelValue":h},null,8,["tabs","model-value"]),c.value=="pick"||c.value=="css"?(i(),C("div",On,[c.value=="pick"?(i(),C("div",Mn,[B("div",qn,[B("div",An,[d[0]||(d[0]=B("div",{class:"name"},"Offset X",-1)),pe(B("div",{class:"value"},Y((o=x.value)==null?void 0:o.offsetX)+"px ",513),[[be,(e=x.value)==null?void 0:e.offsetX]])]),B("input",{ref_key:"paramOffsetXEl",ref:v,type:"range",min:"0",max:"32",value:(T=x.value)==null?void 0:T.offsetX,onInput:S},null,40,Dn)]),B("div",Rn,[B("div",Pn,[d[1]||(d[1]=B("div",{class:"name"},"Offset Y",-1)),pe(B("div",{class:"value"},Y((M=x.value)==null?void 0:M.offsetY)+"px ",513),[[be,(w=x.value)==null?void 0:w.offsetY]])]),B("input",{ref_key:"paramOffsetYEl",ref:s,type:"range",min:"0",max:"32",value:(E=x.value)==null?void 0:E.offsetY,onInput:S},null,40,Wn)]),B("div",Un,[B("div",Kn,[d[2]||(d[2]=B("div",{class:"name"},"Blur radius",-1)),pe(B("div",{class:"value"},Y((j=x.value)==null?void 0:j.blurRadius)+"px ",513),[[be,(de=x.value)==null?void 0:de.blurRadius]])]),B("input",{ref_key:"paramBlurRadiusEl",ref:l,type:"range",min:"0",max:"32",value:(he=x.value)==null?void 0:he.blurRadius,onInput:S},null,40,jn)]),B("div",Ln,[B("div",Nn,[d[3]||(d[3]=B("div",{class:"name"},"Spread radius",-1)),pe(B("div",{class:"value"},Y((ce=x.value)==null?void 0:ce.spreadRadius)+"px ",513),[[be,(De=x.value)==null?void 0:De.spreadRadius]])]),B("input",{ref_key:"paramSpreadRadiusEl",ref:a,type:"range",min:"-16",max:"32",value:(Re=x.value)==null?void 0:Re.spreadRadius,onInput:S},null,40,zn)]),B("div",Jn,[d[4]||(d[4]=B("div",{class:"header"},[B("div",{class:"name"},"Color")],-1)),B("input",{ref_key:"paramColorEl",ref:u,type:"color",value:(Pe=x.value)==null?void 0:Pe.color,onInput:S},null,40,Gn)])])):F("",!0),c.value=="css"?(i(),V(ne,{key:1,ref_key:"freehandInputEl",ref:n,value:y(I),error:t.error,onInput:O},null,8,["value","error"])):F("",!0)])):F("",!0)],8,Vn)}}}),Hn=K(Yn,[["__scopeId","data-v-c59dcd63"]]),Xn=["data-automation-key"],Qn={key:0,class:"main"},Zn={key:0,class:"pickerContainer"},eo={key:0,class:"fixedContainer"},to=W({__name:"BuilderFieldsWidth",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-C1IizHaQ.js").then(d=>d.bJ),__vite__mapDeps([1,2]),import.meta.url)}),n=U("rootEl"),v=U("pickerEl"),s=U("freehandInputEl"),l=U("fixedEl"),a=[{key:"fixed",label:"Fixed",match:d=>d.endsWith("px"),default:"160px"},{key:"fit-content",label:"Fit Content",match:d=>d=="fit-content",default:"fit-content"},{key:"full",label:"Full",match:d=>d=="100%",default:"100%"}],u={pick:v,css:s,default:null},f=t,m=J({componentId:A(f,"componentId"),fieldKey:A(f,"fieldKey")}),I=k(()=>a.map(d=>({value:d.key,label:d.label,icon:"move-horizontal"}))),b=k(()=>{const d=m.value;for(const o in a)if(d&&a[o].match(d))return a[o].key;return null}),p=k(()=>{const d=m.value;if(d){if(d.endsWith("px"))return d.substring(0,d.length-2)}else return null;return null}),g=N((()=>{if(!m.value)return"default";for(const d in a)if(a[d].match(m.value))return"pick";return"css"})()),h=()=>{var o;const d=(o=u[g.value])==null?void 0:o.value;d&&(d.focus(),typeof d.selectionStart=="number"&&(d.selectionStart=d.selectionEnd=d.value.length))},S=async d=>{g.value!=d&&(g.value=d,await le(),h(),d==="default"&&(m.value=""))},O=d=>{for(const o in a)if(a[o].key==d){const e=a[o].default;m.value=e}d=="fixed"&&le(()=>{l.value.focus()})},x=d=>{m.value=d.target.value},_=d=>{m.value=`${d}px`};return ie(()=>{n.value.addEventListener("focus",h)}),ge(()=>{n.value.removeEventListener("focus",h)}),(d,o)=>(i(),C("div",{ref_key:"rootEl",ref:n,class:"BuilderFieldsWidth",tabindex:"-1","data-automation-key":f.fieldKey},[$(se,{tabs:y(_e),"model-value":g.value,"onUpdate:modelValue":S},null,8,["tabs","model-value"]),g.value=="pick"||g.value=="css"?(i(),C("div",Qn,[g.value=="pick"?(i(),C("div",Zn,[$(y(r),{ref_key:"pickerEl",ref:v,"model-value":b.value,options:I.value,"onUpdate:modelValue":O},null,8,["model-value","options"]),b.value=="fixed"?(i(),C("div",eo,[$(ee,{ref_key:"fixedEl",ref:l,type:"number","model-value":p.value,invalid:t.error!==void 0,"onUpdate:modelValue":_},null,8,["model-value","invalid"]),o[0]||(o[0]=B("div",null,"px",-1))])):F("",!0)])):F("",!0),g.value=="css"?(i(),V(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:y(m),onInput:x},null,8,["value"])):F("",!0)])):F("",!0)],8,Xn))}}),no=K(to,[["__scopeId","data-v-55a31bea"]]),oo=["data-automation-key"],lo={class:"tools"},ao=["onClick"],io={class:"toolName"},so={class:"addToolForm"},ro=W({__name:"BuilderFieldsTools",props:{componentId:{},fieldKey:{}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderGraphSelect-8RLB_vrG.js"),__vite__mapDeps([15,1,2,16,17]),import.meta.url)}),n=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-CY65_X2M.js").then(d=>d.B),__vite__mapDeps([13,1,2,14]),import.meta.url)}),s={isShown:!1,type:"function",name:"new_tool",code:`
{
	"description": "Gets info for an employee, given an employee id",
    "parameters": {
      "id": {"type": "string", "description": "Id of the employee"}
    }
}
`.trim(),graphIds:"",binding:!1,includeDomains:"",excludeDomains:"",includeRawContent:!1},l=N(s),a=k(()=>{switch(l.value.type){case"function":return!l.value.code;case"graph":return!l.value.graphIds;case"web_search":return!1;default:return!0}}),u=k({get:()=>l.value.graphIds.split(",").filter(d=>!d.startsWith("@{")),set(d){l.value={...l.value,graphIds:d.join(",")}}}),f=k({get:()=>{const d=Te.exec(l.value.graphIds);return(d==null?void 0:d[1])??""},set(d){l.value={...l.value,graphIds:`@{${d}}`}}}),m=t,I=J({componentId:A(m,"componentId"),fieldKey:A(m,"fieldKey")}),b=k(()=>{try{return JSON.parse(I.value)}catch{return{}}});function p(){l.value={...s,isShown:!0}}function c(){const{type:d,code:o,graphIds:e,includeDomains:T,excludeDomains:M,includeRawContent:w}=l.value;if(d=="function")return{...JSON.parse(o),type:d};if(d=="graph"){const E=e.split(",").map(j=>j.trim());return{type:d,graph_ids:E}}if(d=="web_search"){const E={type:d};return T.trim()&&(E.include_domains=T.split(",").map(j=>j.trim()).filter(j=>j)),M.trim()&&(E.exclude_domains=M.split(",").map(j=>j.trim()).filter(j=>j)),w&&(E.include_raw_content=w),E}throw"Unexpected tool type."}function g(d){let o=[];const{originalName:e,name:T}=d;return T||o.push("The name cannot be empty."),Object.keys(b.value).includes(T)&&!(e||e==T)&&o.push("An existing tool with the specified name already exists."),o}function h(){const d=g(l.value);if(d.length>0){d.forEach(alert);return}let o;try{o=c()}catch{alert("Incorrect tool definition");return}const{originalName:e,name:T}=l.value;let M={...b.value};if(e&&e!==T){const{[e]:w,...E}=M;M=E}M[T]=o,I.value=JSON.stringify(M),l.value.isShown=!1}function S(d,o){var T,M,w,E;const{type:e}=o;if(e=="function")return{isShown:!0,type:"function",binding:!1,originalName:d,name:d,graphIds:"",code:JSON.stringify(o,void 0,2),includeDomains:"",excludeDomains:"",includeRawContent:!1};if(e=="graph"){const j=Te.test(((T=o.graph_ids)==null?void 0:T.at(0))??"");return{isShown:!0,type:"graph",originalName:d,name:d,binding:j,graphIds:((M=o.graph_ids)==null?void 0:M.join(","))??"",code:"",includeDomains:"",excludeDomains:"",includeRawContent:!1}}if(e=="web_search")return{isShown:!0,type:"web_search",originalName:d,name:d,graphIds:"",binding:!1,code:"",includeDomains:((w=o.include_domains)==null?void 0:w.join(", "))??"",excludeDomains:((E=o.exclude_domains)==null?void 0:E.join(", "))??"",includeRawContent:o.include_raw_content??!1};throw"Unexpected tool type;"}function O(d){var e;const o=(e=b.value)==null?void 0:e[d];o&&(l.value=S(d,o))}function x(d){const{[d]:o,...e}={...b.value};I.value=JSON.stringify(e)}const _=k(()=>[{desc:"cancel",fn:()=>l.value.isShown=!1},{desc:"Save",disabled:a.value,fn:h}]);return(d,o)=>(i(),C("div",{class:"BuilderFieldsTools colorTransformer","data-automation-key":m.fieldKey},[B("div",lo,[(i(!0),C(L,null,Z(b.value,(e,T)=>(i(),C("div",{key:T,class:"tool",onClick:M=>O(T)},[B("div",io,Y(T),1),$(H,{variant:"primary",size:"smallIcon",class:"delete",onClick:oe(M=>x(T),["stop"])},{default:q(()=>[$(z,{name:"trash-2"})]),_:2},1032,["onClick"])],8,ao))),128))]),$(H,{size:"small",onClick:p},{default:q(()=>[$(z,{name:"plus"}),o[9]||(o[9]=ae(" Add tool "))]),_:1}),l.value.isShown?(i(),V(Oe,{key:0,actions:_.value,title:"Add tool","allow-overflow":""},{default:q(()=>[B("div",so,[$(te,{label:"Tool type"},{default:q(()=>[$(dt,{modelValue:l.value.type,"onUpdate:modelValue":o[0]||(o[0]=e=>l.value.type=e)},{default:q(()=>o[10]||(o[10]=[B("option",{value:"function"},"Function",-1),B("option",{value:"graph"},"Knowledge graph",-1),B("option",{value:"web_search"},"Web search",-1)])),_:1},8,["modelValue"])]),_:1}),$(te,{label:"Tool name"},{default:q(()=>[$(ee,{modelValue:l.value.name,"onUpdate:modelValue":o[1]||(o[1]=e=>l.value.name=e)},null,8,["modelValue"])]),_:1}),l.value.type=="function"?(i(),V(te,{key:0,"frame-slot":!0,label:"Function tool definition"},{default:q(()=>[$(y(n),{modelValue:l.value.code,"onUpdate:modelValue":o[2]||(o[2]=e=>l.value.code=e),class:"addToolForm__codeEditor",variant:"minimal",language:"json"},null,8,["modelValue"])]),_:1})):F("",!0),l.value.type=="graph"?(i(),V(te,{key:1,"is-binding-enabled":l.value.binding,"onUpdate:isBindingEnabled":o[5]||(o[5]=e=>l.value.binding=e),label:"Graph id(s)",hint:"Specify the id of the knowledge graph you want to use. If multiple, separate the ids using commas.","is-binding-button-shown":""},{default:q(()=>[l.value.binding?(i(),V(ne,{key:0,type:"state",value:f.value,"onUpdate:value":o[3]||(o[3]=e=>f.value=e)},null,8,["value"])):(i(),V(y(r),{key:1,modelValue:u.value,"onUpdate:modelValue":o[4]||(o[4]=e=>u.value=e),"enable-multi-selection":""},null,8,["modelValue"]))]),_:1},8,["is-binding-enabled"])):F("",!0),l.value.type=="web_search"?(i(),V(te,{key:2,label:"Include domains (optional)",hint:"Comma-separated list of domains to search within (e.g., wikipedia.org, docs.python.org)"},{default:q(()=>[$(ee,{modelValue:l.value.includeDomains,"onUpdate:modelValue":o[6]||(o[6]=e=>l.value.includeDomains=e),placeholder:"domain1.com, domain2.org"},null,8,["modelValue"])]),_:1})):F("",!0),l.value.type=="web_search"?(i(),V(te,{key:3,label:"Exclude domains (optional)",hint:"Comma-separated list of domains to exclude from results"},{default:q(()=>[$(ee,{modelValue:l.value.excludeDomains,"onUpdate:modelValue":o[7]||(o[7]=e=>l.value.excludeDomains=e),placeholder:"spam.com, ads.net"},null,8,["modelValue"])]),_:1})):F("",!0),l.value.type=="web_search"?(i(),V(te,{key:4,label:"Include raw content",hint:"Include full page content in search results"},{default:q(()=>[$(qe,{modelValue:l.value.includeRawContent,"onUpdate:modelValue":o[8]||(o[8]=e=>l.value.includeRawContent=e),label:"Include raw content"},null,8,["modelValue"])]),_:1})):F("",!0)])]),_:1},8,["actions"])):F("",!0)],8,oo))}}),uo=K(ro,[["__scopeId","data-v-9b70cc0d"]]),co=["data-automation-key"],po={class:"availableMcpTools"},vo={class:"sectionHeader"},mo={key:0,class:"errorState"},fo={key:1,class:"loadingState"},yo={key:2,class:"emptyState"},go=["onClick"],_o={class:"iconContainer"},ho=["src","alt"],bo={class:"appName"},ko={key:1,class:"selectedCount"},So={key:0,class:"mcpFunctionsList"},Io=["data-writer-tooltip"],Bo=["onClick"],Co={class:"functionName"},wo={key:0,class:"functionDescription"},Eo=W({__name:"BuilderFieldsToolsWithMcp",props:{componentId:{},fieldKey:{}},setup(t){const r=R(P.core),n=Le(),{writerApi:v}=ct(),s=N([]),l=N(!1),a=N(void 0),u=N(new Set),f=k(()=>{var _;const x={};for(const d of s.value){const o=d.appName||"Unknown App";x[o]||(x[o]={functions:[],logo:(_=d.connector)==null?void 0:_.logo}),x[o].functions.push(d)}return x}),m=k(()=>{const x={};for(const[_,d]of Object.entries(f.value))x[_]=d.functions.filter(o=>p(o)).length;return x});function I(x){u.value.has(x)?u.value.delete(x):u.value.add(x)}function b(x){return`${x.appName}_${x.functionName}`.replace(/[^a-zA-Z0-9_]/g,"_")}function p(x){return b(x)in O.value}function c(x,_){const d=b(x);if(_){const o={type:"mcp",appId:x.appId,functionName:x.functionName,function:x.function};S.value=JSON.stringify({...O.value,[d]:o})}else{const{[d]:o,...e}=O.value;S.value=JSON.stringify(e)}}async function g(){const x=r.writerOrgId.value;if(!x){a.value=new Error("No organization ID available");return}l.value=!0,a.value=void 0;try{const _=r.writerAppId.value;s.value=await v.fetchMcpTools(x,_)}catch(_){const d=_ instanceof Error?_:new Error(String(_));a.value=d,s.value=[]}finally{l.value=!1}}ie(()=>{g()});const h=t,S=J({componentId:A(h,"componentId"),fieldKey:A(h,"fieldKey")}),O=k(()=>{try{return JSON.parse(S.value)}catch(x){return n.error(x),{}}});return(x,_)=>(i(),C("div",{class:"BuilderFieldsToolsWithMcp colorTransformer","data-automation-key":h.fieldKey},[B("div",po,[B("div",vo,[_[2]||(_[2]=B("div",{class:"sectionTitle"},"Available MCP Tools",-1)),$(H,{size:"small",variant:"secondary",loading:l.value,onClick:_[0]||(_[0]=d=>g())},{default:q(()=>[$(z,{name:"refresh-cw"}),_[1]||(_[1]=ae(" Refresh "))]),_:1},8,["loading"])]),a.value?(i(),C("div",mo,[ae(" Error loading MCP tools: "+Y(a.value.message)+" ",1),_[3]||(_[3]=B("br",null,null,-1)),_[4]||(_[4]=B("small",null,"Check console for details",-1))])):l.value&&s.value.length===0?(i(),C("div",fo,[(i(),C(L,null,Z(3,d=>B("div",{key:d,class:"loadingSkeleton"},[$(We,{style:{width:"200px","margin-bottom":"8px"}}),$(We,{style:{width:"150px"}})])),64))])):s.value.length===0?(i(),C("div",yo,_[5]||(_[5]=[ae(" No MCP tools available "),B("br",null,null,-1),B("small",null,"Make sure you have connected MCP applications with enabled functions",-1)]))):(i(),C("div",{key:3,class:me(["mcpToolsList",{loading:l.value}])},[(i(!0),C(L,null,Z(f.value,(d,o)=>(i(),C("div",{key:o,class:me(["mcpAppGroup",{expanded:u.value.has(o)}])},[B("div",{class:me(["mcpAppHeader",{expanded:u.value.has(o)}]),onClick:e=>I(o)},[B("div",_o,[$(z,{name:u.value.has(o)?"minus":"plus",class:"expandIcon"},null,8,["name"])]),d.logo?(i(),C("img",{key:0,src:d.logo,alt:`${o} logo`,class:"appLogo"},null,8,ho)):F("",!0),B("span",bo,Y(o),1),m.value[o]>0?(i(),C("span",ko,Y(m.value[o])+" selected ",1)):F("",!0)],10,go),u.value.has(o)?(i(),C("div",So,[(i(!0),C(L,null,Z(d.functions,e=>{var T,M;return i(),C("div",{key:`${e.appId}-${e.functionName}`,class:"mcpFunctionItem","data-writer-tooltip":(T=e.function)==null?void 0:T.description,"data-writer-tooltip-placement":"left"},[$(qe,{class:"functionCheckbox","model-value":p(e),"onUpdate:modelValue":w=>c(e,w)},null,8,["model-value","onUpdate:modelValue"]),B("div",{class:"functionInfo",onClick:w=>c(e,!p(e))},[B("div",Co,Y(e.functionName),1),(M=e.function)!=null&&M.description?(i(),C("div",wo,Y(e.function.description),1)):F("",!0)],8,Bo)],8,Io)}),128))])):F("",!0)],2))),128))],2))])],8,co))}}),xo=K(Eo,[["__scopeId","data-v-c8204108"]]),$o=W({__name:"BuilderFieldsCode",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0},isExpanded:{type:Boolean,required:!0},inputLanguage:{type:String,required:!0},singleLine:{type:Boolean,required:!1}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-CY65_X2M.js").then(l=>l.B),__vite__mapDeps([13,1,2,14]),import.meta.url)}),n=t,v=J({componentId:A(n,"componentId"),fieldKey:A(n,"fieldKey")}),s=k(()=>n.singleLine?"single-line":n.isExpanded?"half-screen":"minimal");return(l,a)=>(i(),V(y(r),{modelValue:y(v),"onUpdate:modelValue":a[0]||(a[0]=u=>ye(v)?v.value=u:null),language:t.inputLanguage,variant:s.value,class:"BuilderFieldsCode"},null,8,["modelValue","language","variant"]))}}),Ke=K($o,[["__scopeId","data-v-a2ca567b"]]),To=["data-automation-key"],Fo=W({__name:"BuilderFieldsBlueprintKey",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-C1IizHaQ.js").then(m=>m.bJ),__vite__mapDeps([1,2]),import.meta.url)}),n=R(P.core),v=R(P.builderManager),s=t,l=J({componentId:A(s,"componentId"),fieldKey:A(s,"fieldKey")}),a=k(()=>{const m=new Set;for(const p of n.getComponents("blueprints_root"))p.content.key&&m.add(p.content.key);const I=[...m].sort((p,c)=>p.localeCompare(c)).map(p=>({value:p,label:p,icon:"wds-blueprints"})),b=[{value:"",label:"(No blueprint)",icon:"block"},...I];if(!b.some(p=>p.value===l.value)){const p=l.value;b.push({value:p,label:p})}return b}),u=k(()=>{const m=n.getComponents("blueprints_root").find(I=>I.content.key===l.value);return m==null?void 0:m.id});function f(){u.value&&(v.setSelection(u.value,null,"click"),n.setActivePageId(u.value))}return(m,I)=>(i(),C("div",{class:"BuilderFieldsBlueprintKey","data-automation-key":s.fieldKey},[$(y(r),{modelValue:y(l),"onUpdate:modelValue":I[0]||(I[0]=b=>ye(l)?l.value=b:null),options:a.value},null,8,["modelValue","options"]),u.value?(i(),V(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the blueprint",onClick:f},{default:q(()=>[$(z,{name:"square-dashed-mouse-pointer"})]),_:1})):F("",!0)],8,To))}}),Vo=K(Fo,[["__scopeId","data-v-f1beb9af"]]),Oo=["data-automation-key"],Mo=W({__name:"BuilderFieldsBlueprintId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=R(P.core),n=t,v=k(()=>r.getComponentById(n.componentId)),s=k(()=>{var l;return((l=v.value)==null?void 0:l.parentId)??""});return(l,a)=>(i(),C("div",{class:"BuilderFieldsBlueprintId","data-automation-key":n.fieldKey},[$(ee,{"model-value":s.value,disabled:""},null,8,["model-value"])],8,Oo))}}),qo=K(Mo,[["__scopeId","data-v-23c33b8b"]]),Ao=["data-automation-key"],Do=W({__name:"BuilderFieldsHandler",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-C1IizHaQ.js").then(a=>a.bJ),__vite__mapDeps([1,2]),import.meta.url)}),n=R(P.core),v=t,s=J({componentId:A(v,"componentId"),fieldKey:A(v,"fieldKey")}),l=k(()=>{const a=n.userFunctions.value.map(f=>f.name).sort((f,m)=>f.localeCompare(m)).map(f=>({value:f,label:f,icon:"wds-function"})),u=[{value:"",label:"(No handler)",icon:"ban"},...a];if(!u.some(f=>f.value===s.value)){const f=s.value;u.push({value:f,label:f})}return u});return(a,u)=>(i(),C("div",{class:"BuilderFieldsHandler","data-automation-key":v.fieldKey},[$(y(r),{modelValue:y(s),"onUpdate:modelValue":u[0]||(u[0]=f=>ye(s)?s.value=f:null),options:l.value},null,8,["modelValue","options"])],8,Ao))}}),Ro=["data-automation-key"],Po=["href","data-writer-tooltip"],Wo=W({__name:"BuilderFieldsWriterResourceId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},hint:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},resourceType:{type:String,required:!0},enableMultiSelection:{type:Boolean,required:!1,default:!1},isBindingButtonShown:{type:Boolean,required:!1,default:!1}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderApplicationSelect-C8Tb3ZRM.js"),__vite__mapDeps([18,1,2,16,19]),import.meta.url)}),n=X({loader:()=>Q(()=>import("./BuilderGraphSelect-8RLB_vrG.js"),__vite__mapDeps([15,1,2,16,17]),import.meta.url)}),v=X({loader:()=>Q(()=>import("./BuilderModelSelect-Dy55EZP4.js"),__vite__mapDeps([20,1,2,16,21]),import.meta.url)}),s=t,l=J({componentId:A(s,"componentId"),fieldKey:A(s,"fieldKey")}),{isBindingMode:a,toggleBindingMode:u}=Qe({fieldViewModel:l}),f=J({componentId:A(s,"componentId"),fieldKey:"appInputs"}),m=U("selectorEl"),I=k(()=>{switch(s.resourceType){case"model":return v;case"graph":return n;case"application":return r;default:throw new Error(`Unexpected resourceType: ${s.resourceType}`)}}),b=k(()=>{switch(s.resourceType){case"graph":return"Edit knowledge graph";case"application":return"Edit agent";case"model":return"About models";default:return}}),p=k(()=>{var O,x;if(Array.isArray(c.value))return;const h=c.value;if(!h)return;const S=(x=(O=m.value)==null?void 0:O.selectedData)==null?void 0:x.organization_id;if(S)switch(s.resourceType){case"graph":{const _=new URLSearchParams({graphId:h});return`https://app.writer.com/aistudio/organization/${S}/knowledge-graph?${_}`}case"application":return`https://app.writer.com/aistudio/organization/${S}/app/${h}`;case"model":return"https://dev.writer.com/home/models#model-overview";default:return}}),c=k({get(){if(s.enableMultiSelection){const h=l.value||"[]";try{return JSON.parse(h)}catch{return[]}}return l.value},set(h){l.value=s.enableMultiSelection?JSON.stringify(h):String(h)}});function g(h){s.resourceType!=="application"||!h||!h.inputs||typeof h.inputs!="object"||(f.value=JSON.stringify(h.inputs))}return(h,S)=>(i(),V(te,{"is-binding-button-shown":t.isBindingButtonShown,"is-binding-enabled":y(a),label:t.label,unit:t.unit,hint:t.hint,error:t.error,"data-automation-key":t.fieldKey,"onUpdate:isBindingEnabled":y(u)},{default:q(()=>[B("div",{class:"BuilderFieldsWriterResourceId","data-automation-key":t.fieldKey},[y(a)?(i(),V(Ae,{key:0,type:"state-template","component-id":t.componentId,"field-key":t.fieldKey,error:t.error,"default-value":""},null,8,["component-id","field-key","error"])):(i(),V(Fe(I.value),{key:1,ref_key:"selectorEl",ref:m,modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=O=>c.value=O),"enable-multi-selection":t.enableMultiSelection,onSelectedData:g},null,40,["modelValue","enable-multi-selection"])),p.value?(i(),C("a",{key:2,class:"BuilderFieldsWriterResourceId__link",href:p.value,target:"_blank","data-writer-tooltip":b.value},[$(z,{name:"external-link"})],8,Po)):F("",!0)],8,Ro)]),_:1},8,["is-binding-button-shown","is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"]))}}),ke=K(Wo,[["__scopeId","data-v-59e28cc4"]]),Uo=["data-automation-key"],Ko=W({__name:"BuilderFieldsComponentId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-C1IizHaQ.js").then(p=>p.bJ),__vite__mapDeps([1,2]),import.meta.url)}),n=R(P.core),v=R(P.builderManager),s=t,l=J({componentId:A(s,"componentId"),fieldKey:A(s,"fieldKey")});function*a(){yield n.getComponentById("root"),yield*n.getComponentsNested("root")}const u=k(()=>{const p=[];for(const c of a()){const g=n.getComponentDefinition(c==null?void 0:c.type);if(!(g!=null&&g.events)||Object.keys(g.events).length===0)continue;const{name:h,previewText:S,possibleImageUrls:O}=Ne(n,c),x=O.value,_=c.id;p.push({value:_,label:S.value||h.value,detail:S.value?h.value:void 0,icon:x})}return p}),f=k({get:()=>l.value,set(p){l.value=String(p)}}),m=k(()=>{let p=f.value;for(;p;){const c=n.getComponentById(p);if(c.type==="page")return c.id;p=c.parentId}}),I=k(()=>n.getComponentById(f.value));function b(){!f.value||!I.value||(m.value&&(v.mode.value="ui",n.setActivePageId(m.value)),v.setSelection(f.value,null,"click"))}return(p,c)=>(i(),C("div",{class:"BuilderFieldsComponentId","data-automation-key":s.fieldKey},[$(y(r),{modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=g=>f.value=g),options:u.value,"enable-search":""},null,8,["modelValue","options"]),f.value?(i(),V(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the element",disabled:!I.value,onClick:b},{default:q(()=>[$(z,{name:"square-dashed-mouse-pointer"})]),_:1},8,["disabled"])):F("",!0)],8,Uo))}}),jo=K(Ko,[["__scopeId","data-v-fcce992f"]]),Lo=["data-automation-key"],No=W({__name:"BuilderFieldsComponentEventType",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-C1IizHaQ.js").then(m=>m.bJ),__vite__mapDeps([1,2]),import.meta.url)}),n=R(P.core),v=t,s=J({componentId:A(v,"componentId"),fieldKey:A(v,"fieldKey")}),l=k(()=>n.getComponentById(v.componentId)),a=k(()=>{var m;return n.getComponentDefinition((m=l.value)==null?void 0:m.type)}),u=k(()=>{var c,g;const m=(g=Object.entries(((c=a.value)==null?void 0:c.fields)??{}).find(([,h])=>h.type===D.ComponentId))==null?void 0:g.at(0);if(m===void 0)return[];const I=l.value.content[String(m)],b=n.getComponentById(I),p=n.getComponentDefinition(b==null?void 0:b.type);return p!=null&&p.events?Object.keys(p.events).map(h=>({value:h,label:h})):[]}),f=k({get:()=>s.value,set(m){s.value=String(m)}});return(m,I)=>(i(),C("div",{class:"BuilderFieldsComponentEventType","data-automation-key":v.fieldKey},[u.value.length?(i(),V(y(r),{key:0,modelValue:f.value,"onUpdate:modelValue":I[0]||(I[0]=b=>f.value=b),options:u.value,"hide-icons":""},null,8,["modelValue","options"])):(i(),V(ee,{key:1,modelValue:f.value,"onUpdate:modelValue":I[1]||(I[1]=b=>f.value=b)},null,8,["modelValue"]))],8,Lo))}});function zo(t,r,n){const{getEvaluatedFields:v}=Ee(t,n);function s(m){return!!Te.exec(m)}const l=k(()=>{var m;return(m=r.value.at(-1))==null?void 0:m.componentId}),a=k(()=>{if(l.value!==void 0)return t.getComponentById(l.value)}),u=k(()=>{var m,I;return(m=a.value)!=null&&m.type?((I=t.getComponentDefinition(a.value.type))==null?void 0:I.fields)??{}:{}}),f=k(()=>v(r.value));return k(()=>Object.entries(u.value).reduce((m,[I,b])=>{var g;const p=((g=a.value.content)==null?void 0:g[I])??"";if(s(p))return m;const c=f.value[I].value;return m[I]=Jo(t,l.value,b,c),m},{}))}function Jo(t,r,n,v){let s=n.validator;if(s===void 0&&typeof n.options=="object"&&n.options!==null&&Object.keys(n.options).length>0?s=pt(Object.keys(n.options)):typeof s=="function"&&(s=s(t,r)),s===void 0)return;const l=vt(s);if(!(l(v)||l.errors===void 0))return Yo(l.errors)}function Go(t){var n;if(t.keyword==="format"&&Object.values(mt).includes(t.params.format))return ft[t.params.format].errorMessage;let r="";return t.instancePath&&(r+=`${t.instancePath} `),r+=t.message,Array.isArray((n=t.params)==null?void 0:n.allowedValues)&&(r+=`: ${t.params.allowedValues.join(", ")}`),r}function Yo(t){return t.map(Go).join(`
`)}const Ho={key:0,class:"BuilderSettingsProperties"},Xo=["inert"],Qo=W({__name:"BuilderSettingsProperties",props:{isReadOnly:{type:Boolean}},setup(t){const r=R(P.core),n=R(P.builderManager),v=R(P.secretsManager),s=N(new Set),l=k(()=>{var e;return n.expandedEditorForComponent.value===((e=u.value)==null?void 0:e.id)}),a=k(()=>{var e,T;return Ye((T=(e=n.firstSelectedItem)==null?void 0:e.value)==null?void 0:T.instancePath)}),u=k(()=>r.getComponentById(n.firstSelectedId.value)),f=k(()=>{var e;return r.getComponentDefinition((e=u.value)==null?void 0:e.type)}),{getEvaluatedFields:m}=Ee(r,v),I=k(()=>m(a.value)),b=k(()=>{var T;const e=Object.entries(((T=f.value)==null?void 0:T.fields)??{}).filter(([M,w])=>w.isArtifactField?!1:w.enabled===void 0?!0:w.enabled({evaluatedFields:I.value}));return Object.fromEntries(e)});function p(e){return e.type===D.Code||e.type===D.JSONInput||e.type===D.Object||e.control===Se.Textarea}const c=zo(r,a,v),g=N(G.General),h=Object.freeze({[G.General]:"Configure",[G.Style]:"Style",[G.Tools]:"Tools"}),S=k(()=>O.value.map(e=>({label:h[e]??e,value:e}))),O=k(()=>[G.General,G.Style,G.Tools].filter(e=>{var T;return(T=x.value[e])==null?void 0:T.length})),x=k(()=>{const e={[G.General]:[],[G.Style]:[],[G.Tools]:[]};return Object.entries(b.value).forEach(([T,M])=>{const w=M.category||G.General;e[w]&&e[w].push([T,M])}),{[G.General]:_(e[G.General]),[G.Style]:_(e[G.Style]),[G.Tools]:_(e[G.Tools])}});function _(e){return e.map((T,M)=>[T,M]).sort(([T,M],[w,E])=>{const j=T[1].order??0;return(w[1].order??0)-j||M-E}).map(([T])=>T)}function d(e){var T;n.expandedEditorForComponent.value=((T=u.value)==null?void 0:T.id)??null,s.value.add(e)}function o(e){n.expandedEditorForComponent.value=null,s.value.delete(e)}return(e,T)=>y(n).isSingleSelectionActive?(i(),C("div",Ho,[O.value.length>1?(i(),V(se,{key:0,modelValue:g.value,"onUpdate:modelValue":T[0]||(T[0]=M=>g.value=M),variant:"bar",tabs:S.value},null,8,["modelValue","tabs"])):F("",!0),(i(!0),C(L,null,Z(O.value.length>1?[g.value]:O.value,M=>(i(),C("div",{key:M,inert:t.isReadOnly,class:"BuilderSettingsProperties__category"},[(i(!0),C(L,null,Z(x.value[M],([w,E])=>(i(),C("div",{key:w,class:"BuilderSettingsProperties__category__field"},[E.type===y(D).Boolean?(i(),V(cn,{key:0,"field-key":w,"component-id":u.value.id,label:E.name??w,hint:E.desc,unit:E.type,error:y(c)[w]},null,8,["field-key","component-id","label","hint","unit","error"])):E.type===y(D).WriterGraphId?(i(),V(ke,{key:1,"is-binding-button-shown":"","field-key":w,"component-id":u.value.id,label:E.name??w,hint:E.desc,unit:E.type,error:y(c)[w],"resource-type":"graph"},null,8,["field-key","component-id","label","hint","unit","error"])):E.type===y(D).WriterGraphIds?(i(),V(ke,{key:2,"is-binding-button-shown":"","field-key":w,"component-id":u.value.id,label:E.name??w,hint:E.desc,unit:E.type,error:y(c)[w],"resource-type":"graph","enable-multi-selection":""},null,8,["field-key","component-id","label","hint","unit","error"])):E.type===y(D).WriterAppId?(i(),V(ke,{key:3,"field-key":w,"component-id":u.value.id,label:E.name??w,hint:E.desc,unit:E.type,error:y(c)[w],"resource-type":"application"},null,8,["field-key","component-id","label","hint","unit","error"])):E.type===y(D).WriterModelId?(i(),V(ke,{key:4,"field-key":w,"component-id":u.value.id,label:E.name??w,hint:E.desc,unit:E.type,error:y(c)[w],"resource-type":"model"},null,8,["field-key","component-id","label","hint","unit","error"])):(i(),V(te,{key:5,label:M==="Tools"?void 0:E.name??w,hint:E.desc,unit:E.type,error:y(c)[w],"is-expansible":p(E),"should-expand":p(E)&&l.value,onExpand:j=>d(w),onShrink:j=>o(w)},{default:q(()=>[E.type==y(D).Color?(i(),V(an,{key:0,"field-key":w,"component-id":u.value.id,error:y(c)[w]},null,8,["field-key","component-id","error"])):F("",!0),E.type==y(D).Shadow?(i(),V(Hn,{key:1,"field-key":w,"component-id":u.value.id,error:y(c)[w]},null,8,["field-key","component-id","error"])):F("",!0),E.type==y(D).KeyValue?(i(),V(In,{key:2,"field-key":w,"component-id":u.value.id,"instance-path":a.value,error:y(c)[w]},null,8,["field-key","component-id","instance-path","error"])):F("",!0),E.type==y(D).Text||E.type==y(D).Number||E.type==y(D).Binding||E.type==y(D).IdKey?(i(),V(Ae,{key:3,type:E.type==y(D).Binding?"state":"template","field-key":w,"field-control":E.control,"component-id":u.value.id,"default-value":E.default,error:y(c)[w]},null,8,["type","field-key","field-control","component-id","default-value","error"])):F("",!0),E.type==y(D).BlueprintId?(i(),V(qo,{key:4,"field-key":w,"component-id":u.value.id},null,8,["field-key","component-id"])):F("",!0),E.type==y(D).BlueprintKey?(i(),V(Vo,{key:5,"field-key":w,"component-id":u.value.id},null,8,["field-key","component-id"])):F("",!0),E.type==y(D).Handler?(i(),V(Do,{key:6,"field-key":w,"component-id":u.value.id},null,8,["field-key","component-id"])):F("",!0),E.type==y(D).Object?(i(),V(Cn,{key:7,"field-key":w,"component-id":u.value.id,"default-value":E.default,error:y(c)[w]},null,8,["field-key","component-id","default-value","error"])):F("",!0),E.type==y(D).JSONInput?(i(),V(Ke,{key:8,"field-key":w,"component-id":u.value.id,"is-expanded":s.value.has(w),"input-language":"json"},null,8,["field-key","component-id","is-expanded"])):F("",!0),E.type==y(D).Width?(i(),V(no,{key:9,"field-key":w,"component-id":u.value.id,error:y(c)[w]},null,8,["field-key","component-id","error"])):F("",!0),E.type==y(D).HAlign?(i(),V(Ue,{key:10,direction:"horizontal","field-key":w,"component-id":u.value.id,error:y(c)[w]},null,8,["field-key","component-id","error"])):F("",!0),E.type==y(D).VAlign?(i(),V(Ue,{key:11,direction:"vertical","field-key":w,"component-id":u.value.id,error:y(c)[w]},null,8,["field-key","component-id","error"])):F("",!0),E.type==y(D).Padding?(i(),V(Fn,{key:12,"field-key":w,"component-id":u.value.id,error:y(c)[w]},null,8,["field-key","component-id","error"])):F("",!0),E.type==y(D).Tools&&u.value.type==="blueprints_writerchatreplywithtoolconfig"?(i(),V(xo,{key:13,"field-key":w,"component-id":u.value.id},null,8,["field-key","component-id"])):E.type==y(D).Tools?(i(),V(uo,{key:14,"field-key":w,"component-id":u.value.id},null,8,["field-key","component-id"])):F("",!0),E.type==y(D).Code||E.type==y(D).Eval?(i(),V(Ke,{key:15,"field-key":w,"component-id":u.value.id,"is-expanded":s.value.has(w),"input-language":"python","single-line":E.type==y(D).Eval},null,8,["field-key","component-id","is-expanded","single-line"])):F("",!0),E.type==y(D).ComponentId?(i(),V(jo,{key:16,"field-key":w,"component-id":u.value.id,error:y(c)[w]},null,8,["field-key","component-id","error"])):F("",!0),E.type==y(D).ComponentEventType?(i(),V(No,{key:17,"field-key":w,"component-id":u.value.id,error:y(c)[w]},null,8,["field-key","component-id","error"])):F("",!0)]),_:2},1032,["label","hint","unit","error","is-expansible","should-expand","onExpand","onShrink"]))]))),128))],8,Xo))),128))])):F("",!0)}}),Zo=K(Qo,[["__scopeId","data-v-d4da3d3f"]]),el={},tl={class:"WdsTitle"};function nl(t,r){return i(),C("h2",tl,[yt(t.$slots,"default",{},void 0,!0)])}const Ze=K(el,[["render",nl],["__scopeId","data-v-3b68d589"]]),ol=["inert"],ll="Connect the result of this block to a dynamic variable you can use across this agent",al=W({__name:"BuilderSettingsBinding",props:{isReadOnly:{type:Boolean}},setup(t){const r=R(P.core),n=R(P.builderManager),v=R(P.secretsManager),s=Ce(r,n),{getEvaluatedFields:l}=Ee(r,v),a=k(()=>{var b,p;return Ye((p=(b=n.firstSelectedItem)==null?void 0:b.value)==null?void 0:p.instancePath)}),u=k(()=>r.getComponentById(n.firstSelectedId.value)),f=k(()=>l(a.value)),m=k(()=>{const b=r.getComponentDefinition(u.value.type);return b?Object.entries(b.events).filter(([,g])=>g.bindable?g.enabled===void 0?!0:g.enabled({evaluatedFields:f.value}):!1).map(([g])=>g)[0]:void 0});function I(b){s.setBinding(n.firstSelectedId.value,b,m.value)}return fe(m,()=>{var p;if(!m.value)return;const b=(p=u.value)==null?void 0:p.binding;b!=null&&b.stateRef&&m.value!==b.eventType&&I(b.stateRef)}),(b,p)=>y(n).isSingleSelectionActive?(i(),C("div",{key:0,inert:t.isReadOnly,class:"BuilderSettingsBinding"},[$(Ze,null,{default:q(()=>p[1]||(p[1]=[ae("Binding")])),_:1}),$(te,{class:"BuilderSettingsBinding__main",label:"Link Variable",hint:ll},{default:q(()=>{var c;return[$(ne,{type:"state",value:(c=u.value.binding)==null?void 0:c.stateRef,"component-id":y(n).firstSelectedId.value,onInput:p[0]||(p[0]=g=>I(g.target.value))},null,8,["value","component-id"])]}),_:1})],8,ol)):F("",!0)}}),il=K(al,[["__scopeId","data-v-f92e4a05"]]),sl=["inert"],rl={class:"main"},ul={class:"flexRow"},dl=["checked"],cl='Reference a state or context element that will evaluate to true or false. Reference the element directly, i.e. use "my_var" instead of "@{my_var}".',pl=W({__name:"BuilderSettingsVisibility",props:{isReadOnly:{type:Boolean}},setup(t){const r=[{label:"Yes",value:"yes"},{label:"No",value:"no"},{label:"Custom",value:"custom"}],n=k({get(){const u=a.value.visible;return(u==null?void 0:u.expression)==="custom"?"custom":u===void 0||u.expression===!0?"yes":"no"},set(u){var f,m;u==="custom"?l(a.value.id,"custom",(f=a.value.visible)==null?void 0:f.binding,(m=a.value.visible)==null?void 0:m.reversed):l(a.value.id,u==="yes")}}),v=R(P.core),s=R(P.builderManager),{setVisibleValue:l}=Ce(v,s),a=k(()=>v.getComponentById(s.firstSelectedId.value));return(u,f)=>y(s).isSingleSelectionActive?(i(),C("div",{key:0,inert:t.isReadOnly,class:"BuilderSettingsVisibility"},[$(Ze,null,{default:q(()=>f[3]||(f[3]=[ae("Visibility")])),_:1}),B("div",rl,[$(se,{modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=m=>n.value=m),tabs:r},null,8,["modelValue"]),typeof a.value.visible<"u"&&a.value.visible.expression==="custom"?(i(),V(te,{key:0,hint:cl},{default:q(()=>[$(ne,{value:a.value.visible.binding,type:"state",placeholder:"my_visibility_state_value",onInput:f[1]||(f[1]=m=>y(l)(a.value.id,"custom",m.target.value,a.value.visible.reversed))},null,8,["value"]),B("div",ul,[B("input",{type:"checkbox",checked:a.value.visible.reversed,onInput:f[2]||(f[2]=m=>y(l)(a.value.id,"custom",a.value.visible.binding,m.target.checked))},null,40,dl),f[4]||(f[4]=B("span",null,"Reverse",-1))])]),_:1})):F("",!0)])],8,sl)):F("",!0)}}),vl=K(pl,[["__scopeId","data-v-c4316bf1"]]),je={apiTriggerDetails:X({loader:()=>Q(()=>import("./BuilderSettingsArtifactAPITriggerDetails-DAhAKY9C.js"),__vite__mapDeps([22,1,2,7,8,9,10,3,4,5,6,11,23]),import.meta.url)})},ml={class:"BuilderSettingsMain"},fl={key:1,class:"BuilderSettingsMain__description"},yl={key:2,class:"BuilderSettingsMain__warning cmc-warning"},gl={class:"BuilderSettingsMain__section"},_l={class:"BuilderSettingsMain__componentId"},hl=W({__name:"BuilderSettingsMain",setup(t){const r=X({loader:()=>Q(()=>import("./BuilderSettingsHandlers-C79-kk9h.js"),__vite__mapDeps([24,1,2,25,4,5,26,27,28,3,6,7,8,9,10,11,29]),import.meta.url)}),n=R(P.core),v=R(P.builderManager),s=k(()=>n.getComponentById(v.firstSelectedId.value)),l=k(()=>s.value.isCodeManaged),a=k(()=>v.isSingleSelectionActive.value?!u.value.toolkit||u.value.toolkit=="core":!1),u=k(()=>{const{type:S}=s.value;return n.getComponentDefinition(S)}),f=k(()=>{var O;return gt(n,s.value)||((O=u.value)==null?void 0:O.description)}),m=k(()=>{var S;return((S=s.value)==null?void 0:S.type)==="blueprints_shared"});fe(s,S=>{S||v.setSelection(null)});const{copy:I,copied:b}=He();function p(){I(v.firstSelectedId.value)}const c=k(()=>{var S;return Object.values(((S=u.value)==null?void 0:S.events)??{}).some(O=>O.bindable)}),g=k(()=>{var S;return(((S=u.value)==null?void 0:S.settingsArtifacts)??[]).filter(O=>O.position!=="bottom")}),h=k(()=>{var S;return(((S=u.value)==null?void 0:S.settingsArtifacts)??[]).filter(O=>O.position==="bottom")});return(S,O)=>(i(),C("div",ml,[f.value&&m.value?(i(),V(_t,{key:0,"raw-text":f.value,class:"BuilderSettingsMain__description"},null,8,["raw-text"])):f.value?(i(),C("p",fl,Y(f.value),1)):F("",!0),l.value?(i(),C("p",yl,[B("span",null,[$(z,{name:"triangle-alert"})]),O[0]||(O[0]=B("span",null," This component is instantiated in code. All settings in this panel are read-only and cannot be edited. ",-1))])):F("",!0),B("div",gl,[$(Zo,{"is-read-only":l.value},null,8,["is-read-only"]),(i(!0),C(L,null,Z(g.value,x=>(i(),V(Fe(y(je)[x.key]),{key:x.key,inert:l.value},null,8,["inert"]))),128)),a.value?(i(),C(L,{key:0},[c.value?(i(),V(il,{key:0,"is-read-only":l.value},null,8,["is-read-only"])):F("",!0),$(y(r),{"is-read-only":l.value},null,8,["is-read-only"]),$(vl,{"is-read-only":l.value},null,8,["is-read-only"])],64)):F("",!0),(i(!0),C(L,null,Z(h.value,x=>(i(),V(Fe(y(je)[x.key]),{key:x.key,inert:l.value},null,8,["inert"]))),128))]),O[1]||(O[1]=B("div",{class:"BuilderSettingsMain__spacer"},null,-1)),B("div",_l,[B("p",{class:"BuilderSettingsMain__componentId__text",onClick:p},Y(y(v).firstSelectedId.value),1),$(H,{class:"BuilderSettingsMain__componentId__btn",size:"smallIcon",variant:"tertiary","data-writer-tooltip":y(b)?"Copied!":"Copy block id","data-automation-action":"copy-component-id",onClick:p},{default:q(()=>[$(z,{name:y(b)?"check":"clipboard"},null,8,["name"])]),_:1},8,["data-writer-tooltip"])])]))}}),bl=K(hl,[["__scopeId","data-v-a87405f8"]]),kl=["data-writer-id"],Sl=W({__name:"BuilderSettingsActions",setup(t){const r=R(P.core),n=R(P.builderManager),v=Me(r),{dropdownOptions:s,handleDropdownSelect:l}=Xe(r,n,v);function a(){l(Ve.Delete)}const u=k(()=>{const m=s.value.find(I=>I.value===Ve.Delete);return m?m.disabled:!0}),f=n.firstSelectedId;return(m,I)=>(i(),C("div",{class:"BuilderSettingsActions","data-writer-id":y(f)},[y(n).selectionStatus.value===y(ve).Multiple?(i(),V(H,{key:0,class:"BuilderSettingsActions__btn",variant:"neutral",size:"smallIcon","data-automation-action":"clear-selection","data-writer-tooltip":"Clear selection","data-writer-tooltip-placement":"left",onClick:I[0]||(I[0]=b=>y(n).setSelection(null))},{default:q(()=>[$(z,{name:"x"})]),_:1})):F("",!0),$(H,{class:"BuilderSettingsActions__btn BuilderSettingsActions__btn--delete",variant:"neutral",size:"smallIcon","data-automation-action":"delete","data-writer-tooltip":"Delete (Del)","data-writer-tooltip-placement":"left",disabled:u.value,onClick:a},{default:q(()=>[$(z,{name:"trash-2"})]),_:1},8,["disabled"])],8,kl))}}),Il=K(Sl,[["__scopeId","data-v-08efde31"]]),Bl=["id"],Cl=["value"],wl=W({__name:"BuilderSettingsAddComponentModal",props:ue({selectedId:{type:String,required:!0}},{isOpen:{type:Boolean,default:!1},isOpenModifiers:{}}),emits:["update:isOpen"],setup(t){const r=R(P.core),n=R(P.builderManager),v=ht(),s=Me(r),{createAndInsertComponent:l}=Ce(r,n,s),a=t,u=k(()=>r.getContainableTypes(a.selectedId).reduce((b,p)=>(b[p]=r.getComponentDefinition(p),b),{})),f=we(t,"isOpen");function m(){f.value=!1}function I(b){const p=b.target.value;if(!p)return;const c=Object.entries(u.value).find(([h,S])=>S.name==p);if(!c)return;const g=c[0];l(g,a.selectedId),m()}return(b,p)=>f.value?(i(),V(Oe,{key:0,title:"Add child component","display-close-button":"",onClose:m},{default:q(()=>[$(ee,{type:"text",list:y(v),placeholder:"Component...",onChange:I},null,8,["list"]),B("datalist",{id:y(v)},[(i(!0),C(L,null,Z(u.value,(c,g)=>(i(),C("option",{key:g,value:c.name},Y(c.name),9,Cl))),128))],8,Bl)]),_:1})):F("",!0)}});function El(t,r=500){const n=N(0);let v=null;function s(){t.value&&(n.value=t.value.clientHeight)}return ie(()=>{s(),v=setInterval(s,r)}),Ge(()=>{v&&clearInterval(v)}),n}const xl={key:0,class:"BuilderSettings__collapser"},$l={key:1,class:"BuilderSettings__titleBar"},Tl={class:"BuilderSettings__titleBar__title"},Fl={class:"BuilderSettings__titleBar__actions"},Vl=["data-writer-tooltip"],Ol=W({__name:"BuilderSettings",setup(t){bt(d=>({d6f817ec:y(n).getMode()=="blueprints"?"120px":"54px",e54ff038:l.value}));const r=R(P.core),n=R(P.builderManager),v=U("root"),s=El(v,1e3),l=k(()=>{if(!s.value)return"unset";const d=s.value-42;return d>0?`${d}px`:"unset"}),{component:a,definition:u}=kt(r,n.firstSelectedId),f=St(a,u),m=k(()=>{var d;return a.value&&(It(r,a.value)||((d=u.value)==null?void 0:d.name))||"Unknown"}),{copy:I,copied:b}=He();function p(){I(f.value)}const c=Me(r),g=N(!1),{dropdownOptions:h,handleDropdownSelect:S}=Xe(r,n,c,{[Ve.Add]:()=>g.value=!0}),O=k(()=>n.selectionStatus.value===ve.Multiple?!0:n.isSettingsBarCollapsed.value),x=k(()=>n.selection.value.length);function _(){n.isSettingsBarCollapsed.value=!n.isSettingsBarCollapsed.value}return fe(a,d=>{d||n.setSelection(null)}),(d,o)=>y(n).selectionStatus.value!==y(ve).None?(i(),C("div",{key:0,ref_key:"root",ref:v,class:me(["BuilderSettings",{"BuilderSettings--collapsed":O.value}])},[y(n).isSingleSelectionActive.value?(i(),C("div",xl,[O.value?(i(),V(H,{key:0,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Expand settings","data-automation-action":"expand-settings",onClick:_},{default:q(()=>[$(z,{name:"settings"})]),_:1})):(i(),V(H,{key:1,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Collapse settings","data-automation-action":"collapse-settings",onClick:_},{default:q(()=>[$(z,{name:"arrow-right-to-line"})]),_:1}))])):F("",!0),y(n).isSingleSelectionActive?(i(),C("div",$l,[B("p",Tl,Y(m.value),1),B("div",Fl,[y(f)?(i(),V(H,{key:0,size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"bottom","data-writer-tooltip":y(b)?"Copied!":"Copy result variable",onClick:oe(p,["prevent"])},{default:q(()=>[$(z,{name:"at-sign"})]),_:1},8,["data-writer-tooltip"])):F("",!0),$(Bt,{class:"BuilderSettings__titleBar__actions__more","data-automation-action":"settings-actions-dropdown",options:y(h),"trigger-custom-size":"32px","trigger-icon":"ellipsis-vertical",onSelect:y(S)},null,8,["options","onSelect"])])])):F("",!0),y(n).selectionStatus.value===y(ve).Multiple?(i(),C("div",{key:2,class:"BuilderSettings__selectionCount","data-writer-tooltip-placement":"left","data-writer-tooltip":`${x.value} components selected`},[B("p",null,Y(x.value),1)],8,Vl)):F("",!0),O.value&&y(n).selectionStatus.value===y(ve).Multiple?(i(),V(Il,{key:3,class:"BuilderSettings__actions"})):F("",!0),$(bl,{class:"BuilderSettings__main",inert:O.value},null,8,["inert"]),y(n).isSingleSelectionActive.value?(i(),V(wl,{key:4,"is-open":g.value,"onUpdate:isOpen":o[0]||(o[0]=e=>g.value=e),"selected-id":y(n).firstSelectedId.value},null,8,["is-open","selected-id"])):F("",!0)],2)):F("",!0)}}),Ml=K(Ol,[["__scopeId","data-v-4c26d287"]]),Ul=Object.freeze(Object.defineProperty({__proto__:null,default:Ml},Symbol.toStringTag,{value:"Module"}));export{Ke as B,Ze as W,Ul as a,xt as u};
//# sourceMappingURL=BuilderSettings-G-znf-iB.js.map
