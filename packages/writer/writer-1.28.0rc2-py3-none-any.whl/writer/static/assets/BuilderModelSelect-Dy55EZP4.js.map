{"version":3,"mappings":";;;;;;ybASA,MAAMA,EAAYC,EAA+B,CAChD,OAAQ,IAAMC,EAAA,WAAO,qBAAqB,OAAAC,KAAA,4CAC1C,EAEKC,EAAKC,EAAOC,EAAc,IAAI,EAM9BC,EAAeC,EAAWC,EAAA,YAG/B,EAEK,CACL,KAAMC,EACN,KAAMC,EACN,UAAAC,CAAA,EACGC,EAA8BT,EAAI,QAAQ,EAE9CU,EAAUJ,CAAU,EAEpB,MAAMK,EAAUC,EAAS,IACxBL,EAAO,MACL,IAAaM,IAAW,CACxB,MAAOA,EAAM,KACb,MAAOA,EAAM,EACd,EAAE,EACD,KAAK,CAACC,EAAGC,IAAMD,EAAE,MAAM,cAAcC,EAAE,KAAK,CAAC,GAG1CC,EAAkBJ,EAAiB,CACxC,KAAM,CACL,OAAIT,EAAa,QAAU,OAAkB,GAEtC,OAAOA,EAAa,OAAU,SAClCA,EAAa,MACbA,EAAa,MAAM,KAAK,GAAG,CAC/B,EACA,IAAIc,EAAe,CACLd,EAAA,MAAQc,EAAM,MAAM,GAAG,CACrC,EACA,EAEKC,EAAeN,EAAS,IAAM,CACnC,GAAIT,EAAa,QAAU,OAEpB,cAAOA,EAAa,OAAU,SAClCI,EAAO,MAAM,KAAMY,GAAMA,EAAE,KAAOhB,EAAa,KAAK,EACpDI,EAAO,MAAM,OAAQY,GAAMhB,EAAa,MAAM,SAASgB,EAAE,EAAE,CAAC,EAC/D,EAEY,OAAAC,EAAA,CAAE,aAAAF,EAAc","names":["WdsSelect","defineAsyncComponentWithLoader","__vitePreload","n","wf","inject","injectionKeys","currentValue","_useModel","__props","loadModels","models","isLoading","useListResources","onMounted","options","computed","model","a","b","currentValueStr","value","selectedData","m","__expose"],"ignoreList":[],"sources":["../../../ui/src/builder/BuilderModelSelect.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport injectionKeys from \"@/injectionKeys\";\nimport { computed, inject, onMounted, PropType } from \"vue\";\nimport { useListResources } from \"@/composables/useListResources\";\nimport type { Option } from \"@/wds/WdsSelect.vue\";\nimport type { WriterModel } from \"@/writerTypes\";\nimport WdsTextInput from \"@/wds/WdsTextInput.vue\";\nimport { defineAsyncComponentWithLoader } from \"@/utils/defineAsyncComponentWithLoader\";\n\nconst WdsSelect = defineAsyncComponentWithLoader({\n\tloader: () => import(\"@/wds/WdsSelect.vue\"),\n});\n\nconst wf = inject(injectionKeys.core);\n\ndefineProps({\n\tenableMultiSelection: { type: Boolean, required: false },\n});\n\nconst currentValue = defineModel({\n\ttype: [String, Array] as PropType<string | string[]>,\n\trequired: true,\n});\n\nconst {\n\tload: loadModels,\n\tdata: models,\n\tisLoading,\n} = useListResources<WriterModel>(wf, \"models\");\n\nonMounted(loadModels);\n\nconst options = computed(() =>\n\tmodels.value\n\t\t.map<Option>((model) => ({\n\t\t\tlabel: model.name,\n\t\t\tvalue: model.id,\n\t\t}))\n\t\t.sort((a, b) => a.label.localeCompare(b.label)),\n);\n\nconst currentValueStr = computed<string>({\n\tget() {\n\t\tif (currentValue.value === undefined) return \"\";\n\n\t\treturn typeof currentValue.value === \"string\"\n\t\t\t? currentValue.value\n\t\t\t: currentValue.value.join(\",\");\n\t},\n\tset(value: string) {\n\t\tcurrentValue.value = value.split(\",\");\n\t},\n});\n\nconst selectedData = computed(() => {\n\tif (currentValue.value === undefined) return undefined;\n\n\treturn typeof currentValue.value === \"string\"\n\t\t? models.value.find((m) => m.id === currentValue.value)\n\t\t: models.value.filter((m) => currentValue.value.includes(m.id));\n});\n\ndefineExpose({ selectedData });\n</script>\n\n<template>\n\t<div class=\"BuilderModelSelect--text\">\n\t\t<WdsSelect\n\t\t\tv-if=\"models.length > 0 || isLoading\"\n\t\t\tv-model=\"currentValue\"\n\t\t\t:options=\"options\"\n\t\t\thide-icons\n\t\t\tenable-search\n\t\t\t:loading=\"isLoading\"\n\t\t\t:enable-multi-selection=\"enableMultiSelection\"\n\t\t/>\n\t\t<WdsTextInput v-else v-model=\"currentValueStr\" />\n\t</div>\n</template>\n\n<style scoped>\n.BuilderGraphSelect--text {\n\twidth: 100%;\n\tdisplay: flex;\n\tgap: 12px;\n\talign-items: center;\n}\n</style>\n"],"file":"assets/BuilderModelSelect-Dy55EZP4.js"}