function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderBlueprintLibraryPanel-DXlhbCL9.js","./index-C1IizHaQ.js","./index-BFl0hGbo.css","./BuilderApp-DhqlqS0y.js","./WdsCheckbox-BYkw_Bvq.js","./WdsCheckbox-DKvpPA4D.css","./marked.esm-273vDTCT.js","./BuilderApp-BvTsxBsN.css","./BuilderBlueprintLibraryPanel-DMnIkrtN.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as te,ao as re,Q as ae,i as S,r as w,a as C,c as u,b0 as R,bB as ne,bC as F,w as oe,o as d,f as p,x as v,au as se,R as k,z as L,g as f,W as ie,y as A,A as le,S as T,D as I,E as N,t as $,bv as ue,b as de,bw as q,aN as ce,_ as pe}from"./index-C1IizHaQ.js";import{B as me}from"./BuilderApp-DhqlqS0y.js";import"./WdsCheckbox-BYkw_Bvq.js";import"./marked.esm-273vDTCT.js";const ve={key:0,class:"sharedBlueprintNotice"},fe={class:"header"},be={class:"tools"},ge=["data-writer-tooltip","data-component-type","onDragstart"],_e={class:"name"},he={class:"BuilderSidebarPanel__footer__actions"},ye=te({__name:"BuilderSidebarToolkit",setup(Be){const j=re({loader:()=>ae(()=>import("./BuilderBlueprintLibraryPanel-DXlhbCL9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)}),O=S(C.isAutogenModalShown,w(!1));function W(){O.value=!0}const _=w(!1);function U(){_.value=!0}const i=S(C.core),h=S(C.builderManager),{removeInsertionCandidacy:M}=ce(i),m=w(""),y=u(()=>Array.isArray(i.featureFlags.value)&&i.featureFlags.value.includes("shared_blueprints")),D=u(()=>Array.isArray(i.featureFlags.value)&&i.featureFlags.value.includes("blueprint_library")),b=h.activeRootId,z=u(()=>y.value?i.getComponents("blueprints_root",{sortedByPosition:!0}).filter(e=>R(e)):[]),K=new Set(["blueprints_runblueprint","blueprints_apitrigger","blueprints_uieventtrigger","blueprints_crontrigger"]),g=u(()=>{if(b.value!=="blueprints_root")return!1;const t=i.activePageId.value;if(!t)return!1;const e=i.getComponentById(t);return R(e)}),H=["Layout","Content","Input","Embed","Writer","Logic","Triggers","Other","Shared Blueprints"],c=u(()=>h.mode.value=="blueprints"?"blueprints":"core"),E=u(()=>{const t=H.map(e=>[e,J(e)]).filter(([e,a])=>a.length>0||e==="Shared Blueprints"&&b.value=="blueprints_root"&&y.value&&!g.value);return Object.fromEntries(t)}),Q=u(()=>{if(m.value)return Object.values(E.value).reduce((t,e)=>t+e.length,0)}),G=u(()=>c.value=="core"?"Interface toolkit":c.value=="blueprints"?"Blueprints toolkit":"Toolkit");function J(t){if(t==="Shared Blueprints"){if(c.value!=="blueprints")return[];if(!y.value||g.value)return[];const r=z.value.map(o=>{var V,x;const B=((V=o.content)==null?void 0:V.key)||"Untitled Blueprint",ee=((x=o.content)==null?void 0:x.description)||"A shared blueprint";return{type:`blueprints_shared:${o.id}`,name:B,description:ee,category:"Shared Blueprints",sourceBlueprintId:o.id}}),n=m.value.toLocaleLowerCase();return r.filter(o=>!n||o.name.toLocaleLowerCase().includes(n)).sort((o,B)=>o.name.localeCompare(B.name,void 0,{sensitivity:"base"}))}const a=ne().filter(r=>{const n=F(r);return!(r==="blueprints_shared"||n.category!=t||!n.toolkit&&c.value!=="core"||n.toolkit&&n.toolkit!==c.value||n.deprecated||g.value&&K.has(r))}).map(r=>{const{name:n,description:P,category:o}=F(r);return{type:r,name:n,description:P,category:o??"Other",sourceBlueprintId:void 0}}),l=m.value.toLocaleLowerCase();return a.filter(r=>!l||r.name.toLocaleLowerCase().includes(l)).sort((r,n)=>r.name.localeCompare(n.name,void 0,{sensitivity:"base"}))}function X(t,e,a){h.setSelection(null);const l=a?`application/json;writer=blueprints_shared,${a}`:`application/json;writer=${e},`;t.dataTransfer.setData(l,"{}")}function Y(t){M(t)}function Z(t){return t.sourceBlueprintId?["/components/blueprints_category_Logic.svg"].map(e=>q(e)):[`/components/${t.type}.svg`,`/components/${c.value=="blueprints"?"blueprints_":""}category_${t.category}.svg`].map(e=>q(e))}return oe(c,()=>{m.value=""}),(t,e)=>(d(),p(I,null,[v(me,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=a=>m.value=a),class:"BuilderSidebarToolkit",placeholder:G.value,"search-count":Q.value},se({default:L(()=>[g.value?(d(),p("div",ve,[v(A,{name:"info"}),e[3]||(e[3]=f("span",null,"Some blocks are hidden because they can't be used in shared blueprints.",-1))])):T("",!0),(d(!0),p(I,null,N(E.value,(a,l)=>(d(),p("div",{key:l,class:"category"},[f("div",fe,[f("span",null,$(l),1),l==="Shared Blueprints"&&k(b)=="blueprints_root"&&D.value?(d(),p("button",{key:0,class:"header__library-btn","data-writer-tooltip":"Blueprint Library","data-writer-tooltip-placement":"right",onClick:U},[v(A,{name:"layout-grid"})])):T("",!0)]),f("div",be,[(d(!0),p(I,null,N(a,s=>(d(),p("div",{key:s.type,class:"tool","data-writer-tooltip":s.description,"data-writer-tooltip-placement":"right","data-writer-tooltip-gap":"8",draggable:"true","data-component-type":s.type,onDragend:e[0]||(e[0]=r=>Y(r)),onDragstart:r=>X(r,s.type,s.sourceBlueprintId)},[v(ue,{alt:`(Icon for ${s.name})`,draggable:"false",urls:Z(s),"loader-max-width-px":18,"loader-max-height-px":18},null,8,["alt","urls"]),f("div",_e,$(s.name),1)],40,ge))),128))])]))),128))]),_:2},[k(b)=="blueprints_root"?{name:"footer",fn:L(()=>[f("div",he,[v(ie,{variant:"special",size:"small",class:"BuilderSidebarPanel__footer__btn",onClick:W},{default:L(()=>[v(A,{name:"wand-sparkles"}),e[4]||(e[4]=le(" Autogenerate "))]),_:1})])]),key:"0"}:void 0]),1032,["modelValue","placeholder","search-count"]),D.value?(d(),de(k(j),{key:0,modelValue:_.value,"onUpdate:modelValue":e[2]||(e[2]=a=>_.value=a)},null,8,["modelValue"])):T("",!0)],64))}}),Le=pe(ye,[["__scopeId","data-v-61c5abb1"]]);export{Le as default};
//# sourceMappingURL=BuilderSidebarToolkit-CzIYCBw7.js.map
