{"version":3,"mappings":";;;;;;keASA,MAAMA,EAAYC,EAA+B,CAChD,OAAQ,IAAMC,EAAA,WAAO,qBAAqB,OAAAC,KAAA,4CAC1C,EAEKC,EAAKC,EAAOC,EAAc,IAAI,EAE9BC,EAAOC,EAQPC,EAAeC,EAAWC,EAAA,YAG/B,EAEK,CACL,KAAMC,EACN,KAAMC,EACN,UAAAC,CAAA,EACGC,EAAoCX,EAAI,cAAc,EAE1DY,EAAUJ,CAAQ,EAElB,SAASK,EAAWC,EAAwB,CAC3C,OAAQA,EAAI,KAAM,CACjB,IAAK,OACG,iBACR,IAAK,YACG,kBACR,IAAK,aACG,wBACR,IAAK,WACG,0BACT,CACD,CAEA,MAAMC,EAAUC,EAAS,IACxBP,EAAK,MACH,IAAaK,IAAS,CACtB,MAAOA,EAAI,KACX,MAAOA,EAAI,GACX,OAAQ,CAACD,EAAWC,CAAG,EAAGA,EAAI,MAAM,EAAE,KAAK,KAAK,CACjD,EAAE,EACD,KAAK,CAACG,EAAGC,IAAMD,EAAE,MAAM,cAAcC,EAAE,KAAK,CAAC,GAG1CC,EAAkBH,EAAiB,CACxC,KAAM,CACL,OAAIX,EAAa,QAAU,OAAkB,GAEtC,OAAOA,EAAa,OAAU,SAClCA,EAAa,MACbA,EAAa,MAAM,KAAK,GAAG,CAC/B,EACA,IAAIe,EAAe,CACLf,EAAA,MAAQe,EAAM,MAAM,GAAG,CACrC,EACA,EAEKC,EAAeL,EAAS,IAAM,CACnC,GAAIX,EAAa,QAAU,QAGvB,OAAOA,EAAa,OAAU,SAE3B,OAAAI,EAAK,MAAM,KAAMa,GAAMA,EAAE,KAAOjB,EAAa,KAAK,EACzD,EAED,OAAAkB,EACC,IAAMlB,EAAa,MACnB,IAAM,CAED,IAACI,EAAK,MAAM,OAAQ,OAElB,MAAAe,EAASf,EAAK,MAAM,KAAMQ,GAAMA,EAAE,KAAOZ,EAAa,KAAK,EACjEF,EAAK,gBAAiBqB,CAAM,CAC7B,GAGYC,EAAA,CAAE,aAAAJ,EAAc","names":["WdsSelect","defineAsyncComponentWithLoader","__vitePreload","n","wf","inject","injectionKeys","emit","__emit","currentValue","_useModel","__props","loadApps","apps","isLoading","useListResources","onMounted","getAppType","app","options","computed","a","b","currentValueStr","value","selectedData","g","watch","picked","__expose"],"ignoreList":[],"sources":["../../../ui/src/builder/BuilderApplicationSelect.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport injectionKeys from \"@/injectionKeys\";\nimport { computed, inject, onMounted, PropType, watch } from \"vue\";\nimport { useListResources } from \"@/composables/useListResources\";\nimport type { Option } from \"@/wds/WdsSelect.vue\";\nimport type { WriterApplication } from \"@/writerTypes\";\nimport WdsTextInput from \"@/wds/WdsTextInput.vue\";\nimport { defineAsyncComponentWithLoader } from \"@/utils/defineAsyncComponentWithLoader\";\n\nconst WdsSelect = defineAsyncComponentWithLoader({\n\tloader: () => import(\"@/wds/WdsSelect.vue\"),\n});\n\nconst wf = inject(injectionKeys.core);\n\nconst emit = defineEmits<{\n\t(event: \"selected-data\", data: WriterApplication | undefined): void;\n}>();\n\ndefineProps({\n\tenableMultiSelection: { type: Boolean, required: false },\n});\n\nconst currentValue = defineModel({\n\ttype: [String, Array] as PropType<string | string[]>,\n\trequired: true,\n});\n\nconst {\n\tload: loadApps,\n\tdata: apps,\n\tisLoading,\n} = useListResources<WriterApplication>(wf, \"applications\");\n\nonMounted(loadApps);\n\nfunction getAppType(app: WriterApplication) {\n\tswitch (app.type) {\n\t\tcase \"chat\":\n\t\t\treturn \"Chat app\";\n\t\tcase \"framework\":\n\t\t\treturn \"Framework\";\n\t\tcase \"generation\":\n\t\t\treturn \"Text generation\";\n\t\tcase \"research\":\n\t\t\treturn \"Research assistant\";\n\t}\n}\n\nconst options = computed(() =>\n\tapps.value\n\t\t.map<Option>((app) => ({\n\t\t\tlabel: app.name,\n\t\t\tvalue: app.id,\n\t\t\tdetail: [getAppType(app), app.status].join(` Â· `),\n\t\t}))\n\t\t.sort((a, b) => a.label.localeCompare(b.label)),\n);\n\nconst currentValueStr = computed<string>({\n\tget() {\n\t\tif (currentValue.value === undefined) return \"\";\n\n\t\treturn typeof currentValue.value === \"string\"\n\t\t\t? currentValue.value\n\t\t\t: currentValue.value.join(\",\");\n\t},\n\tset(value: string) {\n\t\tcurrentValue.value = value.split(\",\");\n\t},\n});\n\nconst selectedData = computed(() => {\n\tif (currentValue.value === undefined) return undefined;\n\n\t// Application select should never support multi-selection\n\tif (typeof currentValue.value !== \"string\") return undefined;\n\n\treturn apps.value.find((g) => g.id === currentValue.value);\n});\n\nwatch(\n\t() => currentValue.value,\n\t() => {\n\t\t// Ignore empty states where apps haven't loaded yet\n\t\tif (!apps.value.length) return;\n\n\t\tconst picked = apps.value.find((a) => a.id === currentValue.value);\n\t\temit(\"selected-data\", picked);\n\t},\n);\n\ndefineExpose({ selectedData });\n</script>\n\n<template>\n\t<div class=\"BuilderGraphSelect--text\">\n\t\t<WdsSelect\n\t\t\tv-if=\"apps.length > 0 || isLoading\"\n\t\t\tv-model=\"currentValue\"\n\t\t\t:options=\"options\"\n\t\t\thide-icons\n\t\t\tenable-search\n\t\t\t:loading=\"isLoading\"\n\t\t\t:enable-multi-selection=\"enableMultiSelection\"\n\t\t/>\n\t\t<WdsTextInput v-else v-model=\"currentValueStr\" />\n\t</div>\n</template>\n\n<style scoped>\n.BuilderGraphSelect--text {\n\twidth: 100%;\n\tdisplay: flex;\n\tgap: 12px;\n\talign-items: center;\n}\n</style>\n"],"file":"assets/BuilderApplicationSelect-C8Tb3ZRM.js"}