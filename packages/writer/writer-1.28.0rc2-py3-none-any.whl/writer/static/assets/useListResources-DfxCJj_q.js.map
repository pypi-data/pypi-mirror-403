{"version":3,"file":"useListResources-DfxCJj_q.js","sources":["../../../ui/src/composables/useListResources.ts"],"sourcesContent":["import { generateCore } from \"@/core\";\nimport { readonly, ref, shallowRef } from \"vue\";\nimport { useSessionStorageJSON } from \"./useStorageJSON\";\n\nexport function useListResources<T>(\n\twf: ReturnType<typeof generateCore>,\n\ttype: string,\n) {\n\tconst isLoading = ref(false);\n\tconst error = ref();\n\n\tconst cache = useSessionStorageJSON<T[]>(\n\t\t`useListResources(${type})`,\n\t\tArray.isArray,\n\t);\n\n\tconst data = shallowRef<T[]>(cache.value ?? []);\n\n\tasync function load() {\n\t\tisLoading.value = true;\n\t\terror.value = undefined;\n\t\ttry {\n\t\t\tdata.value = await wf.sendListResourcesRequest<T>(type);\n\t\t\tcache.value = data.value;\n\t\t} catch (e) {\n\t\t\terror.value = e;\n\t\t\tdata.value = [];\n\t\t} finally {\n\t\t\tisLoading.value = false;\n\t\t}\n\t}\n\n\treturn {\n\t\tdata: readonly(data),\n\t\tisLoading: readonly(isLoading),\n\t\terror: readonly(error),\n\t\tload,\n\t};\n}\n"],"names":["useListResources","wf","type","isLoading","ref","error","cache","useSessionStorageJSON","data","shallowRef","load","e","readonly"],"mappings":"8DAIgB,SAAAA,EACfC,EACAC,EACC,CACK,MAAAC,EAAYC,EAAI,EAAK,EACrBC,EAAQD,IAERE,EAAQC,EACb,oBAAoBL,CAAI,IACxB,MAAM,OAAA,EAGDM,EAAOC,EAAgBH,EAAM,OAAS,CAAE,CAAA,EAE9C,eAAeI,GAAO,CACrBP,EAAU,MAAQ,GAClBE,EAAM,MAAQ,OACV,GAAA,CACHG,EAAK,MAAQ,MAAMP,EAAG,yBAA4BC,CAAI,EACtDI,EAAM,MAAQE,EAAK,YACXG,EAAG,CACXN,EAAM,MAAQM,EACdH,EAAK,MAAQ,EAAC,QACb,CACDL,EAAU,MAAQ,EACnB,CACD,CAEO,MAAA,CACN,KAAMS,EAASJ,CAAI,EACnB,UAAWI,EAAST,CAAS,EAC7B,MAAOS,EAASP,CAAK,EACrB,KAAAK,CAAA,CAEF"}