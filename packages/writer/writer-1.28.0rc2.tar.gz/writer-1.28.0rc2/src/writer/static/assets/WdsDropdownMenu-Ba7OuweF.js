import{d as I,c as y,o as a,f as d,D as M,x as _,bv as V,G as W,K as $,y as D,S as u,g as m,t as p,b,J as S,_ as B,m as z,r as g,w as L,a8 as O,s as j,a6 as N,E as A,a1 as k,z as x,aq as T}from"./index-C1IizHaQ.js";import{W as U}from"./WdsCheckbox-BYkw_Bvq.js";const F=["data-automation-key","disabled"],E={key:0,class:"WdsDropdownMenuItem__icon WdsDropdownMenuItem__icon--img"},R=["data-writer-tooltip"],G={key:0,class:"WdsDropdownMenuItem__label__shortcut"},J=["data-writer-tooltip"],K={key:2,class:"WdsDropdownMenuItem__action"},P=I({__name:"WdsDropdownMenuItem",props:{showCustomAction:{type:Boolean},selected:{type:Boolean,required:!1},option:{type:Object,required:!0},hideIcons:{type:Boolean,required:!1}},setup(e){const s=e,o=y(()=>{const n=[];return!s.hideIcons&&s.option.icon&&n.push("auto"),n.push("minmax(0, 1fr)"),(s.selected||s.showCustomAction)&&n.push("auto"),{"grid-template-columns":n.join(" ")}}),c=y(()=>{const n={};return s.option.iconColor&&(n.color=s.option.iconColor),s.option.iconBgColor&&(n["background-color"]=s.option.iconBgColor),Object.values(n).length>0?n:void 0});return(n,i)=>(a(),d("button",{class:W(["WdsDropdownMenuItem",{"WdsDropdownMenuItem--selected":e.selected,"WdsDropdownMenuItem--hideIcon":e.hideIcons,"WdsDropdownMenuItem--danger":e.option.variant==="danger"}]),style:$(o.value),"data-automation-key":e.option.value,disabled:e.option.disabled},[e.hideIcons?u("",!0):(a(),d(M,{key:0},[Array.isArray(e.option.icon)?(a(),d("div",E,[_(V,{urls:e.option.icon,"loader-max-width-px":18,"loader-max-height-px":18},null,8,["urls"])])):e.option.icon?(a(),d("div",{key:1,class:W(["WdsDropdownMenuItem__icon",{"WdsDropdownMenuItem__icon--iconColor":c.value}]),style:$(c.value)},[_(D,{name:e.option.icon},null,8,["name"])],6)):u("",!0)],64)),m("div",{class:"WdsDropdownMenuItem__label","data-writer-tooltip":e.option.label,"data-writer-tooltip-strategy":"overflow"},[m("span",null,p(e.option.label),1),e.option.shortcut?(a(),d("span",G,p(e.option.shortcut),1)):u("",!0)],8,R),e.option.detail?(a(),d("div",{key:1,class:"WdsDropdownMenuItem__detail","data-writer-tooltip":e.option.detail,"data-writer-tooltip-strategy":"overflow"},p(e.option.detail),9,J)):u("",!0),e.selected||e.showCustomAction?(a(),d("div",K,[e.selected?(a(),b(D,{key:0,name:"check"})):e.showCustomAction?S(n.$slots,"action",{key:1},void 0,!0):u("",!0)])):u("",!0)],14,F))}}),H=B(P,[["__scopeId","data-v-8fc4c139"]]),Q=I({__name:"SharedLazyLoader",setup(e){const s=z("container"),o=g(!1),c=g();function n(i){var v;(v=c.value)==null||v.disconnect();const h=new IntersectionObserver(w=>{w.some(f=>f.isIntersecting)&&(h.unobserve(i),o.value=!0)});h.observe(i),c.value=h}return L(s,()=>{if(!window.IntersectionObserver)return o.value=!0;s.value&&n(s.value)},{immediate:!0}),O(()=>{var i;return(i=c.value)==null?void 0:i.disconnect()}),(i,h)=>(a(),d("div",{ref_key:"container",ref:s,class:"SharedLazyLoader"},[o.value?S(i.$slots,"content",{key:0}):S(i.$slots,"spinner",{key:1})],512))}}),X={class:"WdsDropdownMenu"},Y={key:0,class:"WdsDropdownMenu__header"},Z={key:0,class:"WdsDropdownMenu__header__multiSelect"},ee={class:"WdsDropdownMenu__header__multiSelect__count"},te=["disabled"],oe={class:"WdsDropdownMenu__item__label"},ne={key:2,class:"WdsDropdownMenu__no-results"},ae={class:"WdsDropdownMenu__itemLazyLoader"},se=I({__name:"WdsDropdownMenu",props:{options:{type:Array,default:()=>[]},hideIcons:{type:Boolean,required:!1},enableSearch:{type:Boolean,required:!1},enableMultiSelection:{type:Boolean,required:!1},selected:{type:[Array,String],required:!1,default:()=>{}},loading:{type:Boolean,required:!1}},emits:{select:e=>typeof e=="string"||Array.isArray(e),search:e=>typeof e=="string"},setup(e,{emit:s}){const o=e,c=s,n=g(""),i=y(()=>`${(Array.isArray(o.selected)?o.selected:[o.selected]).filter(Boolean).length}/${o.options.length} selected`),h=y(()=>{if(!o.enableSearch)return o.options;const l=n.value.toLowerCase();return o.options.filter(r=>{var t;return r.label.toLowerCase().includes(l)||((t=r.detail)==null?void 0:t.toLowerCase().includes(l))})}),v=y(()=>o.enableSearch&&n.value.trim()!==""&&h.value.length===0&&!o.loading);function w(l){return Array.isArray(o.selected)?o.selected.includes(l):o.selected===l}const C=y(()=>new Set(o.options.map(l=>l.value)));function f(l){if(!o.enableMultiSelection)return c("select",l);const r=new Set(o.selected);r.has(l)?r.delete(l):r.add(l),c("select",[...r].filter(t=>C.value.has(t)))}return L(n,()=>c("search",n.value)),(l,r)=>(a(),d("div",X,[(e.enableSearch||e.enableMultiSelection)&&!e.loading?(a(),d("div",Y,[e.enableMultiSelection?(a(),d("div",Z,[m("div",ee,p(i.value),1),m("button",{class:"WdsDropdownMenu__header__multiSelect__clear",type:"button",onClick:r[0]||(r[0]=t=>l.$emit("select",[]))}," Clear all ")])):u("",!0),e.enableSearch?(a(),d("div",{key:1,class:W(["WdsDropdownMenu__header__search",{"WdsDropdownMenu__header__search--no-results":v.value}])},[_(D,{name:"search"}),j(m("input",{ref:"searchInput","onUpdate:modelValue":r[1]||(r[1]=t=>n.value=t),class:"WdsDropdownMenu__header__search__input",type:"text",placeholder:"Search",autocomplete:"off",disabled:e.loading},null,8,te),[[N,n.value]])],2)):u("",!0)])):u("",!0),e.loading?(a(),d(M,{key:1},A(6,t=>m("button",{key:t,class:"WdsDropdownMenu__item"},[e.enableMultiSelection||!e.hideIcons?(a(),b(k,{key:0,style:{width:"20px"}})):u("",!0),m("div",oe,[_(k)])])),64)):v.value?(a(),d("div",ne," No results ")):(a(!0),d(M,{key:3},A(h.value,t=>(a(),b(Q,{key:t.value},{spinner:x(()=>[m("div",ae,[_(k)])]),content:x(()=>[e.enableMultiSelection?(a(),b(U,{key:0,class:"WdsDropdownMenu__checkbox",checked:w(t.value),label:t.label,detail:t.detail,"data-automation-key":t.value,disabled:t.disabled,"model-value":w(t.value),"onUpdate:modelValue":q=>f(t.value)},null,8,["checked","label","detail","data-automation-key","disabled","model-value","onUpdate:modelValue"])):(a(),b(H,{key:1,option:t,"data-automation-key":t.value,selected:w(t.value),onClick:T(q=>f(t.value),["stop"])},null,8,["option","data-automation-key","selected","onClick"]))]),_:2},1024))),128))]))}}),le=B(se,[["__scopeId","data-v-9826426e"]]),ie=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"}));export{H as W,le as a,ie as b};
//# sourceMappingURL=WdsDropdownMenu-Ba7OuweF.js.map
