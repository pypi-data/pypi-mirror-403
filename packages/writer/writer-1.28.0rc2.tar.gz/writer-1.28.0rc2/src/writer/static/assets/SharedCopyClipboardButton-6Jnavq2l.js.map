{"version":3,"file":"SharedCopyClipboardButton-6Jnavq2l.js","sources":["../../../ui/src/components/shared/SharedCopyClipboardButton.vue"],"sourcesContent":["<template>\n\t<div ref=\"trigger\" class=\"SharedCopyClipboardButton\">\n\t\t<WdsButton\n\t\t\t:variant=\"variant\"\n\t\t\t:size=\"size\"\n\t\t\tclass=\"button\"\n\t\t\t:class=\"{\n\t\t\t\tcopied,\n\t\t\t}\"\n\t\t\t:disabled=\"!isSupported\"\n\t\t\t:aria-label=\"\n\t\t\t\tisSingleButtonMode\n\t\t\t\t\t? label || 'Copy to clipboard'\n\t\t\t\t\t: 'Open options'\n\t\t\t\"\n\t\t\t:aria-haspopup=\"isSingleButtonMode ? undefined : 'menu'\"\n\t\t\t:aria-expanded=\"isSingleButtonMode ? undefined : String(isMenuOpen)\"\n\t\t\t:data-writer-tooltip=\"tooltipMessage\"\n\t\t\tdata-writer-tooltip-placement=\"top\"\n\t\t\tdata-writer-unselectable=\"true\"\n\t\t\t@click=\"onCopyButtonClick\"\n\t\t>\n\t\t\t<WdsIcon :name=\"copied ? 'check' : iconName\" />\n\t\t\t<template v-if=\"text\"> {{ !copied ? text : \"Copied\" }}</template>\n\t\t</WdsButton>\n\t\t<WdsDropdownMenu\n\t\t\tv-if=\"!isSingleButtonMode && isMenuOpen\"\n\t\t\tref=\"menu\"\n\t\t\tclass=\"menu\"\n\t\t\t:options=\"options\"\n\t\t\t:style=\"floatingStyles\"\n\t\t\t@select=\"onMenuItemSelect\"\n\t\t/>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport type { WdsDropdownMenuOption } from \"@/wds/WdsDropdownMenu.vue\";\n\nexport type SharedCopyClipboardButtonOption = Pick<\n\tWdsDropdownMenuOption,\n\t\"label\" | \"value\"\n>;\n</script>\n\n<script setup lang=\"ts\">\nimport { useClipboard } from \"@vueuse/core\";\nimport WdsButton from \"@/wds/WdsButton.vue\";\nimport WdsIcon from \"@/wds/WdsIcon.vue\";\nimport WdsDropdownMenu from \"@/wds/WdsDropdownMenu.vue\";\nimport { computed, nextTick, PropType, ref, useTemplateRef, watch } from \"vue\";\nimport { useFloating } from \"@floating-ui/vue\";\nimport { useFocusWithin } from \"@/composables/useFocusWithin\";\nimport type { WdsButtonVariant, WdsButtonSize } from \"@/wds/WdsButton.vue\";\n\nconst props = defineProps({\n\tlabel: { type: String, required: false, default: \"\" },\n\tvalue: { type: String, required: false, default: \"\" },\n\ttext: { type: String, required: false, default: \"\" },\n\tvariant: {\n\t\ttype: String as PropType<WdsButtonVariant>,\n\t\tdefault: \"tertiary\",\n\t},\n\tsize: {\n\t\ttype: String as PropType<WdsButtonSize>,\n\t\tdefault: \"smallIcon\",\n\t},\n\ticonName: { type: String, default: \"clipboard\" },\n\toptions: {\n\t\ttype: Array as PropType<SharedCopyClipboardButtonOption[]>,\n\t\trequired: false,\n\t\tdefault: () => [],\n\t},\n});\n\nconst { copy, copied, isSupported } = useClipboard();\n\nconst isSingleButtonMode = computed(() => props.options.length === 0);\n\nconst tooltipMessage = computed(() => {\n\tif (!isSingleButtonMode.value) return;\n\treturn copied.value ? \"Copied to clipboard\" : props.label;\n});\n\nconst isMenuOpen = ref(false);\n\nconst trigger = useTemplateRef(\"trigger\");\nconst menu = useTemplateRef(\"menu\");\n\nconst { floatingStyles } = useFloating(trigger, menu, {\n\tplacement: \"bottom-end\",\n});\n\n// close the menu when clicking outside\nconst hasFocus = useFocusWithin(trigger);\n\nwatch(\n\thasFocus,\n\t() => {\n\t\tif (!hasFocus.value) {\n\t\t\t// wait next tick to let event propagate\n\t\t\tnextTick().then(() => {\n\t\t\t\tisMenuOpen.value = false;\n\t\t\t});\n\t\t}\n\t},\n\t{\n\t\timmediate: true,\n\t},\n);\n\nasync function onCopyButtonClick() {\n\tif (isSingleButtonMode.value) {\n\t\tcopy(props.value);\n\n\t\treturn;\n\t}\n\n\tisMenuOpen.value = !isMenuOpen.value;\n}\n\nfunction onMenuItemSelect(value: string) {\n\tcopy(value);\n\n\tisMenuOpen.value = false;\n}\n</script>\n\n<style scoped>\n.SharedCopyClipboardButton {\n\tposition: relative;\n}\n\n.menu {\n\twidth: 160px;\n}\n\n@keyframes pulse {\n\t0% {\n\t\ttransform: scale(1);\n\t}\n\t50% {\n\t\ttransform: scale(1.2);\n\t}\n\t100% {\n\t\ttransform: scale(1);\n\t}\n}\n\n.button.copied :deep(svg) {\n\tanimation: pulse 0.3s ease-in-out;\n}\n\n.button.copied {\n\tcolor: #4caf50;\n}\n</style>\n"],"names":["props","__props","copy","copied","isSupported","useClipboard","isSingleButtonMode","computed","tooltipMessage","isMenuOpen","ref","trigger","useTemplateRef","menu","floatingStyles","useFloating","hasFocus","useFocusWithin","watch","nextTick","onCopyButtonClick","onMenuItemSelect","value"],"mappings":"0oBAuDA,MAAMA,EAAQC,EAoBR,CAAE,KAAAC,EAAM,OAAAC,EAAQ,YAAAC,GAAgBC,EAAa,EAE7CC,EAAqBC,EAAS,IAAMP,EAAM,QAAQ,SAAW,CAAC,EAE9DQ,EAAiBD,EAAS,IAAM,CACrC,GAAKD,EAAmB,MACjB,OAAAH,EAAO,MAAQ,sBAAwBH,EAAM,KAAA,CACpD,EAEKS,EAAaC,EAAI,EAAK,EAEtBC,EAAUC,EAAe,SAAS,EAClCC,EAAOD,EAAe,MAAM,EAE5B,CAAE,eAAAE,CAAmB,EAAAC,EAAYJ,EAASE,EAAM,CACrD,UAAW,YAAA,CACX,EAGKG,EAAWC,EAAeN,CAAO,EAEvCO,EACCF,EACA,IAAM,CACAA,EAAS,OAEJG,EAAA,EAAE,KAAK,IAAM,CACrBV,EAAW,MAAQ,EAAA,CACnB,CAEH,EACA,CACC,UAAW,EACZ,CAAA,EAGD,eAAeW,GAAoB,CAClC,GAAId,EAAmB,MAAO,CAC7BJ,EAAKF,EAAM,KAAK,EAEhB,MACD,CAEWS,EAAA,MAAQ,CAACA,EAAW,KAChC,CAEA,SAASY,EAAiBC,EAAe,CACxCpB,EAAKoB,CAAK,EAEVb,EAAW,MAAQ,EACpB"}