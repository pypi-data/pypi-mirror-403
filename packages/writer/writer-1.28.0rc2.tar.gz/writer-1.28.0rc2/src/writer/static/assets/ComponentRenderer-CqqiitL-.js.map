{"version":3,"mappings":"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","names":["ALLOWED_LIST_MAX_LENGTH","wf","inject","injectionKeys","props","__props","typesToMessage","types","lastJoiner","names","type","def","message","computed","containableTypes","componentId","component","parent","_a","isBlueprintNode","_sfc_main$2","ssbm","secretsManager","template","getTemplate","instancePath","instanceData","getEvaluatedFields","isComponentVisible","useEvaluator","evaluatedFields","tracking","useWriterTracking","children","c","isBeingEdited","isDraggable","COMPONENT_TYPES_ROOT","componentDefinition","isParentSuitable","parentId","childType","isDisabled","ref","getChildlessPlaceholderVNode","h","ChildlessPlaceholder","renderProxiedComponent","instanceNumber","ext","ComponentProxy","filterBySlot","slotName","slot","getChildrenVNodes","componentFilter","positionlessSlot","renderInsertionSlot","position","slotComponents","bmcVNodes","childComponent","cmcVNodes","vnode","idx","flattenedInstancePath","flattenInstancePath","provide","dataAttrs","componentDefinitionFields","isSelected","watch","isNowSelected","styleFields","value","FieldCategory","acc","key","isChildless","isVisible","getHandlerCallable","handlerFunctionName","isBinding","ev","pageKey","_ev","eventHandlerProps","eventType","eventKey","handlerFunction","_b","fieldBasedStyleVars","fields","styleVars","fieldBasedCssClasses","CSS_CLASSES_FIELD_KEY","cssStr","cssClassesArr","s","cssClasses","getRootElProps","renderErrorVNode","vnodeProps","RenderError","childlessPlaceholder","defaultSlotFn","MAX_ITEMS_IN_LIST","isActive","balloon","useTemplateRef","notifications","reactive","handleNotification","notification","title","code","onMounted","toggle","clearAll","wfbm","templateEvaluator","importedModulesSpecifiers","activeRootId","coreRootFields","rootStyle","WDS_CSS_PROPERTIES","_c","_d","_e","_f","isMessagePending","appName","updateTitle","mode","importStylesheet","stylesheetKey","path","existingEl","el","resolveAssetURL","importScript","scriptKey","importModule","moduleKey","specifier","url","__vitePreload","handleFunctionCall","functionName","args","m","addMailSubscriptions","mailItem","nextTick","changePageInHash","routeVars","changeRouteVarsInHash","handleAppOpenChange","parsedHash","serializeParsedHash","event","rootInstance","onBeforeMount"],"ignoreList":[],"sources":["../../../ui/src/renderer/ChildlessPlaceholder.vue","../../../ui/src/renderer/RenderError.vue","../../../ui/src/renderer/ComponentProxy.vue","../../../ui/src/renderer/RendererNotifications.vue","../../../ui/src/renderer/ComponentRenderer.vue"],"sourcesContent":["<template>\n\t<BaseEmptiness\n\t\tclass=\"ChildlessPlaceholder\"\n\t\t:component-id=\"componentId\"\n\t\t:message=\"message\"\n\t/>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, inject } from \"vue\";\nimport BaseEmptiness from \"@/components/core/base/BaseEmptiness.vue\";\nimport injectionKeys from \"@/injectionKeys\";\nimport { Component } from \"@/writerTypes\";\n\nconst ALLOWED_LIST_MAX_LENGTH = 10;\nconst wf = inject(injectionKeys.core);\n\nconst props = defineProps({\n\tcomponentId: { type: String, required: true },\n});\n\nconst typesToMessage = (\n\ttypes: Component[\"type\"][],\n\tlastJoiner: \"or\" | \"and\",\n) => {\n\tconst definitions = types.map((type) => wf.getComponentDefinition(type));\n\tconst names = definitions.map((def) => def?.name);\n\tconst message = `${names.slice(0, -1).join(\", \")} ${\n\t\tnames.length > 1 ? lastJoiner : \"\"\n\t} ${names.at(-1)}`;\n\treturn message;\n};\n\nconst message = computed(() => {\n\tconst containableTypes = wf.getContainableTypes(props.componentId);\n\tlet message: string;\n\n\tif (containableTypes.length <= ALLOWED_LIST_MAX_LENGTH) {\n\t\tconst typesMessage = typesToMessage(containableTypes, \"and\");\n\t\tmessage = `You can add ${typesMessage} components`;\n\t}\n\n\treturn message;\n});\n</script>\n","<template>\n\t<BlueprintsNode v-if=\"isBlueprintNode\" :draggable=\"false\" />\n\t<div v-else class=\"RenderError\" :draggable=\"draggable\">\n\t\t<div class=\"title\">\n\t\t\t<h2>Error rendering {{ componentType }}</h2>\n\t\t</div>\n\t\t<div class=\"message\">\n\t\t\t{{ message }}\n\t\t</div>\n\t</div>\n</template>\n\n<script setup lang=\"ts\">\nimport injectionKeys from \"@/injectionKeys\";\nimport { Component } from \"@/writerTypes\";\nimport { computed, inject, PropType } from \"vue\";\n\nimport BlueprintsNode from \"@/components/blueprints/abstract/BlueprintsNode.vue\";\n\ndefineProps({\n\tcomponentType: {\n\t\ttype: String as PropType<Component[\"type\"]>,\n\t\trequired: true,\n\t},\n\tmessage: { type: String, required: true },\n\tdraggable: { type: Boolean, required: false },\n});\n\nconst wf = inject(injectionKeys.core);\nconst componentId = inject(injectionKeys.componentId);\n\nconst component = computed(() => wf.getComponentById(componentId));\nconst parent = computed(() => wf.getComponentById(component.value?.parentId));\n\nconst isBlueprintNode = computed(\n\t() => parent.value?.type === \"blueprints_blueprint\",\n);\n</script>\n\n<style scoped></style>\n","<script lang=\"ts\">\nimport { PropType, VNode, computed, h, inject, provide, ref, watch } from \"vue\";\nimport { getTemplate } from \"@/core/templateMap\";\nimport injectionKeys from \"@/injectionKeys\";\nimport {\n\tComponent,\n\tFieldCategory,\n\tInstancePath,\n\tInstancePathItem,\n} from \"@/writerTypes\";\nimport ChildlessPlaceholder from \"./ChildlessPlaceholder.vue\";\nimport ComponentProxy from \"./ComponentProxy.vue\";\nimport RenderError from \"./RenderError.vue\";\nimport { flattenInstancePath } from \"./instancePath\";\nimport { useEvaluator } from \"./useEvaluator\";\nimport { useWriterTracking } from \"@/composables/useWriterTracking\";\nimport { COMPONENT_TYPES_ROOT } from \"@/constants/component\";\n\nexport default {\n\tprops: {\n\t\tcomponentId: { type: String, required: true },\n\t\tinstancePath: { type: Array as PropType<InstancePath>, required: true },\n\t\tinstanceData: { type: Array, required: true },\n\t},\n\tsetup(props) {\n\t\tconst wf = inject(injectionKeys.core);\n\t\tconst ssbm = inject(injectionKeys.builderManager);\n\t\tconst secretsManager = inject(injectionKeys.secretsManager);\n\t\tconst componentId = props.componentId;\n\t\tconst component = computed(() => wf.getComponentById(componentId));\n\t\tconst template = getTemplate(component.value.type);\n\t\tconst instancePath = props.instancePath;\n\t\tconst instanceData = props.instanceData;\n\t\tconst { getEvaluatedFields, isComponentVisible } = useEvaluator(\n\t\t\twf,\n\t\t\tsecretsManager,\n\t\t);\n\t\tconst evaluatedFields = getEvaluatedFields(instancePath);\n\t\tconst tracking = useWriterTracking(wf);\n\n\t\tconst children = computed(() =>\n\t\t\twf\n\t\t\t\t.getComponents(componentId, { sortedByPosition: true })\n\t\t\t\t// exclude Internal component as children (i.e. Notes)\n\t\t\t\t.filter(\n\t\t\t\t\t(c) =>\n\t\t\t\t\t\twf.getComponentDefinition(c.type)?.category !==\n\t\t\t\t\t\t\"Internal\",\n\t\t\t\t),\n\t\t);\n\t\tconst isBeingEdited = computed(\n\t\t\t() => !!ssbm && ssbm.getMode() != \"preview\",\n\t\t);\n\t\tconst isDraggable = computed(\n\t\t\t() =>\n\t\t\t\tisBeingEdited.value &&\n\t\t\t\t!component.value.isCodeManaged &&\n\t\t\t\t!COMPONENT_TYPES_ROOT.has(component.value.type) &&\n\t\t\t\tcomponentDefinition.value?.toolkit !== \"blueprints\",\n\t\t);\n\n\t\tconst isParentSuitable = (parentId, childType) => {\n\t\t\tconst allowedTypes = !parentId\n\t\t\t\t? [...COMPONENT_TYPES_ROOT]\n\t\t\t\t: wf.getContainableTypes(parentId);\n\t\t\treturn allowedTypes.includes(childType);\n\t\t};\n\n\t\tconst isDisabled = ref(false);\n\n\t\tconst getChildlessPlaceholderVNode = (): VNode => {\n\t\t\tif (children.value.length > 0) return;\n\t\t\treturn h(ChildlessPlaceholder, {\n\t\t\t\tcomponentId: component.value.id,\n\t\t\t});\n\t\t};\n\n\t\tconst renderProxiedComponent = (\n\t\t\tcomponentId: Component[\"id\"],\n\t\t\tinstanceNumber: InstancePathItem[\"instanceNumber\"] = 0,\n\t\t\text?: { class?: string[]; contextSlot?: string },\n\t\t): VNode => {\n\t\t\tconst vnode = h(ComponentProxy, {\n\t\t\t\tcomponentId,\n\t\t\t\tkey: `${componentId}:${instanceNumber}`,\n\t\t\t\tinstancePath: [\n\t\t\t\t\t...instancePath,\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: componentId,\n\t\t\t\t\t\tinstanceNumber,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tinstanceData: [...instanceData, ref(null)],\n\t\t\t\t...(ext ?? {}),\n\t\t\t});\n\t\t\treturn vnode;\n\t\t};\n\n\t\tconst filterBySlot =\n\t\t\t(slotName: string) =>\n\t\t\t(c: Component): boolean => {\n\t\t\t\tif (\n\t\t\t\t\t!isParentSuitable(componentId, c.type) &&\n\t\t\t\t\tslotName === \"default\"\n\t\t\t\t)\n\t\t\t\t\treturn true;\n\t\t\t\tconst childDef = wf.getComponentDefinition(c.type);\n\t\t\t\tconst slot = childDef.slot ?? \"default\";\n\t\t\t\treturn slot === \"*\" || slot === slotName;\n\t\t\t};\n\n\t\tconst getChildrenVNodes = (\n\t\t\tinstanceNumber: InstancePathItem[\"instanceNumber\"] = 0,\n\t\t\tslotName: string = \"default\",\n\t\t\tcomponentFilter: (_c: Component) => boolean = () => true,\n\t\t\tpositionlessSlot: boolean = false,\n\t\t): VNode[] => {\n\t\t\tconst renderInsertionSlot = (position: number): VNode[] => {\n\t\t\t\tif (!isBeingEdited.value || positionlessSlot) return [];\n\t\t\t\treturn [\n\t\t\t\t\th(\"div\", {\n\t\t\t\t\t\t\"data-writer-slot-of-id\": componentId,\n\t\t\t\t\t\t\"data-writer-position\": position,\n\t\t\t\t\t}),\n\t\t\t\t];\n\t\t\t};\n\n\t\t\tconst slotComponents = children.value\n\t\t\t\t.filter(filterBySlot(slotName))\n\t\t\t\t.filter(componentFilter);\n\n\t\t\tconst bmcVNodes = slotComponents\n\t\t\t\t.filter((c) => !c.isCodeManaged)\n\t\t\t\t.map((childComponent) =>\n\t\t\t\t\trenderProxiedComponent(childComponent.id, instanceNumber, {\n\t\t\t\t\t\tcontextSlot: slotName,\n\t\t\t\t\t}),\n\t\t\t\t);\n\n\t\t\tconst cmcVNodes = slotComponents\n\t\t\t\t.filter((c) => c.isCodeManaged)\n\t\t\t\t.map((childComponent) =>\n\t\t\t\t\trenderProxiedComponent(childComponent.id, instanceNumber, {\n\t\t\t\t\t\tcontextSlot: slotName,\n\t\t\t\t\t}),\n\t\t\t\t);\n\n\t\t\treturn [\n\t\t\t\t...renderInsertionSlot(0),\n\t\t\t\t...bmcVNodes\n\t\t\t\t\t.map((vnode: VNode, idx): VNode[] => [\n\t\t\t\t\t\tvnode,\n\t\t\t\t\t\trenderInsertionSlot(idx + 1),\n\t\t\t\t\t])\n\t\t\t\t\t.flat(),\n\t\t\t\t...cmcVNodes,\n\t\t\t];\n\t\t};\n\n\t\tconst flattenedInstancePath = flattenInstancePath(instancePath);\n\n\t\tprovide(injectionKeys.evaluatedFields, evaluatedFields);\n\t\tprovide(injectionKeys.componentId, componentId);\n\t\tprovide(injectionKeys.isBeingEdited, isBeingEdited);\n\t\tprovide(injectionKeys.isDisabled, isDisabled);\n\t\tprovide(injectionKeys.instancePath, instancePath);\n\t\tprovide(injectionKeys.instanceData, instanceData);\n\t\tprovide(injectionKeys.renderProxiedComponent, renderProxiedComponent);\n\t\tprovide(injectionKeys.getChildrenVNodes, getChildrenVNodes);\n\t\tprovide(injectionKeys.flattenedInstancePath, flattenedInstancePath);\n\n\t\tconst dataAttrs = {\n\t\t\t\"data-writer-id\": componentId,\n\t\t\t\"data-writer-instance-path\": flattenedInstancePath,\n\t\t};\n\n\t\tconst componentDefinition = computed(() =>\n\t\t\twf.getComponentDefinition(component.value.type),\n\t\t);\n\t\tconst componentDefinitionFields = computed(\n\t\t\t() => componentDefinition.value?.fields,\n\t\t);\n\n\t\t/*\n\t\tSelected stylesheet class is removed if changes are made,\n\t\tfor the developer to appreciate the changes. Particularly important\n\t\tfor colour changes, with which selection interferes.\n\t\t*/\n\n\t\tconst isSelected = ref(false);\n\t\twatch(\n\t\t\t() => ssbm?.isComponentIdSelected(componentId),\n\t\t\t(isNowSelected) => {\n\t\t\t\tisSelected.value = isNowSelected;\n\t\t\t},\n\t\t\t{ immediate: true },\n\t\t);\n\n\t\t// keep track on style fields changed to remove the \"selected\" state if a style change (it helps the user to see his modifications)\n\t\tconst styleFields = computed(() => {\n\t\t\treturn Object.entries(componentDefinitionFields.value ?? {})\n\t\t\t\t.filter(([, value]) => value.category === FieldCategory.Style)\n\t\t\t\t.reduce<Record<string, unknown>>((acc, [key]) => {\n\t\t\t\t\tacc[key] = evaluatedFields[key].value;\n\t\t\t\t\treturn acc;\n\t\t\t\t}, {});\n\t\t});\n\t\twatch(styleFields, () => {\n\t\t\tisSelected.value = false;\n\t\t\ttracking.track(\"ui_block_styles_updated\");\n\t\t});\n\n\t\tconst isChildless = computed(() => children.value.length == 0);\n\t\tconst isVisible = computed(() =>\n\t\t\tisComponentVisible(componentId, instancePath),\n\t\t);\n\n\t\tconst getHandlerCallable = (\n\t\t\thandlerFunctionName: string,\n\t\t\tisBinding: boolean,\n\t\t) => {\n\t\t\tconst isForwardable =\n\t\t\t\t!handlerFunctionName ||\n\t\t\t\t!handlerFunctionName?.startsWith(\"$goToPage_\");\n\n\t\t\tif (isForwardable && !isBinding) {\n\t\t\t\treturn (ev: Event) => {\n\t\t\t\t\twf.forwardEvent(ev, instancePath, true);\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (handlerFunctionName?.startsWith(\"$goToPage_\")) {\n\t\t\t\tconst pageKey = handlerFunctionName.substring(\n\t\t\t\t\t\"$goToPage_\".length,\n\t\t\t\t);\n\t\t\t\treturn (_ev: Event) => wf.setActivePageFromKey(pageKey);\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\n\t\tconst eventHandlerProps = computed(() => {\n\t\t\tconst props = {};\n\n\t\t\t// Handle event handlers\n\n\t\t\tconst eventTypes = Object.keys(\n\t\t\t\tcomponentDefinition.value.events ?? {},\n\t\t\t);\n\n\t\t\teventTypes.forEach((eventType) => {\n\t\t\t\tconst eventKey = `on${eventType\n\t\t\t\t\t.charAt(0)\n\t\t\t\t\t.toUpperCase()}${eventType.slice(1)}`;\n\t\t\t\tconst isBinding =\n\t\t\t\t\teventType === component.value.binding?.eventType;\n\t\t\t\tprops[eventKey] = (ev: Event) => {\n\t\t\t\t\tif (isBinding) {\n\t\t\t\t\t\twf.forwardEvent(ev, instancePath, true);\n\t\t\t\t\t}\n\t\t\t\t\tconst handlerFunction =\n\t\t\t\t\t\tcomponent.value.handlers?.[eventType] ?? null;\n\t\t\t\t\tgetHandlerCallable(handlerFunction, isBinding)?.(ev);\n\t\t\t\t};\n\t\t\t});\n\n\t\t\treturn props;\n\t\t});\n\n\t\tconst fieldBasedStyleVars = computed(() => {\n\t\t\tconst fields = componentDefinitionFields.value;\n\t\t\tif (!fields) return;\n\t\t\tconst styleVars = {};\n\t\t\tObject.keys(fields).forEach((key) => {\n\t\t\t\tif (!fields[key].applyStyleVariable) return;\n\t\t\t\tif (!evaluatedFields[key]) return;\n\t\t\t\tstyleVars[`--${key}`] = evaluatedFields[key].value;\n\t\t\t});\n\t\t\treturn styleVars;\n\t\t});\n\n\t\tconst fieldBasedCssClasses = computed(() => {\n\t\t\tconst CSS_CLASSES_FIELD_KEY = \"cssClasses\";\n\t\t\tconst fields = componentDefinitionFields.value;\n\t\t\tif (!fields) return;\n\t\t\tif (\n\t\t\t\t!fields[CSS_CLASSES_FIELD_KEY] ||\n\t\t\t\t!evaluatedFields[CSS_CLASSES_FIELD_KEY]\n\t\t\t)\n\t\t\t\treturn;\n\t\t\tconst cssStr = String(evaluatedFields[CSS_CLASSES_FIELD_KEY].value);\n\t\t\tconst cssClassesArr = cssStr?.split(\" \").map((s) => s.trim());\n\t\t\tconst cssClasses = {};\n\t\t\tcssClassesArr.forEach((key) => {\n\t\t\t\tcssClasses[key] = true;\n\t\t\t});\n\t\t\treturn cssClasses;\n\t\t});\n\n\t\tconst getRootElProps = function () {\n\t\t\tconst rootElProps = {\n\t\t\t\tclass: {\n\t\t\t\t\t[`wf-type-${component.value.type}`]: true,\n\t\t\t\t\tcomponent: true,\n\t\t\t\t\tchildless: isChildless.value,\n\t\t\t\t\tselected: isSelected.value,\n\t\t\t\t\tdisabled: isDisabled.value,\n\t\t\t\t\tbeingEdited: isBeingEdited.value,\n\t\t\t\t\t...fieldBasedCssClasses.value,\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\t...fieldBasedStyleVars.value,\n\t\t\t\t\t...(!isVisible.value ? { display: \"none\" } : {}),\n\t\t\t\t},\n\t\t\t\t...dataAttrs,\n\t\t\t\t...(!isDisabled.value ? eventHandlerProps.value : []),\n\t\t\t\tdraggable: isDraggable.value,\n\t\t\t};\n\t\t\treturn rootElProps;\n\t\t};\n\n\t\tconst renderErrorVNode = (vnodeProps, message): VNode => {\n\t\t\tif (!isBeingEdited.value) return h(\"div\");\n\t\t\treturn h(RenderError, {\n\t\t\t\t...vnodeProps,\n\t\t\t\tcomponentType: component.value.type,\n\t\t\t\tmessage,\n\t\t\t});\n\t\t};\n\n\t\treturn () => {\n\t\t\tconst childlessPlaceholder = isBeingEdited.value\n\t\t\t\t? getChildlessPlaceholderVNode()\n\t\t\t\t: undefined;\n\n\t\t\tconst defaultSlotFn = ({\n\t\t\t\tinstanceNumber = 0,\n\t\t\t\tslotName = \"default\",\n\t\t\t\tcomponentFilter = () => true,\n\t\t\t\tpositionlessSlot = false,\n\t\t\t}: {\n\t\t\t\tinstanceNumber: number;\n\t\t\t\tslotName: string;\n\t\t\t\tcomponentFilter: (_c: Component) => boolean;\n\t\t\t\tpositionlessSlot: boolean;\n\t\t\t}) => {\n\t\t\t\tif (isChildless.value) {\n\t\t\t\t\treturn positionlessSlot ? undefined : childlessPlaceholder;\n\t\t\t\t}\n\t\t\t\tconst vnodes = getChildrenVNodes(\n\t\t\t\t\tinstanceNumber,\n\t\t\t\t\tslotName,\n\t\t\t\t\tcomponentFilter,\n\t\t\t\t\tpositionlessSlot,\n\t\t\t\t);\n\t\t\t\treturn vnodes;\n\t\t\t};\n\n\t\t\tconst vnodeProps = getRootElProps();\n\n\t\t\tif (\n\t\t\t\t!isParentSuitable(\n\t\t\t\t\tcomponent.value.parentId,\n\t\t\t\t\tcomponent.value.type,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn renderErrorVNode(\n\t\t\t\t\tvnodeProps,\n\t\t\t\t\t\"Parent is not suitable for this component\",\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn h(template, vnodeProps, {\n\t\t\t\tdefault: defaultSlotFn,\n\t\t\t});\n\t\t};\n\t},\n};\n</script>\n<style scoped>\n@import \"@/renderer/sharedStyles.css\";\n</style>\n","<template>\n\t<div\n\t\tv-show=\"notifications.length > 0\"\n\t\tclass=\"RendererNotifications colorTransformer\"\n\t\t@click=\"toggle\"\n\t>\n\t\t<div ref=\"balloon\" class=\"balloon\" title=\"Toggle notifications\">\n\t\t\t<WdsIcon name=\"bell\" />\n\t\t\t<div class=\"counter\">{{ notifications.length }}</div>\n\t\t</div>\n\t\t<div class=\"balloonFlash\"></div>\n\t\t<div v-show=\"isActive\" class=\"main\">\n\t\t\t<div class=\"clearContainer\">\n\t\t\t\t<WdsButton @click=\"clearAll\">\n\t\t\t\t\t<WdsIcon name=\"trash-2\" />\n\t\t\t\t\tClear all\n\t\t\t\t</WdsButton>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-for=\"(notification, notificationId) in notifications\"\n\t\t\t\t:key=\"notificationId\"\n\t\t\t\tclass=\"notification\"\n\t\t\t>\n\t\t\t\t<div class=\"icon\" :class=\"notification.type\">\n\t\t\t\t\t<WdsIcon name=\"triangle-alert\" />\n\t\t\t\t</div>\n\t\t\t\t<div class=\"content\">\n\t\t\t\t\t<header>\n\t\t\t\t\t\t<strong class=\"title\">{{ notification.title }}</strong>\n\t\t\t\t\t\t<span class=\"time\">{{\n\t\t\t\t\t\t\tnotification.timestampReceived.toLocaleTimeString()\n\t\t\t\t\t\t}}</span>\n\t\t\t\t\t</header>\n\t\t\t\t\t<div class=\"message\">{{ notification.message }}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup lang=\"ts\">\nimport { inject, onMounted, reactive, ref, useTemplateRef } from \"vue\";\nimport injectionKeys from \"@/injectionKeys\";\nimport WdsButton from \"@/wds/WdsButton.vue\";\nimport WdsIcon from \"@/wds/WdsIcon.vue\";\n\nconst MAX_ITEMS_IN_LIST = 100;\nconst wf = inject(injectionKeys.core);\nconst isActive = ref(false);\nconst balloon = useTemplateRef(\"balloon\");\n\nconst notifications: {\n\ttype: string;\n\ttitle: string;\n\tmessage: string;\n\tcode: string;\n\ttimestampReceived: Date;\n}[] = reactive([]);\n\nconst handleNotification = (notification: {\n\ttype: string;\n\ttitle: string;\n\tmessage: string;\n\tcode?: string;\n}) => {\n\tconst { type, title, message, code } = notification;\n\tnotifications.unshift({\n\t\ttype,\n\t\ttitle,\n\t\tmessage,\n\t\tcode,\n\t\ttimestampReceived: new Date(),\n\t});\n\tnotifications.splice(MAX_ITEMS_IN_LIST);\n\tballoon.value.classList.remove(\"alert\");\n\tballoon.value.offsetWidth; // Forces a re-render\n\tballoon.value.classList.add(\"alert\");\n};\n\nonMounted(() => {\n\twf.addMailSubscription(\"notification\", handleNotification);\n});\n\nconst toggle = () => {\n\tif (notifications.length == 0) return;\n\tisActive.value = !isActive.value;\n};\n\nconst clearAll = () => {\n\tnotifications.splice(0);\n\tisActive.value = false;\n};\n</script>\n\n<style scoped>\n@import \"./sharedStyles.css\";\n@import \"./colorTransformations.css\";\n\n.RendererNotifications {\n\tposition: sticky;\n\ttop: 24px;\n\tmargin-left: auto;\n\tmargin-right: 24px;\n\tmax-width: 70ch;\n\twidth: 40vw;\n\tz-index: 3;\n\t--buttonColor: var(--wdsColorBlue5);\n}\n\n.balloonFlash {\n\tright: 0;\n\tposition: absolute;\n\topacity: 0.8;\n\tbackground: var(--accentColor);\n\twidth: 52px;\n\theight: 52px;\n\tborder-radius: 50%;\n}\n\n.balloon.alert + .balloonFlash {\n\tanimation-name: alert;\n\tanimation-duration: 1s;\n\tanimation-timing-function: ease-in-out;\n}\n\n.balloon {\n\tz-index: 2;\n\tposition: absolute;\n\tuser-select: none;\n\tright: 0;\n\tfont-size: 0.7rem;\n\tborder-radius: 50%;\n\tbackground: var(--accentColor);\n\twidth: 52px;\n\theight: 52px;\n\tcolor: var(--emptinessColor);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tcursor: pointer;\n\tbox-shadow: 0 0 8px 2px rgba(0, 0, 0, 0.2);\n\tflex-direction: column;\n}\n\n.balloon :deep(svg) {\n\tfont-size: 1.25rem;\n}\n\n.balloon.alert :deep(svg) {\n\tanimation-name: ring;\n\tanimation-duration: 0.3s;\n\tanimation-iteration-count: 4;\n\tanimation-timing-function: ease-in-out;\n}\n\n.balloon .counter {\n\tposition: absolute;\n\ttop: 40px;\n\tright: 0px;\n\tbackground: var(--containerBackgroundColor);\n\tpadding: 4px 8px 4px 8px;\n\tborder-radius: 16px;\n\tcolor: var(--primaryTextColor);\n\tborder: 1px solid var(--separatorColor);\n}\n\n@keyframes alert {\n\t0% {\n\t\ttransform: scale(1);\n\t}\n\t50% {\n\t\ttransform: scale(1.7);\n\t}\n\t100% {\n\t\ttransform: scale(1);\n\t}\n}\n\n@keyframes ring {\n\t0% {\n\t\ttransform: rotate(0deg);\n\t}\n\t25% {\n\t\ttransform: rotate(-25deg);\n\t}\n\t75% {\n\t\ttransform: rotate(25deg);\n\t}\n\t100% {\n\t\ttransform: rotate(0deg);\n\t}\n}\n\n.main {\n\tposition: absolute;\n\tmax-height: 75vh;\n\toverflow-y: auto;\n\toverflow-x: hidden;\n\tright: 0;\n\twidth: 100%;\n\tmax-width: 100%;\n\ttop: calc(48px + 24px);\n\tcolor: var(--primaryTextColor);\n\tbackground: var(--containerBackgroundColor);\n\tborder-radius: 8px;\n\tbox-shadow: 0 0 8px 0px rgba(0, 0, 0, 0.2);\n}\n\n.clearContainer {\n\tpadding: 16px;\n}\n\n.clearContainer button {\n\tmargin-left: auto;\n\tmargin-right: 0;\n}\n\n.notification {\n\tborder-top: 1px solid var(--separatorColor);\n\tpadding: 16px 16px 16px 0;\n\tfont-size: 0.8rem;\n\tdisplay: grid;\n\tgrid-template-rows: 1fr;\n\tgrid-template-columns: 72px 1fr;\n\talign-items: center;\n}\n\n.notification .icon {\n\tgrid-area: 1/1;\n\ttext-align: center;\n\tfont-size: 1.25rem;\n}\n\n.notification .icon.error {\n\tcolor: #fb0000;\n}\n.notification .icon.warning {\n\tcolor: #fb9600;\n}\n.notification .icon.info {\n\tcolor: #00adb8;\n}\n.notification .icon.success {\n\tcolor: #00b800;\n}\n\n.notification .content {\n\tgrid-area: 1/2;\n\tmax-width: 100%;\n\toverflow: hidden;\n}\n\n.notification header {\n\tdisplay: flex;\n}\n\n.notification header .title {\n\tflex: 1 0 auto;\n}\n\n.notification header .time {\n\tflex: 0 0 auto;\n\tcolor: var(--secondaryTextColor);\n}\n\n.message {\n\tmargin-top: 4px;\n}\n</style>\n","<template>\n\t<main\n\t\tclass=\"ComponentRenderer\"\n\t\ttabindex=\"-1\"\n\t\t:style=\"rootStyle\"\n\t\t:class=\"{ loadingActive: isMessagePending }\"\n\t>\n\t\t<RendererNotifications class=\"notifications\" />\n\t\t<div class=\"loadingBar\"></div>\n\t\t<div class=\"rootComponentArea\">\n\t\t\t<ComponentProxy\n\t\t\t\t:key=\"activeRootId\"\n\t\t\t\t:component-id=\"activeRootId\"\n\t\t\t\t:instance-path=\"[\n\t\t\t\t\t{ componentId: activeRootId, instanceNumber: 0 },\n\t\t\t\t]\"\n\t\t\t\t:instance-data=\"[ref(null)]\"\n\t\t\t></ComponentProxy>\n\t\t\t<slot></slot>\n\t\t</div>\n\t</main>\n</template>\n\n<script setup lang=\"ts\">\nimport {\n\tinject,\n\tref,\n\tcomputed,\n\twatch,\n\tonBeforeMount,\n\tonMounted,\n\tnextTick,\n} from \"vue\";\nimport { Component } from \"@/writerTypes\";\nimport ComponentProxy from \"./ComponentProxy.vue\";\nimport RendererNotifications from \"./RendererNotifications.vue\";\nimport injectionKeys from \"@/injectionKeys\";\nimport { useEvaluator } from \"./useEvaluator\";\nimport {\n\tchangePageInHash,\n\tchangeRouteVarsInHash,\n\tserializeParsedHash,\n} from \"@/core/navigation\";\nimport { WDS_CSS_PROPERTIES } from \"@/wds/tokens\";\nimport { resolveAssetURL } from \"@/utils/url\";\n\nconst wf = inject(injectionKeys.core);\nconst wfbm = inject(injectionKeys.builderManager);\nconst secretsManager = inject(injectionKeys.secretsManager);\nconst templateEvaluator = useEvaluator(wf, secretsManager);\nconst importedModulesSpecifiers: Record<string, string> = {};\n\nconst activeRootId = computed<Component[\"id\"]>(\n\t() => wfbm?.activeRootId.value ?? \"root\",\n);\n\nconst coreRootFields = templateEvaluator.getEvaluatedFields([\n\t{ componentId: \"root\", instanceNumber: 0 },\n]);\n\nconst rootStyle = computed(() => {\n\treturn {\n\t\t...WDS_CSS_PROPERTIES,\n\t\t\"--accentColor\": coreRootFields.accentColor?.value,\n\t\t\"--emptinessColor\": coreRootFields.emptinessColor?.value,\n\t\t\"--containerBackgroundColor\":\n\t\t\tcoreRootFields.parentIdBackgroundColor?.value,\n\t\t\"--primaryTextColor\": coreRootFields.primaryTextColor?.value,\n\t\t\"--secondaryTextColor\": coreRootFields.secondaryTextColor?.value,\n\t\t\"--separatorColor\": coreRootFields.separatorColor?.value,\n\t};\n});\n\nconst isMessagePending = computed(() => wf.frontendMessageMap.value.size > 0);\n\nwatch(\n\t() => coreRootFields.appName?.value,\n\t(appName: string) => {\n\t\tif (appName != \"\") {\n\t\t\tupdateTitle(appName);\n\t\t}\n\t},\n\t{ immediate: true },\n);\n\nfunction updateTitle(appName: string) {\n\tconst mode = wf.mode.value;\n\tlet title: string;\n\tif (appName && mode == \"edit\") {\n\t\ttitle = `${appName} | Writer | Builder`;\n\t} else if (!appName && mode == \"edit\") {\n\t\ttitle = \"Writer | Builder\";\n\t} else if (appName && mode == \"run\") {\n\t\ttitle = `${appName}`;\n\t} else if (!appName && mode == \"run\") {\n\t\ttitle = \"Writer\";\n\t}\n\tdocument.title = title;\n}\n\nasync function importStylesheet(stylesheetKey: string, path: string) {\n\tconst existingEl = document.querySelector(\n\t\t`[data-writer-stylesheet-key=\"${stylesheetKey}\"]`,\n\t);\n\texistingEl?.remove();\n\tconst el = document.createElement(\"link\");\n\tel.dataset.writerStylesheetKey = stylesheetKey;\n\tel.setAttribute(\"href\", resolveAssetURL(path));\n\tel.setAttribute(\"rel\", \"stylesheet\");\n\tdocument.head.appendChild(el);\n}\n\nasync function importScript(scriptKey: string, path: string) {\n\tconst existingEl = document.querySelector(\n\t\t`[data-writer-script-key=\"${scriptKey}\"]`,\n\t);\n\texistingEl?.remove();\n\tconst el = document.createElement(\"script\");\n\tel.dataset.writerScriptKey = scriptKey;\n\tel.src = resolveAssetURL(path);\n\tel.setAttribute(\"rel\", \"modulepreload\");\n\tdocument.head.appendChild(el);\n}\n\nasync function importModule(moduleKey: string, specifier: string) {\n\tconst url = resolveAssetURL(specifier);\n\timportedModulesSpecifiers[moduleKey] = url;\n\tawait import(/* @vite-ignore */ url);\n}\n\nasync function handleFunctionCall(\n\tmoduleKey: string,\n\tfunctionName: string,\n\targs: unknown[],\n) {\n\tconst specifier = importedModulesSpecifiers[moduleKey];\n\tconst m = await import(/* @vite-ignore */ specifier);\n\n\tif (!m) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.warn(\n\t\t\t`The module with key \"${moduleKey}\" cannot be found. Please check that it has been imported.`,\n\t\t);\n\t\treturn;\n\t}\n\tm[functionName](...args);\n}\n\ntype FileDownloadMailItemPayload = {\n\tdata: string;\n\tfileName: string;\n};\n\nfunction addMailSubscriptions() {\n\twf.addMailSubscription(\n\t\t\"fileDownload\",\n\t\t(mailItem: FileDownloadMailItemPayload) => {\n\t\t\tconst el = document.createElement(\"a\");\n\t\t\tel.href = mailItem.data;\n\t\t\tel.download = mailItem.fileName;\n\t\t\tel.click();\n\t\t},\n\t);\n\twf.addMailSubscription(\"openUrl\", (url: string) => {\n\t\tconst el = document.createElement(\"a\");\n\t\tel.href = url;\n\t\tel.target = \"_blank\";\n\t\tel.rel = \"noopener noreferrer\";\n\t\tel.click();\n\t});\n\twf.addMailSubscription(\"pageChange\", async (pageKey: string) => {\n\t\tif (wfbm?.getMode() === \"blueprints\") {\n\t\t\twfbm.setMode(\"ui\");\n\t\t}\n\t\tawait nextTick();\n\t\tchangePageInHash(pageKey);\n\t\twf.setActivePageFromKey(pageKey);\n\t});\n\twf.addMailSubscription(\n\t\t\"routeVarsChange\",\n\t\t(routeVars: Record<string, string>) => {\n\t\t\tchangeRouteVarsInHash(routeVars);\n\t\t},\n\t);\n\twf.addMailSubscription(\n\t\t\"importStylesheet\",\n\t\t({ stylesheetKey, path }: { stylesheetKey: string; path: string }) => {\n\t\t\timportStylesheet(stylesheetKey, path);\n\t\t},\n\t);\n\twf.addMailSubscription(\n\t\t\"importScript\",\n\t\t({ scriptKey, path }: { scriptKey: string; path: string }) => {\n\t\t\timportScript(scriptKey, path);\n\t\t},\n\t);\n\twf.addMailSubscription(\n\t\t\"importModule\",\n\t\t({\n\t\t\tmoduleKey,\n\t\t\tspecifier,\n\t\t}: {\n\t\t\tmoduleKey: string;\n\t\t\tspecifier: string;\n\t\t}) => {\n\t\t\timportModule(moduleKey, specifier);\n\t\t},\n\t);\n\twf.addMailSubscription(\n\t\t\"functionCall\",\n\t\t({\n\t\t\tmoduleKey,\n\t\t\tfunctionName,\n\t\t\targs,\n\t\t}: {\n\t\t\tmoduleKey: string;\n\t\t\tfunctionName: string;\n\t\t\targs: unknown[];\n\t\t}) => {\n\t\t\thandleFunctionCall(moduleKey, functionName, args);\n\t\t},\n\t);\n}\n\nfunction handleAppOpenChange() {\n\tconst parsedHash = serializeParsedHash();\n\tconst event = new CustomEvent(\"wf-app-open\", {\n\t\tdetail: {\n\t\t\tpayload: parsedHash,\n\t\t},\n\t});\n\n\tconst rootInstance = { componentId: \"root\", instanceNumber: 0 };\n\twf.forwardEvent(event, [rootInstance], true);\n}\n\nonBeforeMount(() => {\n\taddMailSubscriptions();\n});\n\nonMounted(() => {\n\thandleAppOpenChange();\n});\n</script>\n\n<style scoped>\n@import \"./sharedStyles.css\";\n\n.ComponentRenderer {\n\t--accentColor: var(--wdsColorBlue5);\n\t--buttonColor: var(--wdsColorBlue5);\n\t--emptinessColor: var(--wdsColorWhite);\n\t--separatorColor: var(--wdsColorGray2);\n\t--primaryTextColor: var(--wdsColorBlack);\n\t--buttonTextColor: var(--wdsColorWhite);\n\t--secondaryTextColor: var(--wdsColorGray4);\n\t--containerBackgroundColor: var(--wdsColorWhite);\n\t--containerShadow: 0px 2px 0px 0px rgba(0, 0, 0, 0.05);\n\twidth: 100%;\n\toutline: none;\n\t--notificationsDisplacement: 0;\n\tfont-family: Poppins, \"Helvetica Neue\", \"Lucida Grande\", sans-serif;\n\tfont-size: 0.8rem;\n\tcolor: var(--primaryTextColor);\n\tbackground: var(--emptinessColor);\n\tdisplay: flex;\n\tflex-direction: column;\n\tmin-height: 100%;\n\tisolation: isolate;\n\tflex: 1 0 auto;\n}\n.notifications {\n\tright: var(--notificationsDisplacement);\n}\n\n.loadingBar {\n\twidth: 100%;\n\theight: 4px;\n\tmargin-bottom: -4px;\n\tposition: sticky;\n\ttop: 0;\n\tpointer-events: none;\n\tz-index: 4;\n\ttransition-delay: 0.2s;\n\ttransition-property: opacity;\n\ttransition-duration: 200ms;\n\topacity: 0;\n}\n\n.loadingActive .loadingBar {\n\tbackground-size: 200% 200%;\n\topacity: 1;\n\tanimation: loadingAnimation ease-in-out 1s infinite;\n\tanimation-delay: 200ms;\n\tbackground-image: linear-gradient(\n\t\t270deg,\n\t\tvar(--emptinessColor),\n\t\tvar(--accentColor),\n\t\tvar(--emptinessColor)\n\t);\n}\n\n@keyframes loadingAnimation {\n\t0% {\n\t\tbackground-position: 0% 0%;\n\t}\n\t50% {\n\t\tbackground-position: 100% 100%;\n\t}\n\t100% {\n\t\tbackground-position: 0% 0%;\n\t}\n}\n.rootComponentArea {\n\tdisplay: flex;\n\tflex: 1 0 auto;\n}\n</style>\n"],"file":"assets/ComponentRenderer-CqqiitL-.js"}