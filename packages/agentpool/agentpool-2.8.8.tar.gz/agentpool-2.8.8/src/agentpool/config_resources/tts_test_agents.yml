# yaml-language-server: $schema=https://raw.githubusercontent.com/phil65/agentpool/refs/heads/main/schema/config-schema.json
#
# Test configuration for TTS synchronization modes.
# Each agent demonstrates a different TTS mode.
#
# Usage:
#   uv run agentpool chat --config src/agentpool/config_resources/tts_test_agents.yml --agent tts_sync_sentence
#
# Modes:
#   - sync_sentence: Block per sentence (audio syncs with text output)
#   - sync_run: Block at run end (fast streaming, wait for audio before next run)
#   - async_queue: Fully async, multiple runs queue up
#   - async_cancel: Fully async, new run cancels previous audio

agents:
  tts_sync_sentence:
    type: native
    description: "TTS with sync_sentence mode - blocks per sentence, most synchronized"
    model: openai:gpt-4.1-nano
    system_prompt:
      - |
        You are a storyteller. Tell engaging short stories in 3-4 sentences.
        Speak naturally with clear sentence breaks.
    event_handlers:
      - type: builtin
        handler: simple
      - type: tts-openai
        voice: alloy
        mode: sync_sentence
        min_text_length: 15

  tts_sync_run:
    type: native
    description: "TTS with sync_run mode - fast streaming, waits at run end"
    model: openai:gpt-4.1-nano
    system_prompt:
      - |
        You are a storyteller. Tell engaging short stories in 3-4 sentences.
        Speak naturally with clear sentence breaks.
    event_handlers:
      - type: builtin
        handler: simple
      - type: tts-openai
        voice: echo
        mode: sync_run
        min_text_length: 15

  tts_async_queue:
    type: native
    description: "TTS with async_queue mode - fully async, runs queue up"
    model: openai:gpt-4.1-nano
    system_prompt:
      - |
        You are a storyteller. Tell engaging short stories in 3-4 sentences.
        Speak naturally with clear sentence breaks.
    event_handlers:
      - type: builtin
        handler: simple
      - type: tts-openai
        voice: fable
        mode: async_queue
        min_text_length: 15

  tts_async_cancel:
    type: native
    description: "TTS with async_cancel mode - fully async, new run cancels previous"
    model: openai:gpt-4.1-nano
    system_prompt:
      - |
        You are a storyteller. Tell engaging short stories in 3-4 sentences.
        Speak naturally with clear sentence breaks.
    event_handlers:
      - type: builtin
        handler: simple
      - type: tts-openai
        voice: nova
        mode: async_cancel
        min_text_length: 15
