# SPDX-FileCopyrightText: 2025 GitHub
# SPDX-License-Identifier: MIT

seclab-taskflow-agent:
  version: 1
  filetype: taskflow

taskflow:
  - task:
      max_steps: 5
      must_complete: true
      agents:
        - seclab_taskflow_agent.personalities.assistant
      user_prompt: |
        Store the json array [1, 2, 3] in memory under the
        `test_repeat_prompt` key as a json object, then retrieve
        the contents of the `test_repeat_prompt` key from memory
      env:
        MEMCACHE_STATE_DIR: "example_repeat_prompt_taskflow/"
        MEMCACHE_BACKEND: "dictionary_file"
      toolboxes:
        - seclab_taskflow_agent.toolboxes.memcache
  - task:
      # if the last mcp tool result is iterable
      # repeat_prompt can iter those results
      must_complete: true
      repeat_prompt: true
      # with async enabled, repeat prompts run concurrent
      async: true
      # you can also limit the max concurrent tasks (default 5)
      async_limit: 2
      agents:
        - seclab_taskflow_agent.personalities.assistant
      user_prompt: |
        What is the integer value of {{ RESULT }}?
