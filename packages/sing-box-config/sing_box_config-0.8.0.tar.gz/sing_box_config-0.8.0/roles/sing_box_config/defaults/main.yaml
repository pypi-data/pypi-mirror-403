---
# defaults file for sing_box_config

# 可选: 启用订阅 URL 可访问性检查
# playbooks/tasks/pre_flight_checks.yaml
sing_box_config_validate_subscription_urls: false

# 用于从外部传入不同的 template 覆盖 templates/base.json.j2
sing_box_config_base_template: base.json.j2

# 安装来源: [local, pypi, testpypi]
sing_box_config_install_source: pypi
sing_box_config_pip_extra_args:
  pypi: ""
  testpypi: "--index-url=https://test.pypi.org/simple/"

# DNS Internal Configuration
sing_box_config_dns_internal: []

# Custom Rules
sing_box_config_custom_internal_rules: []
sing_box_config_custom_direct_rules: []

# 对应 /etc/sing-box/config.json 中 experimental 配置项
sing_box_config_clash_api_secret: ""
sing_box_config_clash_api_external_controller: "0.0.0.0:9090"
sing_box_config_clash_api_external_ui: yacd
# 是否在启动 sing-box.service 之前先移除 clash_api.external_ui 目录
# 这样可触发 sing-box 重新下载 clash_api.external_ui
sing_box_config_clash_api_external_ui_reinstall: false

# 覆盖 sing-box-config-updater 的 systemd timer 与 systemd service 状态
# 用于应对当前大多数"服务商"开始订阅链接强制"阅后即焚"
# choices: [reloaded, restarted, started, stopped]
sing_box_config_updater_timer_enabled: true
sing_box_config_updater_timer_interval: 1d
sing_box_config_updater_timer_state: started
sing_box_config_updater_service_state: started

# ansible.builtin.systemd_service active state
sing_box_config_updater_service_active_state: ['started', 'restarted']

# sing_box_config_subscriptions 的内容将会原样写入 "{{ sing_box_state_config_dir }}/subscriptions.json"
# 而 "{{ sing_box_state_config_dir }}/subscriptions.json" 会作为 sing-box-config 程序的输入文件
sing_box_config_subscriptions: {}
#   # Example 1: Remote subscription with SIP002 format (Shadowsocks)
#   provider_remote_sip002:
#     type: remote
#     format: sip002
#     enabled: true
#     url: "https://sub.example.com/api/v1/client/subscribe?token=YOUR_TOKEN_HERE"
#     exclude:
#       - "过期|Expire|\\d+(\\.\\d+)? ?GB|流量|Traffic|QQ群|官网|Premium"
#
#   # Example 2: Remote subscription with sing-box native format (default format)
#   provider_remote_singbox:
#     type: remote
#     format: sing-box
#     enabled: true
#     url: "https://sub.example.net/sing-box-config"
#
#   # Example 3: Local file subscription (sing-box format)
#   provider_local_file:
#     type: local
#     format: sing-box
#     path: "/etc/sing-box/local-proxies.json"
#
#   # Example 4: Inline subscription (sing-box format)
#   provider_inline_singbox:
#     type: inline
#     format: sing-box
#     outbounds:
#       - type: shadowsocks
#         tag: "ss-inline-1"
#         server: "1.2.3.4"
#         server_port: 8388
#         method: "aes-256-gcm"
#         password: "password"
#
#   # Example 5: Inline subscription (SIP002 format)
#   provider_inline_sip002:
#     type: inline
#     format: sip002
#     content: |
#       c3M6Ly9ZMmhoWTJoaE1qQXRhV1YwWmkxd2IyeDVNVE13TlRwd1lYTnpkMjl5WkFAMS4yLjMuNDo4
#       Mzg4I0V4YW1wbGUxCnNzOi8vWTJoaFkyaGhNakF0YVdWMFppMXdiMng1TVRNd05UcHdZWE56ZDI5
#       eVpBQDEuMi4zLjQ6ODQ4OCNFeGFtcGxlMgo=
