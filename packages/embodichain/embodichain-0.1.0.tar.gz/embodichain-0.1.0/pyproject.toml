[build-system]
# Use the legacy setuptools backend so the existing `setup.py` (which dynamically
# detects torch and builds C/CUDA extensions via torch.utils.cpp_extension)
# is still executed during build. This is a minimal, non-opinionated pyproject
# that modernizes the package while preserving the custom extension build steps.
requires = ["setuptools>=61.0", "wheel"]
build-backend = "setuptools.build_meta"


# Note:
# - Building the torch extensions requires a working PyTorch installation
#   available at build time (or FORCE_CUDA=1 for cross-compilation). We keep
#   the extension-building logic in `setup.py` because it needs to import
#   `torch` at build time to select CUDA/Cpp extension classes.
# - If you prefer a pure PEP 517 build without a legacy setup.py, we can
#   refactor the extension-building logic into a custom build backend plugin.

[project]
name = "embodichain"
description = "An end-to-end, GPU-accelerated, and modular platform for building generalized Embodied Intelligence."
readme = "README.md"
authors = [ { name = "EmbodiChain Developers" } ]
requires-python = ">=3.10"
dynamic = ["version"]

# Core install dependencies (kept from requirements.txt). Some VCS links are
# specified using PEP 508 direct references where present.
dependencies = [
  "dexsim_engine==0.3.9",
  "setuptools>=78.1.1",
  "gymnasium>=0.29.1",
  "langchain",
  "langchain-openai",
  "toppra==0.6.3",
  "pin",
  "pin-pink",
  "casadi",
  "qpsolvers==4.8.1",
  "py_opw_kinematics==0.1.6",
  "pytorch_kinematics==0.7.6",
  "polars==1.31.0",
  "PyYAML>=6.0",
  "accelerate>=1.10.0",
  "wandb>=0.21.0",
  "tensorboard>=2.20.0",
  "transformers>=4.53.0",
  "diffusers>=0.32.1",
  "deepspeed>=0.16.2",
  "ortools",
  "prettytable",
  "black==24.3.0",
  "fvcore",
  "h5py",
]

[project.optional-dependencies]
lerobot = [
  "lerobot==0.4.2"
]

[tool.setuptools.dynamic]
version = { file = ["VERSION"] }

[tool.setuptools.packages.find]
where = ["."]
exclude = ["docs"]

[tool.black]
