"""Test module for {{ name }}.

Auto-generated by Framework M Studio.
"""

from __future__ import annotations

import pytest


class Test{{ name }}:
    """Tests for {{ name }} DocType."""

{% if fields %}
    def test_create_{{ snake_name }}(self) -> None:
        """Test creating a {{ name }} instance."""
        from {{ module }} import {{ name }}

        doc = {{ name }}(
{% for field in fields if field.required %}
            {{ field.name }}={{ field.test_value }},
{% endfor %}
        )
        assert doc is not None
{% for field in fields if field.required %}
        assert doc.{{ field.name }} == {{ field.test_value }}
{% endfor %}

    def test_{{ snake_name }}_defaults(self) -> None:
        """Test default values for {{ name }}."""
        from {{ module }} import {{ name }}

        doc = {{ name }}(
{% for field in fields if field.required %}
            {{ field.name }}={{ field.test_value }},
{% endfor %}
        )
{% for field in fields if field.default %}
        assert doc.{{ field.name }} == {{ field.default }}
{% endfor %}

{% if has_required_fields %}
    def test_{{ snake_name }}_validation(self) -> None:
        """Test validation for required fields."""
        from {{ module }} import {{ name }}
        import pydantic

        with pytest.raises(pydantic.ValidationError):
            {{ name }}()  # Missing required fields
{% endif %}
{% else %}
    def test_create_{{ snake_name }}(self) -> None:
        """Test creating a {{ name }} instance."""
        from {{ module }} import {{ name }}

        doc = {{ name }}()
        assert doc is not None
{% endif %}
