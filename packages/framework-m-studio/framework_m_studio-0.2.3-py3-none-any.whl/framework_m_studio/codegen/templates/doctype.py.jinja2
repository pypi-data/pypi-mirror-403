"""Auto-generated DocType: {{ name }}.

Generated by Framework M Studio.
"""

from __future__ import annotations

from typing import ClassVar

{% if imports %}
{% for imp in imports %}
{{ imp }}
{% endfor %}
{% endif %}
from pydantic import Field
from framework_m.core.base import BaseDocType


class {{ name }}(BaseDocType):
{% if docstring %}
    """{{ docstring }}"""

{% endif %}
{% if fields %}
{% for field in fields %}
{%- set has_field_args = field.description or field.label or field.validators %}
{% if has_field_args %}
    {{ field.name }}: {{ field.type }}{{ ' | None' if not field.required else '' }} = Field(
{%- if field.required and (not field.default or field.default == 'None') %}...{% elif field.default and field.default != 'None' %}{{ field.default }}{% else %}None{% endif %}
{%- if field.description %}, description="{{ field.description }}"{% endif %}
{%- if field.label %}, label="{{ field.label }}"{% endif %}
{%- if field.validators %}
{%- if field.validators.min_length %}, min_length={{ field.validators.min_length }}{% endif %}
{%- if field.validators.max_length %}, max_length={{ field.validators.max_length }}{% endif %}
{%- if field.validators.pattern %}, pattern=r"{{ field.validators.pattern }}"{% endif %}
{%- if field.validators.min_value is defined %}, ge={{ field.validators.min_value }}{% endif %}
{%- if field.validators.max_value is defined %}, le={{ field.validators.max_value }}{% endif %}
{%- endif %}
    )
{% elif field.required and not field.default %}
    {{ field.name }}: {{ field.type }}
{% elif field.default %}
    {{ field.name }}: {{ field.type }} = {{ field.default }}
{% else %}
    {{ field.name }}: {{ field.type }} | None = None
{% endif %}
{% endfor %}
{% else %}
    pass
{% endif %}

    class Meta:
        """DocType metadata."""

        api_resource: ClassVar[bool] = True  # Expose via REST API
        show_in_desk: ClassVar[bool] = True  # Show in Desk UI

{% if config %}
    class Config:
{% if config.tablename %}
        tablename = "{{ config.tablename }}"
{% endif %}
{% if config.verbose_name %}
        verbose_name = "{{ config.verbose_name }}"
{% endif %}
{% if config.is_submittable %}
        is_submittable = True
{% endif %}
{% endif %}
