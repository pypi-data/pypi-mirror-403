"use strict";(self.webpackChunklino_react=self.webpackChunklino_react||[]).push([[2123,2298,7211,7667],{2137:(t,e,n)=>{n.d(e,{Q:()=>s});var o=n(4881);function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function i(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var s={DEFAULT_MASKS:{pint:/[\d]/,int:/[\d\-]/,pnum:/[\d\.]/,money:/[\d\.\s,]/,num:/[\d\-\.]/,hex:/[0-9a-f]/i,email:/[a-z0-9_\.\-@]/i,alpha:/[a-z_]/i,alphanum:/[a-z0-9_]/i},getRegex:function(t){return s.DEFAULT_MASKS[t]?s.DEFAULT_MASKS[t]:t},onBeforeInput:function(t,e,n){!n&&o.DomHandler.isAndroid()&&this.validateKey(t,t.data,e)},onKeyPress:function(t,e,n){n||o.DomHandler.isAndroid()||t.ctrlKey||t.altKey||t.metaKey||this.validateKey(t,t.key,e)},onPaste:function(t,e,n){if(!n){var o=this.getRegex(e);i(t.clipboardData.getData("text")).forEach(function(e){if(!o.test(e))return t.preventDefault(),!1})}},validateKey:function(t,e,n){null!=e&&(e.length<=2&&(this.getRegex(n).test(e)||t.preventDefault()))},validate:function(t,e){var n=t.target.value,o=!0,r=this.getRegex(e);return n&&!r.test(n)&&(o=!1),o}}},2617:function(t,e,n){var o,r=this&&this.__createBinding||(Object.create?function(t,e,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,r)}:function(t,e,n,o){void 0===o&&(o=n),t[o]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||(o=function(t){return o=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e},o(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n=o(t),s=0;s<n.length;s++)"default"!==n[s]&&r(e,t,n[s]);return i(e,t),e}),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.QuickFilter=e.AutoComplete=e.name=void 0,e.name="AutoComplete";const l=a(n(6540)),u=a(n(5556)),c=n(6606),h=n(2756),p=s(n(8524));let d;d={queryString:Promise.resolve().then(()=>s(n(8091))),prAutoComplete:Promise.resolve().then(()=>s(n(459))),AbortController:Promise.resolve().then(()=>s(n(5568))),i18n:Promise.resolve().then(()=>s(n(5721))),u:Promise.resolve().then(()=>s(n(7540)))};(0,c.RegisterImportPool)(d);class f extends h.LeafComponentInput{constructor(t){super(t),this.onKeyDown=t=>{if(super.onKeyDown(t),["Enter","NumpadEnter"].includes(t.code)&&this.inputEl.getOverlay()&&t.stopPropagation(),["ArrowDown","ArrowUp"].includes(t.code)){if(this.inputEl&&!this.inputEl.getOverlay())this.state.rows.length||this.getChoices(this.state[p.URL_PARAM_FILTER]),this.inputEl.show();else if(!this.state.lazyLoading){const t=this.scroller.getElementRef().current.querySelector("li.p-highlight");if(t){const{top:e,bottom:n}=this.scroller.getElementRef().current.getBoundingClientRect(),o=t.getBoundingClientRect();o.top<e?t.scrollIntoView(!0):o.bottom>n&&t.scrollIntoView(!1)}}t.stopPropagation()}},this.itemTemplate=t=>{const e="object"==typeof t?t.text:t;return l.default.createElement("div",null,e||" ")},this.getChoices=(t,e)=>{this.controller.abort(),this.controller=new this.ex.AbortController.default;const n=(e=e||this.state[p.URL_PARAM_LIMIT])===this.state[p.URL_PARAM_LIMIT]?this.state[p.URL_PARAM_START]:this.state[p.URL_PARAM_LIMIT];this.upController.actionHandler.silentFetch({path:this.choicesURL(t,n,e),signal:this.controller.signal}).then(n=>{let o=n.rows;this.state.rows.length&&(o=o.filter(t=>""!==t.text&&null!==t.value)),o=this.state.rows.concat(o),(this.props.elem.field_options||{}).allowCreate&&0===o.filter(e=>e.text==t).length&&o.unshift({text:t,value:t}),this.setState({[p.URL_PARAM_FILTER]:t,[p.URL_PARAM_LIMIT]:e,count:n.count,lazyLoading:!1,rows:o})})},this.state={...this.state,count:999,[p.URL_PARAM_FILTER]:"",[p.URL_PARAM_LIMIT]:15,[p.URL_PARAM_START]:0,lazyLoading:!1,rows:[],value:null},this.hasClearButton=!1,this.getChoices=this.getChoices.bind(this),this.getLinoInput=this.getLinoInput.bind(this),this.itemTemplate=this.itemTemplate.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}onReady(){if(this.hasClearButton&&!this.clear)throw Error("clear NotImplemented");const t=this.getValue();this.setState({[p.URL_PARAM_FILTER]:t.text,[p.URL_PARAM_LIMIT]:this.props.urlParams[p.URL_PARAM_LIMIT],value:t}),this.controller=new this.ex.AbortController.default}getLinoInput(t={}){return null===this.state.value?null:l.default.createElement(l.default.Fragment,null,l.default.createElement(this.ex.prAutoComplete.AutoComplete,{autoFocus:this.leafIndexMatch(),completeMethod:t=>{"click"===t.originalEvent.type&&this.state.rows.length?this.inputEl.show():(this.state.rows=[],this.getChoices(t.query,this.state[p.URL_PARAM_LIMIT]))},dropdown:!0,field:"text",itemTemplate:this.itemTemplate,onChange:t=>this.setState({value:Object.assign(this.state.value,{text:t.value,value:null}),rows:[],[p.URL_PARAM_LIMIT]:this.props.urlParams[p.URL_PARAM_LIMIT]}),onFocus:t=>{this.select(t.target)},onSelect:this.onSelect,onShow:()=>{this.clearButton&&(this.clearButton.style.visibility="hidden")},ref:this.onInputRef,scrollHeight:"200px",suggestions:this.state.rows,tabIndex:this.props.tabIndex,value:this.state.value.text,virtualScrollerOptions:{itemSize:35,lazy:!0,loading:this.state.lazyLoading,onScrollIndexChange:t=>{const e=this.state[p.URL_PARAM_LIMIT];e-t.first<15&&!this.state.lazyLoading&&this.state.count>e&&(this.setState({lazyLoading:!0}),this.getChoices(this.state[p.URL_PARAM_FILTER],e+15))},ref:t=>this.scroller=t,scrollHeight:"195px",style:{minWidth:"30ch"}},...t}),this.hasClearButton&&this.props.elem.field_options.allowBlank&&this.state.value.text&&l.default.createElement("i",{key:this.state.touch,ref:t=>this.clearButton=t,className:"pi pi-times l-fk-clear",onClick:this.clear,style:{visibility:"visible",cursor:"pointer"}}))}}e.AutoComplete=f,f.requiredModules=["prAutoComplete","AbortController"].concat(h.LeafComponentInput.requiredModules),f.iPool=Object.assign(d,h.LeafComponentInput.iPool.copy());class g extends f{async prepare(){await super.prepare(),this.ex.i18n=this.ex.i18n.default,this.focus=this.ex.u.debounce(this.focus.bind(this),200)}constructor(t){super(t),this.focusSet=!1,this.wrapperClasses=["l-grid-quickfilter"],this.styleClasses=[],this.choicesURL=this.choicesURL.bind(this),this.getLinoInput=this.getLinoInput.bind(this),this.getValue=this.getValue.bind(this),this.onSelect=this.onSelect.bind(this)}getLinoInput(){return super.getLinoInput({placeholder:this.ex.i18n.t("Quick search"),style:{width:this.props.wide?"100%":void 0,marginRight:this.props.wide?"1ch":void 0,marginLeft:this.props.wide?"1ch":void 0}})}getValue(){return{text:this.props.urlParams[p.URL_PARAM_FILTER],value:null}}choicesURL(t,e,n){return`choices/${this.props.urlParams.packId}/${this.props.urlParams.actorId}?${this.ex.queryString.default.stringify(Object.assign(this.upController.actionHandler.defaultStaticParams(),{[p.URL_PARAM_FILTER]:t,[p.URL_PARAM_START]:e,[p.URL_PARAM_LIMIT]:n}))}`}focus(){this.focusSet||(this.focusSet=!0,super.focus())}onSelect(t){const e=t.value.value,n=this.upController;n.history.pushPath({pathname:`/api/${this.props.urlParams.packId}/${this.props.urlParams.actorId}/${e}`,params:n.actionHandler.defaultStaticParams()})}render(){return this.state.ready?this.getLinoInput():null}}e.QuickFilter=g,g.requiredModules=["queryString","i18n","u"].concat(f.requiredModules),g.propTypes={...f.propTypes,wide:u.default.bool},g.defaultProps={...f.defaultProps,editing_mode:!0,elem:{},tabIndex:0,wide:!1,[p.URL_PARAM_WINDOW_TYPE]:p.WINDOW_TYPE_UNKNOWN,leafIndex:0}},4587:(t,e,n)=>{n.d(e,{A:()=>l});const o="%[a-f0-9]{2}",r=new RegExp("("+o+")|([^%]+?)","gi"),i=new RegExp("("+o+")+","gi");function s(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(1===t.length)return t;e=e||1;const n=t.slice(0,e),o=t.slice(e);return Array.prototype.concat.call([],s(n),s(o))}function a(t){try{return decodeURIComponent(t)}catch{let e=t.match(r)||[];for(let n=1;n<e.length;n++)e=(t=s(e,n).join("")).match(r)||[];return t}}function l(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return function(t){const e={"%FE%FF":"��","%FF%FE":"��"};let n=i.exec(t);for(;n;){try{e[n[0]]=decodeURIComponent(n[0])}catch{const t=a(n[0]);t!==n[0]&&(e[n[0]]=t)}n=i.exec(t)}e["%C2"]="�";const o=Object.keys(e);for(const n of o)t=t.replace(new RegExp(n,"g"),e[n]);return t}(t)}}},4742:(t,e,n)=>{function o(t,e){const n={};if(Array.isArray(e))for(const o of e){const e=Object.getOwnPropertyDescriptor(t,o);e?.enumerable&&Object.defineProperty(n,o,e)}else for(const o of Reflect.ownKeys(t)){const r=Object.getOwnPropertyDescriptor(t,o);if(r.enumerable){e(o,t[o],t)&&Object.defineProperty(n,o,r)}}return n}n.d(e,{b:()=>o})},5721:(t,e,n)=>{n.r(e),n.d(e,{TransInit:()=>u,default:()=>c});var o=n(4467),r=n(8524),i=n(2635),s=n(4997),a=n(1347),l=n(2389),u=function(t,e){var n=new s.A;n.addDetector({name:"LinoLanguageDetector",lookup:function(e){return t.value[r.URL_PARAM_USER_LANGUAGE]},cacheUserLanguage:function(e,n){t.fillPlaceHolder(r.PARAM_TYPE_WINDOW,r.URL_PARAM_USER_LANGUAGE,e),t.history.replaceByType((0,o.A)({},r.URL_PARAM_USER_LANGUAGE,e),r.PARAM_TYPE_WINDOW,!1,!0),(0,r.debugMessage)("LinoLanguageDetector: cached language",e)}}),i.Ay.use(a.A).use(n).use(l.initReactI18next).init({debug:!1,load:"languageOnly",fallbackLng:window.Lino.i18nFallbackLng,keySeparator:!1,interpolation:{escapeValue:!1},react:{useSuspense:!0},backend:{loadPath:"/static/react/locales/{{lng}}/{{ns}}.json"},detection:{order:["queryString","cookie","LinoLanguageDetector","localStorage"],lookupQuerystring:r.URL_PARAM_USER_LANGUAGE,lookupCookie:r.URL_PARAM_USER_LANGUAGE,lookupLocalStorage:r.URL_PARAM_USER_LANGUAGE,caches:["LinoLanguageDetector","localStorage","cookie"]}}),e(i.Ay)};const c=i.Ay},8166:(t,e,n)=>{n.d(e,{I:()=>s});var o=n(6540),r=n(8267);function i(){return i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},i.apply(null,arguments)}var s=o.memo(o.forwardRef(function(t,e){var n=r.z.getPTI(t);return o.createElement("svg",i({ref:e,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 14C5.61553 14 4.26215 13.5895 3.11101 12.8203C1.95987 12.0511 1.06266 10.9579 0.532846 9.67879C0.00303296 8.3997 -0.13559 6.99224 0.134506 5.63437C0.404603 4.2765 1.07129 3.02922 2.05026 2.05026C3.02922 1.07129 4.2765 0.404603 5.63437 0.134506C6.99224 -0.13559 8.3997 0.00303296 9.67879 0.532846C10.9579 1.06266 12.0511 1.95987 12.8203 3.11101C13.5895 4.26215 14 5.61553 14 7C14 8.85652 13.2625 10.637 11.9497 11.9497C10.637 13.2625 8.85652 14 7 14ZM7 1.16667C5.84628 1.16667 4.71846 1.50879 3.75918 2.14976C2.79989 2.79074 2.05222 3.70178 1.61071 4.76768C1.16919 5.83358 1.05367 7.00647 1.27876 8.13803C1.50384 9.26958 2.05941 10.309 2.87521 11.1248C3.69102 11.9406 4.73042 12.4962 5.86198 12.7212C6.99353 12.9463 8.16642 12.8308 9.23232 12.3893C10.2982 11.9478 11.2093 11.2001 11.8502 10.2408C12.4912 9.28154 12.8333 8.15373 12.8333 7C12.8333 5.45291 12.2188 3.96918 11.1248 2.87521C10.0308 1.78125 8.5471 1.16667 7 1.16667ZM4.66662 9.91668C4.58998 9.91704 4.51404 9.90209 4.44325 9.87271C4.37246 9.84333 4.30826 9.8001 4.2544 9.74557C4.14516 9.6362 4.0838 9.48793 4.0838 9.33335C4.0838 9.17876 4.14516 9.0305 4.2544 8.92113L6.17553 7L4.25443 5.07891C4.15139 4.96832 4.09529 4.82207 4.09796 4.67094C4.10063 4.51982 4.16185 4.37563 4.26872 4.26876C4.3756 4.16188 4.51979 4.10066 4.67091 4.09799C4.82204 4.09532 4.96829 4.15142 5.07887 4.25446L6.99997 6.17556L8.92106 4.25446C9.03164 4.15142 9.1779 4.09532 9.32903 4.09799C9.48015 4.10066 9.62434 4.16188 9.73121 4.26876C9.83809 4.37563 9.89931 4.51982 9.90198 4.67094C9.90464 4.82207 9.84855 4.96832 9.74551 5.07891L7.82441 7L9.74554 8.92113C9.85478 9.0305 9.91614 9.17876 9.91614 9.33335C9.91614 9.48793 9.85478 9.6362 9.74554 9.74557C9.69168 9.8001 9.62748 9.84333 9.55669 9.87271C9.4859 9.90209 9.40996 9.91704 9.33332 9.91668C9.25668 9.91704 9.18073 9.90209 9.10995 9.87271C9.03916 9.84333 8.97495 9.8001 8.9211 9.74557L6.99997 7.82444L5.07884 9.74557C5.02499 9.8001 4.96078 9.84333 4.88999 9.87271C4.81921 9.90209 4.74326 9.91704 4.66662 9.91668Z",fill:"currentColor"}))}));s.displayName="TimesCircleIcon"},8409:(t,e,n)=>{function o(t,e){if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===t||""===e)return[];const n=t.indexOf(e);return-1===n?[]:[t.slice(0,n),t.slice(n+e.length)]}n.d(e,{A:()=>o})}}]);
//# sourceMappingURL=main.AutoComplete_LinoToolbar.f677142721e101799758.js.map